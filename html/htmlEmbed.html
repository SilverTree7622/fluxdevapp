<html>
    <head>
        <meta charset="UTF-8">
        <title>ruffle embeded html</title>
        <meta name="robots" content="noindex, nofollow, noimageindex">
        <style>
            body {
                background-color: #181818;
            }
        </style>
    </head>

    <body style="margin: 0px; padding: 0px; overflow: hidden;">
        <iframe
            id="html_container"
            allowfullscreen="true"
            allowtransparency='true'
            scrolling='no'
            referrerpolicy="no-referrer"
            sandbox="allow-scripts allow-same-origin allow-popups allow-downloads"
            style="border-width: 0px; margin: 0px; padding: 0px; width:100%; height:100%;"
        ></iframe>
        <script>
            (() => {
                // http://127.0.0.1:9999/htmlEmbed.html?html=.%2F1703150068552_watermelon-main%2Fservice%2Findex.html
                const paramsRaw = new URLSearchParams(window.location.search);
                let params = {};
                for (const value of paramsRaw.keys()) {
                    params[value] = paramsRaw.get(value);
                }
                const browsermode = 'mobile';
                console.log('params: ', params);

                if (!params) return;
                if (!params.html) return;
                
                // interact events
                window.addEventListener("message", (evt) => {
                    if (!evt.origin === 'http://localhost:3000' || !evt.origin === 'https://flux.ngo') {
                        console.warn('not allowed');
                        return false;
                    }
                });

                const container = document.getElementById('html_container');
                container.src = params.html;
                return;
                // // audio element for the auto swf audio play
                // const audioUrl = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV";
                // const audioElement = document.createElement('audio');
                // audioElement.addEventListener('playing', function() {
                //     prereq.audio = 1;
                //     console.log('audio initialized');
                //     preReqUpdated();
                // });
                // document.body.appendChild(audioElement);
                // audioElement.setAttribute('src', audioUrl);
                // audioElement.load();
                // audioElement.muted = true;
                // audioElement.play();
                // audioElement.muted = false;
            })();
        </script>
        <audio src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA//OEAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAEAAABIADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV6urq6urq6urq6urq6urq6urq6urq6urq6v////////////////////////////////8AAAAATGF2YzU2LjQxAAAAAAAAAAAAAAAAJAAAAAAAAAAAASDs90hvAAAAAAAAAAAAAAAAAAAA//MUZAAAAAGkAAAAAAAAA0gAAAAATEFN//MUZAMAAAGkAAAAAAAAA0gAAAAARTMu//MUZAYAAAGkAAAAAAAAA0gAAAAAOTku//MUZAkAAAGkAAAAAAAAA0gAAAAANVVV">
        </audio>
    </body>
</html>
