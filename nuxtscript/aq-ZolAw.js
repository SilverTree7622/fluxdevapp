import{d as $,r as k,E as se,o as E,c as O,a as v,F as X,t as z,n as H,g as i,G as re,f as U,H as V,I as le,e as f,u as Z,j as ee,m as te,b as oe,J as de,K,q as ne,h as T,y as R,L,C as ce,M as ue,l as pe,N as fe,k as me,O as ge,P as J,Q as D,R as b,s as we,w as ve,v as ye,z as j,x as he,A as be}from"./cyCOdGck.js";import{u as G,a as Se,b as _e,c as xe,_ as Ie,d as ke}from"./CAC1Cd_U.js";import{u as Ae,r as Ce}from"./DHiFsI9H.js";import{u as Te,a as Le,b as Y}from"./FTlpcGvK.js";import{U as Q}from"./D2ZKPdBb.js";import{U as F}from"./CeVrTxRF.js";import"./85eLLaat.js";const Fe={class:"h-6 w-6"},Be={class:"sr-only"},Ee={class:"absolute z-10 invisible inline-block px-3 py-1 transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip"},He=$({__name:"Btn",props:{direction:{},customClass:{default:""},edge:{default:"MIDDLE"},type:{default:"SIMPLE"},isAble:{type:Boolean,default:!0},txt:{default:[]},mouseover:{type:Function,default:()=>{}},click:{type:Function,default:()=>{}},keydown:{type:Function,default:()=>{}},keyup:{type:Function,default:()=>{}}},setup(x,{expose:n}){const e=x;let o="";const m=k({isToggled:!1}),A=()=>{e.type==="TOGGLE"&&(m.isToggled=!m.isToggled),e!=null&&e.click&&e.click()};return se(()=>{e.direction==="left"?(e.edge==="LEFT"&&(o="rounded-t-full py-1"),e.edge==="RIGHT"&&(o="rounded-b-full py-1"),e.edge==="MIDDLE"&&(o="py-1")):e.direction==="top"?(e.edge==="LEFT"&&(o="rounded-l-full"),e.edge==="RIGHT"&&(o="rounded-r-full")):e.direction==="right"?(e.edge==="LEFT"&&(o="rounded-t-full py-1"),e.edge==="RIGHT"&&(o="rounded-b-full py-1"),e.edge==="MIDDLE"&&(o="py-1")):e.direction==="bottom"&&(e.edge==="LEFT"&&(o="rounded-l-full"),e.edge==="RIGHT"&&(o="rounded-r-full")),e.isAble?o+=" hover:bg-gray-50/10 text-gray-400 cursor-pointer":o+=" text-gray-600 cursor-default",e!=null&&e.customClass&&(o+=` ${e.customClass}`)}),n({isToggled:m.isToggled}),(S,c)=>(E(),O(re,null,[v("button",{class:H(["inline-flex flex-auto items-center justify-center group text-sm font-medium clicky-snd-btn",i(o)]),onMouseover:c[0]||(c[0]=(...u)=>e.mouseover&&e.mouseover(...u)),onClick:A,onKeydown:c[1]||(c[1]=(...u)=>e.keydown&&e.keydown(...u)),onKeyup:c[2]||(c[2]=(...u)=>e.keyup&&e.keyup(...u))},[v("div",Fe,[X(S.$slots,"default")]),v("span",Be,z(e.txt[0]),1)],34),v("div",Ee,z(e.txt[1]),1)],64))}}),Me=$({__name:"BtnList",props:{direction:{default:"bottom"},isHide:{type:Boolean,default:!1}},setup(x){const n=x,e=k({container:"w-full h-10 bottom-0",wrapper:"flex-wrap flex-row mx-auto"}),o=()=>{n.direction==="left"?(e.container=`w-12 top-[50%] -translate-y-1/2 ${n.isHide?"-left-[36px]":"left-0"}`,e.wrapper="flex-col mx-auto my-auto"):n.direction==="top"?(e.container=`w-full h-10 -translate-x-1/2 left-1/2 ${n.isHide?"-top-[30px]":"top-0"}`,e.wrapper="flex-wrap flex-row mx-auto"):n.direction==="right"?(e.container=`w-12 h-[50vh] max-h-[320px] fixed top-1/2 -translate-y-1/2 ${n.isHide?"-right-[36px]":"right-0"}`,e.wrapper="rounded-full bg-gradient-to-l flex-col mx-auto my-auto"):n.direction==="bottom"&&(e.container=`w-full h-10 ${n.isHide?"-bottom-[30px]":"bottom-0"}`,e.wrapper="rounded-full bg-gradient-to-t flex-wrap flex-row mx-auto")};return U(async()=>{await V(),o()}),(m,A)=>(E(),O("div",{class:H(["z-10 ml-auto px-auto",i(e).container])},[v("div",{class:H(["w-full h-full flex max-w-lg mx-auto px-auto from-black",i(e).wrapper])},[X(m.$slots,"default")],2)],2))}}),Re=le("knobStore",()=>{const x=G(),n=f(),e=f(),o=k({isMuted:!1,prevVolume:0,volume:1}),m=l=>{n.value=l},A=()=>{n.value&&(n.value.hide(),n.value=void 0),e.value&&(e.value=void 0)},S=l=>{l===0?(o.prevVolume,o.isMuted=!0,o.prevVolume=o.volume,o.volume=l):o.isMuted?(o.isMuted=!1,o.volume=o.prevVolume):o.volume=l,e.value&&x.sendPostMsg(e.value,{audio:{volume:o.volume}})},c=()=>o.isMuted;return{register:m,onBeforeUnmount:A,setSndVolume:S,getIsMuted:c,getVolume:()=>o.volume,toggleMuteSnd:()=>{c()?S(1):S(o.prevVolume)},show:()=>{n.value&&n.value.show()}}}),$e={class:"fixed w-full z-50 text-gray-200 mx-auto px-auto"},Oe=$({__name:"Play",props:{item:{type:Object,required:!0},iframeRef:{type:HTMLElement,default:null},direction:{type:String,default:"bottom"},screen:{type:String,default:"PORTRAIT"}},async setup(x){let n,e;const o=x,{LOCAL_STORAGE_PLAY_CONTROLLER_KEY:m,LOCAL_STORAGE_FAVORITE_KEY:A}=Z().public.CONSTANTS;G();const S=ee(),c=Se();_e(),Re(),te();const u=xe();oe();const y=f(null),g=f(null);f(null);const l=f(),P=f(!1),r=k({isFavorite:!1,isPending:!1});f(o.item.file_type==="swf");const p=k({direction:"bottom",isHide:!1,ratio:{x:(window.innerWidth/2-12)/window.innerWidth,y:(window.innerHeight-36)/window.innerHeight},isPopShowing:!1}),I=([n,e]=de(()=>Q.getItem(m)),n=await n,e(),n);I!=null&&I.ratio&&(p.ratio.x=I.ratio.x,p.ratio.y=I.ratio.y);const{x:C,y:M,style:W}=Te(g,{initialValue:{x:p.ratio.x*window.innerWidth,y:p.ratio.y*window.innerHeight}});Le({passive:!1,onEventFired(t){t.type==="keydown"&&(!t.ctrlKey&&p.isHide||(t.key==="h"&&_(),t.key==="i"&&s(),t.key===";"&&w(),t.key==="Escape"&&w(),t.key))}});const a=t=>{Q.setItem(m,t?{...p,...t}:{...p})},h=()=>{setTimeout(()=>{const t={x:C.value/window.innerWidth,y:M.value/window.innerHeight};C.value=window.innerWidth*t.x,M.value=window.innerHeight*t.y,a(t)},1)},_=()=>{const t=L("page, content, back_2_home");S.show({msg:t,btn:"yesno",onYes:()=>{ue()}})},d=async()=>{if(r.isPending)return;r.isPending=!0;const{title:t}=o.item;await u.chckUserAlreadyAdded(t)?(u.remove(t),r.isFavorite=!1):(u.add(t),r.isFavorite=!0,l.value&&l.value.animOnClickAddFavorite()),r.isPending=!1},s=()=>{c.show(o.item,!1)},w=()=>{p.isHide=!p.isHide,a()};return U(async()=>{await V(),c.registerDetail(y.value),document.addEventListener("onresize",h),K.onMountedFullscreenExit(()=>{P.value=!1});const t=await u.getList();if(t.length===0){r.isFavorite=!1;return}r.isFavorite=t.findIndex(B=>B===o.item.title)>-1}),ne(()=>{c.onBeforeUnmount(),document.removeEventListener("onresize",h),K.onBeforeUnmountFullscreenExit()}),(t,B)=>{const N=He,ie=Ie,ae=Me;return E(),O("div",$e,[T(ae,{isHide:i(p).isHide,direction:o.direction},{default:R(()=>[T(N,{direction:o.direction,customClass:"border-1 border-gray-400",edge:"LEFT",txt:[("useLang"in t?t.useLang:i(L))("common, home"),("useLang"in t?t.useLang:i(L))("common, home")],click:()=>_()},{default:R(()=>[T(i(ce))]),_:1},8,["direction","txt","click"]),T(N,{direction:o.direction,customClass:"border-1 border-gray-400",txt:[("useLang"in t?t.useLang:i(L))("common, share"),("useLang"in t?t.useLang:i(L))("common, share")],click:()=>("useClickShare"in t?t.useClickShare:i(Ae))()},{default:R(()=>[T(i(Ce))]),_:1},8,["direction","txt","click"]),T(N,{direction:o.direction,customClass:"border-1 border-gray-400",edge:"RIGHT",txt:[("useLang"in t?t.useLang:i(L))("common, favorite"),("useLang"in t?t.useLang:i(L))("common, favorite")],click:()=>d()},{default:R(()=>[T(ie,{ref_key:"$favoriteBtn",ref:l,isSelected:i(r).isFavorite},null,8,["isSelected"])]),_:1},8,["direction","txt","click"])]),_:1},8,["isHide","direction"])])}}}),Pe={version:"1.0.0",icon:"",description:"offline mini games platform",orientation:"portrait",content:"index.html",oauth:{google:!1},customAppName:"Flux Games",admob:{and:{appId:"ca-app-pub-2649247683134200~4871348061",openId:"ca-app-pub-3940256099942544/9257395921",bannerId:["ca-app-pub-2649247683134200/4060445800","ca-app-pub-2649247683134200/7247306337"],interstitialId:"ca-app-pub-3940256099942544/1033173712",interstitialVideoId:"ca-app-pub-3940256099942544/8691691433",rewardedId:["ca-app-pub-2649247683134200/4909998207","ca-app-pub-2649247683134200/6677564342"],rewardedInterstitialId:"ca-app-pub-3940256099942544/5354046379",nativeId:"ca-app-pub-3940256099942544/2247696110",nativeAdvancedId:"ca-app-pub-3940256099942544/1044960115"},ios:{appId:"ca-app-pub-2649247683134200~4871348061",openId:"ca-app-pub-3940256099942544/9257395921",bannerId:"ca-app-pub-2649247683134200/4060445800",interstitialId:"ca-app-pub-3940256099942544/1033173712",interstitialVideoId:"ca-app-pub-3940256099942544/8691691433",rewardedId:"ca-app-pub-2649247683134200/4909998207",rewardedInterstitialId:"ca-app-pub-3940256099942544/5354046379",nativeId:"ca-app-pub-3940256099942544/2247696110",nativeAdvancedId:"ca-app-pub-3940256099942544/1044960115"}}},Ne={icon:"",backgroundColor:"#181818",autoHide:!1,delay:6e3},De=!0,Ue=!0,Ve=!1,Ge=!1,We=!0,ze=!1,Ke=!0,Je={},je={},Ye={},q={app:Pe,splashConfig:Ne,fullscreen:De,useAdmob:Ue,enableCamera:Ve,useNavigationBar:Ge,useShare:We,useSwipe:ze,debugMode:Ke,android:Je,ios:je,electron:Ye},Qe={class:"text-center p-4"},it=$({__name:"[id]",setup(x){const{TOAST_ERROR_TIMEOUT:n,ADMOB:{BANNER_HEIGHT:e}}=Z().public.CONSTANTS,o=pe();te();const m=oe(),A=G(),S=ee(),c=fe(),u=me();ge();const y=k({id:-1,title:"",desc:"",src:"",path_thumbnail:"",path_video:"",path_infos:"",operations_mobile:"",operations_pc:"",operations_other:"",file_type:"html",link_data:"",rate:0,view:0,view_play:0,favorite_cnt:0,comment_cnt:0,version:"",state:"",is_hidden:!1,date_upload:"",date_update:"",screen:"PORTRAIT",ad_types:"",genres:[],tag_types:[]}),g=k({msg:"컨텐츠를 가져오는 중...",thumbnailSrc:"",isReadyCnt:0,isReadyCntMax:2,isUseQueryString:!1,url:"",isIframeSupported:!0,iframeClass:J(()=>D.isOnline()&&b.chckIsApp()?(console.log("isOnline && isApp"),`h-[calc(100vh-${e}px)] top-[calc(50%-${e/2}px)]`):(console.log("offline"),"h-[100vh] top-[50%]")).value,isIframeLoaded:!1}),l=k({isAboveAd:J(()=>b.chckIsApp()?D.isOnline():!1).value,isShow:!0,direction:"bottom"}),P=f();f();const r=f(),p=f(),I=f(),C=f(!0),M=()=>{try{const a=r.value.contentWindow;a&&(a.cordova=window.cordova,a.cordova_app=window.cordova_app,a.admob=window.admob,a.device=window.device,a.StatusBar=window.StatusBar,a.AndroidFullScreen=window.AndroidFullScreen,a.cordova.plugins=window.cordova.plugins)}catch(a){console.warn("Cordova 및 플러그인 주입 실패:",a)}},W=async(a,h,_,d)=>{const s=q;let w="";{const{rewardedId:t}=F.admob.getFromJson(b.getType(),s);Array.isArray(t)&&t.length>0?w=t[Math.floor(Math.random()*t.length)]:w=t}await F.admob.reward.showVideo(w,a,h,_)};return we(async()=>{const a=o.params.id.toString().replace(/\/$/,"");g.url=`/content/${a}/index.html`,setTimeout(()=>{Y(g.thumbnailSrc,{rel:"icon"})},100)}),U(async()=>{await V(),D.isOnline()?(console.log("is online"),g.iframeClass=`h-[calc(100vh-${e}px)] top-[calc(50%-${e/2}px)]`):(console.warn("is offline"),g.iframeClass="h-[100vh] top-[50%]"),p.value&&(C.value?p.value.show():p.value.hide()),I.value&&I.value.setQueueLoadEvt(d=>{Y(d,{rel:"icon"})}),g.isIframeSupported="srcdoc"in document.createElement("iframe"),g.isIframeSupported&&r.value&&(r.value.src=g.url,r.value.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms"),r.value.onload=()=>{M()},r.value.setAttribute("style","visibility: visible;"));const a=g.url.split("/"),h=a[a.length-2];console.log("gameTitle: ",h);const _=await ke(h);for(const d in _)y[d]=_[d];b.onMountedParent((d,s)=>{if(console.log("------------------------- from onMountedParent"),console.log("data, type: ",s,d),d==="ShowNavFooterPlay"&&(l.isShow=!0),d==="HideNavFooterPlay"&&(l.isShow=!1),d==="ShowRewardVideo"){const{reward:w,dismiss:t,error:B}=s;W(w,t,B)}d==="ShowToast"&&window.ShowToast&&(s.cmd?s.cmd==="REWARD_ON_DISMISS"&&m.error("reward is dismissed"):(s.type==="info"||s.type==="success"||s.type==="warning"||s.type==="error")&&m[s.type](s.msg)),d==="ShowFullDisplayPending"&&u.show({isShowHomeBtn:!1,isShowCloseBtn:!1}),d==="HideFullDisplayPending"&&u.hide()}),c.onMountedContent(y),await b.evt(async()=>{console.log("cordova check from web:",window,window.cordova),C.value=!1},async()=>{b.setOrientation(y.screen.toLowerCase()),y.screen==="LANDSCAPE"?l.direction="right":l.direction="bottom",await F.admob.init();const d=q,{bannerId:s}=F.admob.getFromJson(b.getType(),d);let w="";Array.isArray(s)&&s.length>0?w=s[Math.floor(Math.random()*s.length)]:w=s,await F.admob.showBanner(w),C.value=!1},async()=>{},async()=>{})}),ne(()=>{r.value&&(r.value.src=""),S.hide(),A.onBeforeUnmount(y),b.onBeforeUnmountParent(),c.onBeforeUnmountContent(y),b.chckIsApp()&&F.admob.hideBanner(),b.setOrientation("portrait")}),(a,h)=>{const _=Oe;return E(),O("div",{ref_key:"$self",ref:P,class:"bg-[#181818] overflow-hidden"},[ve(v("div",Qe,h[0]||(h[0]=[v("p",null,[j(" 현재 사용 중인 브라우저는 플레이에 필요한 요소를 지원하지 않습니다!"),v("br"),j(" 일시적인 오류일 수 있으니"),v("br"),v("b",null,"f5를 눌러 새로 고침하거나 다른 브라우져로 시도해보세요!")],-1)]),512),[[ye,!i(g).isIframeSupported]]),v("iframe",{ref_key:"$iframe",ref:r,src:"",allowfullscreen:"true",allowtransparency:"true",scrolling:"no",class:H(["text-center bg-[#181818] w-full fixed left-[50%] -translate-x-[50%] -translate-y-[50%] invisible",i(g).iframeClass])},null,2),i(l).isShow&&!i(C)?(E(),he(_,{key:0,item:i(y),iframeRef:i(r),direction:i(l).direction,class:H({"bottom-0":!i(l).isAboveAd,"bottom-[50px]":i(l).isAboveAd})},null,8,["item","iframeRef","direction","class"])):be("",!0)],512)}}});export{it as default};
