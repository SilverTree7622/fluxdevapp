import{_ as z}from"./dHzXw_au.js";import{o as p,c as T,a as e,d as D,r as R,u as E,b as V,e as m,f as Z,w as j,v as B,g as t,h as S,n as g,i as K,j as Y,k as J,l as Q,m as q,p as ee,q as X,t as L,U as te,s as se,x as U,y as oe,z as M,A as H,_ as ne,B as ae}from"./e6MoXQDD.js";import{u as F}from"./fgFIniLu.js";import{_ as re}from"./r_mxNTuM.js";import{r as le}from"./CXEQvwiD.js";import"./D2ZKPdBb.js";import"./sRUYLMiV.js";function ie(C,w){return p(),T("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function ue(C,w){return p(),T("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function ce(C,w){return p(),T("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}function de(C,w){return p(),T("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const me={class:"mb-6 w-full mx-auto"},fe=D({__name:"Nickname",setup(C){const h=R({profile:C.profile}),{TOAST_SUCCESS_TIMEOUT:_,TOAST_WARNING_TIMEOUT:y}=E().public.CONSTANTS,b=F(),v=V(),i=m(!0),a=m(),l=async()=>{if(i.value||!a.value||!a.value.value)return;const s=a.value.value.trim().replaceAll(" ","");if(!s.length)return;a.value.value=s,i.value=!0;const r=await b.update(h.profile.email,s);i.value=!1,r.updated.name?v.success("이름 변경이 성공적으로 되었어요",{timeout:_}):v.warning("이름 변경을 실패했어요. 새로 고침 및 잠시 후에 시도해주세요",{timeout:y})};return Z(async()=>{setTimeout(async()=>{var s;a.value&&(i.value=!1,(s=h.profile)!=null&&s.name||(await b.initAuth(),h.profile=b.getProfile()),a.value.value=h.profile.name,a.value.focus())},1)}),(s,r)=>{const u=z;return p(),T("div",null,[e("div",me,[r[0]||(r[0]=e("label",{for:"nickname",class:"block mb-2 text-sm font-medium"}," 닉네임 ",-1)),e("input",{ref_key:"$nickname",ref:a,type:"nickname",class:"w-1/2 mx-auto bg-gray-800 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5"},null,512)]),e("button",{type:"submit",class:g(`
                w-40 mx-auto mb-2 text-white
                font-medium rounded-lg text-sm px-5 py-2.5 text-center
                ${t(i)?"bg-gray-500 cursor-default":"bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300"}
            `),onClick:l},[j(e("span",null," 바꾸기 ",512),[[B,!t(i)]]),j(S(u,null,null,512),[[B,t(i)]])],2)])}}}),pe={class:"mx-2"},ve={class:"flex flex-col items-center justify-center my-6"},we={class:"py-4 px-8 rounded-lg border-2 border-gray-600 mb-2"},be={for:"name",class:"block mt-2 text-sm font-medium text-gray-400 text-center"},xe={class:"rounded-lg text-center border-2 border-gray-200 p-1 mb-4 flex flex-col justify-center items-center"},ge=D({__name:"Picture",setup(C){const{$client:w}=K(),{DEV:h}=E().public,{TOAST_SUCCESS_TIMEOUT:_,TOAST_WARNING_TIMEOUT:y,TOAST_ERROR_TIMEOUT:b}=E().public.CONSTANTS,v=Y(),i=J(),a=F(),l=m(),s=m(),r=m(!0),u=Q(),n=q(),o=V(),x=R({src:"",imgFromAuthProfile:!0}),A=R({id_user:-1,email:"",picture:"",name:""}),k=m(),I=c=>{x.src=c,x.imgFromAuthProfile=!1},N=c=>{if(s.value=c.target.files[0],!s.value)return;if(s.value.type!=="image/jpeg"&&s.value.type!=="image/jpg"&&s.value.type!=="image/png"&&s.value.type!=="image/PNG"){s.value=void 0,o.warning("이미지 파일을 넣어주세요",{timeout:y});return}const d=c.target.files;if(FileReader&&d&&d.length){const P=new FileReader;P.onload=function(){I(P.result)},P.readAsDataURL(d[0])}},$=()=>{l.value&&(l.value.value=""),I("")},f=()=>{if(u.fullPath==="/account?idx=1"){const c=["idx=1"];window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+c.join("&")}else n.push("/account?idx=1")},O=async()=>{var G;const{email:c}=a.getProfile(),d=x.src,P=((G=s.value)==null?void 0:G.name)??"";if(x.src&&s.value){i.show({msg:"프로필 사진을 적용 중..."});const W=await w.user.update.mutate({email:c,picture:d,pictureName:P});i.hide(),W.updated.picture?(o.success("프로필 사진을 적용하였어요",{timeout:_}),f()):o.error("인터넷이 불안정하거나 서버에서 실패했으니 다시 시도해주세요",{timeout:b}),v.hide()}else{if(v.hide(),a.getProfile().picture===""){o.warning("이미 기본 이미지이에요",{timeout:y});return}v.show({msg:"선택된 사진이 없어요. 기본 이미지로 바꾸시겠어요?",btn:"yesno",btnOpt:{txt:{yesno:["기본 이미지로 적용","취소"]}},onYes:async()=>{i.show({msg:"프로필 사진을 기본 이미지로 적용 중..."}),(await w.user.update.mutate({email:c,pictureName:"default"})).updated.picture&&(o.success("프로필 사진을 적용하였어요",{timeout:_}),f()),i.hide()}})}};return Z(async()=>{var c,d;if(!a.isAuth()&&(await a.initAuth(),!a.isAuth())){h&&console.warn("DEV: auth failed");return}if(k.value=a.getProfile(),A.email=((c=k.value)==null?void 0:c.email)??"",A.name=((d=k.value)==null?void 0:d.name)??"",console.log("data.value: ",k.value),k.value){r.value=!1;return}}),ee((c,d,P)=>{a.beforeRouteLeave(c,d,P)}),X(async()=>{a.hide(),v.hide()}),(c,d)=>{const P=re;return p(),T("div",null,[j(e("div",pe,[e("div",ve,[d[0]||(d[0]=e("div",{class:"mb-1"},"프로필 카드 예시",-1)),e("div",we,[S(P,{class:"mx-auto",state:"custom",src:t(x).src,isFromAuthProfile:t(x).imgFromAuthProfile},null,8,["src","isFromAuthProfile"]),e("label",be,L(t(A).name),1)])]),e("div",xe,[d[1]||(d[1]=e("label",{for:"title",class:"block mb-2 text-sm font-medium text-white"}," 프로필 이미지 설정 ",-1)),e("input",{ref_key:"$profile",ref:l,type:"file",class:"mb-2",onChange:N},null,544),e("button",{class:"block text-center bg-blue-600 rounded-lg py-1 px-3 hover:bg-blue-800",onClick:$}," 이미지 초기화 ")]),e("button",{type:"submit",class:"mt-10 w-40 mx-auto mb-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:O}," 이미지 적용 ")],512),[[B,!t(r)]])])}}}),he={onsubmit:"return false"},_e={class:"mb-6 w-full mx-auto"},ye={class:"mb-6 w-full mx-auto"},ke={for:"password",class:"block mb-2 text-sm font-medium"},Pe={class:"mb-6 w-full mx-auto"},Se={class:"text-xs mt-1 flex flex-row justify-center items-center font-bold text-green-500"},Te={class:"text-xs mt-1 flex flex-row justify-center items-center font-bold text-red-500"},Ce=D({__name:"Pwd",setup(C){const{$client:w}=K(),{TOAST_SUCCESS_TIMEOUT:h,TOAST_WARNING_TIMEOUT:_,TOAST_ERROR_TIMEOUT:y,AUTH_PWD_MIN_CNT:b}=E().public.CONSTANTS,v=Y(),i=F(),a=J();q();const l=V(),s=m(),r=m(),u=m(),n=m(!1),o=R({email:"",prevPwd:"",pwd:"",isPwdStrongClass:"text-red-500",isPwdStrongText:"",isPwdRepeatMatch:-1}),x=()=>s.value.value===r.value.value,A=$=>{if(!r.value)return;const f=r.value.value,O=te.chckPasswordStrength(f);if(x()){o.isPwdStrongClass="text-teal-500",o.isPwdStrongText="같은 비밀번호로 바꿀 순 없어요!";return}if(r.value.value===""){o.isPwdStrongText="";return}O==="strong"&&(o.isPwdStrongClass="text-green-500",o.isPwdStrongText="보안성 높음"),O==="medium"&&(o.isPwdStrongClass="text-yellow-500",o.isPwdStrongText="보안성 중간"),O==="weak"&&(o.isPwdStrongClass="text-red-500",o.isPwdStrongText="보안성 낮음")},k=()=>{if(r.value&&u.value){if(!u.value.value){o.isPwdRepeatMatch=-1;return}r.value.value===u.value.value?o.isPwdRepeatMatch=1:o.isPwdRepeatMatch=0}},I=async()=>{a.show({msg:"로그 아웃 및 홈으로 가는 중...",isShowHomeBtn:!1}),await i.logOut(()=>{a.hide()},"/")},N=async()=>{if(n.value||!s.value||!r.value)return;if(x()){l.warning("같은 비밀번호로 바꿀 순 없어요!",{timeout:_});return}if(n.value=!0,r.value.value.length<b){l.warning(`비밀번호를 최소 ${b}자리이상으로 만들어야해요`,{timeout:_}),r.value.focus(),n.value=!1;return}if(o.isPwdRepeatMatch===-1){r.value.focus(),n.value=!1;return}if(o.isPwdRepeatMatch===0){l.error("비밀번호 재확인 불일치",{timeout:y}),u.value.focus(),n.value=!1;return}a.show({msg:"업데이트 적용 중...",isShowHomeBtn:!1}),o.email=i.getProfile().email,o.prevPwd=s.value.value,o.pwd=r.value.value;const f=await w.user.update.mutate({email:o.email,prevPwd:o.prevPwd,pwd:o.pwd});a.hide(),n.value=!1,f.updated.pwd?v.show({msg:"비밀번호를 바꿨어요. 새로 바뀐 비밀번호로 다시 로그인 해주세요",btn:"confirm",btnOpt:{txt:{confirm:"확인"}},onYes:async()=>{await I()},onHide:async()=>{await I()}}):l.error("인터넷이 불안정하거나 서버에서 실패했으니 다시 시도해주세요",{timeout:y})};return X(async()=>{a.hide(),v.hide()}),($,f)=>(p(),T("form",he,[f[2]||(f[2]=e("input",{type:"text",name:"email",value:"...",autocomplete:"username email",style:{display:"none"}},null,-1)),e("div",_e,[f[0]||(f[0]=e("label",{for:"prevPwd",class:"block mb-2 text-sm font-medium"}," 기존 비밀번호 ",-1)),e("input",{ref_key:"$prevPwd",ref:s,type:"password",id:"prevPwd",class:"w-1/2 mx-auto bg-gray-800 border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",autocomplete:"current-password",required:""},null,512)]),e("div",ye,[e("label",ke," 바꿀 비밀번호 생성 (최소 "+L(t(b))+"자리) * ",1),e("input",{ref_key:"$nextPwd",ref:r,type:"password",id:"password",class:"w-1/2 mx-auto bg-gray-800 shadow-sm border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",required:"",autocomplete:"new-password",onKeyup:A},null,544),e("div",{class:g(["text-xs mt-1 flex flex-row justify-center items-center font-bold",t(o).isPwdStrongClass])},L(t(o).isPwdStrongText),3)]),e("div",Pe,[f[1]||(f[1]=e("label",{for:"repeat-password",class:"block mb-2 text-sm font-medium"},"비밀번호 재확인 *",-1)),e("input",{ref_key:"$nextPwdRepeat",ref:u,type:"password",id:"nextPwdRepeat",class:"w-1/2 mx-auto bg-gray-800 shadow-sm border border-gray-300 text-gray-50 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",required:"",autocomplete:"new-password",onKeyup:k},null,544),j(e("div",Se," 일치 ",512),[[B,t(o).isPwdRepeatMatch===1]]),j(e("div",Te," 불일치 ",512),[[B,t(o).isPwdRepeatMatch===0]])]),e("button",{class:"w-40 mx-auto mb-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:N}," 바꾸기 ")]))}}),$e={class:"w-full mx-auto text-center text-white mb-2"},Ae={class:"fixed w-full my-2 top-9 bg-[#181818]"},Ie={class:"flex flex-row mt-2 justify-center items-center"},Re={class:"border-b border-gray-200"},Ne={class:"flex flex-wrap items-center justify-center -mb-px text-sm font-medium text-center text-gray-500"},Oe={key:0,class:"mt-28"},Me={key:1,class:"mt-28 overflow-y-auto"},Le=D({__name:"index",setup(C){const{PROD:w}=E().public,h=F(),_=Q();q();const y=m(),b=m(),v=m(),i=m(!0),a=Number(_.query.idx??0),l=R({profile:{id_user:-1,email:"",picture:"",name:""},tabIdx:a}),s=R({activeTabClass:"cursor-default inline-flex items-center justify-center p-4 text-blue-600 border-b-2 border-blue-600 rounded-t-lg active dark:text-blue-500 dark:border-blue-500 group",inactiveTabClass:"cursor-pointer inline-flex items-center justify-center p-4 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300 group",activeIconClass:"w-4 h-4 mr-2 text-blue-400",inactiveIconClass:"w-4 h-4 mr-2 text-gray-400 group-hover:text-gray-500"}),r=u=>{l.tabIdx!==u&&(l.tabIdx=u,i.value=!1)};return se(async()=>{const u=h.isAuth();if(!w&&!u)return console.warn(`DEV: auth failed: ${u}`)}),Z(async()=>{i.value=!1}),(u,n)=>{const o=z,x=fe,A=ge,k=Ce,I=ne,N=ae;return p(),U(N,{name:"homemobile",isSearchBarExist:!1,isBadgeListExist:!1,isDropDownAble:!1,isDisableCmd:!0,tabIdx:-1,menuIdx:1,showAdsenseLeft:!1,showAdsenseRight:!1,topGap:"12"},{default:oe(()=>[e("div",$e,[e("div",Ae,[e("div",Ie,[S(t(de),{class:"h-6 w-6 text-gray-500 mr-1"}),n[5]||(n[5]=M(" 계정 관리 "))]),e("div",Re,[e("ul",Ne,[e("li",{class:"mr-2",onClick:n[1]||(n[1]=$=>r(0))},[e("div",{class:g(t(l).tabIdx===0?t(s).activeTabClass:t(s).inactiveTabClass),onClick:n[0]||(n[0]=()=>{})},[S(t(ce),{class:g(t(l).tabIdx===0?t(s).activeIconClass:t(s).inactiveIconClass)},null,8,["class"]),n[6]||(n[6]=M(" 별칭 "))],2)]),e("li",{class:"mr-2",onClick:n[2]||(n[2]=$=>r(1))},[e("div",{class:g(t(l).tabIdx===1?t(s).activeTabClass:t(s).inactiveTabClass)},[S(t(ue),{class:g(t(l).tabIdx===1?t(s).activeIconClass:t(s).inactiveIconClass)},null,8,["class"]),n[7]||(n[7]=M(" 프로필 사진 "))],2)]),e("li",{class:"mr-2",onClick:n[3]||(n[3]=$=>r(2))},[e("div",{class:g(t(l).tabIdx===2?t(s).activeTabClass:t(s).inactiveTabClass)},[S(t(ie),{class:g(t(l).tabIdx===2?t(s).activeIconClass:t(s).inactiveIconClass)},null,8,["class"]),n[8]||(n[8]=M(" 비밀번호 "))],2)]),e("li",{class:"mr-2",onClick:n[4]||(n[4]=$=>r(3))},[e("a",{href:"/favorite",class:g(t(l).tabIdx===3?t(s).activeTabClass:t(s).inactiveTabClass)},[S(t(le),{class:g(t(l).tabIdx===3?t(s).activeIconClass:t(s).inactiveIconClass)},null,8,["class"]),n[9]||(n[9]=M(" 애용 "))],2)])])])]),t(i)?(p(),T("div",Oe,[S(o,{w:12,h:12})])):(p(),T("div",Me,[t(l).tabIdx===0?(p(),U(x,{key:0,ref_key:"$nickname",ref:y},null,512)):H("",!0),t(l).tabIdx===1?(p(),U(A,{key:1,ref_key:"$picture",ref:b},null,512)):H("",!0),t(l).tabIdx===2?(p(),U(k,{key:2,ref_key:"$pwd",ref:v},null,512)):H("",!0)])),S(I,{isConsideredFooter:!0})])]),_:1})}}});export{Le as default};
