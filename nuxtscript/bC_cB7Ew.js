import"./B5Qt9EMX.js";const l={life:{start_life:3,max_life:30},dpi:1,width_map:0,posY:1e3,lst_easy_level:[1,2,3],lst_hard_level:[1,2,3],scaleMap:.55,item:{random_item:[30,50],speed_item:150,lst_item:["item1","item2","item3"],max_item:3},ball:{max_ball:600,key_ball:"ball0",scale_ball:.3,speed_ball:400},pad:{key_pad:"pad0",scale_pad:.35},level:{level_curent:1,max_level:1500},localStorageName:"level",level_easy_curent:1,level_hard_curent:1,level_type_menu:"easy",reward:{type:"ball"},fullAds:{type:"ball"},data:{ball:[0,0,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1],pad:[0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0]},tabActive:"tabLevel",ads:{isAds:!0,countAds:0},isPlaying:!1,color:["0x04FF1D","0xFF7B02","0x00F6FF","0xFFFD0F","0xFF0000","0x009CFF","0xFF008A","0xFFBEAC","0xFF91F9","0xB8F47C","0x0066FF","0xEB00FF","0xFF4D00","0x00AF91","0x80FFDB","0xFFD369","0xB2FCFF"],lstColorID:[]};class ve extends Phaser.Scene{constructor(){super({key:"preload"})}preload(){var e=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(200,1280/2,320,50);var s=720,a=1280,n=this.make.text({x:s/2,y:a/2-30,text:"Loading...",style:{font:"20px monospace",fill:"#ffffff"}});n.setOrigin(.5,.5);var o=this.make.text({x:s/2,y:a/2+25,text:"0%",style:{font:"18px monospace",fill:"#ffffff"}});o.setOrigin(.5,.5),this.load.on("progress",function(h){o.setText(parseInt(h*100)+"%"),e.clear(),e.fillStyle(16777215,1),e.fillRect(206,1280/2+8,300*h,30)}),this.load.on("complete",function(){}),this.load.image("play","assets/images/button.png"),this.load.image("logo1","assets/images/brickbreaker.png"),this.load.image("logo","assets/logo/brick_breaker_logo_512x512.png"),this.load.image("guide","assets/images/540x960-guide.png"),this.load.image("button","assets/images/button.png"),this.load.image("circle","assets/images/circle.png"),this.load.image("blockboder","assets/images/blockboder.png"),this.load.image("blockboder1","assets/tilesets/blockboder.png"),this.load.image("bg","assets/images/background.png"),this.load.image("player","assets/images/player.png"),this.load.image("video_icon","assets/images/video_icon.png"),this.load.image("line","assets/images/line.png"),this.load.image("ball0","assets/ball/0.png"),this.load.image("ball1","assets/ball/1.png"),this.load.image("ball2","assets/ball/2.png"),this.load.image("ball3","assets/ball/3.png"),this.load.image("ball4","assets/ball/4.png"),this.load.image("ball5","assets/ball/5.png"),this.load.image("ball6","assets/ball/6.png"),this.load.image("ball7","assets/ball/7.png"),this.load.image("ball8","assets/ball/8.png"),this.load.image("ball9","assets/ball/9.png"),this.load.image("ball10","assets/ball/10.png"),this.load.image("ball11","assets/ball/11.png"),this.load.image("ball12","assets/ball/12.png"),this.load.image("ball13","assets/ball/13.png"),this.load.image("ball14","assets/ball/14.png"),this.load.image("ball15","assets/ball/15.png"),this.load.image("ball16","assets/ball/16.png"),this.load.image("pad0","assets/pad/0.png"),this.load.image("pad1","assets/pad/1.png"),this.load.image("pad2","assets/pad/2.png"),this.load.image("pad3","assets/pad/3.png"),this.load.image("pad4","assets/pad/4.png"),this.load.image("pad5","assets/pad/5.png"),this.load.image("pad6","assets/pad/6.png"),this.load.image("pad7","assets/pad/7.png"),this.load.image("pad8","assets/pad/8.png"),this.load.image("pad9","assets/pad/9.png"),this.load.image("pad10","assets/pad/10.png"),this.load.image("pad11","assets/pad/11.png"),this.load.image("pad12","assets/pad/12.png"),this.load.image("pad13","assets/pad/13.png"),this.load.image("pad14","assets/pad/14.png"),this.load.image("pad15","assets/pad/15.png"),this.load.image("pad16","assets/pad/16.png"),this.load.image("block_border_grey","assets/tilesets/block_border_grey.png"),this.load.image("block_blue","assets/tilesets/block_blue.png"),this.load.image("block_green","assets/tilesets/block_green.png"),this.load.image("block_pink","assets/tilesets/block_pink.png"),this.load.image("block_red","assets/tilesets/block_red.png"),this.load.image("block_white","assets/tilesets/block_white.png"),this.load.image("block_yellow","assets/tilesets/block_yellow.png"),this.load.image("block_xanhngoc","assets/tilesets/block_xanhngoc.png"),this.load.image("block_orange","assets/tilesets/block_orange.png"),this.load.image("popup","assets/popup/popup.png"),this.load.image("btnPlay","assets/popup/btnPlay.png"),this.load.image("btnPlay2","assets/popup/btnPlay2.png"),this.load.image("btnNext","assets/popup/btnNext.png"),this.load.image("btnClose","assets/popup/btnClose.png"),this.load.image("btnStore","assets/popup/btnStore.png"),this.load.image("btnVideo","assets/popup/btnVideo.png"),this.load.image("btnRestart","assets/popup/btnRestart.png"),this.load.image("btnPause","assets/popup/btnPause.png"),this.load.image("btnCart","assets/popup/btnCart.png"),this.load.image("btnBall","assets/popup/btnBall.png"),this.load.image("btnHome","assets/popup/btnHome.png"),this.load.image("btnReload","assets/popup/btnReload.png"),this.load.image("btnPad","assets/popup/btnPad.png"),this.load.image("btnBG","assets/popup/btnBG.png"),this.load.image("btnPlayContinue","assets/popup/btnPlayContinue.png"),this.load.image("light","assets/popup/light.png"),this.load.image("item1","assets/images/item1.png"),this.load.image("item2","assets/images/item2.png"),this.load.image("item3","assets/images/item3.png"),this.load.image("block","assets/images/block.png"),this.load.image("block1","assets/tilesets/block.png"),this.load.image("topbar","assets/images/topbar.png"),this.load.image("heart","assets/images/heart.png"),this.load.bitmapFont("font","assets/fonts/font.png","assets/fonts/font.fnt"),this.load.json("data","assets/data/data.json"),this.load.audio("hit","assets/audio/hit.mp3"),this.load.audio("point","assets/audio/point.mp3"),this.load.audio("click","assets/audio/click.mp3"),this.load.json("lv1","assets/level/1.json"),this.saveData=localStorage.getItem(l.localStorageName)==null?{level:1}:JSON.parse(localStorage.getItem(l.localStorageName)),l.level.level_curent=this.saveData.level}create(){this.scene.start("start_menu")}}class d extends Phaser.GameObjects.BitmapText{constructor(e,t,s,a,n,o,h){super(e,t,s,a,n,o,h),this.setOrigin(.5),this.tint=h,this.align=1,this.setCenterAlign()}updateText(e){this.setText(e)}}let N;const _e=Phaser.Math.Between;class we extends Phaser.Scene{constructor(){super({key:"popup_pause"})}create(){console.log("vv"),this.add.rectangle(this.game.config.width/2,this.game.config.height/2,720,1280,0,.6),this.add.image(this.game.config.width/2,this.game.config.height/2,"popup"),this.level_text=new d(this,this.game.config.width/2,360,"font","PAUSE",80).setOrigin(.5),this.add.existing(this.level_text);let e=this.add.image(260,900,"btnBG").setScale(.4).setInteractive();this.add.image(e.x,e.y,"btnHome").setScale(.25),e.on("pointerdown",function(r){j(this.scene,e,"btnHome")});let t=this.add.image(360,900,"btnBG").setScale(.4).setInteractive();this.add.image(t.x,t.y,"btnReload").setScale(.25),t.on("pointerdown",function(r){j(this.scene,t,"btnReload")});let s=this.add.image(460,900,"btnBG").setScale(.4).setInteractive();this.add.image(s.x,s.y,"btnPlayContinue").setScale(.25),s.on("pointerdown",function(r){j(this.scene,s,"btnContinue")});let a=this.add.rectangle(600,290,50,50).setStrokeStyle(2,"0xffffff").setInteractive();this.add.image(a.x,a.y,"btnClose"),a.on("pointerdown",function(r){this.scene.scene.resume("PlayGame"),this.scene.scene.sleep("popup_pause")});let n=_e(0,100);n>=0&&n<=40&&(N="item1"),n>40&&n<=80&&(N="item2"),n>80&&n<=100&&(N="item3"),this.borderItem=this.add.rectangle(360,630,300,300).setStrokeStyle(2,"0xffffff");let o=this.add.image(360,580,"light");o.alpha=.8,this.add.image(360,580,N).setScale(.3);let h=this.add.image(this.game.config.width/2,725,"btnVideo").setScale(1.3).setInteractive();h.tint="0xF66B0E",this.add.image(h.x-70,h.y-2,"video_icon").setScale(.04);let p=new d(this,h.x+30,h.y+2,"font","Free Item",35);this.add.existing(p),h.on("pointerdown",function(r){j(this.scene,h,"btnFreeItem")})}}function Se(i){switch(i){case"btnHome":this.scene.stop("PlayGame"),this.scene.sleep("popup_pause"),this.scene.sleep("popup_level"),this.scene.start("start_menu");break;case"btnReload":this.scene.sleep("popup_pause"),this.scene.start("PlayGame");break;case"btnContinue":this.scene.resume("PlayGame"),this.scene.sleep("popup_pause");break;case"btnFreeItem":l.reward.type=N;break}}function j(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:Se.bind(i,t)})}const P=new Phaser.Events.EventEmitter;let R=180,f,k,u;class Pe extends Phaser.Scene{constructor(){super("PlayGame")}preload(){window.console.log=()=>{},this.load.json("lv"+l.level.level_curent,"assets/level/"+l.level.level_curent+".json")}create(){m=this.cache.json.get("lv"+l.level.level_curent),console.log(l.level.level_curent),Ie(this),P.on("update-ball",this.updateImageBall,this),P.on("update-pad",this.updateImagePad,this),this.data_game=JSON.parse(localStorage.getItem("data")),l.ball.key_ball=this.data_game.key_ball,l.pad.key_pad=this.data_game.key_pad,this.max_item_on_scene=15,this.number_item=0,this.posY=900;let e;this.startGame=!1,this.countItem=0,this.scaleItem=.2,this.ball,l.level.level_curent<5?this.count_spawn_item=Phaser.Math.Between(5,10):this.count_spawn_item=Phaser.Math.Between(20,35),this.hit_mp3=this.sound.add("hit"),this.point_mp3=this.sound.add("point"),this.saveData=localStorage.getItem(l.localStorageName)==null?{level:1}:JSON.parse(localStorage.getItem(l.localStorageName)),this.topBar=this.add.image(this.game.config.width/2,45,"topbar"),this.topBar.tint="0x3D2C8D",this.heart=this.add.image(60,this.topBar.y,"heart").setScale(1),this.heartText=new d(this,this.heart.x+40,this.heart.y+3,"font",l.life.start_life,40),this.levelText=new d(this,this.game.config.width-100,this.heart.y+3,"font","Level "+l.level.level_curent,40).setRightAlign(),this.add.existing(this.heartText),this.add.existing(this.levelText);let t=this.add.image(500,this.topBar.y,"btnPad").setScale(.25).setInteractive();t.on("pointerdown",function(y){S(this.scene,t,"btnPad")});let s=this.add.image(430,this.topBar.y,"btnBall").setScale(.25).setInteractive();s.on("pointerdown",function(y){S(this.scene,s,"btnBall")}),this.player=this.physics.add.image(this.game.config.width/2,1e3,l.pad.key_pad),this.player.setScale(l.pad.scale_pad),this.player.setCollideWorldBounds(!0),this.player.setImmovable(!0);let a=this.add.rectangle(60,870,60,60,"0xffffff",0).setInteractive(),n=this.add.image(a.x,a.y-10,"item1").setScale(.18);this.itemText1=new d(this,n.x,n.y+35,"font","x "+this.data_game.item.item1,25),this.add.existing(this.itemText1),a.on("pointerdown",function(y){let v=JSON.parse(localStorage.getItem("data")),g=v.item.item1;if(this.scene.startGame)if(g<=0)S(this.scene,n,"btnPause");else{g--,this.scene.itemText1.updateText("x "+g),v.item.item1=g,localStorage.setItem("data",JSON.stringify(v));let X=u.getMatching("visible",!0);for(let H=0;H<X.length;H++)this.scene.spawBall(X[H].x,X[H].y,l.ball.key_ball,"item1")}else g<=0&&S(this.scene,n,"btnPause")});let o=this.add.rectangle(a.x,a.y+80,60,60,"0xffffff",0).setInteractive(),h=this.add.image(o.x,o.y-10,"item2").setScale(.18);this.itemText2=new d(this,h.x,h.y+35,"font","x "+this.data_game.item.item2,25),this.add.existing(this.itemText2),o.on("pointerdown",function(y){let v=JSON.parse(localStorage.getItem("data")),g=v.item.item2;this.scene.startGame?g<=0?S(this.scene,h,"btnPause"):(g--,this.scene.itemText2.updateText("x "+g),v.item.item2=g,localStorage.setItem("data",JSON.stringify(v)),this.scene.spawBall(this.scene.player.x,this.scene.player.y-20,l.ball.key_ball,"item2")):g<=0&&S(this.scene,h,"btnPause")});let p=this.add.rectangle(a.x,a.y+160,60,60,"0xffffff",0).setInteractive(),r=this.add.image(p.x,p.y-10,"item3").setScale(.18);this.itemText3=new d(this,r.x,r.y+35,"font","x "+this.data_game.item.item3,25),this.add.existing(this.itemText3),p.on("pointerdown",function(y){let v=JSON.parse(localStorage.getItem("data")),g=v.item.item3;this.scene.startGame?g<=0?S(this.scene,r,"btnPause"):(g--,this.scene.itemText3.updateText("x "+g),v.item.item3=g,localStorage.setItem("data",JSON.stringify(v)),le(this.scene)):g<=0&&S(this.scene,r,"btnPause")});let x=this.add.image(650,950,"btnPause").setScale(.25).setInteractive();x.on("pointerdown",function(y){S(this.scene,x,"btnPause")}),this.bottomWall=this.physics.add.image(this.player.x,this.player.y+50,"block"),this.bottomWall.setScale(6,.05),this.bottomWall.tint="0xfff",this.bottomWall.alpha=0,this.bottomWall.setImmovable(!0),l.width_map=720;let c=this.add.rectangle(this.game.config.width/2,this.game.config.height/2,l.width_map,this.game.config.height-80,"0x1C0C5D",1).setDepth(-1).setInteractive();c.y=this.game.config.height-c.height/2-5,f=this.add.image(this.player.x,this.player.y,"line").setScale(.7).setOrigin(.5,1),c.on("pointerdown",function(y){this.startGame==!1&&(R=0),e=this.player.x-y.x},this),c.on("pointerup",function(y){this.startGame==!1&&(this.startGame=!0,l.isPlaying=!0,f!=null&&f.setVisible(!1),this.spawBall(this.player.x,this.player.y-20,l.ball.key_ball,"firstball")),e=this.player.x-y.x},this),c.on("pointermove",function(y){this.startGame==!1&&(this.direction=Phaser.Math.Angle.Between(f.x,f.y,y.x,y.y),f.angle=Phaser.Math.RadToDeg(this.direction)+90,f.angle<-80&&(f.angle=-80),f.angle>80&&(f.angle=80),R=f.angle),y.isDown&&this.startGame==!0&&this.player.setPosition(y.x+e,this.player.y)},this),this.bound=this.physics.world.setBounds(this.game.config.width/2-c.width/2,this.game.config.height-c.height,c.width,c.height),u=this.physics.add.group(),this.physics.add.collider(u,this.player,this.hitPlayer,null,this),this.physics.add.collider(u,$,this.destroyBlock,null,this),this.physics.add.collider(u,Z),this.physics.add.collider(u,this.bottomWall,this.hitBottom,null,this),ke(this)}updateImageBall(){l.isPlaying&&(u.getMatching("visible",!0).forEach(s=>{s.setTexture(l.ball.key_ball)}),u.getMatching("visible",!1).forEach(s=>{s.setTexture(l.ball.key_ball)}))}updateImagePad(){l.isPlaying&&this.player.setTexture(l.pad.key_pad)}checkClearMap(){return $.length<=0}spawBall(e,t,s,a){if(u.getMatching("visible",!0).length>l.ball.max_ball)return;let o=Phaser.Math.Between(0,359);switch(a){case"firstball":let h=u.get(e,t,s);h.setVisible(!0),h.setActive(!0),h.setScale(l.ball.scale_ball),h.setBounce(1).setCollideWorldBounds(!0),h.allowGravity=!1,o=R,this.physics.velocityFromAngle(o-90,l.ball.speed_ball,h.body.velocity);break;case"item1":for(let p=0;p<3;p++){let r=u.get(e,t,s);r.setVisible(!0),r.setActive(!0),r.setScale(l.ball.scale_ball),r.setBounce(1).setCollideWorldBounds(!0),r.allowGravity=!1,o=Phaser.Math.Between(0,359),this.physics.velocityFromAngle(o,l.ball.speed_ball,r.body.velocity)}break;case"item2":o=-45;for(let p=0;p<3;p++){let r=u.get(e,t,s);r.setVisible(!0),r.setActive(!0),r.setScale(l.ball.scale_ball),r.setBounce(1).setCollideWorldBounds(!0),r.allowGravity=!1,this.physics.velocityFromAngle(o-90,l.ball.speed_ball,r.body.velocity),o+=45}break}}despawBall(e){e.setBounce(0),e.setPosition(-100,-100),u.killAndHide(e)}hitPlayer(e,t){t.x>e.x?this.physics.velocityFromAngle(Phaser.Math.Between(270,310),l.ball.speed_ball,t.body.velocity):this.physics.velocityFromAngle(Phaser.Math.Between(230,270),l.ball.speed_ball,t.body.velocity)}additem(e,t,s){switch(s){case"item1":let a=this.physics.add.image(e,t,s).setScale(this.scaleItem);a.setVelocityY(l.item.speed_item),a.name="item1",this.physics.add.collider(this.player,a,this.hitItem,null,this),this.physics.add.collider(this.bottomWall,a,this.itemhitBottom,null,this);break;case"item2":let n=this.physics.add.image(e,t,s).setScale(this.scaleItem);n.name="item2",n.setVelocityY(l.item.speed_item),this.physics.add.collider(this.player,n,this.hitItem,null,this),this.physics.add.collider(this.bottomWall,n,this.itemhitBottom,null,this);break;case"item3":let o=this.physics.add.image(e,t,s).setScale(this.scaleItem);o.name="item3",o.setVelocityY(l.item.speed_item),this.physics.add.collider(this.player,o,this.hitItem,null,this),this.physics.add.collider(this.bottomWall,o,this.itemhitBottom,null,this);break}}hitItem(e,t){switch(t.destroy(),this.number_item--,this.point_mp3.isPlaying||this.point_mp3.play(),t.name){case"item1":let s=u.getMatching("visible",!0);for(let a=0;a<s.length;a++)this.spawBall(s[a].x,s[a].y,l.ball.key_ball,"item1");break;case"item2":this.spawBall(e.x,e.y-20,l.ball.key_ball,"item2");break;case"item3":le(this);break}}hitBottom(e,t){this.despawBall(t);let s=u.getMatching("visible",!0);s.length==1&&(this.physics.velocityFromAngle(Phaser.Math.Between(270,310),l.ball.speed_ball,t.body.velocity),console.log("bbbb")),s.length<=0&&(l.life.start_life--,l.life.start_life<=0?(this.heartText.updateText(l.life.start_life),l.reward.type="popup",this.scene.launch("popup_gameover")):(f!=null&&(f.setPosition(this.player.x,this.player.y),f.setVisible(!0),f.angle=0,R=f.angle),this.heartText.updateText(l.life.start_life),this.startGame=!1))}itemhitBottom(e,t){this.number_item--,t.destroy()}destroyBlock(e){if(this.startGame){if(this.hit_mp3.play(),this.countItem++,this.countItem==this.count_spawn_item){let t,s=0;l.item.max_item<0?s=Phaser.Math.Between(0,80):s=Phaser.Math.Between(0,100),s>=0&&s<=60&&(t=l.item.lst_item[0]),s>60&&s<=80&&(t=l.item.lst_item[1]),s>80&&s<=100&&(t=l.item.lst_item[2],l.item.max_item--),this.number_item<this.max_item_on_scene&&(this.additem(e.x,e.y,t),this.number_item++),this.countItem=0,l.level.level_curent<5?this.count_spawn_item=Phaser.Math.Between(1,3):l.level.level_curent>4&&l.level.level_curent<8?this.count_spawn_item=Phaser.Math.Between(5,10):l.level.level_curent>7&&l.level.level_curent<13?this.count_spawn_item=Phaser.Math.Between(15,25):this.count_spawn_item=Phaser.Math.Between(l.item.random_item[0],l.item.random_item[1])}Phaser.Utils.Array.Remove($,e),e.setVisible(!1),this.checkClearMap()==!0&&(l.level.level_curent++,l.level.level_curent>this.saveData.level&&localStorage.setItem(l.localStorageName,JSON.stringify({level:l.level.level_curent})),l.reward.type="popup",this.scene.launch("popup_nextlevel"))}}}function ke(i){for(let e=0;e<20;e++){let t=i.physics.add.image(-100,-100,l.ball.key_ball);u.add(t),t.visible=!1,t.active=!1}}function Be(i){switch(i){case"btnPause":this.scene.pause("PlayGame"),this.scene.isActive("popup_pause")==null?this.scene.add("popup_pause",we,!0):this.scene.run("popup_pause");break;case"btnBall":l.tabActive="tabBall",P.emit("tabActive"),this.scene.run("select_level"),this.scene.pause("PlayGame"),this.scene.sendToBack();break;case"btnPad":l.tabActive="tabPad",P.emit("tabActive"),this.scene.run("select_level"),this.scene.pause("PlayGame"),this.scene.sendToBack();break}}function S(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:Be.bind(i,t)})}let m,ie,ae,_,se,E,$,Z,B,C;function Ie(i){$=[],Z=[],se=l.color,E=[],B=700,C=700,ie=B/m.nWidth,ae=C/m.nHeight,m.nWidth>m.nHeight?_=ie:_=ae,m.nWidth>m.nHeight?B=B:B=_*m.nWidth,m.nWidth>m.nHeight?C=C:C=_*m.nHeight;for(let e=0;e<m.vBrick.length;e++){let s=m.vBrick[e].split(",");if(s[5]==2189591295){if(l.level.level_curent>11){let a=i.physics.add.sprite(V(s[0])+(700-B)/2+5,V(s[1])+(m.nHeight-m.nWidth)*_+85,"block_white");a.tint="0xB6B6B6",a.displayHeight=_+5,a.displayWidth=_+5,a.body.setSize(a.displayWidth-3,a.displayHeight-3),a.setImmovable(!0),Z.push(a)}}else{let a=i.physics.add.sprite(V(s[0])+(700-B)/2+5,V(s[1])+(m.nHeight-m.nWidth)*_+85,"block_white");a.displayHeight=_+5,a.displayWidth=_+5,a.body.setSize(a.displayWidth-3,a.displayHeight-3);let n=E.indexOf(s[5]);n==-1&&(E.push(s[5]),n=E.indexOf(s[5])),$.push(a),a.setImmovable(!0),a.tint=se[n]}}i.cache.json.remove("lv"+l.level.level_curent)}function V(i){return B-i*_}function le(i){k=i.physics.add.image(360,i.player.y+40,"block"),k.setScale(6,.03),k.displayWidth=720,k.tint="0xF66B0E",k.setImmovable(!0),i.physics.add.collider(u,k),i.tweens.add({targets:k,scaleX:0,ease:"Linear",delay:3e3,duration:3e3,onComplete:function(){k.destroy()}})}class Fe extends Phaser.Scene{constructor(){super({key:"start_menu"})}preload(){localStorage.getItem("data")==null?(this.data=this.cache.json.get("data"),localStorage.setItem("data",JSON.stringify(this.data))):this.data=JSON.parse(localStorage.getItem("data"))}create(){window.UtilPlatform.sendMsg2Parent("ShowNavFooterPlay"),this.scene.isSleeping("popup_ball")||this.scene.launch("popup_ball"),this.scene.isSleeping("popup_pad")||this.scene.launch("popup_pad"),l.isPlaying=!1,this.logo1=this.add.image(this.game.config.width/2,300,"logo1").setScale(1.5),this.logo=this.add.image(this.game.config.width/2,this.logo1.y+290,"logo").setScale(.5);let e=this.add.image(this.game.config.width/2,this.logo.y+240,"btnPlay").setScale(1.5).setInteractive();this.textStart=new d(this,e.x,e.y,"font","Play",35).setOrigin(.5),this.add.existing(this.textStart),this.textStart;let t=this.add.image(this.game.config.width/2,e.y+100,"btnPlay").setScale(1.5).setInteractive();this.textLevel=new d(this,t.x,t.y,"font","Level Select",35).setOrigin(.5),this.add.existing(this.textLevel),this.textLevel,e.on("pointerdown",function(s){D(this.scene,e,"btnStart")}),t.on("pointerdown",function(s){l.tabActive="tabLevel",D(this.scene,t,"btnLevel"),this.scene.scene.isSleeping("popup_ball")||this.scene.scene.launch("popup_ball"),this.scene.scene.isSleeping("popup_pad")||this.scene.scene.launch("popup_pad")}),Oe(this)}}function Ce(i){switch(i){case"btnStart":this.scene.sleep("popup_ball"),this.scene.sleep("popup_pad"),this.scene.start("PlayGame"),window.UtilPlatform.sendMsg2Parent("HideNavFooterPlay");break;case"btnLevel":this.scene.start("select_level");break}}function Oe(i){let e=i.add.image(270,1050,"btnBG").setScale(.4).setInteractive();i.add.image(e.x,e.y,"btnBall").setScale(.25),e.on("pointerdown",function(a){l.tabActive="tabBall",D(this.scene,e,"btnLevel")});let t=i.add.image(360,1050,"btnBG").setScale(.4).setInteractive();i.add.image(t.x,t.y,"btnCart").setScale(.25),t.on("pointerdown",function(a){l.tabActive="tabBall",D(this.scene,t,"btnLevel")});let s=i.add.image(450,1050,"btnBG").setScale(.4).setInteractive();i.add.image(s.x,s.y,"btnPad").setScale(.25),s.on("pointerdown",function(a){l.tabActive="tabPad",D(this.scene,s,"btnLevel")})}function D(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:Ce.bind(i,t)})}class Ae extends Phaser.Scene{constructor(){super({key:"level_type_menu"})}preload(){}create(){this.add.rectangle(this.game.config.width/2,this.game.config.height/2-10,this.game.config.width-50,100,6711039,.5),this.add.rectangle(this.game.config.width/2,this.game.config.height/2+100,this.game.config.width-50,100,6711039,.5);var e=this.add.text(this.game.config.width/2,this.game.config.height/2-10,"Easy Level",{font:"40px Arial Black",align:"center"}).setInteractive().setOrigin(.5),t=this.add.text(this.game.config.width/2,this.game.config.height/2+100,"Hard Level",{font:"40px Arial Black",align:"center"}).setInteractive().setOrigin(.5);e.on("pointerdown",function(s){l.level_type_menu="easy",this.scene.scene.start("select_level")}),t.on("pointerdown",function(s){l.level_type_menu="hard",this.scene.scene.start("select_level")})}}class Ge extends Phaser.Scene{constructor(){super({key:"select_level"})}preload(){this.saveData=localStorage.getItem(l.localStorageName)==null?{level:1}:JSON.parse(localStorage.getItem(l.localStorageName))}create(){this.add.rectangle(this.game.config.width/2,this.game.config.height/2,720,2e3,"0x000",.7).setDepth(-1),this.popup=this.add.image(this.game.config.width/2,this.game.config.height/2,"popup").setScale(1.1,1.2),this.level_text=new d(this,this.game.config.width/2,200,"font","Level "+l.level.level_curent+"/"+l.level.max_level,32).setOrigin(.5),this.add.existing(this.level_text);let e=this.add.image(180,335,"btnPlay2").setInteractive();e.tint="0xF66B0E";let t=new d(this,e.x,e.y,"font","Ball Skin ",30).setOrigin(.5);this.add.existing(t);let s=this.add.image(this.game.config.width/2,335,"btnPlay2").setInteractive();s.tint="0x112B3C";let a=new d(this,s.x,s.y,"font","Level ",30).setOrigin(.5);this.add.existing(a);let n=this.add.image(540,335,"btnPlay2").setInteractive();n.tint="0xF66B0E";let o=new d(this,n.x,n.y,"font","Baffle Skin ",30).setOrigin(.5);this.add.existing(o);let h=this.add.image(this.game.config.width/2,1e3,"btnPlay").setScale(1.3).setInteractive();this.textStart=new d(this,h.x,h.y,"font","Play",35).setOrigin(.5),this.add.existing(this.textStart);let p=this.add.image(570,h.y-2,"btnNext").setScale(1.3).setInteractive(),r=this.add.image(150,h.y-2,"btnNext").setScale(1.3).setInteractive();r.flipX=90,this.scene.launch("popup_level");let x=this.add.rectangle(630,205,40,40).setStrokeStyle(2,"0xffffff").setInteractive();this.add.image(x.x,x.y,"btnClose").setScale(1),x.on("pointerdown",function(c){this.scene.scene.isPaused("PlayGame")?(console.log("b"),this.scene.scene.sleep("popup_ball"),this.scene.scene.sleep("popup_pad"),this.scene.scene.sleep("popup_level"),this.scene.scene.sleep("select_level"),this.scene.scene.run("PlayGame"),window.UtilPlatform.sendMsg2Parent("HideNavFooterPlay")):(console.log("a"),this.scene.scene.sleep("popup_ball"),this.scene.scene.sleep("popup_pad"),this.scene.scene.sleep("popup_level"),this.scene.scene.sleep("select_level"),this.scene.scene.start("start_menu"))}),e.on("pointerdown",function(c){O(this.scene,e,s,n,"tabBall")}),s.on("pointerdown",function(c){O(this.scene,e,s,n,"tabLevel")}),n.on("pointerdown",function(c){O(this.scene,e,s,n,"tabPad")}),h.on("pointerdown",function(c){K(this.scene,h,"btnPlay")}),r.on("pointerdown",function(c){K(this.scene,r,"btnPre")}),p.on("pointerdown",function(c){K(this.scene,p,"btnNext")}),O(this,e,s,n,l.tabActive),P.on("tabActive",function(){O(this,e,s,n,l.tabActive)},this)}}function O(i,e,t,s,a){switch(a){case"tabBall":i.scene.sleep("popup_pad"),i.scene.sleep("popup_level"),i.scene.resume("popup_ball"),i.scene.setVisible(!0,"popup_ball"),e.tint="0x112B3C",t.tint="0xF66B0E",s.tint="0xF66B0E";break;case"tabLevel":i.scene.sleep("popup_ball"),i.scene.sleep("popup_pad"),i.scene.resume("popup_level"),i.scene.setVisible(!0,"popup_level"),e.tint="0xF66B0E",t.tint="0x112B3C",s.tint="0xF66B0E";break;case"tabPad":i.scene.sleep("popup_level"),i.scene.sleep("popup_ball"),i.scene.resume("popup_pad"),i.scene.setVisible(!0,"popup_pad"),e.tint="0xF66B0E",t.tint="0xF66B0E",s.tint="0x112B3C";break}}function Ne(i){switch(i){case"btnPlay":this.scene.sleep("popup_ball"),this.scene.sleep("popup_pad"),this.scene.sleep("popup_level"),this.scene.sleep("select_level"),this.scene.start("PlayGame"),window.UtilPlatform.sendMsg2Parent("HideNavFooterPlay");break;case"btnPre":l.level.level_curent>1&&(l.level.level_curent=l.level.level_curent-1,this.level_text.setText("Level "+l.level.level_curent+" / "+l.level.max_level),l.tabActive="btnLevel",this.scene.restart("popup_level"));break;case"btnNext":l.level.level_curent<this.saveData.level&&(l.level.level_curent++,this.level_text.setText("Level "+l.level.level_curent+" / "+l.level.max_level),l.tabActive="btnLevel",this.scene.restart("popup_level"));break}}function K(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:Ne.bind(i,t)})}let T;const Te=Phaser.Math.Between;class Me extends Phaser.Scene{constructor(){super({key:"popup_gameover"})}create(){this.add.rectangle(this.game.config.width/2,this.game.config.height/2,720,1280,0,.6),this.add.image(this.game.config.width/2,this.game.config.height/2,"popup"),this.level_text=new d(this,this.game.config.width/2,360,"font","Game Over ",70).setOrigin(.5),this.add.existing(this.level_text);let e=this.add.image(this.game.config.width/2,900,"btnPlay").setScale(1.5).setInteractive();this.textReload=new d(this,e.x,e.y,"font","Reload",45*l.dpi).setOrigin(.5),this.add.existing(this.textReload),e.on("pointerdown",function(o){ne(this.scene,e,"btnReload")});let t=Te(0,100);t>=0&&t<=40&&(T="item1"),t>40&&t<=80&&(T="item2"),t>80&&t<=100&&(T="item3"),this.borderItem=this.add.rectangle(360,630,300,300).setStrokeStyle(2,"0xffffff");let s=this.add.image(360,580,"light");s.alpha=.8,this.add.image(360,580,T).setScale(.3);let a=this.add.image(this.game.config.width/2,725,"btnVideo").setScale(1.3).setInteractive();a.tint="0xF66B0E",this.add.image(a.x-70,a.y-2,"video_icon").setScale(.04);let n=new d(this,a.x+30,a.y+2,"font","Free Item",35);this.add.existing(n),a.on("pointerdown",function(o){ne(this.scene,a,"btnFreeItem")})}}function Le(i){switch(i){case"btnReload":l.life.start_life=3,this.scene.start("PlayGame");break;case"btnFreeItem":l.reward.type=T;break}}function ne(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:Le.bind(i,t)})}let M;const We=Phaser.Math.Between;class $e extends Phaser.Scene{constructor(){super({key:"popup_nextlevel"})}create(){this.add.rectangle(this.game.config.width/2,this.game.config.height/2,720,1280,0,.6),this.add.image(this.game.config.width/2,this.game.config.height/2,"popup"),this.level_text=new d(this,this.game.config.width/2,360,"font","CLEAR ",80).setOrigin(.5),this.add.existing(this.level_text);let e=this.add.image(this.game.config.width/2,900,"btnPlay").setScale(1.5).setInteractive();this.textNextLevel=new d(this,e.x,e.y,"font","Next Level",45*l.dpi).setOrigin(.5),this.add.existing(this.textNextLevel),e.on("pointerdown",function(o){oe(this.scene,e,"btnNextLevel")});let t=We(0,100);t>=0&&t<=40&&(M="item1"),t>40&&t<=80&&(M="item2"),t>80&&t<=100&&(M="item3"),this.borderItem=this.add.rectangle(360,630,300,300).setStrokeStyle(2,"0xffffff");let s=this.add.image(360,580,"light");s.alpha=.8,this.add.image(360,580,M).setScale(.3);let a=this.add.image(this.game.config.width/2,725,"btnVideo").setScale(1.3).setInteractive();a.tint="0xF66B0E",this.add.image(a.x-70,a.y-2,"video_icon").setScale(.04);let n=new d(this,a.x+30,a.y+2,"font","Free Item",35);this.add.existing(n),a.on("pointerdown",function(o){oe(this.scene,a,"btnFreeItem")})}}function De(i){switch(i){case"btnNextLevel":this.scene.start("PlayGame");break;case"btnFreeItem":l.reward.type=M;break}}function oe(i,e,t){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:De.bind(i,t)})}class He extends Phaser.Scene{constructor(){super({key:"popup_ball"})}preload(){this.load.scenePlugin({key:"rexuiplugin",url:"../rexuiplugin.min.js",sceneKey:"rexUI"})}create(){P.on("ads-ball",function(e){fe("select",e)}),this.data=JSON.parse(localStorage.getItem("data")),this.scene.sleep(this),this.rexUI.add.scrollablePanel({x:this.game.config.width/2,y:730,width:570,height:730,scrollMode:0,background:this.add.rectangle(this.game.config.width/2,this.game.config.height/2,520,660,"0x112B3C",1).setDepth(-1),panel:{child:je(this),mask:{mask:!0,padding:1}},space:{left:10,right:10,top:10,bottom:10,panel:10}}).layout()}}let ee=[],L=[];var je=function(i){for(var e=i.rexUI.add.gridSizer({column:2,row:3,space:{column:20,row:20}}),t=0;t<i.data.ball.length;t++)e.add(Re(i,t,i.data.ball[t]));return e},Re=function(i,e,t){var s=i.add.rectangle(0,0,200,200,2118517),a,n,o=i.add.image(0,100,"ball"+e).setScale(1);t==0?(a=i.add.image(0,0,"btnVideo").setScale(.9,1).setInteractive(),a.type="select",a.name=e,n=new d(i,0,0,"font","Select",25).setOrigin(.5),i.add.existing(n),n.text="Select",a.tint="0xF66B0E"):(a=i.add.image(0,0,"btnVideo").setScale(.9,1).setInteractive(),a.type="select",a.name=e,n=new d(i,0,0,"font","Select",25).setOrigin(.5),i.add.existing(n),n.text="Watch Video",a.tint="0x112B3C"),ee.push(n),L.push(a);var h=i.rexUI.add.sizer({orientation:"y",width:270,height:200,space:{item:30}}).addBackground(s).add(o,{align:"center",padding:{left:0,right:0,top:40,bottom:0}}).add(a,{align:"center"}).add(n,{align:"center",padding:{left:0,right:0,top:-68,bottom:0}});return a.on("pointerdown",function(p){switch(a.type){case"select":he(this.scene,a,"select",e);break;case"watch_ads":he(this.scene,a,"watch_ads",e);break}}),h},Ee=function(i){let e=JSON.parse(localStorage.getItem("data"));for(let t=0;t<e.ball.length;t++)e.ball[t]==0&&(ee[t].text="Select",L[t].tint="0xF66B0E",L[t].type="select");ee[i].updateText("Selected"),L[i].tint="0xF66B0E",L[i].type="select"};function fe(i,e){let t=JSON.parse(localStorage.getItem("data"));switch(i){case"select":l.ball.key_ball="ball"+e,t.key_ball=l.ball.key_ball,t.ball[e]=0,localStorage.setItem("data",JSON.stringify(t)),Ee(e),P.emit("update-ball",l.ball.key_ball);break;case"watch_ads":l.reward.type="ball";break}}function he(i,e,t,s){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:fe.bind(i,t,s)})}Phaser.Math.Between;class Ve extends Phaser.Scene{constructor(){super({key:"popup_pad"})}preload(){this.load.scenePlugin({key:"rexuiplugin",url:"../rexuiplugin.min.js",sceneKey:"rexUI"})}create(){P.on("ads-pad",function(t){ye("select",t)}),this.data=JSON.parse(localStorage.getItem("data")),this.scene.sleep(this);var e=this.rexUI.add.scrollablePanel({x:this.game.config.width/2,y:730,width:570,height:730,scrollMode:0,background:this.add.rectangle(this.game.config.width/2,this.game.config.height/2,520,660,"0x112B3C",1).setDepth(-1),panel:{child:ze(this),mask:{mask:!0,padding:1}},space:{left:10,right:10,top:10,bottom:10,panel:10}}).layout();e.setChildrenInteractive().on("child.click",function(t,s,a){print.text+=`Click ${t.text}
`}).on("child.pressstart",function(t,s,a){print.text+=`Press ${t.text}
`})}}let te=[],W=[];var ze=function(i){for(var e=i.rexUI.add.gridSizer({column:2,row:3,space:{column:20,row:20}}),t=0;t<i.data.pad.length;t++)e.add(Je(i,t,i.data.pad[t]));return e},Je=function(i,e,t){var s=i.add.rectangle(0,0,200,200,2118517),a,n,o=i.add.image(0,100,"pad"+e).setScale(.4,.5);t==0?(a=i.add.image(0,0,"btnVideo").setScale(.9,1).setInteractive(),a.type="select",a.name=e,n=new d(i,0,0,"font","Select",25).setOrigin(.5),i.add.existing(n),n.text="Select",a.tint="0xF66B0E"):(a=i.add.image(0,0,"btnVideo").setScale(.9,1).setInteractive(),a.type="select",a.name=e,n=new d(i,0,0,"font","Select",25).setOrigin(.5),i.add.existing(n),n.text="Watch Video",a.tint="0x112B3C"),te.push(n),W.push(a);var h=i.rexUI.add.sizer({orientation:"y",width:270,height:200,space:{item:30}}).addBackground(s).add(o,{align:"center",padding:{left:0,right:0,top:40,bottom:0}}).add(a,{align:"center"}).add(n,{align:"center",padding:{left:0,right:0,top:-73,bottom:0}});return a.on("pointerdown",function(p){switch(a.type){case"select":re(this.scene,a,"select",e);break;case"watch_ads":re(this.scene,a,"watch_ads",e);break}}),h},Ue=function(i){let e=JSON.parse(localStorage.getItem("data"));for(let t=0;t<e.pad.length;t++)e.pad[t]==0&&(te[t].text="Select",W[t].tint="0xF66B0E",W[t].type="select");te[i].updateText("Selected"),W[i].tint="0xF66B0E",W[i].type="select"};function ye(i,e){let t=JSON.parse(localStorage.getItem("data"));switch(i){case"select":l.pad.key_pad="pad"+e,t.key_pad=l.pad.key_pad,t.pad[e]=0,localStorage.setItem("data",JSON.stringify(t)),Ue(e),P.emit("update-pad",l.pad.key_pad);break;case"watch_ads":l.reward.type="pad";break}}function re(i,e,t,s){i.tweens.add({targets:e,scale:{from:e.scale-.15,to:e.scale},ease:"Bounce",duration:500,onComplete:ye.bind(i,t,s)})}let q;class Ye extends Phaser.Scene{constructor(){super({key:"popup_reward"})}create(){this.data=JSON.parse(localStorage.getItem("data")),this.add.rectangle(this.game.config.width/2,this.game.config.height/2,720,1280,0,.95);let e=this.add.image(360,620,"light").setScale(2);this.tweens.add({targets:e,rotation:{from:0,to:360},ease:"Linear",duration:8e5,repeat:-1,yoyo:!1}),q=l.reward.type,this.add.image(e.x,e.y,q).setScale(.3);let t=this.add.image(360,900,"btnVideo").setInteractive();t.tint="0xF66B0E";let s=new d(this,t.x,t.y+3,"font","OK",35);this.add.existing(s);let a=[t,s];this.tweens.add({targets:a,scale:{from:0,to:1.2},delay:1500,ease:"Bounce",duration:1e3,repeat:0,yoyo:!1}),t.on("pointerdown",function(n){switch(q){case"item1":this.scene.data.item.item1++,localStorage.setItem("data",JSON.stringify(this.scene.data));break;case"item2":this.scene.data.item.item2++,localStorage.setItem("data",JSON.stringify(this.scene.data));break;case"item3":this.scene.data.item.item3++,localStorage.setItem("data",JSON.stringify(this.scene.data));break}this.scene.scene.stop("popup_reward")})}}class Xe extends Phaser.Scene{constructor(){super({key:"popup_level"})}preload(){this.load.json("lv"+l.level.level_curent,"assets/level/"+l.level.level_curent+".json")}create(){b=this.cache.json.get("lv"+l.level.level_curent),Ke(this)}}let b,de,ce,w,pe,z,I,A,ge,me;function Ke(i){ge=i.add.group(),me=i.add.group(),pe=l.color,z=[],I=500,A=500,de=I/b.nWidth,ce=A/b.nHeight,b.nWidth>b.nHeight?w=de:w=ce,b.nWidth>b.nHeight?I=I:I=w*b.nWidth,b.nWidth>b.nHeight?A=A:A=w*b.nHeight;for(let e=0;e<b.vBrick.length;e++){let s=b.vBrick[e].split(",");if(s[5]==2189591295){let a=i.physics.add.image(J(s[0])+(700-I)/2+5,J(s[1])+(b.nHeight-b.nWidth)*w+400,"block_white");a.displayHeight=w+5,a.displayWidth=w+5,a.tint="0xB6B6B6",a.setImmovable(!0),me.add(a)}else{let a=i.physics.add.image(J(s[0])+(700-I)/2+5,J(s[1])+(b.nHeight-b.nWidth)*w+400,"block_white");a.displayHeight=w+5,a.displayWidth=w+5;let n=z.indexOf(s[5]);n==-1&&(z.push(s[5]),n=z.indexOf(s[5])),ge.add(a),a.setImmovable(!0),a.tint=pe[n]}}i.cache.json.remove("lv"+l.level.level_curent)}function J(i){return I-i*w}Phaser.Math.Between;class qe extends Phaser.Scene{constructor(){super("map")}preload(){this.load.json("lv"+U,"assets/level/"+U+".json"),this.load.plugin("rexraycasterplugin","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/dist/rexraycasterplugin.min.js",!0)}create(){F=this.cache.json.get("lv"+U),Qe(this),this.trajectoryGraphics=this.add.graphics(),console.log("aa"),this.staticObstacles=[this.add.rectangle(100,100,600,30,8684676).setOrigin(0,1),this.add.rectangle(100,500,600,30,8684676).setOrigin(0,0)],this.dynamicObstacles=[this.add.rectangle(580,200,100,30,12878900),this.add.rectangle(620,400,100,30,12878900).setAngle(90)],this.raycaster=this.plugins.get("rexraycasterplugin").add().addObstacle(Y),this.debugGraphics=this.add.graphics(),this.data.set("startX",360).set("startY",1100)}update(){this.raycaster.updateObstacle(Y);var e=this.input.activePointer,t=this.data.get("startX"),s=this.data.get("startY"),a=Phaser.Math.Angle.Between(t,s,e.worldX,e.worldY);Ze(this.raycaster,t,s,a,this.debugGraphics)}getBallPosition(){return this.ballGroup.getChildren(),new Phaser.Geom.Point(360,1100)}startAiming(){this.legalAngleOfFire=!1}adjustAim(e){if(e.x-e.downX,e.y-e.downY>10){this.legalAngleOfFire=!0,this.direction=Phaser.Math.Angle.Between(e.x,e.y,e.downX,e.downY);let s=this.direction,a=1200;this.trajectoryGraphics.clear(),this.trajectoryGraphics.lineStyle(1,65280),this.ballVertices=this.getBallVertices(this.getBallPosition());do{let n={collisionDistance:1e4};if(this.ballVertices.forEach((function(o,h){let p=new Phaser.Geom.Line(o.x,o.y,o.x+a*Math.cos(s),o.y+a*Math.sin(s));Phaser.Actions.Call(this.fieldSegments,function(r){let x=new Phaser.Geom.Point(-1,-1);if(Phaser.Geom.Intersects.LineToLine(p,r,x),x.x!=-1){let c=Phaser.Math.Distance.BetweenPoints(x,o);c<n.collisionDistance&&c>1&&(n.collisionDistance=c,n.collisionPoint=new Phaser.Geom.Point(x.x,x.y),n.collisionAngle=Phaser.Geom.Line.Angle(r),n.collisionLine=Phaser.Geom.Line.Clone(r),n.vertexIndex=h)}},this)}).bind(this)),n.collisionPoint){this.trajectoryGraphics.lineBetween(this.ballVertices[n.vertexIndex].x,this.ballVertices[n.vertexIndex].y,n.collisionPoint.x,n.collisionPoint.y),this.trajectoryGraphics.fillStyle(16711680,.5);let o=new Phaser.Geom.Point;switch(n.vertexIndex){case 0:this.trajectoryGraphics.fillRect(n.collisionPoint.x,n.collisionPoint.y,this.ballSize,this.ballSize),o.x=n.collisionPoint.x+this.ballSize/2,o.y=n.collisionPoint.y+this.ballSize/2;break;case 1:this.trajectoryGraphics.fillRect(n.collisionPoint.x-this.ballSize,n.collisionPoint.y,this.ballSize,this.ballSize),o.x=n.collisionPoint.x-this.ballSize/2,o.y=n.collisionPoint.y+this.ballSize/2;break;case 2:this.trajectoryGraphics.fillRect(n.collisionPoint.x-this.ballSize,n.collisionPoint.y-this.ballSize,this.ballSize,this.ballSize),o.x=n.collisionPoint.x-this.ballSize/2,o.y=n.collisionPoint.y-this.ballSize/2;break;case 3:this.trajectoryGraphics.fillRect(n.collisionPoint.x,n.collisionPoint.y-this.ballSize,this.ballSize,this.ballSize),o.x=n.collisionPoint.x+this.ballSize/2,o.y=n.collisionPoint.y-this.ballSize/2;break}Phaser.Math.RadToDeg(n.collisionAngle)%180==0?s=2*Math.PI-s:s=Math.PI-s,s=Phaser.Math.Angle.Wrap(s),this.ballVertices=this.getBallVertices(o)}a-=n.collisionDistance}while(a>0)}else this.legalAngleOfFire=!1,this.trajectoryGraphics.clear()}addTofieldSegments(e){this.fieldSegments.push(e.getLineA()),this.fieldSegments.push(e.getLineB()),this.fieldSegments.push(e.getLineC()),this.fieldSegments.push(e.getLineD())}}let Y,F,U=1,xe,Q=1,be,G;function Qe(i){be=l.color,G=[],Y=[],xe=700/F.nWidth,F.nWidth>=50&&(Q=.8),F.nWidth<50&&(Q=1),F.nHeight>=54,F.nHeight<54,console.log(U);var e=i.add.container(0,0);for(let t=0;t<F.vBrick.length;t++){let a=F.vBrick[t].split(","),n=i.add.image(ue(a[0])+15,ue(a[1])+50,"block_white").setScale(Q);if(e.add(n),Y.push(n),a[5]==2189591295)n.tint="0xB6B6B6";else{let o=G.indexOf(a[5]);o==-1&&(G.push(a[5]),o=G.indexOf(a[5])),n.tint=be[o]}}console.log(G),e.setScale(.7),e.setPosition(0,100)}function ue(i){return 500-i*xe}var Ze=function(i,e,t,s,a){a.clear().fillStyle(12895232).fillCircle(e,t,10);const n=2;for(var o=0;o<n;o++){var h=i.rayToward(e,t,s);if(a.lineStyle(5,8650752).strokeLineShape(i.ray),h)a.fillStyle(16711680).fillPoint(h.x,h.y,15),e=h.x,t=h.y,s=h.reflectAngle;else break}};window.onload=function(){let i={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game",width:720,height:1280},physics:{default:"arcade",arcade:{}},transparent:!0,powerPreference:"default",fps:60,enableDebug:!1,scene:[ve,qe,Fe,Ae,Ge,Pe,Me,$e,He,Ve,Ye,Xe]};new Phaser.Game(i)};
