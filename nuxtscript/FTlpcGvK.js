import{W as Y,au as F,av as T,e as C,g as G,aw as H,ax as V,a1 as X,Z as q,Y as K,P as _,r as B}from"./cyCOdGck.js";function I(e){return X()?(q(e),!0):!1}function f(e){return typeof e=="function"?e():G(e)}const R=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const J=Object.prototype.toString,N=e=>J.call(e)==="[object Object]",L=()=>{};function U(...e){if(e.length!==1)return Y(...e);const r=e[0];return typeof r=="function"?F(T(()=>({get:r,set:L}))):C(r)}function Z(e,r={}){if(!H(e))return V(e);const o=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const a in e.value)o[a]=T(()=>({get(){return e.value[a]},set(i){var d;if((d=f(r.replaceRef))!=null?d:!0)if(Array.isArray(e.value)){const s=[...e.value];s[a]=i,e.value=s}else{const s={...e.value,[a]:i};Object.setPrototypeOf(s,Object.getPrototypeOf(e.value)),e.value=s}else e.value[a]=i}}));return o}function z(e){var r;const o=f(e);return(r=o==null?void 0:o.$el)!=null?r:o}const P=R?window:void 0,Q=R?window.document:void 0;function $(...e){let r,o,a,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,a,i]=e,r=P):[r,o,a,i]=e,!r)return L;Array.isArray(o)||(o=[o]),Array.isArray(a)||(a=[a]);const d=[],p=()=>{d.forEach(y=>y()),d.length=0},s=(y,g,m,w)=>(y.addEventListener(g,m,w),()=>y.removeEventListener(g,m,w)),u=K(()=>[z(r),f(i)],([y,g])=>{if(p(),!y)return;const m=N(g)?{...g}:g;d.push(...o.flatMap(w=>a.map(M=>s(y,w,M,m))))},{immediate:!0,flush:"post"}),c=()=>{u(),p()};return I(c),c}function te(e,r={}){var o,a;const{pointerTypes:i,preventDefault:d,stopPropagation:p,exact:s,onMove:u,onEnd:c,onStart:y,initialValue:g,axis:m="both",draggingElement:w=P,containerElement:M,handle:l=e}=r,t=C((o=f(g))!=null?o:{x:0,y:0}),v=C(),E=n=>i?i.includes(n.pointerType):!0,h=n=>{f(d)&&n.preventDefault(),f(p)&&n.stopPropagation()},k=n=>{var b;if(n.button!==0||f(r.disabled)||!E(n)||f(s)&&n.target!==f(e))return;const x=f(M),D=(b=x==null?void 0:x.getBoundingClientRect)==null?void 0:b.call(x),A=f(e).getBoundingClientRect(),W={x:n.clientX-(x?A.left-D.left+x.scrollLeft:A.left),y:n.clientY-(x?A.top-D.top+x.scrollTop:A.top)};(y==null?void 0:y(W,n))!==!1&&(v.value=W,h(n))},O=n=>{if(f(r.disabled)||!E(n)||!v.value)return;const b=f(M),x=f(e).getBoundingClientRect();let{x:D,y:A}=t.value;(m==="x"||m==="both")&&(D=n.clientX-v.value.x,b&&(D=Math.min(Math.max(0,D),b.scrollWidth-x.width))),(m==="y"||m==="both")&&(A=n.clientY-v.value.y,b&&(A=Math.min(Math.max(0,A),b.scrollHeight-x.height))),t.value={x:D,y:A},u==null||u(t.value,n),h(n)},S=n=>{f(r.disabled)||!E(n)||v.value&&(v.value=void 0,c==null||c(t.value,n),h(n))};if(R){const n={capture:(a=r.capture)!=null?a:!0};$(l,"pointerdown",k,n),$(w,"pointermove",O,n),$(w,"pointerup",S,n)}return{...Z(t),position:t,isDragging:_(()=>!!v.value),style:_(()=>`left:${t.value.x}px;top:${t.value.y}px;`)}}function ne(e=null,r={}){const{baseUrl:o="",rel:a="icon",document:i=Q}=r,d=U(e),p=s=>{const u=i==null?void 0:i.head.querySelectorAll(`link[rel*="${a}"]`);if(!u||u.length===0){const c=i==null?void 0:i.createElement("link");c&&(c.rel=a,c.href=`${o}${s}`,c.type=`image/${s.split(".").pop()}`,i==null||i.head.append(c));return}u==null||u.forEach(c=>c.href=`${o}${s}`)};return K(d,(s,u)=>{typeof s=="string"&&s!==u&&p(s)},{immediate:!0}),d}const j={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function re(e={}){const{reactive:r=!1,target:o=P,aliasMap:a=j,passive:i=!0,onEventFired:d=L}=e,p=B(new Set),s={toJSON(){return{}},current:p},u=r?B(s):s,c=new Set,y=new Set;function g(l,t){l in u&&(r?u[l]=t:u[l].value=t)}function m(){p.clear();for(const l of y)g(l,!1)}function w(l,t){var v,E;const h=(v=l.key)==null?void 0:v.toLowerCase(),O=[(E=l.code)==null?void 0:E.toLowerCase(),h].filter(Boolean);h&&(t?p.add(h):p.delete(h));for(const S of O)y.add(S),g(S,t);h==="meta"&&!t?(c.forEach(S=>{p.delete(S),g(S,!1)}),c.clear()):typeof l.getModifierState=="function"&&l.getModifierState("Meta")&&t&&[...p,...O].forEach(S=>c.add(S))}$(o,"keydown",l=>(w(l,!0),d(l)),{passive:i}),$(o,"keyup",l=>(w(l,!1),d(l)),{passive:i}),$("blur",m,{passive:!0}),$("focus",m,{passive:!0});const M=new Proxy(u,{get(l,t,v){if(typeof t!="string")return Reflect.get(l,t,v);if(t=t.toLowerCase(),t in a&&(t=a[t]),!(t in u))if(/[+_-]/.test(t)){const h=t.split(/[+_-]/g).map(k=>k.trim());u[t]=_(()=>h.every(k=>f(M[k])))}else u[t]=C(!1);const E=Reflect.get(l,t,v);return r?f(E):E}});return M}export{re as a,ne as b,te as u};
