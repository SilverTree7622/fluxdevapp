import"./B5Qt9EMX.js";function tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const Ct=tg((()=>{var e={50792:s=>{var o=Object.prototype.hasOwnProperty,i="~";function r(){}function h(d,c,p){this.fn=d,this.context=c,this.once=p||!1}function a(d,c,p,f,v){if(typeof p!="function")throw new TypeError("The listener must be a function");var g=new h(p,f||d,v),y=i?i+c:c;return d._events[y]?d._events[y].fn?d._events[y]=[d._events[y],g]:d._events[y].push(g):(d._events[y]=g,d._eventsCount++),d}function u(d,c){--d._eventsCount===0?d._events=new r:delete d._events[c]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1)),l.prototype.eventNames=function(){var d,c,p=[];if(this._eventsCount===0)return p;for(c in d=this._events)o.call(d,c)&&p.push(i?c.slice(1):c);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(d)):p},l.prototype.listeners=function(d){var c=i?i+d:d,p=this._events[c];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,v=p.length,g=new Array(v);f<v;f++)g[f]=p[f].fn;return g},l.prototype.listenerCount=function(d){var c=i?i+d:d,p=this._events[c];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,c,p,f,v,g){var y=i?i+d:d;if(!this._events[y])return!1;var m,x,b=this._events[y],w=arguments.length;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,c),!0;case 3:return b.fn.call(b.context,c,p),!0;case 4:return b.fn.call(b.context,c,p,f),!0;case 5:return b.fn.call(b.context,c,p,f,v),!0;case 6:return b.fn.call(b.context,c,p,f,v,g),!0}for(x=1,m=new Array(w-1);x<w;x++)m[x-1]=arguments[x];b.fn.apply(b.context,m)}else{var T,S=b.length;for(x=0;x<S;x++)switch(b[x].once&&this.removeListener(d,b[x].fn,void 0,!0),w){case 1:b[x].fn.call(b[x].context);break;case 2:b[x].fn.call(b[x].context,c);break;case 3:b[x].fn.call(b[x].context,c,p);break;case 4:b[x].fn.call(b[x].context,c,p,f);break;default:if(!m)for(T=1,m=new Array(w-1);T<w;T++)m[T-1]=arguments[T];b[x].fn.apply(b[x].context,m)}}return!0},l.prototype.on=function(d,c,p){return a(this,d,c,p,!1)},l.prototype.once=function(d,c,p){return a(this,d,c,p,!0)},l.prototype.removeListener=function(d,c,p,f){var v=i?i+d:d;if(!this._events[v])return this;if(!c)return u(this,v),this;var g=this._events[v];if(g.fn)g.fn!==c||f&&!g.once||p&&g.context!==p||u(this,v);else{for(var y=0,m=[],x=g.length;y<x;y++)(g[y].fn!==c||f&&!g[y].once||p&&g[y].context!==p)&&m.push(g[y]);m.length?this._events[v]=m.length===1?m[0]:m:u(this,v)}return this},l.prototype.removeAllListeners=function(d){var c;return d?(c=i?i+d:d,this._events[c]&&u(this,c)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,s.exports=l},11517:(s,o,i)=>{var r=i(38829);s.exports=function(h,a,u,l){for(var d=h[0],c=1;c<h.length;c++){var p=h[c];r(p,d,a,u,l),d=p}return h}},80318:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"angle",a,u,l,d)}},60757:s=>{s.exports=function(o,i,r){for(var h=0;h<o.length;h++){var a=o[h];i.call(r,a)}return o}},69927:s=>{s.exports=function(o,i,r){r===void 0&&(r=0);for(var h=r;h<o.length;h++){var a=o[h],u=!0;for(var l in i)a[l]!==i[l]&&(u=!1);if(u)return a}return null}},32265:s=>{s.exports=function(o,i,r){r===void 0&&(r=0);for(var h=o.length-1;h>=r;h--){var a=o[h],u=!0;for(var l in i)a[l]!==i[l]&&(u=!1);if(u)return a}return null}},94420:(s,o,i)=>{var r=i(11879),h=i(60461),a=i(95540),u=i(29747),l=new(i(41481))({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1).setOrigin(0,0);s.exports=function(d,c){c===void 0&&(c={});var p=c.hasOwnProperty("width"),f=c.hasOwnProperty("height"),v=a(c,"width",-1),g=a(c,"height",-1),y=a(c,"cellWidth",1),m=a(c,"cellHeight",y),x=a(c,"position",h.TOP_LEFT),b=a(c,"x",0),w=a(c,"y",0),T=0,S=0,C=v*y,E=g*m;l.setPosition(b,w),l.setSize(y,m);for(var M=0;M<d.length;M++)if(r(d[M],l,x),p&&v===-1)l.x+=y;else if(f&&g===-1)l.y+=m;else if(f&&!p){if(S+=m,l.y+=m,S===E&&(S=0,T+=y,l.y=w,l.x+=y,T===C))break}else if(T+=y,l.x+=y,T===C&&(T=0,S+=m,l.x=b,l.y+=m,S===E))break;return d}},41721:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"alpha",a,u,l,d)}},67285:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"x",a,u,l,d)}},9074:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"x",a,l,c,p),r(h,"y",u,d,c,p)}},75222:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"y",a,u,l,d)}},22983:s=>{s.exports=function(o,i,r,h){r===void 0&&(r=0),h===void 0&&(h=6.28);for(var a=r,u=(h-r)/o.length,l=i.x,d=i.y,c=i.radius,p=0;p<o.length;p++)o[p].x=l+c*Math.cos(a),o[p].y=d+c*Math.sin(a),a+=u;return o}},95253:s=>{s.exports=function(o,i,r,h){r===void 0&&(r=0),h===void 0&&(h=6.28);for(var a=r,u=(h-r)/o.length,l=i.width/2,d=i.height/2,c=0;c<o.length;c++)o[c].x=i.x+l*Math.cos(a),o[c].y=i.y+d*Math.sin(a),a+=u;return o}},88505:(s,o,i)=>{var r=i(15258),h=i(26708);s.exports=function(a,u,l){var d;d=l?h(u,l,a.length):r(u,a.length);for(var c=0;c<a.length;c++){var p=a[c],f=d[c];p.x=f.x,p.y=f.y}return a}},41346:(s,o,i)=>{var r=i(14649),h=i(86003),a=i(49498);s.exports=function(u,l,d){d===void 0&&(d=0);var c=r(l,!1,u.length);d>0?h(c,d):d<0&&a(c,Math.abs(d));for(var p=0;p<u.length;p++)u[p].x=c[p].x,u[p].y=c[p].y;return u}},11575:(s,o,i)=>{var r=i(84993);s.exports=function(h,a,u){var l=r({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},u),d=r({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},u),c=r({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},u);l.pop(),d.pop(),c.pop();for(var p=(l=l.concat(d,c)).length/h.length,f=0,v=0;v<h.length;v++){var g=h[v],y=l[Math.floor(f)];g.x=y.x,g.y=y.y,f+=p}return h}},29953:s=>{s.exports=function(o,i,r){for(var h=0;h<o.length;h++){var a=o[h];a.anims&&a.anims.play(i,r)}return o}},66979:s=>{s.exports=function(o,i,r,h,a,u){var l;h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=1);var d=0,c=o.length;if(u===1)for(l=a;l<c;l++)o[l][i]+=r+d*h,d++;else for(l=a;l>=0;l--)o[l][i]+=r+d*h,d++;return o}},43967:s=>{s.exports=function(o,i,r,h,a,u){var l;h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=1);var d=0,c=o.length;if(u===1)for(l=a;l<c;l++)o[l][i]=r+d*h,d++;else for(l=a;l>=0;l--)o[l][i]=r+d*h,d++;return o}},88926:(s,o,i)=>{var r=i(28176);s.exports=function(h,a){for(var u=0;u<h.length;u++)r(a,h[u]);return h}},33286:(s,o,i)=>{var r=i(24820);s.exports=function(h,a){for(var u=0;u<h.length;u++)r(a,h[u]);return h}},96e3:(s,o,i)=>{var r=i(65822);s.exports=function(h,a){for(var u=0;u<h.length;u++)r(a,h[u]);return h}},28789:(s,o,i)=>{var r=i(26597);s.exports=function(h,a){for(var u=0;u<h.length;u++)r(a,h[u]);return h}},97154:(s,o,i)=>{var r=i(90260);s.exports=function(h,a){for(var u=0;u<h.length;u++)r(a,h[u]);return h}},20510:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"rotation",a,u,l,d)}},91051:(s,o,i)=>{var r=i(1163),h=i(20339);s.exports=function(a,u,l){for(var d=u.x,c=u.y,p=0;p<a.length;p++){var f=a[p];r(f,d,c,l,Math.max(1,h(f.x,f.y,d,c)))}return a}},76332:(s,o,i)=>{var r=i(1163);s.exports=function(h,a,u,l){var d=a.x,c=a.y;if(l===0)return h;for(var p=0;p<h.length;p++)r(h[p],d,c,u,l);return h}},61619:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"scaleX",a,u,l,d)}},94868:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"scaleX",a,l,c,p),r(h,"scaleY",u,d,c,p)}},95532:(s,o,i)=>{var r=i(66979);s.exports=function(h,a,u,l,d){return r(h,"scaleY",a,u,l,d)}},8689:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"alpha",a,u,l,d)}},2645:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l){return r(h,"blendMode",a,0,u,l)}},32372:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"depth",a,u,l,d)}},85373:s=>{s.exports=function(o,i,r){for(var h=0;h<o.length;h++)o[h].setInteractive(i,r);return o}},81583:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"originX",a,l,c,p),r(h,"originY",u,d,c,p),h.forEach(function(f){f.updateDisplayOrigin()}),h}},79939:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"rotation",a,u,l,d)}},2699:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"scaleX",a,l,c,p),r(h,"scaleY",u,d,c,p)}},98739:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"scaleX",a,u,l,d)}},98476:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"scaleY",a,u,l,d)}},6207:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"scrollFactorX",a,l,c,p),r(h,"scrollFactorY",u,d,c,p)}},6607:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"scrollFactorX",a,u,l,d)}},72248:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"scrollFactorY",a,u,l,d)}},14036:s=>{s.exports=function(o,i,r,h,a){for(var u=0;u<o.length;u++)o[u].setTint(i,r,h,a);return o}},50159:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l){return r(h,"visible",a,0,u,l)}},77597:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"x",a,u,l,d)}},83194:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d,c,p){return u==null&&(u=a),r(h,"x",a,l,c,p),r(h,"y",u,d,c,p)}},67678:(s,o,i)=>{var r=i(43967);s.exports=function(h,a,u,l,d){return r(h,"y",a,u,l,d)}},35850:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d){var c,p;l===void 0&&(l=0),d===void 0&&(d=new r);var f=h.length;if(f===1)c=h[0].x,p=h[0].y,h[0].x=a,h[0].y=u;else{var v=1,g=0;l===0&&(g=f-1,v=f-2),c=h[g].x,p=h[g].y,h[g].x=a,h[g].y=u;for(var y=0;y<f;y++)if(!(v>=f||v===-1)){var m=h[v],x=m.x,b=m.y;m.x=c,m.y=p,c=x,p=b,l===0?v--:v++}}return d.x=c,d.y=p,d}},8628:(s,o,i)=>{var r=i(33680);s.exports=function(h){return r(h)}},21837:(s,o,i)=>{var r=i(7602);s.exports=function(h,a,u,l,d){d===void 0&&(d=!1);var c,p=Math.abs(l-u)/h.length;if(d)for(c=0;c<h.length;c++)h[c][a]+=r(c*p,u,l);else for(c=0;c<h.length;c++)h[c][a]=r(c*p,u,l);return h}},21910:(s,o,i)=>{var r=i(54261);s.exports=function(h,a,u,l,d){d===void 0&&(d=!1);var c,p=Math.abs(l-u)/h.length;if(d)for(c=0;c<h.length;c++)h[c][a]+=r(c*p,u,l);else for(c=0;c<h.length;c++)h[c][a]=r(c*p,u,l);return h}},62054:s=>{s.exports=function(o,i,r,h,a){if(a===void 0&&(a=!1),o.length===0)return o;if(o.length===1)return a?o[0][i]+=(h+r)/2:o[0][i]=(h+r)/2,o;var u,l=Math.abs(h-r)/(o.length-1);if(a)for(u=0;u<o.length;u++)o[u][i]+=u*l+r;else for(u=0;u<o.length;u++)o[u][i]=u*l+r;return o}},79815:s=>{s.exports=function(o){for(var i=0;i<o.length;i++)o[i].visible=!o[i].visible;return o}},39665:(s,o,i)=>{var r=i(15994);s.exports=function(h,a,u){u===void 0&&(u=0);for(var l=0;l<h.length;l++){var d=h[l];d.x=r(d.x,a.left-u,a.right+u),d.y=r(d.y,a.top-u,a.bottom+u)}return h}},61061:(s,o,i)=>{s.exports={AlignTo:i(11517),Angle:i(80318),Call:i(60757),GetFirst:i(69927),GetLast:i(32265),GridAlign:i(94420),IncAlpha:i(41721),IncX:i(67285),IncXY:i(9074),IncY:i(75222),PlaceOnCircle:i(22983),PlaceOnEllipse:i(95253),PlaceOnLine:i(88505),PlaceOnRectangle:i(41346),PlaceOnTriangle:i(11575),PlayAnimation:i(29953),PropertyValueInc:i(66979),PropertyValueSet:i(43967),RandomCircle:i(88926),RandomEllipse:i(33286),RandomLine:i(96e3),RandomRectangle:i(28789),RandomTriangle:i(97154),Rotate:i(20510),RotateAround:i(91051),RotateAroundDistance:i(76332),ScaleX:i(61619),ScaleXY:i(94868),ScaleY:i(95532),SetAlpha:i(8689),SetBlendMode:i(2645),SetDepth:i(32372),SetHitArea:i(85373),SetOrigin:i(81583),SetRotation:i(79939),SetScale:i(2699),SetScaleX:i(98739),SetScaleY:i(98476),SetScrollFactor:i(6207),SetScrollFactorX:i(6607),SetScrollFactorY:i(72248),SetTint:i(14036),SetVisible:i(50159),SetX:i(77597),SetXY:i(83194),SetY:i(67678),ShiftPosition:i(35850),Shuffle:i(8628),SmootherStep:i(21910),SmoothStep:i(21837),Spread:i(62054),ToggleVisible:i(79815),WrapInRectangle:i(39665)}},42099:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(74943),u=i(81957),l=i(41138),d=i(35154),c=i(90126),p=new h({initialize:function(f,v,g){this.manager=f,this.key=v,this.type="frame",this.frames=this.getFrames(f.textureManager,d(g,"frames",[]),d(g,"defaultTextureKey",null),d(g,"sortFrames",!0)),this.frameRate=d(g,"frameRate",null),this.duration=d(g,"duration",null),this.msPerFrame,this.skipMissedFrames=d(g,"skipMissedFrames",!0),this.delay=d(g,"delay",0),this.repeat=d(g,"repeat",0),this.repeatDelay=d(g,"repeatDelay",0),this.yoyo=d(g,"yoyo",!1),this.showBeforeDelay=d(g,"showBeforeDelay",!1),this.showOnStart=d(g,"showOnStart",!1),this.hideOnComplete=d(g,"hideOnComplete",!1),this.randomFrame=d(g,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(f,v,g,y){g===null&&y===null?(f.frameRate=24,f.duration=24/v*1e3):g&&y===null?(f.duration=g,f.frameRate=v/(g/1e3)):(f.frameRate=y,f.duration=v/y*1e3),f.msPerFrame=1e3/f.frameRate},addFrame:function(f){return this.addFrameAt(this.frames.length,f)},addFrameAt:function(f,v){var g=this.getFrames(this.manager.textureManager,v);if(g.length>0){if(f===0)this.frames=g.concat(this.frames);else if(f===this.frames.length)this.frames=this.frames.concat(g);else{var y=this.frames.slice(0,f),m=this.frames.slice(f);this.frames=y.concat(g,m)}this.updateFrameSequence()}return this},checkFrame:function(f){return f>=0&&f<this.frames.length},getFirstTick:function(f){f.accumulator=0,f.nextTick=f.currentFrame.duration?f.currentFrame.duration:f.msPerFrame},getFrameAt:function(f){return this.frames[f]},getFrames:function(f,v,g,y){y===void 0&&(y=!0);var m,x,b,w,T=[],S=1;if(typeof v=="string"){if(w=v,!f.exists(w))return console.warn('Texture "%s" not found',w),T;var C=f.get(w).getFrameNames();y&&c(C),v=[],C.forEach(function(P){v.push({key:w,frame:P})})}if(!Array.isArray(v)||v.length===0)return T;for(b=0;b<v.length;b++){var E=v[b],M=d(E,"key",g);if(M){var _=d(E,"frame",0),O=f.getFrame(M,_);O?((x=new l(M,_,S,O)).duration=d(E,"duration",0),x.isFirst=!m,m&&(m.nextFrame=x,x.prevFrame=m),T.push(x),m=x,S++):console.warn('Texture "%s" not found',M)}}if(T.length>0){x.isLast=!0,x.nextFrame=T[0],T[0].prevFrame=x;var k=1/(T.length-1);for(b=0;b<T.length;b++)T[b].progress=b*k}return T},getNextTick:function(f){f.accumulator-=f.nextTick,f.nextTick=f.currentFrame.duration?f.currentFrame.duration:f.msPerFrame},getFrameByProgress:function(f){return f=r(f,0,1),u(f,this.frames,"progress")},nextFrame:function(f){var v=f.currentFrame;v.isLast?f.yoyo?this.handleYoyoFrame(f,!1):f.repeatCounter>0?f.inReverse&&f.forward?f.forward=!1:this.repeatAnimation(f):f.complete():this.updateAndGetNextTick(f,v.nextFrame)},handleYoyoFrame:function(f,v){if(v||(v=!1),f.inReverse===!v&&f.repeatCounter>0)return(f.repeatDelay===0||f.pendingRepeat)&&(f.forward=v),void this.repeatAnimation(f);if(f.inReverse===v||f.repeatCounter!==0){f.forward=v;var g=v?f.currentFrame.nextFrame:f.currentFrame.prevFrame;this.updateAndGetNextTick(f,g)}else f.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(f){var v=f.currentFrame;v.isFirst?f.yoyo?this.handleYoyoFrame(f,!0):f.repeatCounter>0?(f.inReverse&&!f.forward||(f.forward=!0),this.repeatAnimation(f)):f.complete():this.updateAndGetNextTick(f,v.prevFrame)},updateAndGetNextTick:function(f,v){f.setCurrentFrame(v),this.getNextTick(f)},removeFrame:function(f){var v=this.frames.indexOf(f);return v!==-1&&this.removeFrameAt(v),this},removeFrameAt:function(f){return this.frames.splice(f,1),this.updateFrameSequence(),this},repeatAnimation:function(f){if(f._pendingStop===2){if(f._pendingStopValue===0)return f.stop();f._pendingStopValue--}f.repeatDelay>0&&!f.pendingRepeat?(f.pendingRepeat=!0,f.accumulator-=f.nextTick,f.nextTick+=f.repeatDelay):(f.repeatCounter--,f.forward?f.setCurrentFrame(f.currentFrame.nextFrame):f.setCurrentFrame(f.currentFrame.prevFrame),f.isPlaying&&(this.getNextTick(f),f.handleRepeat()))},toJSON:function(){var f={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(v){f.frames.push(v.toJSON())}),f},updateFrameSequence:function(){for(var f,v=this.frames.length,g=1/(v-1),y=0;y<v;y++)(f=this.frames[y]).index=y+1,f.isFirst=!1,f.isLast=!1,f.progress=y*g,y===0?(f.isFirst=!0,v===1?(f.isLast=!0,f.nextFrame=f,f.prevFrame=f):(f.isLast=!1,f.prevFrame=this.frames[v-1],f.nextFrame=this.frames[y+1])):y===v-1&&v>1?(f.isLast=!0,f.prevFrame=this.frames[v-2],f.nextFrame=this.frames[0]):v>1&&(f.prevFrame=this.frames[y-1],f.nextFrame=this.frames[y+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var f=0;f<this.frames.length;f++)this.frames[f].destroy();this.frames=[],this.manager=null}});s.exports=p},41138:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l,d){d===void 0&&(d=!1),this.textureKey=h,this.textureFrame=a,this.index=u,this.frame=l,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});s.exports=r},60848:(s,o,i)=>{var r=i(42099),h=i(83419),a=i(90330),u=i(50792),l=i(74943),d=i(8443),c=i(95540),p=i(35154),f=i(36383),v=i(20283),g=i(41836),y=new h({Extends:u,initialize:function(m){u.call(this),this.game=m,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",m.events.once(d.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(d.DESTROY,this.destroy,this)},addMix:function(m,x,b){var w=this.anims,T=this.mixes,S=typeof m=="string"?m:m.key,C=typeof x=="string"?x:x.key;if(w.has(S)&&w.has(C)){var E=T.get(S);E||(E={}),E[C]=b,T.set(S,E)}return this},removeMix:function(m,x){var b=this.mixes,w=typeof m=="string"?m:m.key,T=b.get(w);if(T)if(x){var S=typeof x=="string"?x:x.key;T.hasOwnProperty(S)&&delete T[S]}else x||b.delete(w);return this},getMix:function(m,x){var b=this.mixes,w=typeof m=="string"?m:m.key,T=typeof x=="string"?x:x.key,S=b.get(w);return S&&S.hasOwnProperty(T)?S[T]:0},add:function(m,x){return this.anims.has(m)?(console.warn("Animation key exists: "+m),this):(x.key=m,this.anims.set(m,x),this.emit(l.ADD_ANIMATION,m,x),this)},exists:function(m){return this.anims.has(m)},createFromAseprite:function(m,x,b){var w=[],T=this.game.cache.json.get(m);if(!T)return console.warn("No Aseprite data found for: "+m),w;var S=this,C=p(T,"meta",null),E=p(T,"frames",null);return C&&E&&p(C,"frameTags",[]).forEach(function(M){var _=[],O=c(M,"name",null),k=c(M,"from",0),P=c(M,"to",0),A=c(M,"direction","forward");if(O&&(!x||x&&x.indexOf(O)>-1)){for(var L=0,D=k;D<=P;D++){var F=D.toString(),X=E[F];if(X){var z=c(X,"duration",f.MAX_SAFE_INTEGER);_.push({key:m,frame:F,duration:z}),L+=z}}A==="reverse"&&(_=_.reverse());var Y,R={key:O,frames:_,duration:L,yoyo:A==="pingpong"};b?b.anims&&(Y=b.anims.create(R)):Y=S.create(R),Y&&w.push(Y)}}),w},create:function(m){var x=m.key,b=!1;return x&&((b=this.get(x))?console.warn("AnimationManager key already exists: "+x):(b=new r(this,x,m),this.anims.set(x,b),this.emit(l.ADD_ANIMATION,x,b))),b},fromJSON:function(m,x){x===void 0&&(x=!1),x&&this.anims.clear(),typeof m=="string"&&(m=JSON.parse(m));var b=[];if(m.hasOwnProperty("anims")&&Array.isArray(m.anims)){for(var w=0;w<m.anims.length;w++)b.push(this.create(m.anims[w]));m.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=m.globalTimeScale)}else m.hasOwnProperty("key")&&m.type==="frame"&&b.push(this.create(m));return b},generateFrameNames:function(m,x){var b=p(x,"prefix",""),w=p(x,"start",0),T=p(x,"end",0),S=p(x,"suffix",""),C=p(x,"zeroPad",0),E=p(x,"outputArray",[]),M=p(x,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),E;var _,O=this.textureManager.get(m);if(!O)return E;if(x)for(M||(M=v(w,T)),_=0;_<M.length;_++){var k=b+g(M[_],C,"0",1)+S;O.has(k)?E.push({key:m,frame:k}):console.warn('Frame "%s" not found in texture "%s"',k,m)}else for(M=O.getFrameNames(),_=0;_<M.length;_++)E.push({key:m,frame:M[_]});return E},generateFrameNumbers:function(m,x){var b=p(x,"start",0),w=p(x,"end",-1),T=p(x,"first",!1),S=p(x,"outputArray",[]),C=p(x,"frames",!1);if(!this.textureManager.exists(m))return console.warn('Texture "%s" not found',m),S;var E=this.textureManager.get(m);if(!E)return S;T&&E.has(T)&&S.push({key:m,frame:T}),C||(w===-1&&(w=E.frameTotal-2),C=v(b,w));for(var M=0;M<C.length;M++){var _=C[M];E.has(_)?S.push({key:m,frame:_}):console.warn('Frame "%s" not found in texture "%s"',_,m)}return S},get:function(m){return this.anims.get(m)},getAnimsFromTexture:function(m){for(var x=this.textureManager.get(m).key,b=this.anims.getArray(),w=[],T=0;T<b.length;T++)for(var S=b[T],C=S.frames,E=0;E<C.length;E++)if(C[E].textureKey===x){w.push(S.key);break}return w},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(l.PAUSE_ALL)),this},play:function(m,x){Array.isArray(x)||(x=[x]);for(var b=0;b<x.length;b++)x[b].anims.play(m);return this},staggerPlay:function(m,x,b,w){b===void 0&&(b=0),w===void 0&&(w=!0),Array.isArray(x)||(x=[x]);var T=x.length;w||T--;for(var S=0;S<x.length;S++){var C=b<0?Math.abs(b)*(T-S):b*S;x[S].anims.playAfterDelay(m,C)}return this},remove:function(m){var x=this.get(m);return x&&(this.emit(l.REMOVE_ANIMATION,m,x),this.anims.delete(m),this.removeMix(m)),x},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(l.RESUME_ALL)),this},toJSON:function(m){var x={anims:[],globalTimeScale:this.globalTimeScale};return m!==void 0&&m!==""?x.anims.push(this.anims.get(m).toJSON()):this.anims.each(function(b,w){x.anims.push(w.toJSON())}),x},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});s.exports=y},9674:(s,o,i)=>{var r=i(42099),h=i(30976),a=i(83419),u=i(90330),l=i(74943),d=i(95540),c=new a({initialize:function(p){this.parent=p,this.animationManager=p.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(p){var f=this.parent;if(p===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,f;Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++){var g=p[v];this.nextAnim?this.nextAnimsQueue.push(g):this.nextAnim=g}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(p){this.isPlaying&&this.stop();var f=this.animationManager,v=typeof p=="string"?p:d(p,"key",null),g=this.exists(v)?this.get(v):f.get(v);if(g){this.currentAnim=g;var y=g.getTotalFrames(),m=d(p,"frameRate",g.frameRate),x=d(p,"duration",g.duration);g.calculateDuration(this,y,x,m),this.delay=d(p,"delay",g.delay),this.repeat=d(p,"repeat",g.repeat),this.repeatDelay=d(p,"repeatDelay",g.repeatDelay),this.yoyo=d(p,"yoyo",g.yoyo),this.showBeforeDelay=d(p,"showBeforeDelay",g.showBeforeDelay),this.showOnStart=d(p,"showOnStart",g.showOnStart),this.hideOnComplete=d(p,"hideOnComplete",g.hideOnComplete),this.skipMissedFrames=d(p,"skipMissedFrames",g.skipMissedFrames),this.randomFrame=d(p,"randomFrame",g.randomFrame),this.timeScale=d(p,"timeScale",this.timeScale);var b=d(p,"startFrame",0);b>y&&(b=0),this.randomFrame&&(b=h(0,y-1));var w=g.frames[b];b!==0||this.forward||(w=g.getLastFrame()),this.currentFrame=w}else console.warn("Missing animation: "+v);return this.parent},pause:function(p){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),p!==void 0&&this.setCurrentFrame(p),this.parent},resume:function(p){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),p!==void 0&&this.setCurrentFrame(p),this.parent},playAfterDelay:function(p,f){if(this.isPlaying){var v=this.nextAnim,g=this.nextAnimsQueue;v&&g.unshift(v),this.nextAnim=p,this._pendingStop=1,this._pendingStopValue=f}else this.delayCounter=f,this.play(p,!0);return this.parent},playAfterRepeat:function(p,f){if(f===void 0&&(f=1),this.isPlaying){var v=this.nextAnim,g=this.nextAnimsQueue;v&&g.unshift(v),this.repeatCounter!==-1&&f>this.repeatCounter&&(f=this.repeatCounter),this.nextAnim=p,this._pendingStop=2,this._pendingStopValue=f}else this.play(p);return this.parent},play:function(p,f){f===void 0&&(f=!1);var v=this.currentAnim,g=this.parent,y=typeof p=="string"?p:p.key;if(f&&this.isPlaying&&v.key===y)return g;if(v&&this.isPlaying){var m=this.animationManager.getMix(v.key,p);if(m>0)return this.playAfterDelay(p,m)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(p)},playReverse:function(p,f){f===void 0&&(f=!1);var v=typeof p=="string"?p:p.key;return f&&this.isPlaying&&this.currentAnim.key===v?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(p))},startAnimation:function(p){this.load(p);var f=this.currentAnim,v=this.parent;return f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,f.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),v},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(p,f){var v=this.currentAnim;if(v){var g=this.currentFrame,y=this.parent,m=g.textureFrame;y.emit(p,v,g,y,m),f&&y.emit(f+v.key,v,g,y,m)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var p=this.currentFrame;if(!p)return 0;var f=p.progress;return this.inReverse&&(f*=-1),f},setProgress:function(p){return this.forward||(p=1-p),this.setCurrentFrame(this.currentAnim.getFrameByProgress(p)),this.parent},setRepeat:function(p){return this.repeatCounter=p===-1?Number.MAX_VALUE:p,this.parent},globalRemove:function(p,f){f===void 0&&(f=this.currentAnim),this.isPlaying&&f.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(p,f){p===void 0&&(p=!1),f===void 0&&(f=!1);var v=this.currentAnim,g=this.parent;return v?(f&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),v.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!p,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(v.frames[0]),this.parent):g},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var p=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(p)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var p=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(p)}return this.parent},stopAfterDelay:function(p){return this._pendingStop=1,this._pendingStopValue=p,this.parent},stopAfterRepeat:function(p){return p===void 0&&(p=1),this.repeatCounter!==-1&&p>this.repeatCounter&&(p=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=p,this.parent},stopOnFrame:function(p){return this._pendingStop=3,this._pendingStopValue=p,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(p,f){var v=this.currentAnim;if(this.isPlaying&&v&&!v.paused){if(this.accumulator+=f*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=f,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?v.nextFrame(this):v.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var g=0;do this.forward?v.nextFrame(this):v.previousFrame(this),g++;while(this.isPlaying&&this.accumulator>this.nextTick&&g<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(p){var f=this.parent;return this.currentFrame=p,f.texture=p.frame.texture,f.frame=p.frame,f.isCropped&&f.frame.updateCropUVs(f._crop,f.flipX,f.flipY),p.setAlpha&&(f.alpha=p.alpha),f.setSizeToFrame(),f._originComponent&&(p.frame.customPivot?f.setOrigin(p.frame.pivotX,p.frame.pivotY):f.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===p&&this.stop()),f},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(p){return this.anims?this.anims.get(p):null},exists:function(p){return!!this.anims&&this.anims.has(p)},create:function(p){var f=p.key,v=!1;return f&&((v=this.get(f))?console.warn("Animation key already exists: "+f):(v=new r(this,f,p),this.anims||(this.anims=new u),this.anims.set(f,v))),v},createFromAseprite:function(p,f){return this.animationManager.createFromAseprite(p,f,this.parent)},generateFrameNames:function(p,f){return this.animationManager.generateFrameNames(p,f)},generateFrameNumbers:function(p,f){return this.animationManager.generateFrameNumbers(p,f)},remove:function(p){var f=this.get(p);return f&&(this.currentAnim===f&&this.stop(),this.anims.delete(p)),f},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});s.exports=c},57090:s=>{s.exports="add"},25312:s=>{s.exports="animationcomplete"},89580:s=>{s.exports="animationcomplete-"},52860:s=>{s.exports="animationrepeat"},63850:s=>{s.exports="animationrestart"},99085:s=>{s.exports="animationstart"},28087:s=>{s.exports="animationstop"},1794:s=>{s.exports="animationupdate"},52562:s=>{s.exports="pauseall"},57953:s=>{s.exports="remove"},68339:s=>{s.exports="resumeall"},74943:(s,o,i)=>{s.exports={ADD_ANIMATION:i(57090),ANIMATION_COMPLETE:i(25312),ANIMATION_COMPLETE_KEY:i(89580),ANIMATION_REPEAT:i(52860),ANIMATION_RESTART:i(63850),ANIMATION_START:i(99085),ANIMATION_STOP:i(28087),ANIMATION_UPDATE:i(1794),PAUSE_ALL:i(52562),REMOVE_ANIMATION:i(57953),RESUME_ALL:i(68339)}},60421:(s,o,i)=>{s.exports={Animation:i(42099),AnimationFrame:i(41138),AnimationManager:i(60848),AnimationState:i(9674),Events:i(74943)}},2161:(s,o,i)=>{var r=i(83419),h=i(90330),a=i(50792),u=i(24736),l=new r({initialize:function(){this.entries=new h,this.events=new a},add:function(d,c){return this.entries.set(d,c),this.events.emit(u.ADD,this,d,c),this},has:function(d){return this.entries.has(d)},exists:function(d){return this.entries.has(d)},get:function(d){return this.entries.get(d)},remove:function(d){var c=this.get(d);return c&&(this.entries.delete(d),this.events.emit(u.REMOVE,this,d,c.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});s.exports=l},24047:(s,o,i)=>{var r=i(2161),h=i(83419),a=i(8443),u=new h({initialize:function(l){this.game=l,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(l){return this.custom.hasOwnProperty(l)||(this.custom[l]=new r),this.custom[l]},destroy:function(){for(var l=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],d=0;d<l.length;d++)this[l[d]].destroy(),this[l[d]]=null;for(var c in this.custom)this.custom[c].destroy();this.custom=null,this.game=null}});s.exports=u},51464:s=>{s.exports="add"},59261:s=>{s.exports="remove"},24736:(s,o,i)=>{s.exports={ADD:i(51464),REMOVE:i(59261)}},83388:(s,o,i)=>{s.exports={BaseCache:i(2161),CacheManager:i(24047),Events:i(24736)}},71911:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(39506),u=i(50792),l=i(19715),d=i(87841),c=i(61340),p=i(80333),f=i(26099),v=new r({Extends:u,Mixins:[h.AlphaSingle,h.Visible],initialize:function(g,y,m,x){g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=0),u.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new d,this.dirty=!0,this._x=g,this._y=y,this._width=m,this._height=x,this._bounds=new d,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=p("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new f(m/2,x/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(g){this.renderList.push(g)},setOrigin:function(g,y){return g===void 0&&(g=.5),y===void 0&&(y=g),this.originX=g,this.originY=y,this},getScroll:function(g,y,m){m===void 0&&(m=new f);var x=.5*this.width,b=.5*this.height;return m.x=g-x,m.y=y-b,this.useBounds&&(m.x=this.clampX(m.x),m.y=this.clampY(m.y)),m},centerOnX:function(g){var y=.5*this.width;return this.midPoint.x=g,this.scrollX=g-y,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(g){var y=.5*this.height;return this.midPoint.y=g,this.scrollY=g-y,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(g,y){return this.centerOnX(g),this.centerOnY(y),this},centerToBounds:function(){if(this.useBounds){var g=this._bounds,y=.5*this.width,m=.5*this.height;this.midPoint.set(g.centerX,g.centerY),this.scrollX=g.centerX-y,this.scrollY=g.centerY-m}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(g){if(this.disableCull)return g;var y=this.matrix.matrix,m=y[0],x=y[1],b=y[2],w=y[3],T=m*w-x*b;if(!T)return g;var S=y[4],C=y[5],E=this.scrollX,M=this.scrollY,_=this.width,O=this.height,k=this.y,P=k+O,A=this.x,L=A+_,D=this.culledObjects,F=g.length;T=1/T,D.length=0;for(var X=0;X<F;++X){var z=g[X];if(z.hasOwnProperty("width")&&!z.parentContainer){var Y=z.width,R=z.height,B=z.x-E*z.scrollFactorX-Y*z.originX,I=z.y-M*z.scrollFactorY-R*z.originY;(B+Y)*m+(I+R)*b+S>A&&B*m+I*b+S<L&&(B+Y)*x+(I+R)*w+C>k&&B*x+I*w+C<P&&D.push(z)}else D.push(z)}return D},getWorldPoint:function(g,y,m){m===void 0&&(m=new f);var x=this.matrix.matrix,b=x[0],w=x[1],T=x[2],S=x[3],C=x[4],E=x[5],M=b*S-w*T;if(!M)return m.x=g,m.y=y,m;var _=S*(M=1/M),O=-w*M,k=-T*M,P=b*M,A=(T*E-S*C)*M,L=(w*C-b*E)*M,D=Math.cos(this.rotation),F=Math.sin(this.rotation),X=this.zoomX,z=this.zoomY,Y=this.scrollX,R=this.scrollY,B=g+(Y*D-R*F)*X,I=y+(Y*F+R*D)*z;return m.x=B*_+I*k+A,m.y=B*O+I*P+L,m},ignore:function(g){var y=this.id;Array.isArray(g)||(g=[g]);for(var m=0;m<g.length;m++){var x=g[m];Array.isArray(x)?this.ignore(x):x.isParent?this.ignore(x.getChildren()):x.cameraFilter|=y}return this},preRender:function(){this.renderList.length=0;var g=this.width,y=this.height,m=.5*g,x=.5*y,b=this.zoomX,w=this.zoomY,T=this.matrix,S=g*this.originX,C=y*this.originY,E=this.scrollX,M=this.scrollY;this.useBounds&&(E=this.clampX(E),M=this.clampY(M)),this.scrollX=E,this.scrollY=M;var _=E+m,O=M+x;this.midPoint.set(_,O);var k=g/b,P=y/w;this.worldView.setTo(_-k/2,O-P/2,k,P),T.applyITRS(this.x+S,this.y+C,this.rotation,b,w),T.translate(-S,-C)},clampX:function(g){var y=this._bounds,m=this.displayWidth,x=y.x+(m-this.width)/2,b=Math.max(x,x+y.width-m);return g<x?g=x:g>b&&(g=b),g},clampY:function(g){var y=this._bounds,m=this.displayHeight,x=y.y+(m-this.height)/2,b=Math.max(x,x+y.height-m);return g<x?g=x:g>b&&(g=b),g},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(g){return g===void 0&&(g=0),this.rotation=a(g),this},setBackgroundColor:function(g){return g===void 0&&(g="rgba(0,0,0,0)"),this.backgroundColor=p(g),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(g,y,m,x,b){return b===void 0&&(b=!1),this._bounds.setTo(g,y,m,x),this.dirty=!0,this.useBounds=!0,b?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(g){g===void 0&&(g=new d);var y=this._bounds;return g.setTo(y.x,y.y,y.width,y.height),g},setName:function(g){return g===void 0&&(g=""),this.name=g,this},setPosition:function(g,y){return y===void 0&&(y=g),this.x=g,this.y=y,this},setRotation:function(g){return g===void 0&&(g=0),this.rotation=g,this},setRoundPixels:function(g){return this.roundPixels=g,this},setScene:function(g,y){y===void 0&&(y=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=g,this.isSceneCamera=y;var m=g.sys;return this.sceneManager=m.game.scene,this.scaleManager=m.scale,this.cameraManager=m.cameras,this.updateSystem(),this},setScroll:function(g,y){return y===void 0&&(y=g),this.scrollX=g,this.scrollY=y,this},setSize:function(g,y){return y===void 0&&(y=g),this.width=g,this.height=y,this},setViewport:function(g,y,m,x){return this.x=g,this.y=y,this.width=m,this.height=x,this},setZoom:function(g,y){return g===void 0&&(g=1),y===void 0&&(y=g),g===0&&(g=.001),y===0&&(y=.001),this.zoomX=g,this.zoomY=y,this},setMask:function(g,y){return y===void 0&&(y=!0),this.mask=g,this._maskCamera=y?this.cameraManager.default:this,this},clearMask:function(g){return g===void 0&&(g=!1),g&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var g={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(g.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),g},update:function(){},setIsSceneCamera:function(g){return this.isSceneCamera=g,this},updateSystem:function(){if(this.scaleManager&&this.isSceneCamera){var g=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,y=this.sceneManager;g&&!this._customViewport?y.customViewports++:!g&&this._customViewport&&y.customViewports--,this.dirty=!0,this._customViewport=g}},destroy:function(){this.emit(l.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(g){this._x=g,this.updateSystem()}},y:{get:function(){return this._y},set:function(g){this._y=g,this.updateSystem()}},width:{get:function(){return this._width},set:function(g){this._width=g,this.updateSystem()}},height:{get:function(){return this._height},set:function(g){this._height=g,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(g){g!==this._scrollX&&(this._scrollX=g,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(g){g!==this._scrollY&&(this._scrollY=g,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(g){this._zoomX=g,this._zoomY=g,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(g){this._zoomX=g,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(g){this._zoomY=g,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(g){this._rotation=g,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});s.exports=v},38058:(s,o,i)=>{var r=i(71911),h=i(67502),a=i(45319),u=i(83419),l=i(31401),d=i(20052),c=i(19715),p=i(28915),f=i(87841),v=i(26099),g=new u({Extends:r,Mixins:[l.PostPipeline],initialize:function(y,m,x,b){r.call(this,y,m,x,b),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new d.Fade(this),this.flashEffect=new d.Flash(this),this.shakeEffect=new d.Shake(this),this.panEffect=new d.Pan(this),this.rotateToEffect=new d.RotateTo(this),this.zoomEffect=new d.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function(y,m){if(y===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=y,this.deadzone.height=m):this.deadzone=new f(0,0,y,m),this._follow){var x=this.width/2,b=this.height/2,w=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(w,T),this.scrollX=w-x,this.scrollY=T-b}h(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(y,m,x,b,w,T){return this.fadeEffect.start(!1,y,m,x,b,!0,w,T)},fadeOut:function(y,m,x,b,w,T){return this.fadeEffect.start(!0,y,m,x,b,!0,w,T)},fadeFrom:function(y,m,x,b,w,T,S){return this.fadeEffect.start(!1,y,m,x,b,w,T,S)},fade:function(y,m,x,b,w,T,S){return this.fadeEffect.start(!0,y,m,x,b,w,T,S)},flash:function(y,m,x,b,w,T,S){return this.flashEffect.start(y,m,x,b,w,T,S)},shake:function(y,m,x,b,w){return this.shakeEffect.start(y,m,x,b,w)},pan:function(y,m,x,b,w,T,S){return this.panEffect.start(y,m,x,b,w,T,S)},rotateTo:function(y,m,x,b,w,T,S){return this.rotateToEffect.start(y,m,x,b,w,T,S)},zoomTo:function(y,m,x,b,w,T){return this.zoomEffect.start(y,m,x,b,w,T)},preRender:function(){this.renderList.length=0;var y=this.width,m=this.height,x=.5*y,b=.5*m,w=this.zoom,T=this.matrix,S=y*this.originX,C=m*this.originY,E=this._follow,M=this.deadzone,_=this.scrollX,O=this.scrollY;M&&h(M,this.midPoint.x,this.midPoint.y);var k=!1;if(E&&!this.panEffect.isRunning){var P=this.lerp,A=E.x-this.followOffset.x,L=E.y-this.followOffset.y;M?(A<M.x?_=p(_,_-(M.x-A),P.x):A>M.right&&(_=p(_,_+(A-M.right),P.x)),L<M.y?O=p(O,O-(M.y-L),P.y):L>M.bottom&&(O=p(O,O+(L-M.bottom),P.y))):(_=p(_,A-S,P.x),O=p(O,L-C,P.y)),k=!0}this.useBounds&&(_=this.clampX(_),O=this.clampY(O)),this.scrollX=_,this.scrollY=O;var D=_+x,F=O+b;this.midPoint.set(D,F);var X=y/w,z=m/w,Y=Math.floor(D-X/2),R=Math.floor(F-z/2);this.worldView.setTo(Y,R,X,z),T.applyITRS(Math.floor(this.x+S),Math.floor(this.y+C),this.rotation,w,w),T.translate(-S,-C),this.shakeEffect.preRender(),k&&this.emit(c.FOLLOW_UPDATE,this,E)},setLerp:function(y,m){return y===void 0&&(y=1),m===void 0&&(m=y),this.lerp.set(y,m),this},setFollowOffset:function(y,m){return y===void 0&&(y=0),m===void 0&&(m=0),this.followOffset.set(y,m),this},startFollow:function(y,m,x,b,w,T){m===void 0&&(m=!1),x===void 0&&(x=1),b===void 0&&(b=x),w===void 0&&(w=0),T===void 0&&(T=w),this._follow=y,this.roundPixels=m,x=a(x,0,1),b=a(b,0,1),this.lerp.set(x,b),this.followOffset.set(w,T);var S=this.width/2,C=this.height/2,E=y.x-w,M=y.y-T;return this.midPoint.set(E,M),this.scrollX=E-S,this.scrollY=M-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(y,m){this.visible&&(this.rotateToEffect.update(y,m),this.panEffect.update(y,m),this.zoomEffect.update(y,m),this.shakeEffect.update(y,m),this.flashEffect.update(y,m),this.fadeEffect.update(y,m))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});s.exports=g},32743:(s,o,i)=>{var r=i(38058),h=i(83419),a=i(95540),u=i(37277),l=i(37303),d=i(97480),c=i(44594),p=new h({initialize:function(f){this.scene=f,this.systems=f.sys,this.roundPixels=f.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,f.sys.events.once(c.BOOT,this.boot,this),f.sys.events.on(c.START,this.start,this)},boot:function(){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,f.scale.width,f.scale.height).setScene(this.scene),f.game.scale.on(d.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var f=this.systems;f.settings.cameras?this.fromJSON(f.settings.cameras):this.add(),this.main=this.cameras[0]}var v=this.systems.events;v.on(c.UPDATE,this.update,this),v.once(c.SHUTDOWN,this.shutdown,this)},add:function(f,v,g,y,m,x){f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=this.scene.sys.scale.width),y===void 0&&(y=this.scene.sys.scale.height),m===void 0&&(m=!1),x===void 0&&(x="");var b=new r(f,v,g,y);return b.setName(x),b.setScene(this.scene),b.setRoundPixels(this.roundPixels),b.id=this.getNextID(),this.cameras.push(b),m&&(this.main=b),b},addExisting:function(f,v){return v===void 0&&(v=!1),this.cameras.indexOf(f)===-1?(f.id=this.getNextID(),f.setRoundPixels(this.roundPixels),this.cameras.push(f),v&&(this.main=f),f):null},getNextID:function(){for(var f=this.cameras,v=1,g=0;g<32;g++){for(var y=!1,m=0;m<f.length;m++){var x=f[m];x&&x.id===v&&(y=!0)}if(!y)return v;v<<=1}return 0},getTotal:function(f){f===void 0&&(f=!1);for(var v=0,g=this.cameras,y=0;y<g.length;y++){var m=g[y];(!f||f&&m.visible)&&v++}return v},fromJSON:function(f){Array.isArray(f)||(f=[f]);for(var v=this.scene.sys.scale.width,g=this.scene.sys.scale.height,y=0;y<f.length;y++){var m=f[y],x=a(m,"x",0),b=a(m,"y",0),w=a(m,"width",v),T=a(m,"height",g),S=this.add(x,b,w,T);S.name=a(m,"name",""),S.zoom=a(m,"zoom",1),S.rotation=a(m,"rotation",0),S.scrollX=a(m,"scrollX",0),S.scrollY=a(m,"scrollY",0),S.roundPixels=a(m,"roundPixels",!1),S.visible=a(m,"visible",!0);var C=a(m,"backgroundColor",!1);C&&S.setBackgroundColor(C);var E=a(m,"bounds",null);if(E){var M=a(E,"x",0),_=a(E,"y",0),O=a(E,"width",v),k=a(E,"height",g);S.setBounds(M,_,O,k)}}return this},getCamera:function(f){for(var v=this.cameras,g=0;g<v.length;g++)if(v[g].name===f)return v[g];return null},getCamerasBelowPointer:function(f){for(var v=this.cameras,g=f.x,y=f.y,m=[],x=0;x<v.length;x++){var b=v[x];b.visible&&b.inputEnabled&&l(b,g,y)&&m.unshift(b)}return m},remove:function(f,v){v===void 0&&(v=!0),Array.isArray(f)||(f=[f]);for(var g=0,y=this.cameras,m=0;m<f.length;m++){var x=y.indexOf(f[m]);x!==-1&&(v?y[x].destroy():y[x].renderList=[],y.splice(x,1),g++)}return!this.main&&y[0]&&(this.main=y[0]),g},render:function(f,v){for(var g=this.scene,y=this.cameras,m=0;m<y.length;m++){var x=y[m];if(x.visible&&x.alpha>0){x.preRender();var b=this.getVisibleChildren(v.getChildren(),x);f.render(g,b,x)}}},getVisibleChildren:function(f,v){return f.filter(function(g){return g.willRender(v)})},resetAll:function(){for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(f,v){for(var g=0;g<this.cameras.length;g++)this.cameras[g].update(f,v)},onResize:function(f,v,g,y,m){for(var x=0;x<this.cameras.length;x++){var b=this.cameras[x];b._x===0&&b._y===0&&b._width===y&&b._height===m&&b.setSize(v.width,v.height)}},resize:function(f,v){for(var g=0;g<this.cameras.length;g++)this.cameras[g].setSize(f,v)},shutdown:function(){this.main=void 0;for(var f=0;f<this.cameras.length;f++)this.cameras[f].destroy();this.cameras=[];var v=this.systems.events;v.off(c.UPDATE,this.update,this),v.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(c.START,this.start,this),this.systems.events.off(c.DESTROY,this.destroy,this),this.systems.game.scale.off(d.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});u.register("CameraManager",p,"cameras"),s.exports=p},5020:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(19715),u=new h({initialize:function(l){this.camera=l,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(l,d,c,p,f,v,g,y){if(l===void 0&&(l=!0),d===void 0&&(d=1e3),c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene),!v&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=d,this.direction=l,this.progress=0,this.red=c,this.green=p,this.blue=f,this.alpha=l?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y;var m=l?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(m,this.camera,this,d,c,p,f),this.camera},update:function(l,d){this.isRunning&&(this._elapsed+=d,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(l){if(!this.isRunning&&!this.isComplete)return!1;var d=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(d.x,d.y,d.width,d.height),!0},postRenderWebGL:function(l,d){if(!this.isRunning&&!this.isComplete)return!1;var c=this.camera,p=this.red/255,f=this.green/255,v=this.blue/255;return l.drawFillRect(c.x,c.y,c.width,c.height,d(v,f,p,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var l=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(l,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u},10662:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(19715),u=new h({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(l,d,c,p,f,v,g){return l===void 0&&(l=250),d===void 0&&(d=255),c===void 0&&(c=255),p===void 0&&(p=255),f===void 0&&(f=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene),!f&&this.isRunning||(this.isRunning=!0,this.duration=l,this.progress=0,this.red=d,this.green=c,this.blue=p,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(a.FLASH_START,this.camera,this,l,d,c,p)),this.camera},update:function(l,d){this.isRunning&&(this._elapsed+=d,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(l){if(!this.isRunning)return!1;var d=this.camera;return l.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",l.fillRect(d.x,d.y,d.width,d.height),!0},postRenderWebGL:function(l,d){if(!this.isRunning)return!1;var c=this.camera,p=this.red/255,f=this.green/255,v=this.blue/255;return l.drawFillRect(c.x,c.y,c.width,c.height,d(v,f,p,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=u},20359:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(62640),u=i(19715),l=i(26099),d=new h({initialize:function(c){this.camera=c,this.isRunning=!1,this.duration=0,this.source=new l,this.current=new l,this.destination=new l,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(c,p,f,v,g,y,m){f===void 0&&(f=1e3),v===void 0&&(v=a.Linear),g===void 0&&(g=!1),y===void 0&&(y=null),m===void 0&&(m=this.camera.scene);var x=this.camera;return!g&&this.isRunning||(this.isRunning=!0,this.duration=f,this.progress=0,this.source.set(x.scrollX,x.scrollY),this.destination.set(c,p),x.getScroll(c,p,this.current),typeof v=="string"&&a.hasOwnProperty(v)?this.ease=a[v]:typeof v=="function"&&(this.ease=v),this._elapsed=0,this._onUpdate=y,this._onUpdateScope=m,this.camera.emit(u.PAN_START,this.camera,this,f,c,p)),x},update:function(c,p){if(this.isRunning){this._elapsed+=p;var f=r(this._elapsed/this.duration,0,1);this.progress=f;var v=this.camera;if(this._elapsed<this.duration){var g=this.ease(f);v.getScroll(this.destination.x,this.destination.y,this.current);var y=this.source.x+(this.current.x-this.source.x)*g,m=this.source.y+(this.current.y-this.source.y)*g;v.setScroll(y,m),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,y,m)}else v.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,v,f,v.scrollX,v.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=d},34208:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(19715),u=i(62640),l=new h({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(d,c,p,f,v,g,y){p===void 0&&(p=1e3),f===void 0&&(f=u.Linear),v===void 0&&(v=!1),g===void 0&&(g=null),y===void 0&&(y=this.camera.scene),c===void 0&&(c=!1),this.shortestPath=c;var m=d;d<0?(m=-1*d,this.clockwise=!1):this.clockwise=!0;var x=360*Math.PI/180;m-=Math.floor(m/x)*x;var b,w,T=this.camera;return!v&&this.isRunning?T:(this.isRunning=!0,this.duration=p,this.progress=0,this.source=T.rotation,this.destination=m,typeof f=="string"&&u.hasOwnProperty(f)?this.ease=u[f]:typeof f=="function"&&(this.ease=f),this._elapsed=0,this._onUpdate=g,this._onUpdateScope=y,this.shortestPath&&((b=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+x)-this.source)<(w=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+x)-this.destination)?this.clockwise=!0:b>w&&(this.clockwise=!1)),this.camera.emit(a.ROTATE_START,this.camera,this,p,m),T)},update:function(d,c){if(this.isRunning){this._elapsed+=c;var p=r(this._elapsed/this.duration,0,1);this.progress=p;var f=this.camera;if(this._elapsed<this.duration){var v=this.ease(p);this.current=f.rotation;var g,y,m=360*Math.PI/180,x=this.destination,b=this.current;this.clockwise===!1&&(x=this.current,b=this.destination),g=x>=b?Math.abs(x-b):Math.abs(x+m)-b,y=this.clockwise?f.rotation+g*v:f.rotation-g*v,f.rotation=y,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,p,y)}else f.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,f,p,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});s.exports=l},30330:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(19715),u=i(26099),l=new h({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.intensity=new u,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(d,c,p,f,v){return d===void 0&&(d=100),c===void 0&&(c=.05),p===void 0&&(p=!1),f===void 0&&(f=null),v===void 0&&(v=this.camera.scene),!p&&this.isRunning||(this.isRunning=!0,this.duration=d,this.progress=0,typeof c=="number"?this.intensity.set(c):this.intensity.set(c.x,c.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=f,this._onUpdateScope=v,this.camera.emit(a.SHAKE_START,this.camera,this,d,c)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(d,c){if(this.isRunning)if(this._elapsed+=c,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var p=this.intensity,f=this.camera.width,v=this.camera.height,g=this.camera.zoom;this._offsetX=(Math.random()*p.x*f*2-p.x*f)*g,this._offsetY=(Math.random()*p.y*v*2-p.y*v)*g,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});s.exports=l},45641:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(62640),u=i(19715),l=new h({initialize:function(d){this.camera=d,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(d,c,p,f,v,g){c===void 0&&(c=1e3),p===void 0&&(p=a.Linear),f===void 0&&(f=!1),v===void 0&&(v=null),g===void 0&&(g=this.camera.scene);var y=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=c,this.progress=0,this.source=y.zoom,this.destination=d,typeof p=="string"&&a.hasOwnProperty(p)?this.ease=a[p]:typeof p=="function"&&(this.ease=p),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=g,this.camera.emit(u.ZOOM_START,this.camera,this,c,d)),y},update:function(d,c){this.isRunning&&(this._elapsed+=c,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});s.exports=l},20052:(s,o,i)=>{s.exports={Fade:i(5020),Flash:i(10662),Pan:i(20359),Shake:i(30330),RotateTo:i(34208),Zoom:i(45641)}},16438:s=>{s.exports="cameradestroy"},32726:s=>{s.exports="camerafadeincomplete"},87807:s=>{s.exports="camerafadeinstart"},45917:s=>{s.exports="camerafadeoutcomplete"},95666:s=>{s.exports="camerafadeoutstart"},47056:s=>{s.exports="cameraflashcomplete"},91261:s=>{s.exports="cameraflashstart"},45047:s=>{s.exports="followupdate"},81927:s=>{s.exports="camerapancomplete"},74264:s=>{s.exports="camerapanstart"},54419:s=>{s.exports="postrender"},79330:s=>{s.exports="prerender"},93183:s=>{s.exports="camerarotatecomplete"},80112:s=>{s.exports="camerarotatestart"},62252:s=>{s.exports="camerashakecomplete"},86017:s=>{s.exports="camerashakestart"},539:s=>{s.exports="camerazoomcomplete"},51892:s=>{s.exports="camerazoomstart"},19715:(s,o,i)=>{s.exports={DESTROY:i(16438),FADE_IN_COMPLETE:i(32726),FADE_IN_START:i(87807),FADE_OUT_COMPLETE:i(45917),FADE_OUT_START:i(95666),FLASH_COMPLETE:i(47056),FLASH_START:i(91261),FOLLOW_UPDATE:i(45047),PAN_COMPLETE:i(81927),PAN_START:i(74264),POST_RENDER:i(54419),PRE_RENDER:i(79330),ROTATE_COMPLETE:i(93183),ROTATE_START:i(80112),SHAKE_COMPLETE:i(62252),SHAKE_START:i(86017),ZOOM_COMPLETE:i(539),ZOOM_START:i(51892)}},87969:(s,o,i)=>{s.exports={Camera:i(38058),BaseCamera:i(71911),CameraManager:i(32743),Effects:i(20052),Events:i(19715)}},63091:(s,o,i)=>{var r=i(83419),h=i(35154),a=new r({initialize:function(u){this.camera=h(u,"camera",null),this.left=h(u,"left",null),this.right=h(u,"right",null),this.up=h(u,"up",null),this.down=h(u,"down",null),this.zoomIn=h(u,"zoomIn",null),this.zoomOut=h(u,"zoomOut",null),this.zoomSpeed=h(u,"zoomSpeed",.01),this.minZoom=h(u,"minZoom",.001),this.maxZoom=h(u,"maxZoom",1e3),this.speedX=0,this.speedY=0;var l=h(u,"speed",null);typeof l=="number"?(this.speedX=l,this.speedY=l):(this.speedX=h(u,"speed.x",0),this.speedY=h(u,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var l=this.camera;this.up&&this.up.isDown?l.scrollY-=this.speedY*u|0:this.down&&this.down.isDown&&(l.scrollY+=this.speedY*u|0),this.left&&this.left.isDown?l.scrollX-=this.speedX*u|0:this.right&&this.right.isDown&&(l.scrollX+=this.speedX*u|0),this.zoomIn&&this.zoomIn.isDown?(l.zoom-=this.zoomSpeed,l.zoom<this.minZoom&&(l.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(l.zoom+=this.zoomSpeed,l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=a},58818:(s,o,i)=>{var r=i(83419),h=i(35154),a=new r({initialize:function(u){this.camera=h(u,"camera",null),this.left=h(u,"left",null),this.right=h(u,"right",null),this.up=h(u,"up",null),this.down=h(u,"down",null),this.zoomIn=h(u,"zoomIn",null),this.zoomOut=h(u,"zoomOut",null),this.zoomSpeed=h(u,"zoomSpeed",.01),this.minZoom=h(u,"minZoom",.001),this.maxZoom=h(u,"maxZoom",1e3),this.accelX=0,this.accelY=0;var l=h(u,"acceleration",null);typeof l=="number"?(this.accelX=l,this.accelY=l):(this.accelX=h(u,"acceleration.x",0),this.accelY=h(u,"acceleration.y",0)),this.dragX=0,this.dragY=0;var d=h(u,"drag",null);typeof d=="number"?(this.dragX=d,this.dragY=d):(this.dragX=h(u,"drag.x",0),this.dragY=h(u,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var c=h(u,"maxSpeed",null);typeof c=="number"?(this.maxSpeedX=c,this.maxSpeedY=c):(this.maxSpeedX=h(u,"maxSpeed.x",0),this.maxSpeedY=h(u,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(u){return this.camera=u,this},update:function(u){if(this.active){u===void 0&&(u=1);var l=this.camera;this._speedX>0?(this._speedX-=this.dragX*u,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*u,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*u,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*u,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(l.scrollX-=this._speedX*u|0),this._speedY!==0&&(l.scrollY-=this._speedY*u|0),this._zoom!==0&&(l.zoom+=this._zoom,l.zoom<this.minZoom?l.zoom=this.minZoom:l.zoom>this.maxZoom&&(l.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});s.exports=a},38865:(s,o,i)=>{s.exports={FixedKeyControl:i(63091),SmoothedKeyControl:i(58818)}},26638:(s,o,i)=>{s.exports={Controls:i(38865),Scene2D:i(87969)}},8054:(s,o,i)=>{var r={VERSION:"3.80.1",BlendModes:i(10312),ScaleModes:i(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};s.exports=r},69547:(s,o,i)=>{var r=i(83419),h=i(8054),a=i(42363),u=i(82264),l=i(95540),d=i(35154),c=i(41212),p=i(29747),f=i(75508),v=i(36060),g=i(80333),y=new r({initialize:function(m){m===void 0&&(m={});var x=d(m,"scale",null);this.width=d(x,"width",1024,m),this.height=d(x,"height",768,m),this.zoom=d(x,"zoom",1,m),this.parent=d(x,"parent",void 0,m),this.scaleMode=d(x,x?"mode":"scaleMode",0,m),this.expandParent=d(x,"expandParent",!0,m),this.autoRound=d(x,"autoRound",!1,m),this.autoCenter=d(x,"autoCenter",0,m),this.resizeInterval=d(x,"resizeInterval",500,m),this.fullscreenTarget=d(x,"fullscreenTarget",null,m),this.minWidth=d(x,"min.width",0,m),this.maxWidth=d(x,"max.width",0,m),this.minHeight=d(x,"min.height",0,m),this.maxHeight=d(x,"max.height",0,m),this.snapWidth=d(x,"snap.width",0,m),this.snapHeight=d(x,"snap.height",0,m),this.renderType=d(m,"type",h.AUTO),this.canvas=d(m,"canvas",null),this.context=d(m,"context",null),this.canvasStyle=d(m,"canvasStyle",null),this.customEnvironment=d(m,"customEnvironment",!1),this.sceneConfig=d(m,"scene",null),this.seed=d(m,"seed",[(Date.now()*Math.random()).toString()]),f.RND=new f.RandomDataGenerator(this.seed),this.gameTitle=d(m,"title",""),this.gameURL=d(m,"url","https://phaser.io"),this.gameVersion=d(m,"version",""),this.autoFocus=d(m,"autoFocus",!0),this.stableSort=d(m,"stableSort",-1),this.stableSort===-1&&(this.stableSort=u.browser.es2019?1:0),u.features.stableSort=this.stableSort,this.domCreateContainer=d(m,"dom.createContainer",!1),this.domPointerEvents=d(m,"dom.pointerEvents","none"),this.inputKeyboard=d(m,"input.keyboard",!0),this.inputKeyboardEventTarget=d(m,"input.keyboard.target",window),this.inputKeyboardCapture=d(m,"input.keyboard.capture",[]),this.inputMouse=d(m,"input.mouse",!0),this.inputMouseEventTarget=d(m,"input.mouse.target",null),this.inputMousePreventDefaultDown=d(m,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=d(m,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=d(m,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=d(m,"input.mouse.preventDefaultWheel",!0),this.inputTouch=d(m,"input.touch",u.input.touch),this.inputTouchEventTarget=d(m,"input.touch.target",null),this.inputTouchCapture=d(m,"input.touch.capture",!0),this.inputActivePointers=d(m,"input.activePointers",1),this.inputSmoothFactor=d(m,"input.smoothFactor",0),this.inputWindowEvents=d(m,"input.windowEvents",!0),this.inputGamepad=d(m,"input.gamepad",!1),this.inputGamepadEventTarget=d(m,"input.gamepad.target",window),this.disableContextMenu=d(m,"disableContextMenu",!1),this.audio=d(m,"audio",{}),this.hideBanner=d(m,"banner",null)===!1,this.hidePhaser=d(m,"banner.hidePhaser",!1),this.bannerTextColor=d(m,"banner.text","#ffffff"),this.bannerBackgroundColor=d(m,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=d(m,"fps",null),this.disablePreFX=d(m,"disablePreFX",!1),this.disablePostFX=d(m,"disablePostFX",!1);var b=d(m,"render",null);this.pipeline=d(b,"pipeline",null,m),this.autoMobilePipeline=d(b,"autoMobilePipeline",!0,m),this.defaultPipeline=d(b,"defaultPipeline",v.MULTI_PIPELINE,m),this.antialias=d(b,"antialias",!0,m),this.antialiasGL=d(b,"antialiasGL",!0,m),this.mipmapFilter=d(b,"mipmapFilter","",m),this.desynchronized=d(b,"desynchronized",!1,m),this.roundPixels=d(b,"roundPixels",!0,m),this.pixelArt=d(b,"pixelArt",this.zoom!==1,m),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=d(b,"transparent",!1,m),this.clearBeforeRender=d(b,"clearBeforeRender",!0,m),this.preserveDrawingBuffer=d(b,"preserveDrawingBuffer",!1,m),this.premultipliedAlpha=d(b,"premultipliedAlpha",!0,m),this.failIfMajorPerformanceCaveat=d(b,"failIfMajorPerformanceCaveat",!1,m),this.powerPreference=d(b,"powerPreference","default",m),this.batchSize=d(b,"batchSize",4096,m),this.maxTextures=d(b,"maxTextures",-1,m),this.maxLights=d(b,"maxLights",10,m);var w=d(m,"backgroundColor",0);this.backgroundColor=g(w),this.transparent&&(this.backgroundColor=g(0),this.backgroundColor.alpha=0),this.preBoot=d(m,"callbacks.preBoot",p),this.postBoot=d(m,"callbacks.postBoot",p),this.physics=d(m,"physics",{}),this.defaultPhysicsSystem=d(this.physics,"default",!1),this.loaderBaseURL=d(m,"loader.baseURL",""),this.loaderPath=d(m,"loader.path",""),this.loaderMaxParallelDownloads=d(m,"loader.maxParallelDownloads",u.os.android?6:32),this.loaderCrossOrigin=d(m,"loader.crossOrigin",void 0),this.loaderResponseType=d(m,"loader.responseType",""),this.loaderAsync=d(m,"loader.async",!0),this.loaderUser=d(m,"loader.user",""),this.loaderPassword=d(m,"loader.password",""),this.loaderTimeout=d(m,"loader.timeout",0),this.loaderWithCredentials=d(m,"loader.withCredentials",!1),this.loaderImageLoadType=d(m,"loader.imageLoadType","XHR"),this.loaderLocalScheme=d(m,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=d(m,"fx.glow.quality",.1),this.glowFXDistance=d(m,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var T=d(m,"plugins",null),S=a.DefaultScene;T&&(Array.isArray(T)?this.defaultPlugins=T:c(T)&&(this.installGlobalPlugins=l(T,"global",[]),this.installScenePlugins=l(T,"scene",[]),Array.isArray(T.default)?S=T.default:Array.isArray(T.defaultMerge)&&(S=S.concat(T.defaultMerge)))),this.defaultPlugins=S;var C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=d(m,"images.default",C+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=d(m,"images.missing",C+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=d(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});s.exports=y},86054:(s,o,i)=>{var r=i(20623),h=i(27919),a=i(8054),u=i(89357);s.exports=function(l){var d=l.config;if((d.customEnvironment||d.canvas)&&d.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!d.customEnvironment&&!d.canvas&&d.renderType!==a.HEADLESS)if(d.renderType===a.AUTO&&(d.renderType=u.webGL?a.WEBGL:a.CANVAS),d.renderType===a.WEBGL){if(!u.webGL)throw new Error("Cannot create WebGL context, aborting.")}else{if(d.renderType!==a.CANVAS)throw new Error("Unknown value for renderer type: "+d.renderType);if(!u.canvas)throw new Error("Cannot create Canvas context, aborting.")}d.antialias||h.disableSmoothing();var c,p,f=l.scale.baseSize,v=f.width,g=f.height;d.canvas?(l.canvas=d.canvas,l.canvas.width=v,l.canvas.height=g):l.canvas=h.create(l,v,g,d.renderType),d.canvasStyle&&(l.canvas.style=d.canvasStyle),d.antialias||r.setCrisp(l.canvas),d.renderType!==a.HEADLESS&&(c=i(68627),p=i(74797),d.renderType===a.WEBGL?l.renderer=new p(l):(l.renderer=new c(l),l.context=l.renderer.gameContext))}},96391:(s,o,i)=>{var r=i(8054);s.exports=function(h){var a=h.config;if(!a.hideBanner){var u="WebGL";a.renderType===r.CANVAS?u="Canvas":a.renderType===r.HEADLESS&&(u="Headless");var l,d=a.audio,c=h.device.audio;if(l=c.webAudio&&!d.disableWebAudio?"Web Audio":d.noAudio||!c.webAudio&&!c.audioData?"No Audio":"HTML5 Audio",h.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var p,f="",v=[f];Array.isArray(a.bannerBackgroundColor)?(a.bannerBackgroundColor.forEach(function(g){f=f.concat("%c "),v.push("background: "+g),p=g}),v[v.length-1]="color: "+a.bannerTextColor+"; background: "+p):(f=f.concat("%c "),v.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor)),v.push("background: transparent"),a.gameTitle&&(f=f.concat(a.gameTitle),a.gameVersion&&(f=f.concat(" v"+a.gameVersion)),a.hidePhaser||(f=f.concat(" / "))),a.hidePhaser||(f=f.concat("Phaser v"+r.VERSION+" ("+u+" | "+l+")")),f=f.concat(" %c "+a.gameURL),v[0]=f,console.log.apply(console,v)}}}},50127:(s,o,i)=>{var r=i(40366),h=i(60848),a=i(24047),u=i(27919),l=i(83419),d=i(69547),c=i(83719),p=i(86054),f=i(45893),v=i(96391),g=i(82264),y=i(57264),m=i(50792),x=i(8443),b=i(7003),w=i(37277),T=i(77332),S=i(76531),C=i(60903),E=i(69442),M=i(17130),_=i(65898),O=i(51085),k=i(14747),P=new l({initialize:function(A){this.config=new d(A),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new m,this.anims=new h(this),this.textures=new M(this),this.cache=new a(this),this.registry=new f(this,new m),this.input=new b(this,this.config),this.scene=new C(this,this.config.sceneConfig),this.device=g,this.scale=new S(this,this.config),this.sound=null,this.sound=k.create(this),this.loop=new _(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,y(this.boot.bind(this))},boot:function(){w.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),p(this),c(this),v(this),r(this.canvas,this.config.parent),this.textures.once(E.READY,this.texturesReady,this),this.events.emit(x.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(x.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),O(this);var A=this.events;A.on(x.HIDDEN,this.onHidden,this),A.on(x.VISIBLE,this.onVisible,this),A.on(x.BLUR,this.onBlur,this),A.on(x.FOCUS,this.onFocus,this)},step:function(A,L){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var D=this.events;D.emit(x.PRE_STEP,A,L),D.emit(x.STEP,A,L),this.scene.update(A,L),D.emit(x.POST_STEP,A,L);var F=this.renderer;F.preRender(),D.emit(x.PRE_RENDER,F,A,L),this.scene.render(F),F.postRender(),D.emit(x.POST_RENDER,F,A,L)}},headlessStep:function(A,L){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var D=this.events;D.emit(x.PRE_STEP,A,L),D.emit(x.STEP,A,L),this.scene.update(A,L),D.emit(x.POST_STEP,A,L),this.scene.isProcessing=!1,D.emit(x.PRE_RENDER,null,A,L),D.emit(x.POST_RENDER,null,A,L)}},onHidden:function(){this.loop.pause(),this.events.emit(x.PAUSE)},pause:function(){var A=this.isPaused;this.isPaused=!0,A||this.events.emit(x.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(x.RESUME)},resume:function(){var A=this.isPaused;this.isPaused=!1,A&&this.events.emit(x.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(A,L){L===void 0&&(L=!1),this.pendingDestroy=!0,this.removeCanvas=A,this.noReturn=L},runDestroy:function(){this.scene.destroy(),this.events.emit(x.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(u.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});s.exports=P},65898:(s,o,i)=>{var r=i(83419),h=i(35154),a=i(29747),u=i(43092),l=new r({initialize:function(d,c){this.game=d,this.raf=new u,this.started=!1,this.running=!1,this.minFps=h(c,"min",5),this.targetFps=h(c,"target",60),this.fpsLimit=h(c,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=h(c,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=h(c,"deltaHistory",10),this.panicMax=h(c,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=h(c,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var d=window.performance.now();this.time=d,this.lastTime=d,this.nextFpsUpdate=d+1e3,this.framesThisSecond=0;for(var c=0;c<this.deltaSmoothingMax;c++)this.deltaHistory[c]=Math.min(this._target,this.deltaHistory[c]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(d){if(this.started)return this;this.started=!0,this.running=!0;for(var c=0;c<this.deltaSmoothingMax;c++)this.deltaHistory[c]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=d;var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target)},smoothDelta:function(d){var c=this.deltaIndex,p=this.deltaHistory,f=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,d=Math.min(d,this._target)),d>this._min&&(d=p[c],d=Math.min(d,this._min)),p[c]=d,this.deltaIndex++,this.deltaIndex>=f&&(this.deltaIndex=0);for(var v=0,g=0;g<f;g++)v+=p[g];return v/f},updateFPS:function(d){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=d+1e3,this.framesThisSecond=0},stepLimitFPS:function(d){this.now=d;var c=Math.max(0,d-this.lastTime);this.rawDelta=c,this.time+=this.rawDelta,this.smoothStep&&(c=this.smoothDelta(c)),this.delta+=c,d>=this.nextFpsUpdate&&this.updateFPS(d),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(d,this.delta),this.delta=0),this.lastTime=d,this.frame++},step:function(d){this.now=d;var c=Math.max(0,d-this.lastTime);this.rawDelta=c,this.time+=this.rawDelta,this.smoothStep&&(c=this.smoothDelta(c)),this.delta=c,d>=this.nextFpsUpdate&&this.updateFPS(d),this.framesThisSecond++,this.callback(d,c),this.lastTime=d,this.frame++},tick:function(){var d=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(d):this.step(d)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(d){d===void 0&&(d=!1);var c=window.performance.now();if(!this.running){d&&(this.startTime+=-this.lastTime+(this.lastTime+c));var p=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(p,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=c+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});s.exports=l},51085:(s,o,i)=>{var r=i(8443);s.exports=function(h){var a,u=h.events;document.hidden!==void 0?a="visibilitychange":["webkit","moz","ms"].forEach(function(l){document[l+"Hidden"]!==void 0&&(document.hidden=function(){return document[l+"Hidden"]},a=l+"visibilitychange")}),a&&document.addEventListener(a,function(l){document.hidden||l.type==="pause"?u.emit(r.HIDDEN):u.emit(r.VISIBLE)},!1),window.onblur=function(){u.emit(r.BLUR)},window.onfocus=function(){u.emit(r.FOCUS)},window.focus&&h.config.autoFocus&&window.focus()}},97217:s=>{s.exports="blur"},47548:s=>{s.exports="boot"},19814:s=>{s.exports="contextlost"},68446:s=>{s.exports="destroy"},41700:s=>{s.exports="focus"},25432:s=>{s.exports="hidden"},65942:s=>{s.exports="pause"},59211:s=>{s.exports="postrender"},47789:s=>{s.exports="poststep"},39066:s=>{s.exports="prerender"},460:s=>{s.exports="prestep"},16175:s=>{s.exports="ready"},42331:s=>{s.exports="resume"},11966:s=>{s.exports="step"},32969:s=>{s.exports="systemready"},94830:s=>{s.exports="visible"},8443:(s,o,i)=>{s.exports={BLUR:i(97217),BOOT:i(47548),CONTEXT_LOST:i(19814),DESTROY:i(68446),FOCUS:i(41700),HIDDEN:i(25432),PAUSE:i(65942),POST_RENDER:i(59211),POST_STEP:i(47789),PRE_RENDER:i(39066),PRE_STEP:i(460),READY:i(16175),RESUME:i(42331),STEP:i(11966),SYSTEM_READY:i(32969),VISIBLE:i(94830)}},42857:(s,o,i)=>{s.exports={Config:i(69547),CreateRenderer:i(86054),DebugHeader:i(96391),Events:i(8443),TimeStep:i(65898),VisibilityHandler:i(51085)}},99584:(s,o,i)=>{var r=i(5290),h=i(27919),a=i(35154);s.exports=function(u){var l=a(u,"data",[]),d=a(u,"canvas",null),c=a(u,"palette",r),p=a(u,"pixelWidth",1),f=a(u,"pixelHeight",p),v=a(u,"resizeCanvas",!0),g=a(u,"clearCanvas",!0),y=a(u,"preRender",null),m=a(u,"postRender",null),x=Math.floor(Math.abs(l[0].length*p)),b=Math.floor(Math.abs(l.length*f));d||(d=h.create2D(this,x,b),v=!1,g=!1),v&&(d.width=x,d.height=b);var w=d.getContext("2d",{willReadFrequently:!0});g&&w.clearRect(0,0,x,b),y&&y(d,w);for(var T=0;T<l.length;T++)for(var S=l[T],C=0;C<S.length;C++){var E=S[C];E!=="."&&E!==" "&&(w.fillStyle=c[E],w.fillRect(C*p,T*f,p,f))}return m&&m(d,w),d}},15822:(s,o,i)=>{s.exports={GenerateTexture:i(99584),Palettes:i(57763)}},5290:s=>{s.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:s=>{s.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:s=>{s.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:s=>{s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:s=>{s.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(s,o,i)=>{s.exports={ARNE16:i(5290),C64:i(23816),CGA:i(9866),JMP:i(77552),MSX:i(92259)}},46728:(s,o,i)=>{var r=i(83419),h=i(36316),a=i(80021),u=i(26099),l=new r({Extends:a,initialize:function(d,c,p,f){a.call(this,"CubicBezierCurve"),Array.isArray(d)&&(f=new u(d[6],d[7]),p=new u(d[4],d[5]),c=new u(d[2],d[3]),d=new u(d[0],d[1])),this.p0=d,this.p1=c,this.p2=p,this.p3=f},getStartPoint:function(d){return d===void 0&&(d=new u),d.copy(this.p0)},getResolution:function(d){return d},getPoint:function(d,c){c===void 0&&(c=new u);var p=this.p0,f=this.p1,v=this.p2,g=this.p3;return c.set(h(d,p.x,f.x,v.x,g.x),h(d,p.y,f.y,v.y,g.y))},draw:function(d,c){c===void 0&&(c=32);var p=this.getPoints(c);d.beginPath(),d.moveTo(this.p0.x,this.p0.y);for(var f=1;f<p.length;f++)d.lineTo(p[f].x,p[f].y);return d.strokePath(),d},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});l.fromJSON=function(d){var c=d.points,p=new u(c[0],c[1]),f=new u(c[2],c[3]),v=new u(c[4],c[5]),g=new u(c[6],c[7]);return new l(p,f,v,g)},s.exports=l},80021:(s,o,i)=>{var r=i(83419),h=i(19217),a=i(87841),u=i(26099),l=new r({initialize:function(d){this.type=d,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new u,this._tmpVec2B=new u},draw:function(d,c){return c===void 0&&(c=32),d.strokePoints(this.getPoints(c))},getBounds:function(d,c){d||(d=new a),c===void 0&&(c=16);var p=this.getLength();c>p&&(c=p/2);var f=Math.max(1,Math.round(p/c));return h(this.getSpacedPoints(f),d)},getDistancePoints:function(d){var c=this.getLength(),p=Math.max(1,c/d);return this.getSpacedPoints(p)},getEndPoint:function(d){return d===void 0&&(d=new u),this.getPointAt(1,d)},getLength:function(){var d=this.getLengths();return d[d.length-1]},getLengths:function(d){if(d===void 0&&(d=this.arcLengthDivisions),this.cacheArcLengths.length===d+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var c,p=[],f=this.getPoint(0,this._tmpVec2A),v=0;p.push(0);for(var g=1;g<=d;g++)v+=(c=this.getPoint(g/d,this._tmpVec2B)).distance(f),p.push(v),f.copy(c);return this.cacheArcLengths=p,p},getPointAt:function(d,c){var p=this.getUtoTmapping(d);return this.getPoint(p,c)},getPoints:function(d,c,p){p===void 0&&(p=[]),d||(d=c?this.getLength()/c:this.defaultDivisions);for(var f=0;f<=d;f++)p.push(this.getPoint(f/d));return p},getRandomPoint:function(d){return d===void 0&&(d=new u),this.getPoint(Math.random(),d)},getSpacedPoints:function(d,c,p){p===void 0&&(p=[]),d||(d=c?this.getLength()/c:this.defaultDivisions);for(var f=0;f<=d;f++){var v=this.getUtoTmapping(f/d,null,d);p.push(this.getPoint(v))}return p},getStartPoint:function(d){return d===void 0&&(d=new u),this.getPointAt(0,d)},getTangent:function(d,c){c===void 0&&(c=new u);var p=1e-4,f=d-p,v=d+p;return f<0&&(f=0),v>1&&(v=1),this.getPoint(f,this._tmpVec2A),this.getPoint(v,c),c.subtract(this._tmpVec2A).normalize()},getTangentAt:function(d,c){var p=this.getUtoTmapping(d);return this.getTangent(p,c)},getTFromDistance:function(d,c){return d<=0?0:this.getUtoTmapping(0,d,c)},getUtoTmapping:function(d,c,p){var f,v=this.getLengths(p),g=0,y=v.length;f=c?Math.min(c,v[y-1]):d*v[y-1];for(var m,x=0,b=y-1;x<=b;)if((m=v[g=Math.floor(x+(b-x)/2)]-f)<0)x=g+1;else{if(!(m>0)){b=g;break}b=g-1}if(v[g=b]===f)return g/(y-1);var w=v[g];return(g+(f-w)/(v[g+1]-w))/(y-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});s.exports=l},73825:(s,o,i)=>{var r=i(83419),h=i(80021),a=i(39506),u=i(35154),l=i(43396),d=i(26099),c=new r({Extends:h,initialize:function(p,f,v,g,y,m,x,b){if(typeof p=="object"){var w=p;p=u(w,"x",0),f=u(w,"y",0),v=u(w,"xRadius",0),g=u(w,"yRadius",v),y=u(w,"startAngle",0),m=u(w,"endAngle",360),x=u(w,"clockwise",!1),b=u(w,"rotation",0)}else g===void 0&&(g=v),y===void 0&&(y=0),m===void 0&&(m=360),x===void 0&&(x=!1),b===void 0&&(b=0);h.call(this,"EllipseCurve"),this.p0=new d(p,f),this._xRadius=v,this._yRadius=g,this._startAngle=a(y),this._endAngle=a(m),this._clockwise=x,this._rotation=a(b)},getStartPoint:function(p){return p===void 0&&(p=new d),this.getPoint(0,p)},getResolution:function(p){return 2*p},getPoint:function(p,f){f===void 0&&(f=new d);for(var v=2*Math.PI,g=this._endAngle-this._startAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=v;for(;g>v;)g-=v;g<Number.EPSILON&&(g=y?0:v),this._clockwise&&!y&&(g===v?g=-v:g-=v);var m=this._startAngle+p*g,x=this.p0.x+this._xRadius*Math.cos(m),b=this.p0.y+this._yRadius*Math.sin(m);if(this._rotation!==0){var w=Math.cos(this._rotation),T=Math.sin(this._rotation),S=x-this.p0.x,C=b-this.p0.y;x=S*w-C*T+this.p0.x,b=S*T+C*w+this.p0.y}return f.set(x,b)},setXRadius:function(p){return this.xRadius=p,this},setYRadius:function(p){return this.yRadius=p,this},setWidth:function(p){return this.xRadius=p/2,this},setHeight:function(p){return this.yRadius=p/2,this},setStartAngle:function(p){return this.startAngle=p,this},setEndAngle:function(p){return this.endAngle=p,this},setClockwise:function(p){return this.clockwise=p,this},setRotation:function(p){return this.rotation=p,this},x:{get:function(){return this.p0.x},set:function(p){this.p0.x=p}},y:{get:function(){return this.p0.y},set:function(p){this.p0.y=p}},xRadius:{get:function(){return this._xRadius},set:function(p){this._xRadius=p}},yRadius:{get:function(){return this._yRadius},set:function(p){this._yRadius=p}},startAngle:{get:function(){return l(this._startAngle)},set:function(p){this._startAngle=a(p)}},endAngle:{get:function(){return l(this._endAngle)},set:function(p){this._endAngle=a(p)}},clockwise:{get:function(){return this._clockwise},set:function(p){this._clockwise=p}},angle:{get:function(){return l(this._rotation)},set:function(p){this._rotation=a(p)}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=p}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:l(this._startAngle),endAngle:l(this._endAngle),clockwise:this._clockwise,rotation:l(this._rotation)}}});c.fromJSON=function(p){return new c(p)},s.exports=c},33951:(s,o,i)=>{var r=i(83419),h=i(80021),a=i(19217),u=i(87841),l=i(26099),d=new r({Extends:h,initialize:function(c,p){h.call(this,"LineCurve"),Array.isArray(c)&&(p=new l(c[2],c[3]),c=new l(c[0],c[1])),this.p0=c,this.p1=p,this.arcLengthDivisions=1},getBounds:function(c){return c===void 0&&(c=new u),a([this.p0,this.p1],c)},getStartPoint:function(c){return c===void 0&&(c=new l),c.copy(this.p0)},getResolution:function(c){return c===void 0&&(c=1),c},getPoint:function(c,p){return p===void 0&&(p=new l),c===1?p.copy(this.p1):(p.copy(this.p1).subtract(this.p0).scale(c).add(this.p0),p)},getPointAt:function(c,p){return this.getPoint(c,p)},getTangent:function(c,p){return p===void 0&&(p=new l),p.copy(this.p1).subtract(this.p0).normalize(),p},getUtoTmapping:function(c,p,f){var v;if(p){var g=this.getLengths(f),y=g[g.length-1];v=Math.min(p,y)/y}else v=c;return v},draw:function(c){return c.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),c},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});d.fromJSON=function(c){var p=c.points,f=new l(p[0],p[1]),v=new l(p[2],p[3]);return new d(f,v)},s.exports=d},14744:(s,o,i)=>{var r=i(83419),h=i(80021),a=i(32112),u=i(26099),l=new r({Extends:h,initialize:function(d,c,p){h.call(this,"QuadraticBezierCurve"),Array.isArray(d)&&(p=new u(d[4],d[5]),c=new u(d[2],d[3]),d=new u(d[0],d[1])),this.p0=d,this.p1=c,this.p2=p},getStartPoint:function(d){return d===void 0&&(d=new u),d.copy(this.p0)},getResolution:function(d){return d},getPoint:function(d,c){c===void 0&&(c=new u);var p=this.p0,f=this.p1,v=this.p2;return c.set(a(d,p.x,f.x,v.x),a(d,p.y,f.y,v.y))},draw:function(d,c){c===void 0&&(c=32);var p=this.getPoints(c);d.beginPath(),d.moveTo(this.p0.x,this.p0.y);for(var f=1;f<p.length;f++)d.lineTo(p[f].x,p[f].y);return d.strokePath(),d},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});l.fromJSON=function(d){var c=d.points,p=new u(c[0],c[1]),f=new u(c[2],c[3]),v=new u(c[4],c[5]);return new l(p,f,v)},s.exports=l},42534:(s,o,i)=>{var r=i(87842),h=i(83419),a=i(80021),u=i(26099),l=new h({Extends:a,initialize:function(d){d===void 0&&(d=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(d)},addPoints:function(d){for(var c=0;c<d.length;c++){var p=new u;typeof d[c]=="number"?(p.x=d[c],p.y=d[c+1],c++):Array.isArray(d[c])?(p.x=d[c][0],p.y=d[c][1]):(p.x=d[c].x,p.y=d[c].y),this.points.push(p)}return this},addPoint:function(d,c){var p=new u(d,c);return this.points.push(p),p},getStartPoint:function(d){return d===void 0&&(d=new u),d.copy(this.points[0])},getResolution:function(d){return d*this.points.length},getPoint:function(d,c){c===void 0&&(c=new u);var p=this.points,f=(p.length-1)*d,v=Math.floor(f),g=f-v,y=p[v===0?v:v-1],m=p[v],x=p[v>p.length-2?p.length-1:v+1],b=p[v>p.length-3?p.length-1:v+2];return c.set(r(g,y.x,m.x,x.x,b.x),r(g,y.y,m.y,x.y,b.y))},toJSON:function(){for(var d=[],c=0;c<this.points.length;c++)d.push(this.points[c].x),d.push(this.points[c].y);return{type:this.type,points:d}}});l.fromJSON=function(d){return new l(d.points)},s.exports=l},25410:(s,o,i)=>{s.exports={Path:i(46669),MoveTo:i(68618),CubicBezier:i(46728),Curve:i(80021),Ellipse:i(73825),Line:i(33951),QuadraticBezier:i(14744),Spline:i(42534)}},68618:(s,o,i)=>{var r=i(83419),h=i(26099),a=new r({initialize:function(u,l){this.active=!1,this.p0=new h(u,l)},getPoint:function(u,l){return l===void 0&&(l=new h),l.copy(this.p0)},getPointAt:function(u,l){return this.getPoint(u,l)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});s.exports=a},46669:(s,o,i)=>{var r=i(83419),h=i(46728),a=i(73825),u=i(39429),l=i(33951),d=i(68618),c=i(14744),p=i(87841),f=i(42534),v=i(26099),g=i(36383),y=new r({initialize:function(m,x){m===void 0&&(m=0),x===void 0&&(x=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,typeof m=="object"?this.fromJSON(m):this.startPoint.set(m,x)},add:function(m){return this.curves.push(m),this},circleTo:function(m,x,b){return x===void 0&&(x=!1),this.ellipseTo(m,m,0,360,x,b)},closePath:function(){var m=this.curves[0].getPoint(0),x=this.curves[this.curves.length-1].getPoint(1);return m.equals(x)||this.curves.push(new l(x,m)),this},cubicBezierTo:function(m,x,b,w,T,S){var C,E,M,_=this.getEndPoint();return m instanceof v?(C=m,E=x,M=b):(C=new v(b,w),E=new v(T,S),M=new v(m,x)),this.add(new h(_,C,E,M))},quadraticBezierTo:function(m,x,b,w){var T,S,C=this.getEndPoint();return m instanceof v?(T=m,S=x):(T=new v(b,w),S=new v(m,x)),this.add(new c(C,T,S))},draw:function(m,x){for(var b=0;b<this.curves.length;b++){var w=this.curves[b];w.active&&w.draw(m,x)}return m},ellipseTo:function(m,x,b,w,T,S){var C=new a(0,0,m,x,b,w,T,S),E=this.getEndPoint(this._tmpVec2A),M=C.getStartPoint(this._tmpVec2B);return E.subtract(M),C.x=E.x,C.y=E.y,this.add(C)},fromJSON:function(m){this.curves=[],this.cacheLengths=[],this.startPoint.set(m.x,m.y),this.autoClose=m.autoClose;for(var x=0;x<m.curves.length;x++){var b=m.curves[x];switch(b.type){case"LineCurve":this.add(l.fromJSON(b));break;case"EllipseCurve":this.add(a.fromJSON(b));break;case"SplineCurve":this.add(f.fromJSON(b));break;case"CubicBezierCurve":this.add(h.fromJSON(b));break;case"QuadraticBezierCurve":this.add(c.fromJSON(b))}}return this},getBounds:function(m,x){m===void 0&&(m=new p),x===void 0&&(x=16),m.x=Number.MAX_VALUE,m.y=Number.MAX_VALUE;for(var b=new p,w=g.MIN_SAFE_INTEGER,T=g.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var C=this.curves[S];C.active&&(C.getBounds(b,x),m.x=Math.min(m.x,b.x),m.y=Math.min(m.y,b.y),w=Math.max(w,b.right),T=Math.max(T,b.bottom))}return m.right=w,m.bottom=T,m},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var m=[],x=0,b=0;b<this.curves.length;b++)x+=this.curves[b].getLength(),m.push(x);return this.cacheLengths=m,m},getCurveAt:function(m){for(var x=m*this.getLength(),b=this.getCurveLengths(),w=0;w<b.length;){if(b[w]>=x)return this.curves[w];w++}return null},getEndPoint:function(m){return m===void 0&&(m=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,m):m.copy(this.startPoint),m},getLength:function(){var m=this.getCurveLengths();return m[m.length-1]},getPoint:function(m,x){x===void 0&&(x=new v);for(var b=m*this.getLength(),w=this.getCurveLengths(),T=0;T<w.length;){if(w[T]>=b){var S=w[T]-b,C=this.curves[T],E=C.getLength(),M=E===0?0:1-S/E;return C.getPointAt(M,x)}T++}return null},getPoints:function(m,x){m||x||(m=this.defaultDivisions);for(var b,w=[],T=0;T<this.curves.length;T++){var S=this.curves[T];if(S.active)for(var C=S.getResolution(m),E=S.getPoints(C,x),M=0;M<E.length;M++){var _=E[M];b&&b.equals(_)||(w.push(_),b=_)}}return this.autoClose&&w.length>1&&!w[w.length-1].equals(w[0])&&w.push(w[0]),w},getRandomPoint:function(m){return m===void 0&&(m=new v),this.getPoint(Math.random(),m)},getSpacedPoints:function(m){m===void 0&&(m=40);for(var x=[],b=0;b<=m;b++)x.push(this.getPoint(b/m));return this.autoClose&&x.push(x[0]),x},getStartPoint:function(m){return m===void 0&&(m=new v),m.copy(this.startPoint)},getTangent:function(m,x){x===void 0&&(x=new v);for(var b=m*this.getLength(),w=this.getCurveLengths(),T=0;T<w.length;){if(w[T]>=b){var S=w[T]-b,C=this.curves[T],E=C.getLength(),M=E===0?0:1-S/E;return C.getTangentAt(M,x)}T++}return null},lineTo:function(m,x){m instanceof v?this._tmpVec2B.copy(m):typeof m=="object"?this._tmpVec2B.setFromObject(m):this._tmpVec2B.set(m,x);var b=this.getEndPoint(this._tmpVec2A);return this.add(new l([b.x,b.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(m){return m.unshift(this.getEndPoint()),this.add(new f(m))},moveTo:function(m,x){return m instanceof v?this.add(new d(m.x,m.y)):this.add(new d(m,x))},toJSON:function(){for(var m=[],x=0;x<this.curves.length;x++)m.push(this.curves[x].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:m}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});u.register("path",function(m,x){return new y(m,x)}),s.exports=y},45893:(s,o,i)=>{var r=i(83419),h=i(24882),a=new r({initialize:function(u,l){this.parent=u,this.events=l,l||(this.events=u.events?u.events:u),this.list={},this.values={},this._frozen=!1,!u.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function(u){var l=this.list;if(Array.isArray(u)){for(var d=[],c=0;c<u.length;c++)d.push(l[u[c]]);return d}return l[u]},getAll:function(){var u={};for(var l in this.list)this.list.hasOwnProperty(l)&&(u[l]=this.list[l]);return u},query:function(u){var l={};for(var d in this.list)this.list.hasOwnProperty(d)&&d.match(u)&&(l[d]=this.list[d]);return l},set:function(u,l){if(this._frozen)return this;if(typeof u=="string")return this.setValue(u,l);for(var d in u)this.setValue(d,u[d]);return this},inc:function(u,l){if(this._frozen)return this;l===void 0&&(l=1);var d=this.get(u);return d===void 0&&(d=0),this.set(u,d+l),this},toggle:function(u){return this._frozen||this.set(u,!this.get(u)),this},setValue:function(u,l){if(this._frozen)return this;if(this.has(u))this.values[u]=l;else{var d=this,c=this.list,p=this.events,f=this.parent;Object.defineProperty(this.values,u,{enumerable:!0,configurable:!0,get:function(){return c[u]},set:function(v){if(!d._frozen){var g=c[u];c[u]=v,p.emit(h.CHANGE_DATA,f,u,v,g),p.emit(h.CHANGE_DATA_KEY+u,f,v,g)}}}),c[u]=l,p.emit(h.SET_DATA,f,u,l)}return this},each:function(u,l){for(var d=[this.parent,null,void 0],c=1;c<arguments.length;c++)d.push(arguments[c]);for(var p in this.list)d[1]=p,d[2]=this.list[p],u.apply(l,d);return this},merge:function(u,l){for(var d in l===void 0&&(l=!0),u)u.hasOwnProperty(d)&&(l||!l&&!this.has(d))&&this.setValue(d,u[d]);return this},remove:function(u){if(this._frozen)return this;if(!Array.isArray(u))return this.removeValue(u);for(var l=0;l<u.length;l++)this.removeValue(u[l]);return this},removeValue:function(u){if(this.has(u)){var l=this.list[u];delete this.list[u],delete this.values[u],this.events.emit(h.REMOVE_DATA,this.parent,u,l)}return this},pop:function(u){var l=void 0;return!this._frozen&&this.has(u)&&(l=this.list[u],delete this.list[u],delete this.values[u],this.events.emit(h.REMOVE_DATA,this.parent,u,l)),l},has:function(u){return this.list.hasOwnProperty(u)},setFreeze:function(u){return this._frozen=u,this},reset:function(){for(var u in this.list)delete this.list[u],delete this.values[u];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(u){this._frozen=!!u}},count:{get:function(){var u=0;for(var l in this.list)this.list[l]!==void 0&&u++;return u}}});s.exports=a},63646:(s,o,i)=>{var r=i(83419),h=i(45893),a=i(37277),u=i(44594),l=new r({Extends:h,initialize:function(d){h.call(this,d,d.sys.events),this.scene=d,this.systems=d.sys,d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){h.prototype.destroy.call(this),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",l,"data"),s.exports=l},10700:s=>{s.exports="changedata"},93608:s=>{s.exports="changedata-"},60883:s=>{s.exports="destroy"},69780:s=>{s.exports="removedata"},22166:s=>{s.exports="setdata"},24882:(s,o,i)=>{s.exports={CHANGE_DATA:i(10700),CHANGE_DATA_KEY:i(93608),DESTROY:i(60883),REMOVE_DATA:i(69780),SET_DATA:i(22166)}},44965:(s,o,i)=>{s.exports={DataManager:i(45893),DataManagerPlugin:i(63646),Events:i(24882)}},7098:(s,o,i)=>{var r=i(84148),h={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};s.exports=function(){if(typeof importScripts=="function")return h;h.audioData=!!window.Audio,h.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var a=document.createElement("audio"),u=!!a.canPlayType;try{if(u){var l=function(p,f){var v=a.canPlayType("audio/"+p).replace(/^no$/,"");return f?!!(v||a.canPlayType("audio/"+f).replace(/^no$/,"")):!!v};if(h.ogg=l('ogg; codecs="vorbis"'),h.opus=l('ogg; codecs="opus"',"opus"),h.mp3=l("mpeg"),h.wav=l("wav"),h.m4a=l("x-m4a"),h.aac=l("aac"),h.flac=l("flac","x-flac"),h.webm=l('webm; codecs="vorbis"'),a.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(r.edge)h.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var d=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10);(d===10&&c>=11||d>10)&&(h.dolby=!0)}}}}catch{}return h}()},84148:(s,o,i)=>{var r,h=i(25892),a={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};s.exports=(r=navigator.userAgent,/Edg\/\d+/.test(r)?(a.edge=!0,a.es2019=!0):/OPR/.test(r)?(a.opera=!0,a.es2019=!0):/Chrome\/(\d+)/.test(r)&&!h.windowsPhone?(a.chrome=!0,a.chromeVersion=parseInt(RegExp.$1,10),a.es2019=a.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(a.firefox=!0,a.firefoxVersion=parseInt(RegExp.$1,10),a.es2019=a.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&h.iOS?(a.mobileSafari=!0,a.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(a.ie=!0,a.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!h.windowsPhone?(a.safari=!0,a.safariVersion=parseInt(RegExp.$1,10),a.es2019=a.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(a.ie=!0,a.trident=!0,a.tridentVersion=parseInt(RegExp.$1,10),a.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(a.silk=!0),a)},89289:(s,o,i)=>{var r,h,a,u=i(27919),l={supportInverseAlpha:!1,supportNewBlendModes:!1};s.exports=(typeof importScripts!="function"&&document!==void 0&&(l.supportNewBlendModes=(r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",h="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(a=new Image).onload=function(){var d=new Image;d.onload=function(){var c=u.create2D(d,6).getContext("2d",{willReadFrequently:!0});if(c.globalCompositeOperation="multiply",c.drawImage(a,0,0),c.drawImage(d,2,0),!c.getImageData(2,0,1,1))return!1;var p=c.getImageData(2,0,1,1).data;u.remove(d),l.supportNewBlendModes=p[0]===255&&p[1]===0&&p[2]===0},d.src=r+"/wCKxvRF"+h},a.src=r+"AP804Oa6"+h,!1),l.supportInverseAlpha=function(){var d=u.create2D(this,2).getContext("2d",{willReadFrequently:!0});d.fillStyle="rgba(10, 20, 30, 0.5)",d.fillRect(0,0,1,1);var c=d.getImageData(0,0,1,1);if(c===null)return!1;d.putImageData(c,1,0);var p=d.getImageData(1,0,1,1),f=p.data[0]===c.data[0]&&p.data[1]===c.data[1]&&p.data[2]===c.data[2]&&p.data[3]===c.data[3];return u.remove(this),f}()),l)},89357:(s,o,i)=>{var r=i(25892),h=i(84148),a=i(27919),u={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};s.exports=function(){if(typeof importScripts=="function")return u;u.canvas=!!window.CanvasRenderingContext2D;try{u.localStorage=!!localStorage.getItem}catch{u.localStorage=!1}u.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),u.fileSystem=!!window.requestFileSystem;var l,d,c,p=!1;return u.webGL=function(){if(window.WebGLRenderingContext)try{var f=a.createWebGL(this),v=f.getContext("webgl")||f.getContext("experimental-webgl"),g=a.create2D(this),y=g.getContext("2d",{willReadFrequently:!0}).createImageData(1,1);return p=y.data instanceof Uint8ClampedArray,a.remove(f),a.remove(g),!!v}catch{return!1}return!1}(),u.worker=!!window.Worker,u.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,u.getUserMedia=u.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,h.firefox&&h.firefoxVersion<21&&(u.getUserMedia=!1),!r.iOS&&(h.ie||h.firefox||h.chrome)&&(u.canvasBitBltShift=!0),(h.safari||h.mobileSafari)&&(u.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(u.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(u.littleEndian=(l=new ArrayBuffer(4),d=new Uint8Array(l),c=new Uint32Array(l),d[0]=161,d[1]=178,d[2]=195,d[3]=212,c[0]===3569595041||c[0]!==2712847316&&null)),u.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&u.littleEndian!==null&&p,u}()},91639:s=>{var o={available:!1,cancel:"",keyboard:!1,request:""};s.exports=function(){if(typeof importScripts=="function")return o;var i,r="Fullscreen",h="FullScreen",a=["request"+r,"request"+h,"webkitRequest"+r,"webkitRequest"+h,"msRequest"+r,"msRequest"+h,"mozRequest"+h,"mozRequest"+r];for(i=0;i<a.length;i++)if(document.documentElement[a[i]]){o.available=!0,o.request=a[i];break}var u=["cancel"+h,"exit"+r,"webkitCancel"+h,"webkitExit"+r,"msCancel"+h,"msExit"+r,"mozCancel"+h,"mozExit"+r];if(o.available){for(i=0;i<u.length;i++)if(document[u[i]]){o.cancel=u[i];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(o.keyboard=!0),Object.defineProperty(o,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),o}()},31784:(s,o,i)=>{var r=i(84148),h={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};s.exports=(typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(h.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(h.mspointer=!0),navigator.getGamepads&&(h.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?h.wheelEvent="wheel":"onmousewheel"in window?h.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(h.wheelEvent="DOMMouseScroll")),h)},25892:s=>{var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};s.exports=function(){if(typeof importScripts=="function")return o;var i=navigator.userAgent;/Windows/.test(i)?o.windows=!0:/Mac OS/.test(i)&&!/like Mac OS/.test(i)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(i)?o.android=!0:/Linux/.test(i)?o.linux=!0:/iP[ao]d|iPhone/i.test(i)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=i.toLowerCase().indexOf("iphone")!==-1,o.iPad=i.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(i)||/\bKF[A-Z][A-Z]+/.test(i)||/Silk.*Mobile Safari/.test(i)?o.kindle=!0:/CrOS/.test(i)&&(o.chromeOS=!0),(/Windows Phone/i.test(i)||/IEMobile/i.test(i))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var r=/Silk/.test(i);return(o.windows||o.macOS||o.linux&&!r||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(i)&&/Touch/i.test(i))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(o.cordova=!0),window.ejecta!==void 0&&(o.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(o.node=!0),o.node&&typeof process.versions=="object"&&(o.nodeWebkit=!!process.versions["node-webkit"],o.electron=!!process.versions.electron),/Crosswalk/.test(i)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}()},43267:(s,o,i)=>{var r=i(95540),h={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};s.exports=function(){if(typeof importScripts=="function")return h;var a=document.createElement("video"),u=!!a.canPlayType,l=/^no$/;try{u&&(a.canPlayType('video/ogg; codecs="theora"').replace(l,"")&&(h.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(l,"")&&(h.h264=!0,h.mp4=!0),a.canPlayType("video/x-m4v").replace(l,"")&&(h.m4v=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(l,"")&&(h.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(l,"")&&(h.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(l,"")&&(h.hls=!0))}catch{}return a.parentNode&&a.parentNode.removeChild(a),h.getVideoURL=function(d){Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var p,f=r(d[c],"url",d[c]);if(f.indexOf("blob:")===0)return{url:f,type:""};if(p=f.indexOf("data:")===0?f.split(",")[0].match(/\/(.*?);/):f.match(/\.([a-zA-Z0-9]+)($|\?)/),p=r(d[c],"type",p?p[1]:"").toLowerCase(),h[p])return{url:f,type:p}}return null},h}()},82264:(s,o,i)=>{s.exports={os:i(25892),browser:i(84148),features:i(89357),input:i(31784),audio:i(7098),video:i(43267),fullscreen:i(91639),canvasFeatures:i(89289)}},89422:(s,o,i)=>{var r=i(83419),h=new Float32Array(20),a=new r({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(u){return this._matrix.set(u),this._dirty=!0,this},reset:function(){var u=this._matrix;return u.fill(0),u[0]=1,u[6]=1,u[12]=1,u[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var u=this._data;return this._dirty&&(u.set(this._matrix),u[4]/=255,u[9]/=255,u[14]/=255,u[19]/=255,this._dirty=!1),u},brightness:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var d=u;return this.multiply([d,0,0,0,0,0,d,0,0,0,0,0,d,0,0,0,0,0,1,0],l)},saturate:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var d=2*u/3+1,c=-.5*(d-1);return this.multiply([d,c,c,0,0,c,d,c,0,0,c,c,d,0,0,0,0,0,1,0],l)},desaturate:function(u){return u===void 0&&(u=!1),this.saturate(-1,u)},hue:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1),u=u/180*Math.PI;var d=Math.cos(u),c=Math.sin(u),p=.213,f=.715,v=.072;return this.multiply([p+.787*d+c*-.213,f+d*-.715+c*-.715,v+d*-.072+.928*c,0,0,p+d*-.213+.143*c,f+d*(1-f)+.14*c,v+d*-.072+-.283*c,0,0,p+d*-.213+-.787*c,f+d*-.715+c*f,v+.928*d+c*v,0,0,0,0,0,1,0],l)},grayscale:function(u,l){return u===void 0&&(u=1),l===void 0&&(l=!1),this.saturate(-u,l)},blackWhite:function(u){return u===void 0&&(u=!1),this.multiply(a.BLACK_WHITE,u)},contrast:function(u,l){u===void 0&&(u=0),l===void 0&&(l=!1);var d=u+1,c=-.5*(d-1);return this.multiply([d,0,0,0,c,0,d,0,0,c,0,0,d,0,c,0,0,0,1,0],l)},negative:function(u){return u===void 0&&(u=!1),this.multiply(a.NEGATIVE,u)},desaturateLuminance:function(u){return u===void 0&&(u=!1),this.multiply(a.DESATURATE_LUMINANCE,u)},sepia:function(u){return u===void 0&&(u=!1),this.multiply(a.SEPIA,u)},night:function(u,l){return u===void 0&&(u=.1),l===void 0&&(l=!1),this.multiply([-2*u,-u,0,0,0,-u,0,u,0,0,0,u,2*u,0,0,0,0,0,1,0],l)},lsd:function(u){return u===void 0&&(u=!1),this.multiply(a.LSD,u)},brown:function(u){return u===void 0&&(u=!1),this.multiply(a.BROWN,u)},vintagePinhole:function(u){return u===void 0&&(u=!1),this.multiply(a.VINTAGE,u)},kodachrome:function(u){return u===void 0&&(u=!1),this.multiply(a.KODACHROME,u)},technicolor:function(u){return u===void 0&&(u=!1),this.multiply(a.TECHNICOLOR,u)},polaroid:function(u){return u===void 0&&(u=!1),this.multiply(a.POLAROID,u)},shiftToBGR:function(u){return u===void 0&&(u=!1),this.multiply(a.SHIFT_BGR,u)},multiply:function(u,l){l===void 0&&(l=!1),l||this.reset();var d=this._matrix,c=h;return c.set(d),d.set([c[0]*u[0]+c[1]*u[5]+c[2]*u[10]+c[3]*u[15],c[0]*u[1]+c[1]*u[6]+c[2]*u[11]+c[3]*u[16],c[0]*u[2]+c[1]*u[7]+c[2]*u[12]+c[3]*u[17],c[0]*u[3]+c[1]*u[8]+c[2]*u[13]+c[3]*u[18],c[0]*u[4]+c[1]*u[9]+c[2]*u[14]+c[3]*u[19]+c[4],c[5]*u[0]+c[6]*u[5]+c[7]*u[10]+c[8]*u[15],c[5]*u[1]+c[6]*u[6]+c[7]*u[11]+c[8]*u[16],c[5]*u[2]+c[6]*u[7]+c[7]*u[12]+c[8]*u[17],c[5]*u[3]+c[6]*u[8]+c[7]*u[13]+c[8]*u[18],c[5]*u[4]+c[6]*u[9]+c[7]*u[14]+c[8]*u[19]+c[9],c[10]*u[0]+c[11]*u[5]+c[12]*u[10]+c[13]*u[15],c[10]*u[1]+c[11]*u[6]+c[12]*u[11]+c[13]*u[16],c[10]*u[2]+c[11]*u[7]+c[12]*u[12]+c[13]*u[17],c[10]*u[3]+c[11]*u[8]+c[12]*u[13]+c[13]*u[18],c[10]*u[4]+c[11]*u[9]+c[12]*u[14]+c[13]*u[19]+c[14],c[15]*u[0]+c[16]*u[5]+c[17]*u[10]+c[18]*u[15],c[15]*u[1]+c[16]*u[6]+c[17]*u[11]+c[18]*u[16],c[15]*u[2]+c[16]*u[7]+c[17]*u[12]+c[18]*u[17],c[15]*u[3]+c[16]*u[8]+c[17]*u[13]+c[18]*u[18],c[15]*u[4]+c[16]*u[9]+c[17]*u[14]+c[18]*u[19]+c[19]]),this._dirty=!0,this}});a.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],s.exports=a},51767:(s,o,i)=>{var r=i(83419),h=i(29747),a=new r({initialize:function(u,l,d){this._rgb=[0,0,0],this.onChangeCallback=h,this.dirty=!1,this.set(u,l,d)},set:function(u,l,d){return u===void 0&&(u=0),l===void 0&&(l=0),d===void 0&&(d=0),this._rgb=[u,l,d],this.onChange(),this},equals:function(u,l,d){var c=this._rgb;return c[0]===u&&c[1]===l&&c[2]===d},onChange:function(){this.dirty=!0;var u=this._rgb;this.onChangeCallback.call(this,u[0],u[1],u[2])},r:{get:function(){return this._rgb[0]},set:function(u){this._rgb[0]=u,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(u){this._rgb[1]=u,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(u){this._rgb[2]=u,this.onChange()}},destroy:function(){this.onChangeCallback=null}});s.exports=a},60461:s=>{s.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},54312:(s,o,i)=>{var r=i(62235),h=i(35893),a=i(86327),u=i(88417);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)+c),a(l,r(d)+p),l}},46768:(s,o,i)=>{var r=i(62235),h=i(26541),a=i(86327),u=i(385);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)-c),a(l,r(d)+p),l}},35827:(s,o,i)=>{var r=i(62235),h=i(54380),a=i(86327),u=i(40136);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)+c),a(l,r(d)+p),l}},46871:(s,o,i)=>{var r=i(66786),h=i(35893),a=i(7702);s.exports=function(u,l,d,c){return d===void 0&&(d=0),c===void 0&&(c=0),r(u,h(l)+d,a(l)+c),u}},5198:(s,o,i)=>{var r=i(7702),h=i(26541),a=i(20786),u=i(385);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)-c),a(l,r(d)+p),l}},11879:(s,o,i)=>{var r=i(60461),h=[];h[r.BOTTOM_CENTER]=i(54312),h[r.BOTTOM_LEFT]=i(46768),h[r.BOTTOM_RIGHT]=i(35827),h[r.CENTER]=i(46871),h[r.LEFT_CENTER]=i(5198),h[r.RIGHT_CENTER]=i(80503),h[r.TOP_CENTER]=i(89698),h[r.TOP_LEFT]=i(922),h[r.TOP_RIGHT]=i(21373),h[r.LEFT_BOTTOM]=h[r.BOTTOM_LEFT],h[r.LEFT_TOP]=h[r.TOP_LEFT],h[r.RIGHT_BOTTOM]=h[r.BOTTOM_RIGHT],h[r.RIGHT_TOP]=h[r.TOP_RIGHT],s.exports=function(a,u,l,d,c){return h[l](a,u,d,c)}},80503:(s,o,i)=>{var r=i(7702),h=i(54380),a=i(20786),u=i(40136);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)+c),a(l,r(d)+p),l}},89698:(s,o,i)=>{var r=i(35893),h=i(17717),a=i(88417),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,r(d)+c),u(l,h(d)-p),l}},922:(s,o,i)=>{var r=i(26541),h=i(17717),a=i(385),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,r(d)-c),u(l,h(d)-p),l}},21373:(s,o,i)=>{var r=i(54380),h=i(17717),a=i(40136),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,r(d)+c),u(l,h(d)-p),l}},91660:(s,o,i)=>{s.exports={BottomCenter:i(54312),BottomLeft:i(46768),BottomRight:i(35827),Center:i(46871),LeftCenter:i(5198),QuickSet:i(11879),RightCenter:i(80503),TopCenter:i(89698),TopLeft:i(922),TopRight:i(21373)}},71926:(s,o,i)=>{var r=i(60461),h=i(79291),a={In:i(91660),To:i(16694)};a=h(!1,a,r),s.exports=a},21578:(s,o,i)=>{var r=i(62235),h=i(35893),a=i(88417),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,h(d)+c),u(l,r(d)+p),l}},10210:(s,o,i)=>{var r=i(62235),h=i(26541),a=i(385),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,h(d)-c),u(l,r(d)+p),l}},82341:(s,o,i)=>{var r=i(62235),h=i(54380),a=i(40136),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,h(d)+c),u(l,r(d)+p),l}},87958:(s,o,i)=>{var r=i(62235),h=i(26541),a=i(86327),u=i(40136);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)-c),a(l,r(d)+p),l}},40080:(s,o,i)=>{var r=i(7702),h=i(26541),a=i(20786),u=i(40136);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)-c),a(l,r(d)+p),l}},88466:(s,o,i)=>{var r=i(26541),h=i(17717),a=i(40136),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,r(d)-c),u(l,h(d)-p),l}},38829:(s,o,i)=>{var r=i(60461),h=[];h[r.BOTTOM_CENTER]=i(21578),h[r.BOTTOM_LEFT]=i(10210),h[r.BOTTOM_RIGHT]=i(82341),h[r.LEFT_BOTTOM]=i(87958),h[r.LEFT_CENTER]=i(40080),h[r.LEFT_TOP]=i(88466),h[r.RIGHT_BOTTOM]=i(19211),h[r.RIGHT_CENTER]=i(34609),h[r.RIGHT_TOP]=i(48741),h[r.TOP_CENTER]=i(49440),h[r.TOP_LEFT]=i(81288),h[r.TOP_RIGHT]=i(61323),s.exports=function(a,u,l,d,c){return h[l](a,u,d,c)}},19211:(s,o,i)=>{var r=i(62235),h=i(54380),a=i(86327),u=i(385);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)+c),a(l,r(d)+p),l}},34609:(s,o,i)=>{var r=i(7702),h=i(54380),a=i(20786),u=i(385);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,h(d)+c),a(l,r(d)+p),l}},48741:(s,o,i)=>{var r=i(54380),h=i(17717),a=i(385),u=i(66737);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),a(l,r(d)+c),u(l,h(d)-p),l}},49440:(s,o,i)=>{var r=i(35893),h=i(17717),a=i(86327),u=i(88417);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,r(d)+c),a(l,h(d)-p),l}},81288:(s,o,i)=>{var r=i(26541),h=i(17717),a=i(86327),u=i(385);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,r(d)-c),a(l,h(d)-p),l}},61323:(s,o,i)=>{var r=i(54380),h=i(17717),a=i(86327),u=i(40136);s.exports=function(l,d,c,p){return c===void 0&&(c=0),p===void 0&&(p=0),u(l,r(d)+c),a(l,h(d)-p),l}},16694:(s,o,i)=>{s.exports={BottomCenter:i(21578),BottomLeft:i(10210),BottomRight:i(82341),LeftBottom:i(87958),LeftCenter:i(40080),LeftTop:i(88466),QuickSet:i(38829),RightBottom:i(19211),RightCenter:i(34609),RightTop:i(48741),TopCenter:i(49440),TopLeft:i(81288),TopRight:i(61323)}},66786:(s,o,i)=>{var r=i(88417),h=i(20786);s.exports=function(a,u,l){return r(a,u),h(a,l)}},62235:s=>{s.exports=function(o){return o.y+o.height-o.height*o.originY}},72873:(s,o,i)=>{var r=i(62235),h=i(26541),a=i(54380),u=i(17717),l=i(87841);s.exports=function(d,c){c===void 0&&(c=new l);var p=h(d),f=u(d);return c.x=p,c.y=f,c.width=a(d)-p,c.height=r(d)-f,c}},35893:s=>{s.exports=function(o){return o.x-o.width*o.originX+.5*o.width}},7702:s=>{s.exports=function(o){return o.y-o.height*o.originY+.5*o.height}},26541:s=>{s.exports=function(o){return o.x-o.width*o.originX}},87431:s=>{s.exports=function(o){return o.width*o.originX}},46928:s=>{s.exports=function(o){return o.height*o.originY}},54380:s=>{s.exports=function(o){return o.x+o.width-o.width*o.originX}},17717:s=>{s.exports=function(o){return o.y-o.height*o.originY}},86327:s=>{s.exports=function(o,i){return o.y=i-o.height+o.height*o.originY,o}},88417:s=>{s.exports=function(o,i){var r=o.width*o.originX;return o.x=i+r-.5*o.width,o}},20786:s=>{s.exports=function(o,i){var r=o.height*o.originY;return o.y=i+r-.5*o.height,o}},385:s=>{s.exports=function(o,i){return o.x=i+o.width*o.originX,o}},40136:s=>{s.exports=function(o,i){return o.x=i-o.width+o.width*o.originX,o}},66737:s=>{s.exports=function(o,i){return o.y=i+o.height*o.originY,o}},58724:(s,o,i)=>{s.exports={CenterOn:i(66786),GetBottom:i(62235),GetBounds:i(72873),GetCenterX:i(35893),GetCenterY:i(7702),GetLeft:i(26541),GetOffsetX:i(87431),GetOffsetY:i(46928),GetRight:i(54380),GetTop:i(17717),SetBottom:i(86327),SetCenterX:i(88417),SetCenterY:i(20786),SetLeft:i(385),SetRight:i(40136),SetTop:i(66737)}},20623:s=>{s.exports={setCrisp:function(o){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(i){o.style["image-rendering"]=i}),o.style.msInterpolationMode="nearest-neighbor",o},setBicubic:function(o){return o.style["image-rendering"]="auto",o.style.msInterpolationMode="bicubic",o}}},27919:(s,o,i)=>{var r,h,a,u=i(8054),l=i(68703),d=[],c=!1;s.exports=(a=function(){var p=0;return d.forEach(function(f){f.parent&&p++}),p},{create2D:function(p,f,v){return r(p,f,v,u.CANVAS)},create:r=function(p,f,v,g,y){var m;f===void 0&&(f=1),v===void 0&&(v=1),g===void 0&&(g=u.CANVAS),y===void 0&&(y=!1);var x=h(g);return x===null?(x={parent:p,canvas:document.createElement("canvas"),type:g},g===u.CANVAS&&d.push(x),m=x.canvas):(x.parent=p,m=x.canvas),y&&(x.parent=m),m.width=f,m.height=v,c&&g===u.CANVAS&&l.disable(m.getContext("2d",{willReadFrequently:!1})),m},createWebGL:function(p,f,v){return r(p,f,v,u.WEBGL)},disableSmoothing:function(){c=!0},enableSmoothing:function(){c=!1},first:h=function(p){if(p===void 0&&(p=u.CANVAS),p===u.WEBGL)return null;for(var f=0;f<d.length;f++){var v=d[f];if(!v.parent&&v.type===p)return v}return null},free:function(){return d.length-a()},pool:d,remove:function(p){var f=p instanceof HTMLCanvasElement;d.forEach(function(v){(f&&v.canvas===p||!f&&v.parent===p)&&(v.parent=null,v.canvas.width=1,v.canvas.height=1)})},total:a})},68703:s=>{var o,i="";s.exports={disable:function(r){return i===""&&(i=o(r)),i&&(r[i]=!1),r},enable:function(r){return i===""&&(i=o(r)),i&&(r[i]=!0),r},getPrefix:o=function(r){for(var h=["i","webkitI","msI","mozI","oI"],a=0;a<h.length;a++){var u=h[a]+"mageSmoothingEnabled";if(u in r)return u}return null},isEnabled:function(r){return i!==null?r[i]:null}}},65208:s=>{s.exports=function(o,i){return i===void 0&&(i="none"),o.style.msTouchAction=i,o.style["ms-touch-action"]=i,o.style["touch-action"]=i,o}},91610:s=>{s.exports=function(o,i){return i===void 0&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(r){o.style[r+"user-select"]=i}),o.style["-webkit-touch-callout"]=i,o.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",o}},26253:(s,o,i)=>{s.exports={CanvasInterpolation:i(20623),CanvasPool:i(27919),Smoothing:i(68703),TouchAction:i(65208),UserSelect:i(91610)}},40987:(s,o,i)=>{var r=i(83419),h=i(37589),a=i(1e3),u=i(7537),l=i(87837),d=new r({initialize:function(c,p,f,v){c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(c,p,f,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(c,p,f,v,g){return v===void 0&&(v=255),g===void 0&&(g=!0),this._locked=!0,this.red=c,this.green=p,this.blue=f,this.alpha=v,this._locked=!1,this.update(g)},setGLTo:function(c,p,f,v){return v===void 0&&(v=1),this._locked=!0,this.redGL=c,this.greenGL=p,this.blueGL=f,this.alphaGL=v,this._locked=!1,this.update(!0)},setFromRGB:function(c){return this._locked=!0,this.red=c.r,this.green=c.g,this.blue=c.b,c.hasOwnProperty("a")&&(this.alpha=c.a),this._locked=!1,this.update(!0)},setFromHSV:function(c,p,f){return u(c,p,f,this)},update:function(c){if(c===void 0&&(c=!1),this._locked)return this;var p=this.r,f=this.g,v=this.b,g=this.a;return this._color=h(p,f,v),this._color32=a(p,f,v,g),this._rgba="rgba("+p+","+f+","+v+","+g/255+")",c&&l(p,f,v,this),this},updateHSV:function(){var c=this.r,p=this.g,f=this.b;return l(c,p,f,this),this},clone:function(){return new d(this.r,this.g,this.b,this.a)},gray:function(c){return this.setTo(c,c,c)},random:function(c,p){c===void 0&&(c=0),p===void 0&&(p=255);var f=Math.floor(c+Math.random()*(p-c)),v=Math.floor(c+Math.random()*(p-c)),g=Math.floor(c+Math.random()*(p-c));return this.setTo(f,v,g)},randomGray:function(c,p){c===void 0&&(c=0),p===void 0&&(p=255);var f=Math.floor(c+Math.random()*(p-c));return this.setTo(f,f,f)},saturate:function(c){return this.s+=c/100,this},desaturate:function(c){return this.s-=c/100,this},lighten:function(c){return this.v+=c/100,this},darken:function(c){return this.v-=c/100,this},brighten:function(c){var p=this.r,f=this.g,v=this.b;return p=Math.max(0,Math.min(255,p-Math.round(-c/100*255))),f=Math.max(0,Math.min(255,f-Math.round(-c/100*255))),v=Math.max(0,Math.min(255,v-Math.round(-c/100*255))),this.setTo(p,f,v)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(c){this.gl[0]=Math.min(Math.abs(c),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(c){this.gl[1]=Math.min(Math.abs(c),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(c){this.gl[2]=Math.min(Math.abs(c),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(c){this.gl[3]=Math.min(Math.abs(c),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(c){c=Math.floor(Math.abs(c)),this.r=Math.min(c,255),this.gl[0]=c/255,this.update(!0)}},green:{get:function(){return this.g},set:function(c){c=Math.floor(Math.abs(c)),this.g=Math.min(c,255),this.gl[1]=c/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(c){c=Math.floor(Math.abs(c)),this.b=Math.min(c,255),this.gl[2]=c/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(c){c=Math.floor(Math.abs(c)),this.a=Math.min(c,255),this.gl[3]=c/255,this.update()}},h:{get:function(){return this._h},set:function(c){this._h=c,u(c,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(c){this._s=c,u(this._h,c,this._v,this)}},v:{get:function(){return this._v},set:function(c){this._v=c,u(this._h,this._s,c,this)}}});s.exports=d},92728:(s,o,i)=>{var r=i(37589);s.exports=function(h){h===void 0&&(h=1024);var a,u=[],l=255,d=255,c=0,p=0;for(a=0;a<=l;a++)u.push({r:d,g:a,b:p,color:r(d,a,p)});for(c=255,a=l;a>=0;a--)u.push({r:a,g:c,b:p,color:r(a,c,p)});for(d=0,a=0;a<=l;a++,c--)u.push({r:d,g:c,b:a,color:r(d,c,a)});for(c=0,p=255,a=0;a<=l;a++,p--,d++)u.push({r:d,g:c,b:p,color:r(d,c,p)});if(h===1024)return u;var f=[],v=0,g=1024/h;for(a=0;a<h;a++)f.push(u[Math.floor(v)]),v+=g;return f}},91588:s=>{s.exports=function(o){var i={r:o>>16&255,g:o>>8&255,b:255&o,a:255};return o>16777215&&(i.a=o>>>24),i}},62957:s=>{s.exports=function(o){var i=o.toString(16);return i.length===1?"0"+i:i}},37589:s=>{s.exports=function(o,i,r){return o<<16|i<<8|r}},1e3:s=>{s.exports=function(o,i,r,h){return h<<24|o<<16|i<<8|r}},62183:(s,o,i)=>{var r=i(40987),h=i(89528);s.exports=function(a,u,l){var d=l,c=l,p=l;if(u!==0){var f=l<.5?l*(1+u):l+u-l*u,v=2*l-f;d=h(v,f,a+.3333333333333333),c=h(v,f,a),p=h(v,f,a-.3333333333333333)}return new r().setGLTo(d,c,p,1)}},27939:(s,o,i)=>{var r=i(7537);s.exports=function(h,a){h===void 0&&(h=1),a===void 0&&(a=1);for(var u=[],l=0;l<=359;l++)u.push(r(l/359,h,a));return u}},7537:(s,o,i)=>{var r=i(37589);function h(a,u,l,d){var c=(a+6*u)%6,p=Math.min(c,4-c,1);return Math.round(255*(d-d*l*Math.max(0,p)))}s.exports=function(a,u,l,d){u===void 0&&(u=1),l===void 0&&(l=1);var c=h(5,a,u,l),p=h(3,a,u,l),f=h(1,a,u,l);return d?d.setTo?d.setTo(c,p,f,d.alpha,!0):(d.r=c,d.g=p,d.b=f,d.color=r(c,p,f),d):{r:c,g:p,b:f,color:r(c,p,f)}}},70238:(s,o,i)=>{var r=i(40987);s.exports=function(h){var a=new r;h=h.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(p,f,v,g){return f+f+v+v+g+g});var u=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);if(u){var l=parseInt(u[1],16),d=parseInt(u[2],16),c=parseInt(u[3],16);a.setTo(l,d,c)}return a}},89528:s=>{s.exports=function(o,i,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?o+6*(i-o)*r:r<.5?i:r<.6666666666666666?o+(i-o)*(.6666666666666666-r)*6:o}},30100:(s,o,i)=>{var r=i(40987),h=i(90664);s.exports=function(a){var u=h(a);return new r(u.r,u.g,u.b,u.a)}},90664:s=>{s.exports=function(o){return o>16777215?{a:o>>>24,r:o>>16&255,g:o>>8&255,b:255&o}:{a:255,r:o>>16&255,g:o>>8&255,b:255&o}}},13699:(s,o,i)=>{var r=i(28915),h=function(a,u,l,d,c,p,f,v){f===void 0&&(f=100),v===void 0&&(v=0);var g=v/f;return{r:r(a,d,g),g:r(u,c,g),b:r(l,p,g)}};s.exports={RGBWithRGB:h,ColorWithRGB:function(a,u,l,d,c,p){return c===void 0&&(c=100),p===void 0&&(p=0),h(a.r,a.g,a.b,u,l,d,c,p)},ColorWithColor:function(a,u,l,d){return l===void 0&&(l=100),d===void 0&&(d=0),h(a.r,a.g,a.b,u.r,u.g,u.b,l,d)}}},68957:(s,o,i)=>{var r=i(40987);s.exports=function(h){return new r(h.r,h.g,h.b,h.a)}},87388:(s,o,i)=>{var r=i(40987);s.exports=function(h){var a=new r,u=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(h.toLowerCase());if(u){var l=parseInt(u[1],10),d=parseInt(u[2],10),c=parseInt(u[3],10),p=u[4]!==void 0?parseFloat(u[4]):1;a.setTo(l,d,c,255*p)}return a}},87837:s=>{s.exports=function(o,i,r,h){h===void 0&&(h={h:0,s:0,v:0}),o/=255,i/=255,r/=255;var a=Math.min(o,i,r),u=Math.max(o,i,r),l=u-a,d=0,c=u===0?0:l/u,p=u;return u!==a&&(u===o?d=(i-r)/l+(i<r?6:0):u===i?d=(r-o)/l+2:u===r&&(d=(o-i)/l+4),d/=6),h.hasOwnProperty("_h")?(h._h=d,h._s=c,h._v=p):(h.h=d,h.s=c,h.v=p),h}},75723:(s,o,i)=>{var r=i(62957);s.exports=function(h,a,u,l,d){return l===void 0&&(l=255),d===void 0&&(d="#"),d==="#"?"#"+(16777216+(h<<16)+(a<<8)+u).toString(16).slice(1,7):"0x"+r(l)+r(h)+r(a)+r(u)}},85386:(s,o,i)=>{var r=i(30976),h=i(40987);s.exports=function(a,u){return a===void 0&&(a=0),u===void 0&&(u=255),new h(r(a,u),r(a,u),r(a,u))}},80333:(s,o,i)=>{var r=i(70238),h=i(30100),a=i(68957),u=i(87388);s.exports=function(l){switch(typeof l){case"string":return l.substr(0,3).toLowerCase()==="rgb"?u(l):r(l);case"number":return h(l);case"object":return a(l)}}},3956:(s,o,i)=>{var r=i(40987);r.ColorSpectrum=i(92728),r.ColorToRGBA=i(91588),r.ComponentToHex=i(62957),r.GetColor=i(37589),r.GetColor32=i(1e3),r.HexStringToColor=i(70238),r.HSLToColor=i(62183),r.HSVColorWheel=i(27939),r.HSVToRGB=i(7537),r.HueToComponent=i(89528),r.IntegerToColor=i(30100),r.IntegerToRGB=i(90664),r.Interpolate=i(13699),r.ObjectToColor=i(68957),r.RandomRGB=i(85386),r.RGBStringToColor=i(87388),r.RGBToHSV=i(87837),r.RGBToString=i(75723),r.ValueToColor=i(80333),s.exports=r},27460:(s,o,i)=>{s.exports={Align:i(71926),BaseShader:i(73894),Bounds:i(58724),Canvas:i(26253),Color:i(3956),ColorMatrix:i(89422),Masks:i(69781),RGB:i(51767)}},6858:(s,o,i)=>{var r=i(83419),h=i(39429),a=new r({initialize:function(u,l,d,c,p,f){l||(l=u.sys.make.image({x:d,y:c,key:p,frame:f,add:!1})),this.bitmapMask=l,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(u){this.bitmapMask=u},preRenderWebGL:function(u,l,d){u.pipelines.BITMAPMASK_PIPELINE.beginMask(this,l,d)},postRenderWebGL:function(u,l,d){u.pipelines.BITMAPMASK_PIPELINE.endMask(this,l,d)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});h.register("bitmapMask",function(u,l,d,c,p){return new a(this.scene,u,l,d,c,p)}),s.exports=a},80661:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a){this.geometryMask=a,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(h){return this.geometryMask=h,this},setInvertAlpha:function(h){return h===void 0&&(h=!0),this.invertAlpha=h,this},preRenderWebGL:function(h,a,u){var l=h.gl;h.flush(),h.maskStack.length===0&&(l.enable(l.STENCIL_TEST),l.clear(l.STENCIL_BUFFER_BIT),h.maskCount=0),h.currentCameraMask.mask!==this&&(h.currentMask.mask=this),h.maskStack.push({mask:this,camera:u}),this.applyStencil(h,u,!0),h.maskCount++},applyStencil:function(h,a,u){var l=h.gl,d=this.geometryMask,c=h.maskCount,p=255;l.colorMask(!1,!1,!1,!1),u?(l.stencilFunc(l.EQUAL,c,p),l.stencilOp(l.KEEP,l.KEEP,l.INCR),c++):(l.stencilFunc(l.EQUAL,c+1,p),l.stencilOp(l.KEEP,l.KEEP,l.DECR)),this.level=c,d.renderWebGL(h,d,a),h.flush(),l.colorMask(!0,!0,!0,!0),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),this.invertAlpha?l.stencilFunc(l.NOTEQUAL,c,p):l.stencilFunc(l.EQUAL,c,p)},postRenderWebGL:function(h){var a=h.gl;h.maskStack.pop(),h.maskCount--,h.flush();var u=h.currentMask;if(h.maskStack.length===0)u.mask=null,a.disable(a.STENCIL_TEST);else{var l=h.maskStack[h.maskStack.length-1];l.mask.applyStencil(h,l.camera,!1),h.currentCameraMask.mask!==l.mask?(u.mask=l.mask,u.camera=l.camera):u.mask=null}},preRenderCanvas:function(h,a,u){var l=this.geometryMask;h.currentContext.save(),l.renderCanvas(h,l,u,null,null,!0),h.currentContext.clip()},postRenderCanvas:function(h){h.currentContext.restore()},destroy:function(){this.geometryMask=null}});s.exports=r},69781:(s,o,i)=>{s.exports={BitmapMask:i(6858),GeometryMask:i(80661)}},73894:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l){a&&a!==""||(a=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),u&&u!==""||(u=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),l===void 0&&(l=null),this.key=h,this.fragmentSrc=a,this.vertexSrc=u,this.uniforms=l}});s.exports=r},40366:s=>{s.exports=function(o,i){var r;if(i)typeof i=="string"?r=document.getElementById(i):typeof i=="object"&&i.nodeType===1&&(r=i);else if(o.parentElement||i===null)return o;return r||(r=document.body),r.appendChild(o),o}},83719:(s,o,i)=>{var r=i(40366);s.exports=function(h){var a=h.config;if(a.parent&&a.domCreateContainer){var u=document.createElement("div");u.style.cssText=["display: block;","width: "+h.scale.width+"px;","height: "+h.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),h.domContainer=u,r(u,a.parent)}}},57264:(s,o,i)=>{var r=i(25892);s.exports=function(h){if(document.readyState!=="complete"&&document.readyState!=="interactive"){var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),h()};document.body?r.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)}else h()}},57811:s=>{s.exports=function(o){if(!o)return window.innerHeight;var i=Math.abs(window.orientation),r={w:0,h:0},h=document.createElement("div");return h.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(h),r.w=i===90?h.offsetHeight:window.innerWidth,r.h=i===90?window.innerWidth:h.offsetHeight,document.documentElement.removeChild(h),h=null,Math.abs(window.orientation)!==90?r.h:r.w}},45818:(s,o,i)=>{var r=i(13560);s.exports=function(h,a){var u=window.screen,l=!!u&&(u.orientation||u.mozOrientation||u.msOrientation);return l&&typeof l.type=="string"?l.type:typeof l=="string"?l:typeof window.orientation=="number"?window.orientation===0||window.orientation===180?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:a>h?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},74403:s=>{s.exports=function(o){var i;return o!==""&&(typeof o=="string"?i=document.getElementById(o):o&&o.nodeType===1&&(i=o)),i||(i=document.body),i}},56836:s=>{s.exports=function(o){var i="";try{window.DOMParser?i=new DOMParser().parseFromString(o,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(o)}catch{i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},35846:s=>{s.exports=function(o){o.parentNode&&o.parentNode.removeChild(o)}},43092:(s,o,i)=>{var r=i(83419),h=i(29747),a=new r({initialize:function(){this.isRunning=!1,this.callback=h,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var u=this;this.step=function l(d){u.callback(d),u.isRunning&&(u.timeOutID=window.requestAnimationFrame(l))},this.stepTimeout=function l(){u.isRunning&&(u.timeOutID=window.setTimeout(l,u.delay)),u.callback(window.performance.now())}},start:function(u,l,d){this.isRunning||(this.callback=u,this.isSetTimeOut=l,this.delay=d,this.isRunning=!0,this.timeOutID=l?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=h}});s.exports=a},84902:(s,o,i)=>{var r={AddToDOM:i(40366),DOMContentLoaded:i(57264),GetInnerHeight:i(57811),GetScreenOrientation:i(45818),GetTarget:i(74403),ParseXML:i(56836),RemoveFromDOM:i(35846),RequestAnimationFrame:i(43092)};s.exports=r},47565:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(37277),u=new r({Extends:h,initialize:function(){h.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",u,"events"),s.exports=u},93055:(s,o,i)=>{s.exports={EventEmitter:i(47565)}},20122:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d){d===void 0&&(d=1),h.call(this,a.BARREL,l),this.amount=d}});s.exports=u},32251:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g){c===void 0&&(c=1),p===void 0&&(p=1),f===void 0&&(f=1),v===void 0&&(v=1),g===void 0&&(g=4),h.call(this,a.BLOOM,l),this.steps=g,this.offsetX=c,this.offsetY=p,this.blurStrength=f,this.strength=v,this.glcolor=[1,1,1],d!=null&&(this.color=d)},color:{get:function(){var l=this.glcolor;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}}});s.exports=u},9047:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g){d===void 0&&(d=0),c===void 0&&(c=2),p===void 0&&(p=2),f===void 0&&(f=1),g===void 0&&(g=4),h.call(this,a.BLUR,l),this.quality=d,this.x=c,this.y=p,this.steps=g,this.strength=f,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var l=this.glcolor;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}}});s.exports=u},27885:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g,y){d===void 0&&(d=.5),c===void 0&&(c=1),p===void 0&&(p=.2),f===void 0&&(f=!1),v===void 0&&(v=1),g===void 0&&(g=1),y===void 0&&(y=1),h.call(this,a.BOKEH,l),this.radius=d,this.amount=c,this.contrast=p,this.isTiltShift=f,this.strength=y,this.blurX=v,this.blurY=g}});s.exports=u},12578:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v){d===void 0&&(d=8),f===void 0&&(f=1),v===void 0&&(v=.005),h.call(this,a.CIRCLE,l),this.scale=f,this.feather=v,this.thickness=d,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],c!=null&&(this.color=c),p!=null&&(this.backgroundColor=p)},color:{get:function(){var l=this.glcolor;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}},backgroundColor:{get:function(){var l=this.glcolor2;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor2;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(l){this.glcolor2[3]=l}}});s.exports=u},15802:(s,o,i)=>{var r=i(83419),h=i(89422),a=i(14811),u=new r({Extends:h,initialize:function(l){h.call(this),this.type=a.COLOR_MATRIX,this.gameObject=l,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});s.exports=u},72898:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a){this.type=h,this.gameObject=a,this.active=!0},setActive:function(h){return this.active=h,this},destroy:function(){this.gameObject=null,this.active=!1}});s.exports=r},44553:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p){d===void 0&&(d="__WHITE"),c===void 0&&(c=.005),p===void 0&&(p=.005),h.call(this,a.DISPLACEMENT,l),this.x=c,this.y=p,this.glTexture,this.setTexture(d)},setTexture:function(l){var d=this.gameObject.scene.sys.textures.getFrame(l);return d&&(this.glTexture=d.glTexture),this}});s.exports=u},68531:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f){c===void 0&&(c=4),p===void 0&&(p=0),f===void 0&&(f=!1),h.call(this,a.GLOW,l),this.outerStrength=c,this.innerStrength=p,this.knockout=f,this.glcolor=[1,1,1,1],d!==void 0&&(this.color=d)},color:{get:function(){var l=this.glcolor;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}}});s.exports=u},37102:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g,y,m){p===void 0&&(p=.2),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=1),m===void 0&&(m=0),h.call(this,a.GRADIENT,l),this.alpha=p,this.size=m,this.fromX=f,this.fromY=v,this.toX=g,this.toY=y,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],d!=null&&(this.color1=d),c!=null&&(this.color2=c)},color1:{get:function(){var l=this.glcolor1;return(l[0]<<16)+(l[1]<<8)+(0|l[2])},set:function(l){var d=this.glcolor1;d[0]=l>>16&255,d[1]=l>>8&255,d[2]=255&l}},color2:{get:function(){var l=this.glcolor2;return(l[0]<<16)+(l[1]<<8)+(0|l[2])},set:function(l){var d=this.glcolor2;d[0]=l>>16&255,d[1]=l>>8&255,d[2]=255&l}}});s.exports=u},86886:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d){d===void 0&&(d=1),h.call(this,a.PIXELATE,l),this.amount=d}});s.exports=u},92322:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g,y){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=.1),f===void 0&&(f=1),g===void 0&&(g=6),y===void 0&&(y=1),h.call(this,a.SHADOW,l),this.x=d,this.y=c,this.decay=p,this.power=f,this.glcolor=[0,0,0,1],this.samples=g,this.intensity=y,v!==void 0&&(this.color=v)},color:{get:function(){var l=this.glcolor;return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},set:function(l){var d=this.glcolor;d[0]=(l>>16&255)/255,d[1]=(l>>8&255)/255,d[2]=(255&l)/255}}});s.exports=u},39563:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f){d===void 0&&(d=.5),c===void 0&&(c=.5),p===void 0&&(p=3),f===void 0&&(f=!1),h.call(this,a.SHINE,l),this.speed=d,this.lineWidth=c,this.gradient=p,this.reveal=f}});s.exports=u},56448:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f){d===void 0&&(d=.5),c===void 0&&(c=.5),p===void 0&&(p=.5),f===void 0&&(f=.5),h.call(this,a.VIGNETTE,l),this.x=d,this.y=c,this.radius=p,this.strength=f}});s.exports=u},38433:(s,o,i)=>{var r=i(83419),h=i(72898),a=i(14811),u=new r({Extends:h,initialize:function(l,d,c,p,f){d===void 0&&(d=.1),c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=!1),h.call(this,a.WIPE,l),this.progress=0,this.wipeWidth=d,this.direction=c,this.axis=p,this.reveal=f}});s.exports=u},14811:s=>{s.exports={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19}},66064:(s,o,i)=>{var r=i(79291),h=i(14811),a={Barrel:i(20122),Controller:i(72898),Bloom:i(32251),Blur:i(9047),Bokeh:i(27885),Circle:i(12578),ColorMatrix:i(15802),Displacement:i(44553),Glow:i(68531),Gradient:i(37102),Pixelate:i(86886),Shadow:i(92322),Shine:i(39563),Vignette:i(56448),Wipe:i(38433)};a=r(!1,a,h),s.exports=a},25305:(s,o,i)=>{var r=i(10312),h=i(23568);s.exports=function(a,u,l){u.x=h(l,"x",0),u.y=h(l,"y",0),u.depth=h(l,"depth",0),u.flipX=h(l,"flipX",!1),u.flipY=h(l,"flipY",!1);var d=h(l,"scale",null);typeof d=="number"?u.setScale(d):d!==null&&(u.scaleX=h(d,"x",1),u.scaleY=h(d,"y",1));var c=h(l,"scrollFactor",null);typeof c=="number"?u.setScrollFactor(c):c!==null&&(u.scrollFactorX=h(c,"x",1),u.scrollFactorY=h(c,"y",1)),u.rotation=h(l,"rotation",0);var p=h(l,"angle",null);p!==null&&(u.angle=p),u.alpha=h(l,"alpha",1);var f=h(l,"origin",null);if(typeof f=="number")u.setOrigin(f);else if(f!==null){var v=h(f,"x",.5),g=h(f,"y",.5);u.setOrigin(v,g)}return u.blendMode=h(l,"blendMode",r.NORMAL),u.visible=h(l,"visible",!0),h(l,"add",!0)&&a.sys.displayList.add(u),u.preUpdate&&a.sys.updateList.add(u),u}},13059:(s,o,i)=>{var r=i(23568);s.exports=function(h,a){var u=r(a,"anims",null);if(u===null)return h;if(typeof u=="string")h.anims.play(u);else if(typeof u=="object"){var l=h.anims,d=r(u,"key",void 0);if(d){var c=r(u,"startFrame",void 0),p=r(u,"delay",0),f=r(u,"repeat",0),v=r(u,"repeatDelay",0),g=r(u,"yoyo",!1),y=r(u,"play",!1),m=r(u,"delayedPlay",0),x={key:d,delay:p,repeat:f,repeatDelay:v,yoyo:g,startFrame:c};y?l.play(x):m>0?l.playAfterDelay(x,m):l.load(x)}}return h}},8050:(s,o,i)=>{var r=i(83419),h=i(73162),a=i(37277),u=i(51708),l=i(44594),d=i(19186),c=new r({Extends:h,initialize:function(p){h.call(this,p),this.sortChildrenFlag=!1,this.scene=p,this.systems=p.sys,this.events=p.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(l.BOOT,this.boot,this),this.events.on(l.START,this.start,this)},boot:function(){this.events.once(l.DESTROY,this.destroy,this)},addChildCallback:function(p){p.displayList&&p.displayList!==this&&p.removeFromDisplayList(),p.parentContainer&&p.parentContainer.remove(p),p.displayList||(this.queueDepthSort(),p.displayList=this,p.emit(u.ADDED_TO_SCENE,p,this.scene),this.events.emit(l.ADDED_TO_SCENE,p,this.scene))},removeChildCallback:function(p){this.queueDepthSort(),p.displayList=null,p.emit(u.REMOVED_FROM_SCENE,p,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,p,this.scene)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(d(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(p,f){return p._depth-f._depth},getChildren:function(){return this.list},shutdown:function(){for(var p=this.list;p.length;)p[0].destroy(!0);this.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",c,"displayList"),s.exports=c},95643:(s,o,i)=>{var r=i(83419),h=i(53774),a=i(45893),u=i(50792),l=i(51708),d=i(44594),c=new r({Extends:u,initialize:function(p,f){u.call(this),this.scene=p,this.displayList=null,this.type=f,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(l.ADDED_TO_SCENE,this.addedToScene,this),this.on(l.REMOVED_FROM_SCENE,this.removedFromScene,this),p.sys.queueDepthSort()},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},setState:function(p){return this.state=p,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(p,f){return this.data||(this.data=new a(this)),this.data.set(p,f),this},incData:function(p,f){return this.data||(this.data=new a(this)),this.data.inc(p,f),this},toggleData:function(p){return this.data||(this.data=new a(this)),this.data.toggle(p),this},getData:function(p){return this.data||(this.data=new a(this)),this.data.get(p)},setInteractive:function(p,f,v){return this.scene.sys.input.enable(this,p,f,v),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(p){return!(this.displayList&&this.displayList.active&&!this.displayList.willRender(p)||c.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&p.id)},getIndexList:function(){for(var p=this,f=this.parentContainer,v=[];f&&(v.unshift(f.getIndex(p)),p=f,f.parentContainer);)f=f.parentContainer;return this.displayList?v.unshift(this.displayList.getIndex(p)):v.unshift(this.scene.sys.displayList.getIndex(p)),v},addToDisplayList:function(p){return p===void 0&&(p=this.scene.sys.displayList),this.displayList&&this.displayList!==p&&this.removeFromDisplayList(),p.exists(this)||(this.displayList=p,p.add(this,!0),p.queueDepthSort(),this.emit(l.ADDED_TO_SCENE,this,this.scene),p.events.emit(d.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var p=this.displayList||this.scene.sys.displayList;return p&&p.exists(this)&&(p.remove(this,!0),p.queueDepthSort(),this.displayList=null,this.emit(l.REMOVED_FROM_SCENE,this,this.scene),p.events.emit(d.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(p){this.scene&&!this.ignoreDestroy&&(p===void 0&&(p=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(l.DESTROY,this,p),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,s.exports=c},44603:(s,o,i)=>{var r=i(83419),h=i(37277),a=i(44594),u=new r({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,d){u.prototype.hasOwnProperty(l)||(u.prototype[l]=d)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},h.register("GameObjectCreator",u,"make"),s.exports=u},39429:(s,o,i)=>{var r=i(83419),h=i(37277),a=i(44594),u=new r({initialize:function(l){this.scene=l,this.systems=l.sys,this.events=l.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(l){return(l.renderCanvas||l.renderWebGL)&&this.displayList.add(l),l.preUpdate&&this.updateList.add(l),l},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});u.register=function(l,d){u.prototype.hasOwnProperty(l)||(u.prototype[l]=d)},u.remove=function(l){u.prototype.hasOwnProperty(l)&&delete u.prototype[l]},h.register("GameObjectFactory",u,"add"),s.exports=u},91296:(s,o,i)=>{var r=i(61340),h=new r,a=new r,u=new r,l={camera:h,sprite:a,calc:u};s.exports=function(d,c,p){var f=h,v=a,g=u;return v.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),f.copyFrom(c.matrix),p?(f.multiplyWithOffset(p,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),v.e=d.x,v.f=d.y):(v.e-=c.scrollX*d.scrollFactorX,v.f-=c.scrollY*d.scrollFactorY),f.multiply(v,g),l}},45027:(s,o,i)=>{var r=i(83419),h=i(25774),a=i(37277),u=i(44594),l=new r({Extends:h,initialize:function(d){h.call(this),this.checkQueue=!0,this.scene=d,this.systems=d.sys,d.sys.events.once(u.BOOT,this.boot,this),d.sys.events.on(u.START,this.start,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var d=this.systems.events;d.on(u.PRE_UPDATE,this.update,this),d.on(u.UPDATE,this.sceneUpdate,this),d.once(u.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(d,c){for(var p=this._active,f=p.length,v=0;v<f;v++){var g=p[v];g.active&&g.preUpdate.call(g,d,c)}},shutdown:function(){for(var d=this._active.length;d--;)this._active[d].destroy(!0);for(d=this._pending.length;d--;)this._pending[d].destroy(!0);for(d=this._destroy.length;d--;)this._destroy[d].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var c=this.systems.events;c.off(u.PRE_UPDATE,this.update,this),c.off(u.UPDATE,this.sceneUpdate,this),c.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",l,"updateList"),s.exports=l},3217:s=>{s.exports=function(o,i,r,h,a,u,l,d,c,p,f,v,g,y,m){var x=r.x-i.displayOriginX+a,b=r.y-i.displayOriginY+u,w=x+r.w,T=b+r.h,S=l.getXRound(x,b,d),C=l.getYRound(x,b,d),E=l.getXRound(x,T,d),M=l.getYRound(x,T,d),_=l.getXRound(w,T,d),O=l.getYRound(w,T,d),k=l.getXRound(w,b,d),P=l.getYRound(w,b,d);o.batchQuad(i,S,C,E,M,_,O,k,P,h.u0,h.v0,h.u1,h.v1,c,p,f,v,g,y,m)}},53048:s=>{s.exports=function(o,i,r,h){if(r===void 0&&(r=!1),h===void 0)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var a,u=o.text,l=u.length,d=o.maxWidth,c=o.wordWrapCharCode,p=Number.MAX_VALUE,f=Number.MAX_VALUE,v=0,g=0,y=o.fontData.chars,m=o.fontData.lineHeight,x=o.letterSpacing,b=o.lineSpacing,w=0,T=0,S=0,C=null,E=o._align,M=0,_=0,O=o.fontSize/o.fontData.size,k=O*o.scaleX,P=O*o.scaleY,A=null,L=0,D=[],F=Number.MAX_VALUE,X=0,z=0,Y=0,R=[],B=[],I=null;if(d>0){for(a=0;a<l;a++)if((S=u.charCodeAt(a))!==10){if(C=y[S]){if(A!==null)var G=C.kerning[L];S===c?I!==null&&(R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P,cr:!1}),I=null):(I===null&&(I={word:"",i:a,x:w,y:T,w:0,h:m,cr:!1}),I.word=I.word.concat(u[a]),I.w+=C.xOffset+C.xAdvance+(G!==void 0?G:0)),w+=C.xAdvance+x,A=C,L=S}}else I!==null&&(R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P,cr:!0}),I=null),w=0,T+=m+b,A=null;var N;I!==null&&R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P,cr:!1}),w=0,T=0,A=null,L=0;var W=0,U=[];for(a=0;a<R.length;a++){var V=R[a],K=V.x,$=V.x+V.w;N&&(W=K-(K-(N.x+N.w)+N.w),N=null),K-W>d||$-W>d?(U.push(V.i-1),V.cr?(U.push(V.i+V.word.length),W=0,N=null):N=V):V.cr&&(U.push(V.i+V.word.length),W=0,N=null)}var H=function(Pt,Ot,Jt){return Pt.substr(0,Ot)+Jt+Pt.substr(Ot+1)};for(a=U.length-1;a>=0;a--)u=H(u,U[a],`
`);h.wrappedText=u,l=u.length,R=[],I=null}var j=0;for(a=0;a<l;a++)if((S=u.charCodeAt(a))!==10){if(C=y[S]){if(M=w,_=T,A!==null){var q=C.kerning[L];M+=q!==void 0?q:0}p>M&&(p=M),f>_&&(f=_);var Z=M+C.xAdvance,Q=_+m;v<Z&&(v=Z),g<Q&&(g=Q);var at=C.xOffset+C.xAdvance+(q!==void 0?q:0);S===c?I!==null&&(R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P}),I=null):(I===null&&(I={word:"",i:j,x:w,y:T,w:0,h:m}),I.word=I.word.concat(u[a]),I.w+=at),B.push({i:j,idx:a,char:u[a],code:S,x:(C.xOffset+M)*O,y:(C.yOffset+T)*O,w:C.width*O,h:C.height*O,t:T*O,r:Z*O,b:m*O,line:z,glyph:C}),w+=C.xAdvance+x+(q!==void 0?q:0),A=C,L=S,Y=Z*O,j++}}else I!==null&&(R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P}),I=null),w=0,T+=m+b,A=null,D[z]=Y,Y>X&&(X=Y),Y<F&&(F=Y),z++,Y=0;if(I!==null&&R.push({word:I.word,i:I.i,x:I.x*k,y:I.y*P,w:I.w*k,h:I.h*P}),D[z]=Y,Y>X&&(X=Y),Y<F&&(F=Y),E>0)for(var rt=0;rt<B.length;rt++){var nt=B[rt];if(E===1){var lt=(X-D[nt.line])/2;nt.x+=lt,nt.r+=lt}else if(E===2){var it=X-D[nt.line];nt.x+=it,nt.r+=it}}var ot=h.local,st=h.global,gt=h.lines;return ot.x=p*O,ot.y=f*O,ot.width=v*O,ot.height=g*O,st.x=o.x-o._displayOriginX+p*k,st.y=o.y-o._displayOriginY+f*P,st.width=v*k,st.height=g*P,gt.shortest=F,gt.longest=X,gt.lengths=D,i&&(ot.x=Math.ceil(ot.x),ot.y=Math.ceil(ot.y),ot.width=Math.ceil(ot.width),ot.height=Math.ceil(ot.height),st.x=Math.ceil(st.x),st.y=Math.ceil(st.y),st.width=Math.ceil(st.width),st.height=Math.ceil(st.height),gt.shortest=Math.ceil(F),gt.longest=Math.ceil(X)),r&&(o._displayOriginX=o.originX*ot.width,o._displayOriginY=o.originY*ot.height,st.x=o.x-o._displayOriginX*o.scaleX,st.y=o.y-o._displayOriginY*o.scaleY,i&&(st.x=Math.ceil(st.x),st.y=Math.ceil(st.y))),h.words=R,h.characters=B,h.lines.height=m,h.scale=O,h.scaleX=o.scaleX,h.scaleY=o.scaleY,h}},61327:(s,o,i)=>{var r=i(21859);s.exports=function(h,a,u,l,d,c,p){var f=h.sys.textures.get(u),v=f.get(l),g=h.sys.cache.xml.get(d);if(v&&g){var y=r(g,v,c,p,f);return h.sys.cache.bitmapFont.add(a,{data:y,texture:u,frame:l,fromAtlas:!0}),!0}return!1}},6925:(s,o,i)=>{var r=i(35154);s.exports=function(h,a){var u=a.width,l=a.height,d=Math.floor(u/2),c=Math.floor(l/2),p=r(a,"chars","");if(p!==""){var f=r(a,"image",""),v=h.sys.textures.getFrame(f),g=v.cutX,y=v.cutY,m=v.source.width,x=v.source.height,b=r(a,"offset.x",0),w=r(a,"offset.y",0),T=r(a,"spacing.x",0),S=r(a,"spacing.y",0),C=r(a,"lineSpacing",0),E=r(a,"charsPerRow",null);E===null&&(E=m/u)>p.length&&(E=p.length);for(var M=b,_=w,O={retroFont:!0,font:f,size:u,lineHeight:l+C,chars:{}},k=0,P=0;P<p.length;P++){var A=p.charCodeAt(P),L=(g+M)/m,D=(y+_)/x,F=(g+M+u)/m,X=(y+_+l)/x;O.chars[A]={x:M,y:_,width:u,height:l,centerX:d,centerY:c,xOffset:0,yOffset:0,xAdvance:u,data:{},kerning:{},u0:L,v0:D,u1:F,v1:X},++k===E?(k=0,M=b,_+=l+S):M+=u+T}return{data:O,frame:null,texture:f}}}},21859:s=>{function o(i,r){return parseInt(i.getAttribute(r),10)}s.exports=function(i,r,h,a,u){h===void 0&&(h=0),a===void 0&&(a=0);var l=r.cutX,d=r.cutY,c=r.source.width,p=r.source.height,f=r.sourceIndex,v={},g=i.getElementsByTagName("info")[0],y=i.getElementsByTagName("common")[0];v.font=g.getAttribute("face"),v.size=o(g,"size"),v.lineHeight=o(y,"lineHeight")+a,v.chars={};var m=i.getElementsByTagName("char"),x=r!==void 0&&r.trimmed;if(x)var b=r.height,w=r.width;for(var T=0;T<m.length;T++){var S=m[T],C=o(S,"id"),E=String.fromCharCode(C),M=o(S,"x"),_=o(S,"y"),O=o(S,"width"),k=o(S,"height");x&&(M<w&&(w=M),_<b&&(b=_)),x&&b!==0&&w!==0&&(M-=r.x,_-=r.y);var P=(l+M)/c,A=(d+_)/p,L=(l+M+O)/c,D=(d+_+k)/p;if(v.chars[C]={x:M,y:_,width:O,height:k,centerX:Math.floor(O/2),centerY:Math.floor(k/2),xOffset:o(S,"xoffset"),yOffset:o(S,"yoffset"),xAdvance:o(S,"xadvance")+h,data:{},kerning:{},u0:P,v0:A,u1:L,v1:D},u&&O!==0&&k!==0){var F=u.add(E,f,M,_,O,k);F&&F.setUVs(O,k,P,A,L,D)}}var X=i.getElementsByTagName("kerning");for(T=0;T<X.length;T++){var z=X[T],Y=o(z,"first"),R=o(z,"second"),B=o(z,"amount");v.chars[R].kerning[Y]=B}return v}},196:(s,o,i)=>{var r=i(87662),h=i(79291),a={Parse:i(6925)};a=h(!1,a,r),s.exports=a},87662:s=>{s.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`}},2638:(s,o,i)=>{var r=i(22186),h=i(83419),a=i(12310),u=new h({Extends:r,Mixins:[a],initialize:function(l,d,c,p,f,v,g){r.call(this,l,d,c,p,f,v,g),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(l,d){return this.cropWidth=l,this.cropHeight=d,this},setDisplayCallback:function(l){return this.displayCallback=l,this},setScrollX:function(l){return this.scrollX=l,this},setScrollY:function(l){return this.scrollY=l,this}});s.exports=u},86741:(s,o,i)=>{var r=i(20926);s.exports=function(h,a,u,l){var d=a._text,c=d.length,p=h.currentContext;if(c!==0&&r(h,p,a,u,l)){u.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,v=a.displayCallback,g=a.callbackData,y=a.fontData.chars,m=a.fontData.lineHeight,x=a._letterSpacing,b=0,w=0,T=0,S=null,C=0,E=0,M=0,_=0,O=0,k=0,P=null,A=0,L=a.frame.source.image,D=f.cutX,F=f.cutY,X=0,z=0,Y=a._fontSize/a.fontData.size,R=a._align,B=0,I=0;a.getTextBounds(!1);var G=a._bounds.lines;R===1?I=(G.longest-G.lengths[0])/2:R===2&&(I=G.longest-G.lengths[0]),p.translate(-a.displayOriginX,-a.displayOriginY);var N=u.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(p.beginPath(),p.rect(0,0,a.cropWidth,a.cropHeight),p.clip());for(var W=0;W<c;W++)if(z=Y,X=0,(T=d.charCodeAt(W))!==10){if(S=y[T]){if(C=D+S.x,E=F+S.y,M=S.width,_=S.height,O=S.xOffset+b-a.scrollX,k=S.yOffset+w-a.scrollY,P!==null){var U=S.kerning[A];O+=U!==void 0?U:0}if(v){g.index=W,g.charCode=T,g.x=O,g.y=k,g.scale=z,g.rotation=X,g.data=S.data;var V=v(g);O=V.x,k=V.y,z=V.scale,X=V.rotation}O*=z,k*=z,O+=I,b+=S.xAdvance+x+(U!==void 0?U:0),P=S,A=T,M!==0&&_!==0&&T!==32&&(N&&(O=Math.round(O),k=Math.round(k)),p.save(),p.translate(O,k),p.rotate(X),p.scale(z,z),p.drawImage(L,C,E,M,_,0,0,M,_),p.restore())}}else B++,R===1?I=(G.longest-G.lengths[B])/2:R===2&&(I=G.longest-G.lengths[B]),b=0,w+=m,P=null;p.restore()}}},11164:(s,o,i)=>{var r=i(2638),h=i(25305),a=i(44603),u=i(23568);a.register("dynamicBitmapText",function(l,d){l===void 0&&(l={});var c=u(l,"font",""),p=u(l,"text",""),f=u(l,"size",!1),v=new r(this.scene,0,0,c,p,f);return d!==void 0&&(l.add=d),h(this.scene,v,l),v})},72566:(s,o,i)=>{var r=i(2638);i(39429).register("dynamicBitmapText",function(h,a,u,l,d){return this.displayList.add(new r(this.scene,h,a,u,l,d))})},12310:(s,o,i)=>{var r,h;i(29747),r=i(73482),h=i(86741),s.exports={renderWebGL:r,renderCanvas:h}},73482:(s,o,i)=>{var r=i(91296),h=i(61340),a=i(70554),u=new h;s.exports=function(l,d,c,p){var f=d.text,v=f.length;if(v!==0){c.addToRenderList(d);var g=l.pipelines.set(d.pipeline,d),y=r(d,c,p);l.pipelines.preBatch(d);var m=y.sprite,x=y.calc,b=u,w=d.cropWidth>0||d.cropHeight>0;w&&(g.flush(),l.pushScissor(x.tx,x.ty,d.cropWidth*x.scaleX,d.cropHeight*x.scaleY));var T,S,C=d.frame.glTexture,E=d.tintFill,M=a.getTintAppendFloatAlpha(d.tintTopLeft,c.alpha*d._alphaTL),_=a.getTintAppendFloatAlpha(d.tintTopRight,c.alpha*d._alphaTR),O=a.getTintAppendFloatAlpha(d.tintBottomLeft,c.alpha*d._alphaBL),k=a.getTintAppendFloatAlpha(d.tintBottomRight,c.alpha*d._alphaBR),P=g.setGameObject(d),A=0,L=0,D=0,F=0,X=d.letterSpacing,z=0,Y=0,R=d.scrollX,B=d.scrollY,I=d.fontData,G=I.chars,N=I.lineHeight,W=d.fontSize/I.size,U=0,V=d._align,K=0,$=0,H=d.getTextBounds(!1);d.maxWidth>0&&(v=(f=H.wrappedText).length);var j=d._bounds.lines;V===1?$=(j.longest-j.lengths[0])/2:V===2&&($=j.longest-j.lengths[0]);for(var q=c.roundPixels,Z=d.displayCallback,Q=d.callbackData,at=0;at<v;at++)if((D=f.charCodeAt(at))!==10){if(T=G[D]){z=T.width,Y=T.height;var rt=T.xOffset+A-R,nt=T.yOffset+L-B;if(S!==null){var lt=T.kerning[F];rt+=lt!==void 0?lt:0}if(A+=T.xAdvance+X,S=T,F=D,z!==0&&Y!==0&&D!==32){if(W=d.fontSize/d.fontData.size,U=0,Z){Q.color=0,Q.tint.topLeft=M,Q.tint.topRight=_,Q.tint.bottomLeft=O,Q.tint.bottomRight=k,Q.index=at,Q.charCode=D,Q.x=rt,Q.y=nt,Q.scale=W,Q.rotation=U,Q.data=T.data;var it=Z(Q);rt=it.x,nt=it.y,W=it.scale,U=it.rotation,it.color?(M=it.color,_=it.color,O=it.color,k=it.color):(M=it.tint.topLeft,_=it.tint.topRight,O=it.tint.bottomLeft,k=it.tint.bottomRight),M=a.getTintAppendFloatAlpha(M,c.alpha*d._alphaTL),_=a.getTintAppendFloatAlpha(_,c.alpha*d._alphaTR),O=a.getTintAppendFloatAlpha(O,c.alpha*d._alphaBL),k=a.getTintAppendFloatAlpha(k,c.alpha*d._alphaBR)}rt*=W,nt*=W,rt-=d.displayOriginX,nt-=d.displayOriginY,rt+=$,b.applyITRS(rt,nt,U,W,W),x.multiply(b,m);var ot=T.u0,st=T.v0,gt=T.u1,Pt=T.v1,Ot=z,Jt=Y,Kt=m.e,Lt=m.f,oe=Jt*m.c+m.e,ke=Jt*m.d+m.f,Te=Ot*m.a+Jt*m.c+m.e,os=Ot*m.b+Jt*m.d+m.f,hs=Ot*m.a+m.e,ls=Ot*m.b+m.f;q&&(Kt=Math.round(Kt),Lt=Math.round(Lt),oe=Math.round(oe),ke=Math.round(ke),Te=Math.round(Te),os=Math.round(os),hs=Math.round(hs),ls=Math.round(ls)),g.shouldFlush(6)&&(g.flush(),P=g.setGameObject(d)),g.batchQuad(d,Kt,Lt,oe,ke,Te,os,hs,ls,ot,st,gt,Pt,M,_,O,k,E,C,P)}}}else K++,V===1?$=(j.longest-j.lengths[K])/2:V===2&&($=j.longest-j.lengths[K]),A=0,L+=N,S=null;w&&(g.flush(),l.popScissor()),l.pipelines.postBatch(d)}}},22186:(s,o,i)=>{var r=i(83419),h=i(45319),a=i(31401),u=i(95643),l=i(53048),d=i(61327),c=i(21859),p=i(87841),f=i(18658),v=new r({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,f],initialize:function(g,y,m,x,b,w,T){b===void 0&&(b=""),T===void 0&&(T=0),u.call(this,g,"BitmapText"),this.font=x;var S=this.scene.sys.cache.bitmapFont.get(x);S||console.warn("Invalid BitmapText key: "+x),this.fontData=S.data,this._text="",this._fontSize=w||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=T,this._bounds=l(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=S.fromAtlas,this.setTexture(S.texture,S.frame),this.setPosition(y,m),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(b)},setLeftAlign:function(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(g){return this._fontSize=g,this._dirty=!0,this},setLetterSpacing:function(g){return g===void 0&&(g=0),this._letterSpacing=g,this._dirty=!0,this},setLineSpacing:function(g){return g===void 0&&(g=0),this.lineSpacing=g,this},setText:function(g){return g||g===0||(g=""),Array.isArray(g)&&(g=g.join(`
`)),g!==this.text&&(this._text=g.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(g,y,m,x){return g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=.5),this.dropShadowX=g,this.dropShadowY=y,this.dropShadowColor=m,this.dropShadowAlpha=x,this},setCharacterTint:function(g,y,m,x,b,w,T){g===void 0&&(g=0),y===void 0&&(y=1),m===void 0&&(m=!1),x===void 0&&(x=-1),b===void 0&&(b=x,w=x,T=x);var S=this.text.length;y===-1&&(y=S),g<0&&(g=S+g),g=h(g,0,S-1);for(var C=h(g+y,g,S),E=this.charColors,M=g;M<C;M++){var _=E[M];if(x===-1)E[M]=null;else{var O=m?1:0;_?(_.tintEffect=O,_.tintTL=x,_.tintTR=b,_.tintBL=w,_.tintBR=T):E[M]={tintEffect:O,tintTL:x,tintTR:b,tintBL:w,tintBR:T}}}return this},setWordTint:function(g,y,m,x,b,w,T){y===void 0&&(y=1);for(var S=this.getTextBounds().words,C=typeof g=="number",E=0,M=0;M<S.length;M++){var _=S[M];if((C&&M===g||!C&&_.word===g)&&(this.setCharacterTint(_.i,_.word.length,m,x,b,w,T),++E===y))return this}return this},getTextBounds:function(g){var y=this._bounds;return(this._dirty||g||this.scaleX!==y.scaleX||this.scaleY!==y.scaleY)&&(l(this,g,!0,y),this._dirty=!1),y},getCharacterAt:function(g,y,m){for(var x=this.getLocalPoint(g,y,null,m),b=this.getTextBounds().characters,w=new p,T=0;T<b.length;T++){var S=b[T];if(w.setTo(S.x,S.t,S.r-S.x,S.b),w.contains(x.x,x.y))return S}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(g,y,m){y===void 0&&(y=this._fontSize),m===void 0&&(m=this._align);var x=this.scene.sys.cache.bitmapFont.get(g);return x&&(this.font=g,this.fontData=x.data,this._fontSize=y,this._align=m,this.fromAtlas=x.fromAtlas===!0,this.setTexture(x.texture,x.frame),l(this,!1,!0,this._bounds)),this},setMaxWidth:function(g,y){return this._maxWidth=g,this._dirty=!0,y!==void 0&&(this.wordWrapCharCode=y),this},align:{set:function(g){this._align=g,this._dirty=!0},get:function(){return this._align}},text:{set:function(g){this.setText(g)},get:function(){return this._text}},fontSize:{set:function(g){this._fontSize=g,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(g){this._letterSpacing=g,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(g){this._lineSpacing=g,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(g){this._maxWidth=g,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var g=a.ToJSON(this),y={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return g.data=y,g},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=d,v.ParseXMLBitmapFont=c,s.exports=v},37289:(s,o,i)=>{var r=i(20926);s.exports=function(h,a,u,l){var d=a._text,c=d.length,p=h.currentContext;if(c!==0&&r(h,p,a,u,l)){u.addToRenderList(a);var f=a.fromAtlas?a.frame:a.texture.frames.__BASE,v=a.fontData.chars,g=a.fontData.lineHeight,y=a._letterSpacing,m=a._lineSpacing,x=0,b=0,w=0,T=null,S=0,C=0,E=0,M=0,_=0,O=0,k=null,P=0,A=f.source.image,L=f.cutX,D=f.cutY,F=a._fontSize/a.fontData.size,X=a._align,z=0,Y=0,R=a.getTextBounds(!1);a.maxWidth>0&&(c=(d=R.wrappedText).length);var B=a._bounds.lines;X===1?Y=(B.longest-B.lengths[0])/2:X===2&&(Y=B.longest-B.lengths[0]),p.translate(-a.displayOriginX,-a.displayOriginY);for(var I=u.roundPixels,G=0;G<c;G++)if((w=d.charCodeAt(G))!==10){if(T=v[w]){if(S=L+T.x,C=D+T.y,E=T.width,M=T.height,_=T.xOffset+x,O=T.yOffset+b,k!==null){var N=T.kerning[P];_+=N!==void 0?N:0}_*=F,O*=F,_+=Y,x+=T.xAdvance+y+(N!==void 0?N:0),k=T,P=w,E!==0&&M!==0&&w!==32&&(I&&(_=Math.round(_),O=Math.round(O)),p.save(),p.translate(_,O),p.scale(F,F),p.drawImage(A,S,C,E,M,0,0,E,M),p.restore())}}else z++,X===1?Y=(B.longest-B.lengths[z])/2:X===2&&(Y=B.longest-B.lengths[z]),x=0,b+=g+m,k=null;p.restore()}}},57336:(s,o,i)=>{var r=i(22186),h=i(25305),a=i(44603),u=i(23568),l=i(35154);a.register("bitmapText",function(d,c){d===void 0&&(d={});var p=l(d,"font",""),f=u(d,"text",""),v=u(d,"size",!1),g=l(d,"align",0),y=new r(this.scene,0,0,p,f,v,g);return c!==void 0&&(d.add=c),h(this.scene,y,d),y})},34914:(s,o,i)=>{var r=i(22186);i(39429).register("bitmapText",function(h,a,u,l,d,c){return this.displayList.add(new r(this.scene,h,a,u,l,d,c))})},18658:(s,o,i)=>{var r,h;i(29747),r=i(33590),h=i(37289),s.exports={renderWebGL:r,renderCanvas:h}},33590:(s,o,i)=>{var r=i(3217),h=i(91296),a=i(70554);s.exports=function(u,l,d,c){if(l._text.length!==0){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline,l),f=h(l,d,c).calc;u.pipelines.preBatch(l);var v,g,y,m=d.roundPixels,x=d.alpha,b=l.charColors,w=l.tintFill,T=a.getTintAppendFloatAlpha,S=T(l.tintTopLeft,x*l._alphaTL),C=T(l.tintTopRight,x*l._alphaTR),E=T(l.tintBottomLeft,x*l._alphaBL),M=T(l.tintBottomRight,x*l._alphaBR),_=l.frame.glTexture,O=p.setGameObject(l),k=l.getTextBounds(!1).characters,P=l.dropShadowX,A=l.dropShadowY;if(P!==0||A!==0){var L=l.dropShadowColor,D=l.dropShadowAlpha,F=T(L,x*D*l._alphaTL),X=T(L,x*D*l._alphaTR),z=T(L,x*D*l._alphaBL),Y=T(L,x*D*l._alphaBR);for(v=0;v<k.length;v++)y=(g=k[v]).glyph,g.code!==32&&y.width!==0&&y.height!==0&&r(p,l,g,y,P,A,f,m,F,X,z,Y,1,_,O)}for(v=0;v<k.length;v++)if(y=(g=k[v]).glyph,g.code!==32&&y.width!==0&&y.height!==0)if(p.shouldFlush(6)&&(p.flush(),O=p.setGameObject(l)),b[g.i]){var R=b[g.i],B=R.tintEffect,I=T(R.tintTL,x*l._alphaTL),G=T(R.tintTR,x*l._alphaTR),N=T(R.tintBL,x*l._alphaBL),W=T(R.tintBR,x*l._alphaBR);r(p,l,g,y,0,0,f,m,I,G,N,W,B,_,O)}else r(p,l,g,y,0,0,f,m,S,C,E,M,w,_,O);u.pipelines.postBatch(l)}}},6107:(s,o,i)=>{var r=i(48011),h=i(46590),a=i(83419),u=i(31401),l=i(4327),d=i(95643),c=i(73162),p=new a({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Size,u.Texture,u.Transform,u.Visible,r],initialize:function(f,v,g,y,m){d.call(this,f,"Blitter"),this.setTexture(y,m),this.setPosition(v,g),this.initPipeline(),this.initPostPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(f,v,g,y,m){y===void 0&&(y=!0),m===void 0&&(m=this.children.length),g===void 0?g=this.frame:g instanceof l||(g=this.texture.get(g));var x=new h(this,f,v,g,y);return this.children.addAt(x,m,!1),this.dirty=!0,x},createFromCallback:function(f,v,g,y){for(var m=this.createMultiple(v,g,y),x=0;x<m.length;x++){var b=m[x];f.call(this,b,x)}return m},createMultiple:function(f,v,g){v===void 0&&(v=this.frame.name),g===void 0&&(g=!0),Array.isArray(v)||(v=[v]);var y=[],m=this;return v.forEach(function(x){for(var b=0;b<f;b++)y.push(m.create(0,0,x,g))}),y},childCanRender:function(f){return f.visible&&f.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});s.exports=p},72396:s=>{s.exports=function(o,i,r,h){var a=i.getRenderList();if(a.length!==0){var u=o.currentContext,l=r.alpha*i.alpha;if(l!==0){r.addToRenderList(i),u.globalCompositeOperation=o.blendModes[i.blendMode],u.imageSmoothingEnabled=!i.frame.source.scaleMode;var d=i.x-r.scrollX*i.scrollFactorX,c=i.y-r.scrollY*i.scrollFactorY;u.save(),h&&h.copyToContext(u);for(var p=r.roundPixels,f=0;f<a.length;f++){var v=a[f],g=v.flipX||v.flipY,y=v.frame,m=y.canvasData,x=y.x,b=y.y,w=1,T=1,S=v.alpha*l;S!==0&&(u.globalAlpha=S,g?(v.flipX&&(w=-1,x-=m.width),v.flipY&&(T=-1,b-=m.height),m.width>0&&m.height>0&&(u.save(),u.translate(v.x+d,v.y+c),u.scale(w,T),u.drawImage(y.source.image,m.x,m.y,m.width,m.height,x,b,m.width,m.height),u.restore())):(p&&(x=Math.round(x),b=Math.round(b)),m.width>0&&m.height>0&&u.drawImage(y.source.image,m.x,m.y,m.width,m.height,x+v.x+d,b+v.y+c,m.width,m.height)))}u.restore()}}}},9403:(s,o,i)=>{var r=i(6107),h=i(25305),a=i(44603),u=i(23568);a.register("blitter",function(l,d){l===void 0&&(l={});var c=u(l,"key",null),p=u(l,"frame",null),f=new r(this.scene,0,0,c,p);return d!==void 0&&(l.add=d),h(this.scene,f,l),f})},12709:(s,o,i)=>{var r=i(6107);i(39429).register("blitter",function(h,a,u,l){return this.displayList.add(new r(this.scene,h,a,u,l))})},48011:(s,o,i)=>{var r,h;i(29747),r=i(99485),h=i(72396),s.exports={renderWebGL:r,renderCanvas:h}},99485:(s,o,i)=>{var r=i(61340),h=i(70554),a=new r;s.exports=function(u,l,d,c){var p=l.getRenderList(),f=d.alpha*l.alpha;if(p.length!==0&&f!==0){d.addToRenderList(l);var v=u.pipelines.set(this.pipeline,l),g=d.scrollX*l.scrollFactorX,y=d.scrollY*l.scrollFactorY,m=a.copyFrom(d.matrix);c&&(m.multiplyWithOffset(c,-g,-y),g=0,y=0);var x=l.x-g,b=l.y-y,w=-1;u.pipelines.preBatch(l);for(var T=0;T<p.length;T++){var S=p[T],C=S.frame,E=S.alpha*f;if(E!==0){var M=C.width,_=C.height,O=x+S.x+C.x,k=b+S.y+C.y;S.flipX&&(M*=-1,O+=C.width),S.flipY&&(_*=-1,k+=C.height);var P=m.setQuad(O,k,O+M,k+_),A=h.getTintAppendFloatAlpha(S.tint,E);if(C.sourceIndex!==w){var L=v.setGameObject(l,C);w=C.sourceIndex}v.batchQuad(l,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],C.u0,C.v0,C.u1,C.v1,A,A,A,A,!1,C.glTexture,L)&&(w=-1)}}u.pipelines.postBatch(l)}}},46590:(s,o,i)=>{var r=i(83419),h=i(4327),a=new r({initialize:function(u,l,d,c,p){this.parent=u,this.x=l,this.y=d,this.frame=c,this.data={},this.tint=16777215,this._visible=p,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(u){return u===void 0?this.frame=this.parent.frame:u instanceof h&&u.texture===this.parent.texture?this.frame=u:this.frame=this.parent.texture.get(u),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(u,l,d){return this.x=u,this.y=l,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,d&&this.setFrame(d),this},setPosition:function(u,l){return this.x=u,this.y=l,this},setFlipX:function(u){return this.flipX=u,this},setFlipY:function(u){return this.flipY=u,this},setFlip:function(u,l){return this.flipX=u,this.flipY=l,this},setVisible:function(u){return this.visible=u,this},setAlpha:function(u){return this.alpha=u,this},setTint:function(u){return this.tint=u,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(u){this.parent.dirty|=this._visible!==u,this._visible=u}},alpha:{get:function(){return this._alpha},set:function(u){this.parent.dirty|=this._alpha>0!=u>0,this._alpha=u}}});s.exports=a},16005:(s,o,i)=>{var r=i(45319),h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,u,l,d){return a===void 0&&(a=1),u===void 0?this.alpha=a:(this._alphaTL=r(a,0,1),this._alphaTR=r(u,0,1),this._alphaBL=r(l,0,1),this._alphaBR=r(d,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var u=r(a,0,1);this._alpha=u,this._alphaTL=u,this._alphaTR=u,this._alphaBL=u,this._alphaBR=u,u===0?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var u=r(a,0,1);this._alphaTL=u,u!==0&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var u=r(a,0,1);this._alphaTR=u,u!==0&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var u=r(a,0,1);this._alphaBL=u,u!==0&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var u=r(a,0,1);this._alphaBR=u,u!==0&&(this.renderFlags|=2)}}};s.exports=h},88509:(s,o,i)=>{var r=i(45319),h={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var u=r(a,0,1);this._alpha=u,u===0?this.renderFlags&=-3:this.renderFlags|=2}}};s.exports=h},90065:(s,o,i)=>{var r=i(10312),h={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=r[a]),(a|=0)>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};s.exports=h},94215:s=>{s.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(o){this.scaleX=o/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(o){this.scaleY=o/this.height}},setSize:function(o,i){return this.width=o,this.height=i,this},setDisplaySize:function(o,i){return this.displayWidth=o,this.displayHeight=i,this}}},61683:s=>{s.exports={texture:null,frame:null,isCropped:!1,setCrop:function(o,i,r,h){if(o===void 0)this.isCropped=!1;else if(this.frame){if(typeof o=="number")this.frame.setCropUVs(this._crop,o,i,r,h,this.flipX,this.flipY);else{var a=o;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},89272:s=>{s.exports={_depth:0,depth:{get:function(){return this._depth},set:function(o){this.displayList&&this.displayList.queueDepthSort(),this._depth=o}},setDepth:function(o){return o===void 0&&(o=0),this.depth=o,this}}},47059:(s,o,i)=>{var r=i(83419),h=i(66064),a=i(19133),u=new r({initialize:function(l,d){this.gameObject=l,this.isPost=d,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(l){return l===void 0&&(l=0),this.padding=l,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(l){if(!this.isPost){var d=this.gameObject.scene.sys.renderer;d&&d.pipelines?(this.gameObject.pipeline=d.pipelines.FX_PIPELINE,l!==void 0&&(this.padding=l),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var l=this.list,d=0;d<l.length;d++)l[d].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(l){var d;if(this.isPost){var c=this.gameObject.getPostPipeline(String(l.type));for(Array.isArray(c)||(c=[c]),d=0;d<c.length;d++){var p=c[d];if(p.controller===l){this.gameObject.removePostPipeline(p),l.destroy();break}}}else{var f=this.list;for(d=0;d<f.length;d++)f[d]===l&&(a(f,d),l.destroy())}return this.gameObject},disable:function(l){return l===void 0&&(l=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,l&&this.clear(),this.gameObject},add:function(l,d){if(!this.isPost)return this.enabled||this.enable(),this.list.push(l),l;var c=String(l.type);this.gameObject.setPostPipeline(c,d);var p=this.gameObject.getPostPipeline(c);return p?(Array.isArray(p)&&(p=p.pop()),p.controller=l,l):void 0},addGlow:function(l,d,c,p,f,v){return this.add(new h.Glow(this.gameObject,l,d,c,p),{quality:f,distance:v})},addShadow:function(l,d,c,p,f,v,g){return this.add(new h.Shadow(this.gameObject,l,d,c,p,f,v,g))},addPixelate:function(l){return this.add(new h.Pixelate(this.gameObject,l))},addVignette:function(l,d,c,p){return this.add(new h.Vignette(this.gameObject,l,d,c,p))},addShine:function(l,d,c,p){return this.add(new h.Shine(this.gameObject,l,d,c,p))},addBlur:function(l,d,c,p,f,v){return this.add(new h.Blur(this.gameObject,l,d,c,p,f,v))},addGradient:function(l,d,c,p,f,v,g,y){return this.add(new h.Gradient(this.gameObject,l,d,c,p,f,v,g,y))},addBloom:function(l,d,c,p,f,v){return this.add(new h.Bloom(this.gameObject,l,d,c,p,f,v))},addColorMatrix:function(){return this.add(new h.ColorMatrix(this.gameObject))},addCircle:function(l,d,c,p,f){return this.add(new h.Circle(this.gameObject,l,d,c,p,f))},addBarrel:function(l){return this.add(new h.Barrel(this.gameObject,l))},addDisplacement:function(l,d,c){return this.add(new h.Displacement(this.gameObject,l,d,c))},addWipe:function(l,d,c){return this.add(new h.Wipe(this.gameObject,l,d,c))},addReveal:function(l,d,c){return this.add(new h.Wipe(this.gameObject,l,d,c,!0))},addBokeh:function(l,d,c){return this.add(new h.Bokeh(this.gameObject,l,d,c))},addTiltShift:function(l,d,c,p,f,v){return this.add(new h.Bokeh(this.gameObject,l,d,c,!0,p,f,v))},destroy:function(){this.clear(),this.gameObject=null}});s.exports=u},54434:s=>{s.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,i){return this.flipX=o,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},8004:(s,o,i)=>{var r=i(87841),h=i(11520),a=i(26099),u={prepareBoundsOutput:function(l,d){return d===void 0&&(d=!1),this.rotation!==0&&h(l,this.x,this.y,this.rotation),d&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(l.x,l.y,l),l},getCenter:function(l,d){return l===void 0&&(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,d)},getTopLeft:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,d)},getTopCenter:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,d)},getTopRight:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(l,d)},getLeftCenter:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,d)},getRightCenter:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(l,d)},getBottomLeft:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,d)},getBottomCenter:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,d)},getBottomRight:function(l,d){return l||(l=new a),l.x=this.x-this.displayWidth*this.originX+this.displayWidth,l.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(l,d)},getBounds:function(l){var d,c,p,f,v,g,y,m;if(l===void 0&&(l=new r),this.parentContainer){var x=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(l),x.transformPoint(l.x,l.y,l),d=l.x,c=l.y,this.getTopRight(l),x.transformPoint(l.x,l.y,l),p=l.x,f=l.y,this.getBottomLeft(l),x.transformPoint(l.x,l.y,l),v=l.x,g=l.y,this.getBottomRight(l),x.transformPoint(l.x,l.y,l),y=l.x,m=l.y}else this.getTopLeft(l),d=l.x,c=l.y,this.getTopRight(l),p=l.x,f=l.y,this.getBottomLeft(l),v=l.x,g=l.y,this.getBottomRight(l),y=l.x,m=l.y;return l.x=Math.min(d,p,v,y),l.y=Math.min(c,f,g,m),l.width=Math.max(d,p,v,y)-l.x,l.height=Math.max(c,f,g,m)-l.y,l}};s.exports=u},8573:(s,o,i)=>{var r=i(6858),h=i(80661),a={mask:null,setMask:function(u){return this.mask=u,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(u,l,d,c,p){return u===void 0&&(this.texture||this.shader||this.geom)&&(u=this),new r(this.scene,u,l,d,c,p)},createGeometryMask:function(u){return u!==void 0||this.type!=="Graphics"&&!this.geom||(u=this),new h(this.scene,u)}};s.exports=a},27387:s=>{s.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(o){this._displayOriginX=o,this.originX=o/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(o){this._displayOriginY=o,this.originY=o/this.height}},setOrigin:function(o,i){return o===void 0&&(o=.5),i===void 0&&(i=o),this.originX=o,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(o,i){return o===void 0&&(o=0),i===void 0&&(i=o),this.displayOriginX=o,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},37640:(s,o,i)=>{var r=i(39506),h=i(57355),a=i(35154),u=i(86353),l=i(26099),d={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:u.PLAYING_FORWARD,setPath:function(c,p){p===void 0&&(p=this.pathConfig);var f=this.pathTween;return f&&f.isPlaying()&&f.stop(),this.path=c,p&&this.startFollow(p),this},setRotateToPath:function(c,p){return p===void 0&&(p=0),this.rotateToPath=c,this.pathRotationOffset=p,this},isFollowing:function(){var c=this.pathTween;return c&&c.isPlaying()},startFollow:function(c,p){c===void 0&&(c={}),p===void 0&&(p=0);var f=this.pathTween;f&&f.isPlaying()&&f.stop(),typeof c=="number"&&(c={duration:c}),c.from=a(c,"from",0),c.to=a(c,"to",1);var v=h(c,"positionOnPath",!1);this.rotateToPath=h(c,"rotateToPath",!1),this.pathRotationOffset=a(c,"rotationOffset",0);var g=a(c,"startAt",p);if(g&&(c.onStart=function(m){var x=m.data[0];x.progress=g,x.elapsed=x.duration*g;var b=x.ease(x.progress);x.current=x.start+(x.end-x.start)*b,x.setTargetValue()}),this.pathOffset||(this.pathOffset=new l(this.x,this.y)),this.pathVector||(this.pathVector=new l),this.pathDelta||(this.pathDelta=new l),this.pathDelta.reset(),c.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(c),this.path.getStartPoint(this.pathOffset),v&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=u.PLAYING_FORWARD,this.rotateToPath){var y=this.path.getPoint(.1);this.rotation=Math.atan2(y.y-this.y,y.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=c,this},pauseFollow:function(){var c=this.pathTween;return c&&c.isPlaying()&&c.pause(),this},resumeFollow:function(){var c=this.pathTween;return c&&c.isPaused()&&c.resume(),this},stopFollow:function(){var c=this.pathTween;return c&&c.isPlaying()&&c.stop(),this},pathUpdate:function(){var c=this.pathTween;if(c&&c.data){var p=c.data[0],f=this.pathDelta,v=this.pathVector;if(f.copy(v).negate(),p.state===u.COMPLETE)return this.path.getPoint(p.end,v),f.add(v),v.add(this.pathOffset),void this.setPosition(v.x,v.y);if(p.state!==u.PLAYING_FORWARD&&p.state!==u.PLAYING_BACKWARD)return;this.path.getPoint(c.getValue(),v),f.add(v),v.add(this.pathOffset);var g=this.x,y=this.y;this.setPosition(v.x,v.y);var m=this.x-g,x=this.y-y;if(m===0&&x===0)return;if(p.state!==this._prevDirection)return void(this._prevDirection=p.state);this.rotateToPath&&(this.rotation=Math.atan2(x,m)+r(this.pathRotationOffset))}}};s.exports=d},72699:(s,o,i)=>{var r=i(62644),h={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(a){this.pipelineData={};var u=this.scene.sys.renderer;if(!u)return!1;var l=u.pipelines;if(l){a===void 0&&(a=l.default);var d=l.get(a);if(d)return this.defaultPipeline=d,this.pipeline=d,!0}return!1},setPipeline:function(a,u,l){var d=this.scene.sys.renderer;if(!d)return this;var c=d.pipelines;if(c){var p=c.get(a);p&&(this.pipeline=p),u&&(this.pipelineData=l?r(u):u)}return this},setPipelineData:function(a,u){var l=this.pipelineData;return u===void 0?delete l[a]:l[a]=u,this},resetPipeline:function(a){return a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,a&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};s.exports=h},17581:(s,o,i)=>{var r=i(62644),h=i(47059),a=i(19133),u={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(l){this.postPipelines=[],this.postPipelineData={},this.postFX=new h(this,!0),l&&(this.preFX=new h(this,!1))},setPostPipeline:function(l,d,c){var p=this.scene.sys.renderer;if(!p)return this;var f=p.pipelines;if(f){Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++){var g=f.getPostPipeline(l[v],this,d);g&&this.postPipelines.push(g)}d&&(this.postPipelineData=c?r(d):d)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(l,d){var c=this.postPipelineData;return d===void 0?delete c[l]:c[l]=d,this},getPostPipeline:function(l){for(var d=typeof l=="string",c=this.postPipelines,p=[],f=0;f<c.length;f++){var v=c[f];(d&&v.name===l||!d&&v instanceof l)&&p.push(v)}return p.length===1?p[0]:p},resetPostPipeline:function(l){l===void 0&&(l=!1);for(var d=this.postPipelines,c=0;c<d.length;c++)d[c].destroy();this.postPipelines=[],this.hasPostPipeline=!1,l&&(this.postPipelineData={})},removePostPipeline:function(l){for(var d=typeof l=="string",c=this.postPipelines,p=c.length-1;p>=0;p--){var f=c[p];(d&&f.name===l||!d&&f===l)&&(f.destroy(),a(c,p))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};s.exports=u},80227:s=>{s.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(o,i){return i===void 0&&(i=o),this.scrollFactorX=o,this.scrollFactorY=i,this}}},16736:s=>{var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(i){this.scaleX=i/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(i){this.scaleY=i/this.frame.realHeight}},setSizeToFrame:function(i){i||(i=this.frame),this.width=i.realWidth,this.height=i.realHeight;var r=this.input;return r&&!r.customHitArea&&(r.hitArea.width=this.width,r.hitArea.height=this.height),this},setSize:function(i,r){return this.width=i,this.height=r,this},setDisplaySize:function(i,r){return this.displayWidth=i,this.displayHeight=r,this}};s.exports=o},37726:(s,o,i)=>{var r=i(4327),h={texture:null,frame:null,isCropped:!1,setTexture:function(a,u,l,d){return this.texture=this.scene.sys.textures.get(a),this.setFrame(u,l,d)},setFrame:function(a,u,l){return u===void 0&&(u=!0),l===void 0&&(l=!0),a instanceof r?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};s.exports=h},79812:(s,o,i)=>{var r=i(4327),h={texture:null,frame:null,isCropped:!1,setCrop:function(a,u,l,d){if(a===void 0)this.isCropped=!1;else if(this.frame){if(typeof a=="number")this.frame.setCropUVs(this._crop,a,u,l,d,this.flipX,this.flipY);else{var c=a;this.frame.setCropUVs(this._crop,c.x,c.y,c.width,c.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(a,u){return this.texture=this.scene.sys.textures.get(a),this.setFrame(u)},setFrame:function(a,u,l){return u===void 0&&(u=!0),l===void 0&&(l=!0),a instanceof r?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&u&&this.setSizeToFrame(),this._originComponent&&l&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};s.exports=h},27472:s=>{s.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(o,i,r,h){return o===void 0&&(o=16777215),i===void 0&&(i=o,r=o,h=o),this.tintTopLeft=o,this.tintTopRight=i,this.tintBottomLeft=r,this.tintBottomRight=h,this.tintFill=!1,this},setTintFill:function(o,i,r,h){return this.setTint(o,i,r,h),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(o){this.setTint(o,o,o,o)}},isTinted:{get:function(){var o=16777215;return this.tintFill||this.tintTopLeft!==o||this.tintTopRight!==o||this.tintBottomLeft!==o||this.tintBottomRight!==o}}}},53774:s=>{s.exports=function(o){var i={name:o.name,type:o.type,x:o.x,y:o.y,depth:o.depth,scale:{x:o.scaleX,y:o.scaleY},origin:{x:o.originX,y:o.originY},flipX:o.flipX,flipY:o.flipY,rotation:o.rotation,alpha:o.alpha,visible:o.visible,blendMode:o.blendMode,textureKey:"",frameKey:"",data:{}};return o.texture&&(i.textureKey=o.texture.key,i.frameKey=o.frame.name),i}},16901:(s,o,i)=>{var r=i(36383),h=i(61340),a=i(85955),u=i(86554),l=i(30954),d=i(26099),c={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(p){this._scaleX=p,this._scaleY=p,p===0?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(p){this._scaleX=p,p===0?this.renderFlags&=-5:this._scaleY!==0&&(this.renderFlags|=4)}},scaleY:{get:function(){return this._scaleY},set:function(p){this._scaleY=p,p===0?this.renderFlags&=-5:this._scaleX!==0&&(this.renderFlags|=4)}},angle:{get:function(){return l(this._rotation*r.RAD_TO_DEG)},set:function(p){this.rotation=l(p)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(p){this._rotation=u(p)}},setPosition:function(p,f,v,g){return p===void 0&&(p=0),f===void 0&&(f=p),v===void 0&&(v=0),g===void 0&&(g=0),this.x=p,this.y=f,this.z=v,this.w=g,this},copyPosition:function(p){return p.x!==void 0&&(this.x=p.x),p.y!==void 0&&(this.y=p.y),p.z!==void 0&&(this.z=p.z),p.w!==void 0&&(this.w=p.w),this},setRandomPosition:function(p,f,v,g){return p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=this.scene.sys.scale.width),g===void 0&&(g=this.scene.sys.scale.height),this.x=p+Math.random()*v,this.y=f+Math.random()*g,this},setRotation:function(p){return p===void 0&&(p=0),this.rotation=p,this},setAngle:function(p){return p===void 0&&(p=0),this.angle=p,this},setScale:function(p,f){return p===void 0&&(p=1),f===void 0&&(f=p),this.scaleX=p,this.scaleY=f,this},setX:function(p){return p===void 0&&(p=0),this.x=p,this},setY:function(p){return p===void 0&&(p=0),this.y=p,this},setZ:function(p){return p===void 0&&(p=0),this.z=p,this},setW:function(p){return p===void 0&&(p=0),this.w=p,this},getLocalTransformMatrix:function(p){return p===void 0&&(p=new h),p.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(p,f){p===void 0&&(p=new h);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(p);for(f||(f=new h),p.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)f.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),f.multiply(p,p),v=v.parentContainer;return p},getLocalPoint:function(p,f,v,g){v||(v=new d),g||(g=this.scene.sys.cameras.main);var y=g.scrollX,m=g.scrollY,x=p+y*this.scrollFactorX-y,b=f+m*this.scrollFactorY-m;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(x,b,v):a(x,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var p=0,f=this.parentContainer;f;)p+=f.rotation,f=f.parentContainer;return p}};s.exports=c},61340:(s,o,i)=>{var r=i(83419),h=i(36383),a=i(26099),u=new r({initialize:function(l,d,c,p,f,v){l===void 0&&(l=1),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=1),f===void 0&&(f=0),v===void 0&&(v=0),this.matrix=new Float32Array([l,d,c,p,f,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(l){this.matrix[0]=l}},b:{get:function(){return this.matrix[1]},set:function(l){this.matrix[1]=l}},c:{get:function(){return this.matrix[2]},set:function(l){this.matrix[2]=l}},d:{get:function(){return this.matrix[3]},set:function(l){this.matrix[3]=l}},e:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},f:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},tx:{get:function(){return this.matrix[4]},set:function(l){this.matrix[4]=l}},ty:{get:function(){return this.matrix[5]},set:function(l){this.matrix[5]=l}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var l=this.matrix,d=l[0],c=l[1],p=l[2],f=l[3];return d||c?c>0?Math.acos(d/this.scaleX):-Math.acos(d/this.scaleX):p||f?h.TAU-(f>0?Math.acos(-p/this.scaleY):-Math.acos(p/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var l=this.matrix;return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l[4]=0,l[5]=0,this},translate:function(l,d){var c=this.matrix;return c[4]=c[0]*l+c[2]*d+c[4],c[5]=c[1]*l+c[3]*d+c[5],this},scale:function(l,d){var c=this.matrix;return c[0]*=l,c[1]*=l,c[2]*=d,c[3]*=d,this},rotate:function(l){var d=Math.sin(l),c=Math.cos(l),p=this.matrix,f=p[0],v=p[1],g=p[2],y=p[3];return p[0]=f*c+g*d,p[1]=v*c+y*d,p[2]=f*-d+g*c,p[3]=v*-d+y*c,this},multiply:function(l,d){var c=this.matrix,p=l.matrix,f=c[0],v=c[1],g=c[2],y=c[3],m=c[4],x=c[5],b=p[0],w=p[1],T=p[2],S=p[3],C=p[4],E=p[5],M=d===void 0?c:d.matrix;return M[0]=b*f+w*g,M[1]=b*v+w*y,M[2]=T*f+S*g,M[3]=T*v+S*y,M[4]=C*f+E*g+m,M[5]=C*v+E*y+x,M},multiplyWithOffset:function(l,d,c){var p=this.matrix,f=l.matrix,v=p[0],g=p[1],y=p[2],m=p[3],x=d*v+c*y+p[4],b=d*g+c*m+p[5],w=f[0],T=f[1],S=f[2],C=f[3],E=f[4],M=f[5];return p[0]=w*v+T*y,p[1]=w*g+T*m,p[2]=S*v+C*y,p[3]=S*g+C*m,p[4]=E*v+M*y+x,p[5]=E*g+M*m+b,this},transform:function(l,d,c,p,f,v){var g=this.matrix,y=g[0],m=g[1],x=g[2],b=g[3],w=g[4],T=g[5];return g[0]=l*y+d*x,g[1]=l*m+d*b,g[2]=c*y+p*x,g[3]=c*m+p*b,g[4]=f*y+v*x+w,g[5]=f*m+v*b+T,this},transformPoint:function(l,d,c){c===void 0&&(c={x:0,y:0});var p=this.matrix,f=p[0],v=p[1],g=p[2],y=p[3],m=p[4],x=p[5];return c.x=l*f+d*g+m,c.y=l*v+d*y+x,c},invert:function(){var l=this.matrix,d=l[0],c=l[1],p=l[2],f=l[3],v=l[4],g=l[5],y=d*f-c*p;return l[0]=f/y,l[1]=-c/y,l[2]=-p/y,l[3]=d/y,l[4]=(p*g-f*v)/y,l[5]=-(d*g-c*v)/y,this},copyFrom:function(l){var d=this.matrix;return d[0]=l.a,d[1]=l.b,d[2]=l.c,d[3]=l.d,d[4]=l.e,d[5]=l.f,this},copyFromArray:function(l){var d=this.matrix;return d[0]=l[0],d[1]=l[1],d[2]=l[2],d[3]=l[3],d[4]=l[4],d[5]=l[5],this},copyToContext:function(l){var d=this.matrix;return l.transform(d[0],d[1],d[2],d[3],d[4],d[5]),l},setToContext:function(l){return l.setTransform(this),l},copyToArray:function(l){var d=this.matrix;return l===void 0?l=[d[0],d[1],d[2],d[3],d[4],d[5]]:(l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l[4]=d[4],l[5]=d[5]),l},setTransform:function(l,d,c,p,f,v){var g=this.matrix;return g[0]=l,g[1]=d,g[2]=c,g[3]=p,g[4]=f,g[5]=v,this},decomposeMatrix:function(){var l=this.decomposedMatrix,d=this.matrix,c=d[0],p=d[1],f=d[2],v=d[3],g=c*v-p*f;if(l.translateX=d[4],l.translateY=d[5],c||p){var y=Math.sqrt(c*c+p*p);l.rotation=p>0?Math.acos(c/y):-Math.acos(c/y),l.scaleX=y,l.scaleY=g/y}else if(f||v){var m=Math.sqrt(f*f+v*v);l.rotation=.5*Math.PI-(v>0?Math.acos(-f/m):-Math.acos(f/m)),l.scaleX=g/m,l.scaleY=m}else l.rotation=0,l.scaleX=0,l.scaleY=0;return l},applyITRS:function(l,d,c,p,f){var v=this.matrix,g=Math.sin(c),y=Math.cos(c);return v[4]=l,v[5]=d,v[0]=y*p,v[1]=g*p,v[2]=-g*f,v[3]=y*f,this},applyInverse:function(l,d,c){c===void 0&&(c=new a);var p=this.matrix,f=p[0],v=p[1],g=p[2],y=p[3],m=p[4],x=p[5],b=1/(f*y+g*-v);return c.x=y*b*l+-g*b*d+(x*g-m*y)*b,c.y=f*b*d+-v*b*l+(-x*f+m*v)*b,c},setQuad:function(l,d,c,p,f,v){f===void 0&&(f=!1),v===void 0&&(v=this.quad);var g=this.matrix,y=g[0],m=g[1],x=g[2],b=g[3],w=g[4],T=g[5];return f?(v[0]=Math.round(l*y+d*x+w),v[1]=Math.round(l*m+d*b+T),v[2]=Math.round(l*y+p*x+w),v[3]=Math.round(l*m+p*b+T),v[4]=Math.round(c*y+p*x+w),v[5]=Math.round(c*m+p*b+T),v[6]=Math.round(c*y+d*x+w),v[7]=Math.round(c*m+d*b+T)):(v[0]=l*y+d*x+w,v[1]=l*m+d*b+T,v[2]=l*y+p*x+w,v[3]=l*m+p*b+T,v[4]=c*y+p*x+w,v[5]=c*m+p*b+T,v[6]=c*y+d*x+w,v[7]=c*m+d*b+T),v},getX:function(l,d){return l*this.a+d*this.c+this.e},getY:function(l,d){return l*this.b+d*this.d+this.f},getXRound:function(l,d,c){var p=this.getX(l,d);return c&&(p=Math.round(p)),p},getYRound:function(l,d,c){var p=this.getY(l,d);return c&&(p=Math.round(p)),p},getCSSMatrix:function(){var l=this.matrix;return"matrix("+l[0]+","+l[1]+","+l[2]+","+l[3]+","+l[4]+","+l[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});s.exports=u},59715:s=>{s.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(o){return this.visible=o,this}}},31401:(s,o,i)=>{s.exports={Alpha:i(16005),AlphaSingle:i(88509),BlendMode:i(90065),ComputedSize:i(94215),Crop:i(61683),Depth:i(89272),Flip:i(54434),FX:i(47059),GetBounds:i(8004),Mask:i(8573),Origin:i(27387),PathFollower:i(37640),Pipeline:i(72699),PostPipeline:i(17581),ScrollFactor:i(80227),Size:i(16736),Texture:i(37726),TextureCrop:i(79812),Tint:i(27472),ToJSON:i(53774),Transform:i(16901),TransformMatrix:i(61340),Visible:i(59715)}},31559:(s,o,i)=>{var r=i(37105),h=i(10312),a=i(83419),u=i(31401),l=i(51708),d=i(95643),c=i(87841),p=i(29959),f=i(36899),v=i(26099),g=new a({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.ComputedSize,u.Depth,u.Mask,u.PostPipeline,u.Transform,u.Visible,p],initialize:function(y,m,x,b){d.call(this,y,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new u.TransformMatrix,this.tempTransformMatrix=new u.TransformMatrix,this._sortKey="",this._sysEvents=y.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(m,x),this.setBlendMode(h.SKIP_CHECK),b&&this.add(b)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return .5*this.width}},displayOriginY:{get:function(){return .5*this.height}},setExclusive:function(y){return y===void 0&&(y=!0),this.exclusive=y,this},getBounds:function(y){if(y===void 0&&(y=new c),y.setTo(this.x,this.y,0,0),this.parentContainer){var m=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);y.setTo(m.x,m.y,0,0)}if(this.list.length>0){var x=this.list,b=new c,w=!1;y.setEmpty();for(var T=0;T<x.length;T++){var S=x[T];S.getBounds&&(S.getBounds(b),w?f(b,y,y):(y.setTo(b.x,b.y,b.width,b.height),w=!0))}}return y},addHandler:function(y){y.once(l.DESTROY,this.onChildDestroyed,this),this.exclusive&&(y.parentContainer&&y.parentContainer.remove(y),y.parentContainer=this,y.removeFromDisplayList(),y.addedToScene())},removeHandler:function(y){y.off(l.DESTROY,this.remove,this),this.exclusive&&(y.parentContainer=null,y.removedFromScene(),y.addToDisplayList())},pointToContainer:function(y,m){m===void 0&&(m=new v),this.parentContainer?this.parentContainer.pointToContainer(y,m):(m.x=y.x,m.y=y.y);var x=this.tempTransformMatrix;return x.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),x.invert(),x.transformPoint(y.x,y.y,m),m},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(y){return r.Add(this.list,y,this.maxSize,this.addHandler,this),this},addAt:function(y,m){return r.AddAt(this.list,y,m,this.maxSize,this.addHandler,this),this},getAt:function(y){return this.list[y]},getIndex:function(y){return this.list.indexOf(y)},sort:function(y,m){return y?(m===void 0&&(m=function(x,b){return x[y]-b[y]}),r.StableSort(this.list,m),this):this},getByName:function(y){return r.GetFirst(this.list,"name",y)},getRandom:function(y,m){return r.GetRandom(this.list,y,m)},getFirst:function(y,m,x,b){return r.GetFirst(this.list,y,m,x,b)},getAll:function(y,m,x,b){return r.GetAll(this.list,y,m,x,b)},count:function(y,m,x,b){return r.CountAllMatching(this.list,y,m,x,b)},swap:function(y,m){return r.Swap(this.list,y,m),this},moveTo:function(y,m){return r.MoveTo(this.list,y,m),this},moveAbove:function(y,m){return r.MoveAbove(this.list,y,m),this},moveBelow:function(y,m){return r.MoveBelow(this.list,y,m),this},remove:function(y,m){var x=r.Remove(this.list,y,this.removeHandler,this);if(m&&x){Array.isArray(x)||(x=[x]);for(var b=0;b<x.length;b++)x[b].destroy()}return this},removeAt:function(y,m){var x=r.RemoveAt(this.list,y,this.removeHandler,this);return m&&x&&x.destroy(),this},removeBetween:function(y,m,x){var b=r.RemoveBetween(this.list,y,m,this.removeHandler,this);if(x)for(var w=0;w<b.length;w++)b[w].destroy();return this},removeAll:function(y){var m=this.list;if(y){for(var x=0;x<m.length;x++)m[x]&&m[x].scene&&(m[x].off(l.DESTROY,this.onChildDestroyed,this),m[x].destroy());this.list=[]}else r.RemoveBetween(m,0,m.length,this.removeHandler,this);return this},bringToTop:function(y){return r.BringToTop(this.list,y),this},sendToBack:function(y){return r.SendToBack(this.list,y),this},moveUp:function(y){return r.MoveUp(this.list,y),this},moveDown:function(y){return r.MoveDown(this.list,y),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(y,m,x){return r.Replace(this.list,y,m)&&(this.addHandler(m),this.removeHandler(y),x&&y.destroy()),this},exists:function(y){return this.list.indexOf(y)>-1},setAll:function(y,m,x,b){return r.SetAll(this.list,y,m,x,b),this},each:function(y,m){var x,b=[null],w=this.list.slice(),T=w.length;for(x=2;x<arguments.length;x++)b.push(arguments[x]);for(x=0;x<T;x++)b[0]=w[x],y.apply(m,b);return this},iterate:function(y,m){var x,b=[null];for(x=2;x<arguments.length;x++)b.push(arguments[x]);for(x=0;x<this.list.length;x++)b[0]=this.list[x],y.apply(m,b);return this},setScrollFactor:function(y,m,x){return m===void 0&&(m=y),x===void 0&&(x=!1),this.scrollFactorX=y,this.scrollFactorY=m,x&&(r.SetAll(this.list,"scrollFactorX",y),r.SetAll(this.list,"scrollFactorY",m)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]},onChildDestroyed:function(y){r.Remove(this.list,y),this.exclusive&&(y.parentContainer=null,y.removedFromScene())}});s.exports=g},53584:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i);var a=i.list;if(a.length!==0){var u=i.localTransform;h?(u.loadIdentity(),u.multiply(h),u.translate(i.x,i.y),u.rotate(i.rotation),u.scale(i.scaleX,i.scaleY)):u.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var l=i.blendMode!==-1;l||o.setBlendMode(0);var d=i._alpha,c=i.scrollFactorX,p=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(o,null,r);for(var f=0;f<a.length;f++){var v=a[f];if(v.willRender(r)){var g=v.alpha,y=v.scrollFactorX,m=v.scrollFactorY;l||v.blendMode===o.currentBlendMode||o.setBlendMode(v.blendMode),v.setScrollFactor(y*c,m*p),v.setAlpha(g*d),v.renderCanvas(o,v,r,u),v.setAlpha(g),v.setScrollFactor(y,m)}}i.mask&&i.mask.postRenderCanvas(o)}}},77143:(s,o,i)=>{var r=i(25305),h=i(31559),a=i(44603),u=i(23568),l=i(95540);a.register("container",function(d,c){d===void 0&&(d={});var p=u(d,"x",0),f=u(d,"y",0),v=l(d,"children",null),g=new h(this.scene,p,f,v);return c!==void 0&&(d.add=c),r(this.scene,g,d),g})},24961:(s,o,i)=>{var r=i(31559);i(39429).register("container",function(h,a,u){return this.displayList.add(new r(this.scene,h,a,u))})},29959:(s,o,i)=>{var r,h;i(29747),r=i(72249),h=i(53584),s.exports={renderWebGL:r,renderCanvas:h}},72249:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i);var a=i.list,u=a.length;if(u!==0){var l=i.localTransform;h?(l.loadIdentity(),l.multiply(h),l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.scaleX,i.scaleY)):l.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),o.pipelines.preBatch(i);var d=i.blendMode!==-1;d||o.setBlendMode(0);for(var c=i.alpha,p=i.scrollFactorX,f=i.scrollFactorY,v=0;v<u;v++){var g=a[v];if(g.willRender(r)){var y,m,x,b;if(g.alphaTopLeft!==void 0)y=g.alphaTopLeft,m=g.alphaTopRight,x=g.alphaBottomLeft,b=g.alphaBottomRight;else{var w=g.alpha;y=w,m=w,x=w,b=w}var T=g.scrollFactorX,S=g.scrollFactorY;d||g.blendMode===o.currentBlendMode||o.setBlendMode(g.blendMode);var C=g.mask;C&&C.preRenderWebGL(o,g,r);var E=g.type;E!==o.currentType&&(o.newType=!0,o.currentType=E),o.nextTypeMatch=v<u-1&&a[v+1].type===o.currentType,g.setScrollFactor(T*p,S*f),g.setAlpha(y*c,m*c,x*c,b*c),g.renderWebGL(o,g,r,l,i),g.setAlpha(y,m,x,b),g.setScrollFactor(T,S),C&&C.postRenderWebGL(o,r),o.newType=!1}}o.pipelines.postBatch(i)}}},47407:s=>{s.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(441),u=i(95643),l=i(41212),d=i(35846),c=i(44594),p=i(61369),f=new r({Extends:u,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,a],initialize:function(v,g,y,m,x,b){u.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new p,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(g,y),typeof m=="string"?m[0]==="#"?this.setElement(m.substr(1),x,b):this.createElement(m,x,b):m&&this.setElement(m,x,b),v.sys.events.on(c.SLEEP,this.handleSceneEvent,this),v.sys.events.on(c.WAKE,this.handleSceneEvent,this),v.sys.events.on(c.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(v){var g=this.node,y=g.style;g&&(y.display=v.settings.visible?"block":"none")},setSkew:function(v,g){return v===void 0&&(v=0),g===void 0&&(g=v),this.skewX=v,this.skewY=g,this},setPerspective:function(v){return this.parent.style.perspective=v+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(v){this.parent.style.perspective=v+"px"}},addListener:function(v){if(this.node){v=v.split(" ");for(var g=0;g<v.length;g++)this.node.addEventListener(v[g],this.handler,!1)}return this},removeListener:function(v){if(this.node){v=v.split(" ");for(var g=0;g<v.length;g++)this.node.removeEventListener(v[g],this.handler)}return this},dispatchNativeEvent:function(v){this.emit(v.type,v)},createElement:function(v,g,y){return this.setElement(document.createElement(v),g,y)},setElement:function(v,g,y){var m;if(this.removeElement(),typeof v=="string"?(v[0]==="#"&&(v=v.substr(1)),m=document.getElementById(v)):typeof v=="object"&&v.nodeType===1&&(m=v),!m)return this;if(this.node=m,g&&l(g))for(var x in g)m.style[x]=g[x];else typeof g=="string"&&(m.style=g);return m.style.zIndex="0",m.style.display="inline",m.style.position="absolute",m.phaser=this,this.parent&&this.parent.appendChild(m),y&&(m.innerText=y),this.updateSize()},createFromCache:function(v,g){var y=this.cache.get(v);return y&&this.createFromHTML(y,g),this},createFromHTML:function(v,g){g===void 0&&(g="div"),this.removeElement();var y=document.createElement(g);return this.node=y,y.style.zIndex="0",y.style.display="inline",y.style.position="absolute",y.phaser=this,this.parent&&this.parent.appendChild(y),y.innerHTML=v,this.updateSize()},removeElement:function(){return this.node&&(d(this.node),this.node=null),this},updateSize:function(){var v=this.node,g=v.getBoundingClientRect();return this.width=v.clientWidth,this.height=v.clientHeight,this.displayWidth=g.width||0,this.displayHeight=g.height||0,this},getChildByProperty:function(v,g){if(this.node){for(var y=this.node.querySelectorAll("*"),m=0;m<y.length;m++)if(y[m][v]===g)return y[m]}return null},getChildByID:function(v){return this.getChildByProperty("id",v)},getChildByName:function(v){return this.getChildByProperty("name",v)},setClassName:function(v){return this.node&&(this.node.className=v,this.updateSize()),this},setText:function(v){return this.node&&(this.node.innerText=v,this.updateSize()),this},setHTML:function(v){return this.node&&(this.node.innerHTML=v,this.updateSize()),this},preRender:function(){var v=this.parentContainer,g=this.node;g&&v&&!v.willRender()&&(g.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(c.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(c.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(c.PRE_RENDER,this.preRender,this)}});s.exports=f},49381:(s,o,i)=>{var r=i(47407),h=i(95643),a=i(61340),u=new a,l=new a,d=new a;s.exports=function(c,p,f,v){if(p.node){var g=p.node.style,y=p.scene.sys.settings;if(!g||!y.visible||h.RENDER_MASK!==p.renderFlags||p.cameraFilter!==0&&p.cameraFilter&f.id||p.parentContainer&&!p.parentContainer.willRender())g.display="none";else{var m=p.parentContainer,x=f.alpha*p.alpha;m&&(x*=m.alpha);var b=u,w=l,T=d,S=0,C=0,E="0%",M="0%";v?(S=p.width*p.scaleX*p.originX,C=p.height*p.scaleY*p.originY,w.applyITRS(p.x-S,p.y-C,p.rotation,p.scaleX,p.scaleY),b.copyFrom(f.matrix),b.multiplyWithOffset(v,-f.scrollX*p.scrollFactorX,-f.scrollY*p.scrollFactorY),w.e=p.x-S,w.f=p.y-C,b.multiply(w,T)):(S=p.width*p.originX,C=p.height*p.originY,w.applyITRS(p.x-S,p.y-C,p.rotation,p.scaleX,p.scaleY),b.copyFrom(f.matrix),E=100*p.originX+"%",M=100*p.originY+"%",w.e-=f.scrollX*p.scrollFactorX,w.f-=f.scrollY*p.scrollFactorY,b.multiply(w,T)),p.transformOnly||(g.display="block",g.opacity=x,g.zIndex=p._depth,g.pointerEvents=p.pointerEvents,g.mixBlendMode=r[p._blendMode]),g.transform=T.getCSSMatrix()+" skew("+p.skewX+"rad, "+p.skewY+"rad) rotate3d("+p.rotate3d.x+","+p.rotate3d.y+","+p.rotate3d.z+","+p.rotate3d.w+p.rotate3dAngle+")",g.transformOrigin=E+" "+M}}}},2611:(s,o,i)=>{var r=i(3069);i(39429).register("dom",function(h,a,u,l,d){var c=new r(this.scene,h,a,u,l,d);return this.displayList.add(c),c})},441:(s,o,i)=>{var r,h;i(29747),r=i(49381),h=i(49381),s.exports={renderWebGL:r,renderCanvas:h}},62980:s=>{s.exports="addedtoscene"},41337:s=>{s.exports="destroy"},44947:s=>{s.exports="removedfromscene"},49358:s=>{s.exports="complete"},35163:s=>{s.exports="created"},97249:s=>{s.exports="error"},19483:s=>{s.exports="locked"},56059:s=>{s.exports="loop"},26772:s=>{s.exports="metadata"},64437:s=>{s.exports="playing"},83411:s=>{s.exports="play"},75780:s=>{s.exports="seeked"},67799:s=>{s.exports="seeking"},63500:s=>{s.exports="stalled"},55541:s=>{s.exports="stop"},53208:s=>{s.exports="textureready"},4992:s=>{s.exports="unlocked"},12:s=>{s.exports="unsupported"},51708:(s,o,i)=>{s.exports={ADDED_TO_SCENE:i(62980),DESTROY:i(41337),REMOVED_FROM_SCENE:i(44947),VIDEO_COMPLETE:i(49358),VIDEO_CREATED:i(35163),VIDEO_ERROR:i(97249),VIDEO_LOCKED:i(19483),VIDEO_LOOP:i(56059),VIDEO_METADATA:i(26772),VIDEO_PLAY:i(83411),VIDEO_PLAYING:i(64437),VIDEO_SEEKED:i(75780),VIDEO_SEEKING:i(67799),VIDEO_STALLED:i(63500),VIDEO_STOP:i(55541),VIDEO_TEXTURE:i(53208),VIDEO_UNLOCKED:i(4992),VIDEO_UNSUPPORTED:i(12)}},42421:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(64993),l=new r({Extends:a,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,u],initialize:function(d){a.call(this,d,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});s.exports=l},70217:()=>{},56315:(s,o,i)=>{var r=i(42421);i(39429).register("extern",function(){var h=new r(this.scene);return this.displayList.add(h),h})},64993:(s,o,i)=>{var r,h;i(29747),r=i(80287),h=i(70217),s.exports={renderWebGL:r,renderCanvas:h}},80287:(s,o,i)=>{var r=i(91296);s.exports=function(h,a,u,l){h.pipelines.clear();var d=r(a,u,l).calc;a.render.call(a,h,u,d),h.pipelines.rebind()}},85592:s=>{s.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(s,o,i)=>{var r=i(71911),h=i(83419),a=i(85592),u=i(31401),l=i(8497),d=i(95643),c=i(95540),p=i(35154),f=i(36383),v=i(84503),g=new h({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.PostPipeline,u.Transform,u.Visible,u.ScrollFactor,v],initialize:function(y,m){var x=p(m,"x",0),b=p(m,"y",0);d.call(this,y,"Graphics"),this.setPosition(x,b),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(m)},setDefaultStyles:function(y){return p(y,"lineStyle",null)&&(this.defaultStrokeWidth=p(y,"lineStyle.width",1),this.defaultStrokeColor=p(y,"lineStyle.color",16777215),this.defaultStrokeAlpha=p(y,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),p(y,"fillStyle",null)&&(this.defaultFillColor=p(y,"fillStyle.color",16777215),this.defaultFillAlpha=p(y,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(y,m,x){return x===void 0&&(x=1),this.commandBuffer.push(a.LINE_STYLE,y,m,x),this._lineWidth=y,this},fillStyle:function(y,m){return m===void 0&&(m=1),this.commandBuffer.push(a.FILL_STYLE,y,m),this},fillGradientStyle:function(y,m,x,b,w,T,S,C){return w===void 0&&(w=1),T===void 0&&(T=w),S===void 0&&(S=w),C===void 0&&(C=w),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,w,T,S,C,y,m,x,b),this},lineGradientStyle:function(y,m,x,b,w,T){return T===void 0&&(T=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,y,T,m,x,b,w),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(y){return this.fillCircle(y.x,y.y,y.radius)},strokeCircleShape:function(y){return this.strokeCircle(y.x,y.y,y.radius)},fillCircle:function(y,m,x){return this.beginPath(),this.arc(y,m,x,0,f.PI2),this.fillPath(),this},strokeCircle:function(y,m,x){return this.beginPath(),this.arc(y,m,x,0,f.PI2),this.strokePath(),this},fillRectShape:function(y){return this.fillRect(y.x,y.y,y.width,y.height)},strokeRectShape:function(y){return this.strokeRect(y.x,y.y,y.width,y.height)},fillRect:function(y,m,x,b){return this.commandBuffer.push(a.FILL_RECT,y,m,x,b),this},strokeRect:function(y,m,x,b){var w=this._lineWidth/2,T=y-w,S=y+w;return this.beginPath(),this.moveTo(y,m),this.lineTo(y,m+b),this.strokePath(),this.beginPath(),this.moveTo(y+x,m),this.lineTo(y+x,m+b),this.strokePath(),this.beginPath(),this.moveTo(T,m),this.lineTo(S+x,m),this.strokePath(),this.beginPath(),this.moveTo(T,m+b),this.lineTo(S+x,m+b),this.strokePath(),this},fillRoundedRect:function(y,m,x,b,w){w===void 0&&(w=20);var T=w,S=w,C=w,E=w;typeof w!="number"&&(T=c(w,"tl",20),S=c(w,"tr",20),C=c(w,"bl",20),E=c(w,"br",20));var M=T>=0,_=S>=0,O=C>=0,k=E>=0;return T=Math.abs(T),S=Math.abs(S),C=Math.abs(C),E=Math.abs(E),this.beginPath(),this.moveTo(y+T,m),this.lineTo(y+x-S,m),_?this.arc(y+x-S,m+S,S,-f.TAU,0):this.arc(y+x,m,S,Math.PI,f.TAU,!0),this.lineTo(y+x,m+b-E),k?this.arc(y+x-E,m+b-E,E,0,f.TAU):this.arc(y+x,m+b,E,-f.TAU,Math.PI,!0),this.lineTo(y+C,m+b),O?this.arc(y+C,m+b-C,C,f.TAU,Math.PI):this.arc(y,m+b,C,0,-f.TAU,!0),this.lineTo(y,m+T),M?this.arc(y+T,m+T,T,-Math.PI,-f.TAU):this.arc(y,m,T,f.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(y,m,x,b,w){w===void 0&&(w=20);var T=w,S=w,C=w,E=w,M=Math.min(x,b)/2;typeof w!="number"&&(T=c(w,"tl",20),S=c(w,"tr",20),C=c(w,"bl",20),E=c(w,"br",20));var _=T>=0,O=S>=0,k=C>=0,P=E>=0;return T=Math.min(Math.abs(T),M),S=Math.min(Math.abs(S),M),C=Math.min(Math.abs(C),M),E=Math.min(Math.abs(E),M),this.beginPath(),this.moveTo(y+T,m),this.lineTo(y+x-S,m),this.moveTo(y+x-S,m),O?this.arc(y+x-S,m+S,S,-f.TAU,0):this.arc(y+x,m,S,Math.PI,f.TAU,!0),this.lineTo(y+x,m+b-E),this.moveTo(y+x,m+b-E),P?this.arc(y+x-E,m+b-E,E,0,f.TAU):this.arc(y+x,m+b,E,-f.TAU,Math.PI,!0),this.lineTo(y+C,m+b),this.moveTo(y+C,m+b),k?this.arc(y+C,m+b-C,C,f.TAU,Math.PI):this.arc(y,m+b,C,0,-f.TAU,!0),this.lineTo(y,m+T),this.moveTo(y,m+T),_?this.arc(y+T,m+T,T,-Math.PI,-f.TAU):this.arc(y,m,T,f.TAU,0,!0),this.strokePath(),this},fillPointShape:function(y,m){return this.fillPoint(y.x,y.y,m)},fillPoint:function(y,m,x){return!x||x<1?x=1:(y-=x/2,m-=x/2),this.commandBuffer.push(a.FILL_RECT,y,m,x,x),this},fillTriangleShape:function(y){return this.fillTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},strokeTriangleShape:function(y){return this.strokeTriangle(y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)},fillTriangle:function(y,m,x,b,w,T){return this.commandBuffer.push(a.FILL_TRIANGLE,y,m,x,b,w,T),this},strokeTriangle:function(y,m,x,b,w,T){return this.commandBuffer.push(a.STROKE_TRIANGLE,y,m,x,b,w,T),this},strokeLineShape:function(y){return this.lineBetween(y.x1,y.y1,y.x2,y.y2)},lineBetween:function(y,m,x,b){return this.beginPath(),this.moveTo(y,m),this.lineTo(x,b),this.strokePath(),this},lineTo:function(y,m){return this.commandBuffer.push(a.LINE_TO,y,m),this},moveTo:function(y,m){return this.commandBuffer.push(a.MOVE_TO,y,m),this},strokePoints:function(y,m,x,b){m===void 0&&(m=!1),x===void 0&&(x=!1),b===void 0&&(b=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var w=1;w<b;w++)this.lineTo(y[w].x,y[w].y);return m&&this.lineTo(y[0].x,y[0].y),x&&this.closePath(),this.strokePath(),this},fillPoints:function(y,m,x,b){m===void 0&&(m=!1),x===void 0&&(x=!1),b===void 0&&(b=y.length),this.beginPath(),this.moveTo(y[0].x,y[0].y);for(var w=1;w<b;w++)this.lineTo(y[w].x,y[w].y);return m&&this.lineTo(y[0].x,y[0].y),x&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(y,m){m===void 0&&(m=32);var x=y.getPoints(m);return this.strokePoints(x,!0)},strokeEllipse:function(y,m,x,b,w){w===void 0&&(w=32);var T=new l(y,m,x,b).getPoints(w);return this.strokePoints(T,!0)},fillEllipseShape:function(y,m){m===void 0&&(m=32);var x=y.getPoints(m);return this.fillPoints(x,!0)},fillEllipse:function(y,m,x,b,w){w===void 0&&(w=32);var T=new l(y,m,x,b).getPoints(w);return this.fillPoints(T,!0)},arc:function(y,m,x,b,w,T,S){return T===void 0&&(T=!1),S===void 0&&(S=0),this.commandBuffer.push(a.ARC,y,m,x,b,w,T,S),this},slice:function(y,m,x,b,w,T,S){return T===void 0&&(T=!1),S===void 0&&(S=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,y,m),this.commandBuffer.push(a.ARC,y,m,x,b,w,T,S),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(y,m){return this.commandBuffer.push(a.TRANSLATE,y,m),this},scaleCanvas:function(y,m){return this.commandBuffer.push(a.SCALE,y,m),this},rotateCanvas:function(y){return this.commandBuffer.push(a.ROTATE,y),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(y,m,x){var b,w,T=this.scene.sys,S=T.game.renderer;m===void 0&&(m=T.scale.width),x===void 0&&(x=T.scale.height),g.TargetCamera.setScene(this.scene),g.TargetCamera.setViewport(0,0,m,x),g.TargetCamera.scrollX=this.x,g.TargetCamera.scrollY=this.y;var C={willReadFrequently:!0};if(typeof y=="string")if(T.textures.exists(y)){var E=(b=T.textures.get(y)).getSourceImage();E instanceof HTMLCanvasElement&&(w=E.getContext("2d",C))}else w=(b=T.textures.createCanvas(y,m,x)).getSourceImage().getContext("2d",C);else y instanceof HTMLCanvasElement&&(w=y.getContext("2d",C));return w&&(this.renderCanvas(S,this,g.TargetCamera,null,w,!1),b&&b.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});g.TargetCamera=new r,s.exports=g},32768:(s,o,i)=>{var r=i(85592),h=i(20926);s.exports=function(a,u,l,d,c,p){var f=u.commandBuffer,v=f.length,g=c||a.currentContext;if(v!==0&&h(a,g,u,l,d)){l.addToRenderList(u);var y=1,m=1,x=0,b=0,w=1,T=0,S=0,C=0;g.beginPath();for(var E=0;E<v;++E)switch(f[E]){case r.ARC:g.arc(f[E+1],f[E+2],f[E+3],f[E+4],f[E+5],f[E+6]),E+=7;break;case r.LINE_STYLE:w=f[E+1],x=f[E+2],y=f[E+3],T=(16711680&x)>>>16,S=(65280&x)>>>8,C=255&x,g.strokeStyle="rgba("+T+","+S+","+C+","+y+")",g.lineWidth=w,E+=3;break;case r.FILL_STYLE:b=f[E+1],m=f[E+2],T=(16711680&b)>>>16,S=(65280&b)>>>8,C=255&b,g.fillStyle="rgba("+T+","+S+","+C+","+m+")",E+=2;break;case r.BEGIN_PATH:g.beginPath();break;case r.CLOSE_PATH:g.closePath();break;case r.FILL_PATH:p||g.fill();break;case r.STROKE_PATH:p||g.stroke();break;case r.FILL_RECT:p?g.rect(f[E+1],f[E+2],f[E+3],f[E+4]):g.fillRect(f[E+1],f[E+2],f[E+3],f[E+4]),E+=4;break;case r.FILL_TRIANGLE:g.beginPath(),g.moveTo(f[E+1],f[E+2]),g.lineTo(f[E+3],f[E+4]),g.lineTo(f[E+5],f[E+6]),g.closePath(),p||g.fill(),E+=6;break;case r.STROKE_TRIANGLE:g.beginPath(),g.moveTo(f[E+1],f[E+2]),g.lineTo(f[E+3],f[E+4]),g.lineTo(f[E+5],f[E+6]),g.closePath(),p||g.stroke(),E+=6;break;case r.LINE_TO:g.lineTo(f[E+1],f[E+2]),E+=2;break;case r.MOVE_TO:g.moveTo(f[E+1],f[E+2]),E+=2;break;case r.LINE_FX_TO:g.lineTo(f[E+1],f[E+2]),E+=5;break;case r.MOVE_FX_TO:g.moveTo(f[E+1],f[E+2]),E+=5;break;case r.SAVE:g.save();break;case r.RESTORE:g.restore();break;case r.TRANSLATE:g.translate(f[E+1],f[E+2]),E+=2;break;case r.SCALE:g.scale(f[E+1],f[E+2]),E+=2;break;case r.ROTATE:g.rotate(f[E+1]),E+=1;break;case r.GRADIENT_FILL_STYLE:E+=5;break;case r.GRADIENT_LINE_STYLE:E+=6}g.restore()}}},87079:(s,o,i)=>{var r=i(44603),h=i(43831);r.register("graphics",function(a,u){a===void 0&&(a={}),u!==void 0&&(a.add=u);var l=new h(this.scene,a);return a.add&&this.scene.sys.displayList.add(l),l})},1201:(s,o,i)=>{var r=i(43831);i(39429).register("graphics",function(h){return this.displayList.add(new r(this.scene,h))})},84503:(s,o,i)=>{var r,h;i(29747),r=i(77545),i(32768),h=i(32768),s.exports={renderWebGL:r,renderCanvas:h}},77545:(s,o,i)=>{var r=i(85592),h=i(91296),a=i(61340),u=i(70554),l=function(f,v,g){this.x=f,this.y=v,this.width=g},d=function(f,v,g){this.points=[],this.pointsLength=1,this.points[0]=new l(f,v,g)},c=[],p=new a;s.exports=function(f,v,g,y){if(v.commandBuffer.length!==0){g.addToRenderList(v);var m=f.pipelines.set(v.pipeline,v);f.pipelines.preBatch(v);for(var x=h(v,g,y).calc,b=p.loadIdentity(),w=v.commandBuffer,T=g.alpha*v.alpha,S=1,C=m.fillTint,E=m.strokeTint,M=0,_=0,O=0,k=2*Math.PI,P=[],A=0,L=!0,D=null,F=u.getTintAppendFloatAlpha,X=0;X<w.length;X++)switch(w[X]){case r.BEGIN_PATH:P.length=0,D=null,L=!0;break;case r.CLOSE_PATH:L=!1,D&&D.points.length&&D.points.push(D.points[0]);break;case r.FILL_PATH:for(A=0;A<P.length;A++)m.batchFillPath(P[A].points,b,x);break;case r.STROKE_PATH:for(A=0;A<P.length;A++)m.batchStrokePath(P[A].points,S,L,b,x);break;case r.LINE_STYLE:S=w[++X];var z=F(w[++X],w[++X]*T);E.TL=z,E.TR=z,E.BL=z,E.BR=z;break;case r.FILL_STYLE:var Y=F(w[++X],w[++X]*T);C.TL=Y,C.TR=Y,C.BL=Y,C.BR=Y;break;case r.GRADIENT_FILL_STYLE:var R=w[++X]*T,B=w[++X]*T,I=w[++X]*T,G=w[++X]*T;C.TL=F(w[++X],R),C.TR=F(w[++X],B),C.BL=F(w[++X],I),C.BR=F(w[++X],G);break;case r.GRADIENT_LINE_STYLE:S=w[++X];var N=w[++X]*T;E.TL=F(w[++X],N),E.TR=F(w[++X],N),E.BL=F(w[++X],N),E.BR=F(w[++X],N);break;case r.ARC:var W=0,U=w[++X],V=w[++X],K=w[++X],$=w[++X],H=w[++X],j=w[++X],q=w[++X];for(H-=$,j?H<-k?H=-k:H>0&&(H=H%k-k):H>k?H=k:H<0&&(H=k+H%k),D===null&&(D=new d(U+Math.cos($)*K,V+Math.sin($)*K,S),P.push(D),W+=.01);W<1+q;)O=H*W+$,M=U+Math.cos(O)*K,_=V+Math.sin(O)*K,D.points.push(new l(M,_,S)),W+=.01;O=H+$,M=U+Math.cos(O)*K,_=V+Math.sin(O)*K,D.points.push(new l(M,_,S));break;case r.FILL_RECT:m.batchFillRect(w[++X],w[++X],w[++X],w[++X],b,x);break;case r.FILL_TRIANGLE:m.batchFillTriangle(w[++X],w[++X],w[++X],w[++X],w[++X],w[++X],b,x);break;case r.STROKE_TRIANGLE:m.batchStrokeTriangle(w[++X],w[++X],w[++X],w[++X],w[++X],w[++X],S,b,x);break;case r.LINE_TO:D!==null?D.points.push(new l(w[++X],w[++X],S)):(D=new d(w[++X],w[++X],S),P.push(D));break;case r.MOVE_TO:D=new d(w[++X],w[++X],S),P.push(D);break;case r.SAVE:c.push(b.copyToArray());break;case r.RESTORE:b.copyFromArray(c.pop());break;case r.TRANSLATE:U=w[++X],V=w[++X],b.translate(U,V);break;case r.SCALE:U=w[++X],V=w[++X],b.scale(U,V);break;case r.ROTATE:b.rotate(w[++X])}f.pipelines.postBatch(v)}}},26479:(s,o,i)=>{var r=i(61061),h=i(83419),a=i(51708),u=i(50792),l=i(46710),d=i(95540),c=i(35154),p=i(97022),f=i(41212),v=i(88492),g=i(35072),y=i(68287),m=new h({Extends:u,initialize:function(x,b,w){u.call(this),w?b&&!Array.isArray(b)&&(b=[b]):Array.isArray(b)?f(b[0])&&(w=b,b=null):f(b)&&(w=b,b=null),this.scene=x,this.children=new g,this.isParent=!0,this.type="Group",this.classType=d(w,"classType",y),this.name=d(w,"name",""),this.active=d(w,"active",!0),this.maxSize=d(w,"maxSize",-1),this.defaultKey=d(w,"defaultKey",null),this.defaultFrame=d(w,"defaultFrame",null),this.runChildUpdate=d(w,"runChildUpdate",!1),this.createCallback=d(w,"createCallback",null),this.removeCallback=d(w,"removeCallback",null),this.createMultipleCallback=d(w,"createMultipleCallback",null),this.internalCreateCallback=d(w,"internalCreateCallback",null),this.internalRemoveCallback=d(w,"internalRemoveCallback",null),b&&this.addMultiple(b),w&&this.createMultiple(w),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(x,b,w,T,S,C){if(x===void 0&&(x=0),b===void 0&&(b=0),w===void 0&&(w=this.defaultKey),T===void 0&&(T=this.defaultFrame),S===void 0&&(S=!0),C===void 0&&(C=!0),this.isFull())return null;var E=new this.classType(this.scene,x,b,w,T);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=S,E.setActive(C),this.add(E),E},createMultiple:function(x){if(this.isFull())return[];Array.isArray(x)||(x=[x]);var b=[];if(x[0].key)for(var w=0;w<x.length;w++){var T=this.createFromConfig(x[w]);b=b.concat(T)}return b},createFromConfig:function(x){if(this.isFull())return[];this.classType=d(x,"classType",this.classType);var b=d(x,"key",void 0),w=d(x,"frame",null),T=d(x,"visible",!0),S=d(x,"active",!0),C=[];if(b===void 0)return C;Array.isArray(b)||(b=[b]),Array.isArray(w)||(w=[w]);var E=d(x,"repeat",0),M=d(x,"randomKey",!1),_=d(x,"randomFrame",!1),O=d(x,"yoyo",!1),k=d(x,"quantity",!1),P=d(x,"frameQuantity",1),A=d(x,"max",0),L=v(b,w,{max:A,qty:k||P,random:M,randomB:_,repeat:E,yoyo:O});x.createCallback&&(this.createCallback=x.createCallback),x.removeCallback&&(this.removeCallback=x.removeCallback),x.internalCreateCallback&&(this.internalCreateCallback=x.internalCreateCallback),x.internalRemoveCallback&&(this.internalRemoveCallback=x.internalRemoveCallback);for(var D=0;D<L.length;D++){var F=this.create(0,0,L[D].a,L[D].b,T,S);if(!F)break;C.push(F)}if(p(x,"setXY")){var X=c(x,"setXY.x",0),z=c(x,"setXY.y",0),Y=c(x,"setXY.stepX",0),R=c(x,"setXY.stepY",0);r.SetXY(C,X,z,Y,R)}if(p(x,"setRotation")){var B=c(x,"setRotation.value",0),I=c(x,"setRotation.step",0);r.SetRotation(C,B,I)}if(p(x,"setScale")){var G=c(x,"setScale.x",1),N=c(x,"setScale.y",G),W=c(x,"setScale.stepX",0),U=c(x,"setScale.stepY",0);r.SetScale(C,G,N,W,U)}if(p(x,"setOrigin")){var V=c(x,"setOrigin.x",.5),K=c(x,"setOrigin.y",V),$=c(x,"setOrigin.stepX",0),H=c(x,"setOrigin.stepY",0);r.SetOrigin(C,V,K,$,H)}if(p(x,"setAlpha")){var j=c(x,"setAlpha.value",1),q=c(x,"setAlpha.step",0);r.SetAlpha(C,j,q)}if(p(x,"setDepth")){var Z=c(x,"setDepth.value",0),Q=c(x,"setDepth.step",0);r.SetDepth(C,Z,Q)}if(p(x,"setScrollFactor")){var at=c(x,"setScrollFactor.x",1),rt=c(x,"setScrollFactor.y",at),nt=c(x,"setScrollFactor.stepX",0),lt=c(x,"setScrollFactor.stepY",0);r.SetScrollFactor(C,at,rt,nt,lt)}var it=d(x,"hitArea",null),ot=d(x,"hitAreaCallback",null);it&&r.SetHitArea(C,it,ot);var st=d(x,"gridAlign",!1);return st&&r.GridAlign(C,st),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(x,b){if(this.runChildUpdate&&this.children.size!==0)for(var w=this.children.entries.slice(),T=0;T<w.length;T++){var S=w[T];S.active&&S.update(x,b)}},add:function(x,b){return b===void 0&&(b=!1),this.isFull()||(this.children.set(x),this.internalCreateCallback&&this.internalCreateCallback.call(this,x),this.createCallback&&this.createCallback.call(this,x),b&&(x.addToDisplayList(this.scene.sys.displayList),x.addToUpdateList()),x.on(a.DESTROY,this.remove,this)),this},addMultiple:function(x,b){if(b===void 0&&(b=!1),Array.isArray(x))for(var w=0;w<x.length;w++)this.add(x[w],b);return this},remove:function(x,b,w){return b===void 0&&(b=!1),w===void 0&&(w=!1),this.children.contains(x)?(this.children.delete(x),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,x),this.removeCallback&&this.removeCallback.call(this,x),x.off(a.DESTROY,this.remove,this),w?x.destroy():b&&(x.removeFromDisplayList(),x.removeFromUpdateList()),this):this},clear:function(x,b){x===void 0&&(x=!1),b===void 0&&(b=!1);for(var w=this.children,T=0;T<w.size;T++){var S=w.entries[T];S.off(a.DESTROY,this.remove,this),b?S.destroy():x&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(x){return this.children.contains(x)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(x,b,w,T){return l(this.children.entries,x,b,w,T)},getFirst:function(x,b,w,T,S,C,E){return this.getHandler(!0,1,x,b,w,T,S,C,E)},getFirstNth:function(x,b,w,T,S,C,E,M){return this.getHandler(!0,x,b,w,T,S,C,E,M)},getLast:function(x,b,w,T,S,C,E){return this.getHandler(!1,1,x,b,w,T,S,C,E)},getLastNth:function(x,b,w,T,S,C,E,M){return this.getHandler(!1,x,b,w,T,S,C,E,M)},getHandler:function(x,b,w,T,S,C,E,M,_){var O,k;w===void 0&&(w=!1),T===void 0&&(T=!1);var P=0,A=this.children.entries;if(x)for(k=0;k<A.length;k++)if((O=A[k]).active===w){if(++P===b)break}else O=null;else for(k=A.length-1;k>=0;k--)if((O=A[k]).active===w){if(++P===b)break}else O=null;return O?(typeof S=="number"&&(O.x=S),typeof C=="number"&&(O.y=C),O):T?this.create(S,C,E,M,_):null},get:function(x,b,w,T,S){return this.getFirst(!1,!0,x,b,w,T,S)},getFirstAlive:function(x,b,w,T,S,C){return this.getFirst(!0,x,b,w,T,S,C)},getFirstDead:function(x,b,w,T,S,C){return this.getFirst(!1,x,b,w,T,S,C)},playAnimation:function(x,b){return r.PlayAnimation(this.children.entries,x,b),this},isFull:function(){return this.maxSize!==-1&&this.children.size>=this.maxSize},countActive:function(x){x===void 0&&(x=!0);for(var b=0,w=0;w<this.children.size;w++)this.children.entries[w].active===x&&b++;return b},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var x=this.getTotalUsed();return(this.maxSize===-1?999999999999:this.maxSize)-x},setActive:function(x){return this.active=x,this},setName:function(x){return this.name=x,this},propertyValueSet:function(x,b,w,T,S){return r.PropertyValueSet(this.children.entries,x,b,w,T,S),this},propertyValueInc:function(x,b,w,T,S){return r.PropertyValueInc(this.children.entries,x,b,w,T,S),this},setX:function(x,b){return r.SetX(this.children.entries,x,b),this},setY:function(x,b){return r.SetY(this.children.entries,x,b),this},setXY:function(x,b,w,T){return r.SetXY(this.children.entries,x,b,w,T),this},incX:function(x,b){return r.IncX(this.children.entries,x,b),this},incY:function(x,b){return r.IncY(this.children.entries,x,b),this},incXY:function(x,b,w,T){return r.IncXY(this.children.entries,x,b,w,T),this},shiftPosition:function(x,b,w){return r.ShiftPosition(this.children.entries,x,b,w),this},angle:function(x,b){return r.Angle(this.children.entries,x,b),this},rotate:function(x,b){return r.Rotate(this.children.entries,x,b),this},rotateAround:function(x,b){return r.RotateAround(this.children.entries,x,b),this},rotateAroundDistance:function(x,b,w){return r.RotateAroundDistance(this.children.entries,x,b,w),this},setAlpha:function(x,b){return r.SetAlpha(this.children.entries,x,b),this},setTint:function(x,b,w,T){return r.SetTint(this.children.entries,x,b,w,T),this},setOrigin:function(x,b,w,T){return r.SetOrigin(this.children.entries,x,b,w,T),this},scaleX:function(x,b){return r.ScaleX(this.children.entries,x,b),this},scaleY:function(x,b){return r.ScaleY(this.children.entries,x,b),this},scaleXY:function(x,b,w,T){return r.ScaleXY(this.children.entries,x,b,w,T),this},setDepth:function(x,b){return r.SetDepth(this.children.entries,x,b),this},setBlendMode:function(x){return r.SetBlendMode(this.children.entries,x),this},setHitArea:function(x,b){return r.SetHitArea(this.children.entries,x,b),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(x){this.children.contains(x)&&x.setActive(!1)},killAndHide:function(x){this.children.contains(x)&&(x.setActive(!1),x.setVisible(!1))},setVisible:function(x,b,w){return r.SetVisible(this.children.entries,x,b,w),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(x,b){x===void 0&&(x=!1),b===void 0&&(b=!1),this.scene&&!this.ignoreDestroy&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(b,x),this.scene=void 0,this.children=void 0)}});s.exports=m},94975:(s,o,i)=>{var r=i(44603),h=i(26479);r.register("group",function(a){return new h(this.scene,null,a)})},3385:(s,o,i)=>{var r=i(26479);i(39429).register("group",function(h,a){return this.updateList.add(new r(this.scene,h,a))})},88571:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(59819),l=new r({Extends:a,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,u],initialize:function(d,c,p,f,v){a.call(this,d,"Image"),this._crop=this.resetCropObject(),this.setTexture(f,v),this.setPosition(c,p),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=l},40652:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i),o.batchSprite(i,i.frame,r,h)}},82459:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(88571);h.register("image",function(l,d){l===void 0&&(l={});var c=a(l,"key",null),p=a(l,"frame",null),f=new u(this.scene,0,0,c,p);return d!==void 0&&(l.add=d),r(this.scene,f,l),f})},2117:(s,o,i)=>{var r=i(88571);i(39429).register("image",function(h,a,u,l){return this.displayList.add(new r(this.scene,h,a,u,l))})},59819:(s,o,i)=>{var r,h;i(29747),r=i(99517),h=i(40652),s.exports={renderWebGL:r,renderCanvas:h}},99517:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i),this.pipeline.batchSprite(i,r,h)}},77856:(s,o,i)=>{var r={Events:i(51708),DisplayList:i(8050),GameObjectCreator:i(44603),GameObjectFactory:i(39429),UpdateList:i(45027),Components:i(31401),GetCalcMatrix:i(91296),BuildGameObject:i(25305),BuildGameObjectAnimation:i(13059),GameObject:i(95643),BitmapText:i(22186),Blitter:i(6107),Bob:i(46590),Container:i(31559),DOMElement:i(3069),DynamicBitmapText:i(2638),Extern:i(42421),Graphics:i(43831),Group:i(26479),Image:i(88571),Layer:i(93595),Particles:i(18404),PathFollower:i(1159),RenderTexture:i(591),RetroFont:i(196),Rope:i(77757),Sprite:i(68287),Text:i(50171),GetTextSize:i(14220),MeasureText:i(79557),TextStyle:i(35762),TileSprite:i(20839),Zone:i(41481),Video:i(18471),Shape:i(17803),Arc:i(23629),Curve:i(89),Ellipse:i(19921),Grid:i(30479),IsoBox:i(61475),IsoTriangle:i(16933),Line:i(57847),Polygon:i(24949),Rectangle:i(74561),Star:i(55911),Triangle:i(36931),Factories:{Blitter:i(12709),Container:i(24961),DOMElement:i(2611),DynamicBitmapText:i(72566),Extern:i(56315),Graphics:i(1201),Group:i(3385),Image:i(2117),Layer:i(20005),Particles:i(676),PathFollower:i(90145),RenderTexture:i(60505),Rope:i(96819),Sprite:i(46409),StaticBitmapText:i(34914),Text:i(68005),TileSprite:i(91681),Zone:i(84175),Video:i(89025),Arc:i(42563),Curve:i(40511),Ellipse:i(1543),Grid:i(34137),IsoBox:i(3933),IsoTriangle:i(49803),Line:i(2481),Polygon:i(64827),Rectangle:i(87959),Star:i(93697),Triangle:i(45245)},Creators:{Blitter:i(9403),Container:i(77143),DynamicBitmapText:i(11164),Graphics:i(87079),Group:i(94975),Image:i(82459),Layer:i(25179),Particles:i(92730),RenderTexture:i(34495),Rope:i(26209),Sprite:i(15567),StaticBitmapText:i(57336),Text:i(71259),TileSprite:i(14167),Zone:i(95261),Video:i(11511)}};r.Shader=i(20071),r.Mesh=i(4703),r.NineSlice=i(28103),r.PointLight=i(80321),r.Plane=i(33663),r.Factories.Shader=i(74177),r.Factories.Mesh=i(9225),r.Factories.NineSlice=i(47521),r.Factories.PointLight=i(71255),r.Factories.Plane=i(30985),r.Creators.Shader=i(54935),r.Creators.Mesh=i(20527),r.Creators.NineSlice=i(28279),r.Creators.PointLight=i(39829),r.Creators.Plane=i(56015),r.Light=i(41432),r.LightsManager=i(61356),r.LightsPlugin=i(88992),s.exports=r},93595:(s,o,i)=>{var r=i(10312),h=i(83419),a=i(31401),u=i(53774),l=i(45893),d=i(50792),c=i(51708),p=i(73162),f=i(33963),v=i(44594),g=i(19186),y=new h({Extends:p,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.PostPipeline,a.Visible,d,f],initialize:function(m,x){p.call(this,m),d.call(this),this.scene=m,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=m.sys,this.events=m.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),x&&this.add(x),m.sys.queueDepthSort()},setActive:function(m){return this.active=m,this},setName:function(m){return this.name=m,this},setState:function(m){return this.state=m,this},setDataEnabled:function(){return this.data||(this.data=new l(this)),this},setData:function(m,x){return this.data||(this.data=new l(this)),this.data.set(m,x),this},incData:function(m,x){return this.data||(this.data=new l(this)),this.data.inc(m,x),this},toggleData:function(m){return this.data||(this.data=new l(this)),this.data.toggle(m),this},getData:function(m){return this.data||(this.data=new l(this)),this.data.get(m)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return u(this)},willRender:function(m){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&m.id)},getIndexList:function(){for(var m=this,x=this.parentContainer,b=[];x&&(b.unshift(x.getIndex(m)),m=x,x.parentContainer);)x=x.parentContainer;return b.unshift(this.displayList.getIndex(m)),b},addChildCallback:function(m){var x=m.displayList;x&&x!==this&&m.removeFromDisplayList(),m.displayList||(this.queueDepthSort(),m.displayList=this,m.emit(c.ADDED_TO_SCENE,m,this.scene),this.events.emit(v.ADDED_TO_SCENE,m,this.scene))},removeChildCallback:function(m){this.queueDepthSort(),m.displayList=null,m.emit(c.REMOVED_FROM_SCENE,m,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,m,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(g(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(m,x){return m._depth-x._depth},getChildren:function(){return this.list},addToDisplayList:function(m){return m===void 0&&(m=this.scene.sys.displayList),this.displayList&&this.displayList!==m&&this.removeFromDisplayList(),m.exists(this)||(this.displayList=m,m.add(this,!0),m.queueDepthSort(),this.emit(c.ADDED_TO_SCENE,this,this.scene),m.events.emit(v.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var m=this.displayList||this.scene.sys.displayList;return m.exists(this)&&(m.remove(this,!0),m.queueDepthSort(),this.displayList=null,this.emit(c.REMOVED_FROM_SCENE,this,this.scene),m.events.emit(v.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(m){if(this.scene&&!this.ignoreDestroy){this.emit(c.DESTROY,this);for(var x=this.list;x.length;)x[0].destroy(m);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});s.exports=y},2956:s=>{s.exports=function(o,i,r){var h=i.list;if(h.length!==0){i.depthSort();var a=i.blendMode!==-1;a||o.setBlendMode(0);var u=i._alpha;i.mask&&i.mask.preRenderCanvas(o,null,r);for(var l=0;l<h.length;l++){var d=h[l];if(d.willRender(r)){var c=d.alpha;a||d.blendMode===o.currentBlendMode||o.setBlendMode(d.blendMode),d.setAlpha(c*u),d.renderCanvas(o,d,r),d.setAlpha(c)}}i.mask&&i.mask.postRenderCanvas(o)}}},25179:(s,o,i)=>{var r=i(25305),h=i(93595),a=i(44603),u=i(23568);a.register("layer",function(l,d){l===void 0&&(l={});var c=u(l,"children",null),p=new h(this.scene,c);return d!==void 0&&(l.add=d),r(this.scene,p,l),p})},20005:(s,o,i)=>{var r=i(93595);i(39429).register("layer",function(h){return this.displayList.add(new r(this.scene,h))})},33963:(s,o,i)=>{var r,h;i(29747),r=i(15869),h=i(2956),s.exports={renderWebGL:r,renderCanvas:h}},15869:s=>{s.exports=function(o,i,r){var h=i.list,a=h.length;if(a!==0){i.depthSort(),o.pipelines.preBatch(i);var u=i.blendMode!==-1;u||o.setBlendMode(0);for(var l=i.alpha,d=0;d<a;d++){var c=h[d];if(c.willRender(r)){var p,f,v,g;if(c.alphaTopLeft!==void 0)p=c.alphaTopLeft,f=c.alphaTopRight,v=c.alphaBottomLeft,g=c.alphaBottomRight;else{var y=c.alpha;p=y,f=y,v=y,g=y}u||c.blendMode===o.currentBlendMode||o.setBlendMode(c.blendMode);var m=c.mask;m&&m.preRenderWebGL(o,c,r);var x=c.type;x!==o.currentType&&(o.newType=!0,o.currentType=x),o.nextTypeMatch=d<a-1&&h[d+1].type===o.currentType,c.setAlpha(p*l,f*l,v*l,g*l),c.renderWebGL(o,c,r),c.setAlpha(p,f,v,g),m&&m.postRenderWebGL(o,r),o.newType=!1}}o.pipelines.postBatch(i)}}},41432:(s,o,i)=>{var r=i(96503),h=i(83419),a=i(31401),u=i(51767),l=i(70554),d=new h({Extends:r,Mixins:[a.Origin,a.ScrollFactor,a.Visible],initialize:function(c,p,f,v,g,y,m){r.call(this,c,p,f),this.color=new u(v,g,y),this.intensity=m,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(f)},displayWidth:{get:function(){return this.diameter},set:function(c){this.diameter=c}},displayHeight:{get:function(){return this.diameter},set:function(c){this.diameter=c}},width:{get:function(){return this.diameter},set:function(c){this.diameter=c}},height:{get:function(){return this.diameter},set:function(c){this.diameter=c}},willRender:function(c){return!(d.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&c.id)},setColor:function(c){var p=l.getFloatsFromUintRGB(c);return this.color.set(p[0],p[1],p[2]),this},setIntensity:function(c){return this.intensity=c,this},setRadius:function(c){return this.radius=c,this}});d.RENDER_MASK=15,s.exports=d},61356:(s,o,i)=>{var r=i(81491),h=i(83419),a=i(20339),u=i(41432),l=i(80321),d=i(51767),c=i(19133),p=i(19186),f=i(70554),v=new h({initialize:function(){this.lights=[],this.ambientColor=new d(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(g,y,m,x,b,w){return this.systems.displayList.add(new l(this.scene,g,y,m,x,b,w))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(g){for(var y=this.lights,m=g.worldView,x=[],b=0;b<y.length;b++){var w=y[b];w.willRender(g)&&r(w,m)&&x.push({light:w,distance:a(w.x,w.y,m.centerX,m.centerY)})}return x.length>this.maxLights&&(p(x,this.sortByDistance),x=x.slice(0,this.maxLights)),this.visibleLights=x.length,x},sortByDistance:function(g,y){return g.distance>=y.distance},setAmbientColor:function(g){var y=f.getFloatsFromUintRGB(g);return this.ambientColor.set(y[0],y[1],y[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(g,y,m,x,b){g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=128),x===void 0&&(x=16777215),b===void 0&&(b=1);var w=f.getFloatsFromUintRGB(x),T=new u(g,y,m,w[0],w[1],w[2],b);return this.lights.push(T),T},removeLight:function(g){var y=this.lights.indexOf(g);return y>=0&&c(this.lights,y),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});s.exports=v},88992:(s,o,i)=>{var r=i(83419),h=i(61356),a=i(37277),u=i(44594),l=new r({Extends:h,initialize:function(d){this.scene=d,this.systems=d.sys,d.sys.settings.isBooted||d.sys.events.once(u.BOOT,this.boot,this),h.call(this)},boot:function(){var d=this.systems.events;d.on(u.SHUTDOWN,this.shutdown,this),d.on(u.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",l,"lights"),s.exports=l},4703:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(39506),u=i(83997),l=i(95643),d=i(34684),c=i(92515),p=i(91296),f=i(37867),v=i(29807),g=i(43396),y=i(19186),m=i(25836),x=i(39318),b=new r({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,v],initialize:function(w,T,S,C,E,M,_,O,k,P,A,L){T===void 0&&(T=0),S===void 0&&(S=0),C===void 0&&(C="__WHITE"),l.call(this,w,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new m,this.modelScale=new m(1,1,1),this.modelRotation=new m,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new f,this.viewPosition=new m,this.viewMatrix=new f,this.projectionMatrix=new f,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var D=w.sys.renderer;this.setPosition(T,S),this.setTexture(C,E),this.setSize(D.width,D.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(D.width,D.height),M&&this.addVertices(M,_,O,k,P,A,L)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(w){return this.viewPosition.addScale(m.LEFT,w),this.dirtyCache[10]=1,this},panY:function(w){return this.viewPosition.y+=m.DOWN.y*w,this.dirtyCache[10]=1,this},panZ:function(w){return this.viewPosition.z+=w,this.dirtyCache[10]=1,this},setPerspective:function(w,T,S,C,E){return S===void 0&&(S=45),C===void 0&&(C=.01),E===void 0&&(E=1e3),this.fov=S,this.projectionMatrix.perspective(a(S),w/T,C,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(w,T,S,C){return w===void 0&&(w=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),S===void 0&&(S=-1e3),C===void 0&&(C=1e3),this.fov=0,this.projectionMatrix.ortho(-w,w,-T,T,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(w){w.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(w,T,S,C,E,M,_,O,k){var P,A=this.scene.sys.cache.obj.get(w);return A&&(P=d(A,this,T,S,C,E,M,_,O,k)),P&&P.verts.length!==0||console.warn("Mesh.addVerticesFromObj data empty:",w),this},sortByDepth:function(w,T){return w.depth-T.depth},depthSort:function(){return y(this.faces,this.sortByDepth),this},addVertex:function(w,T,S,C,E,M,_){var O=new x(w,T,S,C,E,M,_);return this.vertices.push(O),O},addFace:function(w,T,S){var C=new u(w,T,S);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(w,T,S,C,E,M,_){var O=c(w,T,S,C,E,M,_);return O?(this.faces=this.faces.concat(O.faces),this.vertices=this.vertices.concat(O.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(w){return this.faces[w]},hasFaceAt:function(w,T,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=p(this,S).calc,E=this.faces,M=0;M<E.length;M++)if(E[M].contains(w,T,C))return!0;return!1},getFaceAt:function(w,T,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=p(this,S).calc,E=this.faces,M=[],_=0;_<E.length;_++){var O=E[_];O.contains(w,T,C)&&M.push(O)}return y(M,this.sortByDepth)},setDebug:function(w,T){return this.debugGraphic=w,this.debugCallback=w||T?T||this.renderDebug:null,this},isDirty:function(){var w=this.modelPosition,T=this.modelRotation,S=this.modelScale,C=this.dirtyCache,E=w.x,M=w.y,_=w.z,O=T.x,k=T.y,P=T.z,A=S.x,L=S.y,D=S.z,F=this.getFaceCount(),X=C[0],z=C[1],Y=C[2],R=C[3],B=C[4],I=C[5],G=C[6],N=C[7],W=C[8],U=C[9];return C[0]=E,C[1]=M,C[2]=_,C[3]=O,C[4]=k,C[5]=P,C[6]=A,C[7]=L,C[8]=D,C[9]=F,X!==E||z!==M||Y!==_||R!==O||B!==k||I!==P||G!==A||N!==L||W!==D||U!==F},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var w=this.dirtyCache;if(this.ignoreDirtyCache||w[10]||this.isDirty()){var T=this.width,S=this.height,C=this.viewMatrix,E=this.viewPosition;w[10]&&(C.identity(),C.translate(E),C.invert(),w[10]=0);var M=this.transformMatrix;M.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var _=E.z,O=this.faces,k=0;k<O.length;k++)O[k].transformCoordinatesLocal(M,T,S,_);this.depthSort()}},renderDebug:function(w,T){for(var S=w.debugGraphic,C=0;C<T.length;C++){var E=T[C],M=E.vertex1.tx,_=E.vertex1.ty,O=E.vertex2.tx,k=E.vertex2.ty,P=E.vertex3.tx,A=E.vertex3.ty;S.strokeTriangle(M,_,O,k,P,A)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(w){w===void 0&&(w={});var T=(function(S,C,E){for(var M=this.faces,_=0;_<M.length;_++)if(M[_].contains(C,E))return!0;return!1}).bind(this);return this.scene.sys.input.enable(this,w,T),this},setTint:function(w){w===void 0&&(w=16777215);for(var T=this.vertices,S=0;S<T.length;S++)T[S].color=w;return this},uvScroll:function(w,T){for(var S=this.faces,C=0;C<S.length;C++)S[C].scrollUV(w,T);return this},uvScale:function(w,T){for(var S=this.faces,C=0;C<S.length;C++)S[C].scaleUV(w,T);return this},tint:{set:function(w){this.setTint(w)}},rotateX:{get:function(){return g(this.modelRotation.x)},set:function(w){this.modelRotation.x=a(w)}},rotateY:{get:function(){return g(this.modelRotation.y)},set:function(w){this.modelRotation.y=a(w)}},rotateZ:{get:function(){return g(this.modelRotation.z)},set:function(w){this.modelRotation.z=a(w)}}});s.exports=b},36488:s=>{s.exports=function(){}},20527:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(35154),l=i(4703);h.register("mesh",function(d,c){d===void 0&&(d={});var p=a(d,"key",null),f=a(d,"frame",null),v=u(d,"vertices",[]),g=u(d,"uvs",[]),y=u(d,"indicies",[]),m=u(d,"containsZ",!1),x=u(d,"normals",[]),b=u(d,"colors",16777215),w=u(d,"alphas",1),T=new l(this.scene,0,0,p,f,v,g,y,m,x,b,w);return c!==void 0&&(d.add=c),r(this.scene,T,d),T})},9225:(s,o,i)=>{var r=i(4703);i(39429).register("mesh",function(h,a,u,l,d,c,p,f,v,g,y){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p,f,v,g,y))})},29807:(s,o,i)=>{var r,h;i(29747),r=i(48833),h=i(36488),s.exports={renderWebGL:r,renderCanvas:h}},48833:(s,o,i)=>{var r=i(91296);s.exports=function(h,a,u,l){var d=a.faces,c=d.length;if(c!==0){u.addToRenderList(a);var p=h.pipelines.set(a.pipeline,a),f=r(a,u,l).calc;h.pipelines.preBatch(a);for(var v=p.setGameObject(a),g=p.vertexViewF32,y=p.vertexViewU32,m=p.vertexCount*p.currentShader.vertexComponentCount-1,x=a.tintFill,b=[],w=a.debugCallback,T=f.a,S=f.b,C=f.c,E=f.d,M=f.e,_=f.f,O=a.viewPosition.z,k=a.hideCCW,P=u.roundPixels,A=u.alpha*a.alpha,L=0,D=0;D<c;D++){var F=d[D];F.isInView(u,k,O,A,T,S,C,E,M,_,P)&&(p.shouldFlush(3)&&(p.flush(),v=p.setGameObject(a),m=0),m=F.load(g,y,m,v,x),L++,p.vertexCount+=3,p.currentBatch.count=p.vertexCount-p.currentBatch.start,w&&b.push(F))}a.totalFrame+=L,w&&w.call(a,a,b),h.pipelines.postBatch(a)}}},28103:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(78023),l=i(39318),d=new r({Extends:a,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Texture,h.Transform,h.Visible,u],initialize:function(c,p,f,v,g,y,m,x,b,w,T){a.call(this,c,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var S=c.textures.getFrame(v,g);this.is3Slice=!w&&!T,S.scale9&&(this.is3Slice=S.is3Slice);for(var C=this.is3Slice?18:54,E=0;E<C;E++)this.vertices.push(new l);this.setPosition(p,f),this.setTexture(v,g),this.setSlices(y,m,x,b,w,T,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(c,p,f,v,g,y,m){f===void 0&&(f=10),v===void 0&&(v=10),g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=!1);var x=this.frame,b=!1;if(this.is3Slice&&m&&g!==0&&y!==0&&(b=!0),b)console.warn("Cannot change 9 slice to 3 slice");else{if(x.scale9&&!m){var w=x.data.scale9Borders,T=w.x,S=w.y;f=T,v=x.width-w.w-T,g=S,y=x.height-w.h-S,c===void 0&&(c=x.width),p===void 0&&(p=x.height)}else c===void 0&&(c=256),p===void 0&&(p=256);this._width=c,this._height=p,this.leftWidth=f,this.rightWidth=v,this.topHeight=g,this.bottomHeight=y,this.is3Slice&&(p=x.height,this._height=p,this.topHeight=p,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var c=this.leftWidth,p=this.rightWidth,f=this.topHeight,v=this.bottomHeight,g=this.frame.width,y=this.frame.height;this.updateQuadUVs(0,0,0,c/g,f/y),this.updateQuadUVs(6,c/g,0,1-p/g,f/y),this.updateQuadUVs(12,1-p/g,0,1,f/y),this.is3Slice||(this.updateQuadUVs(18,0,f/y,c/g,1-v/y),this.updateQuadUVs(24,c/g,f/y,1-p/g,1-v/y),this.updateQuadUVs(30,1-p/g,f/y,1,1-v/y),this.updateQuadUVs(36,0,1-v/y,c/g,1),this.updateQuadUVs(42,c/g,1-v/y,1-p/g,1),this.updateQuadUVs(48,1-p/g,1-v/y,1,1))},updateVertices:function(){var c=this.leftWidth,p=this.rightWidth,f=this.topHeight,v=this.bottomHeight,g=this.width,y=this.height;this.updateQuad(0,-.5,.5,c/g-.5,.5-f/y),this.updateQuad(6,c/g-.5,.5,.5-p/g,.5-f/y),this.updateQuad(12,.5-p/g,.5,.5,.5-f/y),this.is3Slice||(this.updateQuad(18,-.5,.5-f/y,c/g-.5,v/y-.5),this.updateQuad(24,c/g-.5,.5-f/y,.5-p/g,v/y-.5),this.updateQuad(30,.5-p/g,.5-f/y,.5,v/y-.5),this.updateQuad(36,-.5,v/y-.5,c/g-.5,-.5),this.updateQuad(42,c/g-.5,v/y-.5,.5-p/g,-.5),this.updateQuad(48,.5-p/g,v/y-.5,.5,-.5))},updateQuad:function(c,p,f,v,g){var y=this.width,m=this.height,x=this.originX,b=this.originY,w=this.vertices;w[c+0].resize(p,f,y,m,x,b),w[c+1].resize(p,g,y,m,x,b),w[c+2].resize(v,f,y,m,x,b),w[c+3].resize(p,g,y,m,x,b),w[c+4].resize(v,g,y,m,x,b),w[c+5].resize(v,f,y,m,x,b)},updateQuadUVs:function(c,p,f,v,g){var y=this.vertices,m=this.frame,x=m.u0,b=m.v0,w=m.u1,T=m.v1;if(x!==0||w!==1){var S=w-x;p=x+p*S,v=x+v*S}if(b!==0||T!==1){var C=T-b;f=b+f*C,g=b+g*C}y[c+0].setUVs(p,f),y[c+1].setUVs(p,g),y[c+2].setUVs(v,f),y[c+3].setUVs(p,g),y[c+4].setUVs(v,g),y[c+5].setUVs(v,f)},clearTint:function(){return this.setTint(16777215),this},setTint:function(c){return c===void 0&&(c=16777215),this.tint=c,this.tintFill=!1,this},setTintFill:function(c){return this.setTint(c),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(c){this._width=Math.max(c,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(c){this.is3Slice||(this._height=Math.max(c,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(c){this.scaleX=c/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(c){this.scaleY=c/this.height}},setSize:function(c,p){this.width=c,this.height=p,this.updateDisplayOrigin();var f=this.input;return f&&!f.customHitArea&&(f.hitArea.width=this.width,f.hitArea.height=this.height),this},setDisplaySize:function(c,p){return this.displayWidth=c,this.displayHeight=p,this},originX:{get:function(){return this._originX},set:function(c){this._originX=c,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(c){this._originY=c,this.updateVertices()}},setOrigin:function(c,p){return c===void 0&&(c=.5),p===void 0&&(p=c),this._originX=c,this._originY=p,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var c=this.frame.height;this._height=c,this.topHeight=c,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});s.exports=d},28279:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(35154),l=i(28103);h.register("nineslice",function(d,c){d===void 0&&(d={});var p=a(d,"key",null),f=a(d,"frame",null),v=u(d,"width",256),g=u(d,"height",256),y=u(d,"leftWidth",10),m=u(d,"rightWidth",10),x=u(d,"topHeight",0),b=u(d,"bottomHeight",0),w=new l(this.scene,0,0,p,f,v,g,y,m,x,b);return c!==void 0&&(d.add=c),r(this.scene,w,d),w})},47521:(s,o,i)=>{var r=i(28103);i(39429).register("nineslice",function(h,a,u,l,d,c,p,f,v,g){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p,f,v,g))})},78023:(s,o,i)=>{var r,h=i(29747);r=i(52230),s.exports={renderWebGL:r,renderCanvas:h}},52230:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){var c=u.vertices,p=c.length;if(p!==0){l.addToRenderList(u);var f=a.pipelines.set(u.pipeline,u),v=r(u,l,d,!1).calc;a.pipelines.preBatch(u);var g=f.setGameObject(u),y=f.vertexViewF32,m=f.vertexViewU32,x=f.vertexCount*f.currentShader.vertexComponentCount-1,b=l.roundPixels,w=u.tintFill,T=l.alpha*u.alpha,S=h.getTintAppendFloatAlpha(u.tint,T),C=f.vertexAvailable(),E=-1;C<p&&(E=C);for(var M=0;M<p;M++){var _=c[M];M===E&&(f.flush(),g=f.setGameObject(u),x=0),y[++x]=v.getXRound(_.vx,_.vy,b),y[++x]=v.getYRound(_.vx,_.vy,b),y[++x]=_.u,y[++x]=_.v,y[++x]=g,y[++x]=w,m[++x]=S,f.vertexCount++,f.currentBatch.count=f.vertexCount-f.currentBatch.start}a.pipelines.postBatch(u)}}},76472:(s,o,i)=>{var r=i(83419),h=i(44777),a=i(37589),u=i(6113),l=i(91389),d=i(90664),c=new r({Extends:h,initialize:function(p){h.call(this,p,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var p=this.propertyValue,f=p,v=this.defaultEmit,g=this.defaultUpdate;if(this.method===9){this.start=p[0],this.ease=u("Linear"),this.interpolation=l("linear"),v=this.easedValueEmit,g=this.easeValueUpdate,f=p[0],this.active=!0;for(var y=0;y<p.length;y++){var m=d(p[y]);this.r.push(m.r),this.g.push(m.g),this.b.push(m.b)}}return this.onEmit=v,this.onUpdate=g,this.current=f,this},setEase:function(p){this.easeName=p,this.ease=u(p)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(p,f,v){var g=this.ease(v),y=this.interpolation(this.r,g),m=this.interpolation(this.g,g),x=this.interpolation(this.b,g),b=a(y,m,x);return this.current=b,b}});s.exports=c},44777:(s,o,i)=>{var r=i(30976),h=i(45319),a=i(83419),u=i(99472),l=i(6113),d=i(95540),c=i(91389),p=i(77720),f=i(15994),v=new a({initialize:function(g,y,m){m===void 0&&(m=!1),this.propertyKey=g,this.propertyValue=y,this.defaultValue=y,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=m,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(g,y){g===void 0&&(g={}),y&&(this.propertyKey=y),this.propertyValue=d(g,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(g){var y;switch(this.method){case 1:case 3:case 8:y=g;break;case 2:this.propertyValue.indexOf(g)>=0&&(y=g);break;case 4:var m=(this.end-this.start)/this.steps;y=p(g,m),this.counter=y;break;case 5:case 6:case 7:y=h(g,this.start,this.end);break;case 9:y=this.start[0]}return this.current=y,this},getMethod:function(){var g=this.propertyValue;if(g===null)return 0;var y=typeof g;if(y==="number")return 1;if(Array.isArray(g))return 2;if(y==="function")return 3;if(y==="object"){if(this.hasBoth(g,"start","end"))return this.has(g,"steps")?4:5;if(this.hasBoth(g,"min","max"))return 6;if(this.has(g,"random"))return 7;if(this.hasEither(g,"onEmit","onUpdate"))return 8;if(this.hasEither(g,"values","interpolation"))return 9}return 0},setMethods:function(){var g=this.propertyValue,y=g,m=this.defaultEmit,x=this.defaultUpdate;switch(this.method){case 1:m=this.staticValueEmit;break;case 2:m=this.randomStaticValueEmit,y=g[0];break;case 3:this._onEmit=g,m=this.proxyEmit;break;case 4:this.start=g.start,this.end=g.end,this.steps=g.steps,this.counter=this.start,this.yoyo=!!this.has(g,"yoyo")&&g.yoyo,this.direction=0,m=this.steppedEmit,y=this.start;break;case 5:this.start=g.start,this.end=g.end;var b=this.has(g,"ease")?g.ease:"Linear";this.ease=l(b,g.easeParams),m=this.has(g,"random")&&g.random?this.randomRangedValueEmit:this.easedValueEmit,x=this.easeValueUpdate,y=this.start;break;case 6:this.start=g.min,this.end=g.max,m=this.has(g,"int")&&g.int?this.randomRangedIntEmit:this.randomRangedValueEmit,y=this.start;break;case 7:var w=g.random;Array.isArray(w)&&(this.start=w[0],this.end=w[1]),m=this.randomRangedIntEmit,y=this.start;break;case 8:this._onEmit=this.has(g,"onEmit")?g.onEmit:this.defaultEmit,this._onUpdate=this.has(g,"onUpdate")?g.onUpdate:this.defaultUpdate,m=this.proxyEmit,x=this.proxyUpdate;break;case 9:this.start=g.values;var T=this.has(g,"ease")?g.ease:"Linear";this.ease=l(T,g.easeParams),this.interpolation=c(g.interpolation),m=this.easedValueEmit,x=this.easeValueUpdate,y=this.start[0]}return this.onEmit=m,this.onUpdate=x,this.current=y,this},has:function(g,y){return g.hasOwnProperty(y)},hasBoth:function(g,y,m){return g.hasOwnProperty(y)&&g.hasOwnProperty(m)},hasEither:function(g,y,m){return g.hasOwnProperty(y)||g.hasOwnProperty(m)},defaultEmit:function(g,y,m){return m},defaultUpdate:function(g,y,m,x){return x},proxyEmit:function(g,y,m){var x=this._onEmit(g,y,m);return this.current=x,x},proxyUpdate:function(g,y,m,x){var b=this._onUpdate(g,y,m,x);return this.current=b,b},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var g=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[g],this.current},randomRangedValueEmit:function(g,y){var m=u(this.start,this.end);return g&&g.data[y]&&(g.data[y].min=m,g.data[y].max=this.end),this.current=m,m},randomRangedIntEmit:function(g,y){var m=r(this.start,this.end);return g&&g.data[y]&&(g.data[y].min=m,g.data[y].max=this.end),this.current=m,m},steppedEmit:function(){var g,y=this.counter,m=y,x=(this.end-this.start)/this.steps;return this.yoyo?(this.direction===0?(m+=x)>=this.end&&(g=m-this.end,m=this.end-g,this.direction=1):(m-=x)<=this.start&&(g=this.start-m,m=this.start+g,this.direction=0),this.counter=m):this.counter=f(m+x,this.start,this.end),this.current=y,y},easedValueEmit:function(g,y){if(g&&g.data[y]){var m=g.data[y];m.min=this.start,m.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(g,y,m){var x,b=g.data[y],w=this.ease(m);return x=this.interpolation?this.interpolation(this.start,w):(b.max-b.min)*w+b.min,this.current=x,x},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});s.exports=v},24502:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(20286),u=new r({Extends:a,initialize:function(l,d,c,p,f){if(typeof l=="object"){var v=l;l=h(v,"x",0),d=h(v,"y",0),c=h(v,"power",0),p=h(v,"epsilon",100),f=h(v,"gravity",50)}else l===void 0&&(l=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=100),f===void 0&&(f=50);a.call(this,l,d,!0),this._gravity=f,this._power=c*f,this._epsilon=p*p},update:function(l,d){var c=this.x-l.x,p=this.y-l.y,f=c*c+p*p;if(f!==0){var v=Math.sqrt(f);f<this._epsilon&&(f=this._epsilon);var g=this._power*d/(f*v)*100;l.velocityX+=c*g,l.velocityY+=p*g}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var d=this.power;this._gravity=l,this.power=d}}});s.exports=u},56480:(s,o,i)=>{var r=i(9674),h=i(45319),a=i(83419),u=i(39506),l=i(87841),d=i(11520),c=i(26099),p=new a({initialize:function(f){this.emitter=f,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new c,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=f.scene,this.anims=new r(this),this.bounds=new l},emit:function(f,v,g,y,m,x){return this.emitter.emit(f,v,g,y,m,x)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(f,v){f===void 0&&(f=0),v===void 0&&(v=0),this.x=f,this.y=v},fire:function(f,v){var g=this.emitter,y=g.ops,m=g.getAnim();if(m?this.anims.play(m):(this.frame=g.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(g.getEmitZone(this),f===void 0?this.x+=y.x.onEmit(this,"x"):y.x.steps>0?this.x+=f+y.x.onEmit(this,"x"):this.x+=f,v===void 0?this.y+=y.y.onEmit(this,"y"):y.y.steps>0?this.y+=v+y.y.onEmit(this,"y"):this.y+=v,this.life=y.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=y.delay.onEmit(this,"delay"),this.holdCurrent=y.hold.onEmit(this,"hold"),this.scaleX=y.scaleX.onEmit(this,"scaleX"),this.scaleY=y.scaleY.active?y.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=y.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),g.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&g.getDeathZone(this))return this.lifeCurrent=0,!1;var x=y.speedX.onEmit(this,"speedX"),b=y.speedY.active?y.speedY.onEmit(this,"speedY"):x;if(g.radial){var w=u(y.angle.onEmit(this,"angle"));this.velocityX=Math.cos(w)*Math.abs(x),this.velocityY=Math.sin(w)*Math.abs(b)}else if(g.moveTo){var T=y.moveToX.onEmit(this,"moveToX"),S=y.moveToY.onEmit(this,"moveToY"),C=this.life/1e3;this.velocityX=(T-this.x)/C,this.velocityY=(S-this.y)/C}else this.velocityX=x,this.velocityY=b;return g.acceleration&&(this.accelerationX=y.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=y.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=y.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=y.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=y.bounce.onEmit(this,"bounce"),this.alpha=y.alpha.onEmit(this,"alpha"),y.color.active?this.tint=y.color.onEmit(this,"tint"):this.tint=y.tint.onEmit(this,"tint"),!0},update:function(f,v,g){if(this.lifeCurrent<=0)return!(this.holdCurrent>0)||(this.holdCurrent-=f,this.holdCurrent<=0);if(this.delayCurrent>0)return this.delayCurrent-=f,!1;this.anims.update(0,f);var y=this.emitter,m=y.ops,x=1-this.lifeCurrent/this.life;if(this.lifeT=x,this.x=m.x.onUpdate(this,"x",x,this.x),this.y=m.y.onUpdate(this,"y",x,this.y),y.moveTo){var b=m.moveToX.onUpdate(this,"moveToX",x,y.moveToX),w=m.moveToY.onUpdate(this,"moveToY",x,y.moveToY),T=this.lifeCurrent/1e3;this.velocityX=(b-this.x)/T,this.velocityY=(w-this.y)/T}return this.computeVelocity(y,f,v,g,x),this.scaleX=m.scaleX.onUpdate(this,"scaleX",x,this.scaleX),m.scaleY.active?this.scaleY=m.scaleY.onUpdate(this,"scaleY",x,this.scaleY):this.scaleY=this.scaleX,this.angle=m.rotate.onUpdate(this,"rotate",x,this.angle),this.rotation=u(this.angle),y.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=h(m.alpha.onUpdate(this,"alpha",x,this.alpha),0,1),m.color.active?this.tint=m.color.onUpdate(this,"color",x,this.tint):this.tint=m.tint.onUpdate(this,"tint",x,this.tint),this.lifeCurrent-=f,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(f,v,g,y,m){var x=f.ops,b=this.velocityX,w=this.velocityY,T=x.accelerationX.onUpdate(this,"accelerationX",m,this.accelerationX),S=x.accelerationY.onUpdate(this,"accelerationY",m,this.accelerationY),C=x.maxVelocityX.onUpdate(this,"maxVelocityX",m,this.maxVelocityX),E=x.maxVelocityY.onUpdate(this,"maxVelocityY",m,this.maxVelocityY);this.bounce=x.bounce.onUpdate(this,"bounce",m,this.bounce),b+=f.gravityX*g+T*g,w+=f.gravityY*g+S*g,b=h(b,-C,C),w=h(w,-E,E),this.velocityX=b,this.velocityY=w,this.x+=b*g,this.y+=w*g,f.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var M=0;M<y.length;M++){var _=y[M];_.active&&_.update(this,v,g,m)}},setSizeToFrame:function(){},getBounds:function(f){f===void 0&&(f=this.emitter.getWorldTransformMatrix());var v=Math.abs(f.scaleX)*this.scaleX,g=Math.abs(f.scaleY)*this.scaleY,y=this.x,m=this.y,x=this.rotation,b=this.frame.width*v/2,w=this.frame.height*g/2,T=this.bounds,S=new c(y-b,m-w),C=new c(y+b,m-w),E=new c(y-b,m+w),M=new c(y+b,m+w);return x!==0&&(d(S,y,m,x),d(C,y,m,x),d(E,y,m,x),d(M,y,m,x)),f.transformPoint(S.x,S.y,S),f.transformPoint(C.x,C.y,C),f.transformPoint(E.x,E.y,E),f.transformPoint(M.x,M.y,M),T.x=Math.min(S.x,C.x,E.x,M.x),T.y=Math.min(S.y,C.y,E.y,M.y),T.width=Math.max(S.x,C.x,E.x,M.x)-T.x,T.height=Math.max(S.y,C.y,E.y,M.y)-T.y,T},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});s.exports=p},69601:(s,o,i)=>{var r=i(83419),h=i(20286),a=i(87841),u=new r({Extends:h,initialize:function(l,d,c,p,f,v,g,y){f===void 0&&(f=!0),v===void 0&&(v=!0),g===void 0&&(g=!0),y===void 0&&(y=!0),h.call(this,l,d,!0),this.bounds=new a(l,d,c,p),this.collideLeft=f,this.collideRight=v,this.collideTop=g,this.collideBottom=y},update:function(l){var d=this.bounds,c=-l.bounce,p=l.worldPosition;p.x<d.x&&this.collideLeft?(l.x+=d.x-p.x,l.velocityX*=c):p.x>d.right&&this.collideRight&&(l.x-=p.x-d.right,l.velocityX*=c),p.y<d.y&&this.collideTop?(l.y+=d.y-p.y,l.velocityY*=c):p.y>d.bottom&&this.collideBottom&&(l.y-=p.y-d.bottom,l.velocityY*=c)}});s.exports=u},31600:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(53774),u=i(43459),l=i(26388),d=i(19909),c=i(76472),p=i(44777),f=i(20696),v=i(95643),g=i(95540),y=i(26546),m=i(24502),x=i(1985),b=i(97022),w=i(86091),T=i(73162),S=i(20074),C=i(56480),E=i(68875),M=i(87841),_=i(59996),O=i(72905),k=i(90668),P=i(19186),A=i(61340),L=i(26099),D=i(15994),F=i(69601),X=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],z=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],Y=new r({Extends:v,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Texture,h.Transform,h.Visible,k],initialize:function(R,B,I,G,N){v.call(this,R,"ParticleEmitter"),this.particleClass=C,this.ops={accelerationX:new p("accelerationX",0),accelerationY:new p("accelerationY",0),alpha:new p("alpha",1),angle:new p("angle",{min:0,max:360},!0),bounce:new p("bounce",0),color:new c("color"),delay:new p("delay",0,!0),hold:new p("hold",0,!0),lifespan:new p("lifespan",1e3,!0),maxVelocityX:new p("maxVelocityX",1e4),maxVelocityY:new p("maxVelocityY",1e4),moveToX:new p("moveToX",0),moveToY:new p("moveToY",0),quantity:new p("quantity",1,!0),rotate:new p("rotate",0),scaleX:new p("scaleX",1),scaleY:new p("scaleY",1),speedX:new p("speedX",0,!0),speedY:new p("speedY",0,!0),tint:new p("tint",16777215),x:new p("x",0),y:new p("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new L,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new A,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new T(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(B,I),this.setTexture(G),N&&this.setConfig(N)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(R){if(!R)return this;var B=0,I="",G=this.ops;for(B=0;B<z.length;B++)G[I=z[B]].loadConfig(R);for(B=0;B<X.length;B++)b(R,I=X[B])&&(this[I]=g(R,I));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,b(R,"speed")&&(G.speedX.loadConfig(R,"speed"),G.speedY.active=!1),(x(R,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),b(R,"scale")&&(G.scaleX.loadConfig(R,"scale"),G.scaleY.active=!1),b(R,"callbackScope")){var N=g(R,"callbackScope",null);this.emitCallbackScope=N,this.deathCallbackScope=N}if(b(R,"emitZone")&&this.addEmitZone(R.emitZone),b(R,"deathZone")&&this.addDeathZone(R.deathZone),b(R,"bounds")){var W=this.addParticleBounds(R.bounds);W.collideLeft=g(R,"collideLeft",!0),W.collideRight=g(R,"collideRight",!0),W.collideTop=g(R,"collideTop",!0),W.collideBottom=g(R,"collideBottom",!0)}return b(R,"followOffset")&&this.followOffset.setFromObject(g(R,"followOffset",0)),b(R,"texture")&&this.setTexture(R.texture),b(R,"frame")?this.setEmitterFrame(R.frame):b(R,"anim")&&this.setAnim(R.anim),b(R,"reserve")&&this.reserve(R.reserve),b(R,"advance")&&this.fastForward(R.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(f.START,this),this},toJSON:function(){var R=a(this),B=0,I="";for(B=0;B<X.length;B++)R[I=X[B]]=this[I];var G=this.ops;for(B=0;B<z.length;B++)G[I=z[B]]&&(R[I]=G[I].toJSON());return G.speedY.active||(delete R.speedX,R.speed=G.speedX.toJSON()),this.scaleX===this.scaleY&&(delete R.scaleX,delete R.scaleY,R.scale=G.scaleX.toJSON()),R},resetCounters:function(R,B){var I=this.counters;I.fill(0),I[0]=R,B&&(I[5]=1)},startFollow:function(R,B,I,G){return B===void 0&&(B=0),I===void 0&&(I=0),G===void 0&&(G=!1),this.follow=R,this.followOffset.set(B,I),this.trackVisible=G,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var R,B=this.frames,I=B.length;return I===1?R=B[0]:this.randomFrame?R=y(B):(R=B[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===I&&(this.currentFrame=0))),this.texture.get(R)},setEmitterFrame:function(R,B,I){B===void 0&&(B=!0),I===void 0&&(I=1),this.randomFrame=B,this.frameQuantity=I,this.currentFrame=0;var G=typeof R;if(this.frames.length=0,Array.isArray(R))this.frames=this.frames.concat(R);else if(G==="string"||G==="number")this.frames.push(R);else if(G==="object"){var N=R;(R=g(N,"frames",null))&&(this.frames=this.frames.concat(R));var W=g(N,"cycle",!1);this.randomFrame=!W,this.frameQuantity=g(N,"quantity",I)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var R=this.anims,B=R.length;if(B===0)return null;if(B===1)return R[0];if(this.randomAnim)return y(R);var I=R[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=D(this.currentAnim+1,0,B)),I},setAnim:function(R,B,I){B===void 0&&(B=!0),I===void 0&&(I=1),this.randomAnim=B,this.animQuantity=I,this.currentAnim=0;var G=typeof R;if(this.anims.length=0,Array.isArray(R))this.anims=this.anims.concat(R);else if(G==="string")this.anims.push(R);else if(G==="object"){var N=R;(R=g(N,"anims",null))&&(this.anims=this.anims.concat(R));var W=g(N,"cycle",!1);this.randomAnim=!W,this.animQuantity=g(N,"quantity",I)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(R){return R===void 0&&(R=!0),this.radial=R,this},addParticleBounds:function(R,B,I,G,N,W,U,V){if(typeof R=="object"){var K=R;R=K.x,B=K.y,I=b(K,"w")?K.w:K.width,G=b(K,"h")?K.h:K.height}return this.addParticleProcessor(new F(R,B,I,G,N,W,U,V))},setParticleSpeed:function(R,B){return B===void 0&&(B=R),this.ops.speedX.onChange(R),R===B?this.ops.speedY.active=!1:this.ops.speedY.onChange(B),this.radial=!0,this},setParticleScale:function(R,B){return R===void 0&&(R=1),B===void 0&&(B=R),this.ops.scaleX.onChange(R),this.ops.scaleY.onChange(B),this},setParticleGravity:function(R,B){return this.gravityX=R,this.gravityY=B,this},setParticleAlpha:function(R){return this.ops.alpha.onChange(R),this},setParticleTint:function(R){return this.ops.tint.onChange(R),this},setEmitterAngle:function(R){return this.ops.angle.onChange(R),this},setParticleLifespan:function(R){return this.ops.lifespan.onChange(R),this},setQuantity:function(R){return this.quantity=R,this},setFrequency:function(R,B){return this.frequency=R,this.flowCounter=R>0?R:0,B&&(this.quantity=B),this},addDeathZone:function(R){var B;Array.isArray(R)||(R=[R]);for(var I=[],G=0;G<R.length;G++)if((B=R[G])instanceof l)I.push(B);else if(typeof B.contains=="function")B=new l(B,!0),I.push(B);else{var N=g(B,"type","onEnter"),W=g(B,"source",null);W&&typeof W.contains=="function"&&(B=new l(W,N==="onEnter"),I.push(B))}return this.deathZones=this.deathZones.concat(I),I},removeDeathZone:function(R){return O(this.deathZones,R),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(R){var B;Array.isArray(R)||(R=[R]);for(var I=[],G=0;G<R.length;G++)if((B=R[G])instanceof E||B instanceof d)I.push(B);else{var N=g(B,"source",null);if(N){var W=g(B,"type","random");if(W==="random"&&typeof N.getRandomPoint=="function")B=new E(N),I.push(B);else if(W==="edge"&&typeof N.getPoints=="function"){var U=g(B,"quantity",1),V=g(B,"stepRate",0),K=g(B,"yoyo",!1),$=g(B,"seamless",!0),H=g(B,"total",-1);B=new d(N,U,V,K,$,H),I.push(B)}}}return this.emitZones=this.emitZones.concat(I),I},removeEmitZone:function(R){return O(this.emitZones,R),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(R){var B=this.emitZones,I=B.length;if(I!==0){var G=B[this.zoneIndex];G.getPoint(R),G.total>-1&&(this.zoneTotal++,this.zoneTotal===G.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===I&&(this.zoneIndex=0)))}},getDeathZone:function(R){for(var B=this.deathZones,I=0;I<B.length;I++){var G=B[I];if(G.willKill(R))return this.emit(f.DEATH_ZONE,this,R,G),!0}return!1},setEmitZone:function(R){var B;return(B=isFinite(R)?R:this.emitZones.indexOf(R))>=0&&(this.zoneIndex=B),this},addParticleProcessor:function(R){return this.processors.exists(R)||(R.emitter&&R.emitter.removeParticleProcessor(R),this.processors.add(R),R.emitter=this),R},removeParticleProcessor:function(R){return this.processors.exists(R)&&(this.processors.remove(R,!0),R.emitter=null),R},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(R){return this.addParticleProcessor(new m(R))},reserve:function(R){var B=this.dead;if(this.maxParticles>0){var I=this.getParticleCount();I+R>this.maxParticles&&(R=this.maxParticles-(I+R))}for(var G=0;G<R;G++)B.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles||this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(R,B){return R===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof R=="function"&&(this.emitCallback=R,B&&(this.emitCallbackScope=B)),this},onParticleDeath:function(R,B){return R===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof R=="function"&&(this.deathCallback=R,B&&(this.deathCallbackScope=B)),this},killAll:function(){for(var R=this.dead,B=this.alive;B.length>0;)R.push(B.pop());return this},forEachAlive:function(R,B){for(var I=this.alive,G=I.length,N=0;N<G;N++)R.call(B,I[N],this);return this},forEachDead:function(R,B){for(var I=this.dead,G=I.length,N=0;N<G;N++)R.call(B,I[N],this);return this},start:function(R,B){return R===void 0&&(R=0),this.emitting||(R>0&&this.fastForward(R),this.emitting=!0,this.resetCounters(this.frequency,!0),B!==void 0&&(this.duration=Math.abs(B)),this.emit(f.START,this)),this},stop:function(R){return R===void 0&&(R=!1),this.emitting&&(this.emitting=!1,R&&this.killAll(),this.emit(f.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(R,B){return R===void 0&&(R=""),B===void 0&&(B=this.true),this.sortProperty=R,this.sortOrderAsc=B,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(R){return R=this.sortProperty!==""?this.depthSortCallback:null,this.sortCallback=R,this},depthSort:function(){return P(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(R,B){var I=this.sortProperty;return this.sortOrderAsc?R[I]-B[I]:B[I]-R[I]},flow:function(R,B,I){return B===void 0&&(B=1),this.emitting=!1,this.frequency=R,this.quantity=B,I!==void 0&&(this.stopAfter=I),this.start()},explode:function(R,B,I){this.frequency=-1,this.resetCounters(-1,!0);var G=this.emitParticle(R,B,I);return this.emit(f.EXPLODE,this,G),G},emitParticleAt:function(R,B,I){return this.emitParticle(I,R,B)},emitParticle:function(R,B,I){if(!this.atLimit()){R===void 0&&(R=this.ops.quantity.onEmit());for(var G=this.dead,N=this.stopAfter,W=this.follow?this.follow.x+this.followOffset.x:B,U=this.follow?this.follow.y+this.followOffset.y:I,V=0;V<R;V++){var K=G.pop();if(K||(K=new this.particleClass(this)),K.fire(W,U)?(this.particleBringToTop?this.alive.push(K):this.alive.unshift(K),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,K,this)):this.dead.push(K),N>0&&(this.stopCounter++,this.stopCounter>=N)||this.atLimit())break}return K}},fastForward:function(R,B){B===void 0&&(B=1e3/60);var I=0;for(this.skipping=!0;I<Math.abs(R);)this.preUpdate(0,B),I+=B;return this.skipping=!1,this},preUpdate:function(R,B){var I=(B*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var G=this.getProcessors(),N=this.alive,W=this.dead,U=0,V=[],K=N.length;for(U=0;U<K;U++){var $=N[U];$.update(B,I,G)&&V.push({index:U,particle:$})}if((K=V.length)>0){var H=this.deathCallback,j=this.deathCallbackScope;for(U=K-1;U>=0;U--){var q=V[U];N.splice(q.index,1),W.push(q.particle),H&&H.call(j,q.particle),q.particle.setPosition()}}if(this.emitting||this.skipping){if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=B;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=B,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())}else this.completeFlag===1&&N.length===0&&(this.completeFlag=0,this.emit(f.COMPLETE,this))},overlap:function(R){for(var B=this.getWorldTransformMatrix(),I=this.alive,G=I.length,N=[],W=0;W<G;W++){var U=I[W];_(R,U.getBounds(B))&&N.push(U)}return N},getBounds:function(R,B,I,G){R===void 0&&(R=0),B===void 0&&(B=0),I===void 0&&(I=1e3/60),G===void 0&&(G=new M);var N,W,U=this.getWorldTransformMatrix(),V=this.alive,K=!1;if(G.setTo(0,0,0,0),B>0){var $=0;for(this.skipping=!0;$<Math.abs(B);){for(this.preUpdate(0,I),N=0;N<V.length;N++)W=V[N].getBounds(U),K?S(G,W):(K=!0,u(W,G));$+=I}this.skipping=!1}else for(N=0;N<V.length;N++)W=V[N].getBounds(U),K?S(G,W):(K=!0,u(W,G));return R>0&&w(G,R,R),G},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(R){this.ops.x.onChange(R)}},particleY:{get:function(){return this.ops.y.current},set:function(R){this.ops.y.onChange(R)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(R){this.ops.accelerationX.onChange(R)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(R){this.ops.accelerationY.onChange(R)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(R){this.ops.maxVelocityX.onChange(R)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(R){this.ops.maxVelocityY.onChange(R)}},speed:{get:function(){return this.ops.speedX.current},set:function(R){this.ops.speedX.onChange(R),this.ops.speedY.onChange(R)}},speedX:{get:function(){return this.ops.speedX.current},set:function(R){this.ops.speedX.onChange(R)}},speedY:{get:function(){return this.ops.speedY.current},set:function(R){this.ops.speedY.onChange(R)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(R){this.ops.moveToX.onChange(R)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(R){this.ops.moveToY.onChange(R)}},bounce:{get:function(){return this.ops.bounce.current},set:function(R){this.ops.bounce.onChange(R)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(R){this.ops.scaleX.onChange(R)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(R){this.ops.scaleY.onChange(R)}},particleColor:{get:function(){return this.ops.color.current},set:function(R){this.ops.color.onChange(R)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(R){this.ops.color.setEase(R)}},particleTint:{get:function(){return this.ops.tint.current},set:function(R){this.ops.tint.onChange(R)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(R){this.ops.alpha.onChange(R)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(R){this.ops.lifespan.onChange(R)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(R){this.ops.angle.onChange(R)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(R){this.ops.rotate.onChange(R)}},quantity:{get:function(){return this.ops.quantity.current},set:function(R){this.ops.quantity.onChange(R)}},delay:{get:function(){return this.ops.delay.current},set:function(R){this.ops.delay.onChange(R)}},hold:{get:function(){return this.ops.hold.current},set:function(R){this.ops.hold.onChange(R)}},flowCounter:{get:function(){return this.counters[0]},set:function(R){this.counters[0]=R}},frameCounter:{get:function(){return this.counters[1]},set:function(R){this.counters[1]=R}},animCounter:{get:function(){return this.counters[2]},set:function(R){this.counters[2]=R}},elapsed:{get:function(){return this.counters[3]},set:function(R){this.counters[3]=R}},stopCounter:{get:function(){return this.counters[4]},set:function(R){this.counters[4]=R}},completeFlag:{get:function(){return this.counters[5]},set:function(R){this.counters[5]=R}},zoneIndex:{get:function(){return this.counters[6]},set:function(R){this.counters[6]=R}},zoneTotal:{get:function(){return this.counters[7]},set:function(R){this.counters[7]=R}},currentFrame:{get:function(){return this.counters[8]},set:function(R){this.counters[8]=R}},currentAnim:{get:function(){return this.counters[9]},set:function(R){this.counters[9]=R}},preDestroy:function(){var R;this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var B=this.ops;for(R=0;R<z.length;R++)B[z[R]].destroy();for(R=0;R<this.alive.length;R++)this.alive[R].destroy();for(R=0;R<this.dead.length;R++)this.dead[R].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});s.exports=Y},9871:(s,o,i)=>{var r=i(59996),h=i(61340),a=new h,u=new h,l=new h,d=new h;s.exports=function(c,p,f,v){var g=a,y=u,m=l,x=d;v?(x.loadIdentity(),x.multiply(v),x.translate(p.x,p.y),x.rotate(p.rotation),x.scale(p.scaleX,p.scaleY)):x.applyITRS(p.x,p.y,p.rotation,p.scaleX,p.scaleY);var b=c.currentContext,w=f.roundPixels,T=f.alpha,S=p.alpha,C=p.alive,E=C.length,M=p.viewBounds;if(p.visible&&E!==0&&(!M||r(M,f.worldView))){p.sortCallback&&p.depthSort(),f.addToRenderList(p);var _=p.scrollFactorX,O=p.scrollFactorY;b.save(),b.globalCompositeOperation=c.blendModes[p.blendMode];for(var k=0;k<E;k++){var P=C[k],A=P.alpha*S*T;if(!(A<=0||P.scaleX===0||P.scaleY===0)){m.applyITRS(P.x,P.y,P.rotation,P.scaleX,P.scaleY),g.copyFrom(f.matrix),g.multiplyWithOffset(x,-f.scrollX*_,-f.scrollY*O),m.e=P.x,m.f=P.y,g.multiply(m,y);var L=P.frame,D=L.canvasData;if(D.width>0&&D.height>0){var F=-L.halfWidth,X=-L.halfHeight;b.globalAlpha=A,b.save(),y.setToContext(b),w&&(F=Math.round(F),X=Math.round(X)),b.imageSmoothingEnabled=!L.source.scaleMode,b.drawImage(L.source.image,D.x,D.y,D.width,D.height,F,X,D.width,D.height),b.restore()}}}b.restore()}}},92730:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(95540),l=i(31600);h.register("particles",function(d,c){d===void 0&&(d={});var p=a(d,"key",null),f=u(d,"config",null),v=new l(this.scene,0,0,p);return c!==void 0&&(d.add=c),r(this.scene,v,d),f&&v.setConfig(f),v})},676:(s,o,i)=>{var r=i(39429),h=i(31600);r.register("particles",function(a,u,l,d){return a!==void 0&&typeof a=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new h(this.scene,a,u,l,d))})},90668:(s,o,i)=>{var r,h;i(29747),r=i(21188),h=i(9871),s.exports={renderWebGL:r,renderCanvas:h}},21188:(s,o,i)=>{var r=i(59996),h=i(61340),a=i(70554),u=new h,l=new h,d=new h,c=new h;s.exports=function(p,f,v,g){var y=p.pipelines.set(f.pipeline),m=u,x=l,b=d,w=c;g?(w.loadIdentity(),w.multiply(g),w.translate(f.x,f.y),w.rotate(f.rotation),w.scale(f.scaleX,f.scaleY)):w.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var T=a.getTintAppendFloatAlpha,S=v.alpha,C=f.alpha;p.pipelines.preBatch(f);var E=f.alive,M=E.length,_=f.viewBounds;if(M!==0&&(!_||r(_,v.worldView))){f.sortCallback&&f.depthSort(),v.addToRenderList(f),m.copyFrom(v.matrix),m.multiplyWithOffset(w,-v.scrollX*f.scrollFactorX,-v.scrollY*f.scrollFactorY),p.setBlendMode(f.blendMode),f.mask&&(f.mask.preRenderWebGL(p,f,v),p.pipelines.set(f.pipeline));for(var O,k,P=f.tintFill,A=0;A<M;A++){var L=E[A],D=L.alpha*C*S;if(!(D<=0||L.scaleX===0||L.scaleY===0)){b.applyITRS(L.x,L.y,L.rotation,L.scaleX,L.scaleY),b.e=L.x,b.f=L.y,m.multiply(b,x);var F=L.frame;F.glTexture!==k&&(k=F.glTexture,O=y.setGameObject(f,F));var X=-F.halfWidth,z=-F.halfHeight,Y=x.setQuad(X,z,X+F.width,z+F.height),R=T(L.tint,D);y.shouldFlush(6)&&(y.flush(),O=y.setGameObject(f,F)),y.batchQuad(f,Y[0],Y[1],Y[2],Y[3],Y[4],Y[5],Y[6],Y[7],F.u0,F.v0,F.u1,F.v1,R,R,R,R,P,k,O)}}f.mask&&f.mask.postRenderWebGL(p,v),p.pipelines.postBatch(f)}}},20286:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u){h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=!0),this.emitter,this.x=h,this.y=a,this.active=u},update:function(){},destroy:function(){this.emitter=null}});s.exports=r},9774:s=>{s.exports="complete"},812:s=>{s.exports="deathzone"},30522:s=>{s.exports="explode"},96695:s=>{s.exports="start"},18677:s=>{s.exports="stop"},20696:(s,o,i)=>{s.exports={COMPLETE:i(9774),DEATH_ZONE:i(812),EXPLODE:i(30522),START:i(96695),STOP:i(18677)}},18404:(s,o,i)=>{s.exports={EmitterColorOp:i(76472),EmitterOp:i(44777),Events:i(20696),GravityWell:i(24502),Particle:i(56480),ParticleBounds:i(69601),ParticleEmitter:i(31600),ParticleProcessor:i(20286),Zones:i(21024)}},26388:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a){this.source=h,this.killOnEnter=a},willKill:function(h){var a=h.worldPosition,u=this.source.contains(a.x,a.y);return u&&this.killOnEnter||!u&&!this.killOnEnter}});s.exports=r},19909:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l,d,c){l===void 0&&(l=!1),d===void 0&&(d=!0),c===void 0&&(c=-1),this.source=h,this.points=[],this.quantity=a,this.stepRate=u,this.yoyo=l,this.counter=-1,this.seamless=d,this._length=0,this._direction=0,this.total=c,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var h=this.points[0],a=this.points[this.points.length-1];h.x===a.x&&h.y===a.y&&this.points.pop()}var u=this._length;return this._length=this.points.length,this._length<u&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(h){return this.source=h,this.updateSource()},getPoint:function(h){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(h.x=a.x,h.y=a.y)}});s.exports=r},68875:(s,o,i)=>{var r=i(83419),h=i(26099),a=new r({initialize:function(u){this.source=u,this._tempVec=new h,this.total=-1},getPoint:function(u){var l=this._tempVec;this.source.getRandomPoint(l),u.x=l.x,u.y=l.y}});s.exports=a},21024:(s,o,i)=>{s.exports={DeathZone:i(26388),EdgeZone:i(19909),RandomZone:i(68875)}},1159:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(68287),u=new r({Extends:a,Mixins:[h.PathFollower],initialize:function(l,d,c,p,f,v){a.call(this,l,c,p,f,v),this.path=d},preUpdate:function(l,d){this.anims.update(l,d),this.pathUpdate(l)}});s.exports=u},90145:(s,o,i)=>{var r=i(39429),h=i(1159);r.register("follower",function(a,u,l,d,c){var p=new h(this.scene,a,u,l,d,c);return this.displayList.add(p),this.updateList.add(p),p})},33663:(s,o,i)=>{var r=i(9674),h=i(83419),a=i(48803),u=i(90664),l=i(4703),d=i(45650),c=new h({Extends:l,initialize:function(p,f,v,g,y,m,x,b){g||(g="__DEFAULT"),l.call(this,p,f,v,g,y),this.type="Plane",this.anims=new r(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(m,x,b),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(p,f,v){p===void 0&&(p=8),f===void 0&&(f=8),v===void 0&&(v=!1);var g=!1;return v&&(g=!0),this.gridWidth=p,this.gridHeight=f,this.isTiled=v,this.clear(),a({mesh:this,widthSegments:p,heightSegments:f,isOrtho:!1,tile:v,flipY:g}),this},setSizeToFrame:function(p){p===void 0&&(p=!0);var f=this.frame;if(this.setPerspective(this.width/f.width,this.height/f.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!p)return this;var v,g,y=this.gridWidth,m=this.gridHeight,x=this.vertices,b=f.u0,w=f.u1,T=f.v0,S=f.v1,C=0;if(this.isTiled)for(T=f.v1,S=f.v0,g=0;g<m;g++)for(v=0;v<y;v++)x[C++].setUVs(b,S),x[C++].setUVs(b,T),x[C++].setUVs(w,S),x[C++].setUVs(b,T),x[C++].setUVs(w,T),x[C++].setUVs(w,S);else{var E=y+1,M=m+1,_=w-b,O=S-T,k=[];for(g=0;g<M;g++)for(v=0;v<E;v++){var P=b+_*(v/y),A=T+O*(g/m);k.push(P,A)}for(g=0;g<m;g++)for(v=0;v<y;v++){var L=2*(v+E*g),D=2*(v+E*(g+1)),F=2*(v+1+E*(g+1)),X=2*(v+1+E*g);x[C++].setUVs(k[L],k[L+1]),x[C++].setUVs(k[D],k[D+1]),x[C++].setUVs(k[X],k[X+1]),x[C++].setUVs(k[D],k[D+1]),x[C++].setUVs(k[F],k[F+1]),x[C++].setUVs(k[X],k[X+1])}}return this},setViewHeight:function(p){p===void 0&&(p=this.frame.height);var f=this.fov*(Math.PI/180);this.viewPosition.z=this.height/p/Math.tan(f/2),this.dirtyCache[10]=1},createCheckerboard:function(p,f,v,g,y){p===void 0&&(p=16777215),f===void 0&&(f=255),v===void 0&&(v=255),g===void 0&&(g=255),y===void 0&&(y=128);for(var m=u(p),x=u(f),b=[],w=0;w<16;w++)for(var T=0;T<16;T++)w<8&&T<8||w>7&&T>7?b.push(m.r,m.g,m.b,v):b.push(x.r,x.g,x.b,g);var S=this.scene.sys.textures.addUint8Array(d(),new Uint8Array(b),16,16);return this.removeCheckerboard(),this.setTexture(S),this.setSizeToFrame(),this.setViewHeight(y),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(p,f){return this.anims.play(p,f)},playReverse:function(p,f){return this.anims.playReverse(p,f)},playAfterDelay:function(p,f){return this.anims.playAfterDelay(p,f)},playAfterRepeat:function(p,f){return this.anims.playAfterRepeat(p,f)},stop:function(){return this.anims.stop()},stopAfterDelay:function(p){return this.anims.stopAfterDelay(p)},stopAfterRepeat:function(p){return this.anims.stopAfterRepeat(p)},stopOnFrame:function(p){return this.anims.stopOnFrame(p)},preUpdate:function(p,f){l.prototype.preUpdate.call(this,p,f),this.anims.update(p,f)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});s.exports=c},56015:(s,o,i)=>{var r=i(25305),h=i(13059),a=i(44603),u=i(23568),l=i(35154),d=i(33663);a.register("plane",function(c,p){c===void 0&&(c={});var f=u(c,"key",null),v=u(c,"frame",null),g=l(c,"width",8),y=l(c,"height",8),m=l(c,"tile",!1),x=new d(this.scene,0,0,f,v,g,y,m);p!==void 0&&(c.add=p);var b=l(c,"checkerboard",null);if(b){var w=l(b,"color1",16777215),T=l(b,"color2",255),S=l(b,"alpha1",255),C=l(b,"alpha2",255),E=l(b,"height",128);x.createCheckerboard(w,T,S,C,E)}return r(this.scene,x,c),h(x,c),x})},30985:(s,o,i)=>{var r=i(33663);i(39429).register("plane",function(h,a,u,l,d,c,p){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p))})},80321:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(30100),l=i(36060),d=i(67277),c=new r({Extends:a,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Transform,h.Visible,d],initialize:function(p,f,v,g,y,m,x){g===void 0&&(g=16777215),y===void 0&&(y=128),m===void 0&&(m=1),x===void 0&&(x=.1),a.call(this,p,"PointLight"),this.initPipeline(l.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(f,v),this.color=u(g),this.intensity=m,this.attenuation=x,this.width=2*y,this.height=2*y,this._radius=y},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this.width=2*p,this.height=2*p}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});s.exports=c},39829:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(80321);h.register("pointlight",function(l,d){l===void 0&&(l={});var c=a(l,"color",16777215),p=a(l,"radius",128),f=a(l,"intensity",1),v=a(l,"attenuation",.1),g=new u(this.scene,0,0,c,p,f,v);return d!==void 0&&(l.add=d),r(this.scene,g,l),g})},71255:(s,o,i)=>{var r=i(39429),h=i(80321);r.register("pointlight",function(a,u,l,d,c,p){return this.displayList.add(new h(this.scene,a,u,l,d,c,p))})},67277:(s,o,i)=>{var r,h=i(29747);r=i(57787),s.exports={renderWebGL:r,renderCanvas:h}},57787:(s,o,i)=>{var r=i(91296);s.exports=function(h,a,u,l){u.addToRenderList(a);var d=h.pipelines.set(a.pipeline),c=r(a,u,l).calc,p=a.width,f=a.height,v=-a._radius,g=-a._radius,y=v+p,m=g+f,x=c.getX(0,0),b=c.getY(0,0),w=c.getX(v,g),T=c.getY(v,g),S=c.getX(v,m),C=c.getY(v,m),E=c.getX(y,m),M=c.getY(y,m),_=c.getX(y,g),O=c.getY(y,g);h.pipelines.preBatch(a),d.batchPointLight(a,u,w,T,S,C,E,M,_,O,x,b),h.pipelines.postBatch(a)}},591:(s,o,i)=>{var r=i(83419),h=i(81320),a=i(88571),u=new r({Extends:a,initialize:function(l,d,c,p,f){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=32),f===void 0&&(f=32);var v=new h(l.sys.textures,"",p,f);a.call(this,l,d,c,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(l,d){this.width=l,this.height=d,this.texture.setSize(l,d),this.updateDisplayOrigin();var c=this.input;return c&&!c.customHitArea&&(c.hitArea.width=l,c.hitArea.height=d),this},resize:function(l,d){return this.setSize(l,d),this},saveTexture:function(l){var d=this.texture;return d.key=l,d.manager.addDynamicTexture(d)&&(this._saved=!0),d},fill:function(l,d,c,p,f,v){return this.texture.fill(l,d,c,p,f,v),this},clear:function(){return this.texture.clear(),this},stamp:function(l,d,c,p,f){return this.texture.stamp(l,d,c,p,f),this},erase:function(l,d,c){return this.texture.erase(l,d,c),this},draw:function(l,d,c,p,f){return this.texture.draw(l,d,c,p,f),this},drawFrame:function(l,d,c,p,f,v){return this.texture.drawFrame(l,d,c,p,f,v),this},repeat:function(l,d,c,p,f,v,g,y,m){return this.texture.repeat(l,d,c,p,f,v,g,y,m),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(l,d,c,p,f){return this.texture.batchDraw(l,d,c,p,f),this},batchDrawFrame:function(l,d,c,p,f,v){return this.texture.batchDrawFrame(l,d,c,p,f,v),this},endDraw:function(l){return this.texture.endDraw(l),this},snapshotArea:function(l,d,c,p,f,v,g){return this.texture.snapshotArea(l,d,c,p,f,v,g),this},snapshot:function(l,d,c){return this.snapshotArea(0,0,this.width,this.height,l,d,c)},snapshotPixel:function(l,d,c){return this.snapshotArea(l,d,1,1,c,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});s.exports=u},34495:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(591);h.register("renderTexture",function(l,d){l===void 0&&(l={});var c=a(l,"x",0),p=a(l,"y",0),f=a(l,"width",32),v=a(l,"height",32),g=new u(this.scene,c,p,f,v);return d!==void 0&&(l.add=d),r(this.scene,g,l),g})},60505:(s,o,i)=>{var r=i(39429),h=i(591);r.register("renderTexture",function(a,u,l,d){return this.displayList.add(new h(this.scene,a,u,l,d))})},77757:(s,o,i)=>{var r=i(9674),h=i(83419),a=i(31401),u=i(95643),l=i(36060),d=i(38745),c=i(26099),p=new h({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.PostPipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,d],initialize:function(f,v,g,y,m,x,b,w,T){y===void 0&&(y="__DEFAULT"),x===void 0&&(x=2),b===void 0&&(b=!0),u.call(this,f,"Rope"),this.anims=new r(this),this.points=x,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=y==="__DEFAULT",this.dirty=!1,this.horizontal=b,this._flipX=!1,this._flipY=!1,this._perp=new c,this.debugCallback=null,this.debugGraphic=null,this.setTexture(y,m),this.setPosition(v,g),this.setSizeToFrame(),this.initPipeline(l.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(x)&&this.resizeArrays(x.length),this.setPoints(x,w,T),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(f,v){var g=this.anims.currentFrame;this.anims.update(f,v),this.anims.currentFrame!==g&&(this.updateUVs(),this.updateVertices())},play:function(f,v,g){return this.anims.play(f,v,g),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(f,v,g){return f===void 0&&(f=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(f,v,g))},setVertical:function(f,v,g){return f===void 0&&(f=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(f,v,g)):this},setTintFill:function(f){return f===void 0&&(f=!1),this.tintFill=f,this},setAlphas:function(f,v){var g=this.points.length;if(g<1)return this;var y,m=this.alphas;f===void 0?f=[1]:Array.isArray(f)||v!==void 0||(f=[f]);var x=0;if(v!==void 0)for(y=0;y<g;y++)m[x=2*y]=f,m[x+1]=v;else if(f.length===g)for(y=0;y<g;y++)m[x=2*y]=f[y],m[x+1]=f[y];else{var b=f[0];for(y=0;y<g;y++)x=2*y,f.length>x&&(b=f[x]),m[x]=b,f.length>x+1&&(b=f[x+1]),m[x+1]=b}return this},setColors:function(f){var v=this.points.length;if(v<1)return this;var g,y=this.colors;f===void 0?f=[16777215]:Array.isArray(f)||(f=[f]);var m=0;if(f.length===v)for(g=0;g<v;g++)y[m=2*g]=f[g],y[m+1]=f[g];else{var x=f[0];for(g=0;g<v;g++)m=2*g,f.length>m&&(x=f[m]),y[m]=x,f.length>m+1&&(x=f[m+1]),y[m+1]=x}return this},setPoints:function(f,v,g){if(f===void 0&&(f=2),typeof f=="number"){var y,m,x,b=f;if(b<2&&(b=2),f=[],this.horizontal)for(x=-this.frame.halfWidth,m=this.frame.width/(b-1),y=0;y<b;y++)f.push({x:x+y*m,y:0});else for(x=-this.frame.halfHeight,m=this.frame.height/(b-1),y=0;y<b;y++)f.push({x:0,y:x+y*m})}var w=f.length,T=this.points.length;return w<1?(console.warn("Rope: Not enough points given"),this):(w===1&&(f.unshift({x:0,y:0}),w++),T!==w&&this.resizeArrays(w),this.dirty=!0,this.points=f,this.updateUVs(),v!=null&&this.setColors(v),g!=null&&this.setAlphas(g),this)},updateUVs:function(){for(var f=this.uv,v=this.points.length,g=this.frame.u0,y=this.frame.v0,m=this.frame.u1,x=this.frame.v1,b=(m-g)/(v-1),w=(x-y)/(v-1),T=0;T<v;T++){var S,C,E,M,_=4*T;this.horizontal?(this._flipX?(S=m-T*b,E=m-T*b):(S=g+T*b,E=g+T*b),this._flipY?(C=x,M=y):(C=y,M=x)):(this._flipX?(S=g,E=m):(S=m,E=g),this._flipY?(C=x-T*w,M=x-T*w):(C=y+T*w,M=y+T*w)),f[_+0]=S,f[_+1]=C,f[_+2]=E,f[_+3]=M}return this},resizeArrays:function(f){var v=this.colors,g=this.alphas;this.vertices=new Float32Array(4*f),this.uv=new Float32Array(4*f),v=new Uint32Array(2*f),g=new Float32Array(2*f);for(var y=0;y<2*f;y++)v[y]=16777215,g[y]=1;return this.colors=v,this.alphas=g,this.dirty=!0,this},updateVertices:function(){var f=this._perp,v=this.points,g=this.vertices,y=v.length;if(this.dirty=!1,!(y<1)){for(var m,x=v[0],b=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,w=0;w<y;w++){var T=v[w],S=4*w;m=w<y-1?v[w+1]:T,f.x=m.y-x.y,f.y=-(m.x-x.x);var C=f.length();f.x/=C,f.y/=C,f.x*=b,f.y*=b,g[S]=T.x+f.x,g[S+1]=T.y+f.y,g[S+2]=T.x-f.x,g[S+3]=T.y-f.y,x=T}return this}},setDebug:function(f,v){return this.debugGraphic=f,this.debugCallback=f||v?v||this.renderDebugVerts:null,this},renderDebugVerts:function(f,v,g){var y=f.debugGraphic,m=g[0],x=g[1],b=g[2],w=g[3];y.lineBetween(m,x,b,w);for(var T=4;T<v;T+=4){var S=g[T+0],C=g[T+1],E=g[T+2],M=g[T+3];y.lineBetween(m,x,S,C),y.lineBetween(b,w,E,M),y.lineBetween(b,w,S,C),y.lineBetween(S,C,E,M),m=S,x=C,b=E,w=M}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(f){return this._flipX=f,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(f){return this._flipY=f,this.updateUVs()}}});s.exports=p},95262:s=>{s.exports=function(){}},26209:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(35154),l=i(77757);h.register("rope",function(d,c){d===void 0&&(d={});var p=a(d,"key",null),f=a(d,"frame",null),v=a(d,"horizontal",!0),g=u(d,"points",void 0),y=u(d,"colors",void 0),m=u(d,"alphas",void 0),x=new l(this.scene,0,0,p,f,g,v,y,m);return c!==void 0&&(d.add=c),r(this.scene,x,d),x})},96819:(s,o,i)=>{var r=i(77757);i(39429).register("rope",function(h,a,u,l,d,c,p,f){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p,f))})},38745:(s,o,i)=>{var r,h;i(29747),r=i(20439),h=i(95262),s.exports={renderWebGL:r,renderCanvas:h}},20439:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.pipelines.set(u.pipeline,u),p=r(u,l,d).calc,f=u.vertices,v=u.uv,g=u.colors,y=u.alphas,m=u.alpha,x=h.getTintAppendFloatAlpha,b=l.roundPixels,w=f.length,T=Math.floor(.5*w);c.flush(),a.pipelines.preBatch(u);var S=c.setGameObject(u),C=c.vertexViewF32,E=c.vertexViewU32,M=c.vertexCount*c.currentShader.vertexComponentCount-1,_=0,O=u.tintFill;u.dirty&&u.updateVertices();for(var k=u.debugCallback,P=[],A=0;A<w;A+=2){var L=f[A+0],D=f[A+1],F=L*p.a+D*p.c+p.e,X=L*p.b+D*p.d+p.f;b&&(F=Math.round(F),X=Math.round(X)),C[++M]=F,C[++M]=X,C[++M]=v[A+0],C[++M]=v[A+1],C[++M]=S,C[++M]=O,E[++M]=x(g[_],l.alpha*(y[_]*m)),_++,k&&(P[A+0]=F,P[A+1]=X)}k&&k.call(u,u,w,P),c.vertexCount+=T,c.currentBatch.count=c.vertexCount-c.currentBatch.start,a.pipelines.postBatch(u)}},20071:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(95540),l=i(79291),d=i(61622),c=i(25479),p=i(61340),f=i(95428),v=i(92503),g=new r({Extends:a,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,c],initialize:function(y,m,x,b,w,T,S,C){x===void 0&&(x=0),b===void 0&&(b=0),w===void 0&&(w=128),T===void 0&&(T=128),a.call(this,y,"Shader"),this.blendMode=-1,this.shader;var E=y.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(x,b),this.setSize(w,T),this.setOrigin(.5,.5),this.setShader(m,S,C),this.renderer.on(v.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(y){return!!this.renderToTexture||!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&y.id)},setRenderToTexture:function(y,m){if(!this.renderToTexture){var x=this.width,b=this.height,w=this.renderer;this.glTexture=w.createTextureFromSource(null,x,b,0),this.framebuffer=w.createFramebuffer(x,b,this.glTexture,!1),this._rendererWidth=x,this._rendererHeight=b,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),y&&(this.texture=this.scene.sys.textures.addGLTexture(y,this.glTexture))}return this.shader&&(w.pipelines.clear(),this.load(),this.flush(),w.pipelines.rebind()),this},setShader:function(y,m,x){if(this.renderer.contextLost)return this._deferSetShader={key:y,textures:m,textureData:x},this;if(m===void 0&&(m=[]),typeof y=="string"){var b=this.scene.sys.cache.shader;if(!b.has(y))return console.warn("Shader missing: "+y),this;this.shader=b.get(y)}else this.shader=y;var w=this.gl,T=this.renderer;this.program&&T.deleteProgram(this.program);var S=T.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);w.uniformMatrix4fv(w.getUniformLocation(S.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),w.uniformMatrix4fv(w.getUniformLocation(S.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),w.uniform2f(w.getUniformLocation(S.webGLProgram,"uResolution"),this.width,this.height),this.program=S;var C=new Date,E={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),60*C.getHours()*60+60*C.getMinutes()+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=l(!0,{},this.shader.uniforms,E):this.uniforms=E;for(var M=0;M<4;M++)m[M]&&this.setSampler2D("iChannel"+M,m[M],M,x);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(y){return this.pointer=y,this},projOrtho:function(y,m,x,b){if(this.renderer.contextLost)this._deferProjOrtho={left:y,right:m,bottom:x,top:b};else{var w=1/(y-m),T=1/(x-b),S=this.projectionMatrix;S[0]=-2*w,S[5]=-2*T,S[10]=-.001,S[12]=(y+m)*w,S[13]=(b+x)*T,S[14]=-0;var C=this.program,E=this.gl;this.renderer.setProgram(C),E.uniformMatrix4fv(E.getUniformLocation(C.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=m,this._rendererHeight=x}},initUniforms:function(){var y=this.renderer.glFuncMap,m=this.program;for(var x in this._textureCount=0,this.uniforms){var b=this.uniforms[x],w=b.type,T=y[w];b.uniformLocation=this.renderer.createUniformLocation(m,x),w!=="sampler2D"&&(b.glMatrix=T.matrix,b.glValueLength=T.length,b.glFunc=T.func)}},setSampler2DBuffer:function(y,m,x,b,w,T){w===void 0&&(w=0),T===void 0&&(T={});var S=this.uniforms[y];return S.value=m,T.width=x,T.height=b,S.textureData=T,this._textureCount=w,this.initSampler2D(S),this},setSampler2D:function(y,m,x,b){x===void 0&&(x=0);var w=this.scene.sys.textures;if(w.exists(m)){var T=w.getFrame(m);if(T.glTexture&&T.glTexture.isRenderTexture)return this.setSampler2DBuffer(y,T.glTexture,T.width,T.height,x,b);var S=this.uniforms[y],C=T.source;S.textureKey=m,S.source=C.image,S.value=T.glTexture,C.isGLTexture&&(b||(b={}),b.width=C.width,b.height=C.height),b&&(S.textureData=b),this._textureCount=x,this.initSampler2D(S)}return this},setUniform:function(y,m){return d(this.uniforms,y,m),this},getUniform:function(y){return u(this.uniforms,y,null)},setChannel0:function(y,m){return this.setSampler2D("iChannel0",y,0,m)},setChannel1:function(y,m){return this.setSampler2D("iChannel1",y,1,m)},setChannel2:function(y,m){return this.setSampler2D("iChannel2",y,2,m)},setChannel3:function(y,m){return this.setSampler2D("iChannel3",y,3,m)},initSampler2D:function(y){if(y.value){var m=y.textureData;if(m&&!y.value.isRenderTexture){var x=this.gl,b=y.value,w=x[u(m,"magFilter","linear").toUpperCase()],T=x[u(m,"minFilter","linear").toUpperCase()],S=x[u(m,"wrapS","repeat").toUpperCase()],C=x[u(m,"wrapT","repeat").toUpperCase()],E=x[u(m,"format","rgba").toUpperCase()],M=u(m,"flipY",!1),_=u(m,"width",b.width),O=u(m,"height",b.height),k=u(m,"source",b.pixels);m.repeat&&(S=x.REPEAT,C=x.REPEAT),m.width&&(k=null),b.update(k,_,O,M,S,C,T,w,E)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var y,m,x,b,w,T=this.gl,S=this.uniforms,C=0;for(var E in S)x=(y=S[E]).glFunc,m=y.glValueLength,b=y.uniformLocation,(w=y.value)!==null&&(m===1?y.glMatrix?x.call(T,b.webGLUniformLocation,y.transpose,w):x.call(T,b.webGLUniformLocation,w):m===2?x.call(T,b.webGLUniformLocation,w.x,w.y):m===3?x.call(T,b.webGLUniformLocation,w.x,w.y,w.z):m===4?x.call(T,b.webGLUniformLocation,w.x,w.y,w.z,w.w):y.type==="sampler2D"&&(T.activeTexture(T.TEXTURE0+C),T.bindTexture(T.TEXTURE_2D,w.webGLTexture),T.uniform1i(b.webGLUniformLocation,C),C++))},load:function(y){var m=this.gl,x=this.width,b=this.height,w=this.renderer,T=this.program,S=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,E=-this._displayOriginY;S[0]=y[0],S[1]=y[1],S[4]=y[2],S[5]=y[3],S[8]=y[4],S[9]=y[5],S[12]=S[0]*C+S[4]*E,S[13]=S[1]*C+S[5]*E}m.useProgram(T.webGLProgram),m.uniformMatrix4fv(m.getUniformLocation(T.webGLProgram,"uViewMatrix"),!1,S),m.uniformMatrix4fv(m.getUniformLocation(T.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),m.uniform2f(m.getUniformLocation(T.webGLProgram,"uResolution"),this.width,this.height);var M=this.uniforms,_=M.resolution;_.value.x=x,_.value.y=b,M.time.value=w.game.loop.getDuration();var O=this.pointer;if(O){var k=M.mouse,P=O.x/x,A=1-O.y/b;k.value.x=P.toFixed(2),k.value.y=A.toFixed(2)}this.syncUniforms()},flush:function(){var y=this.width,m=this.height,x=this.program,b=this.gl,w=this.vertexBuffer,T=this.renderer,S=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(T.setFramebuffer(this.framebuffer),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT)),b.bindBuffer(b.ARRAY_BUFFER,w.webGLBuffer);var C=b.getAttribLocation(x.webGLProgram,"inPosition");C!==-1&&(b.enableVertexAttribArray(C),b.vertexAttribPointer(C,2,b.FLOAT,!1,S,0));var E=this.vertexViewF32;E[3]=m,E[4]=y,E[5]=m,E[8]=y,E[9]=m,E[10]=y,b.bufferSubData(b.ARRAY_BUFFER,0,this.bytes.subarray(0,6*S)),b.drawArrays(b.TRIANGLES,0,6),this.renderToTexture&&T.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var y=this._deferSetShader.key,m=this._deferSetShader.textures,x=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(y,m,x)}if(this._deferProjOrtho!==null){var b=this._deferProjOrtho.left,w=this._deferProjOrtho.right,T=this._deferProjOrtho.bottom,S=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(b,w,T,S)}},preDestroy:function(){var y=this.renderer;y.off(v.RESTORE_WEBGL,this.onContextRestored,this),y.deleteProgram(this.program),y.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(y.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),f(this.uniforms,function(m){y.deleteUniformLocation(m.uniformLocation),m.uniformLocation=null})}});s.exports=g},80464:s=>{s.exports=function(){}},54935:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(20071);h.register("shader",function(l,d){l===void 0&&(l={});var c=a(l,"key",null),p=a(l,"x",0),f=a(l,"y",0),v=a(l,"width",128),g=a(l,"height",128),y=new u(this.scene,c,p,f,v,g);return d!==void 0&&(l.add=d),r(this.scene,y,l),y})},74177:(s,o,i)=>{var r=i(20071);i(39429).register("shader",function(h,a,u,l,d,c,p){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p))})},25479:(s,o,i)=>{var r,h;i(29747),r=i(19257),h=i(80464),s.exports={renderWebGL:r,renderCanvas:h}},19257:(s,o,i)=>{var r=i(91296);s.exports=function(h,a,u,l){if(a.shader){if(u.addToRenderList(a),h.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var d=r(a,u,l).calc;h.width===a._rendererWidth&&h.height===a._rendererHeight||a.projOrtho(0,h.width,h.height,0),a.load(d.matrix),a.flush()}h.pipelines.rebind()}}},10441:(s,o,i)=>{var r=i(70554);s.exports=function(h,a,u,l,d,c){for(var p=r.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*l),f=u.pathData,v=u.pathIndexes,g=0;g<v.length;g+=3){var y=2*v[g],m=2*v[g+1],x=2*v[g+2],b=f[y+0]-d,w=f[y+1]-c,T=f[m+0]-d,S=f[m+1]-c,C=f[x+0]-d,E=f[x+1]-c,M=a.getX(b,w),_=a.getY(b,w),O=a.getX(T,S),k=a.getY(T,S),P=a.getX(C,E),A=a.getY(C,E);h.batchTri(u,M,_,O,k,P,A,0,0,1,1,p,p,p,2)}}},65960:s=>{s.exports=function(o,i,r,h){var a=r||i.fillColor,u=h||i.fillAlpha,l=(16711680&a)>>>16,d=(65280&a)>>>8,c=255&a;o.fillStyle="rgba("+l+","+d+","+c+","+u+")"}},75177:s=>{s.exports=function(o,i,r,h){var a=r||i.strokeColor,u=h||i.strokeAlpha,l=(16711680&a)>>>16,d=(65280&a)>>>8,c=255&a;o.strokeStyle="rgba("+l+","+d+","+c+","+u+")",o.lineWidth=i.lineWidth}},17803:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(95643),u=i(23031),l=new r({Extends:a,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.PostPipeline,h.ScrollFactor,h.Transform,h.Visible],initialize:function(d,c,p){c===void 0&&(c="Shape"),a.call(this,d,c),this.geom=p,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new u,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(d,c){return c===void 0&&(c=1),d===void 0?this.isFilled=!1:(this.fillColor=d,this.fillAlpha=c,this.isFilled=!0),this},setStrokeStyle:function(d,c,p){return p===void 0&&(p=1),d===void 0?this.isStroked=!1:(this.lineWidth=d,this.strokeColor=c,this.strokeAlpha=p,this.isStroked=!0),this},setClosePath:function(d){return this.closePath=d,this},setSize:function(d,c){return this.width=d,this.height=c,this},setDisplaySize:function(d,c){return this.displayWidth=d,this.displayHeight=c,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(d){this.scaleX=d/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(d){this.scaleY=d/this.height}}});s.exports=l},34682:(s,o,i)=>{var r=i(70554);s.exports=function(h,a,u,l,d){var c=h.strokeTint,p=r.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*u);c.TL=p,c.TR=p,c.BL=p,c.BR=p;var f=a.pathData,v=f.length-1,g=a.lineWidth,y=g/2,m=f[0]-l,x=f[1]-d;a.closePath||(v-=2);for(var b=2;b<v;b+=2){var w=f[b]-l,T=f[b+1]-d;h.batchLine(m,x,w,T,y,y,g,b-2,!!a.closePath&&b===v-1),m=w,x=T}}},23629:(s,o,i)=>{var r=i(13609),h=i(83419),a=i(39506),u=i(94811),l=i(96503),d=i(36383),c=i(17803),p=new h({Extends:c,Mixins:[r],initialize:function(f,v,g,y,m,x,b,w,T){v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=128),m===void 0&&(m=0),x===void 0&&(x=360),b===void 0&&(b=!1),c.call(this,f,"Arc",new l(0,0,y)),this._startAngle=m,this._endAngle=x,this._anticlockwise=b,this._iterations=.01,this.setPosition(v,g);var S=2*this.geom.radius;this.setSize(S,S),w!==void 0&&this.setFillStyle(w,T),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(f){this._iterations=f,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(f){this.geom.radius=f;var v=2*f;this.setSize(v,v),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(f){this._startAngle=f,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(f){this._endAngle=f,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(f){this._anticlockwise=f,this.updateData()}},setRadius:function(f){return this.radius=f,this},setIterations:function(f){return f===void 0&&(f=.01),this.iterations=f,this},setStartAngle:function(f,v){return this._startAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},setEndAngle:function(f,v){return this._endAngle=f,v!==void 0&&(this._anticlockwise=v),this.updateData()},updateData:function(){var f=this._iterations,v=f,g=this.geom.radius,y=a(this._startAngle),m=a(this._endAngle),x=g,b=g;m-=y,this._anticlockwise?m<-d.PI2?m=-d.PI2:m>0&&(m=-d.PI2+m%d.PI2):m>d.PI2?m=d.PI2:m<0&&(m=d.PI2+m%d.PI2);for(var w,T=[x+Math.cos(y)*g,b+Math.sin(y)*g];v<1;)w=m*v+y,T.push(x+Math.cos(w)*g,b+Math.sin(w)*g),v+=f;return w=m+y,T.push(x+Math.cos(w)*g,b+Math.sin(w)*g),T.push(x+Math.cos(y)*g,b+Math.sin(y)*g),this.pathIndexes=u(T),this.pathData=T,this}});s.exports=p},42542:(s,o,i)=>{var r=i(39506),h=i(65960),a=i(75177),u=i(20926);s.exports=function(l,d,c,p){c.addToRenderList(d);var f=l.currentContext;if(u(l,f,d,c,p)){var v=d.radius;f.beginPath(),f.arc(v-d.originX*(2*v),v-d.originY*(2*v),v,r(d._startAngle),r(d._endAngle),d.anticlockwise),d.closePath&&f.closePath(),d.isFilled&&(h(f,d),f.fill()),d.isStroked&&(a(f,d),f.stroke()),f.restore()}}},42563:(s,o,i)=>{var r=i(23629),h=i(39429);h.register("arc",function(a,u,l,d,c,p,f,v){return this.displayList.add(new r(this.scene,a,u,l,d,c,p,f,v))}),h.register("circle",function(a,u,l,d,c){return this.displayList.add(new r(this.scene,a,u,l,0,360,!1,d,c))})},13609:(s,o,i)=>{var r,h;i(29747),r=i(41447),h=i(42542),s.exports={renderWebGL:r,renderCanvas:h}},41447:(s,o,i)=>{var r=i(91296),h=i(10441),a=i(34682);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=r(l,d,c),v=p.calcMatrix.copyFrom(f.calc),g=l._displayOriginX,y=l._displayOriginY,m=d.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&h(p,v,l,m,g,y),l.isStroked&&a(p,l,m,g,y),u.pipelines.postBatch(l)}},89:(s,o,i)=>{var r=i(83419),h=i(33141),a=i(94811),u=i(87841),l=i(17803),d=new r({Extends:l,Mixins:[h],initialize:function(c,p,f,v,g,y){p===void 0&&(p=0),f===void 0&&(f=0),l.call(this,c,"Curve",v),this._smoothness=32,this._curveBounds=new u,this.closePath=!1,this.setPosition(p,f),g!==void 0&&this.setFillStyle(g,y),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(c){this._smoothness=c,this.updateData()}},setSmoothness:function(c){return this._smoothness=c,this.updateData()},updateData:function(){var c=this._curveBounds,p=this._smoothness;this.geom.getBounds(c,p),this.setSize(c.width,c.height),this.updateDisplayOrigin();for(var f=[],v=this.geom.getPoints(p),g=0;g<v.length;g++)f.push(v[g].x,v[g].y);return f.push(v[0].x,v[0].y),this.pathIndexes=a(f),this.pathData=f,this}});s.exports=d},3170:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX+l._curveBounds.x,v=l._displayOriginY+l._curveBounds.y,g=l.pathData,y=g.length-1,m=g[0]-f,x=g[1]-v;p.beginPath(),p.moveTo(m,x),l.closePath||(y-=2);for(var b=2;b<y;b+=2){var w=g[b]-f,T=g[b+1]-v;p.lineTo(w,T)}l.closePath&&p.closePath(),l.isFilled&&(r(p,l),p.fill()),l.isStroked&&(h(p,l),p.stroke()),p.restore()}}},40511:(s,o,i)=>{var r=i(39429),h=i(89);r.register("curve",function(a,u,l,d,c){return this.displayList.add(new h(this.scene,a,u,l,d,c))})},33141:(s,o,i)=>{var r,h;i(29747),r=i(53987),h=i(3170),s.exports={renderWebGL:r,renderCanvas:h}},53987:(s,o,i)=>{var r=i(10441),h=i(91296),a=i(34682);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=h(l,d,c),v=p.calcMatrix.copyFrom(f.calc),g=l._displayOriginX+l._curveBounds.x,y=l._displayOriginY+l._curveBounds.y,m=d.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&r(p,v,l,m,g,y),l.isStroked&&a(p,l,m,g,y),u.pipelines.postBatch(l)}},19921:(s,o,i)=>{var r=i(83419),h=i(94811),a=i(54205),u=i(8497),l=i(17803),d=new r({Extends:l,Mixins:[a],initialize:function(c,p,f,v,g,y,m){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=128),g===void 0&&(g=128),l.call(this,c,"Ellipse",new u(v/2,g/2,v,g)),this._smoothness=64,this.setPosition(p,f),this.width=v,this.height=g,y!==void 0&&this.setFillStyle(y,m),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(c){this._smoothness=c,this.updateData()}},setSize:function(c,p){return this.width=c,this.height=p,this.geom.setPosition(c/2,p/2),this.geom.setSize(c,p),this.updateData()},setSmoothness:function(c){return this._smoothness=c,this.updateData()},updateData:function(){for(var c=[],p=this.geom.getPoints(this._smoothness),f=0;f<p.length;f++)c.push(p[f].x,p[f].y);return c.push(p[0].x,p[0].y),this.pathIndexes=h(c),this.pathData=c,this}});s.exports=d},7930:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX,v=l._displayOriginY,g=l.pathData,y=g.length-1,m=g[0]-f,x=g[1]-v;p.beginPath(),p.moveTo(m,x),l.closePath||(y-=2);for(var b=2;b<y;b+=2){var w=g[b]-f,T=g[b+1]-v;p.lineTo(w,T)}p.closePath(),l.isFilled&&(r(p,l),p.fill()),l.isStroked&&(h(p,l),p.stroke()),p.restore()}}},1543:(s,o,i)=>{var r=i(19921);i(39429).register("ellipse",function(h,a,u,l,d,c){return this.displayList.add(new r(this.scene,h,a,u,l,d,c))})},54205:(s,o,i)=>{var r,h;i(29747),r=i(19467),h=i(7930),s.exports={renderWebGL:r,renderCanvas:h}},19467:(s,o,i)=>{var r=i(10441),h=i(91296),a=i(34682);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=h(l,d,c),v=p.calcMatrix.copyFrom(f.calc),g=l._displayOriginX,y=l._displayOriginY,m=d.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&r(p,v,l,m,g,y),l.isStroked&&a(p,l,m,g,y),u.pipelines.postBatch(l)}},30479:(s,o,i)=>{var r=i(83419),h=i(17803),a=i(26015),u=new r({Extends:h,Mixins:[a],initialize:function(l,d,c,p,f,v,g,y,m,x,b){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=128),f===void 0&&(f=128),v===void 0&&(v=32),g===void 0&&(g=32),h.call(this,l,"Grid",null),this.cellWidth=v,this.cellHeight=g,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(d,c),this.setSize(p,f),this.setFillStyle(y,m),x!==void 0&&this.setOutlineStyle(x,b),this.updateDisplayOrigin()},setFillStyle:function(l,d){return d===void 0&&(d=1),l===void 0?this.showCells=!1:(this.fillColor=l,this.fillAlpha=d,this.showCells=!0),this},setAltFillStyle:function(l,d){return d===void 0&&(d=1),l===void 0?this.showAltCells=!1:(this.altFillColor=l,this.altFillAlpha=d,this.showAltCells=!0),this},setOutlineStyle:function(l,d){return d===void 0&&(d=1),l===void 0?this.showOutline=!1:(this.outlineFillColor=l,this.outlineFillAlpha=d,this.showOutline=!0),this}});s.exports=u},49912:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=-l._displayOriginX,v=-l._displayOriginY,g=d.alpha*l.alpha,y=l.width,m=l.height,x=l.cellWidth,b=l.cellHeight,w=Math.ceil(y/x),T=Math.ceil(m/b),S=x,C=b,E=x-(w*x-y),M=b-(T*b-m),_=l.showCells,O=l.showAltCells,k=l.showOutline,P=0,A=0,L=0,D=0,F=0;if(k&&(S--,C--,E===x&&E--,M===b&&M--),_&&l.fillAlpha>0)for(r(p,l),A=0;A<T;A++)for(O&&(L=A%2),P=0;P<w;P++)O&&L?L=0:(L++,D=P<w-1?S:E,F=A<T-1?C:M,p.fillRect(f+P*x,v+A*b,D,F));if(O&&l.altFillAlpha>0)for(r(p,l,l.altFillColor,l.altFillAlpha*g),A=0;A<T;A++)for(O&&(L=A%2),P=0;P<w;P++)!O||L?(L=0,D=P<w-1?S:E,F=A<T-1?C:M,p.fillRect(f+P*x,v+A*b,D,F)):L=1;if(k&&l.outlineFillAlpha>0){for(h(p,l,l.outlineFillColor,l.outlineFillAlpha*g),P=1;P<w;P++){var X=P*x;p.beginPath(),p.moveTo(X+f,v),p.lineTo(X+f,m+v),p.stroke()}for(A=1;A<T;A++){var z=A*b;p.beginPath(),p.moveTo(f,z+v),p.lineTo(f+y,z+v),p.stroke()}}p.restore()}}},34137:(s,o,i)=>{var r=i(39429),h=i(30479);r.register("grid",function(a,u,l,d,c,p,f,v,g,y){return this.displayList.add(new h(this.scene,a,u,l,d,c,p,f,v,g,y))})},26015:(s,o,i)=>{var r,h;i(29747),r=i(46161),h=i(49912),s.exports={renderWebGL:r,renderCanvas:h}},46161:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.pipelines.set(u.pipeline),p=r(u,l,d);c.calcMatrix.copyFrom(p.calc).translate(-u._displayOriginX,-u._displayOriginY);var f,v,g=l.alpha*u.alpha,y=u.width,m=u.height,x=u.cellWidth,b=u.cellHeight,w=Math.ceil(y/x),T=Math.ceil(m/b),S=x,C=b,E=x-(w*x-y),M=b-(T*b-m),_=u.showCells,O=u.showAltCells,k=u.showOutline,P=0,A=0,L=0,D=0,F=0;if(k&&(S--,C--,E===x&&E--,M===b&&M--),a.pipelines.preBatch(u),_&&u.fillAlpha>0)for(f=c.fillTint,v=h.getTintAppendFloatAlpha(u.fillColor,u.fillAlpha*g),f.TL=v,f.TR=v,f.BL=v,f.BR=v,A=0;A<T;A++)for(O&&(L=A%2),P=0;P<w;P++)O&&L?L=0:(L++,D=P<w-1?S:E,F=A<T-1?C:M,c.batchFillRect(P*x,A*b,D,F));if(O&&u.altFillAlpha>0)for(f=c.fillTint,v=h.getTintAppendFloatAlpha(u.altFillColor,u.altFillAlpha*g),f.TL=v,f.TR=v,f.BL=v,f.BR=v,A=0;A<T;A++)for(O&&(L=A%2),P=0;P<w;P++)!O||L?(L=0,D=P<w-1?S:E,F=A<T-1?C:M,c.batchFillRect(P*x,A*b,D,F)):L=1;if(k&&u.outlineFillAlpha>0){var X=c.strokeTint,z=h.getTintAppendFloatAlpha(u.outlineFillColor,u.outlineFillAlpha*g);for(X.TL=z,X.TR=z,X.BL=z,X.BR=z,P=1;P<w;P++){var Y=P*x;c.batchLine(Y,0,Y,m,1,1,1,0,!1)}for(A=1;A<T;A++){var R=A*b;c.batchLine(0,R,y,R,1,1,1,0,!1)}}a.pipelines.postBatch(u)}},61475:(s,o,i)=>{var r=i(99651),h=i(83419),a=i(17803),u=new h({Extends:a,Mixins:[r],initialize:function(l,d,c,p,f,v,g,y){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=48),f===void 0&&(f=32),v===void 0&&(v=15658734),g===void 0&&(g=10066329),y===void 0&&(y=13421772),a.call(this,l,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=g,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(d,c),this.setSize(p,f),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setFaces:function(l,d,c){return l===void 0&&(l=!0),d===void 0&&(d=!0),c===void 0&&(c=!0),this.showTop=l,this.showLeft=d,this.showRight=c,this},setFillStyle:function(l,d,c){return this.fillTop=l,this.fillLeft=d,this.fillRight=c,this.isFilled=!0,this}});s.exports=u},11508:(s,o,i)=>{var r=i(65960),h=i(20926);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.currentContext;if(h(a,c,u,l,d)&&u.isFilled){var p=u.width,f=u.height,v=p/2,g=p/u.projection;u.showTop&&(r(c,u,u.fillTop),c.beginPath(),c.moveTo(-v,-f),c.lineTo(0,-g-f),c.lineTo(v,-f),c.lineTo(v,-1),c.lineTo(0,g-1),c.lineTo(-v,-1),c.lineTo(-v,-f),c.fill()),u.showLeft&&(r(c,u,u.fillLeft),c.beginPath(),c.moveTo(-v,0),c.lineTo(0,g),c.lineTo(0,g-f),c.lineTo(-v,-f),c.lineTo(-v,0),c.fill()),u.showRight&&(r(c,u,u.fillRight),c.beginPath(),c.moveTo(v,0),c.lineTo(0,g),c.lineTo(0,g-f),c.lineTo(v,-f),c.lineTo(v,0),c.fill()),c.restore()}}},3933:(s,o,i)=>{var r=i(39429),h=i(61475);r.register("isobox",function(a,u,l,d,c,p,f){return this.displayList.add(new h(this.scene,a,u,l,d,c,p,f))})},99651:(s,o,i)=>{var r,h;i(29747),r=i(68149),h=i(11508),s.exports={renderWebGL:r,renderCanvas:h}},68149:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){l.addToRenderList(u);var c,p,f,v,g,y,m,x,b,w=a.pipelines.set(u.pipeline),T=r(u,l,d),S=w.calcMatrix.copyFrom(T.calc),C=u.width,E=u.height,M=C/2,_=C/u.projection,O=l.alpha*u.alpha;u.isFilled&&(a.pipelines.preBatch(u),u.showTop&&(c=h.getTintAppendFloatAlpha(u.fillTop,O),p=S.getX(-M,-E),f=S.getY(-M,-E),v=S.getX(0,-_-E),g=S.getY(0,-_-E),y=S.getX(M,-E),m=S.getY(M,-E),x=S.getX(0,_-E),b=S.getY(0,_-E),w.batchQuad(u,p,f,v,g,y,m,x,b,0,0,1,1,c,c,c,c,2)),u.showLeft&&(c=h.getTintAppendFloatAlpha(u.fillLeft,O),p=S.getX(-M,0),f=S.getY(-M,0),v=S.getX(0,_),g=S.getY(0,_),y=S.getX(0,_-E),m=S.getY(0,_-E),x=S.getX(-M,-E),b=S.getY(-M,-E),w.batchQuad(u,p,f,v,g,y,m,x,b,0,0,1,1,c,c,c,c,2)),u.showRight&&(c=h.getTintAppendFloatAlpha(u.fillRight,O),p=S.getX(M,0),f=S.getY(M,0),v=S.getX(0,_),g=S.getY(0,_),y=S.getX(0,_-E),m=S.getY(0,_-E),x=S.getX(M,-E),b=S.getY(M,-E),w.batchQuad(u,p,f,v,g,y,m,x,b,0,0,1,1,c,c,c,c,2)),a.pipelines.postBatch(u))}},16933:(s,o,i)=>{var r=i(83419),h=i(60561),a=i(17803),u=new r({Extends:a,Mixins:[h],initialize:function(l,d,c,p,f,v,g,y,m){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=48),f===void 0&&(f=32),v===void 0&&(v=!1),g===void 0&&(g=15658734),y===void 0&&(y=10066329),m===void 0&&(m=13421772),a.call(this,l,"IsoTriangle",null),this.projection=4,this.fillTop=g,this.fillLeft=y,this.fillRight=m,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(d,c),this.setSize(p,f),this.updateDisplayOrigin()},setProjection:function(l){return this.projection=l,this},setReversed:function(l){return this.isReversed=l,this},setFaces:function(l,d,c){return l===void 0&&(l=!0),d===void 0&&(d=!0),c===void 0&&(c=!0),this.showTop=l,this.showLeft=d,this.showRight=c,this},setFillStyle:function(l,d,c){return this.fillTop=l,this.fillLeft=d,this.fillRight=c,this.isFilled=!0,this}});s.exports=u},79590:(s,o,i)=>{var r=i(65960),h=i(20926);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.currentContext;if(h(a,c,u,l,d)&&u.isFilled){var p=u.width,f=u.height,v=p/2,g=p/u.projection,y=u.isReversed;u.showTop&&y&&(r(c,u,u.fillTop),c.beginPath(),c.moveTo(-v,-f),c.lineTo(0,-g-f),c.lineTo(v,-f),c.lineTo(0,g-f),c.fill()),u.showLeft&&(r(c,u,u.fillLeft),c.beginPath(),y?(c.moveTo(-v,-f),c.lineTo(0,g),c.lineTo(0,g-f)):(c.moveTo(-v,0),c.lineTo(0,g),c.lineTo(0,g-f)),c.fill()),u.showRight&&(r(c,u,u.fillRight),c.beginPath(),y?(c.moveTo(v,-f),c.lineTo(0,g),c.lineTo(0,g-f)):(c.moveTo(v,0),c.lineTo(0,g),c.lineTo(0,g-f)),c.fill()),c.restore()}}},49803:(s,o,i)=>{var r=i(39429),h=i(16933);r.register("isotriangle",function(a,u,l,d,c,p,f,v){return this.displayList.add(new h(this.scene,a,u,l,d,c,p,f,v))})},60561:(s,o,i)=>{var r,h;i(29747),r=i(51503),h=i(79590),s.exports={renderWebGL:r,renderCanvas:h}},51503:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.pipelines.set(u.pipeline),p=r(u,l,d),f=c.calcMatrix.copyFrom(p.calc),v=u.width,g=u.height,y=v/2,m=v/u.projection,x=u.isReversed,b=l.alpha*u.alpha;if(u.isFilled){var w,T,S,C,E,M,_;if(a.pipelines.preBatch(u),u.showTop&&x){w=h.getTintAppendFloatAlpha(u.fillTop,b),T=f.getX(-y,-g),S=f.getY(-y,-g),C=f.getX(0,-m-g),E=f.getY(0,-m-g),M=f.getX(y,-g),_=f.getY(y,-g);var O=f.getX(0,m-g),k=f.getY(0,m-g);c.batchQuad(u,T,S,C,E,M,_,O,k,0,0,1,1,w,w,w,w,2)}u.showLeft&&(w=h.getTintAppendFloatAlpha(u.fillLeft,b),x?(T=f.getX(-y,-g),S=f.getY(-y,-g),C=f.getX(0,m),E=f.getY(0,m),M=f.getX(0,m-g),_=f.getY(0,m-g)):(T=f.getX(-y,0),S=f.getY(-y,0),C=f.getX(0,m),E=f.getY(0,m),M=f.getX(0,m-g),_=f.getY(0,m-g)),c.batchTri(u,T,S,C,E,M,_,0,0,1,1,w,w,w,2)),u.showRight&&(w=h.getTintAppendFloatAlpha(u.fillRight,b),x?(T=f.getX(y,-g),S=f.getY(y,-g),C=f.getX(0,m),E=f.getY(0,m),M=f.getX(0,m-g),_=f.getY(0,m-g)):(T=f.getX(y,0),S=f.getY(y,0),C=f.getX(0,m),E=f.getY(0,m),M=f.getX(0,m-g),_=f.getY(0,m-g)),c.batchTri(u,T,S,C,E,M,_,0,0,1,1,w,w,w,2)),a.pipelines.postBatch(u)}}},57847:(s,o,i)=>{var r=i(83419),h=i(17803),a=i(23031),u=i(36823),l=new r({Extends:h,Mixins:[u],initialize:function(d,c,p,f,v,g,y,m,x){c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=128),y===void 0&&(y=0),h.call(this,d,"Line",new a(f,v,g,y));var b=Math.max(1,this.geom.right-this.geom.left),w=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(c,p),this.setSize(b,w),m!==void 0&&this.setStrokeStyle(1,m,x),this.updateDisplayOrigin()},setLineWidth:function(d,c){return c===void 0&&(c=d),this._startWidth=d,this._endWidth=c,this.lineWidth=d,this},setTo:function(d,c,p,f){return this.geom.setTo(d,c,p,f),this}});s.exports=l},17440:(s,o,i)=>{var r=i(75177),h=i(20926);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.currentContext;if(h(a,c,u,l,d)){var p=u._displayOriginX,f=u._displayOriginY;u.isStroked&&(r(c,u),c.beginPath(),c.moveTo(u.geom.x1-p,u.geom.y1-f),c.lineTo(u.geom.x2-p,u.geom.y2-f),c.stroke()),c.restore()}}},2481:(s,o,i)=>{var r=i(39429),h=i(57847);r.register("line",function(a,u,l,d,c,p,f,v){return this.displayList.add(new h(this.scene,a,u,l,d,c,p,f,v))})},36823:(s,o,i)=>{var r,h;i(29747),r=i(77385),h=i(17440),s.exports={renderWebGL:r,renderCanvas:h}},77385:(s,o,i)=>{var r=i(91296),h=i(70554);s.exports=function(a,u,l,d){l.addToRenderList(u);var c=a.pipelines.set(u.pipeline),p=r(u,l,d);c.calcMatrix.copyFrom(p.calc);var f=u._displayOriginX,v=u._displayOriginY,g=l.alpha*u.alpha;if(a.pipelines.preBatch(u),u.isStroked){var y=c.strokeTint,m=h.getTintAppendFloatAlpha(u.strokeColor,u.strokeAlpha*g);y.TL=m,y.TR=m,y.BL=m,y.BR=m,c.batchLine(u.geom.x1-f,u.geom.y1-v,u.geom.x2-f,u.geom.y2-v,u._startWidth/2,u._endWidth/2,1,0,!1,p.sprite,p.camera)}a.pipelines.postBatch(u)}},24949:(s,o,i)=>{var r=i(90273),h=i(83419),a=i(94811),u=i(13829),l=i(25717),d=i(17803),c=i(5469),p=new h({Extends:d,Mixins:[r],initialize:function(f,v,g,y,m,x){v===void 0&&(v=0),g===void 0&&(g=0),d.call(this,f,"Polygon",new l(y));var b=u(this.geom);this.setPosition(v,g),this.setSize(b.width,b.height),m!==void 0&&this.setFillStyle(m,x),this.updateDisplayOrigin(),this.updateData()},smooth:function(f){f===void 0&&(f=1);for(var v=0;v<f;v++)c(this.geom);return this.updateData()},setTo:function(f){this.geom.setTo(f);var v=u(this.geom);return this.setSize(v.width,v.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var f=[],v=this.geom.points,g=0;g<v.length;g++)f.push(v[g].x,v[g].y);return f.push(v[0].x,v[0].y),this.pathIndexes=a(f),this.pathData=f,this}});s.exports=p},38710:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX,v=l._displayOriginY,g=l.pathData,y=g.length-1,m=g[0]-f,x=g[1]-v;p.beginPath(),p.moveTo(m,x),l.closePath||(y-=2);for(var b=2;b<y;b+=2){var w=g[b]-f,T=g[b+1]-v;p.lineTo(w,T)}l.closePath&&p.closePath(),l.isFilled&&(r(p,l),p.fill()),l.isStroked&&(h(p,l),p.stroke()),p.restore()}}},64827:(s,o,i)=>{var r=i(39429),h=i(24949);r.register("polygon",function(a,u,l,d,c){return this.displayList.add(new h(this.scene,a,u,l,d,c))})},90273:(s,o,i)=>{var r,h;i(29747),r=i(73695),h=i(38710),s.exports={renderWebGL:r,renderCanvas:h}},73695:(s,o,i)=>{var r=i(10441),h=i(91296),a=i(34682);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=h(l,d,c),v=p.calcMatrix.copyFrom(f.calc),g=l._displayOriginX,y=l._displayOriginY,m=d.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&r(p,v,l,m,g,y),l.isStroked&&a(p,l,m,g,y),u.pipelines.postBatch(l)}},74561:(s,o,i)=>{var r=i(83419),h=i(87841),a=i(17803),u=i(95597),l=new r({Extends:a,Mixins:[u],initialize:function(d,c,p,f,v,g,y){c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=128),v===void 0&&(v=128),a.call(this,d,"Rectangle",new h(0,0,f,v)),this.setPosition(c,p),this.setSize(f,v),g!==void 0&&this.setFillStyle(g,y),this.updateDisplayOrigin(),this.updateData()},setSize:function(d,c){this.width=d,this.height=c,this.geom.setSize(d,c),this.updateData(),this.updateDisplayOrigin();var p=this.input;return p&&!p.customHitArea&&(p.hitArea.width=d,p.hitArea.height=c),this},updateData:function(){var d=[],c=this.geom,p=this._tempLine;return c.getLineA(p),d.push(p.x1,p.y1,p.x2,p.y2),c.getLineB(p),d.push(p.x2,p.y2),c.getLineC(p),d.push(p.x2,p.y2),c.getLineD(p),d.push(p.x2,p.y2),this.pathData=d,this}});s.exports=l},48682:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX,v=l._displayOriginY;l.isFilled&&(r(p,l),p.fillRect(-f,-v,l.width,l.height)),l.isStroked&&(h(p,l),p.beginPath(),p.rect(-f,-v,l.width,l.height),p.stroke()),p.restore()}}},87959:(s,o,i)=>{var r=i(39429),h=i(74561);r.register("rectangle",function(a,u,l,d,c,p){return this.displayList.add(new h(this.scene,a,u,l,d,c,p))})},95597:(s,o,i)=>{var r,h;i(29747),r=i(52059),h=i(48682),s.exports={renderWebGL:r,renderCanvas:h}},52059:(s,o,i)=>{var r=i(91296),h=i(34682),a=i(70554);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=r(l,d,c);p.calcMatrix.copyFrom(f.calc);var v=l._displayOriginX,g=l._displayOriginY,y=d.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var m=p.fillTint,x=a.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*y);m.TL=x,m.TR=x,m.BL=x,m.BR=x,p.batchFillRect(-v,-g,l.width,l.height)}l.isStroked&&h(p,l,y,v,g),u.pipelines.postBatch(l)}},55911:(s,o,i)=>{var r=i(81991),h=i(83419),a=i(94811),u=i(17803),l=new h({Extends:u,Mixins:[r],initialize:function(d,c,p,f,v,g,y,m){c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=5),v===void 0&&(v=32),g===void 0&&(g=64),u.call(this,d,"Star",null),this._points=f,this._innerRadius=v,this._outerRadius=g,this.setPosition(c,p),this.setSize(2*g,2*g),y!==void 0&&this.setFillStyle(y,m),this.updateDisplayOrigin(),this.updateData()},setPoints:function(d){return this._points=d,this.updateData()},setInnerRadius:function(d){return this._innerRadius=d,this.updateData()},setOuterRadius:function(d){return this._outerRadius=d,this.updateData()},points:{get:function(){return this._points},set:function(d){this._points=d,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(d){this._innerRadius=d,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(d){this._outerRadius=d,this.updateData()}},updateData:function(){var d=[],c=this._points,p=this._innerRadius,f=this._outerRadius,v=Math.PI/2*3,g=Math.PI/c,y=f,m=f;d.push(y,m+-f);for(var x=0;x<c;x++)d.push(y+Math.cos(v)*f,m+Math.sin(v)*f),v+=g,d.push(y+Math.cos(v)*p,m+Math.sin(v)*p),v+=g;return d.push(y,m+-f),this.pathIndexes=a(d),this.pathData=d,this}});s.exports=l},64272:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX,v=l._displayOriginY,g=l.pathData,y=g.length-1,m=g[0]-f,x=g[1]-v;p.beginPath(),p.moveTo(m,x),l.closePath||(y-=2);for(var b=2;b<y;b+=2){var w=g[b]-f,T=g[b+1]-v;p.lineTo(w,T)}p.closePath(),l.isFilled&&(r(p,l),p.fill()),l.isStroked&&(h(p,l),p.stroke()),p.restore()}}},93697:(s,o,i)=>{var r=i(55911);i(39429).register("star",function(h,a,u,l,d,c,p){return this.displayList.add(new r(this.scene,h,a,u,l,d,c,p))})},81991:(s,o,i)=>{var r,h;i(29747),r=i(57017),h=i(64272),s.exports={renderWebGL:r,renderCanvas:h}},57017:(s,o,i)=>{var r=i(10441),h=i(91296),a=i(34682);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=h(l,d,c),v=p.calcMatrix.copyFrom(f.calc),g=l._displayOriginX,y=l._displayOriginY,m=d.alpha*l.alpha;u.pipelines.preBatch(l),l.isFilled&&r(p,v,l,m,g,y),l.isStroked&&a(p,l,m,g,y),u.pipelines.postBatch(l)}},36931:(s,o,i)=>{var r=i(83419),h=i(17803),a=i(16483),u=i(96195),l=new r({Extends:h,Mixins:[u],initialize:function(d,c,p,f,v,g,y,m,x,b,w){c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=128),g===void 0&&(g=64),y===void 0&&(y=0),m===void 0&&(m=128),x===void 0&&(x=128),h.call(this,d,"Triangle",new a(f,v,g,y,m,x));var T=this.geom.right-this.geom.left,S=this.geom.bottom-this.geom.top;this.setPosition(c,p),this.setSize(T,S),b!==void 0&&this.setFillStyle(b,w),this.updateDisplayOrigin(),this.updateData()},setTo:function(d,c,p,f,v,g){return this.geom.setTo(d,c,p,f,v,g),this.updateData()},updateData:function(){var d=[],c=this.geom,p=this._tempLine;return c.getLineA(p),d.push(p.x1,p.y1,p.x2,p.y2),c.getLineB(p),d.push(p.x2,p.y2),c.getLineC(p),d.push(p.x2,p.y2),this.pathData=d,this}});s.exports=l},85172:(s,o,i)=>{var r=i(65960),h=i(75177),a=i(20926);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.currentContext;if(a(u,p,l,d,c)){var f=l._displayOriginX,v=l._displayOriginY,g=l.geom.x1-f,y=l.geom.y1-v,m=l.geom.x2-f,x=l.geom.y2-v,b=l.geom.x3-f,w=l.geom.y3-v;p.beginPath(),p.moveTo(g,y),p.lineTo(m,x),p.lineTo(b,w),p.closePath(),l.isFilled&&(r(p,l),p.fill()),l.isStroked&&(h(p,l),p.stroke()),p.restore()}}},45245:(s,o,i)=>{var r=i(39429),h=i(36931);r.register("triangle",function(a,u,l,d,c,p,f,v,g,y){return this.displayList.add(new h(this.scene,a,u,l,d,c,p,f,v,g,y))})},96195:(s,o,i)=>{var r,h;i(29747),r=i(83253),h=i(85172),s.exports={renderWebGL:r,renderCanvas:h}},83253:(s,o,i)=>{var r=i(91296),h=i(34682),a=i(70554);s.exports=function(u,l,d,c){d.addToRenderList(l);var p=u.pipelines.set(l.pipeline),f=r(l,d,c);p.calcMatrix.copyFrom(f.calc);var v=l._displayOriginX,g=l._displayOriginY,y=d.alpha*l.alpha;if(u.pipelines.preBatch(l),l.isFilled){var m=p.fillTint,x=a.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*y);m.TL=x,m.TR=x,m.BL=x,m.BR=x;var b=l.geom.x1-v,w=l.geom.y1-g,T=l.geom.x2-v,S=l.geom.y2-g,C=l.geom.x3-v,E=l.geom.y3-g;p.batchFillTriangle(b,w,T,S,C,E,f.sprite,f.camera)}l.isStroked&&h(p,l,y,v,g),u.pipelines.postBatch(l)}},68287:(s,o,i)=>{var r=i(9674),h=i(83419),a=i(31401),u=i(95643),l=i(92751),d=new h({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,l],initialize:function(c,p,f,v,g){u.call(this,c,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(v,g),this.setPosition(p,f),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(c,p){this.anims.update(c,p)},play:function(c,p){return this.anims.play(c,p)},playReverse:function(c,p){return this.anims.playReverse(c,p)},playAfterDelay:function(c,p){return this.anims.playAfterDelay(c,p)},playAfterRepeat:function(c,p){return this.anims.playAfterRepeat(c,p)},chain:function(c){return this.anims.chain(c)},stop:function(){return this.anims.stop()},stopAfterDelay:function(c){return this.anims.stopAfterDelay(c)},stopAfterRepeat:function(c){return this.anims.stopAfterRepeat(c)},stopOnFrame:function(c){return this.anims.stopOnFrame(c)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});s.exports=d},76552:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i),o.batchSprite(i,i.frame,r,h)}},15567:(s,o,i)=>{var r=i(25305),h=i(13059),a=i(44603),u=i(23568),l=i(68287);a.register("sprite",function(d,c){d===void 0&&(d={});var p=u(d,"key",null),f=u(d,"frame",null),v=new l(this.scene,0,0,p,f);return c!==void 0&&(d.add=c),r(this.scene,v,d),h(v,d),v})},46409:(s,o,i)=>{var r=i(39429),h=i(68287);r.register("sprite",function(a,u,l,d){return this.displayList.add(new h(this.scene,a,u,l,d))})},92751:(s,o,i)=>{var r,h;i(29747),r=i(9409),h=i(76552),s.exports={renderWebGL:r,renderCanvas:h}},9409:s=>{s.exports=function(o,i,r,h){r.addToRenderList(i),i.pipeline.batchSprite(i,r,h)}},14220:s=>{s.exports=function(o,i,r){var h=o.canvas,a=o.context,u=o.style,l=[],d=0,c=r.length;u.maxLines>0&&u.maxLines<r.length&&(c=u.maxLines),u.syncFont(h,a);for(var p=0;p<c;p++){var f=u.strokeThickness;f+=a.measureText(r[p]).width,r[p].length>1&&(f+=o.letterSpacing*(r[p].length-1)),u.wordWrap&&(f-=a.measureText(" ").width),l[p]=Math.ceil(f),d=Math.max(d,l[p])}var v=i.fontSize+u.strokeThickness,g=v*c,y=o.lineSpacing;return c>1&&(g+=y*(c-1)),{width:d,height:g,lines:c,lineWidths:l,lineSpacing:y,lineHeight:v}}},79557:(s,o,i)=>{var r=i(27919);s.exports=function(h){var a=r.create(this),u=a.getContext("2d",{willReadFrequently:!0});h.syncFont(a,u);var l=u.measureText(h.testString);if("actualBoundingBoxAscent"in l){var d=l.actualBoundingBoxAscent,c=l.actualBoundingBoxDescent;return r.remove(a),{ascent:d,descent:c,fontSize:d+c}}var p=Math.ceil(l.width*h.baselineX),f=p,v=2*f;f=f*h.baselineY|0,a.width=p,a.height=v,u.fillStyle="#f00",u.fillRect(0,0,p,v),u.font=h._font,u.textBaseline="alphabetic",u.fillStyle="#000",u.fillText(h.testString,0,f);var g={ascent:0,descent:0,fontSize:0},y=u.getImageData(0,0,p,v);if(!y)return g.ascent=f,g.descent=f+6,g.fontSize=g.ascent+g.descent,r.remove(a),g;var m,x,b=y.data,w=b.length,T=4*p,S=0,C=!1;for(m=0;m<f;m++){for(x=0;x<T;x+=4)if(b[S+x]!==255){C=!0;break}if(C)break;S+=T}for(g.ascent=f-m,S=w-T,C=!1,m=v;m>f;m--){for(x=0;x<T;x+=4)if(b[S+x]!==255){C=!0;break}if(C)break;S-=T}return g.descent=m-f,g.fontSize=g.ascent+g.descent,r.remove(a),g}},50171:(s,o,i)=>{var r=i(40366),h=i(27919),a=i(83419),u=i(31401),l=i(95643),d=i(14220),c=i(35154),p=i(35846),f=i(61771),v=i(35762),g=i(45650),y=new a({Extends:l,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.PostPipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,f],initialize:function(m,x,b,w,T){x===void 0&&(x=0),b===void 0&&(b=0),l.call(this,m,"Text"),this.renderer=m.sys.renderer,this.setPosition(x,b),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=h.create(this),this.context,this.style=new v(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=g(),this.texture=m.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(w),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(m){var x=this.style;if(x.wordWrapCallback){var b=x.wordWrapCallback.call(x.wordWrapCallbackScope,m,this);return Array.isArray(b)&&(b=b.join(`
`)),b}return x.wordWrapWidth?x.wordWrapUseAdvanced?this.advancedWordWrap(m,this.context,this.style.wordWrapWidth):this.basicWordWrap(m,this.context,this.style.wordWrapWidth):m},advancedWordWrap:function(m,x,b){for(var w="",T=m.replace(/ +/gi," ").split(this.splitRegExp),S=T.length,C=0;C<S;C++){var E=T[C],M="";if(E=E.replace(/^ *|\s*$/gi,""),x.measureText(E).width<b)w+=E+`
`;else{for(var _=b,O=E.split(" "),k=0;k<O.length;k++){var P=O[k],A=P+" ",L=x.measureText(A).width;if(L>_){if(k===0){for(var D=A;D.length&&(D=D.slice(0,-1),!((L=x.measureText(D).width)<=_)););if(!D.length)throw new Error("wordWrapWidth < a single character");var F=P.substr(D.length);O[k]=F,M+=D}var X=O[k].length?k:k+1,z=O.slice(X).join(" ").replace(/[ \n]*$/gi,"");T.splice(C+1,0,z),S=T.length;break}M+=A,_-=L}w+=M.replace(/[ \n]*$/gi,"")+`
`}}return w.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(m,x,b){for(var w="",T=m.split(this.splitRegExp),S=T.length-1,C=x.measureText(" ").width,E=0;E<=S;E++){for(var M=b,_=T[E].split(" "),O=_.length-1,k=0;k<=O;k++){var P=_[k],A=x.measureText(P).width,L=A;k<O&&(L+=C),L>M&&k>0&&(w+=`
`,M=b),w+=P,k<O?(w+=" ",M-=L):M-=A}E<S&&(w+=`
`)}return w},getWrappedText:function(m){return m===void 0&&(m=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(m).split(this.splitRegExp)},setText:function(m){return m||m===0||(m=""),Array.isArray(m)&&(m=m.join(`
`)),m!==this._text&&(this._text=m.toString(),this.updateText()),this},appendText:function(m,x){x===void 0&&(x=!0),m||m===0||(m=""),Array.isArray(m)&&(m=m.join(`
`)),m=m.toString();var b=this._text.concat(x?`
`+m:m);return b!==this._text&&(this._text=b,this.updateText()),this},setStyle:function(m){return this.style.setStyle(m)},setFont:function(m){return this.style.setFont(m)},setFontFamily:function(m){return this.style.setFontFamily(m)},setFontSize:function(m){return this.style.setFontSize(m)},setFontStyle:function(m){return this.style.setFontStyle(m)},setFixedSize:function(m,x){return this.style.setFixedSize(m,x)},setBackgroundColor:function(m){return this.style.setBackgroundColor(m)},setFill:function(m){return this.style.setFill(m)},setColor:function(m){return this.style.setColor(m)},setStroke:function(m,x){return this.style.setStroke(m,x)},setShadow:function(m,x,b,w,T,S){return this.style.setShadow(m,x,b,w,T,S)},setShadowOffset:function(m,x){return this.style.setShadowOffset(m,x)},setShadowColor:function(m){return this.style.setShadowColor(m)},setShadowBlur:function(m){return this.style.setShadowBlur(m)},setShadowStroke:function(m){return this.style.setShadowStroke(m)},setShadowFill:function(m){return this.style.setShadowFill(m)},setWordWrapWidth:function(m,x){return this.style.setWordWrapWidth(m,x)},setWordWrapCallback:function(m,x){return this.style.setWordWrapCallback(m,x)},setAlign:function(m){return this.style.setAlign(m)},setResolution:function(m){return this.style.setResolution(m)},setLineSpacing:function(m){return this.lineSpacing=m,this.updateText()},setLetterSpacing:function(m){return this.letterSpacing=m,this.updateText()},setPadding:function(m,x,b,w){if(typeof m=="object"){var T=m,S=c(T,"x",null);S!==null?(m=S,b=S):(m=c(T,"left",0),b=c(T,"right",m));var C=c(T,"y",null);C!==null?(x=C,w=C):(x=c(T,"top",0),w=c(T,"bottom",x))}else m===void 0&&(m=0),x===void 0&&(x=m),b===void 0&&(b=m),w===void 0&&(w=x);return this.padding.left=m,this.padding.top=x,this.padding.right=b,this.padding.bottom=w,this.updateText()},setMaxLines:function(m){return this.style.setMaxLines(m)},setRTL:function(m){m===void 0&&(m=!0);var x=this.style;return x.rtl===m||(x.rtl=m,m?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),x.align==="left"?x.align="right":x.align==="right"&&(x.align="left")),this},updateText:function(){var m=this.canvas,x=this.context,b=this.style,w=b.resolution,T=b.metrics;b.syncFont(m,x);var S=this._text;(b.wordWrapWidth||b.wordWrapCallback)&&(S=this.runWordWrap(this._text));var C,E=S.split(this.splitRegExp),M=d(this,T,E),_=this.padding;b.fixedWidth===0?(this.width=M.width+_.left+_.right,C=M.width):(this.width=b.fixedWidth,(C=this.width-_.left-_.right)<M.width&&(C=M.width)),b.fixedHeight===0?this.height=M.height+_.top+_.bottom:this.height=b.fixedHeight;var O,k,P=this.width,A=this.height;this.updateDisplayOrigin(),P*=w,A*=w,P=Math.max(P,1),A=Math.max(A,1),m.width!==P||m.height!==A?(m.width=P,m.height=A,this.frame.setSize(P,A),b.syncFont(m,x),b.rtl&&(x.direction="rtl")):x.clearRect(0,0,P,A),x.save(),x.scale(w,w),b.backgroundColor&&(x.fillStyle=b.backgroundColor,x.fillRect(0,0,P,A)),b.syncStyle(m,x),x.translate(_.left,_.top);for(var L=0;L<M.lines;L++){if(O=b.strokeThickness/2,k=b.strokeThickness/2+L*M.lineHeight+T.ascent,L>0&&(k+=M.lineSpacing*L),b.rtl)O=P-O-_.left-_.right;else if(b.align==="right")O+=C-M.lineWidths[L];else if(b.align==="center")O+=(C-M.lineWidths[L])/2;else if(b.align==="justify"&&M.lineWidths[L]/M.width>=.85){var D=M.width-M.lineWidths[L],F=x.measureText(" ").width,X=E[L].trim(),z=X.split(" ");D+=(E[L].length-X.length)*F;for(var Y=Math.floor(D/F),R=0;Y>0;)z[R]+=" ",R=(R+1)%(z.length-1||1),--Y;E[L]=z.join(" ")}if(this.autoRound&&(O=Math.round(O),k=Math.round(k)),b.strokeThickness&&(b.syncShadow(x,b.shadowStroke),x.strokeText(E[L],O,k)),b.color){b.syncShadow(x,b.shadowFill);var B=this.letterSpacing;if(B!==0)for(var I=0,G=E[L].split(""),N=0;N<G.length;N++)x.fillText(G[N],O+I,k),I+=x.measureText(G[N]).width+B;else x.fillText(E[L],O,k)}}x.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(m,this.frame.source.glTexture,!0));var W=this.input;return W&&!W.customHitArea&&(W.hitArea.width=this.width,W.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(m){this.setText(m)}},toJSON:function(){var m=u.ToJSON(this),x={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return m.data=x,m},preDestroy:function(){p(this.canvas),h.remove(this.canvas);var m=this.texture;m&&m.destroy()}});s.exports=y},79724:s=>{s.exports=function(o,i,r,h){i.width!==0&&i.height!==0&&(r.addToRenderList(i),o.batchSprite(i,i.frame,r,h))}},71259:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(50171);h.register("text",function(l,d){l===void 0&&(l={});var c=a(l,"text",""),p=a(l,"style",null),f=a(l,"padding",null);f!==null&&(p.padding=f);var v=new u(this.scene,0,0,c,p);return d!==void 0&&(l.add=d),r(this.scene,v,l),v.autoRound=a(l,"autoRound",!0),v.resolution=a(l,"resolution",1),v})},68005:(s,o,i)=>{var r=i(50171);i(39429).register("text",function(h,a,u,l){return this.displayList.add(new r(this.scene,h,a,u,l))})},61771:(s,o,i)=>{var r,h;i(29747),r=i(34397),h=i(79724),s.exports={renderWebGL:r,renderCanvas:h}},35762:(s,o,i)=>{var r=i(83419),h=i(23568),a=i(35154),u=i(79557),l={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},d=new r({initialize:function(c,p){this.parent=c,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(p,!1,!0)},setStyle:function(c,p,f){for(var v in p===void 0&&(p=!0),f===void 0&&(f=!1),c&&c.hasOwnProperty("fontSize")&&typeof c.fontSize=="number"&&(c.fontSize=c.fontSize.toString()+"px"),l){var g=f?l[v][1]:this[v];this[v]=v==="wordWrapCallback"||v==="wordWrapCallbackScope"?a(c,l[v][0],g):h(c,l[v][0],g)}var y=a(c,"font",null);y!==null&&this.setFont(y,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var m=a(c,"fill",null);m!==null&&(this.color=m);var x=a(c,"metrics",!1);return x?this.metrics={ascent:a(x,"ascent",0),descent:a(x,"descent",0),fontSize:a(x,"fontSize",0)}:!p&&this.metrics||(this.metrics=u(this)),p?this.parent.updateText():this.parent},syncFont:function(c,p){p.font=this._font},syncStyle:function(c,p){p.textBaseline="alphabetic",p.fillStyle=this.color,p.strokeStyle=this.stroke,p.lineWidth=this.strokeThickness,p.lineCap="round",p.lineJoin="round"},syncShadow:function(c,p){p?(c.shadowOffsetX=this.shadowOffsetX,c.shadowOffsetY=this.shadowOffsetY,c.shadowColor=this.shadowColor,c.shadowBlur=this.shadowBlur):(c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowColor=0,c.shadowBlur=0)},update:function(c){return c&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=u(this)),this.parent.updateText()},setFont:function(c,p){p===void 0&&(p=!0);var f=c,v="",g="";if(typeof c!="string")f=a(c,"fontFamily","Courier"),v=a(c,"fontSize","16px"),g=a(c,"fontStyle","");else{var y=c.split(" "),m=0;g=y.length>2?y[m++]:"",v=y[m++]||"16px",f=y[m++]||"Courier"}return f===this.fontFamily&&v===this.fontSize&&g===this.fontStyle||(this.fontFamily=f,this.fontSize=v,this.fontStyle=g,p&&this.update(!0)),this.parent},setFontFamily:function(c){return this.fontFamily!==c&&(this.fontFamily=c,this.update(!0)),this.parent},setFontStyle:function(c){return this.fontStyle!==c&&(this.fontStyle=c,this.update(!0)),this.parent},setFontSize:function(c){return typeof c=="number"&&(c=c.toString()+"px"),this.fontSize!==c&&(this.fontSize=c,this.update(!0)),this.parent},setTestString:function(c){return this.testString=c,this.update(!0)},setFixedSize:function(c,p){return this.fixedWidth=c,this.fixedHeight=p,c&&(this.parent.width=c),p&&(this.parent.height=p),this.update(!1)},setBackgroundColor:function(c){return this.backgroundColor=c,this.update(!1)},setFill:function(c){return this.color=c,this.update(!1)},setColor:function(c){return this.color=c,this.update(!1)},setResolution:function(c){return this.resolution=c,this.update(!1)},setStroke:function(c,p){return p===void 0&&(p=this.strokeThickness),c===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):this.stroke===c&&this.strokeThickness===p||(this.stroke=c,this.strokeThickness=p,this.update(!0)),this.parent},setShadow:function(c,p,f,v,g,y){return c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f="#000"),v===void 0&&(v=0),g===void 0&&(g=!1),y===void 0&&(y=!0),this.shadowOffsetX=c,this.shadowOffsetY=p,this.shadowColor=f,this.shadowBlur=v,this.shadowStroke=g,this.shadowFill=y,this.update(!1)},setShadowOffset:function(c,p){return c===void 0&&(c=0),p===void 0&&(p=c),this.shadowOffsetX=c,this.shadowOffsetY=p,this.update(!1)},setShadowColor:function(c){return c===void 0&&(c="#000"),this.shadowColor=c,this.update(!1)},setShadowBlur:function(c){return c===void 0&&(c=0),this.shadowBlur=c,this.update(!1)},setShadowStroke:function(c){return this.shadowStroke=c,this.update(!1)},setShadowFill:function(c){return this.shadowFill=c,this.update(!1)},setWordWrapWidth:function(c,p){return p===void 0&&(p=!1),this.wordWrapWidth=c,this.wordWrapUseAdvanced=p,this.update(!1)},setWordWrapCallback:function(c,p){return p===void 0&&(p=null),this.wordWrapCallback=c,this.wordWrapCallbackScope=p,this.update(!1)},setAlign:function(c){return c===void 0&&(c="left"),this.align=c,this.update(!1)},setMaxLines:function(c){return c===void 0&&(c=0),this.maxLines=c,this.update(!1)},getTextMetrics:function(){var c=this.metrics;return{ascent:c.ascent,descent:c.descent,fontSize:c.fontSize}},toJSON:function(){var c={};for(var p in l)c[p]=this[p];return c.metrics=this.getTextMetrics(),c},destroy:function(){this.parent=void 0}});s.exports=d},34397:(s,o,i)=>{var r=i(70554);s.exports=function(h,a,u,l){if(a.width!==0&&a.height!==0){u.addToRenderList(a);var d=a.frame,c=d.width,p=d.height,f=r.getTintAppendFloatAlpha,v=h.pipelines.set(a.pipeline,a),g=v.setTexture2D(d.glTexture,a);v.batchTexture(a,d.glTexture,c,p,a.x,a.y,c/a.style.resolution,p/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,c,p,f(a.tintTopLeft,u.alpha*a._alphaTL),f(a.tintTopRight,u.alpha*a._alphaTR),f(a.tintBottomLeft,u.alpha*a._alphaBL),f(a.tintBottomRight,u.alpha*a._alphaBR),a.tintFill,0,0,u,l,!1,g)}}},20839:(s,o,i)=>{var r=i(27919),h=i(83419),a=i(31401),u=i(95643),l=i(98439),d=i(68703),c=i(56295),p=i(45650),f=i(26099),v=new h({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,c],initialize:function(g,y,m,x,b,w,T){var S=g.sys.renderer;u.call(this,g,"TileSprite");var C=g.sys.textures.get(w),E=C.get(T);E.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),E=(C=g.sys.textures.get("__MISSING")).get()),C.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),E=(C=g.sys.textures.get("__MISSING")).get()),x&&b?(x=Math.floor(x),b=Math.floor(b)):(x=E.width,b=E.height),this._tilePosition=new f,this._tileScale=new f(1,1),this.dirty=!1,this.renderer=S,this.canvas=r.create(this,x,b),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=C,this.displayFrame=E,this._crop=this.resetCropObject(),this._textureKey=p(),this.texture=g.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=l(E.width),this.potHeight=l(E.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(y,m),this.setSize(x,b),this.setFrame(T),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(g,y){return this.displayTexture=this.scene.sys.textures.get(g),this.setFrame(y)},setFrame:function(g){var y=this.displayTexture.get(g);return this.potWidth=l(y.width),this.potHeight=l(y.height),this.canvas.width=0,y.cutWidth&&y.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=y,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(g,y){return g!==void 0&&(this.tilePositionX=g),y!==void 0&&(this.tilePositionY=y),this},setTileScale:function(g,y){return g===void 0&&(g=this.tileScaleX),y===void 0&&(y=g),this.tileScaleX=g,this.tileScaleY=y,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var g=this.displayFrame;if(g.source.isRenderTexture||g.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var y=this.fillContext,m=this.fillCanvas,x=this.potWidth,b=this.potHeight;this.renderer&&this.renderer.gl||(x=g.cutWidth,b=g.cutHeight),y.clearRect(0,0,x,b),m.width=x,m.height=b,y.drawImage(g.source.image,g.cutX,g.cutY,g.cutWidth,g.cutHeight,0,0,x,b),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(m,this.fillPattern):this.fillPattern=y.createPattern(m,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var g=this.canvas;if(g.width===this.width&&g.height===this.height||(g.width=this.width,g.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var y=this.context;this.scene.sys.game.config.antialias||d.disable(y);var m=this._tileScale.x,x=this._tileScale.y,b=this._tilePosition.x,w=this._tilePosition.y;y.clearRect(0,0,this.width,this.height),y.save(),y.scale(m,x),y.translate(-b,-w),y.fillStyle=this.fillPattern,y.fillRect(b,w,this.width/m,this.height/x),y.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var g=this.texture;g&&g.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(g){this._tilePosition.x=g,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(g){this._tilePosition.y=g,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(g){this._tileScale.x=g,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(g){this._tileScale.y=g,this.dirty=!0}}});s.exports=v},46992:s=>{s.exports=function(o,i,r,h){i.updateCanvas(),r.addToRenderList(i),o.batchSprite(i,i.frame,r,h)}},14167:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(20839);h.register("tileSprite",function(l,d){l===void 0&&(l={});var c=a(l,"x",0),p=a(l,"y",0),f=a(l,"width",512),v=a(l,"height",512),g=a(l,"key",""),y=a(l,"frame",""),m=new u(this.scene,c,p,f,v,g,y);return d!==void 0&&(l.add=d),r(this.scene,m,l),m})},91681:(s,o,i)=>{var r=i(20839);i(39429).register("tileSprite",function(h,a,u,l,d,c){return this.displayList.add(new r(this.scene,h,a,u,l,d,c))})},56295:(s,o,i)=>{var r,h;i(29747),r=i(18553),h=i(46992),s.exports={renderWebGL:r,renderCanvas:h}},18553:(s,o,i)=>{var r=i(70554);s.exports=function(h,a,u,l){a.updateCanvas();var d=a.width,c=a.height;if(d!==0&&c!==0){u.addToRenderList(a);var p=r.getTintAppendFloatAlpha,f=h.pipelines.set(a.pipeline,a),v=f.setTexture2D(a.fillPattern,a);f.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,d,c,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*d,a.originY*c,0,0,d,c,p(a.tintTopLeft,u.alpha*a._alphaTL),p(a.tintTopRight,u.alpha*a._alphaTR),p(a.tintBottomLeft,u.alpha*a._alphaBL),p(a.tintBottomRight,u.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,u,l,!1,v)}}},18471:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(31401),u=i(51708),l=i(8443),d=i(95643),c=i(36383),p=i(14463),f=i(45650),v=i(10247),g=new h({Extends:d,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.TextureCrop,a.Tint,a.Transform,a.Visible,v],initialize:function(y,m,x,b){d.call(this,y,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=f(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var w=y.sys.game;this._device=w.device.video,this.setPosition(m,x),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),w.events.on(l.PAUSE,this.globalPause,this),w.events.on(l.RESUME,this.globalResume,this);var T=y.sys.sound;T&&T.on(p.GLOBAL_MUTE,this.globalMute,this),b&&this.load(b)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(y){var m=this.scene.sys.cache.video.get(y);return m?(this.cacheKey=y,this.loadHandler(m.url,m.noAudio,m.crossOrigin)):console.warn("No video in cache for key: "+y),this},changeSource:function(y,m,x,b,w){m===void 0&&(m=!0),x===void 0&&(x=!1),this.cacheKey!==y&&(this.load(y),m&&this.play(x,b,w))},getVideoKey:function(){return this.cacheKey},loadURL:function(y,m,x){m===void 0&&(m=!1);var b=this._device.getVideoURL(y);return b?(this.cacheKey="",this.loadHandler(b.url,m,x)):console.warn("No supported video format found for "+y),this},loadMediaStream:function(y,m,x){return this.loadHandler(null,m,x,y)},loadHandler:function(y,m,x,b){m||(m=!1);var w=this.video;if(w?(this.removeLoadEventHandlers(),this.stop()):((w=document.createElement("video")).controls=!1,w.setAttribute("playsinline","playsinline"),w.setAttribute("preload","auto"),w.setAttribute("disablePictureInPicture","true")),m?(w.muted=!0,w.defaultMuted=!0,w.setAttribute("autoplay","autoplay")):(w.muted=!1,w.defaultMuted=!1,w.removeAttribute("autoplay")),x?w.setAttribute("crossorigin",x):w.removeAttribute("crossorigin"),b)if("srcObject"in w)try{w.srcObject=b}catch(S){if(S.name!=="TypeError")throw S;w.src=URL.createObjectURL(b)}else w.src=URL.createObjectURL(b);else w.src=y;this.retry=0,this.video=w,this._playCalled=!1,w.load(),this.addLoadEventHandlers();var T=this.scene.sys.textures.get(this._key);return this.setTexture(T),this},requestVideoFrame:function(y,m){var x=this.video;if(x){var b=m.width,w=m.height,T=this.videoTexture,S=this.videoTextureSource,C=!T||S.source!==x;C?(this._codePaused=x.paused,this._codeMuted=x.muted,T?(S.source=x,S.width=b,S.height=w,T.get().setSize(b,w)):((T=this.scene.sys.textures.create(this._key,x,b,w)).add("__BASE",0,0,0,b,w),this.setTexture(T),this.videoTexture=T,this.videoTextureSource=T.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(u.VIDEO_TEXTURE,this,T)),this.setSizeToFrame(),this.updateDisplayOrigin()):S.update(),this.isStalled=!1,this.metadata=m;var E=m.mediaTime;C&&(this._lastUpdate=E,this.emit(u.VIDEO_CREATED,this,b,w),this.frameReady||(this.frameReady=!0,this.emit(u.VIDEO_PLAY,this))),this._playingMarker?E>=this._markerOut&&(x.loop?(x.currentTime=this._markerIn,this.emit(u.VIDEO_LOOP,this)):(this.stop(!1),this.emit(u.VIDEO_COMPLETE,this))):E<this._lastUpdate&&this.emit(u.VIDEO_LOOP,this),this._lastUpdate=E,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(y,m,x){m===void 0&&(m=-1),x===void 0&&(x=c.MAX_SAFE_INTEGER);var b=this.video;return!b||this.isPlaying()?(b||console.warn("Video not loaded"),this):(y===void 0&&(y=b.loop),b.loop=y,this._markerIn=m,this._markerOut=x,this._playingMarker=m>-1&&x>m&&x<c.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=b.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var y=this.video;y&&(y.addEventListener("error",this._loadCallbackHandler),y.addEventListener("abort",this._loadCallbackHandler),y.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var y=this.video;y&&(y.removeEventListener("error",this._loadCallbackHandler),y.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var y=this.video;if(y){var m=this._callbacks;for(var x in m)y.addEventListener(x,m[x])}},removeEventHandlers:function(){var y=this.video;if(y){var m=this._callbacks;for(var x in m)y.removeEventListener(x,m[x])}},createPlayPromise:function(y){y===void 0&&(y=!0);var m=this.video,x=m.play();if(x!==void 0){var b=this.playSuccess.bind(this),w=this.playError.bind(this);if(!y){var T=this;w=function(){T.failedPlayAttempts++}}x.then(b).catch(w)}else m.addEventListener("playing",this._callbacks.legacy),y||this.failedPlayAttempts++},addMarker:function(y,m,x){return!isNaN(m)&&m>=0&&!isNaN(x)&&x>m&&(this.markers[y]=[m,x]),this},playMarker:function(y,m){var x=this.markers[y];return x&&this.play(m,x[0],x[1]),this},removeMarker:function(y){return delete this.markers[y],this},snapshot:function(y,m){return y===void 0&&(y=this.width),m===void 0&&(m=this.height),this.snapshotArea(0,0,this.width,this.height,y,m)},snapshotArea:function(y,m,x,b,w,T){y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=this.width),b===void 0&&(b=this.height),w===void 0&&(w=x),T===void 0&&(T=b);var S=this.video,C=this.snapshotTexture;return C?(C.setSize(w,T),S&&C.context.drawImage(S,y,m,x,b,0,0,w,T)):(C=this.scene.sys.textures.createCanvas(f(),w,T),this.snapshotTexture=C,S&&C.context.drawImage(S,y,m,x,b,0,0,w,T)),C.update()},saveSnapshotTexture:function(y){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,y):this.snapshotTexture=this.scene.sys.textures.createCanvas(y,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(u.VIDEO_UNLOCKED,this));var y=this.scene.sys.sound;y&&y.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(y){var m=y.name;m==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(u.VIDEO_LOCKED,this)):m==="NotSupportedError"?(this.stop(!1),this.emit(u.VIDEO_UNSUPPORTED,this,y)):(this.stop(!1),this.emit(u.VIDEO_ERROR,this,y))},legacyPlayHandler:function(){var y=this.video;y&&(this.playSuccess(),y.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(u.VIDEO_PLAYING,this)},loadErrorHandler:function(y){this.stop(!1),this.emit(u.VIDEO_ERROR,this,y)},metadataHandler:function(y){this.emit(u.VIDEO_METADATA,this,y)},setSizeToFrame:function(y){y||(y=this.frame),this.width=y.realWidth,this.height=y.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var m=this.input;return m&&!m.customHitArea&&(m.hitArea.width=this.width,m.hitArea.height=this.height),this},stalledHandler:function(y){this.isStalled=!0,this.emit(u.VIDEO_STALLED,this,y)},completeHandler:function(){this._playCalled=!1,this.emit(u.VIDEO_COMPLETE,this)},preUpdate:function(y,m){this.video&&this._playCalled&&this.touchLocked&&this.playWhenUnlocked&&(this.retry+=m,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(y){var m=this.video;if(m){var x=m.duration;if(x!==1/0&&!isNaN(x)){var b=x*y;this.setCurrentTime(b)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(y){var m=this.video;if(m){if(typeof y=="string"){var x=y[0],b=parseFloat(y.substr(1));x==="+"?y=m.currentTime+b:x==="-"&&(y=m.currentTime-b)}m.currentTime=y}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(u.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(u.VIDEO_SEEKED,this)},getProgress:function(){var y=this.video;if(y){var m=y.duration;if(m!==1/0&&!isNaN(m))return y.currentTime/m}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(y){y===void 0&&(y=!0),this._codeMuted=y;var m=this.video;return m&&(m.muted=!!this._systemMuted||y),this},isMuted:function(){return this._codeMuted},globalMute:function(y,m){this._systemMuted=m;var x=this.video;x&&(x.muted=!!this._codeMuted||m)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,!this.video||this._codePaused||this.video.ended||this.createPlayPromise()},setPaused:function(y){y===void 0&&(y=!0);var m=this.video;return this._codePaused=y,m&&!m.ended&&(y?m.paused||(this.removeEventHandlers(),m.pause()):y||(this._playCalled?m.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(y){return y===void 0&&(y=1),this.video&&(this.video.volume=r(y,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(y){return this.video&&(this.video.playbackRate=y),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(y){return y===void 0&&(y=!0),this.video&&(this.video.loop=y),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(y,m){return m===void 0&&(m=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,y),this.videoTextureSource.setFlipY(m)),this._key=y,this.flipY=m,!!this.videoTexture},stop:function(y){y===void 0&&(y=!0);var m=this.video;return m&&(this.removeEventHandlers(),m.cancelVideoFrameCallback(this._rfvCallbackId),m.pause()),this.retry=0,this._playCalled=!1,y&&this.emit(u.VIDEO_STOP,this),this},removeVideoElement:function(){var y=this.video;if(y){for(y.parentNode&&y.parentNode.removeChild(y);y.hasChildNodes();)y.removeChild(y.firstChild);y.removeAttribute("autoplay"),y.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var y=this.scene.sys.game.events;y.off(l.PAUSE,this.globalPause,this),y.off(l.RESUME,this.globalResume,this);var m=this.scene.sys.sound;m&&m.off(p.GLOBAL_MUTE,this.globalMute,this)}});s.exports=g},58352:s=>{s.exports=function(o,i,r,h){i.videoTexture&&(r.addToRenderList(i),o.batchSprite(i,i.frame,r,h))}},11511:(s,o,i)=>{var r=i(25305),h=i(44603),a=i(23568),u=i(18471);h.register("video",function(l,d){l===void 0&&(l={});var c=a(l,"key",null),p=new u(this.scene,0,0,c);return d!==void 0&&(l.add=d),r(this.scene,p,l),p})},89025:(s,o,i)=>{var r=i(18471);i(39429).register("video",function(h,a,u){return this.displayList.add(new r(this.scene,h,a,u))})},10247:(s,o,i)=>{var r,h;i(29747),r=i(29849),h=i(58352),s.exports={renderWebGL:r,renderCanvas:h}},29849:s=>{s.exports=function(o,i,r,h){i.videoTexture&&(r.addToRenderList(i),i.pipeline.batchSprite(i,r,h))}},41481:(s,o,i)=>{var r=i(10312),h=i(96503),a=i(87902),u=i(83419),l=i(31401),d=i(95643),c=i(87841),p=i(37303),f=new u({Extends:d,Mixins:[l.Depth,l.GetBounds,l.Origin,l.Transform,l.ScrollFactor,l.Visible],initialize:function(v,g,y,m,x){m===void 0&&(m=1),x===void 0&&(x=m),d.call(this,v,"Zone"),this.setPosition(g,y),this.width=m,this.height=x,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(v){this.scaleX=v/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(v){this.scaleY=v/this.height}},setSize:function(v,g,y){y===void 0&&(y=!0),this.width=v,this.height=g,this.updateDisplayOrigin();var m=this.input;return y&&m&&!m.customHitArea&&(m.hitArea.width=v,m.hitArea.height=g),this},setDisplaySize:function(v,g){return this.displayWidth=v,this.displayHeight=g,this},setCircleDropZone:function(v){return this.setDropZone(new h(0,0,v),a)},setRectangleDropZone:function(v,g){return this.setDropZone(new c(0,0,v,g),p)},setDropZone:function(v,g){return this.input||this.setInteractive(v,g,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(v,g,y){y.addToRenderList(g)},renderWebGL:function(v,g,y){y.addToRenderList(g)}});s.exports=f},95261:(s,o,i)=>{var r=i(44603),h=i(23568),a=i(41481);r.register("zone",function(u){var l=h(u,"x",0),d=h(u,"y",0),c=h(u,"width",1),p=h(u,"height",c);return new a(this.scene,l,d,c,p)})},84175:(s,o,i)=>{var r=i(41481);i(39429).register("zone",function(h,a,u,l){return this.displayList.add(new r(this.scene,h,a,u,l))})},95166:s=>{s.exports=function(o){return o.radius>0?Math.PI*o.radius*o.radius:0}},96503:(s,o,i)=>{var r=i(83419),h=i(87902),a=i(26241),u=i(79124),l=i(23777),d=i(28176),c=new r({initialize:function(p,f,v){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),this.type=l.CIRCLE,this.x=p,this.y=f,this._radius=v,this._diameter=2*v},contains:function(p,f){return h(this,p,f)},getPoint:function(p,f){return a(this,p,f)},getPoints:function(p,f,v){return u(this,p,f,v)},getRandomPoint:function(p){return d(this,p)},setTo:function(p,f,v){return this.x=p,this.y=f,this._radius=v,this._diameter=2*v,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(p,f){return f===void 0&&(f=p),this.x=p,this.y=f,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(p){this._radius=p,this._diameter=2*p}},diameter:{get:function(){return this._diameter},set:function(p){this._diameter=p,this._radius=.5*p}},left:{get:function(){return this.x-this._radius},set:function(p){this.x=p+this._radius}},right:{get:function(){return this.x+this._radius},set:function(p){this.x=p-this._radius}},top:{get:function(){return this.y-this._radius},set:function(p){this.y=p+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(p){this.y=p-this._radius}}});s.exports=c},71562:s=>{s.exports=function(o){return Math.PI*o.radius*2}},92110:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u){return u===void 0&&(u=new r),u.x=h.x+h.radius*Math.cos(a),u.y=h.y+h.radius*Math.sin(a),u}},42250:(s,o,i)=>{var r=i(96503);s.exports=function(h){return new r(h.x,h.y,h.radius)}},87902:s=>{s.exports=function(o,i,r){return o.radius>0&&i>=o.left&&i<=o.right&&r>=o.top&&r<=o.bottom&&(o.x-i)*(o.x-i)+(o.y-r)*(o.y-r)<=o.radius*o.radius}},5698:(s,o,i)=>{var r=i(87902);s.exports=function(h,a){return r(h,a.x,a.y)}},70588:(s,o,i)=>{var r=i(87902);s.exports=function(h,a){return r(h,a.x,a.y)&&r(h,a.right,a.y)&&r(h,a.x,a.bottom)&&r(h,a.right,a.bottom)}},26394:s=>{s.exports=function(o,i){return i.setTo(o.x,o.y,o.radius)}},76278:s=>{s.exports=function(o,i){return o.x===i.x&&o.y===i.y&&o.radius===i.radius}},2074:(s,o,i)=>{var r=i(87841);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=h.left,a.y=h.top,a.width=h.diameter,a.height=h.diameter,a}},26241:(s,o,i)=>{var r=i(92110),h=i(62945),a=i(36383),u=i(2141);s.exports=function(l,d,c){c===void 0&&(c=new u);var p=h(d,0,a.PI2);return r(l,p,c)}},79124:(s,o,i)=>{var r=i(71562),h=i(92110),a=i(62945),u=i(36383);s.exports=function(l,d,c,p){p===void 0&&(p=[]),!d&&c>0&&(d=r(l)/c);for(var f=0;f<d;f++){var v=a(f/d,0,u.PI2);p.push(h(l,v))}return p}},50884:s=>{s.exports=function(o,i,r){return o.x+=i,o.y+=r,o}},39212:s=>{s.exports=function(o,i){return o.x+=i.x,o.y+=i.y,o}},28176:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){a===void 0&&(a=new r);var u=2*Math.PI*Math.random(),l=Math.random()+Math.random(),d=l>1?2-l:l,c=d*Math.cos(u),p=d*Math.sin(u);return a.x=h.x+c*h.radius,a.y=h.y+p*h.radius,a}},88911:(s,o,i)=>{var r=i(96503);r.Area=i(95166),r.Circumference=i(71562),r.CircumferencePoint=i(92110),r.Clone=i(42250),r.Contains=i(87902),r.ContainsPoint=i(5698),r.ContainsRect=i(70588),r.CopyFrom=i(26394),r.Equals=i(76278),r.GetBounds=i(2074),r.GetPoint=i(26241),r.GetPoints=i(79124),r.Offset=i(50884),r.OffsetPoint=i(39212),r.Random=i(28176),s.exports=r},23777:s=>{s.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},78874:s=>{s.exports=function(o){return o.isEmpty()?0:o.getMajorRadius()*o.getMinorRadius()*Math.PI}},92990:s=>{s.exports=function(o){var i=o.width/2,r=o.height/2,h=Math.pow(i-r,2)/Math.pow(i+r,2);return Math.PI*(i+r)*(1+3*h/(10+Math.sqrt(4-3*h)))}},79522:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u){u===void 0&&(u=new r);var l=h.width/2,d=h.height/2;return u.x=h.x+l*Math.cos(a),u.y=h.y+d*Math.sin(a),u}},58102:(s,o,i)=>{var r=i(8497);s.exports=function(h){return new r(h.x,h.y,h.width,h.height)}},81154:s=>{s.exports=function(o,i,r){if(o.width<=0||o.height<=0)return!1;var h=(i-o.x)/o.width,a=(r-o.y)/o.height;return(h*=h)+(a*=a)<.25}},46662:(s,o,i)=>{var r=i(81154);s.exports=function(h,a){return r(h,a.x,a.y)}},1632:(s,o,i)=>{var r=i(81154);s.exports=function(h,a){return r(h,a.x,a.y)&&r(h,a.right,a.y)&&r(h,a.x,a.bottom)&&r(h,a.right,a.bottom)}},65534:s=>{s.exports=function(o,i){return i.setTo(o.x,o.y,o.width,o.height)}},8497:(s,o,i)=>{var r=i(83419),h=i(81154),a=i(90549),u=i(48320),l=i(23777),d=i(24820),c=new r({initialize:function(p,f,v,g){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=l.ELLIPSE,this.x=p,this.y=f,this.width=v,this.height=g},contains:function(p,f){return h(this,p,f)},getPoint:function(p,f){return a(this,p,f)},getPoints:function(p,f,v){return u(this,p,f,v)},getRandomPoint:function(p){return d(this,p)},setTo:function(p,f,v,g){return this.x=p,this.y=f,this.width=v,this.height=g,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(p,f){return f===void 0&&(f=p),this.x=p,this.y=f,this},setSize:function(p,f){return f===void 0&&(f=p),this.width=p,this.height=f,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(p){this.x=p+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(p){this.x=p-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(p){this.y=p+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(p){this.y=p-this.height/2}}});s.exports=c},36146:s=>{s.exports=function(o,i){return o.x===i.x&&o.y===i.y&&o.width===i.width&&o.height===i.height}},23694:(s,o,i)=>{var r=i(87841);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=h.left,a.y=h.top,a.width=h.width,a.height=h.height,a}},90549:(s,o,i)=>{var r=i(79522),h=i(62945),a=i(36383),u=i(2141);s.exports=function(l,d,c){c===void 0&&(c=new u);var p=h(d,0,a.PI2);return r(l,p,c)}},48320:(s,o,i)=>{var r=i(92990),h=i(79522),a=i(62945),u=i(36383);s.exports=function(l,d,c,p){p===void 0&&(p=[]),!d&&c>0&&(d=r(l)/c);for(var f=0;f<d;f++){var v=a(f/d,0,u.PI2);p.push(h(l,v))}return p}},73424:s=>{s.exports=function(o,i,r){return o.x+=i,o.y+=r,o}},44808:s=>{s.exports=function(o,i){return o.x+=i.x,o.y+=i.y,o}},24820:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){a===void 0&&(a=new r);var u=Math.random()*Math.PI*2,l=Math.sqrt(Math.random());return a.x=h.x+l*Math.cos(u)*h.width/2,a.y=h.y+l*Math.sin(u)*h.height/2,a}},49203:(s,o,i)=>{var r=i(8497);r.Area=i(78874),r.Circumference=i(92990),r.CircumferencePoint=i(79522),r.Clone=i(58102),r.Contains=i(81154),r.ContainsPoint=i(46662),r.ContainsRect=i(1632),r.CopyFrom=i(65534),r.Equals=i(36146),r.GetBounds=i(23694),r.GetPoint=i(90549),r.GetPoints=i(48320),r.Offset=i(73424),r.OffsetPoint=i(44808),r.Random=i(24820),s.exports=r},55738:(s,o,i)=>{var r=i(23777),h=i(79291),a={Circle:i(88911),Ellipse:i(49203),Intersects:i(91865),Line:i(2529),Mesh:i(73090),Point:i(43711),Polygon:i(58423),Rectangle:i(93232),Triangle:i(84435)};a=h(!1,a,r),s.exports=a},2044:(s,o,i)=>{var r=i(20339);s.exports=function(h,a){return r(h.x,h.y,a.x,a.y)<=h.radius+a.radius}},81491:s=>{s.exports=function(o,i){var r=i.width/2,h=i.height/2,a=Math.abs(o.x-i.x-r),u=Math.abs(o.y-i.y-h),l=r+o.radius,d=h+o.radius;if(a>l||u>d)return!1;if(a<=r||u<=h)return!0;var c=a-r,p=u-h;return c*c+p*p<=o.radius*o.radius}},63376:(s,o,i)=>{var r=i(2141),h=i(2044);s.exports=function(a,u,l){if(l===void 0&&(l=[]),h(a,u)){var d,c,p,f,v=a.x,g=a.y,y=a.radius,m=u.x,x=u.y,b=u.radius;if(g===x)(p=(c=-2*x)*c-4*(d=1)*(m*m+(f=(b*b-y*y-m*m+v*v)/(2*(v-m)))*f-2*m*f+x*x-b*b))==0?l.push(new r(f,-c/(2*d))):p>0&&(l.push(new r(f,(-c+Math.sqrt(p))/(2*d))),l.push(new r(f,(-c-Math.sqrt(p))/(2*d))));else{var w=(v-m)/(g-x),T=(b*b-y*y-m*m+v*v-x*x+g*g)/(2*(g-x));(p=(c=2*g*w-2*T*w-2*v)*c-4*(d=w*w+1)*(v*v+g*g+T*T-y*y-2*g*T))==0?(f=-c/(2*d),l.push(new r(f,T-f*w))):p>0&&(f=(-c+Math.sqrt(p))/(2*d),l.push(new r(f,T-f*w)),f=(-c-Math.sqrt(p))/(2*d),l.push(new r(f,T-f*w)))}}return l}},97439:(s,o,i)=>{var r=i(4042),h=i(81491);s.exports=function(a,u,l){if(l===void 0&&(l=[]),h(a,u)){var d=u.getLineA(),c=u.getLineB(),p=u.getLineC(),f=u.getLineD();r(d,a,l),r(c,a,l),r(p,a,l),r(f,a,l)}return l}},4042:(s,o,i)=>{var r=i(2141),h=i(80462);s.exports=function(a,u,l){if(l===void 0&&(l=[]),h(a,u)){var d,c,p=a.x1,f=a.y1,v=a.x2,g=a.y2,y=u.x,m=u.y,x=u.radius,b=v-p,w=g-f,T=p-y,S=f-m,C=b*b+w*w,E=2*(b*T+w*S),M=E*E-4*C*(T*T+S*S-x*x);if(M===0){var _=-E/(2*C);d=p+_*b,c=f+_*w,_>=0&&_<=1&&l.push(new r(d,c))}else if(M>0){var O=(-E-Math.sqrt(M))/(2*C);d=p+O*b,c=f+O*w,O>=0&&O<=1&&l.push(new r(d,c));var k=(-E+Math.sqrt(M))/(2*C);d=p+k*b,c=f+k*w,k>=0&&k<=1&&l.push(new r(d,c))}}return l}},36100:(s,o,i)=>{var r=i(25836);s.exports=function(h,a,u,l){u===void 0&&(u=!1);var d,c,p,f=h.x1,v=h.y1,g=h.x2,y=h.y2,m=a.x1,x=a.y1,b=g-f,w=y-v,T=a.x2-m,S=a.y2-x,C=b*S-w*T;if(C===0)return null;if(u){if((c=(m+T*(d=(b*(x-v)+w*(f-m))/(T*w-S*b))-f)/b)<0||d<0||d>1)return null;p=c}else{if(c=((v-x)*b-(f-m)*w)/C,(d=((m-f)*S-(x-v)*T)/C)<0||d>1||c<0||c>1)return null;p=d}return l===void 0&&(l=new r),l.set(f+b*p,v+w*p,p)}},3073:(s,o,i)=>{var r=i(36100),h=i(23031),a=i(25836),u=new h,l=new a;s.exports=function(d,c,p,f){p===void 0&&(p=!1),f===void 0&&(f=new a);var v=!1;f.set(),l.set();for(var g=c[c.length-1],y=0;y<c.length;y++){var m=c[y];u.setTo(g.x,g.y,m.x,m.y),g=m,r(d,u,p,l)&&(!v||l.z<f.z)&&(f.copy(l),v=!0)}return v?f:null}},56362:(s,o,i)=>{var r=i(25836),h=i(61369),a=i(3073),u=new r;s.exports=function(l,d,c,p){p===void 0&&(p=new h),Array.isArray(d)||(d=[d]);var f=!1;p.set(),u.set();for(var v=0;v<d.length;v++)a(l,d[v].points,c,u)&&(!f||u.z<p.z)&&(p.set(u.x,u.y,u.z,v),f=!0);return f?p:null}},60646:(s,o,i)=>{var r=i(2141),h=i(76112),a=i(92773);s.exports=function(u,l,d){if(d===void 0&&(d=[]),a(u,l))for(var c=l.getLineA(),p=l.getLineB(),f=l.getLineC(),v=l.getLineD(),g=[new r,new r,new r,new r],y=[h(c,u,g[0]),h(p,u,g[1]),h(f,u,g[2]),h(v,u,g[3])],m=0;m<4;m++)y[m]&&d.push(g[m]);return d}},71147:(s,o,i)=>{var r=i(61369),h=i(56362),a=new(i(23031));function u(d,c,p,f,v){var g=Math.cos(d),y=Math.sin(d);a.setTo(c,p,c+g,p+y);var m=h(a,f,!0);m&&v.push(new r(m.x,m.y,d,m.w))}function l(d,c){return d.z-c.z}s.exports=function(d,c,p){Array.isArray(p)||(p=[p]);for(var f=[],v=[],g=0;g<p.length;g++)for(var y=p[g].points,m=0;m<y.length;m++){var x=Math.atan2(y[m].y-c,y[m].x-d);v.indexOf(x)===-1&&(u(x,d,c,p,f),u(x-1e-5,d,c,p,f),u(x+1e-5,d,c,p,f),v.push(x))}return f.sort(l)}},68389:(s,o,i)=>{var r=i(87841),h=i(59996);s.exports=function(a,u,l){return l===void 0&&(l=new r),h(a,u)&&(l.x=Math.max(a.x,u.x),l.y=Math.max(a.y,u.y),l.width=Math.min(a.right,u.right)-l.x,l.height=Math.min(a.bottom,u.bottom)-l.y),l}},52784:(s,o,i)=>{var r=i(60646),h=i(59996);s.exports=function(a,u,l){if(l===void 0&&(l=[]),h(a,u)){var d=a.getLineA(),c=a.getLineB(),p=a.getLineC(),f=a.getLineD();r(d,u,l),r(c,u,l),r(p,u,l),r(f,u,l)}return l}},26341:(s,o,i)=>{var r=i(89265),h=i(60646);s.exports=function(a,u,l){if(l===void 0&&(l=[]),r(a,u)){var d=u.getLineA(),c=u.getLineB(),p=u.getLineC();h(d,a,l),h(c,a,l),h(p,a,l)}return l}},38720:(s,o,i)=>{var r=i(4042),h=i(67636);s.exports=function(a,u,l){if(l===void 0&&(l=[]),h(a,u)){var d=a.getLineA(),c=a.getLineB(),p=a.getLineC();r(d,u,l),r(c,u,l),r(p,u,l)}return l}},13882:(s,o,i)=>{var r=i(2141),h=i(2822),a=i(76112);s.exports=function(u,l,d){if(d===void 0&&(d=[]),h(u,l))for(var c=u.getLineA(),p=u.getLineB(),f=u.getLineC(),v=[new r,new r,new r],g=[a(c,l,v[0]),a(p,l,v[1]),a(f,l,v[2])],y=0;y<3;y++)g[y]&&d.push(v[y]);return d}},75636:(s,o,i)=>{var r=i(82944),h=i(13882);s.exports=function(a,u,l){if(l===void 0&&(l=[]),r(a,u)){var d=u.getLineA(),c=u.getLineB(),p=u.getLineC();h(a,d,l),h(a,c,l),h(a,p,l)}return l}},80462:(s,o,i)=>{var r=i(87902),h=new(i(2141));s.exports=function(a,u,l){if(l===void 0&&(l=h),r(u,a.x1,a.y1))return l.x=a.x1,l.y=a.y1,!0;if(r(u,a.x2,a.y2))return l.x=a.x2,l.y=a.y2,!0;var d=a.x2-a.x1,c=a.y2-a.y1,p=u.x-a.x1,f=u.y-a.y1,v=d*d+c*c,g=d,y=c;if(v>0){var m=(p*d+f*c)/v;g*=m,y*=m}return l.x=a.x1+g,l.y=a.y1+y,g*g+y*y<=v&&g*d+y*c>=0&&r(u,l.x,l.y)}},76112:s=>{s.exports=function(o,i,r){var h=o.x1,a=o.y1,u=o.x2,l=o.y2,d=i.x1,c=i.y1,p=i.x2,f=i.y2;if(h===u&&a===l||d===p&&c===f)return!1;var v=(f-c)*(u-h)-(p-d)*(l-a);if(v===0)return!1;var g=((p-d)*(a-c)-(f-c)*(h-d))/v,y=((u-h)*(a-c)-(l-a)*(h-d))/v;return!(g<0||g>1||y<0||y>1||(r&&(r.x=h+g*(u-h),r.y=a+g*(l-a)),0))}},92773:s=>{s.exports=function(o,i){var r=o.x1,h=o.y1,a=o.x2,u=o.y2,l=i.x,d=i.y,c=i.right,p=i.bottom,f=0;if(r>=l&&r<=c&&h>=d&&h<=p||a>=l&&a<=c&&u>=d&&u<=p)return!0;if(r<l&&a>=l){if((f=h+(u-h)*(l-r)/(a-r))>d&&f<=p)return!0}else if(r>c&&a<=c&&(f=h+(u-h)*(c-r)/(a-r))>=d&&f<=p)return!0;if(h<d&&u>=d){if((f=r+(a-r)*(d-h)/(u-h))>=l&&f<=c)return!0}else if(h>p&&u<=p&&(f=r+(a-r)*(p-h)/(u-h))>=l&&f<=c)return!0;return!1}},16204:s=>{s.exports=function(o,i,r){r===void 0&&(r=1);var h=i.x1,a=i.y1,u=i.x2,l=i.y2,d=o.x,c=o.y,p=(u-h)*(u-h)+(l-a)*(l-a);if(p===0)return!1;var f=((d-h)*(u-h)+(c-a)*(l-a))/p;if(f<0)return Math.sqrt((h-d)*(h-d)+(a-c)*(a-c))<=r;if(f>=0&&f<=1){var v=((a-c)*(u-h)-(h-d)*(l-a))/p;return Math.abs(v)*Math.sqrt(p)<=r}return Math.sqrt((u-d)*(u-d)+(l-c)*(l-c))<=r}},14199:(s,o,i)=>{var r=i(16204);s.exports=function(h,a){if(!r(h,a))return!1;var u=Math.min(a.x1,a.x2),l=Math.max(a.x1,a.x2),d=Math.min(a.y1,a.y2),c=Math.max(a.y1,a.y2);return h.x>=u&&h.x<=l&&h.y>=d&&h.y<=c}},59996:s=>{s.exports=function(o,i){return!(o.width<=0||o.height<=0||i.width<=0||i.height<=0||o.right<i.x||o.bottom<i.y||o.x>i.right||o.y>i.bottom)}},89265:(s,o,i)=>{var r=i(76112),h=i(37303),a=i(48653),u=i(77493);s.exports=function(l,d){if(d.left>l.right||d.right<l.left||d.top>l.bottom||d.bottom<l.top)return!1;var c=d.getLineA(),p=d.getLineB(),f=d.getLineC();if(h(l,c.x1,c.y1)||h(l,c.x2,c.y2)||h(l,p.x1,p.y1)||h(l,p.x2,p.y2)||h(l,f.x1,f.y1)||h(l,f.x2,f.y2))return!0;var v=l.getLineA(),g=l.getLineB(),y=l.getLineC(),m=l.getLineD();if(r(c,v)||r(c,g)||r(c,y)||r(c,m)||r(p,v)||r(p,g)||r(p,y)||r(p,m)||r(f,v)||r(f,g)||r(f,y)||r(f,m))return!0;var x=u(l);return a(d,x,!0).length>0}},84411:s=>{s.exports=function(o,i,r,h,a,u){return u===void 0&&(u=0),!(i>o.right+u||r<o.left-u||h>o.bottom+u||a<o.top-u)}},67636:(s,o,i)=>{var r=i(80462),h=i(10690);s.exports=function(a,u){return!(a.left>u.right||a.right<u.left||a.top>u.bottom||a.bottom<u.top||!h(a,u.x,u.y)&&!r(a.getLineA(),u)&&!r(a.getLineB(),u)&&!r(a.getLineC(),u))}},2822:(s,o,i)=>{var r=i(76112);s.exports=function(h,a){return!!(h.contains(a.x1,a.y1)||h.contains(a.x2,a.y2)||r(h.getLineA(),a)||r(h.getLineB(),a)||r(h.getLineC(),a))}},82944:(s,o,i)=>{var r=i(48653),h=i(71694),a=i(76112);s.exports=function(u,l){if(u.left>l.right||u.right<l.left||u.top>l.bottom||u.bottom<l.top)return!1;var d=u.getLineA(),c=u.getLineB(),p=u.getLineC(),f=l.getLineA(),v=l.getLineB(),g=l.getLineC();if(a(d,f)||a(d,v)||a(d,g)||a(c,f)||a(c,v)||a(c,g)||a(p,f)||a(p,v)||a(p,g))return!0;var y=h(u),m=r(l,y,!0);return m.length>0||(y=h(l),(m=r(u,y,!0)).length>0)}},91865:(s,o,i)=>{s.exports={CircleToCircle:i(2044),CircleToRectangle:i(81491),GetCircleToCircle:i(63376),GetCircleToRectangle:i(97439),GetLineToCircle:i(4042),GetLineToLine:i(36100),GetLineToPoints:i(3073),GetLineToPolygon:i(56362),GetLineToRectangle:i(60646),GetRaysFromPointToPolygon:i(71147),GetRectangleIntersection:i(68389),GetRectangleToRectangle:i(52784),GetRectangleToTriangle:i(26341),GetTriangleToCircle:i(38720),GetTriangleToLine:i(13882),GetTriangleToTriangle:i(75636),LineToCircle:i(80462),LineToLine:i(76112),LineToRectangle:i(92773),PointToLine:i(16204),PointToLineSegment:i(14199),RectangleToRectangle:i(59996),RectangleToTriangle:i(89265),RectangleToValues:i(84411),TriangleToCircle:i(67636),TriangleToLine:i(2822),TriangleToTriangle:i(82944)}},91938:s=>{s.exports=function(o){return Math.atan2(o.y2-o.y1,o.x2-o.x1)}},84993:s=>{s.exports=function(o,i,r){i===void 0&&(i=1),r===void 0&&(r=[]);var h=Math.round(o.x1),a=Math.round(o.y1),u=Math.round(o.x2),l=Math.round(o.y2),d=Math.abs(u-h),c=Math.abs(l-a),p=h<u?1:-1,f=a<l?1:-1,v=d-c;r.push({x:h,y:a});for(var g=1;h!==u||a!==l;){var y=v<<1;y>-c&&(v-=c,h+=p),y<d&&(v+=d,a+=f),g%i===0&&r.push({x:h,y:a}),g++}return r}},36469:s=>{s.exports=function(o,i,r){var h=i-(o.x1+o.x2)/2,a=r-(o.y1+o.y2)/2;return o.x1+=h,o.y1+=a,o.x2+=h,o.y2+=a,o}},31116:(s,o,i)=>{var r=i(23031);s.exports=function(h){return new r(h.x1,h.y1,h.x2,h.y2)}},59944:s=>{s.exports=function(o,i){return i.setTo(o.x1,o.y1,o.x2,o.y2)}},59220:s=>{s.exports=function(o,i){return o.x1===i.x1&&o.y1===i.y1&&o.x2===i.x2&&o.y2===i.y2}},78177:(s,o,i)=>{var r=i(35001);s.exports=function(h,a,u){u===void 0&&(u=a);var l=r(h),d=h.x2-h.x1,c=h.y2-h.y1;return a&&(h.x1=h.x1-d/l*a,h.y1=h.y1-c/l*a),u&&(h.x2=h.x2+d/l*u,h.y2=h.y2+c/l*u),h}},26708:(s,o,i)=>{var r=i(52816),h=i(6113),a=i(2141);s.exports=function(u,l,d,c,p){c===void 0&&(c=0),p===void 0&&(p=[]);var f,v,g=[],y=u.x1,m=u.y1,x=u.x2-y,b=u.y2-m,w=h(l,p),T=d-1;for(f=0;f<T;f++)v=w(f/T),g.push(new a(y+x*v,m+b*v));if(v=w(1),g.push(new a(y+x*v,m+b*v)),c>0){var S=g[0],C=[S];for(f=1;f<g.length-1;f++){var E=g[f];r(S,E)>=c&&(C.push(E),S=E)}var M=g[g.length-1];return r(S,M)<c&&C.pop(),C.push(M),C}return g}},32125:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=(h.x1+h.x2)/2,a.y=(h.y1+h.y2)/2,a}},99569:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u){u===void 0&&(u=new r);var l=h.x1,d=h.y1,c=h.x2,p=h.y2,f=(c-l)*(c-l)+(p-d)*(p-d);if(f===0)return u;var v=((a.x-l)*(c-l)+(a.y-d)*(p-d))/f;return u.x=l+v*(c-l),u.y=d+v*(p-d),u}},34638:(s,o,i)=>{var r=i(36383),h=i(91938),a=i(2141);s.exports=function(u,l){l===void 0&&(l=new a);var d=h(u)-r.TAU;return l.x=Math.cos(d),l.y=Math.sin(d),l}},13151:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u){return u===void 0&&(u=new r),u.x=h.x1+(h.x2-h.x1)*a,u.y=h.y1+(h.y2-h.y1)*a,u}},15258:(s,o,i)=>{var r=i(35001),h=i(2141);s.exports=function(a,u,l,d){d===void 0&&(d=[]),!u&&l>0&&(u=r(a)/l);for(var c=a.x1,p=a.y1,f=a.x2,v=a.y2,g=0;g<u;g++){var y=g/u,m=c+(f-c)*y,x=p+(v-p)*y;d.push(new h(m,x))}return d}},26408:s=>{s.exports=function(o,i){var r=o.x1,h=o.y1,a=o.x2,u=o.y2,l=(a-r)*(a-r)+(u-h)*(u-h);if(l===0)return!1;var d=((h-i.y)*(a-r)-(r-i.x)*(u-h))/l;return Math.abs(d)*Math.sqrt(l)}},98770:s=>{s.exports=function(o){return Math.abs(o.y1-o.y2)}},35001:s=>{s.exports=function(o){return Math.sqrt((o.x2-o.x1)*(o.x2-o.x1)+(o.y2-o.y1)*(o.y2-o.y1))}},23031:(s,o,i)=>{var r=i(83419),h=i(13151),a=i(15258),u=i(23777),l=i(65822),d=i(26099),c=new r({initialize:function(p,f,v,g){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),this.type=u.LINE,this.x1=p,this.y1=f,this.x2=v,this.y2=g},getPoint:function(p,f){return h(this,p,f)},getPoints:function(p,f,v){return a(this,p,f,v)},getRandomPoint:function(p){return l(this,p)},setTo:function(p,f,v,g){return p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),this.x1=p,this.y1=f,this.x2=v,this.y2=g,this},setFromObjects:function(p,f){return this.x1=p.x,this.y1=p.y,this.x2=f.x,this.y2=f.y,this},getPointA:function(p){return p===void 0&&(p=new d),p.set(this.x1,this.y1),p},getPointB:function(p){return p===void 0&&(p=new d),p.set(this.x2,this.y2),p},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(p){this.x1<=this.x2?this.x1=p:this.x2=p}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(p){this.x1>this.x2?this.x1=p:this.x2=p}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(p){this.y1<=this.y2?this.y1=p:this.y2=p}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(p){this.y1>this.y2?this.y1=p:this.y2=p}}});s.exports=c},64795:(s,o,i)=>{var r=i(36383),h=i(15994),a=i(91938);s.exports=function(u){var l=a(u)-r.TAU;return h(l,-Math.PI,Math.PI)}},52616:(s,o,i)=>{var r=i(36383),h=i(91938);s.exports=function(a){return Math.cos(h(a)-r.TAU)}},87231:(s,o,i)=>{var r=i(36383),h=i(91938);s.exports=function(a){return Math.sin(h(a)-r.TAU)}},89662:s=>{s.exports=function(o,i,r){return o.x1+=i,o.y1+=r,o.x2+=i,o.y2+=r,o}},71165:s=>{s.exports=function(o){return-(o.x2-o.x1)/(o.y2-o.y1)}},65822:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){a===void 0&&(a=new r);var u=Math.random();return a.x=h.x1+u*(h.x2-h.x1),a.y=h.y1+u*(h.y2-h.y1),a}},69777:(s,o,i)=>{var r=i(91938),h=i(64795);s.exports=function(a,u){return 2*h(u)-Math.PI-r(a)}},39706:(s,o,i)=>{var r=i(64400);s.exports=function(h,a){var u=(h.x1+h.x2)/2,l=(h.y1+h.y2)/2;return r(h,u,l,a)}},82585:(s,o,i)=>{var r=i(64400);s.exports=function(h,a,u){return r(h,a.x,a.y,u)}},64400:s=>{s.exports=function(o,i,r,h){var a=Math.cos(h),u=Math.sin(h),l=o.x1-i,d=o.y1-r;return o.x1=l*a-d*u+i,o.y1=l*u+d*a+r,l=o.x2-i,d=o.y2-r,o.x2=l*a-d*u+i,o.y2=l*u+d*a+r,o}},62377:s=>{s.exports=function(o,i,r,h,a){return o.x1=i,o.y1=r,o.x2=i+Math.cos(h)*a,o.y2=r+Math.sin(h)*a,o}},71366:s=>{s.exports=function(o){return(o.y2-o.y1)/(o.x2-o.x1)}},10809:s=>{s.exports=function(o){return Math.abs(o.x1-o.x2)}},2529:(s,o,i)=>{var r=i(23031);r.Angle=i(91938),r.BresenhamPoints=i(84993),r.CenterOn=i(36469),r.Clone=i(31116),r.CopyFrom=i(59944),r.Equals=i(59220),r.Extend=i(78177),r.GetEasedPoints=i(26708),r.GetMidPoint=i(32125),r.GetNearestPoint=i(99569),r.GetNormal=i(34638),r.GetPoint=i(13151),r.GetPoints=i(15258),r.GetShortestDistance=i(26408),r.Height=i(98770),r.Length=i(35001),r.NormalAngle=i(64795),r.NormalX=i(52616),r.NormalY=i(87231),r.Offset=i(89662),r.PerpSlope=i(71165),r.Random=i(65822),r.ReflectAngle=i(69777),r.Rotate=i(39706),r.RotateAroundPoint=i(82585),r.RotateAroundXY=i(64400),r.SetToAngle=i(62377),r.Slope=i(71366),r.Width=i(10809),s.exports=r},83997:(s,o,i)=>{var r=i(83419),h=i(87841),a=i(26099);function u(d,c,p,f){var v=d-p,g=c-f,y=v*v+g*g;return Math.sqrt(y)}var l=new r({initialize:function(d,c,p){this.vertex1=d,this.vertex2=c,this.vertex3=p,this.bounds=new h,this._inCenter=new a},getInCenter:function(d){d===void 0&&(d=!0);var c,p,f,v,g,y,m=this.vertex1,x=this.vertex2,b=this.vertex3;d?(c=m.x,p=m.y,f=x.x,v=x.y,g=b.x,y=b.y):(c=m.vx,p=m.vy,f=x.vx,v=x.vy,g=b.vx,y=b.vy);var w=u(g,y,f,v),T=u(c,p,g,y),S=u(f,v,c,p),C=w+T+S;return this._inCenter.set((c*w+f*T+g*S)/C,(p*w+v*T+y*S)/C)},contains:function(d,c,p){var f=this.vertex1,v=this.vertex2,g=this.vertex3,y=f.vx,m=f.vy,x=v.vx,b=v.vy,w=g.vx,T=g.vy;if(p){var S=p.a,C=p.b,E=p.c,M=p.d,_=p.e,O=p.f;y=f.vx*S+f.vy*E+_,m=f.vx*C+f.vy*M+O,x=v.vx*S+v.vy*E+_,b=v.vx*C+v.vy*M+O,w=g.vx*S+g.vy*E+_,T=g.vx*C+g.vy*M+O}var k=w-y,P=T-m,A=x-y,L=b-m,D=d-y,F=c-m,X=k*k+P*P,z=k*A+P*L,Y=k*D+P*F,R=A*A+L*L,B=A*D+L*F,I=X*R-z*z,G=I===0?0:1/I,N=(R*Y-z*B)*G,W=(X*B-z*Y)*G;return N>=0&&W>=0&&N+W<1},isCounterClockwise:function(d){var c=this.vertex1,p=this.vertex2,f=this.vertex3,v=(p.vx-c.vx)*(f.vy-c.vy)-(p.vy-c.vy)*(f.vx-c.vx);return d<=0?v>=0:v<0},load:function(d,c,p,f,v){return p=this.vertex1.load(d,c,p,f,v),p=this.vertex2.load(d,c,p,f,v),this.vertex3.load(d,c,p,f,v)},transformCoordinatesLocal:function(d,c,p,f){return this.vertex1.transformCoordinatesLocal(d,c,p,f),this.vertex2.transformCoordinatesLocal(d,c,p,f),this.vertex3.transformCoordinatesLocal(d,c,p,f),this},updateBounds:function(){var d=this.vertex1,c=this.vertex2,p=this.vertex3,f=this.bounds;return f.x=Math.min(d.vx,c.vx,p.vx),f.y=Math.min(d.vy,c.vy,p.vy),f.width=Math.max(d.vx,c.vx,p.vx)-f.x,f.height=Math.max(d.vy,c.vy,p.vy)-f.y,this},isInView:function(d,c,p,f,v,g,y,m,x,b,w){this.update(f,v,g,y,m,x,b,w);var T=this.vertex1,S=this.vertex2,C=this.vertex3;if(T.ta<=0&&S.ta<=0&&C.ta<=0||c&&!this.isCounterClockwise(p))return!1;var E=this.bounds;E.x=Math.min(T.tx,S.tx,C.tx),E.y=Math.min(T.ty,S.ty,C.ty),E.width=Math.max(T.tx,S.tx,C.tx)-E.x,E.height=Math.max(T.ty,S.ty,C.ty)-E.y;var M=d.x+d.width,_=d.y+d.height;return!(E.width<=0||E.height<=0||d.width<=0||d.height<=0||E.right<d.x||E.bottom<d.y||E.x>M||E.y>_)},scrollUV:function(d,c){return this.vertex1.scrollUV(d,c),this.vertex2.scrollUV(d,c),this.vertex3.scrollUV(d,c),this},scaleUV:function(d,c){return this.vertex1.scaleUV(d,c),this.vertex2.scaleUV(d,c),this.vertex3.scaleUV(d,c),this},setColor:function(d){return this.vertex1.color=d,this.vertex2.color=d,this.vertex3.color=d,this},update:function(d,c,p,f,v,g,y,m){return this.vertex1.update(c,p,f,v,g,y,m,d),this.vertex2.update(c,p,f,v,g,y,m,d),this.vertex3.update(c,p,f,v,g,y,m,d),this},translate:function(d,c){c===void 0&&(c=0);var p=this.vertex1,f=this.vertex2,v=this.vertex3;return p.x+=d,p.y+=c,f.x+=d,f.y+=c,v.x+=d,v.y+=c,this},x:{get:function(){return this.getInCenter().x},set:function(d){var c=this.getInCenter();this.translate(d-c.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(d){var c=this.getInCenter();this.translate(0,d-c.y)}},alpha:{get:function(){var d=this.vertex1,c=this.vertex2,p=this.vertex3;return(d.alpha+c.alpha+p.alpha)/3},set:function(d){this.vertex1.alpha=d,this.vertex2.alpha=d,this.vertex3.alpha=d}},depth:{get:function(){var d=this.vertex1,c=this.vertex2,p=this.vertex3;return(d.vz+c.vz+p.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});s.exports=l},48803:(s,o,i)=>{var r=i(83997),h=i(95540),a=i(37867),u=i(25836),l=i(39318),d=new u,c=new u,p=new a;s.exports=function(f){var v,g=h(f,"mesh"),y=h(f,"texture",null),m=h(f,"frame"),x=h(f,"width",1),b=h(f,"height",x),w=h(f,"widthSegments",1),T=h(f,"heightSegments",w),S=h(f,"x",0),C=h(f,"y",0),E=h(f,"z",0),M=h(f,"rotateX",0),_=h(f,"rotateY",0),O=h(f,"rotateZ",0),k=h(f,"zIsUp",!0),P=h(f,"isOrtho",!!g&&g.dirtyCache[11]),A=h(f,"colors",[16777215]),L=h(f,"alphas",[1]),D=h(f,"tile",!1),F=h(f,"flipY",!1),X=h(f,"width",null),z={faces:[],verts:[]};if(d.set(S,C,E),c.set(M,_,O),p.fromRotationXYTranslation(c,d,k),!y&&g)y=g.texture,m||(v=g.frame);else if(g&&typeof y=="string")y=g.scene.sys.textures.get(y);else if(!y)return z;v||(v=y.get(m)),!X&&P&&y&&g&&(x=v.width/g.height,b=v.height/g.height);var Y,R,B=x/2,I=b/2,G=Math.floor(w),N=Math.floor(T),W=G+1,U=N+1,V=x/G,K=b/N,$=[],H=[],j=0,q=1,Z=0,Q=1;v&&(j=v.u0,q=v.u1,F?(Z=v.v1,Q=v.v0):(Z=v.v0,Q=v.v1));var at=q-j,rt=Q-Z;for(R=0;R<U;R++){var nt=R*K-I;for(Y=0;Y<W;Y++){var lt=Y*V-B;H.push(lt,-nt);var it=j+at*(Y/G),ot=Z+rt*(R/N);$.push(it,ot)}}Array.isArray(A)||(A=[A]),Array.isArray(L)||(L=[L]);var st=0,gt=0;for(R=0;R<N;R++)for(Y=0;Y<G;Y++){var Pt=2*(Y+W*R),Ot=2*(Y+W*(R+1)),Jt=2*(Y+1+W*(R+1)),Kt=2*(Y+1+W*R),Lt=A[gt],oe=L[st],ke=new l(H[Pt],H[Pt+1],0,$[Pt],$[Pt+1],Lt,oe).transformMat4(p),Te=new l(H[Ot],H[Ot+1],0,$[Ot],$[Ot+1],Lt,oe).transformMat4(p),os=new l(H[Kt],H[Kt+1],0,$[Kt],$[Kt+1],Lt,oe).transformMat4(p),hs=new l(H[Ot],H[Ot+1],0,$[Ot],$[Ot+1],Lt,oe).transformMat4(p),ls=new l(H[Jt],H[Jt+1],0,$[Jt],$[Jt+1],Lt,oe).transformMat4(p),jo=new l(H[Kt],H[Kt+1],0,$[Kt],$[Kt+1],Lt,oe).transformMat4(p);D&&(ke.setUVs(j,Q),Te.setUVs(j,Z),os.setUVs(q,Q),hs.setUVs(j,Z),ls.setUVs(q,Z),jo.setUVs(q,Q)),++gt===A.length&&(gt=0),++st===L.length&&(st=0),z.verts.push(ke,Te,os,hs,ls,jo),z.faces.push(new r(ke,Te,os),new r(hs,ls,jo))}return g&&(g.faces=g.faces.concat(z.faces),g.vertices=g.vertices.concat(z.verts)),z}},34684:(s,o,i)=>{var r=i(83997),h=i(37867),a=i(25836),u=i(39318),l=new a,d=new a,c=new h;s.exports=function(p,f,v,g,y,m,x,b,w,T){v===void 0&&(v=1),g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=0),b===void 0&&(b=0),w===void 0&&(w=0),T===void 0&&(T=!0);var S={faces:[],verts:[]},C=p.materials;l.set(g,y,m),d.set(x,b,w),c.fromRotationXYTranslation(d,l,T);for(var E=0;E<p.models.length;E++)for(var M=p.models[E],_=M.vertices,O=M.textureCoords,k=M.faces,P=0;P<k.length;P++){var A=k[P],L=A.vertices[0],D=A.vertices[1],F=A.vertices[2],X=_[L.vertexIndex],z=_[D.vertexIndex],Y=_[F.vertexIndex],R=L.textureCoordsIndex,B=D.textureCoordsIndex,I=F.textureCoordsIndex,G=R===-1?{u:0,v:1}:O[R],N=B===-1?{u:0,v:0}:O[B],W=I===-1?{u:1,v:1}:O[I],U=16777215;A.material!==""&&C[A.material]&&(U=C[A.material]);var V=new u(X.x*v,X.y*v,X.z*v,G.u,G.v,U).transformMat4(c),K=new u(z.x*v,z.y*v,z.z*v,N.u,N.v,U).transformMat4(c),$=new u(Y.x*v,Y.y*v,Y.z*v,W.u,W.v,U).transformMat4(c);S.verts.push(V,K,$),S.faces.push(new r(V,K,$))}return f&&(f.faces=f.faces.concat(S.faces),f.vertices=f.vertices.concat(S.verts)),S}},92515:(s,o,i)=>{var r=i(83997),h=i(39318);s.exports=function(a,u,l,d,c,p,f,v){if(d===void 0&&(d=!1),p===void 0&&(p=16777215),f===void 0&&(f=1),v===void 0&&(v=!1),a.length===u.length||d){var g,y,m,x,b,w,T,S,C,E,M,_={faces:[],vertices:[]},O=d?3:2,k=Array.isArray(p),P=Array.isArray(f);if(Array.isArray(l)&&l.length>0)for(g=0;g<l.length;g++){var A=l[g],L=2*l[g],D=l[g]*O;y=a[D],m=a[D+1],x=d?a[D+2]:0,b=u[L],w=u[L+1],v&&(w=1-w),T=k?p[A]:p,S=P?f[A]:f,C=0,E=0,M=0,c&&(C=c[D],E=c[D+1],M=d?c[D+2]:0),_.vertices.push(new h(y,m,x,b,w,T,S,C,E,M))}else{var F=0,X=0;for(g=0;g<a.length;g+=O)y=a[g],m=a[g+1],x=d?a[g+2]:0,b=u[F],w=u[F+1],T=k?p[X]:p,S=P?f[X]:f,C=0,E=0,M=0,c&&(C=c[g],E=c[g+1],M=d?c[g+2]:0),_.vertices.push(new h(y,m,x,b,w,T,S,C,E,M)),F+=2,X++}for(g=0;g<_.vertices.length;g+=3){var z=_.vertices[g],Y=_.vertices[g+1],R=_.vertices[g+2];_.faces.push(new r(z,Y,R))}return _}console.warn("GenerateVerts: vertices and uvs count not equal")}},85048:s=>{var o=!0,i="untitled",r="",h="";function a(m){var x=m.indexOf("#");return x>-1?m.substring(0,x):m}function u(m){return m.models.length===0&&m.models.push({faces:[],name:i,textureCoords:[],vertexNormals:[],vertices:[]}),r="",m.models[m.models.length-1]}function l(m,x){var b=m.length>=2?m[1]:i;x.models.push({faces:[],name:b,textureCoords:[],vertexNormals:[],vertices:[]}),r=""}function d(m){m.length===2&&(r=m[1])}function c(m,x){var b=m.length,w=b>=2?parseFloat(m[1]):0,T=b>=3?parseFloat(m[2]):0,S=b>=4?parseFloat(m[3]):0;u(x).vertices.push({x:w,y:T,z:S})}function p(m,x){var b=m.length,w=b>=2?parseFloat(m[1]):0,T=b>=3?parseFloat(m[2]):0,S=b>=4?parseFloat(m[3]):0;isNaN(w)&&(w=0),isNaN(T)&&(T=0),isNaN(S)&&(S=0),o&&(T=1-T),u(x).textureCoords.push({u:w,v:T,w:S})}function f(m,x){var b=m.length,w=b>=2?parseFloat(m[1]):0,T=b>=3?parseFloat(m[2]):0,S=b>=4?parseFloat(m[3]):0;u(x).vertexNormals.push({x:w,y:T,z:S})}function v(m,x){var b=m.length-1;if(!(b<3)){for(var w={group:r,material:h,vertices:[]},T=0;T<b;T++){var S=m[T+1].split("/"),C=S.length;if(!(C<1||C>3)){var E=0,M=0,_=0;E=parseInt(S[0],10),C>1&&S[1]!==""&&(M=parseInt(S[1],10)),C>2&&(_=parseInt(S[2],10)),E!==0&&(E<0&&(E=u(x).vertices.length+1+E),M-=1,E-=1,_-=1,w.vertices.push({textureCoordsIndex:M,vertexIndex:E,vertexNormalIndex:_}))}}u(x).faces.push(w)}}function g(m,x){m.length>=2&&x.materialLibraries.push(m[1])}function y(m){m.length>=2&&(h=m[1])}s.exports=function(m,x){x===void 0&&(x=!0),o=x;var b={materials:{},materialLibraries:[],models:[]};r="",h="";for(var w=m.split(`
`),T=0;T<w.length;T++){var S=a(w[T]).replace(/\s\s+/g," ").trim().split(" ");switch(S[0].toLowerCase()){case"o":l(S,b);break;case"g":d(S);break;case"v":c(S,b);break;case"vt":p(S,b);break;case"vn":f(S,b);break;case"f":v(S,b);break;case"mtllib":g(S,b);break;case"usemtl":y(S)}}return b}},61485:(s,o,i)=>{var r=i(37589);s.exports=function(h){for(var a={},u=h.split(`
`),l="",d=0;d<u.length;d++){var c=u[d].trim();if(c.indexOf("#")!==0&&c!==""){var p=c.replace(/\s\s+/g," ").trim().split(" ");switch(p[0].toLowerCase()){case"newmtl":l=p[1];break;case"kd":var f=Math.floor(255*p[1]),v=p.length>=2?Math.floor(255*p[2]):f,g=p.length>=3?Math.floor(255*p[3]):f;a[l]=r(f,v,g)}}}return a}},92570:s=>{s.exports=function(o,i,r,h){var a,u;if(r===void 0&&h===void 0){var l=o.getInCenter();a=l.x,u=l.y}var d=Math.cos(i),c=Math.sin(i),p=o.vertex1,f=o.vertex2,v=o.vertex3,g=p.x-a,y=p.y-u;p.set(g*d-y*c+a,g*c+y*d+u),g=f.x-a,y=f.y-u,f.set(g*d-y*c+a,g*c+y*d+u),g=v.x-a,y=v.y-u,v.set(g*d-y*c+a,g*c+y*d+u)}},39318:(s,o,i)=>{var r=i(83419),h=i(70554),a=i(25836),u=new r({Extends:a,initialize:function(l,d,c,p,f,v,g,y,m,x){v===void 0&&(v=16777215),g===void 0&&(g=1),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=0),a.call(this,l,d,c),this.vx=0,this.vy=0,this.vz=0,this.nx=y,this.ny=m,this.nz=x,this.u=p,this.v=f,this.color=v,this.alpha=g,this.tx=0,this.ty=0,this.ta=0,this.tu=p,this.tv=f},setUVs:function(l,d){return this.u=l,this.v=d,this.tu=l,this.tv=d,this},scrollUV:function(l,d){return this.tu+=l,this.tv+=d,this},scaleUV:function(l,d){return this.tu=this.u*l,this.tv=this.v*d,this},transformCoordinatesLocal:function(l,d,c,p){var f=this.x,v=this.y,g=this.z,y=l.val,m=f*y[0]+v*y[4]+g*y[8]+y[12],x=f*y[1]+v*y[5]+g*y[9]+y[13],b=f*y[2]+v*y[6]+g*y[10]+y[14],w=f*y[3]+v*y[7]+g*y[11]+y[15];this.vx=m/w*d,this.vy=-x/w*c,this.vz=p<=0?b/w:-b/w},resize:function(l,d,c,p,f,v){return this.x=l,this.y=d,this.vx=this.x*c,this.vy=-this.y*p,this.vz=0,f<.5?this.vx+=c*(.5-f):f>.5&&(this.vx-=c*(f-.5)),v<.5?this.vy+=p*(.5-v):v>.5&&(this.vy-=p*(v-.5)),this},update:function(l,d,c,p,f,v,g,y){var m=this.vx*l+this.vy*c+f,x=this.vx*d+this.vy*p+v;return g&&(m=Math.round(m),x=Math.round(x)),this.tx=m,this.ty=x,this.ta=this.alpha*y,this},load:function(l,d,c,p,f){return l[++c]=this.tx,l[++c]=this.ty,l[++c]=this.tu,l[++c]=this.tv,l[++c]=p,l[++c]=f,d[++c]=h.getTintAppendFloatAlpha(this.color,this.ta),c}});s.exports=u},73090:(s,o,i)=>{var r={Face:i(83997),GenerateGridVerts:i(48803),GenerateObjVerts:i(34684),GenerateVerts:i(92515),ParseObj:i(85048),ParseObjMaterial:i(61485),RotateFace:i(92570),Vertex:i(39318)};s.exports=r},96550:s=>{s.exports=function(o){return o.setTo(Math.ceil(o.x),Math.ceil(o.y))}},99706:(s,o,i)=>{var r=i(2141);s.exports=function(h){return new r(h.x,h.y)}},68010:s=>{s.exports=function(o,i){return i.setTo(o.x,o.y)}},27814:s=>{s.exports=function(o,i){return o.x===i.x&&o.y===i.y}},73565:s=>{s.exports=function(o){return o.setTo(Math.floor(o.x),Math.floor(o.y))}},87555:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){if(a===void 0&&(a=new r),!Array.isArray(h))throw new Error("GetCentroid points argument must be an array");var u=h.length;if(u<1)throw new Error("GetCentroid points array must not be empty");if(u===1)a.x=h[0].x,a.y=h[0].y;else{for(var l=0;l<u;l++)a.x+=h[l].x,a.y+=h[l].y;a.x/=u,a.y/=u}return a}},28793:s=>{s.exports=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)}},44405:s=>{s.exports=function(o){return o.x*o.x+o.y*o.y}},20873:(s,o,i)=>{var r=i(87841);s.exports=function(h,a){a===void 0&&(a=new r);for(var u=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,p=0;p<h.length;p++){var f=h[p];f.x>u&&(u=f.x),f.x<l&&(l=f.x),f.y>d&&(d=f.y),f.y<c&&(c=f.y)}return a.x=l,a.y=c,a.width=u-l,a.height=d-c,a}},26152:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u,l){return u===void 0&&(u=0),l===void 0&&(l=new r),l.x=h.x+(a.x-h.x)*u,l.y=h.y+(a.y-h.y)*u,l}},55767:s=>{s.exports=function(o){return o.setTo(o.y,o.x)}},79432:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.setTo(-h.x,-h.y)}},2141:(s,o,i)=>{var r=i(83419),h=i(23777),a=new r({initialize:function(u,l){u===void 0&&(u=0),l===void 0&&(l=u),this.type=h.POINT,this.x=u,this.y=l},setTo:function(u,l){return u===void 0&&(u=0),l===void 0&&(l=u),this.x=u,this.y=l,this}});s.exports=a},72930:(s,o,i)=>{var r=i(2141),h=i(44405);s.exports=function(a,u,l){l===void 0&&(l=new r);var d=(a.x*u.x+a.y*u.y)/h(u);return d!==0&&(l.x=d*u.x,l.y=d*u.y),l}},62880:(s,o,i)=>{var r=i(2141);s.exports=function(h,a,u){u===void 0&&(u=new r);var l=h.x*a.x+h.y*a.y;return l!==0&&(u.x=l*a.x,u.y=l*a.y),u}},15093:(s,o,i)=>{var r=i(28793);s.exports=function(h,a){if(h.x!==0||h.y!==0){var u=r(h);h.x/=u,h.y/=u}return h.x*=a,h.y*=a,h}},43711:(s,o,i)=>{var r=i(2141);r.Ceil=i(96550),r.Clone=i(99706),r.CopyFrom=i(68010),r.Equals=i(27814),r.Floor=i(73565),r.GetCentroid=i(87555),r.GetMagnitude=i(28793),r.GetMagnitudeSq=i(44405),r.GetRectangleFromPoints=i(20873),r.Interpolate=i(26152),r.Invert=i(55767),r.Negative=i(79432),r.Project=i(72930),r.ProjectUnit=i(62880),r.SetMagnitude=i(15093),s.exports=r},12306:(s,o,i)=>{var r=i(25717);s.exports=function(h){return new r(h.points)}},63814:s=>{s.exports=function(o,i,r){for(var h=!1,a=-1,u=o.points.length-1;++a<o.points.length;u=a){var l=o.points[a].x,d=o.points[a].y,c=o.points[u].x,p=o.points[u].y;(d<=r&&r<p||p<=r&&r<d)&&i<(c-l)*(r-d)/(p-d)+l&&(h=!h)}return h}},99338:(s,o,i)=>{var r=i(63814);s.exports=function(h,a){return r(h,a.x,a.y)}},94811:s=>{function o(P,A,L){L=L||2;var D,F,X,z,Y,R,B,I=A&&A.length,G=I?A[0]*L:P.length,N=i(P,0,G,L,!0),W=[];if(!N||N.next===N.prev)return W;if(I&&(N=function(V,K,$,H){var j,q,Z,Q=[];for(j=0,q=K.length;j<q;j++)(Z=i(V,K[j]*H,j<q-1?K[j+1]*H:V.length,H,!1))===Z.next&&(Z.steiner=!0),Q.push(g(Z));for(Q.sort(c),j=0;j<Q.length;j++)$=p(Q[j],$);return $}(P,A,N,L)),P.length>80*L){D=X=P[0],F=z=P[1];for(var U=L;U<G;U+=L)(Y=P[U])<D&&(D=Y),(R=P[U+1])<F&&(F=R),Y>X&&(X=Y),R>z&&(z=R);B=(B=Math.max(X-D,z-F))!==0?32767/B:0}return h(N,W,L,D,F,B,0),W}function i(P,A,L,D,F){var X,z;if(F===k(P,A,L,D)>0)for(X=A;X<L;X+=D)z=M(X,P[X],P[X+1],z);else for(X=L-D;X>=A;X-=D)z=M(X,P[X],P[X+1],z);return z&&b(z,z.next)&&(_(z),z=z.next),z}function r(P,A){if(!P)return P;A||(A=P);var L,D=P;do if(L=!1,D.steiner||!b(D,D.next)&&x(D.prev,D,D.next)!==0)D=D.next;else{if(_(D),(D=A=D.prev)===D.next)break;L=!0}while(L||D!==A);return A}function h(P,A,L,D,F,X,z){if(P){!z&&X&&function(I,G,N,W){var U=I;do U.z===0&&(U.z=v(U.x,U.y,G,N,W)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==I);U.prevZ.nextZ=null,U.prevZ=null,function(V){var K,$,H,j,q,Z,Q,at,rt=1;do{for($=V,V=null,q=null,Z=0;$;){for(Z++,H=$,Q=0,K=0;K<rt&&(Q++,H=H.nextZ);K++);for(at=rt;Q>0||at>0&&H;)Q!==0&&(at===0||!H||$.z<=H.z)?(j=$,$=$.nextZ,Q--):(j=H,H=H.nextZ,at--),q?q.nextZ=j:V=j,j.prevZ=q,q=j;$=H}q.nextZ=null,rt*=2}while(Z>1)}(U)}(P,D,F,X);for(var Y,R,B=P;P.prev!==P.next;)if(Y=P.prev,R=P.next,X?u(P,D,F,X):a(P))A.push(Y.i/L|0),A.push(P.i/L|0),A.push(R.i/L|0),_(P),P=R.next,B=R.next;else if((P=R)===B){z?z===1?h(P=l(r(P),A,L),A,L,D,F,X,2):z===2&&d(P,A,L,D,F,X):h(r(P),A,L,D,F,X,1);break}}}function a(P){var A=P.prev,L=P,D=P.next;if(x(A,L,D)>=0)return!1;for(var F=A.x,X=L.x,z=D.x,Y=A.y,R=L.y,B=D.y,I=F<X?F<z?F:z:X<z?X:z,G=Y<R?Y<B?Y:B:R<B?R:B,N=F>X?F>z?F:z:X>z?X:z,W=Y>R?Y>B?Y:B:R>B?R:B,U=D.next;U!==A;){if(U.x>=I&&U.x<=N&&U.y>=G&&U.y<=W&&y(F,Y,X,R,z,B,U.x,U.y)&&x(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function u(P,A,L,D){var F=P.prev,X=P,z=P.next;if(x(F,X,z)>=0)return!1;for(var Y=F.x,R=X.x,B=z.x,I=F.y,G=X.y,N=z.y,W=Y<R?Y<B?Y:B:R<B?R:B,U=I<G?I<N?I:N:G<N?G:N,V=Y>R?Y>B?Y:B:R>B?R:B,K=I>G?I>N?I:N:G>N?G:N,$=v(W,U,A,L,D),H=v(V,K,A,L,D),j=P.prevZ,q=P.nextZ;j&&j.z>=$&&q&&q.z<=H;){if(j.x>=W&&j.x<=V&&j.y>=U&&j.y<=K&&j!==F&&j!==z&&y(Y,I,R,G,B,N,j.x,j.y)&&x(j.prev,j,j.next)>=0||(j=j.prevZ,q.x>=W&&q.x<=V&&q.y>=U&&q.y<=K&&q!==F&&q!==z&&y(Y,I,R,G,B,N,q.x,q.y)&&x(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;j&&j.z>=$;){if(j.x>=W&&j.x<=V&&j.y>=U&&j.y<=K&&j!==F&&j!==z&&y(Y,I,R,G,B,N,j.x,j.y)&&x(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;q&&q.z<=H;){if(q.x>=W&&q.x<=V&&q.y>=U&&q.y<=K&&q!==F&&q!==z&&y(Y,I,R,G,B,N,q.x,q.y)&&x(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function l(P,A,L){var D=P;do{var F=D.prev,X=D.next.next;!b(F,X)&&w(F,D,D.next,X)&&C(F,X)&&C(X,F)&&(A.push(F.i/L|0),A.push(D.i/L|0),A.push(X.i/L|0),_(D),_(D.next),D=P=X),D=D.next}while(D!==P);return r(D)}function d(P,A,L,D,F,X){var z=P;do{for(var Y=z.next.next;Y!==z.prev;){if(z.i!==Y.i&&m(z,Y)){var R=E(z,Y);return z=r(z,z.next),R=r(R,R.next),h(z,A,L,D,F,X,0),void h(R,A,L,D,F,X,0)}Y=Y.next}z=z.next}while(z!==P)}function c(P,A){return P.x-A.x}function p(P,A){var L=function(F,X){var z,Y=X,R=F.x,B=F.y,I=-1/0;do{if(B<=Y.y&&B>=Y.next.y&&Y.next.y!==Y.y){var G=Y.x+(B-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(G<=R&&G>I&&(I=G,z=Y.x<Y.next.x?Y:Y.next,G===R))return z}Y=Y.next}while(Y!==X);if(!z)return null;var N,W=z,U=z.x,V=z.y,K=1/0;Y=z;do R>=Y.x&&Y.x>=U&&R!==Y.x&&y(B<V?R:I,B,U,V,B<V?I:R,B,Y.x,Y.y)&&(N=Math.abs(B-Y.y)/(R-Y.x),C(Y,F)&&(N<K||N===K&&(Y.x>z.x||Y.x===z.x&&f(z,Y)))&&(z=Y,K=N)),Y=Y.next;while(Y!==W);return z}(P,A);if(!L)return A;var D=E(L,P);return r(D,D.next),r(L,L.next)}function f(P,A){return x(P.prev,P,A.prev)<0&&x(A.next,P,P.next)<0}function v(P,A,L,D,F){return(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=(P-L)*F|0)|P<<8))|P<<4))|P<<2))|P<<1))|(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-D)*F|0)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function g(P){var A=P,L=P;do(A.x<L.x||A.x===L.x&&A.y<L.y)&&(L=A),A=A.next;while(A!==P);return L}function y(P,A,L,D,F,X,z,Y){return(F-z)*(A-Y)>=(P-z)*(X-Y)&&(P-z)*(D-Y)>=(L-z)*(A-Y)&&(L-z)*(X-Y)>=(F-z)*(D-Y)}function m(P,A){return P.next.i!==A.i&&P.prev.i!==A.i&&!function(L,D){var F=L;do{if(F.i!==L.i&&F.next.i!==L.i&&F.i!==D.i&&F.next.i!==D.i&&w(F,F.next,L,D))return!0;F=F.next}while(F!==L);return!1}(P,A)&&(C(P,A)&&C(A,P)&&function(L,D){var F=L,X=!1,z=(L.x+D.x)/2,Y=(L.y+D.y)/2;do F.y>Y!=F.next.y>Y&&F.next.y!==F.y&&z<(F.next.x-F.x)*(Y-F.y)/(F.next.y-F.y)+F.x&&(X=!X),F=F.next;while(F!==L);return X}(P,A)&&(x(P.prev,P,A.prev)||x(P,A.prev,A))||b(P,A)&&x(P.prev,P,P.next)>0&&x(A.prev,A,A.next)>0)}function x(P,A,L){return(A.y-P.y)*(L.x-A.x)-(A.x-P.x)*(L.y-A.y)}function b(P,A){return P.x===A.x&&P.y===A.y}function w(P,A,L,D){var F=S(x(P,A,L)),X=S(x(P,A,D)),z=S(x(L,D,P)),Y=S(x(L,D,A));return F!==X&&z!==Y||!(F!==0||!T(P,L,A))||!(X!==0||!T(P,D,A))||!(z!==0||!T(L,P,D))||!(Y!==0||!T(L,A,D))}function T(P,A,L){return A.x<=Math.max(P.x,L.x)&&A.x>=Math.min(P.x,L.x)&&A.y<=Math.max(P.y,L.y)&&A.y>=Math.min(P.y,L.y)}function S(P){return P>0?1:P<0?-1:0}function C(P,A){return x(P.prev,P,P.next)<0?x(P,A,P.next)>=0&&x(P,P.prev,A)>=0:x(P,A,P.prev)<0||x(P,P.next,A)<0}function E(P,A){var L=new O(P.i,P.x,P.y),D=new O(A.i,A.x,A.y),F=P.next,X=A.prev;return P.next=A,A.prev=P,L.next=F,F.prev=L,D.next=L,L.prev=D,X.next=D,D.prev=X,D}function M(P,A,L,D){var F=new O(P,A,L);return D?(F.next=D.next,F.prev=D,D.next.prev=F,D.next=F):(F.prev=F,F.next=F),F}function _(P){P.next.prev=P.prev,P.prev.next=P.next,P.prevZ&&(P.prevZ.nextZ=P.nextZ),P.nextZ&&(P.nextZ.prevZ=P.prevZ)}function O(P,A,L){this.i=P,this.x=A,this.y=L,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(P,A,L,D){for(var F=0,X=A,z=L-D;X<L;X+=D)F+=(P[z]-P[X])*(P[X+1]+P[z+1]),z=X;return F}o.deviation=function(P,A,L,D){var F=A&&A.length,X=F?A[0]*L:P.length,z=Math.abs(k(P,0,X,L));if(F)for(var Y=0,R=A.length;Y<R;Y++){var B=A[Y]*L,I=Y<R-1?A[Y+1]*L:P.length;z-=Math.abs(k(P,B,I,L))}var G=0;for(Y=0;Y<D.length;Y+=3){var N=D[Y]*L,W=D[Y+1]*L,U=D[Y+2]*L;G+=Math.abs((P[N]-P[U])*(P[W+1]-P[N+1])-(P[N]-P[W])*(P[U+1]-P[N+1]))}return z===0&&G===0?0:Math.abs((G-z)/z)},o.flatten=function(P){for(var A=P[0][0].length,L={vertices:[],holes:[],dimensions:A},D=0,F=0;F<P.length;F++){for(var X=0;X<P[F].length;X++)for(var z=0;z<A;z++)L.vertices.push(P[F][X][z]);F>0&&(D+=P[F-1].length,L.holes.push(D))}return L},s.exports=o},13829:(s,o,i)=>{var r=i(87841);s.exports=function(h,a){a===void 0&&(a=new r);for(var u,l=1/0,d=1/0,c=-l,p=-d,f=0;f<h.points.length;f++)u=h.points[f],l=Math.min(l,u.x),d=Math.min(d,u.y),c=Math.max(c,u.x),p=Math.max(p,u.y);return a.x=l,a.y=d,a.width=c-l,a.height=p-d,a}},26173:s=>{s.exports=function(o,i){i===void 0&&(i=[]);for(var r=0;r<o.points.length;r++)i.push(o.points[r].x),i.push(o.points[r].y);return i}},9564:(s,o,i)=>{var r=i(35001),h=i(23031),a=i(30052);s.exports=function(u,l,d,c){c===void 0&&(c=[]);var p=u.points,f=a(u);!l&&d>0&&(l=f/d);for(var v=0;v<l;v++)for(var g=f*(v/l),y=0,m=0;m<p.length;m++){var x=p[m],b=p[(m+1)%p.length],w=new h(x.x,x.y,b.x,b.y),T=r(w);if(!(g<y||g>y+T)){var S=w.getPoint((g-y)/T);c.push(S);break}y+=T}return c}},30052:(s,o,i)=>{var r=i(35001),h=i(23031);s.exports=function(a){for(var u=a.points,l=0,d=0;d<u.length;d++){var c=u[d],p=u[(d+1)%u.length],f=new h(c.x,c.y,p.x,p.y);l+=r(f)}return l}},25717:(s,o,i)=>{var r=i(83419),h=i(63814),a=i(9564),u=i(23777),l=new r({initialize:function(d){this.type=u.POLYGON,this.area=0,this.points=[],d&&this.setTo(d)},contains:function(d,c){return h(this,d,c)},setTo:function(d){if(this.area=0,this.points=[],typeof d=="string"&&(d=d.split(" ")),!Array.isArray(d))return this;for(var c,p=0;p<d.length;p++)c={x:0,y:0},typeof d[p]=="number"||typeof d[p]=="string"?(c.x=parseFloat(d[p]),c.y=parseFloat(d[p+1]),p++):Array.isArray(d[p])?(c.x=d[p][0],c.y=d[p][1]):(c.x=d[p].x,c.y=d[p].y),this.points.push(c);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var d,c,p=0,f=0;f<this.points.length-1;f++)d=this.points[f],p+=((c=this.points[f+1]).x-d.x)*(d.y+c.y);return d=this.points[0],c=this.points[this.points.length-1],p+=(d.x-c.x)*(c.y+d.y),this.area=.5*-p,this.area},getPoints:function(d,c,p){return a(this,d,c,p)}});s.exports=l},8133:s=>{s.exports=function(o){return o.points.reverse(),o}},29524:s=>{function o(a,u){var l=a.x-u.x,d=a.y-u.y;return l*l+d*d}function i(a,u,l){var d=u.x,c=u.y,p=l.x-d,f=l.y-c;if(p!==0||f!==0){var v=((a.x-d)*p+(a.y-c)*f)/(p*p+f*f);v>1?(d=l.x,c=l.y):v>0&&(d+=p*v,c+=f*v)}return(p=a.x-d)*p+(f=a.y-c)*f}function r(a,u,l,d,c){for(var p,f=d,v=u+1;v<l;v++){var g=i(a[v],a[u],a[l]);g>f&&(p=v,f=g)}f>d&&(p-u>1&&r(a,u,p,d,c),c.push(a[p]),l-p>1&&r(a,p,l,d,c))}function h(a,u){var l=a.length-1,d=[a[0]];return r(a,0,l,u,d),d.push(a[l]),d}s.exports=function(a,u,l){u===void 0&&(u=1),l===void 0&&(l=!1);var d=a.points;if(d.length>2){var c=u*u;l||(d=function(p,f){for(var v,g=p[0],y=[g],m=1,x=p.length;m<x;m++)o(v=p[m],g)>f&&(y.push(v),g=v);return g!==v&&y.push(v),y}(d,c)),a.setTo(h(d,c))}return a}},5469:s=>{var o=function(i,r){return i[0]=r[0],i[1]=r[1],i};s.exports=function(i){var r,h=[],a=i.points;for(r=0;r<a.length;r++)h.push([a[r].x,a[r].y]);var u=[];for(h.length>0&&u.push(o([0,0],h[0])),r=0;r<h.length-1;r++){var l=h[r],d=h[r+1],c=l[0],p=l[1],f=d[0],v=d[1];u.push([.85*c+.15*f,.85*p+.15*v]),u.push([.15*c+.85*f,.15*p+.85*v])}return h.length>1&&u.push(o([0,0],h[h.length-1])),i.setTo(u)}},24709:s=>{s.exports=function(o,i,r){for(var h=o.points,a=0;a<h.length;a++)h[a].x+=i,h[a].y+=r;return o}},58423:(s,o,i)=>{var r=i(25717);r.Clone=i(12306),r.Contains=i(63814),r.ContainsPoint=i(99338),r.Earcut=i(94811),r.GetAABB=i(13829),r.GetNumberArray=i(26173),r.GetPoints=i(9564),r.Perimeter=i(30052),r.Reverse=i(8133),r.Simplify=i(29524),r.Smooth=i(5469),r.Translate=i(24709),s.exports=r},62224:s=>{s.exports=function(o){return o.width*o.height}},98615:s=>{s.exports=function(o){return o.x=Math.ceil(o.x),o.y=Math.ceil(o.y),o}},31688:s=>{s.exports=function(o){return o.x=Math.ceil(o.x),o.y=Math.ceil(o.y),o.width=Math.ceil(o.width),o.height=Math.ceil(o.height),o}},67502:s=>{s.exports=function(o,i,r){return o.x=i-o.width/2,o.y=r-o.height/2,o}},65085:(s,o,i)=>{var r=i(87841);s.exports=function(h){return new r(h.x,h.y,h.width,h.height)}},37303:s=>{s.exports=function(o,i,r){return!(o.width<=0||o.height<=0)&&o.x<=i&&o.x+o.width>=i&&o.y<=r&&o.y+o.height>=r}},96553:(s,o,i)=>{var r=i(37303);s.exports=function(h,a){return r(h,a.x,a.y)}},70273:s=>{s.exports=function(o,i){return!(i.width*i.height>o.width*o.height)&&i.x>o.x&&i.x<o.right&&i.right>o.x&&i.right<o.right&&i.y>o.y&&i.y<o.bottom&&i.bottom>o.y&&i.bottom<o.bottom}},43459:s=>{s.exports=function(o,i){return i.setTo(o.x,o.y,o.width,o.height)}},77493:s=>{s.exports=function(o,i){return i===void 0&&(i=[]),i.push({x:o.x,y:o.y}),i.push({x:o.right,y:o.y}),i.push({x:o.right,y:o.bottom}),i.push({x:o.x,y:o.bottom}),i}},9219:s=>{s.exports=function(o,i){return o.x===i.x&&o.y===i.y&&o.width===i.width&&o.height===i.height}},53751:(s,o,i)=>{var r=i(8249);s.exports=function(h,a){var u=r(h);return u<r(a)?h.setSize(a.height*u,a.height):h.setSize(a.width,a.width/u),h.setPosition(a.centerX-h.width/2,a.centerY-h.height/2)}},16088:(s,o,i)=>{var r=i(8249);s.exports=function(h,a){var u=r(h);return u>r(a)?h.setSize(a.height*u,a.height):h.setSize(a.width,a.width/u),h.setPosition(a.centerX-h.width/2,a.centerY-h.height/2)}},80774:s=>{s.exports=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o}},83859:s=>{s.exports=function(o){return o.x=Math.floor(o.x),o.y=Math.floor(o.y),o.width=Math.floor(o.width),o.height=Math.floor(o.height),o}},19217:(s,o,i)=>{var r=i(87841),h=i(36383);s.exports=function(a,u){if(u===void 0&&(u=new r),a.length===0)return u;for(var l,d,c,p=Number.MAX_VALUE,f=Number.MAX_VALUE,v=h.MIN_SAFE_INTEGER,g=h.MIN_SAFE_INTEGER,y=0;y<a.length;y++)l=a[y],Array.isArray(l)?(d=l[0],c=l[1]):(d=l.x,c=l.y),p=Math.min(p,d),f=Math.min(f,c),v=Math.max(v,d),g=Math.max(g,c);return u.x=p,u.y=f,u.width=v-p,u.height=g-f,u}},9477:(s,o,i)=>{var r=i(87841);s.exports=function(h,a,u,l,d){return d===void 0&&(d=new r),d.setTo(Math.min(h,u),Math.min(a,l),Math.abs(h-u),Math.abs(a-l))}},8249:s=>{s.exports=function(o){return o.height===0?NaN:o.width/o.height}},27165:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=h.centerX,a.y=h.centerY,a}},20812:(s,o,i)=>{var r=i(13019),h=i(2141);s.exports=function(a,u,l){if(l===void 0&&(l=new h),u<=0||u>=1)return l.x=a.x,l.y=a.y,l;var d=r(a)*u;return u>.5?(d-=a.width+a.height)<=a.width?(l.x=a.right-d,l.y=a.bottom):(l.x=a.x,l.y=a.bottom-(d-a.width)):d<=a.width?(l.x=a.x+d,l.y=a.y):(l.x=a.right,l.y=a.y+(d-a.width)),l}},34819:(s,o,i)=>{var r=i(20812),h=i(13019);s.exports=function(a,u,l,d){d===void 0&&(d=[]),!u&&l>0&&(u=h(a)/l);for(var c=0;c<u;c++){var p=c/u;d.push(r(a,p))}return d}},51313:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=h.width,a.y=h.height,a}},86091:(s,o,i)=>{var r=i(67502);s.exports=function(h,a,u){var l=h.centerX,d=h.centerY;return h.setSize(h.width+2*a,h.height+2*u),r(h,l,d)}},53951:(s,o,i)=>{var r=i(87841),h=i(59996);s.exports=function(a,u,l){return l===void 0&&(l=new r),h(a,u)?(l.x=Math.max(a.x,u.x),l.y=Math.max(a.y,u.y),l.width=Math.min(a.right,u.right)-l.x,l.height=Math.min(a.bottom,u.bottom)-l.y):l.setEmpty(),l}},14649:(s,o,i)=>{var r=i(13019),h=i(2141);s.exports=function(a,u,l,d){if(d===void 0&&(d=[]),!u&&!l)return d;u?l=Math.round(r(a)/u):u=r(a)/l;for(var c=a.x,p=a.y,f=0,v=0;v<l;v++)switch(d.push(new h(c,p)),f){case 0:(c+=u)>=a.right&&(f=1,p+=c-a.right,c=a.right);break;case 1:(p+=u)>=a.bottom&&(f=2,c-=p-a.bottom,p=a.bottom);break;case 2:(c-=u)<=a.left&&(f=3,p-=a.left-c,c=a.left);break;case 3:(p-=u)<=a.top&&(f=0,p=a.top)}return d}},33595:s=>{s.exports=function(o,i){for(var r=o.x,h=o.right,a=o.y,u=o.bottom,l=0;l<i.length;l++)r=Math.min(r,i[l].x),h=Math.max(h,i[l].x),a=Math.min(a,i[l].y),u=Math.max(u,i[l].y);return o.x=r,o.y=a,o.width=h-r,o.height=u-a,o}},20074:s=>{s.exports=function(o,i){var r=Math.min(o.x,i.x),h=Math.max(o.right,i.right);o.x=r,o.width=h-r;var a=Math.min(o.y,i.y),u=Math.max(o.bottom,i.bottom);return o.y=a,o.height=u-a,o}},92171:s=>{s.exports=function(o,i,r){var h=Math.min(o.x,i),a=Math.max(o.right,i);o.x=h,o.width=a-h;var u=Math.min(o.y,r),l=Math.max(o.bottom,r);return o.y=u,o.height=l-u,o}},42981:s=>{s.exports=function(o,i,r){return o.x+=i,o.y+=r,o}},46907:s=>{s.exports=function(o,i){return o.x+=i.x,o.y+=i.y,o}},60170:s=>{s.exports=function(o,i){return o.x<i.right&&o.right>i.x&&o.y<i.bottom&&o.bottom>i.y}},13019:s=>{s.exports=function(o){return 2*(o.width+o.height)}},85133:(s,o,i)=>{var r=i(2141),h=i(39506);s.exports=function(a,u,l){l===void 0&&(l=new r),u=h(u);var d=Math.sin(u),c=Math.cos(u),p=c>0?a.width/2:a.width/-2,f=d>0?a.height/2:a.height/-2;return Math.abs(p*d)<Math.abs(f*c)?f=p*d/c:p=f*c/d,l.x=p+a.centerX,l.y=f+a.centerY,l}},26597:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=h.x+Math.random()*h.width,a.y=h.y+Math.random()*h.height,a}},86470:(s,o,i)=>{var r=i(30976),h=i(70273),a=i(2141);s.exports=function(u,l,d){if(d===void 0&&(d=new a),h(u,l))switch(r(0,3)){case 0:d.x=u.x+Math.random()*(l.right-u.x),d.y=u.y+Math.random()*(l.top-u.y);break;case 1:d.x=l.x+Math.random()*(u.right-l.x),d.y=l.bottom+Math.random()*(u.bottom-l.bottom);break;case 2:d.x=u.x+Math.random()*(l.x-u.x),d.y=l.y+Math.random()*(u.bottom-l.y);break;case 3:d.x=l.right+Math.random()*(u.right-l.right),d.y=u.y+Math.random()*(l.bottom-u.y)}return d}},87841:(s,o,i)=>{var r=i(83419),h=i(37303),a=i(20812),u=i(34819),l=i(23777),d=i(23031),c=i(26597),p=new r({initialize:function(f,v,g,y){f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=0),this.type=l.RECTANGLE,this.x=f,this.y=v,this.width=g,this.height=y},contains:function(f,v){return h(this,f,v)},getPoint:function(f,v){return a(this,f,v)},getPoints:function(f,v,g){return u(this,f,v,g)},getRandomPoint:function(f){return c(this,f)},setTo:function(f,v,g,y){return this.x=f,this.y=v,this.width=g,this.height=y,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(f,v){return v===void 0&&(v=f),this.x=f,this.y=v,this},setSize:function(f,v){return v===void 0&&(v=f),this.width=f,this.height=v,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(f){return f===void 0&&(f=new d),f.setTo(this.x,this.y,this.right,this.y),f},getLineB:function(f){return f===void 0&&(f=new d),f.setTo(this.right,this.y,this.right,this.bottom),f},getLineC:function(f){return f===void 0&&(f=new d),f.setTo(this.right,this.bottom,this.x,this.bottom),f},getLineD:function(f){return f===void 0&&(f=new d),f.setTo(this.x,this.bottom,this.x,this.y),f},left:{get:function(){return this.x},set:function(f){f>=this.right?this.width=0:this.width=this.right-f,this.x=f}},right:{get:function(){return this.x+this.width},set:function(f){f<=this.x?this.width=0:this.width=f-this.x}},top:{get:function(){return this.y},set:function(f){f>=this.bottom?this.height=0:this.height=this.bottom-f,this.y=f}},bottom:{get:function(){return this.y+this.height},set:function(f){f<=this.y?this.height=0:this.height=f-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(f){this.x=f-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(f){this.y=f-this.height/2}}});s.exports=p},94845:s=>{s.exports=function(o,i){return o.width===i.width&&o.height===i.height}},31730:s=>{s.exports=function(o,i,r){return r===void 0&&(r=i),o.width*=i,o.height*=r,o}},36899:(s,o,i)=>{var r=i(87841);s.exports=function(h,a,u){u===void 0&&(u=new r);var l=Math.min(h.x,a.x),d=Math.min(h.y,a.y),c=Math.max(h.right,a.right)-l,p=Math.max(h.bottom,a.bottom)-d;return u.setTo(l,d,c,p)}},93232:(s,o,i)=>{var r=i(87841);r.Area=i(62224),r.Ceil=i(98615),r.CeilAll=i(31688),r.CenterOn=i(67502),r.Clone=i(65085),r.Contains=i(37303),r.ContainsPoint=i(96553),r.ContainsRect=i(70273),r.CopyFrom=i(43459),r.Decompose=i(77493),r.Equals=i(9219),r.FitInside=i(53751),r.FitOutside=i(16088),r.Floor=i(80774),r.FloorAll=i(83859),r.FromPoints=i(19217),r.FromXY=i(9477),r.GetAspectRatio=i(8249),r.GetCenter=i(27165),r.GetPoint=i(20812),r.GetPoints=i(34819),r.GetSize=i(51313),r.Inflate=i(86091),r.Intersection=i(53951),r.MarchingAnts=i(14649),r.MergePoints=i(33595),r.MergeRect=i(20074),r.MergeXY=i(92171),r.Offset=i(42981),r.OffsetPoint=i(46907),r.Overlaps=i(60170),r.Perimeter=i(13019),r.PerimeterPoint=i(85133),r.Random=i(26597),r.RandomOutside=i(86470),r.SameDimensions=i(94845),r.Scale=i(31730),r.Union=i(36899),s.exports=r},41658:s=>{s.exports=function(o){var i=o.x1,r=o.y1,h=o.x2,a=o.y2,u=o.x3,l=o.y3;return Math.abs(((u-i)*(a-r)-(h-i)*(l-r))/2)}},39208:(s,o,i)=>{var r=i(16483);s.exports=function(h,a,u){var l=u*(Math.sqrt(3)/2);return new r(h,a,h+u/2,a+l,h-u/2,a+l)}},39545:(s,o,i)=>{var r=i(94811),h=i(16483);s.exports=function(a,u,l,d,c){u===void 0&&(u=null),l===void 0&&(l=1),d===void 0&&(d=1),c===void 0&&(c=[]);for(var p,f,v,g,y,m,x,b,w,T=r(a,u),S=0;S<T.length;S+=3)p=T[S],f=T[S+1],v=T[S+2],g=a[2*p]*l,y=a[2*p+1]*d,m=a[2*f]*l,x=a[2*f+1]*d,b=a[2*v]*l,w=a[2*v+1]*d,c.push(new h(g,y,m,x,b,w));return c}},90301:(s,o,i)=>{var r=i(16483);s.exports=function(h,a,u,l){return l===void 0&&(l=u),new r(h,a,h,a-l,h+u,a)}},23707:(s,o,i)=>{var r=i(97523),h=i(13584);s.exports=function(a,u,l,d){d===void 0&&(d=r);var c=d(a),p=u-c.x,f=l-c.y;return h(a,p,f)}},97523:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){return a===void 0&&(a=new r),a.x=(h.x1+h.x2+h.x3)/3,a.y=(h.y1+h.y2+h.y3)/3,a}},24951:(s,o,i)=>{var r=i(26099);function h(a,u,l,d){return a*d-u*l}s.exports=function(a,u){u===void 0&&(u=new r);var l=a.x3,d=a.y3,c=a.x1-l,p=a.y1-d,f=a.x2-l,v=a.y2-d,g=2*h(c,p,f,v),y=h(p,c*c+p*p,v,f*f+v*v),m=h(c,c*c+p*p,f,f*f+v*v);return u.x=l-y/g,u.y=d+m/g,u}},85614:(s,o,i)=>{var r=i(96503);s.exports=function(h,a){a===void 0&&(a=new r);var u,l,d=h.x1,c=h.y1,p=h.x2,f=h.y2,v=h.x3,g=h.y3,y=p-d,m=f-c,x=v-d,b=g-c,w=y*(d+p)+m*(c+f),T=x*(d+v)+b*(c+g),S=2*(y*(g-f)-m*(v-p));if(Math.abs(S)<1e-6){var C=Math.min(d,p,v),E=Math.min(c,f,g);u=.5*(Math.max(d,p,v)-C),l=.5*(Math.max(c,f,g)-E),a.x=C+u,a.y=E+l,a.radius=Math.sqrt(u*u+l*l)}else a.x=(b*w-m*T)/S,a.y=(y*T-x*w)/S,u=a.x-d,l=a.y-c,a.radius=Math.sqrt(u*u+l*l);return a}},74422:(s,o,i)=>{var r=i(16483);s.exports=function(h){return new r(h.x1,h.y1,h.x2,h.y2,h.x3,h.y3)}},10690:s=>{s.exports=function(o,i,r){var h=o.x3-o.x1,a=o.y3-o.y1,u=o.x2-o.x1,l=o.y2-o.y1,d=i-o.x1,c=r-o.y1,p=h*h+a*a,f=h*u+a*l,v=h*d+a*c,g=u*u+l*l,y=u*d+l*c,m=p*g-f*f,x=m===0?0:1/m,b=(g*v-f*y)*x,w=(p*y-f*v)*x;return b>=0&&w>=0&&b+w<1}},48653:s=>{s.exports=function(o,i,r,h){r===void 0&&(r=!1),h===void 0&&(h=[]);for(var a,u,l,d,c,p,f=o.x3-o.x1,v=o.y3-o.y1,g=o.x2-o.x1,y=o.y2-o.y1,m=f*f+v*v,x=f*g+v*y,b=g*g+y*y,w=m*b-x*x,T=w===0?0:1/w,S=o.x1,C=o.y1,E=0;E<i.length&&(u=(m*(p=g*(l=i[E].x-S)+y*(d=i[E].y-C))-x*(c=f*l+v*d))*T,!((a=(b*c-x*p)*T)>=0&&u>=0&&a+u<1&&(h.push({x:i[E].x,y:i[E].y}),r)));E++);return h}},96006:(s,o,i)=>{var r=i(10690);s.exports=function(h,a){return r(h,a.x,a.y)}},71326:s=>{s.exports=function(o,i){return i.setTo(o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)}},71694:s=>{s.exports=function(o,i){return i===void 0&&(i=[]),i.push({x:o.x1,y:o.y1}),i.push({x:o.x2,y:o.y2}),i.push({x:o.x3,y:o.y3}),i}},33522:s=>{s.exports=function(o,i){return o.x1===i.x1&&o.y1===i.y1&&o.x2===i.x2&&o.y2===i.y2&&o.x3===i.x3&&o.y3===i.y3}},20437:(s,o,i)=>{var r=i(2141),h=i(35001);s.exports=function(a,u,l){l===void 0&&(l=new r);var d=a.getLineA(),c=a.getLineB(),p=a.getLineC();if(u<=0||u>=1)return l.x=d.x1,l.y=d.y1,l;var f=h(d),v=h(c),g=h(p),y=(f+v+g)*u,m=0;return y<f?(m=y/f,l.x=d.x1+(d.x2-d.x1)*m,l.y=d.y1+(d.y2-d.y1)*m):y>f+v?(m=(y-=f+v)/g,l.x=p.x1+(p.x2-p.x1)*m,l.y=p.y1+(p.y2-p.y1)*m):(m=(y-=f)/v,l.x=c.x1+(c.x2-c.x1)*m,l.y=c.y1+(c.y2-c.y1)*m),l}},80672:(s,o,i)=>{var r=i(35001),h=i(2141);s.exports=function(a,u,l,d){d===void 0&&(d=[]);var c=a.getLineA(),p=a.getLineB(),f=a.getLineC(),v=r(c),g=r(p),y=r(f),m=v+g+y;!u&&l>0&&(u=m/l);for(var x=0;x<u;x++){var b=m*(x/u),w=0,T=new h;b<v?(w=b/v,T.x=c.x1+(c.x2-c.x1)*w,T.y=c.y1+(c.y2-c.y1)*w):b>v+g?(w=(b-=v+g)/y,T.x=f.x1+(f.x2-f.x1)*w,T.y=f.y1+(f.y2-f.y1)*w):(w=(b-=v)/g,T.x=p.x1+(p.x2-p.x1)*w,T.y=p.y1+(p.y2-p.y1)*w),d.push(T)}return d}},39757:(s,o,i)=>{var r=i(2141);function h(a,u,l,d){var c=a-l,p=u-d,f=c*c+p*p;return Math.sqrt(f)}s.exports=function(a,u){u===void 0&&(u=new r);var l=a.x1,d=a.y1,c=a.x2,p=a.y2,f=a.x3,v=a.y3,g=h(f,v,c,p),y=h(l,d,f,v),m=h(c,p,l,d),x=g+y+m;return u.x=(l*g+c*y+f*m)/x,u.y=(d*g+p*y+v*m)/x,u}},13584:s=>{s.exports=function(o,i,r){return o.x1+=i,o.y1+=r,o.x2+=i,o.y2+=r,o.x3+=i,o.y3+=r,o}},1376:(s,o,i)=>{var r=i(35001);s.exports=function(h){var a=h.getLineA(),u=h.getLineB(),l=h.getLineC();return r(a)+r(u)+r(l)}},90260:(s,o,i)=>{var r=i(2141);s.exports=function(h,a){a===void 0&&(a=new r);var u=h.x2-h.x1,l=h.y2-h.y1,d=h.x3-h.x1,c=h.y3-h.y1,p=Math.random(),f=Math.random();return p+f>=1&&(p=1-p,f=1-f),a.x=h.x1+(u*p+d*f),a.y=h.y1+(l*p+c*f),a}},52172:(s,o,i)=>{var r=i(99614),h=i(39757);s.exports=function(a,u){var l=h(a);return r(a,l.x,l.y,u)}},49907:(s,o,i)=>{var r=i(99614);s.exports=function(h,a,u){return r(h,a.x,a.y,u)}},99614:s=>{s.exports=function(o,i,r,h){var a=Math.cos(h),u=Math.sin(h),l=o.x1-i,d=o.y1-r;return o.x1=l*a-d*u+i,o.y1=l*u+d*a+r,l=o.x2-i,d=o.y2-r,o.x2=l*a-d*u+i,o.y2=l*u+d*a+r,l=o.x3-i,d=o.y3-r,o.x3=l*a-d*u+i,o.y3=l*u+d*a+r,o}},16483:(s,o,i)=>{var r=i(83419),h=i(10690),a=i(20437),u=i(80672),l=i(23777),d=i(23031),c=i(90260),p=new r({initialize:function(f,v,g,y,m,x){f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=0),this.type=l.TRIANGLE,this.x1=f,this.y1=v,this.x2=g,this.y2=y,this.x3=m,this.y3=x},contains:function(f,v){return h(this,f,v)},getPoint:function(f,v){return a(this,f,v)},getPoints:function(f,v,g){return u(this,f,v,g)},getRandomPoint:function(f){return c(this,f)},setTo:function(f,v,g,y,m,x){return f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=0),x===void 0&&(x=0),this.x1=f,this.y1=v,this.x2=g,this.y2=y,this.x3=m,this.y3=x,this},getLineA:function(f){return f===void 0&&(f=new d),f.setTo(this.x1,this.y1,this.x2,this.y2),f},getLineB:function(f){return f===void 0&&(f=new d),f.setTo(this.x2,this.y2,this.x3,this.y3),f},getLineC:function(f){return f===void 0&&(f=new d),f.setTo(this.x3,this.y3,this.x1,this.y1),f},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(f){var v;v=this.x1<=this.x2&&this.x1<=this.x3?this.x1-f:this.x2<=this.x1&&this.x2<=this.x3?this.x2-f:this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(f){var v;v=this.x1>=this.x2&&this.x1>=this.x3?this.x1-f:this.x2>=this.x1&&this.x2>=this.x3?this.x2-f:this.x3-f,this.x1-=v,this.x2-=v,this.x3-=v}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(f){var v;v=this.y1<=this.y2&&this.y1<=this.y3?this.y1-f:this.y2<=this.y1&&this.y2<=this.y3?this.y2-f:this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(f){var v;v=this.y1>=this.y2&&this.y1>=this.y3?this.y1-f:this.y2>=this.y1&&this.y2>=this.y3?this.y2-f:this.y3-f,this.y1-=v,this.y2-=v,this.y3-=v}}});s.exports=p},84435:(s,o,i)=>{var r=i(16483);r.Area=i(41658),r.BuildEquilateral=i(39208),r.BuildFromPolygon=i(39545),r.BuildRight=i(90301),r.CenterOn=i(23707),r.Centroid=i(97523),r.CircumCenter=i(24951),r.CircumCircle=i(85614),r.Clone=i(74422),r.Contains=i(10690),r.ContainsArray=i(48653),r.ContainsPoint=i(96006),r.CopyFrom=i(71326),r.Decompose=i(71694),r.Equals=i(33522),r.GetPoint=i(20437),r.GetPoints=i(80672),r.InCenter=i(39757),r.Perimeter=i(1376),r.Offset=i(13584),r.Random=i(90260),r.Rotate=i(52172),r.RotateAroundPoint=i(49907),r.RotateAroundXY=i(99614),s.exports=r},74457:s=>{s.exports=function(o,i,r){return{gameObject:o,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},84409:s=>{s.exports=function(o,i){return function(r,h,a,u){var l=o.getPixelAlpha(h,a,u.texture.key,u.frame.name);return l&&l>=i}}},7003:(s,o,i)=>{var r=i(83419),h=i(93301),a=i(50792),u=i(8214),l=i(8443),d=i(78970),c=i(85098),p=i(42515),f=i(36210),v=i(61340),g=i(85955),y=new r({initialize:function(m,x){this.game=m,this.scaleManager,this.canvas,this.config=x,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=x.inputKeyboard?new d(this):null,this.mouse=x.inputMouse?new c(this):null,this.touch=x.inputTouch?new f(this):null,this.pointers=[],this.pointersTotal=x.inputActivePointers,x.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var b=0;b<=this.pointersTotal;b++){var w=new p(this,b);w.smoothFactor=x.inputSmoothFactor,this.pointers.push(w)}this.mousePointer=x.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],m.events.once(l.BOOT,this.boot,this)},boot:function(){var m=this.game,x=m.events;this.canvas=m.canvas,this.scaleManager=m.scale,this.events.emit(u.MANAGER_BOOT),x.on(l.PRE_RENDER,this.preRender,this),x.once(l.DESTROY,this.destroy,this)},setCanvasOver:function(m){this.isOver=!0,this.events.emit(u.GAME_OVER,m)},setCanvasOut:function(m){this.isOver=!1,this.events.emit(u.GAME_OUT,m)},preRender:function(){var m=this.game.loop.now,x=this.game.loop.delta,b=this.game.scene.getScenes(!0,!0);this.time=m,this.events.emit(u.MANAGER_UPDATE);for(var w=0;w<b.length;w++){var T=b[w];if(T.sys.input&&T.sys.input.updatePoll(m,x)&&this.globalTopOnly)return}},setDefaultCursor:function(m){this.defaultCursor=m,this.canvas.style.cursor!==m&&(this.canvas.style.cursor=m)},setCursor:function(m){m.cursor&&(this.canvas.style.cursor=m.cursor)},resetCursor:function(m){m.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(m){m===void 0&&(m=1);var x=[];this.pointersTotal+m>10&&(m=10-this.pointersTotal);for(var b=0;b<m;b++){var w=this.pointers.length,T=new p(this,w);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,x.push(T)}return x},updateInputPlugins:function(m,x){var b=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var w=0;w<b.length;w++){var T=b[w];if(T.sys.input&&(T.sys.input.update(m,x)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(m){for(var x=this.pointers,b=[],w=0;w<m.changedTouches.length;w++)for(var T=m.changedTouches[w],S=1;S<this.pointersTotal;S++){var C=x[S];if(!C.active){C.touchstart(T,m),this.activePointer=C,b.push(C);break}}this.updateInputPlugins(h.TOUCH_START,b)},onTouchMove:function(m){for(var x=this.pointers,b=[],w=0;w<m.changedTouches.length;w++)for(var T=m.changedTouches[w],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===T.identifier){var E=document.elementFromPoint(T.clientX,T.clientY)===this.canvas;!this.isOver&&E?this.setCanvasOver(m):this.isOver&&!E&&this.setCanvasOut(m),this.isOver&&(C.touchmove(T,m),this.activePointer=C,b.push(C));break}}this.updateInputPlugins(h.TOUCH_MOVE,b)},onTouchEnd:function(m){for(var x=this.pointers,b=[],w=0;w<m.changedTouches.length;w++)for(var T=m.changedTouches[w],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===T.identifier){C.touchend(T,m),b.push(C);break}}this.updateInputPlugins(h.TOUCH_END,b)},onTouchCancel:function(m){for(var x=this.pointers,b=[],w=0;w<m.changedTouches.length;w++)for(var T=m.changedTouches[w],S=1;S<this.pointersTotal;S++){var C=x[S];if(C.active&&C.identifier===T.identifier){C.touchcancel(T,m),b.push(C);break}}this.updateInputPlugins(h.TOUCH_CANCEL,b)},onMouseDown:function(m){var x=this.mousePointer;x.down(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(m){var x=this.mousePointer;x.move(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(m){var x=this.mousePointer;x.up(m),x.updateMotion(),this.activePointer=x,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(m){var x=this.mousePointer;x.wheel(m),this.activePointer=x,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(m){var x=this.mouse.locked;this.mousePointer.locked=x,this.events.emit(u.POINTERLOCK_CHANGE,m,x)},inputCandidate:function(m,x){var b=m.input;if(!b||!b.enabled||!m.willRender(x))return!1;var w=!0,T=m.parentContainer;if(T)do{if(!T.willRender(x)){w=!1;break}T=T.parentContainer}while(T);return w},hitTest:function(m,x,b,w){w===void 0&&(w=this._tempHitTest);var T=this._tempPoint,S=b.scrollX,C=b.scrollY;w.length=0;var E=m.x,M=m.y;b.getWorldPoint(E,M,T),m.worldX=T.x,m.worldY=T.y;for(var _={x:0,y:0},O=this._tempMatrix,k=this._tempMatrix2,P=0;P<x.length;P++){var A=x[P];if(this.inputCandidate(A,b)){var L=T.x+S*A.scrollFactorX-S,D=T.y+C*A.scrollFactorY-C;A.parentContainer?(A.getWorldTransformMatrix(O,k),O.applyInverse(L,D,_)):g(L,D,A.x,A.y,A.rotation,A.scaleX,A.scaleY,_),this.pointWithinHitArea(A,_.x,_.y)&&w.push(A)}}return w},pointWithinHitArea:function(m,x,b){x+=m.displayOriginX,b+=m.displayOriginY;var w=m.input;return!(!w||!w.hitAreaCallback(w.hitArea,x,b,m)||(w.localX=x,w.localY=b,0))},pointWithinInteractiveObject:function(m,x,b){return!!m.hitArea&&(x+=m.gameObject.displayOriginX,b+=m.gameObject.displayOriginY,m.localX=x,m.localY=b,m.hitAreaCallback(m.hitArea,x,b,m))},transformPointer:function(m,x,b,w){var T=m.position,S=m.prevPosition;S.x=T.x,S.y=T.y;var C=this.scaleManager.transformX(x),E=this.scaleManager.transformY(b),M=m.smoothFactor;w&&M!==0?(T.x=C*M+S.x*(1-M),T.y=E*M+S.y*(1-M)):(T.x=C,T.y=E)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(l.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var m=0;m<this.pointers.length;m++)this.pointers[m].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});s.exports=y},48205:(s,o,i)=>{var r=i(96503),h=i(87902),a=i(83419),u=i(93301),l=i(74457),d=i(84409),c=i(20339),p=i(8497),f=i(81154),v=i(8214),g=i(50792),y=i(95540),m=i(23777),x=i(89639),b=i(41212),w=i(37277),T=i(87841),S=i(37303),C=i(44594),E=i(16483),M=i(10690),_=new a({Extends:g,initialize:function(O){g.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new g,this.enabled=!0,this.displayList,this.cameras,x.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var k={cancelled:!1};this._eventContainer={stopPropagation:function(){k.cancelled=!0}},this._eventData=k,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(C.BOOT,this.boot,this),O.sys.events.on(C.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(C.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function(){var O=this.systems.events;O.on(C.TRANSITION_START,this.transitionIn,this),O.on(C.TRANSITION_OUT,this.transitionOut,this),O.on(C.TRANSITION_COMPLETE,this.transitionComplete,this),O.on(C.PRE_UPDATE,this.preUpdate,this),O.once(C.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function(O){this.isActive()&&this.emit(v.GAME_OVER,O.timeStamp,O)},onGameOut:function(O){this.isActive()&&this.emit(v.GAME_OUT,O.timeStamp,O)},preUpdate:function(){this.pluginEvents.emit(v.PRE_UPDATE);var O=this._pendingRemoval,k=this._pendingInsertion,P=O.length,A=k.length;if(P!==0||A!==0){for(var L=this._list,D=0;D<P;D++){var F=O[D],X=L.indexOf(F);X>-1&&(L.splice(X,1),this.clear(F,!0))}this._pendingRemoval.length=0,this._list=L.concat(k.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(O,k){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,O,k),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var P,A=this.manager,L=A.pointers,D=A.pointersTotal;for(P=0;P<D;P++)L[P].updateMotion();if(this._list.length===0)return!1;var F=this.pollRate;if(F===-1)return!1;if(F>0){if(this._pollTimer-=k,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var X=!1;for(P=0;P<D;P++){var z=0,Y=L[P];this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),z+=this.processOverOutEvents(Y),this.getDragState(Y)===2&&this.processDragThresholdEvent(Y,O),z>0&&(X=!0)}return X},update:function(O,k){if(!this.isActive())return!1;for(var P=k.length,A=!1,L=0;L<P;L++){var D=0,F=k[L];switch(this._tempZones=[],this._temp=this.hitTestPointer(F),this.sortGameObjects(this._temp,F),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),O){case u.MOUSE_DOWN:D+=this.processDragDownEvent(F),D+=this.processDownEvents(F),D+=this.processOverOutEvents(F);break;case u.MOUSE_UP:D+=this.processDragUpEvent(F),D+=this.processUpEvents(F),D+=this.processOverOutEvents(F);break;case u.TOUCH_START:D+=this.processDragDownEvent(F),D+=this.processDownEvents(F),D+=this.processOverEvents(F);break;case u.TOUCH_END:case u.TOUCH_CANCEL:D+=this.processDragUpEvent(F),D+=this.processUpEvents(F),D+=this.processOutEvents(F);break;case u.MOUSE_MOVE:case u.TOUCH_MOVE:D+=this.processDragMoveEvent(F),D+=this.processMoveEvents(F),D+=this.processOverOutEvents(F);break;case u.MOUSE_WHEEL:D+=this.processWheelEvent(F)}D>0&&(A=!0)}return this._updatedThisFrame=!0,A},clear:function(O,k){k===void 0&&(k=!1),this.disable(O);var P=O.input;P&&(this.removeDebug(O),this.manager.resetCursor(P),P.gameObject=void 0,P.target=void 0,P.hitArea=void 0,P.hitAreaCallback=void 0,P.callbackContext=void 0,O.input=null),k||this.queueForRemoval(O);var A=this._draggable.indexOf(O);return A>-1&&this._draggable.splice(A,1),O},disable:function(O){var k=O.input;k&&(k.enabled=!1,k.dragState=0);for(var P,A=this._drag,L=this._over,D=this.manager,F=0;F<D.pointersTotal;F++)(P=A[F].indexOf(O))>-1&&A[F].splice(P,1),(P=L[F].indexOf(O))>-1&&L[F].splice(P,1);return this},enable:function(O,k,P,A){return A===void 0&&(A=!1),O.input?O.input.enabled=!0:this.setHitArea(O,k,P),O.input&&A&&!O.input.dropZone&&(O.input.dropZone=A),this},hitTestPointer:function(O){for(var k=this.cameras.getCamerasBelowPointer(O),P=0;P<k.length;P++){for(var A=k[P],L=this.manager.hitTest(O,this._list,A),D=0;D<L.length;D++){var F=L[D];F.input.dropZone&&this._tempZones.push(F)}if(L.length>0)return O.camera=A,L}return O.camera=k[0],[]},processDownEvents:function(O){var k=0,P=this._temp,A=this._eventData,L=this._eventContainer;A.cancelled=!1;for(var D=!1,F=0;F<P.length;F++){var X=P[F];if(X.input&&X.input.enabled){if(k++,X.emit(v.GAMEOBJECT_POINTER_DOWN,O,X.input.localX,X.input.localY,L),A.cancelled||!X.input||!X.input.enabled){D=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,O,X,L),A.cancelled||!X.input){D=!0;break}}}return!D&&this.manager&&(O.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,O,P):this.emit(v.POINTER_DOWN_OUTSIDE,O)),k},getDragState:function(O){return this._dragState[O.id]},setDragState:function(O,k){this._dragState[O.id]=k},processDragThresholdEvent:function(O,k){var P=!1,A=this.dragTimeThreshold,L=this.dragDistanceThreshold;if((L>0&&c(O.x,O.y,O.downX,O.downY)>=L||A>0&&k>=O.downTime+A)&&(P=!0),P)return this.setDragState(O,3),this.processDragStartList(O)},processDragStartList:function(O){if(this.getDragState(O)!==3)return 0;for(var k=this._drag[O.id],P=0;P<k.length;P++){var A=k[P],L=A.input;L.dragState=2,L.dragStartX=A.x,L.dragStartY=A.y,L.dragStartXGlobal=O.worldX,L.dragStartYGlobal=O.worldY,L.dragX=L.dragStartXGlobal-L.dragStartX,L.dragY=L.dragStartYGlobal-L.dragStartY,A.emit(v.GAMEOBJECT_DRAG_START,O,L.dragX,L.dragY),this.emit(v.DRAG_START,O,A)}return this.setDragState(O,4),k.length},processDragDownEvent:function(O){var k=this._temp;if(this._draggable.length===0||k.length===0||!O.primaryDown||this.getDragState(O)!==0)return 0;this.setDragState(O,1);for(var P=[],A=0;A<k.length;A++){var L=k[A];L.input.draggable&&L.input.dragState===0&&P.push(L)}return P.length===0?(this.setDragState(O,0),0):(P.length>1&&(this.sortGameObjects(P,O),this.topOnly&&P.splice(1)),this._drag[O.id]=P,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(O,3),this.processDragStartList(O)):(this.setDragState(O,2),0))},processDragMoveEvent:function(O){if(this.getDragState(O)===2&&this.processDragThresholdEvent(O,this.manager.game.loop.now),this.getDragState(O)!==4)return 0;for(var k=this._tempZones,P=this._drag[O.id],A=0;A<P.length;A++){var L,D,F=P[A],X=F.input,z=X.target;if(z){var Y=k.indexOf(z);Y===0?(F.emit(v.GAMEOBJECT_DRAG_OVER,O,z),this.emit(v.DRAG_OVER,O,F,z)):Y>0?(F.emit(v.GAMEOBJECT_DRAG_LEAVE,O,z),this.emit(v.DRAG_LEAVE,O,F,z),X.target=k[0],z=X.target,F.emit(v.GAMEOBJECT_DRAG_ENTER,O,z),this.emit(v.DRAG_ENTER,O,F,z)):(F.emit(v.GAMEOBJECT_DRAG_LEAVE,O,z),this.emit(v.DRAG_LEAVE,O,F,z),k[0]?(X.target=k[0],z=X.target,F.emit(v.GAMEOBJECT_DRAG_ENTER,O,z),this.emit(v.DRAG_ENTER,O,F,z)):X.target=null)}else!z&&k[0]&&(X.target=k[0],z=X.target,F.emit(v.GAMEOBJECT_DRAG_ENTER,O,z),this.emit(v.DRAG_ENTER,O,F,z));if(F.parentContainer){var R=O.worldX-X.dragStartXGlobal,B=O.worldY-X.dragStartYGlobal,I=F.getParentRotation(),G=R*Math.cos(I)+B*Math.sin(I),N=B*Math.cos(I)-R*Math.sin(I);G*=1/F.parentContainer.scaleX,N*=1/F.parentContainer.scaleY,L=G+X.dragStartX,D=N+X.dragStartY}else L=O.worldX-X.dragX,D=O.worldY-X.dragY;F.emit(v.GAMEOBJECT_DRAG,O,L,D),this.emit(v.DRAG,O,F,L,D)}return P.length},processDragUpEvent:function(O){for(var k=this._drag[O.id],P=0;P<k.length;P++){var A=k[P],L=A.input;if(L&&L.dragState===2){L.dragState=0,L.dragX=L.localX-A.displayOriginX,L.dragY=L.localY-A.displayOriginY;var D=!1,F=L.target;F&&(A.emit(v.GAMEOBJECT_DROP,O,F),this.emit(v.DROP,O,A,F),L.target=null,D=!0),A.input&&A.input.enabled&&(A.emit(v.GAMEOBJECT_DRAG_END,O,L.dragX,L.dragY,D),this.emit(v.DRAG_END,O,A,D))}}return this.setDragState(O,0),k.splice(0),0},processMoveEvents:function(O){var k=0,P=this._temp,A=this._eventData,L=this._eventContainer;A.cancelled=!1;for(var D=!1,F=0;F<P.length;F++){var X=P[F];if(X.input&&X.input.enabled){if(k++,X.emit(v.GAMEOBJECT_POINTER_MOVE,O,X.input.localX,X.input.localY,L),A.cancelled||!X.input||!X.input.enabled){D=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,O,X,L),A.cancelled||!X.input||!X.input.enabled){D=!0;break}if(this.topOnly)break}}return D||this.emit(v.POINTER_MOVE,O,P),k},processWheelEvent:function(O){var k=0,P=this._temp,A=this._eventData,L=this._eventContainer;A.cancelled=!1;for(var D=!1,F=O.deltaX,X=O.deltaY,z=O.deltaZ,Y=0;Y<P.length;Y++){var R=P[Y];if(R.input&&R.input.enabled){if(k++,R.emit(v.GAMEOBJECT_POINTER_WHEEL,O,F,X,z,L),A.cancelled||!R.input||!R.input.enabled){D=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,O,R,F,X,z,L),A.cancelled||!R.input||!R.input.enabled){D=!0;break}}}return D||this.emit(v.POINTER_WHEEL,O,P,F,X,z),k},processOverEvents:function(O){var k=this._temp,P=0,A=k.length,L=[];if(A>0){var D=this.manager,F=this._eventData,X=this._eventContainer;F.cancelled=!1;for(var z=!1,Y=0;Y<A;Y++){var R=k[Y];if(R.input&&R.input.enabled){if(L.push(R),D.setCursor(R.input),R.emit(v.GAMEOBJECT_POINTER_OVER,O,R.input.localX,R.input.localY,X),P++,F.cancelled||!R.input||!R.input.enabled){z=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,R,X),F.cancelled||!R.input||!R.input.enabled){z=!0;break}}}z||this.emit(v.POINTER_OVER,O,L)}return this._over[O.id]=L,P},processOutEvents:function(O){var k=this._over[O.id],P=0,A=k.length;if(A>0){var L=this.manager,D=this._eventData,F=this._eventContainer;D.cancelled=!1;var X=!1;this.sortGameObjects(k,O);for(var z=0;z<A;z++){var Y=k[z];if((Y=k[z]).input&&Y.input.enabled){if(L.resetCursor(Y.input),Y.emit(v.GAMEOBJECT_POINTER_OUT,O,F),P++,D.cancelled||!Y.input||!Y.input.enabled){X=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,Y,F),D.cancelled||!Y.input||!Y.input.enabled){X=!0;break}X||this.emit(v.POINTER_OUT,O,k)}}this._over[O.id]=[]}return P},processOverOutEvents:function(O){var k,P,A=this._temp,L=[],D=[],F=[],X=this._over[O.id],z=this._drag[O.id],Y=this.manager;for(k=0;k<X.length;k++)P=X[k],A.indexOf(P)===-1&&z.indexOf(P)===-1?L.push(P):F.push(P);for(k=0;k<A.length;k++)P=A[k],X.indexOf(P)===-1&&D.push(P);var R=L.length,B=0,I=this._eventData,G=this._eventContainer;I.cancelled=!1;var N=!1;if(R>0){for(this.sortGameObjects(L,O),k=0;k<R;k++)if((P=L[k]).input&&P.input.enabled){if(Y.resetCursor(P.input),P.emit(v.GAMEOBJECT_POINTER_OUT,O,G),B++,I.cancelled||!P.input||!P.input.enabled){N=!0;break}if(this.emit(v.GAMEOBJECT_OUT,O,P,G),I.cancelled||!P.input||!P.input.enabled){N=!0;break}}N||this.emit(v.POINTER_OUT,O,L)}if(R=D.length,I.cancelled=!1,N=!1,R>0){for(this.sortGameObjects(D,O),k=0;k<R;k++)if((P=D[k]).input&&P.input.enabled){if(Y.setCursor(P.input),P.emit(v.GAMEOBJECT_POINTER_OVER,O,P.input.localX,P.input.localY,G),B++,I.cancelled||!P.input||!P.input.enabled){N=!0;break}if(this.emit(v.GAMEOBJECT_OVER,O,P,G),I.cancelled||!P.input||!P.input.enabled){N=!0;break}}N||this.emit(v.POINTER_OVER,O,D)}return X=F.concat(D),this._over[O.id]=this.sortGameObjects(X,O),B},processUpEvents:function(O){var k=this._temp,P=this._eventData,A=this._eventContainer;P.cancelled=!1;for(var L=!1,D=0;D<k.length;D++){var F=k[D];if(F.input&&F.input.enabled){if(F.emit(v.GAMEOBJECT_POINTER_UP,O,F.input.localX,F.input.localY,A),P.cancelled||!F.input||!F.input.enabled){L=!0;break}if(this.emit(v.GAMEOBJECT_UP,O,F,A),P.cancelled||!F.input||!F.input.enabled){L=!0;break}}}return!L&&this.manager&&(O.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,O,k):this.emit(v.POINTER_UP_OUTSIDE,O)),k.length},queueForInsertion:function(O){return this._pendingInsertion.indexOf(O)===-1&&this._list.indexOf(O)===-1&&this._pendingInsertion.push(O),this},queueForRemoval:function(O){return this._pendingRemoval.push(O),this},setDraggable:function(O,k){k===void 0&&(k=!0),Array.isArray(O)||(O=[O]);for(var P=0;P<O.length;P++){var A=O[P];A.input.draggable=k;var L=this._draggable.indexOf(A);k&&L===-1?this._draggable.push(A):!k&&L>-1&&this._draggable.splice(L,1)}return this},makePixelPerfect:function(O){O===void 0&&(O=1);var k=this.systems.textures;return d(k,O)},setHitArea:function(O,k,P){if(k===void 0)return this.setHitAreaFromTexture(O);Array.isArray(O)||(O=[O]);var A=!1,L=!1,D=!1,F=!1,X=!1,z=!0;if(b(k)&&Object.keys(k).length){var Y=k;if(!O.some(function(N){return N.hasOwnProperty("faces")})){k=y(Y,"hitArea",null),P=y(Y,"hitAreaCallback",null),X=y(Y,"pixelPerfect",!1);var R=y(Y,"alphaTolerance",1);X&&(k={},P=this.makePixelPerfect(R))}A=y(Y,"draggable",!1),L=y(Y,"dropZone",!1),D=y(Y,"cursor",!1),F=y(Y,"useHandCursor",!1),k&&P||(this.setHitAreaFromTexture(O),z=!1)}else typeof k!="function"||P||(P=k,k={});for(var B=0;B<O.length;B++){var I=O[B];if(X&&I.type==="Container")console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var G=I.input?I.input:l(I,k,P);G.customHitArea=z,G.dropZone=L,G.cursor=F?"pointer":D,I.input=G,A&&this.setDraggable(I),this.queueForInsertion(I)}}return this},setHitAreaCircle:function(O,k,P,A,L){L===void 0&&(L=h);var D=new r(k,P,A);return this.setHitArea(O,D,L)},setHitAreaEllipse:function(O,k,P,A,L,D){D===void 0&&(D=f);var F=new p(k,P,A,L);return this.setHitArea(O,F,D)},setHitAreaFromTexture:function(O,k){k===void 0&&(k=S),Array.isArray(O)||(O=[O]);for(var P=0;P<O.length;P++){var A=O[P],L=A.frame,D=0,F=0;A.width?(D=A.width,F=A.height):L&&(D=L.realWidth,F=L.realHeight),A.type!=="Container"||D!==0&&F!==0?D!==0&&F!==0&&(A.input=l(A,new T(0,0,D,F),k),this.queueForInsertion(A)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(O,k,P,A,L,D){D===void 0&&(D=S);var F=new T(k,P,A,L);return this.setHitArea(O,F,D)},setHitAreaTriangle:function(O,k,P,A,L,D,F,X){X===void 0&&(X=M);var z=new E(k,P,A,L,D,F);return this.setHitArea(O,z,X)},enableDebug:function(O,k){k===void 0&&(k=65280);var P=O.input;if(!P||!P.hitArea)return this;var A=P.hitArea,L=A.type,D=P.hitAreaDebug,F=this.systems.add,X=this.systems.updateList;D&&(X.remove(D),D.destroy(),D=null);var z=0,Y=0;switch(L){case m.CIRCLE:D=F.arc(0,0,A.radius),z=A.x-A.radius,Y=A.y-A.radius;break;case m.ELLIPSE:D=F.ellipse(0,0,A.width,A.height),z=A.x-A.width/2,Y=A.y-A.height/2;break;case m.LINE:D=F.line(0,0,A.x1,A.y1,A.x2,A.y2);break;case m.POLYGON:D=F.polygon(0,0,A.points);break;case m.RECTANGLE:D=F.rectangle(0,0,A.width,A.height),z=A.x,Y=A.y;break;case m.TRIANGLE:D=F.triangle(0,0,A.x1,A.y1,A.x2,A.y2,A.x3,A.y3)}return D&&(D.isFilled=!1,D.strokeColor=k,D.preUpdate=function(){D.setVisible(O.visible),D.setStrokeStyle(1/O.scale,D.strokeColor),D.setDisplayOrigin(O.displayOriginX,O.displayOriginY);var R=O.x,B=O.y,I=O.rotation,G=O.scaleX,N=O.scaleY;if(O.parentContainer){var W=O.getWorldTransformMatrix();R=W.tx,B=W.ty,I=W.rotation,G=W.scaleX,N=W.scaleY}D.setRotation(I),D.setScale(G,N),D.setPosition(R+z*G,B+Y*N),D.setScrollFactor(O.scrollFactorX,O.scrollFactorY),D.setDepth(O.depth)},X.add(D),P.hitAreaDebug=D),this},removeDebug:function(O){var k=O.input;return k&&k.hitAreaDebug&&(k.hitAreaDebug.destroy(),k.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(O){return this.pollRate=O,this._pollTimer=0,this},setGlobalTopOnly:function(O){return this.manager.globalTopOnly=O,this},setTopOnly:function(O){return this.topOnly=O,this},sortGameObjects:function(O,k){if(O.length<2||!k.camera)return O;var P=k.camera.renderList;return O.sort(function(A,L){var D=Math.max(P.indexOf(A),0);return Math.max(P.indexOf(L),0)-D})},sortDropZones:function(O){return O.length<2?O:(this.scene.sys.depthSort(),O.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(O,k){if(O.parentContainer||k.parentContainer){if(O.parentContainer===k.parentContainer)return k.parentContainer.getIndex(k)-O.parentContainer.getIndex(O);if(O.parentContainer===k)return-1;if(k.parentContainer===O)return 1;for(var P=O.getIndexList(),A=k.getIndexList(),L=Math.min(P.length,A.length),D=0;D<L;D++){var F=P[D],X=A[D];if(F!==X)return X-F}return A.length-P.length}return this.displayList.getIndex(k)-this.displayList.getIndex(O)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(O){return this.manager.addPointer(O)},setDefaultCursor:function(O){return this.manager.setDefaultCursor(O),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var O=0;O<10;O++)this._drag[O]=[],this._over[O]=[];this.removeAllListeners();var k=this.manager;k.canvas.style.cursor=k.defaultCursor;var P=this.systems.events;P.off(C.TRANSITION_START,this.transitionIn,this),P.off(C.TRANSITION_OUT,this.transitionOut,this),P.off(C.TRANSITION_COMPLETE,this.transitionComplete,this),P.off(C.PRE_UPDATE,this.preUpdate,this),k.events.off(v.GAME_OUT,this.onGameOut,this),k.events.off(v.GAME_OVER,this.onGameOver,this),P.off(C.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var O=this.manager.pointers,k=0;k<O.length;k++)O[k].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});w.register("InputPlugin",_,"input"),s.exports=_},89639:(s,o,i)=>{var r=i(35154),h={},a={register:function(u,l,d,c,p){h[u]={plugin:l,mapping:d,settingsKey:c,configKey:p}},getPlugin:function(u){return h[u]},install:function(u){var l=u.scene.sys,d=l.settings.input,c=l.game.config;for(var p in h){var f=h[p].plugin,v=h[p].mapping,g=h[p].settingsKey,y=h[p].configKey;r(d,g,c[y])&&(u[v]=new f(u))}},remove:function(u){h.hasOwnProperty(u)&&delete h[u]}};s.exports=a},42515:(s,o,i)=>{var r=i(31040),h=i(83419),a=i(20339),u=i(43855),l=i(47235),d=i(26099),c=i(25892),p=new h({initialize:function(f,v){this.manager=f,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new d,this.prevPosition=new d,this.midPoint=new d(-1,-1),this.velocity=new d,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(f){var v=f.getWorldPoint(this.x,this.y);return this.worldX=v.x,this.worldY=v.y,this},positionToCamera:function(f,v){return f.getWorldPoint(this.x,this.y,v)},updateMotion:function(){var f=this.position.x,v=this.position.y,g=this.midPoint.x,y=this.midPoint.y;if(f!==g||v!==y){var m=l(this.motionFactor,g,f),x=l(this.motionFactor,y,v);u(m,f,.1)&&(m=f),u(x,v,.1)&&(x=v),this.midPoint.set(m,x);var b=f-m,w=v-x;this.velocity.set(b,w),this.angle=r(m,x,f,v),this.distance=Math.sqrt(b*b+w*w)}},up:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=f.timeStamp,this.wasTouch=!1)},down:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.button=f.button,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),f.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),c.macOS&&f.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=f.timeStamp),this.wasTouch=!1},move:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.locked&&(this.movementX=f.movementX||f.mozMovementX||f.webkitMovementX||0,this.movementY=f.movementY||f.mozMovementY||f.webkitMovementY||0),this.moveTime=f.timeStamp,this.wasTouch=!1},wheel:function(f){"buttons"in f&&(this.buttons=f.buttons),this.event=f,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.deltaX=f.deltaX,this.deltaY=f.deltaY,this.deltaZ=f.deltaZ,this.wasTouch=!1},touchstart:function(f,v){f.pointerId&&(this.pointerId=f.pointerId),this.identifier=f.identifier,this.target=f.target,this.active=!0,this.buttons=1,this.event=v,this.downElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=v.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(f,v){this.event=v,this.manager.transformPointer(this,f.pageX,f.pageY,!0),this.moveTime=v.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(f,v){this.buttons=0,this.event=v,this.upElement=f.target,this.manager.transformPointer(this,f.pageX,f.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=v.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(f,v){f===void 0&&(f=10),v===void 0&&(v=[]);for(var g=this.prevPosition.x,y=this.prevPosition.y,m=this.position.x,x=this.position.y,b=0;b<f;b++){var w=1/f*b;v[b]={x:l(w,g,m),y:l(w,y,x)}}return v},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},time:{get:function(){return this.event?this.event.timeStamp:0}}});s.exports=p},93301:s=>{s.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},7179:s=>{s.exports="boot"},85375:s=>{s.exports="destroy"},39843:s=>{s.exports="dragend"},23388:s=>{s.exports="dragenter"},16133:s=>{s.exports="drag"},27829:s=>{s.exports="dragleave"},53904:s=>{s.exports="dragover"},56058:s=>{s.exports="dragstart"},2642:s=>{s.exports="drop"},88171:s=>{s.exports="gameobjectdown"},36147:s=>{s.exports="dragend"},71692:s=>{s.exports="dragenter"},96149:s=>{s.exports="drag"},81285:s=>{s.exports="dragleave"},74048:s=>{s.exports="dragover"},21322:s=>{s.exports="dragstart"},49378:s=>{s.exports="drop"},86754:s=>{s.exports="gameobjectmove"},86433:s=>{s.exports="gameobjectout"},60709:s=>{s.exports="gameobjectover"},24081:s=>{s.exports="pointerdown"},11172:s=>{s.exports="pointermove"},18907:s=>{s.exports="pointerout"},95579:s=>{s.exports="pointerover"},35368:s=>{s.exports="pointerup"},26972:s=>{s.exports="wheel"},47078:s=>{s.exports="gameobjectup"},73802:s=>{s.exports="gameobjectwheel"},56718:s=>{s.exports="gameout"},25936:s=>{s.exports="gameover"},27503:s=>{s.exports="boot"},50852:s=>{s.exports="process"},96438:s=>{s.exports="update"},59152:s=>{s.exports="pointerlockchange"},47777:s=>{s.exports="pointerdown"},27957:s=>{s.exports="pointerdownoutside"},19444:s=>{s.exports="pointermove"},54251:s=>{s.exports="pointerout"},18667:s=>{s.exports="pointerover"},27192:s=>{s.exports="pointerup"},24652:s=>{s.exports="pointerupoutside"},45132:s=>{s.exports="wheel"},44512:s=>{s.exports="preupdate"},15757:s=>{s.exports="shutdown"},41637:s=>{s.exports="start"},93802:s=>{s.exports="update"},8214:(s,o,i)=>{s.exports={BOOT:i(7179),DESTROY:i(85375),DRAG_END:i(39843),DRAG_ENTER:i(23388),DRAG:i(16133),DRAG_LEAVE:i(27829),DRAG_OVER:i(53904),DRAG_START:i(56058),DROP:i(2642),GAME_OUT:i(56718),GAME_OVER:i(25936),GAMEOBJECT_DOWN:i(88171),GAMEOBJECT_DRAG_END:i(36147),GAMEOBJECT_DRAG_ENTER:i(71692),GAMEOBJECT_DRAG:i(96149),GAMEOBJECT_DRAG_LEAVE:i(81285),GAMEOBJECT_DRAG_OVER:i(74048),GAMEOBJECT_DRAG_START:i(21322),GAMEOBJECT_DROP:i(49378),GAMEOBJECT_MOVE:i(86754),GAMEOBJECT_OUT:i(86433),GAMEOBJECT_OVER:i(60709),GAMEOBJECT_POINTER_DOWN:i(24081),GAMEOBJECT_POINTER_MOVE:i(11172),GAMEOBJECT_POINTER_OUT:i(18907),GAMEOBJECT_POINTER_OVER:i(95579),GAMEOBJECT_POINTER_UP:i(35368),GAMEOBJECT_POINTER_WHEEL:i(26972),GAMEOBJECT_UP:i(47078),GAMEOBJECT_WHEEL:i(73802),MANAGER_BOOT:i(27503),MANAGER_PROCESS:i(50852),MANAGER_UPDATE:i(96438),POINTER_DOWN:i(47777),POINTER_DOWN_OUTSIDE:i(27957),POINTER_MOVE:i(19444),POINTER_OUT:i(54251),POINTER_OVER:i(18667),POINTER_UP:i(27192),POINTER_UP_OUTSIDE:i(24652),POINTER_WHEEL:i(45132),POINTERLOCK_CHANGE:i(59152),PRE_UPDATE:i(44512),SHUTDOWN:i(15757),START:i(41637),UPDATE:i(93802)}},97421:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a){this.pad=h,this.events=h.events,this.index=a,this.value=0,this.threshold=.1},update:function(h){this.value=h},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});s.exports=r},28884:(s,o,i)=>{var r=i(83419),h=i(92734),a=new r({initialize:function(u,l){this.pad=u,this.events=u.manager,this.index=l,this.value=0,this.threshold=1,this.pressed=!1},update:function(u){this.value=u;var l=this.pad,d=this.index;u>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,l,this,u),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,d,u,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,l,this,u),this.pad.emit(h.GAMEPAD_BUTTON_UP,d,u,this))},destroy:function(){this.pad=null,this.events=null}});s.exports=a},99125:(s,o,i)=>{var r=i(97421),h=i(28884),a=i(83419),u=i(50792),l=i(26099),d=new a({Extends:u,initialize:function(c,p){u.call(this),this.manager=c,this.pad=p,this.id=p.id,this.index=p.index;for(var f=[],v=0;v<p.buttons.length;v++)f.push(new h(this,v));this.buttons=f;var g=[];for(v=0;v<p.axes.length;v++)g.push(new r(this,v));this.axes=g,this.vibration=p.vibrationActuator;var y={value:0,pressed:!1};this._LCLeft=f[14]?f[14]:y,this._LCRight=f[15]?f[15]:y,this._LCTop=f[12]?f[12]:y,this._LCBottom=f[13]?f[13]:y,this._RCLeft=f[2]?f[2]:y,this._RCRight=f[1]?f[1]:y,this._RCTop=f[3]?f[3]:y,this._RCBottom=f[0]?f[0]:y,this._FBLeftTop=f[4]?f[4]:y,this._FBLeftBottom=f[6]?f[6]:y,this._FBRightTop=f[5]?f[5]:y,this._FBRightBottom=f[7]?f[7]:y;var m={value:0};this._HAxisLeft=g[0]?g[0]:m,this._VAxisLeft=g[1]?g[1]:m,this._HAxisRight=g[2]?g[2]:m,this._VAxisRight=g[3]?g[3]:m,this.leftStick=new l,this.rightStick=new l,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(c){return this.axes[c].getValue()},setAxisThreshold:function(c){for(var p=0;p<this.axes.length;p++)this.axes[p].threshold=c},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(c){return this.buttons[c].value},isButtonDown:function(c){return this.buttons[c].pressed},update:function(c){if(!(c.timestamp<this._created)){var p,f=this.buttons,v=c.buttons,g=f.length;for(p=0;p<g;p++)f[p].update(v[p].value);var y=this.axes,m=c.axes;for(g=y.length,p=0;p<g;p++)y[p].update(m[p]);g>=2&&(this.leftStick.set(y[0].getValue(),y[1].getValue()),g>=4&&this.rightStick.set(y[2].getValue(),y[3].getValue()))}},destroy:function(){var c;for(this.removeAllListeners(),this.manager=null,this.pad=null,c=0;c<this.buttons.length;c++)this.buttons[c].destroy();for(c=0;c<this.axes.length;c++)this.axes[c].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});s.exports=d},56654:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(92734),u=i(99125),l=i(35154),d=i(89639),c=i(8214),p=new r({Extends:h,initialize:function(f){h.call(this),this.scene=f.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=f,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,f.pluginEvents.once(c.BOOT,this.boot,this),f.pluginEvents.on(c.START,this.start,this)},boot:function(){var f=this.scene.sys.game,v=this.settings.input,g=f.config;this.enabled=l(v,"gamepad",g.inputGamepad)&&f.device.input.gamepads,this.target=l(v,"gamepad.target",g.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var f=this,v=this.target,g=function(y){!y.defaultPrevented&&f.isActive()&&(f.refreshPads(),f.queue.push(y))};this.onGamepadHandler=g,v.addEventListener("gamepadconnected",g,!1),v.addEventListener("gamepaddisconnected",g,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update);for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].removeAllListeners()},disconnectAll:function(){for(var f=0;f<this.gamepads.length;f++)this.gamepads[f].pad.connected=!1},refreshPads:function(){var f=navigator.getGamepads();if(f)for(var v=this.gamepads,g=0;g<f.length;g++){var y=f[g];if(y){var m=y.id,x=y.index,b=v[x];if(b)b.id!==m?(b.destroy(),v[x]=new u(this,y)):b.update(y);else{var w=new u(this,y);v[x]=w,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=w):this._pad3=w:this._pad2=w:this._pad1=w}}}else this.disconnectAll()},getAll:function(){for(var f=[],v=this.gamepads,g=0;g<v.length;g++)v[g]&&f.push(v[g]);return f},getPad:function(f){for(var v=this.gamepads,g=0;g<v.length;g++)if(v[g]&&v[g].index===f)return v[g]},update:function(){if(this.enabled){this.refreshPads();var f=this.queue.length;if(f!==0)for(var v=this.queue.splice(0,f),g=0;g<f;g++){var y=v[g],m=this.getPad(y.gamepad.index);y.type==="gamepadconnected"?this.emit(a.CONNECTED,m,y):y.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,m,y)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var f=0;f<this.gamepads.length;f++)this.gamepads[f]&&this.gamepads[f].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});d.register("GamepadPlugin",p,"gamepad","gamepad","inputGamepad"),s.exports=p},89651:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:s=>{s.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(s,o,i)=>{s.exports={DUALSHOCK_4:i(65294),SNES_USB:i(89651),XBOX_360:i(90089)}},46008:s=>{s.exports="down"},7629:s=>{s.exports="up"},42206:s=>{s.exports="connected"},86544:s=>{s.exports="disconnected"},94784:s=>{s.exports="down"},14325:s=>{s.exports="up"},92734:(s,o,i)=>{s.exports={BUTTON_DOWN:i(46008),BUTTON_UP:i(7629),CONNECTED:i(42206),DISCONNECTED:i(86544),GAMEPAD_BUTTON_DOWN:i(94784),GAMEPAD_BUTTON_UP:i(14325)}},48646:(s,o,i)=>{s.exports={Axis:i(97421),Button:i(28884),Events:i(92734),Gamepad:i(99125),GamepadPlugin:i(56654),Configs:i(64894)}},14350:(s,o,i)=>{var r=i(93301),h=i(79291),a={CreatePixelPerfectHandler:i(84409),CreateInteractiveObject:i(74457),Events:i(8214),Gamepad:i(48646),InputManager:i(7003),InputPlugin:i(48205),InputPluginCache:i(89639),Keyboard:i(51442),Mouse:i(87078),Pointer:i(42515),Touch:i(95618)};a=h(!1,a,r),s.exports=a},78970:(s,o,i)=>{var r=i(72905),h=i(83419),a=i(8443),u=i(8214),l=i(46032),d=i(29747),c=new h({initialize:function(p){this.manager=p,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=d,this.onKeyUp=d,p.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var p=this.manager.config;this.enabled=p.inputKeyboard,this.target=p.inputKeyboardEventTarget,this.addCapture(p.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var p=this;this.onKeyDown=function(v){if(!v.defaultPrevented&&p.enabled&&p.manager){p.queue.push(v),p.manager.events.emit(u.MANAGER_PROCESS);var g=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;p.preventDefault&&!g&&p.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}},this.onKeyUp=function(v){if(!v.defaultPrevented&&p.enabled&&p.manager){p.queue.push(v),p.manager.events.emit(u.MANAGER_PROCESS);var g=v.altKey||v.ctrlKey||v.shiftKey||v.metaKey;p.preventDefault&&!g&&p.captures.indexOf(v.keyCode)>-1&&v.preventDefault()}};var f=this.target;f&&(f.addEventListener("keydown",this.onKeyDown,!1),f.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var p=this.target;p.removeEventListener("keydown",this.onKeyDown,!1),p.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var f=this.captures,v=0;v<p.length;v++){var g=p[v];typeof g=="string"&&(g=l[g.trim().toUpperCase()]),f.indexOf(g)===-1&&f.push(g)}this.preventDefault=f.length>0},removeCapture:function(p){typeof p=="string"&&(p=p.split(",")),Array.isArray(p)||(p=[p]);for(var f=this.captures,v=0;v<p.length;v++){var g=p[v];typeof g=="string"&&(g=l[g.toUpperCase()]),r(f,g)}this.preventDefault=f.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});s.exports=c},28846:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(95922),u=i(8443),l=i(35154),d=i(8214),c=i(89639),p=i(30472),f=i(46032),v=i(87960),g=i(74600),y=i(44594),m=i(56583),x=new r({Extends:h,initialize:function(b){h.call(this),this.game=b.systems.game,this.scene=b.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=b,this.manager=b.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,b.pluginEvents.once(d.BOOT,this.boot,this),b.pluginEvents.on(d.START,this.start,this)},boot:function(){var b=this.settings.input;this.enabled=l(b,"keyboard",!0);var w=l(b,"keyboard.capture",null);w&&this.addCaptures(w),this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(d.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this),this.game.events.on(u.BLUR,this.resetKeys,this),this.scene.sys.events.on(y.PAUSE,this.resetKeys,this),this.scene.sys.events.on(y.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(b){return this.manager.addCapture(b),this},removeCapture:function(b){return this.manager.removeCapture(b),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:f.UP,down:f.DOWN,left:f.LEFT,right:f.RIGHT,space:f.SPACE,shift:f.SHIFT})},addKeys:function(b,w,T){w===void 0&&(w=!0),T===void 0&&(T=!1);var S={};if(typeof b=="string"){b=b.split(",");for(var C=0;C<b.length;C++){var E=b[C].trim();E&&(S[E]=this.addKey(E,w,T))}}else for(var M in b)S[M]=this.addKey(b[M],w,T);return S},addKey:function(b,w,T){w===void 0&&(w=!0),T===void 0&&(T=!1);var S=this.keys;if(b instanceof p){var C=S.indexOf(b);return C>-1?S[C]=b:S[b.keyCode]=b,w&&this.addCapture(b.keyCode),b.setEmitOnRepeat(T),b}return typeof b=="string"&&(b=f[b.toUpperCase()]),S[b]||(S[b]=new p(this,b),w&&this.addCapture(b),S[b].setEmitOnRepeat(T)),S[b]},removeKey:function(b,w,T){w===void 0&&(w=!1),T===void 0&&(T=!1);var S,C=this.keys;if(b instanceof p){var E=C.indexOf(b);E>-1&&(S=this.keys[E],this.keys[E]=void 0)}else typeof b=="string"&&(b=f[b.toUpperCase()]);return C[b]&&(S=C[b],C[b]=void 0),S&&(S.plugin=null,T&&this.removeCapture(S.keyCode),w&&S.destroy()),this},removeAllKeys:function(b,w){b===void 0&&(b=!1),w===void 0&&(w=!1);for(var T=this.keys,S=0;S<T.length;S++){var C=T[S];C&&(T[S]=void 0,w&&this.removeCapture(C.keyCode),b&&C.destroy())}return this},createCombo:function(b,w){return new v(this,b,w)},checkDown:function(b,w){if(w===void 0&&(w=0),this.enabled&&b.isDown){var T=m(this.time-b.timeDown,w);if(T>b._tick)return b._tick=T,!0}return!1},update:function(){var b=this.manager.queue,w=b.length;if(this.isActive()&&w!==0)for(var T=this.keys,S=0;S<w;S++){var C=b[S],E=C.keyCode,M=T[E],_=!1;C.cancelled===void 0&&(C.cancelled=0,C.stopImmediatePropagation=function(){C.cancelled=1},C.stopPropagation=function(){C.cancelled=-1}),C.cancelled!==-1&&(E===this.prevCode&&C.timeStamp===this.prevTime&&C.type===this.prevType||(this.prevCode=E,this.prevTime=C.timeStamp,this.prevType=C.type,C.type==="keydown"?(M&&(_=M.isDown,M.onDown(C)),C.cancelled||M&&_||(g[E]&&this.emit(a.KEY_DOWN+g[E],C),C.cancelled||this.emit(a.ANY_KEY_DOWN,C))):(M&&M.onUp(C),C.cancelled||(g[E]&&this.emit(a.KEY_UP+g[E],C),C.cancelled||this.emit(a.ANY_KEY_UP,C))),C.cancelled===1&&(C.cancelled=0)))}},resetKeys:function(){for(var b=this.keys,w=0;w<b.length;w++)b[w]&&b[w].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(d.MANAGER_PROCESS,this.update,this),this.game.events.off(u.BLUR,this.resetKeys),this.scene.sys.events.off(y.PAUSE,this.resetKeys,this),this.scene.sys.events.off(y.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var b=this.keys,w=0;w<b.length;w++)b[w]&&b[w].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",x,"keyboard","keyboard","inputKeyboard"),s.exports=x},66970:s=>{s.exports=function(o,i){return i.timeLastMatched=o.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},87960:(s,o,i)=>{var r=i(83419),h=i(95922),a=i(95540),u=i(68769),l=i(92803),d=new r({initialize:function(c,p,f){if(f===void 0&&(f={}),p.length<2)return!1;this.manager=c,this.enabled=!0,this.keyCodes=[];for(var v=0;v<p.length;v++){var g=p[v];typeof g=="string"?this.keyCodes.push(g.toUpperCase().charCodeAt(0)):typeof g=="number"?this.keyCodes.push(g):g.hasOwnProperty("keyCode")&&this.keyCodes.push(g.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(f,"resetOnWrongKey",!0),this.maxKeyDelay=a(f,"maxKeyDelay",0),this.resetOnMatch=a(f,"resetOnMatch",!1),this.deleteOnMatch=a(f,"deleteOnMatch",!1);var y=this;this.onKeyDown=function(m){!y.matched&&y.enabled&&u(m,y)&&(y.manager.emit(h.COMBO_MATCH,y,m),y.resetOnMatch?l(y):y.deleteOnMatch&&y.destroy())},this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});s.exports=d},68769:(s,o,i)=>{var r=i(66970);s.exports=function(h,a){if(a.matched)return!0;var u=!1,l=!1;if(h.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var d=a.timeLastMatched+a.maxKeyDelay;h.timeStamp<=d&&(l=!0,u=r(h,a))}else l=!0,u=r(h,a);return!l&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),u&&(a.timeLastMatched=h.timeStamp,a.matched=!0,a.timeMatched=h.timeStamp),u}},92803:s=>{s.exports=function(o){return o.current=o.keyCodes[0],o.index=0,o.timeLastMatched=0,o.matched=!1,o.timeMatched=0,o}},92612:s=>{s.exports="keydown"},23345:s=>{s.exports="keyup"},21957:s=>{s.exports="keycombomatch"},44743:s=>{s.exports="down"},3771:s=>{s.exports="keydown-"},46358:s=>{s.exports="keyup-"},75674:s=>{s.exports="up"},95922:(s,o,i)=>{s.exports={ANY_KEY_DOWN:i(92612),ANY_KEY_UP:i(23345),COMBO_MATCH:i(21957),DOWN:i(44743),KEY_DOWN:i(3771),KEY_UP:i(46358),UP:i(75674)}},51442:(s,o,i)=>{s.exports={Events:i(95922),KeyboardManager:i(78970),KeyboardPlugin:i(28846),Key:i(30472),KeyCodes:i(46032),KeyCombo:i(87960),AdvanceKeyCombo:i(66970),ProcessKeyCombo:i(68769),ResetKeyCombo:i(92803),JustDown:i(90229),JustUp:i(38796),DownDuration:i(37015),UpDuration:i(41170)}},37015:s=>{s.exports=function(o,i){i===void 0&&(i=50);var r=o.plugin.game.loop.time-o.timeDown;return o.isDown&&r<i}},90229:s=>{s.exports=function(o){return!!o._justDown&&(o._justDown=!1,!0)}},38796:s=>{s.exports=function(o){return!!o._justUp&&(o._justUp=!1,!0)}},30472:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(95922),u=new r({Extends:h,initialize:function(l,d){h.call(this),this.plugin=l,this.keyCode=d,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(l){return this.emitOnRepeat=l,this},onDown:function(l){this.originalEvent=l,this.enabled&&(this.altKey=l.altKey,this.ctrlKey=l.ctrlKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.location=l.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,l):(this.isDown=!0,this.isUp=!1,this.timeDown=l.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,l)))},onUp:function(l){this.originalEvent=l,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=l.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,l))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});s.exports=u},46032:s=>{s.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},74600:(s,o,i)=>{var r=i(46032),h={};for(var a in r)h[r[a]]=a;s.exports=h},41170:s=>{s.exports=function(o,i){i===void 0&&(i=50);var r=o.plugin.game.loop.time-o.timeUp;return o.isUp&&r<i}},85098:(s,o,i)=>{var r=i(83419),h=i(89357),a=i(8214),u=i(29747),l=new r({initialize:function(d){this.manager=d,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=u,this.onMouseDown=u,this.onMouseUp=u,this.onMouseDownWindow=u,this.onMouseUpWindow=u,this.onMouseOver=u,this.onMouseOut=u,this.onMouseWheel=u,this.pointerLockChange=u,this.isTop=!0,d.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var d=this.manager.config;this.enabled=d.inputMouse,this.target=d.inputMouseEventTarget,this.passive=d.inputMousePassive,this.preventDefaultDown=d.inputMousePreventDefaultDown,this.preventDefaultUp=d.inputMousePreventDefaultUp,this.preventDefaultMove=d.inputMousePreventDefaultMove,this.preventDefaultWheel=d.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,d.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),this},requestPointerLock:function(){if(h.pointerLock){var d=this.target;d.requestPointerLock=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock,d.requestPointerLock()}},releasePointerLock:function(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var d=this.target;if(d){var c=this,p=this.manager,f=p.canvas,v=window&&window.focus&&p.game.config.autoFocus;this.onMouseMove=function(y){!y.defaultPrevented&&c.enabled&&p&&p.enabled&&(p.onMouseMove(y),c.preventDefaultMove&&y.preventDefault())},this.onMouseDown=function(y){v&&window.focus(),!y.defaultPrevented&&c.enabled&&p&&p.enabled&&(p.onMouseDown(y),c.preventDefaultDown&&y.target===f&&y.preventDefault())},this.onMouseDownWindow=function(y){y.sourceCapabilities&&y.sourceCapabilities.firesTouchEvents||!y.defaultPrevented&&c.enabled&&p&&p.enabled&&y.target!==f&&p.onMouseDown(y)},this.onMouseUp=function(y){!y.defaultPrevented&&c.enabled&&p&&p.enabled&&(p.onMouseUp(y),c.preventDefaultUp&&y.target===f&&y.preventDefault())},this.onMouseUpWindow=function(y){y.sourceCapabilities&&y.sourceCapabilities.firesTouchEvents||!y.defaultPrevented&&c.enabled&&p&&p.enabled&&y.target!==f&&p.onMouseUp(y)},this.onMouseOver=function(y){!y.defaultPrevented&&c.enabled&&p&&p.enabled&&p.setCanvasOver(y)},this.onMouseOut=function(y){!y.defaultPrevented&&c.enabled&&p&&p.enabled&&p.setCanvasOut(y)},this.onMouseWheel=function(y){!y.defaultPrevented&&c.enabled&&p&&p.enabled&&p.onMouseWheel(y),c.preventDefaultWheel&&y.target===f&&y.preventDefault()};var g={passive:!0};if(d.addEventListener("mousemove",this.onMouseMove),d.addEventListener("mousedown",this.onMouseDown),d.addEventListener("mouseup",this.onMouseUp),d.addEventListener("mouseover",this.onMouseOver,g),d.addEventListener("mouseout",this.onMouseOut,g),this.preventDefaultWheel?d.addEventListener("wheel",this.onMouseWheel,{passive:!1}):d.addEventListener("wheel",this.onMouseWheel,g),window&&p.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,g),window.top.addEventListener("mouseup",this.onMouseUpWindow,g)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,g),window.addEventListener("mouseup",this.onMouseUpWindow,g),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(y){var m=c.target;c.locked=document.pointerLockElement===m||document.mozPointerLockElement===m||document.webkitPointerLockElement===m,p.onPointerLockChange(y)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var d=this.target;d.removeEventListener("mousemove",this.onMouseMove),d.removeEventListener("mousedown",this.onMouseDown),d.removeEventListener("mouseup",this.onMouseUp),d.removeEventListener("mouseover",this.onMouseOver),d.removeEventListener("mouseout",this.onMouseOut),window&&((d=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),d.removeEventListener("mouseup",this.onMouseUpWindow)),h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=l},87078:(s,o,i)=>{s.exports={MouseManager:i(85098)}},36210:(s,o,i)=>{var r=i(83419),h=i(8214),a=i(29747),u=new r({initialize:function(l){this.manager=l,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.isTop=!0,l.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputTouch,this.target=l.inputTouchEventTarget,this.capture=l.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,l.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(l){return l.preventDefault(),!1}),this},startListeners:function(){var l=this.target;if(l){var d=this,c=this.manager,p=c.canvas,f=window&&window.focus&&c.game.config.autoFocus;this.onTouchMove=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&(c.onTouchMove(m),d.capture&&m.cancelable&&m.preventDefault())},this.onTouchStart=function(m){f&&window.focus(),!m.defaultPrevented&&d.enabled&&c&&c.enabled&&(c.onTouchStart(m),d.capture&&m.cancelable&&m.target===p&&m.preventDefault())},this.onTouchStartWindow=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&m.target!==p&&c.onTouchStart(m)},this.onTouchEnd=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&(c.onTouchEnd(m),d.capture&&m.cancelable&&m.target===p&&m.preventDefault())},this.onTouchEndWindow=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&m.target!==p&&c.onTouchEnd(m)},this.onTouchCancel=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&(c.onTouchCancel(m),d.capture&&m.preventDefault())},this.onTouchCancelWindow=function(m){!m.defaultPrevented&&d.enabled&&c&&c.enabled&&c.onTouchCancel(m)};var v=this.capture,g={passive:!0},y={passive:!1};if(l.addEventListener("touchstart",this.onTouchStart,v?y:g),l.addEventListener("touchmove",this.onTouchMove,v?y:g),l.addEventListener("touchend",this.onTouchEnd,v?y:g),l.addEventListener("touchcancel",this.onTouchCancel,v?y:g),window&&c.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,y),window.top.addEventListener("touchend",this.onTouchEndWindow,y),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,y)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,y),window.addEventListener("touchend",this.onTouchEndWindow,y),window.addEventListener("touchcancel",this.onTouchCancelWindow,y),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var l=this.target;l.removeEventListener("touchstart",this.onTouchStart),l.removeEventListener("touchmove",this.onTouchMove),l.removeEventListener("touchend",this.onTouchEnd),l.removeEventListener("touchcancel",this.onTouchCancel),window&&((l=this.isTop?window.top:window).removeEventListener("touchstart",this.onTouchStartWindow),l.removeEventListener("touchend",this.onTouchEndWindow),l.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});s.exports=u},95618:(s,o,i)=>{s.exports={TouchManager:i(36210)}},41299:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(54899),u=i(95540),l=i(98356),d=i(3374),c=i(84376),p=i(92638),f=new r({initialize:function(v,g){if(this.loader=v,this.cache=u(g,"cache",!1),this.type=u(g,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=u(g,"key",!1);var y=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+y),!this.key)throw new Error("Invalid File key: "+this.key);var m=u(g,"url");m===void 0?m=v.path+y+"."+u(g,"extension",""):typeof m!="string"||m.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)||(m=v.path+m),this.url=m,this.src="",this.xhrSettings=p(u(g,"responseType",void 0)),u(g,"xhrSettings",!1)&&(this.xhrSettings=d(this.xhrSettings,u(g,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=u(g,"config",{}),this.multiFile,this.linkFile,this.base64=typeof m=="string"&&m.indexOf("data:")===0},setLink:function(v){this.linkFile=v,v.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=l(this,this.loader.baseURL),this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=c(this,this.loader.xhr))},onLoad:function(v,g){var y=v.responseURL&&this.loader.localSchemes.some(function(x){return v.responseURL.indexOf(x)===0})&&g.target.status===0,m=!(g.target&&g.target.status!==200)||y;v.readyState===4&&v.status>=400&&v.status<=599&&(m=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,m)},onBase64Load:function(v){this.xhrLoader=v,this.state=h.FILE_LOADED,this.percentComplete=1,this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(v){v.lengthComputable&&(this.bytesLoaded=v.loaded,this.bytesTotal=v.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(v){if(this.state!==h.FILE_PENDING_DESTROY){v===void 0&&(v=this.data);var g=this.key,y=this.type;this.loader.emit(a.FILE_COMPLETE,g,y,v),this.loader.emit(a.FILE_KEY_COMPLETE+y+"-"+g,g,y,v),this.loader.flagForRemoval(this),this.state=h.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});f.createObjectURL=function(v,g,y){if(typeof URL=="function")v.src=URL.createObjectURL(g);else{var m=new FileReader;m.onload=function(){v.removeAttribute("crossOrigin"),v.src="data:"+(g.type||y)+";base64,"+m.result.split(",")[1]},m.onerror=v.onerror,m.readAsDataURL(g)}},f.revokeObjectURL=function(v){typeof URL=="function"&&URL.revokeObjectURL(v.src)},s.exports=f},74099:s=>{var o={},i={install:function(r){for(var h in o)r[h]=o[h]},register:function(r,h){o[r]=h},destroy:function(){o={}}};s.exports=i},98356:s=>{s.exports=function(o,i){return!!o.url&&(o.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?o.url:i+o.url)}},74261:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(35072),u=i(50792),l=i(54899),d=i(74099),c=i(95540),p=i(35154),f=i(37277),v=i(44594),g=i(92638),y=new r({Extends:u,initialize:function(m){u.call(this);var x=m.sys.game.config,b=m.sys.settings.loader;this.scene=m,this.systems=m.sys,this.cacheManager=m.sys.cache,this.textureManager=m.sys.textures,this.sceneManager=m.sys.game.scene,d.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(b,"baseURL",x.loaderBaseURL)),this.setPath(c(b,"path",x.loaderPath)),this.setPrefix(c(b,"prefix",x.loaderPrefix)),this.maxParallelDownloads=c(b,"maxParallelDownloads",x.loaderMaxParallelDownloads),this.xhr=g(c(b,"responseType",x.loaderResponseType),c(b,"async",x.loaderAsync),c(b,"user",x.loaderUser),c(b,"password",x.loaderPassword),c(b,"timeout",x.loaderTimeout),c(b,"withCredentials",x.loaderWithCredentials)),this.crossOrigin=c(b,"crossOrigin",x.loaderCrossOrigin),this.imageLoadType=c(b,"imageLoadType",x.loaderImageLoadType),this.localSchemes=c(b,"localScheme",x.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=h.LOADER_IDLE,this.multiKeyIndex=0,m.sys.events.once(v.BOOT,this.boot,this),m.sys.events.on(v.START,this.pluginStart,this)},boot:function(){this.systems.events.once(v.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(v.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.baseURL=m,this},setPath:function(m){return m===void 0&&(m=""),m!==""&&m.substr(-1)!=="/"&&(m=m.concat("/")),this.path=m,this},setPrefix:function(m){return m===void 0&&(m=""),this.prefix=m,this},setCORS:function(m){return this.crossOrigin=m,this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var x=0;x<m.length;x++){var b=m[x];this.keyExists(b)||(this.list.set(b),this.emit(l.ADD,b.key,b.type,this,b),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var x=m.hasCacheConflict();return x||this.list.iterate(function(b){if(b.type===m.type&&b.key===m.key)return x=!0,!1}),!x&&this.isLoading()&&(this.inflight.iterate(function(b){if(b.type===m.type&&b.key===m.key)return x=!0,!1}),this.queue.iterate(function(b){if(b.type===m.type&&b.key===m.key)return x=!0,!1})),x},addPack:function(m,x){if(typeof x=="string"){var b=p(m,x);b&&(m={packKey:b})}var w=0,T=this.baseURL,S=this.path,C=this.prefix;for(var E in m)if(Object.prototype.hasOwnProperty.call(m,E)){var M=m[E],_=c(M,"baseURL",T),O=c(M,"path",S),k=c(M,"prefix",C),P=c(M,"files",null),A=c(M,"defaultType","void");if(Array.isArray(P)){this.setBaseURL(_),this.setPath(O),this.setPrefix(k);for(var L=0;L<P.length;L++){var D=P[L],F=D.hasOwnProperty("type")?D.type:A;this[F]&&(this[F](D),w++)}}}return this.setBaseURL(T),this.setPath(S),this.setPrefix(C),w>0},isLoading:function(){return this.state===h.LOADER_LOADING||this.state===h.LOADER_PROCESSING},isReady:function(){return this.state===h.LOADER_IDLE||this.state===h.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(l.START,this),this.list.size===0?this.loadComplete():(this.state=h.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(v.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(l.PROGRESS,this.progress)},update:function(){this.state===h.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if((m.state===h.FILE_POPULATED||m.state===h.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=this.crossOrigin),m.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,x){this.inflight&&(this.inflight.delete(m),this.updateProgress(),x?(this.totalComplete++,this.queue.set(m),this.emit(l.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(l.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(m.state===h.FILE_ERRORED?m.multiFile&&m.multiFile.onFileFailed(m):m.state===h.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&(m.multiFile.addToCache(),m.multiFile.pendingDestroy()):(m.addToCache(),m.pendingDestroy())),this.queue.delete(m),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(l.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=h.LOADER_COMPLETE,this.systems.events.off(v.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(l.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,x){return this.save(JSON.stringify(m),x)},save:function(m,x,b){x===void 0&&(x="file.json"),b===void 0&&(b="application/json");var w=new Blob([m],{type:b}),T=URL.createObjectURL(w),S=document.createElement("a");return S.download=x,S.textContent="Download "+x,S.href=T,S.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var m=this.systems.game.config,x=this.systems.settings.loader;this.setBaseURL(c(x,"baseURL",m.loaderBaseURL)),this.setPath(c(x,"path",m.loaderPath)),this.setPrefix(c(x,"prefix",m.loaderPrefix)),this.state=h.LOADER_IDLE},shutdown:function(){this.reset(),this.state=h.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=h.LOADER_DESTROYED,this.systems.events.off(v.UPDATE,this.update,this),this.systems.events.off(v.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});f.register("Loader",y,"load"),s.exports=y},3374:(s,o,i)=>{var r=i(79291),h=i(92638);s.exports=function(a,u){var l=a===void 0?h():r({},a);if(u)for(var d in u)u[d]!==void 0&&(l[d]=u[d]);return l}},26430:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(54899),u=new r({initialize:function(l,d,c,p){var f=[];p.forEach(function(y){y&&f.push(y)}),this.loader=l,this.type=d,this.key=c;var v=this.key;l.prefix&&l.prefix!==""&&(this.key=l.prefix+v),this.multiKeyIndex=l.multiKeyIndex++,this.files=f,this.state=h.FILE_PENDING,this.complete=!1,this.pending=f.length,this.failed=0,this.config={},this.baseURL=l.baseURL,this.path=l.path,this.prefix=l.prefix;for(var g=0;g<f.length;g++)f[g].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(l){return this.files.push(l),l.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(l){this.files.indexOf(l)!==-1&&this.pending--},onFileFailed:function(l){this.files.indexOf(l)!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,l.type,l.key))},pendingDestroy:function(){if(this.state!==h.FILE_PENDING_DESTROY){var l=this.key,d=this.type;this.loader.emit(a.FILE_COMPLETE,l,d),this.loader.emit(a.FILE_KEY_COMPLETE+d+"-"+l,l,d),this.loader.flagForRemoval(this);for(var c=0;c<this.files.length;c++)this.files[c].pendingDestroy();this.state=h.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});s.exports=u},84376:(s,o,i)=>{var r=i(3374);s.exports=function(h,a){var u=r(a,h.xhrSettings);if(!h.base64){var l=new XMLHttpRequest;if(l.open("GET",h.src,u.async,u.user,u.password),l.responseType=h.xhrSettings.responseType,l.timeout=u.timeout,u.headers)for(var d in u.headers)l.setRequestHeader(d,u.headers[d]);return u.header&&u.headerValue&&l.setRequestHeader(u.header,u.headerValue),u.requestedWith&&l.setRequestHeader("X-Requested-With",u.requestedWith),u.overrideMimeType&&l.overrideMimeType(u.overrideMimeType),u.withCredentials&&(l.withCredentials=!0),l.onload=h.onLoad.bind(h,l),l.onerror=h.onError.bind(h,l),l.onprogress=h.onProgress.bind(h),l.ontimeout=h.onError.bind(h,l),l.send(),l}var c=h.url.split(";base64,").pop()||h.url.split(",").pop(),p={responseText:atob(c)};h.onBase64Load(p)}},92638:s=>{s.exports=function(o,i,r,h,a,u){return o===void 0&&(o=""),i===void 0&&(i=!0),r===void 0&&(r=""),h===void 0&&(h=""),a===void 0&&(a=0),u===void 0&&(u=!1),{responseType:o,async:i,user:r,password:h,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:u}}},23906:s=>{s.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20}},42155:s=>{s.exports="addfile"},38991:s=>{s.exports="complete"},27540:s=>{s.exports="filecomplete"},87464:s=>{s.exports="filecomplete-"},94486:s=>{s.exports="loaderror"},13035:s=>{s.exports="load"},38144:s=>{s.exports="fileprogress"},97520:s=>{s.exports="postprocess"},85595:s=>{s.exports="progress"},55680:s=>{s.exports="start"},54899:(s,o,i)=>{s.exports={ADD:i(42155),COMPLETE:i(38991),FILE_COMPLETE:i(27540),FILE_KEY_COMPLETE:i(87464),FILE_LOAD_ERROR:i(94486),FILE_LOAD:i(13035),FILE_PROGRESS:i(38144),POST_PROCESS:i(97520),PROGRESS:i(85595),START:i(55680)}},14135:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(518),u=i(54899),l=new r({Extends:a,initialize:function(d,c,p,f,v){a.call(this,d,c,p,f,v),this.type="animationJSON"},onProcess:function(){this.loader.once(u.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",function(d,c,p,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new l(this,d[v]));else this.addFile(new l(this,d,c,f,p));return this}),s.exports=l},76272:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(518),c=i(26430),p=new r({Extends:c,initialize:function(f,v,g,y,m,x){var b,w;if(l(v)){var T=v;v=a(T,"key"),b=new u(f,{key:v,url:a(T,"textureURL"),extension:a(T,"textureExtension","png"),normalMap:a(T,"normalMap"),xhrSettings:a(T,"textureXhrSettings")}),w=new d(f,{key:v,url:a(T,"atlasURL"),extension:a(T,"atlasExtension","json"),xhrSettings:a(T,"atlasXhrSettings")})}else b=new u(f,v,g,m),w=new d(f,v,y,x);b.linkFile?c.call(this,f,"atlasjson",v,[b,w,b.linkFile]):c.call(this,f,"atlasjson",v,[b,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,g),v.addToCache(),this.complete=!0}}});h.register("aseprite",function(f,v,g,y,m){var x;if(Array.isArray(f))for(var b=0;b<f.length;b++)x=new p(this,f[b]),this.addFile(x.files);else x=new p(this,f,v,g,y,m),this.addFile(x.files);return this}),s.exports=p},38734:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(518),c=i(26430),p=new r({Extends:c,initialize:function(f,v,g,y,m,x){var b,w;if(l(v)){var T=v;v=a(T,"key"),b=new u(f,{key:v,url:a(T,"textureURL"),extension:a(T,"textureExtension","png"),normalMap:a(T,"normalMap"),xhrSettings:a(T,"textureXhrSettings")}),w=new d(f,{key:v,url:a(T,"atlasURL"),extension:a(T,"atlasExtension","json"),xhrSettings:a(T,"atlasXhrSettings")})}else b=new u(f,v,g,m),w=new d(f,v,y,x);b.linkFile?c.call(this,f,"atlasjson",v,[b,w,b.linkFile]):c.call(this,f,"atlasjson",v,[b,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(f.key,f.data,v.data,g),this.complete=!0}}});h.register("atlas",function(f,v,g,y,m){var x;if(Array.isArray(f))for(var b=0;b<f.length;b++)x=new p(this,f[b]),this.addFile(x.files);else x=new p(this,f,v,g,y,m),this.addFile(x.files);return this}),s.exports=p},74599:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(26430),c=i(57318),p=new r({Extends:d,initialize:function(f,v,g,y,m,x){var b,w;if(l(v)){var T=v;v=a(T,"key"),b=new u(f,{key:v,url:a(T,"textureURL"),extension:a(T,"textureExtension","png"),normalMap:a(T,"normalMap"),xhrSettings:a(T,"textureXhrSettings")}),w=new c(f,{key:v,url:a(T,"atlasURL"),extension:a(T,"atlasExtension","xml"),xhrSettings:a(T,"atlasXhrSettings")})}else b=new u(f,v,g,m),w=new c(f,v,y,x);b.linkFile?d.call(this,f,"atlasxml",v,[b,w,b.linkFile]):d.call(this,f,"atlasxml",v,[b,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(f.key,f.data,v.data,g),this.complete=!0}}});h.register("atlasXML",function(f,v,g,y,m){var x;if(Array.isArray(f))for(var b=0;b<f.length;b++)x=new p(this,f[b]),this.addFile(x.files);else x=new p(this,f,v,g,y,m),this.addFile(x.files);return this}),s.exports=p},21097:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(89749),c=i(41212),p=new r({Extends:a,initialize:function(f,v,g,y,m){if(c(v)){var x=v;v=l(x,"key"),y=l(x,"xhrSettings"),m=l(x,"context",m)}var b={type:"audio",cache:f.cacheManager.audio,extension:g.type,responseType:"arraybuffer",key:v,url:g.url,xhrSettings:y,config:{context:m}};a.call(this,f,b)},onProcess:function(){this.state=h.FILE_PROCESSING;var f=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(v){f.data=v,f.onProcessComplete()},function(v){console.error("Error decoding audio: "+f.key+" - ",v?v.message:null),f.onProcessError()}),this.config.context=null}});p.create=function(f,v,g,y,m){var x=f.systems.game,b=x.config.audio,w=x.device.audio;c(v)&&(g=l(v,"url",[]),y=l(v,"config",{}));var T=p.getAudioURL(x,g);return T?w.webAudio&&!b.disableWebAudio?new p(f,v,T,m,x.sound.context):new d(f,v,T,y):(console.warn('No audio URLs for "%s" matched this device',v),null)},p.getAudioURL=function(f,v){Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var y=l(v[g],"url",v[g]);if(y.indexOf("blob:")===0||y.indexOf("data:")===0)return{url:y,type:""};var m=y.match(/\.([a-zA-Z0-9]+)($|\?)/);if(m=l(v[g],"type",m?m[1]:"").toLowerCase(),f.device.audio[m])return{url:y,type:m}}return null},u.register("audio",function(f,v,g,y){var m,x=this.systems.game,b=x.config.audio,w=x.device.audio;if(b.noAudio||!w.webAudio&&!w.audioData)return this;if(Array.isArray(f))for(var T=0;T<f.length;T++)(m=p.create(this,f[T]))&&this.addFile(m);else(m=p.create(this,f,v,g,y))&&this.addFile(m);return this}),s.exports=p},89524:(s,o,i)=>{var r=i(21097),h=i(83419),a=i(74099),u=i(95540),l=i(41212),d=i(518),c=i(26430),p=new h({Extends:c,initialize:function(f,v,g,y,m,x,b){if(l(v)){var w=v;v=u(w,"key"),g=u(w,"jsonURL"),y=u(w,"audioURL"),m=u(w,"audioConfig"),x=u(w,"audioXhrSettings"),b=u(w,"jsonXhrSettings")}var T;if(y){var S=r.create(f,v,y,m,x);S&&(T=new d(f,v,g,b),c.call(this,f,"audiosprite",v,[S,T]),this.config.resourceLoad=!1)}else T=new d(f,v,g,b),c.call(this,f,"audiosprite",v,[T]),this.config.resourceLoad=!0,this.config.audioConfig=m,this.config.audioXhrSettings=x},onFileComplete:function(f){if(this.files.indexOf(f)!==-1&&(this.pending--,this.config.resourceLoad&&f.type==="json"&&f.data.hasOwnProperty("resources"))){var v=f.data.resources,g=u(this.config,"audioConfig"),y=u(this.config,"audioXhrSettings"),m=r.create(this.loader,f.key,v,g,y);m&&(this.addToMultiFile(m),this.loader.addFile(m))}},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1];f.addToCache(),v.addToCache(),this.complete=!0}}});a.register("audioSprite",function(f,v,g,y,m,x){var b,w=this.systems.game,T=w.config.audio,S=w.device.audio;if(T&&T.noAudio||!S.webAudio&&!S.audioData)return this;if(Array.isArray(f))for(var C=0;C<f.length;C++)(b=new p(this,f[C])).files&&this.addFile(b.files);else(b=new p(this,f,v,g,y,m,x)).files&&this.addFile(b.files);return this})},85722:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y){var m="bin";if(d(f)){var x=f;f=l(x,"key"),v=l(x,"url"),g=l(x,"xhrSettings"),m=l(x,"extension",m),y=l(x,"dataType",y)}var b={type:"binary",cache:p.cacheManager.binary,extension:m,responseType:"arraybuffer",key:f,url:v,xhrSettings:g,config:{dataType:y}};a.call(this,p,b)},onProcess:function(){this.state=h.FILE_PROCESSING;var p=this.config.dataType;this.data=p?new p(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});u.register("binary",function(p,f,v,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new c(this,p[y]));else this.addFile(new c(this,p,f,g,v));return this}),s.exports=c},97025:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(26430),c=i(21859),p=i(57318),f=new r({Extends:d,initialize:function(v,g,y,m,x,b){var w,T;if(l(g)){var S=g;g=a(S,"key"),w=new u(v,{key:g,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),T=new p(v,{key:g,url:a(S,"fontDataURL"),extension:a(S,"fontDataExtension","xml"),xhrSettings:a(S,"fontDataXhrSettings")})}else w=new u(v,g,y,x),T=new p(v,g,m,b);w.linkFile?d.call(this,v,"bitmapfont",g,[w,T,w.linkFile]):d.call(this,v,"bitmapfont",g,[w,T])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],g=this.files[1];v.addToCache();var y=v.cache.get(v.key),m=c(g.data,v.cache.getFrame(v.key),0,0,y);this.loader.cacheManager.bitmapFont.add(v.key,{data:m,texture:v.key,frame:null}),this.complete=!0}}});h.register("bitmapFont",function(v,g,y,m,x){var b;if(Array.isArray(v))for(var w=0;w<v.length;w++)b=new f(this,v[w]),this.addFile(b.files);else b=new f(this,v,g,y,m,x),this.addFile(b.files);return this}),s.exports=f},16024:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g){var y="css";if(d(f)){var m=f;f=l(m,"key"),v=l(m,"url"),g=l(m,"xhrSettings"),y=l(m,"extension",y)}var x={type:"script",cache:!1,extension:y,responseType:"text",key:f,url:v,xhrSettings:g};a.call(this,p,x)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("css",function(p,f,v){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new c(this,p[g]));else this.addFile(new c(this,p,f,v));return this}),s.exports=c},69559:(s,o,i)=>{var r=i(38734),h=i(85722),a=i(83419),u=i(74099),l=i(95540),d=i(19550),c=i(41212),p=i(518),f=i(31403),v=i(46975),g=i(59327),y=i(26430),m=i(82038),x=i(55222),b=new a({Extends:y,initialize:function(w,T,S,C){if(S.multiAtlasURL){var E=new p(w,{key:T,url:S.multiAtlasURL,xhrSettings:C,config:S});y.call(this,w,"texture",T,[E])}else{var M=S.textureURL.substr(S.textureURL.length-3);S.type||(S.type=M.toLowerCase()==="ktx"?"KTX":"PVR");var _=new h(w,{key:T,url:S.textureURL,extension:M,xhrSettings:C,config:S});if(S.atlasURL){var O=new p(w,{key:T,url:S.atlasURL,xhrSettings:C,config:S});y.call(this,w,"texture",T,[_,O])}else y.call(this,w,"texture",T,[_])}this.config=S},onFileComplete:function(w){if(this.files.indexOf(w)!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(w.type==="json"&&w.data.hasOwnProperty("textures")){var T=w.data.textures,S=this.config,C=this.loader,E=C.baseURL,M=C.path,_=C.prefix,O=l(S,"multiBaseURL",this.baseURL),k=l(S,"multiPath",this.path),P=l(S,"prefix",this.prefix),A=l(S,"textureXhrSettings");O&&C.setBaseURL(O),k&&C.setPath(k),P&&C.setPrefix(P);for(var L=0;L<T.length;L++){var D=T[L].image,F="CMA"+this.multiKeyIndex+"_"+D,X=new h(C,F,D,A);if(this.addToMultiFile(X),C.addFile(X),T[L].normalMap){var z=new h(C,F,T[L].normalMap,A);z.type="normalMap",X.setLink(z),this.addToMultiFile(z),C.addFile(z)}}C.setBaseURL(E),C.setPath(M),C.setPrefix(_)}}},addToCache:function(){function w(k){console.warn('Compressed Texture Invalid: "'+M.key+'". '+k)}if(this.isReadyToProcess()){var T=this.config;if(T.multiAtlasURL)this.addMultiToCache();else{var S,C=this.loader.systems.renderer,E=this.loader.textureManager,M=this.files[0],_=this.files[1];if(T.type==="PVR"?S=m(M.data):T.type==="KTX"&&((S=f(M.data))||w("KTX file contains unsupported format.")),S&&!x(S)&&(w("Texture dimensions failed verification. Check the texture format specifications for "+T.format+" 0x"+S.internalFormat.toString(16)+"."),S=null),S&&!C.supportsCompressedTexture(T.format,S.internalFormat)&&(w("Texture format "+T.format+" with internal format "+S.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),S=null),S){S.format=C.getCompressedTextureName(T.format,S.internalFormat);var O=_&&_.data?_.data:null;E.addCompressedTexture(M.key,S,O)}}this.complete=!0}},addMultiToCache:function(){for(var w,T=this.config,S=this.files[0],C=[],E=[],M=[],_=this.loader.systems.renderer,O=this.loader.textureManager,k=1;k<this.files.length;k++){var P=this.files[k];if(P.type!=="normalMap")for(var A=P.key.indexOf("_"),L=P.key.substr(A+1),D=P.data,F=0;F<S.data.textures.length;F++){var X=S.data.textures[F];if(X.image===L){T.type==="PVR"?w=m(D):T.type==="KTX"&&(w=f(D)),w&&_.supportsCompressedTexture(T.format,w.internalFormat)&&(w.format=_.getCompressedTextureName(T.format,w.internalFormat),E.push(w),C.push(X),P.linkFile&&M.push(P.linkFile.data));break}}}M.length===0&&(M=void 0),O.addAtlasJSONArray(this.key,E,C,M),this.complete=!0}});u.register("texture",function(w,T,S){var C=this.systems.renderer,E=function(_,O,k,P){var A={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(c(O)){var L=O;O=l(L,"key"),k=l(L,"url"),P=l(L,"xhrSettings")}var D=!1;for(var F in k)if(C.supportsCompressedTexture(F)){var X=k[F];typeof X=="string"?A.textureURL=X:A=v(X,A),A.format=F.toUpperCase(),D=!0;break}if(D)if(A.format==="IMG"){var z;z=A.multiAtlasURL?new g(_,O,A.multiAtlasURL,A.multiPath,A.multiBaseURL,P).files:A.atlasURL?new r(_,O,A.textureURL,A.atlasURL,P).files:new d(_,O,A.textureURL,P),_.addFile(z)}else{var Y=new b(_,O,A,P);_.addFile(Y.files)}else console.warn("No supported compressed texture format or IMG fallback",O)};if(Array.isArray(w))for(var M=0;M<w.length;M++)E(this,w[M]);else E(this,w,T,S);return this}),s.exports=b},47931:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=i(73894),p=new r({Extends:a,initialize:function(f,v,g,y,m){var x="glsl";if(d(v)){var b=v;v=l(b,"key"),g=l(b,"url"),y=l(b,"shaderType","fragment"),m=l(b,"xhrSettings"),x=l(b,"extension",x)}else y===void 0&&(y="fragment");var w={type:"glsl",cache:f.cacheManager.shader,extension:x,responseType:"text",key:v,url:g,config:{shaderType:y},xhrSettings:m};a.call(this,f,w)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f=this.data.split(`
`),v=this.extractBlock(f,0);if(v)for(;v;){var g=this.getShaderName(v.header),y=this.getShaderType(v.header),m=this.getShaderUniforms(v.header),x=v.shader;if(this.cache.has(g)){var b=this.cache.get(g);y==="fragment"?b.fragmentSrc=x:b.vertexSrc=x,b.uniforms||(b.uniforms=m)}else y==="fragment"?this.cache.add(g,new c(g,x,"",m)):this.cache.add(g,new c(g,"",x,m));v=this.extractBlock(f,v.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data))},getShaderName:function(f){for(var v=0;v<f.length;v++){var g=f[v].trim();if(g.substring(0,5)==="name:")return g.substring(5).trim()}return this.key},getShaderType:function(f){for(var v=0;v<f.length;v++){var g=f[v].trim();if(g.substring(0,5)==="type:")return g.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(f){for(var v={},g=0;g<f.length;g++){var y=f[g].trim();if(y.substring(0,8)==="uniform."){var m=y.indexOf(":");if(m){var x=y.substring(8,m);try{v[x]=JSON.parse(y.substring(m+1))}catch{console.warn("Invalid uniform JSON: "+x)}}}}return v},extractBlock:function(f,v){for(var g=-1,y=-1,m=-1,x=!1,b=!1,w=[],T=[],S=v;S<f.length;S++){var C=f[S].trim();if(C==="---")if(g===-1)g=S,x=!0;else{if(!x){b=!1;break}y=S,x=!1,b=!0}else x?w.push(C):b&&(T.push(C),m=S)}return x||y===-1?null:{header:w,shader:T.join(`
`),offset:m}}});u.register("glsl",function(f,v,g,y){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new p(this,f[m]));else this.addFile(new p(this,f,v,g,y));return this}),s.exports=p},89749:(s,o,i)=>{var r=i(83419),h=i(54899),a=i(41299),u=i(95540),l=i(98356),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g){if(d(f)){var y=f;f=u(y,"key"),g=u(y,"config",g)}var m={type:"audio",cache:p.cacheManager.audio,extension:v.type,key:f,url:v.url,config:g};a.call(this,p,m),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var p=0;p<this.data.length;p++){var f=this.data[p];f.oncanplaythrough=null,f.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(p){var f=p.target;f.oncanplaythrough=null,f.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var p=this.config&&this.config.instances||1;this.filesTotal=p,this.filesLoaded=0,this.percentComplete=0;for(var f=0;f<p;f++){var v=new Audio;v.dataset||(v.dataset={}),v.dataset.name=this.key+("0"+f).slice(-2),v.dataset.used="false",this.locked?v.dataset.locked="true":(v.dataset.locked="false",v.preload="auto",v.oncanplaythrough=this.onProgress.bind(this),v.onerror=this.onError.bind(this)),this.data.push(v)}for(f=0;f<this.data.length;f++)(v=this.data[f]).src=l(this,this.loader.baseURL),this.locked||v.load();this.locked&&setTimeout(this.onLoad.bind(this))}});s.exports=c},88470:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g){var y="html";if(d(f)){var m=f;f=l(m,"key"),v=l(m,"url"),g=l(m,"xhrSettings"),y=l(m,"extension",y)}var x={type:"text",cache:p.cacheManager.html,extension:y,responseType:"text",key:f,url:v,xhrSettings:g};a.call(this,p,x)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("html",function(p,f,v){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new c(this,p[g]));else this.addFile(new c(this,p,f,v));return this}),s.exports=c},14643:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y,m){g===void 0&&(g=512),y===void 0&&(y=512);var x="html";if(d(f)){var b=f;f=l(b,"key"),v=l(b,"url"),m=l(b,"xhrSettings"),x=l(b,"extension",x),g=l(b,"width",g),y=l(b,"height",y)}var w={type:"html",cache:p.textureManager,extension:x,responseType:"text",key:f,url:v,xhrSettings:m,config:{width:g,height:y}};a.call(this,p,w)},onProcess:function(){this.state=h.FILE_PROCESSING;var p=this.config.width,f=this.config.height,v=[];v.push('<svg width="'+p+'px" height="'+f+'px" viewBox="0 0 '+p+" "+f+'" xmlns="http://www.w3.org/2000/svg">'),v.push('<foreignObject width="100%" height="100%">'),v.push('<body xmlns="http://www.w3.org/1999/xhtml">'),v.push(this.xhrLoader.responseText),v.push("</body>"),v.push("</foreignObject>"),v.push("</svg>");var g=[v.join(`
`)],y=this;try{var m=new window.Blob(g,{type:"image/svg+xml;charset=utf-8"})}catch{return y.state=h.FILE_ERRORED,void y.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(y.data),y.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(y.data),y.onProcessError()},a.createObjectURL(this.data,m,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("htmlTexture",function(p,f,v,g,y){if(Array.isArray(p))for(var m=0;m<p.length;m++)this.addFile(new c(this,p[m]));else this.addFile(new c(this,p,f,v,g,y));return this}),s.exports=c},19550:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=i(98356),p=new r({Extends:a,initialize:function f(v,g,y,m,x){var b,w="png";if(d(g)){var T=g;g=l(T,"key"),y=l(T,"url"),b=l(T,"normalMap"),m=l(T,"xhrSettings"),w=l(T,"extension",w),x=l(T,"frameConfig")}Array.isArray(y)&&(b=y[1],y=y[0]);var S={type:"image",cache:v.textureManager,extension:w,responseType:"blob",key:g,url:y,xhrSettings:m,config:x};if(a.call(this,v,S),b){var C=new f(v,this.key,b,m,x);C.type="normalMap",this.setLink(C),v.addFile(C)}this.useImageElementLoad=v.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this;this.data.onload=function(){a.revokeObjectURL(f.data),f.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(f.data),f.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var f=this.state;this.state=h.FILE_PROCESSING,f===h.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=h.FILE_LOADING,this.src=c(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var f=this;this.data.onload=function(){f.state=h.FILE_LOADED,f.loader.nextFile(f,!0)},this.data.onerror=function(){f.loader.nextFile(f,!1)},this.data.src=this.src},addToCache:function(){var f=this.linkFile;f?f.state>=h.FILE_COMPLETE&&(f.type==="spritesheet"?f.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,f.data,this.data):this.cache.addImage(this.key,this.data,f.data)):this.cache.addImage(this.key,this.data)}});u.register("image",function(f,v,g){if(Array.isArray(f))for(var y=0;y<f.length;y++)this.addFile(new p(this,f[y]));else this.addFile(new p(this,f,v,g));return this}),s.exports=p},518:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(35154),c=i(41212),p=new r({Extends:a,initialize:function(f,v,g,y,m){var x="json";if(c(v)){var b=v;v=l(b,"key"),g=l(b,"url"),y=l(b,"xhrSettings"),x=l(b,"extension",x),m=l(b,"dataKey",m)}var w={type:"json",cache:f.cacheManager.json,extension:x,responseType:"text",key:v,url:g,xhrSettings:y,config:m};a.call(this,f,w),c(g)&&(this.data=m?d(g,m):g,this.state=h.FILE_POPULATED)},onProcess:function(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var f=JSON.parse(this.xhrLoader.responseText)}catch(g){throw this.onProcessError(),g}var v=this.config;this.data=typeof v=="string"?d(f,v,f):f}this.onProcessComplete()}});u.register("json",function(f,v,g,y){if(Array.isArray(f))for(var m=0;m<f.length;m++)this.addFile(new p(this,f[m]));else this.addFile(new p(this,f,v,y,g));return this}),s.exports=p},59327:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(518),c=i(26430),p=new r({Extends:c,initialize:function(f,v,g,y,m,x,b){if(l(v)){var w=v;v=a(w,"key"),g=a(w,"url",!1)?a(w,"url"):a(w,"atlasURL"),x=a(w,"xhrSettings"),y=a(w,"path"),m=a(w,"baseURL"),b=a(w,"textureXhrSettings")}var T=new d(f,v,g,x);c.call(this,f,"multiatlas",v,[T]),this.config.path=y,this.config.baseURL=m,this.config.textureXhrSettings=b},onFileComplete:function(f){if(this.files.indexOf(f)!==-1&&(this.pending--,f.type==="json"&&f.data.hasOwnProperty("textures"))){var v=f.data.textures,g=this.config,y=this.loader,m=y.baseURL,x=y.path,b=y.prefix,w=a(g,"baseURL",this.baseURL),T=a(g,"path",this.path),S=a(g,"prefix",this.prefix),C=a(g,"textureXhrSettings");y.setBaseURL(w),y.setPath(T),y.setPrefix(S);for(var E=0;E<v.length;E++){var M=v[E].image,_="MA"+this.multiKeyIndex+"_"+M,O=new u(y,_,M,C);if(this.addToMultiFile(O),y.addFile(O),v[E].normalMap){var k=new u(y,_,v[E].normalMap,C);k.type="normalMap",O.setLink(k),this.addToMultiFile(k),y.addFile(k)}}y.setBaseURL(m),y.setPath(x),y.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){for(var f=this.files[0],v=[],g=[],y=[],m=1;m<this.files.length;m++){var x=this.files[m];if(x.type!=="normalMap")for(var b=x.key.indexOf("_"),w=x.key.substr(b+1),T=x.data,S=0;S<f.data.textures.length;S++){var C=f.data.textures[S];if(C.image===w){g.push(T),v.push(C),x.linkFile&&y.push(x.linkFile.data);break}}}y.length===0&&(y=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,g,v,y),this.complete=!0}}});h.register("multiatlas",function(f,v,g,y,m){var x;if(Array.isArray(f))for(var b=0;b<f.length;b++)x=new p(this,f[b]),this.addFile(x.files);else x=new p(this,f,v,g,y,m),this.addFile(x.files);return this}),s.exports=p},99297:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(41212),l=i(26430),d=i(34328),c=new r({Extends:l,initialize:function(p,f,v,g){var y="js",m=[];if(u(f)){var x=f;f=a(x,"key"),v=a(x,"url"),g=a(x,"xhrSettings"),y=a(x,"extension",y)}Array.isArray(v)||(v=[v]);for(var b=0;b<v.length;b++){var w=new d(p,{key:f+"_"+b.toString(),url:v[b],extension:y,xhrSettings:g});w.onProcess=function(){this.onProcessComplete()},m.push(w)}l.call(this,p,"scripts",f,m)},addToCache:function(){if(this.isReadyToProcess()){for(var p=0;p<this.files.length;p++){var f=this.files[p];f.data=document.createElement("script"),f.data.language="javascript",f.data.type="text/javascript",f.data.defer=!1,f.data.text=f.xhrLoader.responseText,document.head.appendChild(f.data)}this.complete=!0}}});h.register("scripts",function(p,f,v){var g;if(Array.isArray(p))for(var y=0;y<p.length;y++)g=new c(this,p[y]),this.addFile(g.files);else g=new c(this,p,f,v),this.addFile(g.files);return this}),s.exports=c},41846:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(41212),l=i(26430),d=i(85048),c=i(61485),p=i(78776),f=new r({Extends:l,initialize:function(v,g,y,m,x,b){var w,T,S=v.cacheManager.obj;if(u(g)){var C=g;g=a(C,"key"),w=new p(v,{key:g,type:"obj",cache:S,url:a(C,"url"),extension:a(C,"extension","obj"),xhrSettings:a(C,"xhrSettings"),config:{flipUV:a(C,"flipUV",x)}}),(m=a(C,"matURL"))&&(T=new p(v,{key:g,type:"mat",cache:S,url:m,extension:a(C,"matExtension","mat"),xhrSettings:a(C,"xhrSettings")}))}else w=new p(v,{key:g,url:y,type:"obj",cache:S,extension:"obj",xhrSettings:b,config:{flipUV:x}}),m&&(T=new p(v,{key:g,url:m,type:"mat",cache:S,extension:"mat",xhrSettings:b}));l.call(this,v,"obj",g,[w,T])},addToCache:function(){if(this.isReadyToProcess()){var v=this.files[0],g=this.files[1],y=d(v.data,v.config.flipUV);g&&(y.materials=c(g.data)),v.cache.add(v.key,y),this.complete=!0}}});h.register("obj",function(v,g,y,m,x){var b;if(Array.isArray(v))for(var w=0;w<v.length;w++)b=new f(this,v[w]),this.addFile(b.files);else b=new f(this,v,g,y,m,x),this.addFile(b.files);return this}),s.exports=f},58610:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(74099),u=i(518),l=new r({Extends:u,initialize:function(d,c,p,f,v){u.call(this,d,c,p,f,v),this.type="packfile"},onProcess:function(){if(this.state!==h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var d={};d[this.config]=this.data,this.data=d}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(d,c,p,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new l(this,d[v]));else this.addFile(new l(this,d,c,f,p));return this}),s.exports=l},48988:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y,m){var x="js";if(d(f)){var b=f;f=l(b,"key"),v=l(b,"url"),m=l(b,"xhrSettings"),x=l(b,"extension",x),g=l(b,"start"),y=l(b,"mapping")}var w={type:"plugin",cache:!1,extension:x,responseType:"text",key:f,url:v,xhrSettings:m,config:{start:g,mapping:y}};a.call(this,p,w),typeof v=="function"&&(this.data=v,this.state=h.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,f=this.config,v=l(f,"start",!1),g=l(f,"mapping",null);if(this.state===h.FILE_POPULATED)p.install(this.key,this.data,v,g);else{this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var y=p.install(this.key,window[this.key],v,g);(v||g)&&(this.loader.systems[g]=y,this.loader.scene[g]=y)}this.onProcessComplete()}});u.register("plugin",function(p,f,v,g,y){if(Array.isArray(p))for(var m=0;m<p.length;m++)this.addFile(new c(this,p[m]));else this.addFile(new c(this,p,f,v,g,y));return this}),s.exports=c},67397:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y){var m="svg";if(d(f)){var x=f;f=l(x,"key"),v=l(x,"url"),g=l(x,"svgConfig",{}),y=l(x,"xhrSettings"),m=l(x,"extension",m)}var b={type:"svg",cache:p.textureManager,extension:m,responseType:"text",key:f,url:v,xhrSettings:y,config:{width:l(g,"width"),height:l(g,"height"),scale:l(g,"scale")}};a.call(this,p,b)},onProcess:function(){this.state=h.FILE_PROCESSING;var p=this.xhrLoader.responseText,f=[p],v=this.config.width,g=this.config.height,y=this.config.scale;t:if(v&&g||y){var m=new DOMParser().parseFromString(p,"text/xml").getElementsByTagName("svg")[0],x=m.hasAttribute("viewBox"),b=parseFloat(m.getAttribute("width")),w=parseFloat(m.getAttribute("height"));if(!x&&b&&w)m.setAttribute("viewBox","0  0 "+b+" "+w);else if(x&&!b&&!w){var T=m.getAttribute("viewBox").split(/\s+|,/);b=T[2],w=T[3]}if(y){if(!b||!w)break t;v=b*y,g=w*y}m.setAttribute("width",v.toString()+"px"),m.setAttribute("height",g.toString()+"px"),f=[new XMLSerializer().serializeToString(m)]}try{var S=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var C=this,E=!1;this.data.onload=function(){E||a.revokeObjectURL(C.data),C.onProcessComplete()},this.data.onerror=function(){E?C.onProcessError():(E=!0,a.revokeObjectURL(C.data),C.data.src="data:image/svg+xml,"+encodeURIComponent(f.join("")))},a.createObjectURL(this.data,S,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});u.register("svg",function(p,f,v,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new c(this,p[y]));else this.addFile(new c(this,p,f,v,g));return this}),s.exports=c},88423:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g){var y="js";if(d(f)){var m=f;f=l(m,"key"),v=l(m,"url"),g=l(m,"xhrSettings"),y=l(m,"extension",y)}var x={type:"text",extension:y,responseType:"text",key:f,url:v,xhrSettings:g};a.call(this,p,x)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var p=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),f=eval;this.loader.sceneManager.add(this.key,f(p)),this.complete=!0}});u.register("sceneFile",function(p,f,v){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new c(this,p[g]));else this.addFile(new c(this,p,f,v));return this}),s.exports=c},56812:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y,m){var x="js";if(d(f)){var b=f;f=l(b,"key"),v=l(b,"url"),m=l(b,"xhrSettings"),x=l(b,"extension",x),g=l(b,"systemKey"),y=l(b,"sceneKey")}var w={type:"scenePlugin",cache:!1,extension:x,responseType:"text",key:f,url:v,xhrSettings:m,config:{systemKey:g,sceneKey:y}};a.call(this,p,w),typeof v=="function"&&(this.data=v,this.state=h.FILE_POPULATED)},onProcess:function(){var p=this.loader.systems.plugins,f=this.config,v=this.key,g=l(f,"systemKey",v),y=l(f,"sceneKey",v);this.state===h.FILE_POPULATED?p.installScenePlugin(g,this.data,y,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),p.installScenePlugin(g,window[this.key],y,this.loader.scene,!0)),this.onProcessComplete()}});u.register("scenePlugin",function(p,f,v,g,y){if(Array.isArray(p))for(var m=0;m<p.length;m++)this.addFile(new c(this,p[m]));else this.addFile(new c(this,p,f,v,g,y));return this}),s.exports=c},34328:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g,y){var m="js";if(d(f)){var x=f;f=l(x,"key"),v=l(x,"url"),g=l(x,"type","script"),y=l(x,"xhrSettings"),m=l(x,"extension",m)}else g===void 0&&(g="script");var b={type:g,cache:!1,extension:m,responseType:"text",key:f,url:v,xhrSettings:y};a.call(this,p,b)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});u.register("script",function(p,f,v,g){if(Array.isArray(p))for(var y=0;y<p.length;y++)this.addFile(new c(this,p[y]));else this.addFile(new c(this,p,f,v,g));return this}),s.exports=c},85035:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(74099),u=i(19550),l=new r({Extends:u,initialize:function(d,c,p,f,v){u.call(this,d,c,p,v,f),this.type="spritesheet"},addToCache:function(){var d=this.linkFile;d?d.state>=h.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,d.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,d.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});a.register("spritesheet",function(d,c,p,f){if(Array.isArray(d))for(var v=0;v<d.length;v++)this.addFile(new l(this,d[v]));else this.addFile(new l(this,d,c,p,f));return this}),s.exports=l},78776:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=new r({Extends:a,initialize:function(p,f,v,g){var y="text",m="txt",x=p.cacheManager.text;if(d(f)){var b=f;f=l(b,"key"),v=l(b,"url"),g=l(b,"xhrSettings"),m=l(b,"extension",m),y=l(b,"type",y),x=l(b,"cache",x)}var w={type:y,cache:x,extension:m,responseType:"text",key:f,url:v,xhrSettings:g};a.call(this,p,w)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});u.register("text",function(p,f,v){if(Array.isArray(p))for(var g=0;g<p.length;g++)this.addFile(new c(this,p[g]));else this.addFile(new c(this,p,f,v));return this}),s.exports=c},49477:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=i(80341),p=new r({Extends:a,initialize:function(f,v,g,y){var m="csv";if(d(v)){var x=v;v=l(x,"key"),g=l(x,"url"),y=l(x,"xhrSettings"),m=l(x,"extension",m)}var b={type:"tilemapCSV",cache:f.cacheManager.tilemap,extension:m,responseType:"text",key:v,url:g,xhrSettings:y};a.call(this,f,b),this.tilemapFormat=c.CSV},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var f={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,f)}});u.register("tilemapCSV",function(f,v,g){if(Array.isArray(f))for(var y=0;y<f.length;y++)this.addFile(new p(this,f[y]));else this.addFile(new p(this,f,v,g));return this}),s.exports=p},40807:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(518),u=i(80341),l=new r({Extends:a,initialize:function(d,c,p,f){a.call(this,d,c,p,f),this.type="tilemapJSON",this.cache=d.cacheManager.tilemap},addToCache:function(){var d={format:u.WELTMEISTER,data:this.data};this.cache.add(this.key,d)}});h.register("tilemapImpact",function(d,c,p){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new l(this,d[f]));else this.addFile(new l(this,d,c,p));return this}),s.exports=l},56775:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(518),u=i(80341),l=new r({Extends:a,initialize:function(d,c,p,f){a.call(this,d,c,p,f),this.type="tilemapJSON",this.cache=d.cacheManager.tilemap},addToCache:function(){var d={format:u.TILED_JSON,data:this.data};this.cache.add(this.key,d)}});h.register("tilemapTiledJSON",function(d,c,p){if(Array.isArray(d))for(var f=0;f<d.length;f++)this.addFile(new l(this,d[f]));else this.addFile(new l(this,d,c,p));return this}),s.exports=l},25771:(s,o,i)=>{var r=i(83419),h=i(74099),a=i(95540),u=i(19550),l=i(41212),d=i(26430),c=i(78776),p=new r({Extends:d,initialize:function(f,v,g,y,m,x){var b,w;if(l(v)){var T=v;v=a(T,"key"),b=new u(f,{key:v,url:a(T,"textureURL"),extension:a(T,"textureExtension","png"),normalMap:a(T,"normalMap"),xhrSettings:a(T,"textureXhrSettings")}),w=new c(f,{key:v,url:a(T,"atlasURL"),extension:a(T,"atlasExtension","txt"),xhrSettings:a(T,"atlasXhrSettings")})}else b=new u(f,v,g,m),w=new c(f,v,y,x);b.linkFile?d.call(this,f,"unityatlas",v,[b,w,b.linkFile]):d.call(this,f,"unityatlas",v,[b,w])},addToCache:function(){if(this.isReadyToProcess()){var f=this.files[0],v=this.files[1],g=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(f.key,f.data,v.data,g),this.complete=!0}}});h.register("unityAtlas",function(f,v,g,y,m){var x;if(Array.isArray(f))for(var b=0;b<f.length;b++)x=new p(this,f[b]),this.addFile(x.files);else x=new p(this,f,v,g,y,m),this.addFile(x.files);return this}),s.exports=p},33720:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(98356),d=i(95540),c=i(41212),p=new r({Extends:a,initialize:function(f,v,g,y){if(y===void 0&&(y=!1),c(v)){var m=v;v=d(m,"key"),g=d(m,"url",[]),y=d(m,"noAudio",!1)}var x=f.systems.game.device.video.getVideoURL(g);x||console.warn("VideoFile: No supported format for "+v);var b={type:"video",cache:f.cacheManager.video,extension:x.type,key:v,url:x.url,config:{noAudio:y}};a.call(this,f,b)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=l(this,this.loader.baseURL),this.state=h.FILE_LOADED,this.loader.nextFile(this,!0)}});u.register("video",function(f,v,g){if(Array.isArray(f))for(var y=0;y<f.length;y++)this.addFile(new p(this,f[y]));else this.addFile(new p(this,f,v,g));return this}),s.exports=p},57318:(s,o,i)=>{var r=i(83419),h=i(23906),a=i(41299),u=i(74099),l=i(95540),d=i(41212),c=i(56836),p=new r({Extends:a,initialize:function(f,v,g,y){var m="xml";if(d(v)){var x=v;v=l(x,"key"),g=l(x,"url"),y=l(x,"xhrSettings"),m=l(x,"extension",m)}var b={type:"xml",cache:f.cacheManager.xml,extension:m,responseType:"text",key:v,url:g,xhrSettings:y};a.call(this,f,b)},onProcess:function(){this.state=h.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});u.register("xml",function(f,v,g){if(Array.isArray(f))for(var y=0;y<f.length;y++)this.addFile(new p(this,f[y]));else this.addFile(new p(this,f,v,g));return this}),s.exports=p},64589:(s,o,i)=>{s.exports={AnimationJSONFile:i(14135),AsepriteFile:i(76272),AtlasJSONFile:i(38734),AtlasXMLFile:i(74599),AudioFile:i(21097),AudioSpriteFile:i(89524),BinaryFile:i(85722),BitmapFontFile:i(97025),CompressedTextureFile:i(69559),CSSFile:i(16024),GLSLFile:i(47931),HTML5AudioFile:i(89749),HTMLFile:i(88470),HTMLTextureFile:i(14643),ImageFile:i(19550),JSONFile:i(518),MultiAtlasFile:i(59327),MultiScriptFile:i(99297),OBJFile:i(41846),PackFile:i(58610),PluginFile:i(48988),SceneFile:i(88423),ScenePluginFile:i(56812),ScriptFile:i(34328),SpriteSheetFile:i(85035),SVGFile:i(67397),TextFile:i(78776),TilemapCSVFile:i(49477),TilemapImpactFile:i(40807),TilemapJSONFile:i(56775),UnityAtlasFile:i(25771),VideoFile:i(33720),XMLFile:i(57318)}},57777:(s,o,i)=>{var r=i(23906),h=i(79291),a={Events:i(54899),FileTypes:i(64589),File:i(41299),FileTypesManager:i(74099),GetURL:i(98356),LoaderPlugin:i(74261),MergeXHRSettings:i(3374),MultiFile:i(26430),XHRLoader:i(84376),XHRSettings:i(92638)};a=h(!1,a,r),s.exports=a},53307:s=>{s.exports=function(o){for(var i=0,r=0;r<o.length;r++)i+=+o[r];return i/o.length}},85710:(s,o,i)=>{var r=i(6411);s.exports=function(h,a){return r(h)/r(a)/r(h-a)}},30976:s=>{s.exports=function(o,i){return Math.floor(Math.random()*(i-o+1)+o)}},87842:s=>{s.exports=function(o,i,r,h,a){var u=.5*(h-i),l=.5*(a-r),d=o*o;return(2*r-2*h+u+l)*(o*d)+(-3*r+3*h-2*u-l)*d+u*o+r}},26302:s=>{s.exports=function(o,i,r){i===void 0&&(i=0),r===void 0&&(r=10);var h=Math.pow(r,-i);return Math.ceil(o*h)/h}},45319:s=>{s.exports=function(o,i,r){return Math.max(i,Math.min(r,o))}},39506:(s,o,i)=>{var r=i(36383);s.exports=function(h){return h*r.DEG_TO_RAD}},61241:s=>{s.exports=function(o,i){return Math.abs(o-i)}},38857:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(37867),u=i(29747),l=new a,d=new h({initialize:function c(p,f,v,g){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=0),g===void 0&&(g=c.DefaultOrder),this._x=p,this._y=f,this._z=v,this._order=g,this.onChangeCallback=u},x:{get:function(){return this._x},set:function(c){this._x=c,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(c){this._y=c,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(c){this._z=c,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(c){this._order=c,this.onChangeCallback(this)}},set:function(c,p,f,v){return v===void 0&&(v=this._order),this._x=c,this._y=p,this._z=f,this._order=v,this.onChangeCallback(this),this},copy:function(c){return this.set(c.x,c.y,c.z,c.order)},setFromQuaternion:function(c,p,f){return p===void 0&&(p=this._order),f===void 0&&(f=!1),l.fromQuat(c),this.setFromRotationMatrix(l,p,f)},setFromRotationMatrix:function(c,p,f){p===void 0&&(p=this._order),f===void 0&&(f=!1);var v=c.val,g=v[0],y=v[4],m=v[8],x=v[1],b=v[5],w=v[9],T=v[2],S=v[6],C=v[10],E=0,M=0,_=0,O=.99999;switch(p){case"XYZ":M=Math.asin(r(m,-1,1)),Math.abs(m)<O?(E=Math.atan2(-w,C),_=Math.atan2(-y,g)):E=Math.atan2(S,b);break;case"YXZ":E=Math.asin(-r(w,-1,1)),Math.abs(w)<O?(M=Math.atan2(m,C),_=Math.atan2(x,b)):M=Math.atan2(-T,g);break;case"ZXY":E=Math.asin(r(S,-1,1)),Math.abs(S)<O?(M=Math.atan2(-T,C),_=Math.atan2(-y,b)):_=Math.atan2(x,g);break;case"ZYX":M=Math.asin(-r(T,-1,1)),Math.abs(T)<O?(E=Math.atan2(S,C),_=Math.atan2(x,g)):_=Math.atan2(-y,b);break;case"YZX":_=Math.asin(r(x,-1,1)),Math.abs(x)<O?(E=Math.atan2(-w,b),M=Math.atan2(-T,g)):M=Math.atan2(m,C);break;case"XZY":_=Math.asin(-r(y,-1,1)),Math.abs(y)<O?(E=Math.atan2(S,b),M=Math.atan2(m,g)):E=Math.atan2(-w,C)}return this._x=E,this._y=M,this._z=_,this._order=p,f&&this.onChangeCallback(this),this}});d.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],d.DefaultOrder="XYZ",s.exports=d},6411:s=>{s.exports=function(o){if(o===0)return 1;for(var i=o;--o;)i*=o;return i}},99472:s=>{s.exports=function(o,i){return Math.random()*(i-o)+o}},77623:s=>{s.exports=function(o,i,r){i===void 0&&(i=0),r===void 0&&(r=10);var h=Math.pow(r,-i);return Math.floor(o*h)/h}},62945:(s,o,i)=>{var r=i(45319);s.exports=function(h,a,u){return(u-a)*(h=r(h,0,1))+a}},38265:s=>{s.exports=function(o,i){return o/i/1e3}},78702:s=>{s.exports=function(o){return o==parseFloat(o)?!(o%2):void 0}},94883:s=>{s.exports=function(o){return o===parseFloat(o)?!(o%2):void 0}},28915:s=>{s.exports=function(o,i,r){return(i-o)*r+o}},94908:s=>{s.exports=function(o,i,r){return r===void 0&&(r=0),o.clone().lerp(i,r)}},94434:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){this.val=new Float32Array(9),h?this.copy(h):this.identity()},clone:function(){return new r(this)},set:function(h){return this.copy(h)},copy:function(h){var a=this.val,u=h.val;return a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=u[3],a[4]=u[4],a[5]=u[5],a[6]=u[6],a[7]=u[7],a[8]=u[8],this},fromMat4:function(h){var a=h.val,u=this.val;return u[0]=a[0],u[1]=a[1],u[2]=a[2],u[3]=a[4],u[4]=a[5],u[5]=a[6],u[6]=a[8],u[7]=a[9],u[8]=a[10],this},fromArray:function(h){var a=this.val;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],this},identity:function(){var h=this.val;return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=1,h[5]=0,h[6]=0,h[7]=0,h[8]=1,this},transpose:function(){var h=this.val,a=h[1],u=h[2],l=h[5];return h[1]=h[3],h[2]=h[6],h[3]=a,h[5]=h[7],h[6]=u,h[7]=l,this},invert:function(){var h=this.val,a=h[0],u=h[1],l=h[2],d=h[3],c=h[4],p=h[5],f=h[6],v=h[7],g=h[8],y=g*c-p*v,m=-g*d+p*f,x=v*d-c*f,b=a*y+u*m+l*x;return b?(b=1/b,h[0]=y*b,h[1]=(-g*u+l*v)*b,h[2]=(p*u-l*c)*b,h[3]=m*b,h[4]=(g*a-l*f)*b,h[5]=(-p*a+l*d)*b,h[6]=x*b,h[7]=(-v*a+u*f)*b,h[8]=(c*a-u*d)*b,this):null},adjoint:function(){var h=this.val,a=h[0],u=h[1],l=h[2],d=h[3],c=h[4],p=h[5],f=h[6],v=h[7],g=h[8];return h[0]=c*g-p*v,h[1]=l*v-u*g,h[2]=u*p-l*c,h[3]=p*f-d*g,h[4]=a*g-l*f,h[5]=l*d-a*p,h[6]=d*v-c*f,h[7]=u*f-a*v,h[8]=a*c-u*d,this},determinant:function(){var h=this.val,a=h[0],u=h[1],l=h[2],d=h[3],c=h[4],p=h[5],f=h[6],v=h[7],g=h[8];return a*(g*c-p*v)+u*(-g*d+p*f)+l*(v*d-c*f)},multiply:function(h){var a=this.val,u=a[0],l=a[1],d=a[2],c=a[3],p=a[4],f=a[5],v=a[6],g=a[7],y=a[8],m=h.val,x=m[0],b=m[1],w=m[2],T=m[3],S=m[4],C=m[5],E=m[6],M=m[7],_=m[8];return a[0]=x*u+b*c+w*v,a[1]=x*l+b*p+w*g,a[2]=x*d+b*f+w*y,a[3]=T*u+S*c+C*v,a[4]=T*l+S*p+C*g,a[5]=T*d+S*f+C*y,a[6]=E*u+M*c+_*v,a[7]=E*l+M*p+_*g,a[8]=E*d+M*f+_*y,this},translate:function(h){var a=this.val,u=h.x,l=h.y;return a[6]=u*a[0]+l*a[3]+a[6],a[7]=u*a[1]+l*a[4]+a[7],a[8]=u*a[2]+l*a[5]+a[8],this},rotate:function(h){var a=this.val,u=a[0],l=a[1],d=a[2],c=a[3],p=a[4],f=a[5],v=Math.sin(h),g=Math.cos(h);return a[0]=g*u+v*c,a[1]=g*l+v*p,a[2]=g*d+v*f,a[3]=g*c-v*u,a[4]=g*p-v*l,a[5]=g*f-v*d,this},scale:function(h){var a=this.val,u=h.x,l=h.y;return a[0]=u*a[0],a[1]=u*a[1],a[2]=u*a[2],a[3]=l*a[3],a[4]=l*a[4],a[5]=l*a[5],this},fromQuat:function(h){var a=h.x,u=h.y,l=h.z,d=h.w,c=a+a,p=u+u,f=l+l,v=a*c,g=a*p,y=a*f,m=u*p,x=u*f,b=l*f,w=d*c,T=d*p,S=d*f,C=this.val;return C[0]=1-(m+b),C[3]=g+S,C[6]=y-T,C[1]=g-S,C[4]=1-(v+b),C[7]=x+w,C[2]=y+T,C[5]=x-w,C[8]=1-(v+m),this},normalFromMat4:function(h){var a=h.val,u=this.val,l=a[0],d=a[1],c=a[2],p=a[3],f=a[4],v=a[5],g=a[6],y=a[7],m=a[8],x=a[9],b=a[10],w=a[11],T=a[12],S=a[13],C=a[14],E=a[15],M=l*v-d*f,_=l*g-c*f,O=l*y-p*f,k=d*g-c*v,P=d*y-p*v,A=c*y-p*g,L=m*S-x*T,D=m*C-b*T,F=m*E-w*T,X=x*C-b*S,z=x*E-w*S,Y=b*E-w*C,R=M*Y-_*z+O*X+k*F-P*D+A*L;return R?(R=1/R,u[0]=(v*Y-g*z+y*X)*R,u[1]=(g*F-f*Y-y*D)*R,u[2]=(f*z-v*F+y*L)*R,u[3]=(c*z-d*Y-p*X)*R,u[4]=(l*Y-c*F+p*D)*R,u[5]=(d*F-l*z-p*L)*R,u[6]=(S*A-C*P+E*k)*R,u[7]=(C*O-T*A-E*_)*R,u[8]=(T*P-S*O+E*M)*R,this):null}});s.exports=r},37867:(s,o,i)=>{var r=i(83419),h=i(25836),a=1e-6,u=new r({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new u(this)},set:function(v){return this.copy(v)},setValues:function(v,g,y,m,x,b,w,T,S,C,E,M,_,O,k,P){var A=this.val;return A[0]=v,A[1]=g,A[2]=y,A[3]=m,A[4]=x,A[5]=b,A[6]=w,A[7]=T,A[8]=S,A[9]=C,A[10]=E,A[11]=M,A[12]=_,A[13]=O,A[14]=k,A[15]=P,this},copy:function(v){var g=v.val;return this.setValues(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15])},fromArray:function(v){return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(v,g,y){var m=l.fromQuat(y).val,x=g.x,b=g.y,w=g.z;return this.setValues(m[0]*x,m[1]*x,m[2]*x,0,m[4]*b,m[5]*b,m[6]*b,0,m[8]*w,m[9]*w,m[10]*w,0,v.x,v.y,v.z,1)},xyz:function(v,g,y){this.identity();var m=this.val;return m[12]=v,m[13]=g,m[14]=y,this},scaling:function(v,g,y){this.zero();var m=this.val;return m[0]=v,m[5]=g,m[10]=y,m[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var v=this.val,g=v[1],y=v[2],m=v[3],x=v[6],b=v[7],w=v[11];return v[1]=v[4],v[2]=v[8],v[3]=v[12],v[4]=g,v[6]=v[9],v[7]=v[13],v[8]=y,v[9]=x,v[11]=v[14],v[12]=m,v[13]=b,v[14]=w,this},getInverse:function(v){return this.copy(v),this.invert()},invert:function(){var v=this.val,g=v[0],y=v[1],m=v[2],x=v[3],b=v[4],w=v[5],T=v[6],S=v[7],C=v[8],E=v[9],M=v[10],_=v[11],O=v[12],k=v[13],P=v[14],A=v[15],L=g*w-y*b,D=g*T-m*b,F=g*S-x*b,X=y*T-m*w,z=y*S-x*w,Y=m*S-x*T,R=C*k-E*O,B=C*P-M*O,I=C*A-_*O,G=E*P-M*k,N=E*A-_*k,W=M*A-_*P,U=L*W-D*N+F*G+X*I-z*B+Y*R;return U?(U=1/U,this.setValues((w*W-T*N+S*G)*U,(m*N-y*W-x*G)*U,(k*Y-P*z+A*X)*U,(M*z-E*Y-_*X)*U,(T*I-b*W-S*B)*U,(g*W-m*I+x*B)*U,(P*F-O*Y-A*D)*U,(C*Y-M*F+_*D)*U,(b*N-w*I+S*R)*U,(y*I-g*N-x*R)*U,(O*z-k*F+A*L)*U,(E*F-C*z-_*L)*U,(w*B-b*G-T*R)*U,(g*G-y*B+m*R)*U,(k*D-O*X-P*L)*U,(C*X-E*D+M*L)*U)):this},adjoint:function(){var v=this.val,g=v[0],y=v[1],m=v[2],x=v[3],b=v[4],w=v[5],T=v[6],S=v[7],C=v[8],E=v[9],M=v[10],_=v[11],O=v[12],k=v[13],P=v[14],A=v[15];return this.setValues(w*(M*A-_*P)-E*(T*A-S*P)+k*(T*_-S*M),-(y*(M*A-_*P)-E*(m*A-x*P)+k*(m*_-x*M)),y*(T*A-S*P)-w*(m*A-x*P)+k*(m*S-x*T),-(y*(T*_-S*M)-w*(m*_-x*M)+E*(m*S-x*T)),-(b*(M*A-_*P)-C*(T*A-S*P)+O*(T*_-S*M)),g*(M*A-_*P)-C*(m*A-x*P)+O*(m*_-x*M),-(g*(T*A-S*P)-b*(m*A-x*P)+O*(m*S-x*T)),g*(T*_-S*M)-b*(m*_-x*M)+C*(m*S-x*T),b*(E*A-_*k)-C*(w*A-S*k)+O*(w*_-S*E),-(g*(E*A-_*k)-C*(y*A-x*k)+O*(y*_-x*E)),g*(w*A-S*k)-b*(y*A-x*k)+O*(y*S-x*w),-(g*(w*_-S*E)-b*(y*_-x*E)+C*(y*S-x*w)),-(b*(E*P-M*k)-C*(w*P-T*k)+O*(w*M-T*E)),g*(E*P-M*k)-C*(y*P-m*k)+O*(y*M-m*E),-(g*(w*P-T*k)-b*(y*P-m*k)+O*(y*T-m*w)),g*(w*M-T*E)-b*(y*M-m*E)+C*(y*T-m*w))},determinant:function(){var v=this.val,g=v[0],y=v[1],m=v[2],x=v[3],b=v[4],w=v[5],T=v[6],S=v[7],C=v[8],E=v[9],M=v[10],_=v[11],O=v[12],k=v[13],P=v[14],A=v[15];return(g*w-y*b)*(M*A-_*P)-(g*T-m*b)*(E*A-_*k)+(g*S-x*b)*(E*P-M*k)+(y*T-m*w)*(C*A-_*O)-(y*S-x*w)*(C*P-M*O)+(m*S-x*T)*(C*k-E*O)},multiply:function(v){var g=this.val,y=g[0],m=g[1],x=g[2],b=g[3],w=g[4],T=g[5],S=g[6],C=g[7],E=g[8],M=g[9],_=g[10],O=g[11],k=g[12],P=g[13],A=g[14],L=g[15],D=v.val,F=D[0],X=D[1],z=D[2],Y=D[3];return g[0]=F*y+X*w+z*E+Y*k,g[1]=F*m+X*T+z*M+Y*P,g[2]=F*x+X*S+z*_+Y*A,g[3]=F*b+X*C+z*O+Y*L,F=D[4],X=D[5],z=D[6],Y=D[7],g[4]=F*y+X*w+z*E+Y*k,g[5]=F*m+X*T+z*M+Y*P,g[6]=F*x+X*S+z*_+Y*A,g[7]=F*b+X*C+z*O+Y*L,F=D[8],X=D[9],z=D[10],Y=D[11],g[8]=F*y+X*w+z*E+Y*k,g[9]=F*m+X*T+z*M+Y*P,g[10]=F*x+X*S+z*_+Y*A,g[11]=F*b+X*C+z*O+Y*L,F=D[12],X=D[13],z=D[14],Y=D[15],g[12]=F*y+X*w+z*E+Y*k,g[13]=F*m+X*T+z*M+Y*P,g[14]=F*x+X*S+z*_+Y*A,g[15]=F*b+X*C+z*O+Y*L,this},multiplyLocal:function(v){var g=this.val,y=v.val;return this.setValues(g[0]*y[0]+g[1]*y[4]+g[2]*y[8]+g[3]*y[12],g[0]*y[1]+g[1]*y[5]+g[2]*y[9]+g[3]*y[13],g[0]*y[2]+g[1]*y[6]+g[2]*y[10]+g[3]*y[14],g[0]*y[3]+g[1]*y[7]+g[2]*y[11]+g[3]*y[15],g[4]*y[0]+g[5]*y[4]+g[6]*y[8]+g[7]*y[12],g[4]*y[1]+g[5]*y[5]+g[6]*y[9]+g[7]*y[13],g[4]*y[2]+g[5]*y[6]+g[6]*y[10]+g[7]*y[14],g[4]*y[3]+g[5]*y[7]+g[6]*y[11]+g[7]*y[15],g[8]*y[0]+g[9]*y[4]+g[10]*y[8]+g[11]*y[12],g[8]*y[1]+g[9]*y[5]+g[10]*y[9]+g[11]*y[13],g[8]*y[2]+g[9]*y[6]+g[10]*y[10]+g[11]*y[14],g[8]*y[3]+g[9]*y[7]+g[10]*y[11]+g[11]*y[15],g[12]*y[0]+g[13]*y[4]+g[14]*y[8]+g[15]*y[12],g[12]*y[1]+g[13]*y[5]+g[14]*y[9]+g[15]*y[13],g[12]*y[2]+g[13]*y[6]+g[14]*y[10]+g[15]*y[14],g[12]*y[3]+g[13]*y[7]+g[14]*y[11]+g[15]*y[15])},premultiply:function(v){return this.multiplyMatrices(v,this)},multiplyMatrices:function(v,g){var y=v.val,m=g.val,x=y[0],b=y[4],w=y[8],T=y[12],S=y[1],C=y[5],E=y[9],M=y[13],_=y[2],O=y[6],k=y[10],P=y[14],A=y[3],L=y[7],D=y[11],F=y[15],X=m[0],z=m[4],Y=m[8],R=m[12],B=m[1],I=m[5],G=m[9],N=m[13],W=m[2],U=m[6],V=m[10],K=m[14],$=m[3],H=m[7],j=m[11],q=m[15];return this.setValues(x*X+b*B+w*W+T*$,S*X+C*B+E*W+M*$,_*X+O*B+k*W+P*$,A*X+L*B+D*W+F*$,x*z+b*I+w*U+T*H,S*z+C*I+E*U+M*H,_*z+O*I+k*U+P*H,A*z+L*I+D*U+F*H,x*Y+b*G+w*V+T*j,S*Y+C*G+E*V+M*j,_*Y+O*G+k*V+P*j,A*Y+L*G+D*V+F*j,x*R+b*N+w*K+T*q,S*R+C*N+E*K+M*q,_*R+O*N+k*K+P*q,A*R+L*N+D*K+F*q)},translate:function(v){return this.translateXYZ(v.x,v.y,v.z)},translateXYZ:function(v,g,y){var m=this.val;return m[12]=m[0]*v+m[4]*g+m[8]*y+m[12],m[13]=m[1]*v+m[5]*g+m[9]*y+m[13],m[14]=m[2]*v+m[6]*g+m[10]*y+m[14],m[15]=m[3]*v+m[7]*g+m[11]*y+m[15],this},scale:function(v){return this.scaleXYZ(v.x,v.y,v.z)},scaleXYZ:function(v,g,y){var m=this.val;return m[0]=m[0]*v,m[1]=m[1]*v,m[2]=m[2]*v,m[3]=m[3]*v,m[4]=m[4]*g,m[5]=m[5]*g,m[6]=m[6]*g,m[7]=m[7]*g,m[8]=m[8]*y,m[9]=m[9]*y,m[10]=m[10]*y,m[11]=m[11]*y,this},makeRotationAxis:function(v,g){var y=Math.cos(g),m=Math.sin(g),x=1-y,b=v.x,w=v.y,T=v.z,S=x*b,C=x*w;return this.setValues(S*b+y,S*w-m*T,S*T+m*w,0,S*w+m*T,C*w+y,C*T-m*b,0,S*T-m*w,C*T+m*b,x*T*T+y,0,0,0,0,1)},rotate:function(v,g){var y=this.val,m=g.x,x=g.y,b=g.z,w=Math.sqrt(m*m+x*x+b*b);if(Math.abs(w)<a)return this;m*=w=1/w,x*=w,b*=w;var T=Math.sin(v),S=Math.cos(v),C=1-S,E=y[0],M=y[1],_=y[2],O=y[3],k=y[4],P=y[5],A=y[6],L=y[7],D=y[8],F=y[9],X=y[10],z=y[11],Y=y[12],R=y[13],B=y[14],I=y[15],G=m*m*C+S,N=x*m*C+b*T,W=b*m*C-x*T,U=m*x*C-b*T,V=x*x*C+S,K=b*x*C+m*T,$=m*b*C+x*T,H=x*b*C-m*T,j=b*b*C+S;return this.setValues(E*G+k*N+D*W,M*G+P*N+F*W,_*G+A*N+X*W,O*G+L*N+z*W,E*U+k*V+D*K,M*U+P*V+F*K,_*U+A*V+X*K,O*U+L*V+z*K,E*$+k*H+D*j,M*$+P*H+F*j,_*$+A*H+X*j,O*$+L*H+z*j,Y,R,B,I)},rotateX:function(v){var g=this.val,y=Math.sin(v),m=Math.cos(v),x=g[4],b=g[5],w=g[6],T=g[7],S=g[8],C=g[9],E=g[10],M=g[11];return g[4]=x*m+S*y,g[5]=b*m+C*y,g[6]=w*m+E*y,g[7]=T*m+M*y,g[8]=S*m-x*y,g[9]=C*m-b*y,g[10]=E*m-w*y,g[11]=M*m-T*y,this},rotateY:function(v){var g=this.val,y=Math.sin(v),m=Math.cos(v),x=g[0],b=g[1],w=g[2],T=g[3],S=g[8],C=g[9],E=g[10],M=g[11];return g[0]=x*m-S*y,g[1]=b*m-C*y,g[2]=w*m-E*y,g[3]=T*m-M*y,g[8]=x*y+S*m,g[9]=b*y+C*m,g[10]=w*y+E*m,g[11]=T*y+M*m,this},rotateZ:function(v){var g=this.val,y=Math.sin(v),m=Math.cos(v),x=g[0],b=g[1],w=g[2],T=g[3],S=g[4],C=g[5],E=g[6],M=g[7];return g[0]=x*m+S*y,g[1]=b*m+C*y,g[2]=w*m+E*y,g[3]=T*m+M*y,g[4]=S*m-x*y,g[5]=C*m-b*y,g[6]=E*m-w*y,g[7]=M*m-T*y,this},fromRotationTranslation:function(v,g){var y=v.x,m=v.y,x=v.z,b=v.w,w=y+y,T=m+m,S=x+x,C=y*w,E=y*T,M=y*S,_=m*T,O=m*S,k=x*S,P=b*w,A=b*T,L=b*S;return this.setValues(1-(_+k),E+L,M-A,0,E-L,1-(C+k),O+P,0,M+A,O-P,1-(C+_),0,g.x,g.y,g.z,1)},fromQuat:function(v){var g=v.x,y=v.y,m=v.z,x=v.w,b=g+g,w=y+y,T=m+m,S=g*b,C=g*w,E=g*T,M=y*w,_=y*T,O=m*T,k=x*b,P=x*w,A=x*T;return this.setValues(1-(M+O),C+A,E-P,0,C-A,1-(S+O),_+k,0,E+P,_-k,1-(S+M),0,0,0,0,1)},frustum:function(v,g,y,m,x,b){var w=1/(g-v),T=1/(m-y),S=1/(x-b);return this.setValues(2*x*w,0,0,0,0,2*x*T,0,0,(g+v)*w,(m+y)*T,(b+x)*S,-1,0,0,b*x*2*S,0)},perspective:function(v,g,y,m){var x=1/Math.tan(v/2),b=1/(y-m);return this.setValues(x/g,0,0,0,0,x,0,0,0,0,(m+y)*b,-1,0,0,2*m*y*b,0)},perspectiveLH:function(v,g,y,m){return this.setValues(2*y/v,0,0,0,0,2*y/g,0,0,0,0,-m/(y-m),1,0,0,y*m/(y-m),0)},ortho:function(v,g,y,m,x,b){var w=v-g,T=y-m,S=x-b;return w=w===0?w:1/w,T=T===0?T:1/T,S=S===0?S:1/S,this.setValues(-2*w,0,0,0,0,-2*T,0,0,0,0,2*S,0,(v+g)*w,(m+y)*T,(b+x)*S,1)},lookAtRH:function(v,g,y){var m=this.val;return f.subVectors(v,g),f.getLengthSquared()===0&&(f.z=1),f.normalize(),c.crossVectors(y,f),c.getLengthSquared()===0&&(Math.abs(y.z)===1?f.x+=1e-4:f.z+=1e-4,f.normalize(),c.crossVectors(y,f)),c.normalize(),p.crossVectors(f,c),m[0]=c.x,m[1]=c.y,m[2]=c.z,m[4]=p.x,m[5]=p.y,m[6]=p.z,m[8]=f.x,m[9]=f.y,m[10]=f.z,this},lookAt:function(v,g,y){var m=v.x,x=v.y,b=v.z,w=y.x,T=y.y,S=y.z,C=g.x,E=g.y,M=g.z;if(Math.abs(m-C)<a&&Math.abs(x-E)<a&&Math.abs(b-M)<a)return this.identity();var _=m-C,O=x-E,k=b-M,P=1/Math.sqrt(_*_+O*O+k*k),A=T*(k*=P)-S*(O*=P),L=S*(_*=P)-w*k,D=w*O-T*_;(P=Math.sqrt(A*A+L*L+D*D))?(A*=P=1/P,L*=P,D*=P):(A=0,L=0,D=0);var F=O*D-k*L,X=k*A-_*D,z=_*L-O*A;return(P=Math.sqrt(F*F+X*X+z*z))?(F*=P=1/P,X*=P,z*=P):(F=0,X=0,z=0),this.setValues(A,F,_,0,L,X,O,0,D,z,k,0,-(A*m+L*x+D*b),-(F*m+X*x+z*b),-(_*m+O*x+k*b),1)},yawPitchRoll:function(v,g,y){this.zero(),l.zero(),d.zero();var m=this.val,x=l.val,b=d.val,w=Math.sin(y),T=Math.cos(y);return m[10]=1,m[15]=1,m[0]=T,m[1]=w,m[4]=-w,m[5]=T,w=Math.sin(g),T=Math.cos(g),x[0]=1,x[15]=1,x[5]=T,x[10]=T,x[9]=-w,x[6]=w,w=Math.sin(v),T=Math.cos(v),b[5]=1,b[15]=1,b[0]=T,b[2]=-w,b[8]=w,b[10]=T,this.multiplyLocal(l),this.multiplyLocal(d),this},setWorldMatrix:function(v,g,y,m,x){return this.yawPitchRoll(v.y,v.x,v.z),l.scaling(y.x,y.y,y.z),d.xyz(g.x,g.y,g.z),this.multiplyLocal(l),this.multiplyLocal(d),m&&this.multiplyLocal(m),x&&this.multiplyLocal(x),this},multiplyToMat4:function(v,g){var y=this.val,m=v.val,x=y[0],b=y[1],w=y[2],T=y[3],S=y[4],C=y[5],E=y[6],M=y[7],_=y[8],O=y[9],k=y[10],P=y[11],A=y[12],L=y[13],D=y[14],F=y[15],X=m[0],z=m[1],Y=m[2],R=m[3],B=m[4],I=m[5],G=m[6],N=m[7],W=m[8],U=m[9],V=m[10],K=m[11],$=m[12],H=m[13],j=m[14],q=m[15];return g.setValues(X*x+z*S+Y*_+R*A,z*b+z*C+Y*O+R*L,Y*w+z*E+Y*k+R*D,R*T+z*M+Y*P+R*F,B*x+I*S+G*_+N*A,B*b+I*C+G*O+N*L,B*w+I*E+G*k+N*D,B*T+I*M+G*P+N*F,W*x+U*S+V*_+K*A,W*b+U*C+V*O+K*L,W*w+U*E+V*k+K*D,W*T+U*M+V*P+K*F,$*x+H*S+j*_+q*A,$*b+H*C+j*O+q*L,$*w+H*E+j*k+q*D,$*T+H*M+j*P+q*F)},fromRotationXYTranslation:function(v,g,y){var m=g.x,x=g.y,b=g.z,w=Math.sin(v.x),T=Math.cos(v.x),S=Math.sin(v.y),C=Math.cos(v.y),E=m,M=x,_=b,O=-w,k=0-O*S,P=0-T*S,A=O*C,L=T*C;return y||(E=C*m+S*b,M=k*m+T*x+A*b,_=P*m+w*x+L*b),this.setValues(C,k,P,0,0,T,w,0,S,A,L,0,E,M,_,1)},getMaxScaleOnAxis:function(){var v=this.val,g=v[0]*v[0]+v[1]*v[1]+v[2]*v[2],y=v[4]*v[4]+v[5]*v[5]+v[6]*v[6],m=v[8]*v[8]+v[9]*v[9]+v[10]*v[10];return Math.sqrt(Math.max(g,y,m))}}),l=new u,d=new u,c=new h,p=new h,f=new h;s.exports=u},86883:s=>{s.exports=function(o,i,r){return Math.min(o+i,r)}},50040:s=>{s.exports=function(o){var i=o.length;if(i===0)return 0;o.sort(function(h,a){return h-a});var r=Math.floor(i/2);return i%2==0?(o[r]+o[r-1])/2:o[r]}},37204:s=>{s.exports=function(o,i,r){return Math.max(o-i,r)}},65201:s=>{s.exports=function(o,i,r,h){r===void 0&&(r=i+1);var a=(o-i)/(r-i);return a>1?h!==void 0?(a=(h-o)/(h-r))<0&&(a=0):a=1:a<0&&(a=0),a}},15746:(s,o,i)=>{var r=i(83419),h=i(94434),a=i(29747),u=i(25836),l=1e-6,d=new Int8Array([1,2,0]),c=new Float32Array([0,0,0]),p=new u(1,0,0),f=new u(0,1,0),v=new u,g=new h,y=new r({initialize:function(m,x,b,w){this.onChangeCallback=a,this.set(m,x,b,w)},x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(m){this._y=m,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(m){this._z=m,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(m){this._w=m,this.onChangeCallback(this)}},copy:function(m){return this.set(m)},set:function(m,x,b,w,T){return T===void 0&&(T=!0),typeof m=="object"?(this._x=m.x||0,this._y=m.y||0,this._z=m.z||0,this._w=m.w||0):(this._x=m||0,this._y=x||0,this._z=b||0,this._w=w||0),T&&this.onChangeCallback(this),this},add:function(m){return this._x+=m.x,this._y+=m.y,this._z+=m.z,this._w+=m.w,this.onChangeCallback(this),this},subtract:function(m){return this._x-=m.x,this._y-=m.y,this._z-=m.z,this._w-=m.w,this.onChangeCallback(this),this},scale:function(m){return this._x*=m,this._y*=m,this._z*=m,this._w*=m,this.onChangeCallback(this),this},length:function(){var m=this.x,x=this.y,b=this.z,w=this.w;return Math.sqrt(m*m+x*x+b*b+w*w)},lengthSq:function(){var m=this.x,x=this.y,b=this.z,w=this.w;return m*m+x*x+b*b+w*w},normalize:function(){var m=this.x,x=this.y,b=this.z,w=this.w,T=m*m+x*x+b*b+w*w;return T>0&&(T=1/Math.sqrt(T),this._x=m*T,this._y=x*T,this._z=b*T,this._w=w*T),this.onChangeCallback(this),this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z+this.w*m.w},lerp:function(m,x){x===void 0&&(x=0);var b=this.x,w=this.y,T=this.z,S=this.w;return this.set(b+x*(m.x-b),w+x*(m.y-w),T+x*(m.z-T),S+x*(m.w-S))},rotationTo:function(m,x){var b=m.x*x.x+m.y*x.y+m.z*x.z;return b<-.999999?(v.copy(p).cross(m).length()<l&&v.copy(f).cross(m),v.normalize(),this.setAxisAngle(v,Math.PI)):b>.999999?this.set(0,0,0,1):(v.copy(m).cross(x),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+b,this.normalize())},setAxes:function(m,x,b){var w=g.val;return w[0]=x.x,w[3]=x.y,w[6]=x.z,w[1]=b.x,w[4]=b.y,w[7]=b.z,w[2]=-m.x,w[5]=-m.y,w[8]=-m.z,this.fromMat3(g).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(m,x){x*=.5;var b=Math.sin(x);return this.set(b*m.x,b*m.y,b*m.z,Math.cos(x))},multiply:function(m){var x=this.x,b=this.y,w=this.z,T=this.w,S=m.x,C=m.y,E=m.z,M=m.w;return this.set(x*M+T*S+b*E-w*C,b*M+T*C+w*S-x*E,w*M+T*E+x*C-b*S,T*M-x*S-b*C-w*E)},slerp:function(m,x){var b=this.x,w=this.y,T=this.z,S=this.w,C=m.x,E=m.y,M=m.z,_=m.w,O=b*C+w*E+T*M+S*_;O<0&&(O=-O,C=-C,E=-E,M=-M,_=-_);var k=1-x,P=x;if(1-O>l){var A=Math.acos(O),L=Math.sin(A);k=Math.sin((1-x)*A)/L,P=Math.sin(x*A)/L}return this.set(k*b+P*C,k*w+P*E,k*T+P*M,k*S+P*_)},invert:function(){var m=this.x,x=this.y,b=this.z,w=this.w,T=m*m+x*x+b*b+w*w,S=T?1/T:0;return this.set(-m*S,-x*S,-b*S,w*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(m){m*=.5;var x=this.x,b=this.y,w=this.z,T=this.w,S=Math.sin(m),C=Math.cos(m);return this.set(x*C+T*S,b*C+w*S,w*C-b*S,T*C-x*S)},rotateY:function(m){m*=.5;var x=this.x,b=this.y,w=this.z,T=this.w,S=Math.sin(m),C=Math.cos(m);return this.set(x*C-w*S,b*C+T*S,w*C+x*S,T*C-b*S)},rotateZ:function(m){m*=.5;var x=this.x,b=this.y,w=this.z,T=this.w,S=Math.sin(m),C=Math.cos(m);return this.set(x*C+b*S,b*C-x*S,w*C+T*S,T*C-w*S)},calculateW:function(){var m=this.x,x=this.y,b=this.z;return this.w=-Math.sqrt(1-m*m-x*x-b*b),this},setFromEuler:function(m,x){var b=m.x/2,w=m.y/2,T=m.z/2,S=Math.cos(b),C=Math.cos(w),E=Math.cos(T),M=Math.sin(b),_=Math.sin(w),O=Math.sin(T);switch(m.order){case"XYZ":this.set(M*C*E+S*_*O,S*_*E-M*C*O,S*C*O+M*_*E,S*C*E-M*_*O,x);break;case"YXZ":this.set(M*C*E+S*_*O,S*_*E-M*C*O,S*C*O-M*_*E,S*C*E+M*_*O,x);break;case"ZXY":this.set(M*C*E-S*_*O,S*_*E+M*C*O,S*C*O+M*_*E,S*C*E-M*_*O,x);break;case"ZYX":this.set(M*C*E-S*_*O,S*_*E+M*C*O,S*C*O-M*_*E,S*C*E+M*_*O,x);break;case"YZX":this.set(M*C*E+S*_*O,S*_*E+M*C*O,S*C*O-M*_*E,S*C*E-M*_*O,x);break;case"XZY":this.set(M*C*E-S*_*O,S*_*E-M*C*O,S*C*O+M*_*E,S*C*E+M*_*O,x)}return this},setFromRotationMatrix:function(m){var x,b=m.val,w=b[0],T=b[4],S=b[8],C=b[1],E=b[5],M=b[9],_=b[2],O=b[6],k=b[10],P=w+E+k;return P>0?(x=.5/Math.sqrt(P+1),this.set((O-M)*x,(S-_)*x,(C-T)*x,.25/x)):w>E&&w>k?(x=2*Math.sqrt(1+w-E-k),this.set(.25*x,(T+C)/x,(S+_)/x,(O-M)/x)):E>k?(x=2*Math.sqrt(1+E-w-k),this.set((T+C)/x,.25*x,(M+O)/x,(S-_)/x)):(x=2*Math.sqrt(1+k-w-E),this.set((S+_)/x,(M+O)/x,.25*x,(C-T)/x)),this},fromMat3:function(m){var x,b=m.val,w=b[0]+b[4]+b[8];if(w>0)x=Math.sqrt(w+1),this.w=.5*x,x=.5/x,this._x=(b[7]-b[5])*x,this._y=(b[2]-b[6])*x,this._z=(b[3]-b[1])*x;else{var T=0;b[4]>b[0]&&(T=1),b[8]>b[3*T+T]&&(T=2);var S=d[T],C=d[S];x=Math.sqrt(b[3*T+T]-b[3*S+S]-b[3*C+C]+1),c[T]=.5*x,x=.5/x,c[S]=(b[3*S+T]+b[3*T+S])*x,c[C]=(b[3*C+T]+b[3*T+C])*x,this._x=c[0],this._y=c[1],this._z=c[2],this._w=(b[3*C+S]-b[3*S+C])*x}return this.onChangeCallback(this),this}});s.exports=y},43396:(s,o,i)=>{var r=i(36383);s.exports=function(h){return h*r.RAD_TO_DEG}},74362:s=>{s.exports=function(o,i){i===void 0&&(i=1);var r=2*Math.random()*Math.PI;return o.x=Math.cos(r)*i,o.y=Math.sin(r)*i,o}},60706:s=>{s.exports=function(o,i){i===void 0&&(i=1);var r=2*Math.random()*Math.PI,h=2*Math.random()-1,a=Math.sqrt(1-h*h)*i;return o.x=Math.cos(r)*a,o.y=Math.sin(r)*a,o.z=h*i,o}},67421:s=>{s.exports=function(o,i){return i===void 0&&(i=1),o.x=(2*Math.random()-1)*i,o.y=(2*Math.random()-1)*i,o.z=(2*Math.random()-1)*i,o.w=(2*Math.random()-1)*i,o}},36305:s=>{s.exports=function(o,i){var r=o.x,h=o.y;return o.x=r*Math.cos(i)-h*Math.sin(i),o.y=r*Math.sin(i)+h*Math.cos(i),o}},11520:s=>{s.exports=function(o,i,r,h){var a=Math.cos(h),u=Math.sin(h),l=o.x-i,d=o.y-r;return o.x=l*a-d*u+i,o.y=l*u+d*a+r,o}},1163:s=>{s.exports=function(o,i,r,h,a){var u=h+Math.atan2(o.y-r,o.x-i);return o.x=i+a*Math.cos(u),o.y=r+a*Math.sin(u),o}},70336:s=>{s.exports=function(o,i,r,h,a){return o.x=i+a*Math.cos(h),o.y=r+a*Math.sin(h),o}},72678:(s,o,i)=>{var r=i(25836),h=i(37867),a=i(15746),u=new h,l=new a,d=new r;s.exports=function(c,p,f){return l.setAxisAngle(p,f),u.fromRotationTranslation(l,d.set(0,0,0)),c.transformMat4(u)}},2284:s=>{s.exports=function(o){return o>0?Math.ceil(o):Math.floor(o)}},41013:s=>{s.exports=function(o,i,r){i===void 0&&(i=0),r===void 0&&(r=10);var h=Math.pow(r,-i);return Math.round(o*h)/h}},16922:s=>{s.exports=function(o,i,r,h){i===void 0&&(i=1),r===void 0&&(r=1),h===void 0&&(h=1),h*=Math.PI/o;for(var a=[],u=[],l=0;l<o;l++)i+=(r-=i*h)*h,a[l]=r,u[l]=i;return{sin:u,cos:a,length:o}}},7602:s=>{s.exports=function(o,i,r){return o<=i?0:o>=r?1:(o=(o-i)/(r-i))*o*(3-2*o)}},54261:s=>{s.exports=function(o,i,r){return(o=Math.max(0,Math.min(1,(o-i)/(r-i))))*o*o*(o*(6*o-15)+10)}},44408:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l){l===void 0&&(l=new r);var d=0,c=0;return h>0&&h<=a*u&&(d=h>a-1?h-(c=Math.floor(h/a))*a:h),l.set(d,c)}},85955:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d,c,p,f){f===void 0&&(f=new r);var v=Math.sin(d),g=Math.cos(d),y=g*c,m=v*c,x=-v*p,b=g*p,w=1/(y*b+x*-m);return f.x=b*w*h+-x*w*a+(l*x-u*b)*w,f.y=y*w*a+-m*w*h+(-l*y+u*m)*w,f}},26099:(s,o,i)=>{var r=i(83419),h=i(43855),a=new r({initialize:function(u,l){this.x=0,this.y=0,typeof u=="object"?(this.x=u.x||0,this.y=u.y||0):(l===void 0&&(l=u),this.x=u||0,this.y=l||0)},clone:function(){return new a(this.x,this.y)},copy:function(u){return this.x=u.x||0,this.y=u.y||0,this},setFromObject:function(u){return this.x=u.x||0,this.y=u.y||0,this},set:function(u,l){return l===void 0&&(l=u),this.x=u,this.y=l,this},setTo:function(u,l){return this.set(u,l)},setToPolar:function(u,l){return l==null&&(l=1),this.x=Math.cos(u)*l,this.y=Math.sin(u)*l,this},equals:function(u){return this.x===u.x&&this.y===u.y},fuzzyEquals:function(u,l){return h(this.x,u.x,l)&&h(this.y,u.y,l)},angle:function(){var u=Math.atan2(this.y,this.x);return u<0&&(u+=2*Math.PI),u},setAngle:function(u){return this.setToPolar(u,this.length())},add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.x-=u.x,this.y-=u.y,this},multiply:function(u){return this.x*=u.x,this.y*=u.y,this},scale:function(u){return isFinite(u)?(this.x*=u,this.y*=u):(this.x=0,this.y=0),this},divide:function(u){return this.x/=u.x,this.y/=u.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(u){var l=u.x-this.x,d=u.y-this.y;return Math.sqrt(l*l+d*d)},distanceSq:function(u){var l=u.x-this.x,d=u.y-this.y;return l*l+d*d},length:function(){var u=this.x,l=this.y;return Math.sqrt(u*u+l*l)},setLength:function(u){return this.normalize().scale(u)},lengthSq:function(){var u=this.x,l=this.y;return u*u+l*l},normalize:function(){var u=this.x,l=this.y,d=u*u+l*l;return d>0&&(d=1/Math.sqrt(d),this.x=u*d,this.y=l*d),this},normalizeRightHand:function(){var u=this.x;return this.x=-1*this.y,this.y=u,this},normalizeLeftHand:function(){var u=this.x;return this.x=this.y,this.y=-1*u,this},dot:function(u){return this.x*u.x+this.y*u.y},cross:function(u){return this.x*u.y-this.y*u.x},lerp:function(u,l){l===void 0&&(l=0);var d=this.x,c=this.y;return this.x=d+l*(u.x-d),this.y=c+l*(u.y-c),this},transformMat3:function(u){var l=this.x,d=this.y,c=u.val;return this.x=c[0]*l+c[3]*d+c[6],this.y=c[1]*l+c[4]*d+c[7],this},transformMat4:function(u){var l=this.x,d=this.y,c=u.val;return this.x=c[0]*l+c[4]*d+c[12],this.y=c[1]*l+c[5]*d+c[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(u){var l=this.length();return l&&l>u&&this.scale(u/l),this},reflect:function(u){return u=u.clone().normalize(),this.subtract(u.scale(2*this.dot(u)))},mirror:function(u){return this.reflect(u).negate()},rotate:function(u){var l=Math.cos(u),d=Math.sin(u);return this.set(l*this.x-d*this.y,d*this.x+l*this.y)},project:function(u){var l=this.dot(u)/u.dot(u);return this.copy(u).scale(l)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),s.exports=a},25836:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u){this.x=0,this.y=0,this.z=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=a||0,this.z=u||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(h){return this.x=Math.min(this.x,h.x),this.y=Math.min(this.y,h.y),this.z=Math.min(this.z,h.z),this},max:function(h){return this.x=Math.max(this.x,h.x),this.y=Math.max(this.y,h.y),this.z=Math.max(this.z,h.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(h,a){return this.x=h.x+a.x,this.y=h.y+a.y,this.z=h.z+a.z,this},crossVectors:function(h,a){var u=h.x,l=h.y,d=h.z,c=a.x,p=a.y,f=a.z;return this.x=l*f-d*p,this.y=d*c-u*f,this.z=u*p-l*c,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this},set:function(h,a,u){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0):(this.x=h||0,this.y=a||0,this.z=u||0),this},setFromMatrixPosition:function(h){return this.fromArray(h.val,12)},setFromMatrixColumn:function(h,a){return this.fromArray(h.val,4*a)},fromArray:function(h,a){return a===void 0&&(a=0),this.x=h[a],this.y=h[a+1],this.z=h[a+2],this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this},addScalar:function(h){return this.x+=h,this.y+=h,this.z+=h,this},addScale:function(h,a){return this.x+=h.x*a,this.y+=h.y*a,this.z+=h.z*a||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this},scale:function(h){return isFinite(h)?(this.x*=h,this.y*=h,this.z*=h):(this.x=0,this.y=0,this.z=0),this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(h){var a=h.x-this.x,u=h.y-this.y,l=h.z-this.z||0;return Math.sqrt(a*a+u*u+l*l)},distanceSq:function(h){var a=h.x-this.x,u=h.y-this.y,l=h.z-this.z||0;return a*a+u*u+l*l},length:function(){var h=this.x,a=this.y,u=this.z;return Math.sqrt(h*h+a*a+u*u)},lengthSq:function(){var h=this.x,a=this.y,u=this.z;return h*h+a*a+u*u},normalize:function(){var h=this.x,a=this.y,u=this.z,l=h*h+a*a+u*u;return l>0&&(l=1/Math.sqrt(l),this.x=h*l,this.y=a*l,this.z=u*l),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z},cross:function(h){var a=this.x,u=this.y,l=this.z,d=h.x,c=h.y,p=h.z;return this.x=u*p-l*c,this.y=l*d-a*p,this.z=a*c-u*d,this},lerp:function(h,a){a===void 0&&(a=0);var u=this.x,l=this.y,d=this.z;return this.x=u+a*(h.x-u),this.y=l+a*(h.y-l),this.z=d+a*(h.z-d),this},applyMatrix3:function(h){var a=this.x,u=this.y,l=this.z,d=h.val;return this.x=d[0]*a+d[3]*u+d[6]*l,this.y=d[1]*a+d[4]*u+d[7]*l,this.z=d[2]*a+d[5]*u+d[8]*l,this},applyMatrix4:function(h){var a=this.x,u=this.y,l=this.z,d=h.val,c=1/(d[3]*a+d[7]*u+d[11]*l+d[15]);return this.x=(d[0]*a+d[4]*u+d[8]*l+d[12])*c,this.y=(d[1]*a+d[5]*u+d[9]*l+d[13])*c,this.z=(d[2]*a+d[6]*u+d[10]*l+d[14])*c,this},transformMat3:function(h){var a=this.x,u=this.y,l=this.z,d=h.val;return this.x=a*d[0]+u*d[3]+l*d[6],this.y=a*d[1]+u*d[4]+l*d[7],this.z=a*d[2]+u*d[5]+l*d[8],this},transformMat4:function(h){var a=this.x,u=this.y,l=this.z,d=h.val;return this.x=d[0]*a+d[4]*u+d[8]*l+d[12],this.y=d[1]*a+d[5]*u+d[9]*l+d[13],this.z=d[2]*a+d[6]*u+d[10]*l+d[14],this},transformCoordinates:function(h){var a=this.x,u=this.y,l=this.z,d=h.val,c=a*d[0]+u*d[4]+l*d[8]+d[12],p=a*d[1]+u*d[5]+l*d[9]+d[13],f=a*d[2]+u*d[6]+l*d[10]+d[14],v=a*d[3]+u*d[7]+l*d[11]+d[15];return this.x=c/v,this.y=p/v,this.z=f/v,this},transformQuat:function(h){var a=this.x,u=this.y,l=this.z,d=h.x,c=h.y,p=h.z,f=h.w,v=f*a+c*l-p*u,g=f*u+p*a-d*l,y=f*l+d*u-c*a,m=-d*a-c*u-p*l;return this.x=v*f+m*-d+g*-p-y*-c,this.y=g*f+m*-c+y*-d-v*-p,this.z=y*f+m*-p+v*-c-g*-d,this},project:function(h){var a=this.x,u=this.y,l=this.z,d=h.val,c=d[0],p=d[1],f=d[2],v=d[3],g=d[4],y=d[5],m=d[6],x=d[7],b=d[8],w=d[9],T=d[10],S=d[11],C=d[12],E=d[13],M=d[14],_=1/(a*v+u*x+l*S+d[15]);return this.x=(a*c+u*g+l*b+C)*_,this.y=(a*p+u*y+l*w+E)*_,this.z=(a*f+u*m+l*T+M)*_,this},projectViewMatrix:function(h,a){return this.applyMatrix4(h).applyMatrix4(a)},unprojectViewMatrix:function(h,a){return this.applyMatrix4(h).applyMatrix4(a)},unproject:function(h,a){var u=h.x,l=h.y,d=h.z,c=h.w,p=this.x-u,f=c-this.y-1-l,v=this.z;return this.x=2*p/d-1,this.y=2*f/c-1,this.z=2*v-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),s.exports=r},61369:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l){this.x=0,this.y=0,this.z=0,this.w=0,typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=a||0,this.z=u||0,this.w=l||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(h){return this.x=h.x,this.y=h.y,this.z=h.z||0,this.w=h.w||0,this},equals:function(h){return this.x===h.x&&this.y===h.y&&this.z===h.z&&this.w===h.w},set:function(h,a,u,l){return typeof h=="object"?(this.x=h.x||0,this.y=h.y||0,this.z=h.z||0,this.w=h.w||0):(this.x=h||0,this.y=a||0,this.z=u||0,this.w=l||0),this},add:function(h){return this.x+=h.x,this.y+=h.y,this.z+=h.z||0,this.w+=h.w||0,this},subtract:function(h){return this.x-=h.x,this.y-=h.y,this.z-=h.z||0,this.w-=h.w||0,this},scale:function(h){return this.x*=h,this.y*=h,this.z*=h,this.w*=h,this},length:function(){var h=this.x,a=this.y,u=this.z,l=this.w;return Math.sqrt(h*h+a*a+u*u+l*l)},lengthSq:function(){var h=this.x,a=this.y,u=this.z,l=this.w;return h*h+a*a+u*u+l*l},normalize:function(){var h=this.x,a=this.y,u=this.z,l=this.w,d=h*h+a*a+u*u+l*l;return d>0&&(d=1/Math.sqrt(d),this.x=h*d,this.y=a*d,this.z=u*d,this.w=l*d),this},dot:function(h){return this.x*h.x+this.y*h.y+this.z*h.z+this.w*h.w},lerp:function(h,a){a===void 0&&(a=0);var u=this.x,l=this.y,d=this.z,c=this.w;return this.x=u+a*(h.x-u),this.y=l+a*(h.y-l),this.z=d+a*(h.z-d),this.w=c+a*(h.w-c),this},multiply:function(h){return this.x*=h.x,this.y*=h.y,this.z*=h.z||1,this.w*=h.w||1,this},divide:function(h){return this.x/=h.x,this.y/=h.y,this.z/=h.z||1,this.w/=h.w||1,this},distance:function(h){var a=h.x-this.x,u=h.y-this.y,l=h.z-this.z||0,d=h.w-this.w||0;return Math.sqrt(a*a+u*u+l*l+d*d)},distanceSq:function(h){var a=h.x-this.x,u=h.y-this.y,l=h.z-this.z||0,d=h.w-this.w||0;return a*a+u*u+l*l+d*d},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(h){var a=this.x,u=this.y,l=this.z,d=this.w,c=h.val;return this.x=c[0]*a+c[4]*u+c[8]*l+c[12]*d,this.y=c[1]*a+c[5]*u+c[9]*l+c[13]*d,this.z=c[2]*a+c[6]*u+c[10]*l+c[14]*d,this.w=c[3]*a+c[7]*u+c[11]*l+c[15]*d,this},transformQuat:function(h){var a=this.x,u=this.y,l=this.z,d=h.x,c=h.y,p=h.z,f=h.w,v=f*a+c*l-p*u,g=f*u+p*a-d*l,y=f*l+d*u-c*a,m=-d*a-c*u-p*l;return this.x=v*f+m*-d+g*-p-y*-c,this.y=g*f+m*-c+y*-d-v*-p,this.z=y*f+m*-p+v*-c-g*-d,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,s.exports=r},60417:s=>{s.exports=function(o,i,r){return Math.abs(o-i)<=r}},15994:s=>{s.exports=function(o,i,r){var h=r-i;return i+((o-i)%h+h)%h}},31040:s=>{s.exports=function(o,i,r,h){return Math.atan2(h-i,r-o)}},55495:s=>{s.exports=function(o,i){return Math.atan2(i.y-o.y,i.x-o.x)}},128:s=>{s.exports=function(o,i){return Math.atan2(i.x-o.x,i.y-o.y)}},41273:s=>{s.exports=function(o,i,r,h){return Math.atan2(r-o,h-i)}},1432:(s,o,i)=>{var r=i(36383);s.exports=function(h){return h>Math.PI&&(h-=r.PI2),Math.abs(((h+r.TAU)%r.PI2-r.PI2)%r.PI2)}},12407:s=>{s.exports=function(o){return(o%=2*Math.PI)>=0?o:o+2*Math.PI}},53993:(s,o,i)=>{var r=i(99472);s.exports=function(){return r(-Math.PI,Math.PI)}},86564:(s,o,i)=>{var r=i(99472);s.exports=function(){return r(-180,180)}},90154:(s,o,i)=>{var r=i(12407);s.exports=function(h){return r(h+Math.PI)}},48736:(s,o,i)=>{var r=i(36383);s.exports=function(h,a,u){return u===void 0&&(u=.05),h===a||(Math.abs(a-h)<=u||Math.abs(a-h)>=r.PI2-u?h=a:(Math.abs(a-h)>Math.PI&&(a<h?a+=r.PI2:a-=r.PI2),a>h?h+=u:a<h&&(h-=u))),h}},61430:s=>{s.exports=function(o,i){var r=i-o;return r===0?0:r-360*Math.floor((r- -180)/360)}},86554:(s,o,i)=>{var r=i(15994);s.exports=function(h){return r(h,-Math.PI,Math.PI)}},30954:(s,o,i)=>{var r=i(15994);s.exports=function(h){return r(h,-180,180)}},25588:(s,o,i)=>{s.exports={Between:i(31040),BetweenPoints:i(55495),BetweenPointsY:i(128),BetweenY:i(41273),CounterClockwise:i(1432),Normalize:i(12407),Random:i(53993),RandomDegrees:i(86564),Reverse:i(90154),RotateTo:i(48736),ShortestBetween:i(61430),Wrap:i(86554),WrapDegrees:i(30954)}},36383:s=>{var o={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};s.exports=o},20339:s=>{s.exports=function(o,i,r,h){var a=o-r,u=i-h;return Math.sqrt(a*a+u*u)}},52816:s=>{s.exports=function(o,i){var r=o.x-i.x,h=o.y-i.y;return Math.sqrt(r*r+h*h)}},64559:s=>{s.exports=function(o,i){var r=o.x-i.x,h=o.y-i.y;return r*r+h*h}},82340:s=>{s.exports=function(o,i,r,h){return Math.max(Math.abs(o-r),Math.abs(i-h))}},14390:s=>{s.exports=function(o,i,r,h,a){return a===void 0&&(a=2),Math.sqrt(Math.pow(r-o,a)+Math.pow(h-i,a))}},2243:s=>{s.exports=function(o,i,r,h){return Math.abs(o-r)+Math.abs(i-h)}},89774:s=>{s.exports=function(o,i,r,h){var a=o-r,u=i-h;return a*a+u*u}},50994:(s,o,i)=>{s.exports={Between:i(20339),BetweenPoints:i(52816),BetweenPointsSquared:i(64559),Chebyshev:i(82340),Power:i(14390),Snake:i(2243),Squared:i(89774)}},62640:(s,o,i)=>{var r=i(54178),h=i(41521),a=i(79980),u=i(85433),l=i(99140),d=i(48857),c=i(81596),p=i(59133),f=i(98516),v=i(35248),g=i(82500),y=i(49752);s.exports={Power0:c,Power1:p.Out,Power2:u.Out,Power3:f.Out,Power4:v.Out,Linear:c,Quad:p.Out,Cubic:u.Out,Quart:f.Out,Quint:v.Out,Sine:g.Out,Expo:d.Out,Circ:a.Out,Elastic:l.Out,Back:r.Out,Bounce:h.Out,Stepped:y,"Quad.easeIn":p.In,"Cubic.easeIn":u.In,"Quart.easeIn":f.In,"Quint.easeIn":v.In,"Sine.easeIn":g.In,"Expo.easeIn":d.In,"Circ.easeIn":a.In,"Elastic.easeIn":l.In,"Back.easeIn":r.In,"Bounce.easeIn":h.In,"Quad.easeOut":p.Out,"Cubic.easeOut":u.Out,"Quart.easeOut":f.Out,"Quint.easeOut":v.Out,"Sine.easeOut":g.Out,"Expo.easeOut":d.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":l.Out,"Back.easeOut":r.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":p.InOut,"Cubic.easeInOut":u.InOut,"Quart.easeInOut":f.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":g.InOut,"Expo.easeInOut":d.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":l.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":h.InOut}},1639:s=>{s.exports=function(o,i){return i===void 0&&(i=1.70158),o*o*((i+1)*o-i)}},50099:s=>{s.exports=function(o,i){i===void 0&&(i=1.70158);var r=1.525*i;return(o*=2)<1?o*o*((r+1)*o-r)*.5:.5*((o-=2)*o*((r+1)*o+r)+2)}},41286:s=>{s.exports=function(o,i){return i===void 0&&(i=1.70158),--o*o*((i+1)*o+i)+1}},54178:(s,o,i)=>{s.exports={In:i(1639),Out:i(41286),InOut:i(50099)}},59590:s=>{s.exports=function(o){return(o=1-o)<.36363636363636365?1-7.5625*o*o:o<.7272727272727273?1-(7.5625*(o-=.5454545454545454)*o+.75):o<.9090909090909091?1-(7.5625*(o-=.8181818181818182)*o+.9375):1-(7.5625*(o-=.9545454545454546)*o+.984375)}},41788:s=>{s.exports=function(o){var i=!1;return o<.5?(o=1-2*o,i=!0):o=2*o-1,o<.36363636363636365?o*=7.5625*o:o=o<.7272727272727273?7.5625*(o-=.5454545454545454)*o+.75:o<.9090909090909091?7.5625*(o-=.8181818181818182)*o+.9375:7.5625*(o-=.9545454545454546)*o+.984375,i?.5*(1-o):.5*o+.5}},69905:s=>{s.exports=function(o){return o<.36363636363636365?7.5625*o*o:o<.7272727272727273?7.5625*(o-=.5454545454545454)*o+.75:o<.9090909090909091?7.5625*(o-=.8181818181818182)*o+.9375:7.5625*(o-=.9545454545454546)*o+.984375}},41521:(s,o,i)=>{s.exports={In:i(59590),Out:i(69905),InOut:i(41788)}},91861:s=>{s.exports=function(o){return 1-Math.sqrt(1-o*o)}},4177:s=>{s.exports=function(o){return(o*=2)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1)}},57512:s=>{s.exports=function(o){return Math.sqrt(1- --o*o)}},79980:(s,o,i)=>{s.exports={In:i(91861),Out:i(57512),InOut:i(4177)}},51150:s=>{s.exports=function(o){return o*o*o}},82820:s=>{s.exports=function(o){return(o*=2)<1?.5*o*o*o:.5*((o-=2)*o*o+2)}},35033:s=>{s.exports=function(o){return--o*o*o+1}},85433:(s,o,i)=>{s.exports={In:i(51150),Out:i(35033),InOut:i(82820)}},69965:s=>{s.exports=function(o,i,r){if(i===void 0&&(i=.1),r===void 0&&(r=.1),o===0)return 0;if(o===1)return 1;var h=r/4;return i<1?i=1:h=r*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/r)}},50665:s=>{s.exports=function(o,i,r){if(i===void 0&&(i=.1),r===void 0&&(r=.1),o===0)return 0;if(o===1)return 1;var h=r/4;return i<1?i=1:h=r*Math.asin(1/i)/(2*Math.PI),(o*=2)<1?i*Math.pow(2,10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/r)*-.5:i*Math.pow(2,-10*(o-=1))*Math.sin((o-h)*(2*Math.PI)/r)*.5+1}},7744:s=>{s.exports=function(o,i,r){if(i===void 0&&(i=.1),r===void 0&&(r=.1),o===0)return 0;if(o===1)return 1;var h=r/4;return i<1?i=1:h=r*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*o)*Math.sin((o-h)*(2*Math.PI)/r)+1}},99140:(s,o,i)=>{s.exports={In:i(69965),Out:i(7744),InOut:i(50665)}},24590:s=>{s.exports=function(o){return Math.pow(2,10*(o-1))-.001}},87844:s=>{s.exports=function(o){return(o*=2)<1?.5*Math.pow(2,10*(o-1)):.5*(2-Math.pow(2,-10*(o-1)))}},89433:s=>{s.exports=function(o){return 1-Math.pow(2,-10*o)}},48857:(s,o,i)=>{s.exports={In:i(24590),Out:i(89433),InOut:i(87844)}},48820:(s,o,i)=>{s.exports={Back:i(54178),Bounce:i(41521),Circular:i(79980),Cubic:i(85433),Elastic:i(99140),Expo:i(48857),Linear:i(81596),Quadratic:i(59133),Quartic:i(98516),Quintic:i(35248),Sine:i(82500),Stepped:i(49752)}},7147:s=>{s.exports=function(o){return o}},81596:(s,o,i)=>{s.exports=i(7147)},34826:s=>{s.exports=function(o){return o*o}},20544:s=>{s.exports=function(o){return(o*=2)<1?.5*o*o:-.5*(--o*(o-2)-1)}},92029:s=>{s.exports=function(o){return o*(2-o)}},59133:(s,o,i)=>{s.exports={In:i(34826),Out:i(92029),InOut:i(20544)}},64413:s=>{s.exports=function(o){return o*o*o*o}},78137:s=>{s.exports=function(o){return(o*=2)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2)}},45840:s=>{s.exports=function(o){return 1- --o*o*o*o}},98516:(s,o,i)=>{s.exports={In:i(64413),Out:i(45840),InOut:i(78137)}},87745:s=>{s.exports=function(o){return o*o*o*o*o}},16509:s=>{s.exports=function(o){return(o*=2)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2)}},17868:s=>{s.exports=function(o){return--o*o*o*o*o+1}},35248:(s,o,i)=>{s.exports={In:i(87745),Out:i(17868),InOut:i(16509)}},80461:s=>{s.exports=function(o){return o===0?0:o===1?1:1-Math.cos(o*Math.PI/2)}},34025:s=>{s.exports=function(o){return o===0?0:o===1?1:.5*(1-Math.cos(Math.PI*o))}},52768:s=>{s.exports=function(o){return o===0?0:o===1?1:Math.sin(o*Math.PI/2)}},82500:(s,o,i)=>{s.exports={In:i(80461),Out:i(52768),InOut:i(34025)}},72251:s=>{s.exports=function(o,i){return i===void 0&&(i=1),o<=0?0:o>=1?1:1/i*(1+(i*o|0))}},49752:(s,o,i)=>{s.exports=i(72251)},75698:s=>{s.exports=function(o,i){return i===void 0&&(i=1e-4),Math.ceil(o-i)}},43855:s=>{s.exports=function(o,i,r){return r===void 0&&(r=1e-4),Math.abs(o-i)<r}},25777:s=>{s.exports=function(o,i){return i===void 0&&(i=1e-4),Math.floor(o+i)}},5470:s=>{s.exports=function(o,i,r){return r===void 0&&(r=1e-4),o>i-r}},94977:s=>{s.exports=function(o,i,r){return r===void 0&&(r=1e-4),o<i+r}},48379:(s,o,i)=>{s.exports={Ceil:i(75698),Equal:i(43855),Floor:i(25777),GreaterThan:i(5470),LessThan:i(94977)}},75508:(s,o,i)=>{var r=i(36383),h=i(79291),a={Angle:i(25588),Distance:i(50994),Easing:i(48820),Fuzzy:i(48379),Interpolation:i(38289),Pow2:i(49001),Snap:i(73697),RandomDataGenerator:i(28453),Average:i(53307),Bernstein:i(85710),Between:i(30976),CatmullRom:i(87842),CeilTo:i(26302),Clamp:i(45319),DegToRad:i(39506),Difference:i(61241),Euler:i(38857),Factorial:i(6411),FloatBetween:i(99472),FloorTo:i(77623),FromPercent:i(62945),GetSpeed:i(38265),IsEven:i(78702),IsEvenStrict:i(94883),Linear:i(28915),LinearXY:i(94908),MaxAdd:i(86883),Median:i(50040),MinSub:i(37204),Percent:i(65201),RadToDeg:i(43396),RandomXY:i(74362),RandomXYZ:i(60706),RandomXYZW:i(67421),Rotate:i(36305),RotateAround:i(11520),RotateAroundDistance:i(1163),RotateTo:i(70336),RoundAwayFromZero:i(2284),RoundTo:i(41013),SinCosTableGenerator:i(16922),SmootherStep:i(54261),SmoothStep:i(7602),ToXY:i(44408),TransformXY:i(85955),Within:i(60417),Wrap:i(15994),Vector2:i(26099),Vector3:i(25836),Vector4:i(61369),Matrix3:i(94434),Matrix4:i(37867),Quaternion:i(15746),RotateVec3:i(72678)};a=h(!1,a,r),s.exports=a},89318:(s,o,i)=>{var r=i(85710);s.exports=function(h,a){for(var u=0,l=h.length-1,d=0;d<=l;d++)u+=Math.pow(1-a,l-d)*Math.pow(a,d)*h[d]*r(l,d);return u}},77259:(s,o,i)=>{var r=i(87842);s.exports=function(h,a){var u=h.length-1,l=u*a,d=Math.floor(l);return h[0]===h[u]?(a<0&&(d=Math.floor(l=u*(1+a))),r(l-d,h[(d-1+u)%u],h[d],h[(d+1)%u],h[(d+2)%u])):a<0?h[0]-(r(-l,h[0],h[0],h[1],h[1])-h[0]):a>1?h[u]-(r(l-u,h[u],h[u],h[u-1],h[u-1])-h[u]):r(l-d,h[d?d-1:0],h[d],h[u<d+1?u:d+1],h[u<d+2?u:d+2])}},36316:s=>{s.exports=function(o,i,r,h,a){return function(u,l){var d=1-u;return d*d*d*l}(o,i)+function(u,l){var d=1-u;return 3*d*d*u*l}(o,r)+function(u,l){return 3*(1-u)*u*u*l}(o,h)+function(u,l){return u*u*u*l}(o,a)}},28392:(s,o,i)=>{var r=i(28915);s.exports=function(h,a){var u=h.length-1,l=u*a,d=Math.floor(l);return a<0?r(h[0],h[1],l):a>1?r(h[u],h[u-1],u-l):r(h[d],h[d+1>u?u:d+1],l-d)}},32112:s=>{s.exports=function(o,i,r,h){return function(a,u){var l=1-a;return l*l*u}(o,i)+function(a,u){return 2*(1-a)*a*u}(o,r)+function(a,u){return a*a*u}(o,h)}},47235:(s,o,i)=>{var r=i(7602);s.exports=function(h,a,u){return a+(u-a)*r(h,0,1)}},50178:(s,o,i)=>{var r=i(54261);s.exports=function(h,a,u){return a+(u-a)*r(h,0,1)}},38289:(s,o,i)=>{s.exports={Bezier:i(89318),CatmullRom:i(77259),CubicBezier:i(36316),Linear:i(28392),QuadraticBezier:i(32112),SmoothStep:i(47235),SmootherStep:i(50178)}},98439:s=>{s.exports=function(o){var i=Math.log(o)/.6931471805599453;return 1<<Math.ceil(i)}},50030:s=>{s.exports=function(o,i){return o>0&&!(o&o-1)&&i>0&&!(i&i-1)}},81230:s=>{s.exports=function(o){return o>0&&!(o&o-1)}},49001:(s,o,i)=>{s.exports={GetNext:i(98439),IsSize:i(50030),IsValue:i(81230)}},28453:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){h===void 0&&(h=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],h&&this.init(h)},rnd:function(){var h=2091639*this.s0+23283064365386963e-26*this.c;return this.c=0|h,this.s0=this.s1,this.s1=this.s2,this.s2=h-this.c,this.s2},hash:function(h){var a,u=this.n;h=h.toString();for(var l=0;l<h.length;l++)a=.02519603282416938*(u+=h.charCodeAt(l)),a-=u=a>>>0,u=(a*=u)>>>0,u+=4294967296*(a-=u);return this.n=u,23283064365386963e-26*(u>>>0)},init:function(h){typeof h=="string"?this.state(h):this.sow(h)},sow:function(h){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,h)for(var a=0;a<h.length&&h[a]!=null;a++){var u=h[a];this.s0-=this.hash(u),this.s0+=~~(this.s0<0),this.s1-=this.hash(u),this.s1+=~~(this.s1<0),this.s2-=this.hash(u),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(h,a){return Math.floor(this.realInRange(0,a-h+1)+h)},between:function(h,a){return Math.floor(this.realInRange(0,a-h+1)+h)},realInRange:function(h,a){return this.frac()*(a-h)+h},normal:function(){return 1-2*this.frac()},uuid:function(){var h="",a="";for(a=h="";h++<36;a+=~h%5|3*h&4?(15^h?8^this.frac()*(20^h?16:4):4).toString(16):"-");return a},pick:function(h){return h[this.integerInRange(0,h.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(h){return h[~~(Math.pow(this.frac(),2)*(h.length-.5)+.5)]},timestamp:function(h,a){return this.realInRange(h||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(h){return typeof h=="string"&&h.match(/^!rnd/)&&(h=h.split(","),this.c=parseFloat(h[1]),this.s0=parseFloat(h[2]),this.s1=parseFloat(h[3]),this.s2=parseFloat(h[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(h){for(var a=h.length-1;a>0;a--){var u=Math.floor(this.frac()*(a+1)),l=h[u];h[u]=h[a],h[a]=l}return h}});s.exports=r},63448:s=>{s.exports=function(o,i,r,h){return r===void 0&&(r=0),i===0?o:(o-=r,o=i*Math.ceil(o/i),h?(r+o)/i:r+o)}},56583:s=>{s.exports=function(o,i,r,h){return r===void 0&&(r=0),i===0?o:(o-=r,o=i*Math.floor(o/i),h?(r+o)/i:r+o)}},77720:s=>{s.exports=function(o,i,r,h){return r===void 0&&(r=0),i===0?o:(o-=r,o=i*Math.round(o/i),h?(r+o)/i:r+o)}},73697:(s,o,i)=>{s.exports={Ceil:i(63448),Floor:i(56583),To:i(77720)}},85454:(s,o,i)=>{i(63595);var r=i(8054),h=i(79291),a={Actions:i(61061),Animations:i(60421),BlendModes:i(10312),Cache:i(83388),Cameras:i(26638),Core:i(42857),Class:i(83419),Create:i(15822),Curves:i(25410),Data:i(44965),Display:i(27460),DOM:i(84902),Events:i(93055),FX:i(66064),Game:i(50127),GameObjects:i(77856),Geom:i(55738),Input:i(14350),Loader:i(57777),Math:i(75508),Physics:i(44563),Plugins:i(18922),Renderer:i(36909),Scale:i(93364),ScaleModes:i(29795),Scene:i(97482),Scenes:i(62194),Structs:i(41392),Textures:i(27458),Tilemaps:i(62501),Time:i(90291),Tweens:i(43066),Utils:i(91799)};a.Sound=i(23717),a=h(!1,a,r),s.exports=a,i.g.Phaser=a},71289:(s,o,i)=>{var r=i(83419),h=i(92209),a=i(88571),u=new r({Extends:a,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Collision,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(l,d,c,p,f){a.call(this,l,d,c,p,f),this.body=null}});s.exports=u},86689:(s,o,i)=>{var r=i(83419),h=i(39506),a=i(20339),u=i(89774),l=i(66022),d=i(95540),c=i(46975),p=i(72441),f=i(47956),v=i(37277),g=i(44594),y=i(26099),m=i(82248),x=new r({initialize:function(b){this.scene=b,this.systems=b.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,b.sys.events.once(g.BOOT,this.boot,this),b.sys.events.on(g.START,this.start,this)},boot:function(){this.world=new m(this.scene,this.config),this.add=new l(this.world),this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new m(this.scene,this.config),this.add=new l(this.world));var b=this.systems.events;d(this.config,"customUpdate",!1)||b.on(g.UPDATE,this.world.update,this.world),b.on(g.POST_UPDATE,this.world.postUpdate,this.world),b.once(g.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(g.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(g.UPDATE,this.world.update,this.world)},getConfig:function(){var b=this.systems.game.config.physics,w=this.systems.settings.physics;return c(d(w,"arcade",{}),d(b,"arcade",{}))},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(b,w,T,S,C){return T===void 0&&(T=null),S===void 0&&(S=null),C===void 0&&(C=T),this.world.collideObjects(b,w,T,S,C,!0)},collide:function(b,w,T,S,C){return T===void 0&&(T=null),S===void 0&&(S=null),C===void 0&&(C=T),this.world.collideObjects(b,w,T,S,C,!1)},collideTiles:function(b,w,T,S,C){return this.world.collideTiles(b,w,T,S,C)},overlapTiles:function(b,w,T,S,C){return this.world.overlapTiles(b,w,T,S,C)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(b,w,T,S,C,E){S===void 0&&(S=60);var M=Math.atan2(T-b.y,w-b.x);return b.body.acceleration.setToPolar(M,S),C!==void 0&&E!==void 0&&b.body.maxVelocity.set(C,E),M},accelerateToObject:function(b,w,T,S,C){return this.accelerateTo(b,w.x,w.y,T,S,C)},closest:function(b,w){w||(w=this.world.bodies.entries);for(var T=Number.MAX_VALUE,S=null,C=b.x,E=b.y,M=w.length,_=0;_<M;_++){var O=w[_],k=O.body||O;if(b!==O&&b!==k&&b!==k.gameObject&&b!==k.center){var P=u(C,E,k.center.x,k.center.y);P<T&&(S=O,T=P)}}return S},furthest:function(b,w){w||(w=this.world.bodies.entries);for(var T=-1,S=null,C=b.x,E=b.y,M=w.length,_=0;_<M;_++){var O=w[_],k=O.body||O;if(b!==O&&b!==k&&b!==k.gameObject&&b!==k.center){var P=u(C,E,k.center.x,k.center.y);P>T&&(S=O,T=P)}}return S},moveTo:function(b,w,T,S,C){S===void 0&&(S=60),C===void 0&&(C=0);var E=Math.atan2(T-b.y,w-b.x);return C>0&&(S=a(b.x,b.y,w,T)/(C/1e3)),b.body.velocity.setToPolar(E,S),E},moveToObject:function(b,w,T,S){return this.moveTo(b,w.x,w.y,T,S)},velocityFromAngle:function(b,w,T){return w===void 0&&(w=60),T===void 0&&(T=new y),T.setToPolar(h(b),w)},velocityFromRotation:function(b,w,T){return w===void 0&&(w=60),T===void 0&&(T=new y),T.setToPolar(b,w)},overlapRect:function(b,w,T,S,C,E){return f(this.world,b,w,T,S,C,E)},overlapCirc:function(b,w,T,S,C){return p(this.world,b,w,T,S,C)},shutdown:function(){if(this.world){var b=this.systems.events;b.off(g.UPDATE,this.world.update,this.world),b.off(g.POST_UPDATE,this.world.postUpdate,this.world),b.off(g.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(g.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",x,"arcadePhysics"),s.exports=x},13759:(s,o,i)=>{var r=i(83419),h=i(92209),a=i(68287),u=new r({Extends:a,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Collision,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(l,d,c,p,f){a.call(this,l,d,c,p,f),this.body=null}});s.exports=u},37742:(s,o,i)=>{var r=i(83419),h=i(78389),a=i(37747),u=i(63012),l=i(43396),d=i(87841),c=i(37303),p=i(95829),f=i(26099),v=new r({Mixins:[h],initialize:function(g,y){var m=64,x=64,b=y!==void 0;b&&y.displayWidth&&(m=y.displayWidth,x=y.displayHeight),b||(y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=g,this.gameObject=b?y:void 0,this.isBody=!0,this.transform={x:y.x,y:y.y,rotation:y.angle,scaleX:y.scaleX,scaleY:y.scaleY,displayOriginX:y.displayOriginX,displayOriginY:y.displayOriginY},this.debugShowBody=g.defaults.debugShowBody,this.debugShowVelocity=g.defaults.debugShowVelocity,this.debugBodyColor=g.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(y.x-y.scaleX*y.displayOriginX,y.y-y.scaleY*y.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=y.angle,this.preRotation=y.angle,this.width=m,this.height=x,this.sourceWidth=m,this.sourceHeight=x,y.frame&&(this.sourceWidth=y.frame.realWidth,this.sourceHeight=y.frame.realHeight),this.halfWidth=Math.abs(m/2),this.halfHeight=Math.abs(x/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new f,this.newVelocity=new f,this.deltaMax=new f,this.acceleration=new f,this.allowDrag=!0,this.drag=new f,this.allowGravity=!0,this.gravity=new f,this.bounce=new f,this.worldBounce=null,this.customBoundsRectangle=g.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new f(1e4,1e4),this.maxSpeed=-1,this.friction=new f(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new f(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=p(!1),this.touching=p(!0),this.wasTouching=p(!0),this.blocked=p(!0),this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=y.scaleX,this._sy=y.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new d,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var g=this.gameObject,y=this.transform;if(g.parentContainer){var m=g.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);y.x=m.tx,y.y=m.ty,y.rotation=l(m.rotation),y.scaleX=m.scaleX,y.scaleY=m.scaleY,y.displayOriginX=g.displayOriginX,y.displayOriginY=g.displayOriginY}else y.x=g.x,y.y=g.y,y.rotation=g.angle,y.scaleX=g.scaleX,y.scaleY=g.scaleY,y.displayOriginX=g.displayOriginX,y.displayOriginY=g.displayOriginY;var x=!1;if(this.syncBounds){var b=g.getBounds(this._bounds);this.width=b.width,this.height=b.height,x=!0}else{var w=Math.abs(y.scaleX),T=Math.abs(y.scaleY);this._sx===w&&this._sy===T||(this.width=this.sourceWidth*w,this.height=this.sourceHeight*T,this._sx=w,this._sy=T,x=!0)}x&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var g=this.transform;this.position.x=g.x+g.scaleX*(this.offset.x-g.displayOriginX),this.position.y=g.y+g.scaleY*(this.offset.y-g.displayOriginY),this.updateCenter()},resetFlags:function(g){g===void 0&&(g=!1);var y=this.wasTouching,m=this.touching,x=this.blocked;g?p(!0,y):(y.none=m.none,y.up=m.up,y.down=m.down,y.left=m.left,y.right=m.right),p(!0,m),p(!0,x),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(g,y){if(g&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var m=this.position;this.prev.x=m.x,this.prev.y=m.y,this.prevFrame.x=m.x,this.prevFrame.y=m.y}g&&this.update(y)},update:function(g){var y=this.prev,m=this.position,x=this.velocity;if(y.set(m.x,m.y),!this.moves)return this._dx=m.x-y.x,void(this._dy=m.y-y.y);if(this.directControl){var b=this.autoFrame;x.set((m.x-b.x)/g,(m.y-b.y)/g),this.world.updateMotion(this,g),this._dx=m.x-b.x,this._dy=m.y-b.y}else this.world.updateMotion(this,g),this.newVelocity.set(x.x*g,x.y*g),m.add(this.newVelocity),this._dx=m.x-y.x,this._dy=m.y-y.y;var w=x.x,T=x.y;if(this.updateCenter(),this.angle=Math.atan2(T,w),this.speed=Math.sqrt(w*w+T*T),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var S=this.blocked;this.world.emit(u.WORLD_BOUNDS,this,S.up,S.down,S.left,S.right)}},postUpdate:function(){var g=this.position,y=g.x-this.prevFrame.x,m=g.y-this.prevFrame.y,x=this.gameObject;if(this.moves){var b=this.deltaMax.x,w=this.deltaMax.y;b!==0&&y!==0&&(y<0&&y<-b?y=-b:y>0&&y>b&&(y=b)),w!==0&&m!==0&&(m<0&&m<-w?m=-w:m>0&&m>w&&(m=w)),x&&(x.x+=y,x.y+=m)}y<0?this.facing=a.FACING_LEFT:y>0&&(this.facing=a.FACING_RIGHT),m<0?this.facing=a.FACING_UP:m>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&x&&(x.angle+=this.deltaZ()),this._tx=y,this._ty=m,this.autoFrame.set(g.x,g.y)},setBoundsRectangle:function(g){return this.customBoundsRectangle=g||this.world.bounds,this},checkWorldBounds:function(){var g=this.position,y=this.velocity,m=this.blocked,x=this.customBoundsRectangle,b=this.world.checkCollision,w=this.worldBounce?-this.worldBounce.x:-this.bounce.x,T=this.worldBounce?-this.worldBounce.y:-this.bounce.y,S=!1;return g.x<x.x&&b.left?(g.x=x.x,y.x*=w,m.left=!0,S=!0):this.right>x.right&&b.right&&(g.x=x.right-this.width,y.x*=w,m.right=!0,S=!0),g.y<x.y&&b.up?(g.y=x.y,y.y*=T,m.up=!0,S=!0):this.bottom>x.bottom&&b.down&&(g.y=x.bottom-this.height,y.y*=T,m.down=!0,S=!0),S&&(this.blocked.none=!1,this.updateCenter()),S},setOffset:function(g,y){return y===void 0&&(y=g),this.offset.set(g,y),this},setGameObject:function(g,y){return y===void 0&&(y=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=g,g.body&&(g.body=this),this.setSize(),this.world.add(this),this.enable=y,this},setSize:function(g,y,m){m===void 0&&(m=!0);var x=this.gameObject;if(x&&(!g&&x.frame&&(g=x.frame.realWidth),!y&&x.frame&&(y=x.frame.realHeight)),this.sourceWidth=g,this.sourceHeight=y,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),m&&x&&x.getCenter){var b=(x.width-g)/2,w=(x.height-y)/2;this.offset.set(b,w)}return this.isCircle=!1,this.radius=0,this},setCircle:function(g,y,m){return y===void 0&&(y=this.offset.x),m===void 0&&(m=this.offset.y),g>0?(this.isCircle=!0,this.radius=g,this.sourceWidth=2*g,this.sourceHeight=2*g,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(y,m),this.updateCenter()):this.isCircle=!1,this},reset:function(g,y){this.stop();var m=this.gameObject;m&&(m.setPosition(g,y),this.rotation=m.angle,this.preRotation=m.angle);var x=this.position;m&&m.getTopLeft?m.getTopLeft(x):x.set(g,y),this.prev.copy(x),this.prevFrame.copy(x),this.autoFrame.copy(x),m&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(g){return g.x=this.x,g.y=this.y,g.right=this.right,g.bottom=this.bottom,g},hitTest:function(g,y){return this.isCircle?this.radius>0&&g>=this.left&&g<=this.right&&y>=this.top&&y<=this.bottom&&(this.center.x-g)*(this.center.x-g)+(this.center.y-y)*(this.center.y-y)<=this.radius*this.radius:c(this,g,y)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(g){var y=this.position,m=y.x+this.halfWidth,x=y.y+this.halfHeight;this.debugShowBody&&(g.lineStyle(g.defaultStrokeWidth,this.debugBodyColor),this.isCircle?g.strokeCircle(m,x,this.width/2):(this.checkCollision.up&&g.lineBetween(y.x,y.y,y.x+this.width,y.y),this.checkCollision.right&&g.lineBetween(y.x+this.width,y.y,y.x+this.width,y.y+this.height),this.checkCollision.down&&g.lineBetween(y.x,y.y+this.height,y.x+this.width,y.y+this.height),this.checkCollision.left&&g.lineBetween(y.x,y.y,y.x,y.y+this.height))),this.debugShowVelocity&&(g.lineStyle(g.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),g.lineBetween(m,x,m+this.velocity.x/2,x+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(g){return g===void 0&&(g=!0),this.directControl=g,this},setCollideWorldBounds:function(g,y,m,x){g===void 0&&(g=!0),this.collideWorldBounds=g;var b=y!==void 0,w=m!==void 0;return(b||w)&&(this.worldBounce||(this.worldBounce=new f),b&&(this.worldBounce.x=y),w&&(this.worldBounce.y=m)),x!==void 0&&(this.onWorldBounds=x),this},setVelocity:function(g,y){return this.velocity.set(g,y),g=this.velocity.x,y=this.velocity.y,this.speed=Math.sqrt(g*g+y*y),this},setVelocityX:function(g){return this.setVelocity(g,this.velocity.y)},setVelocityY:function(g){return this.setVelocity(this.velocity.x,g)},setMaxVelocity:function(g,y){return this.maxVelocity.set(g,y),this},setMaxVelocityX:function(g){return this.maxVelocity.x=g,this},setMaxVelocityY:function(g){return this.maxVelocity.y=g,this},setMaxSpeed:function(g){return this.maxSpeed=g,this},setSlideFactor:function(g,y){return this.slideFactor.set(g,y),this},setBounce:function(g,y){return this.bounce.set(g,y),this},setBounceX:function(g){return this.bounce.x=g,this},setBounceY:function(g){return this.bounce.y=g,this},setAcceleration:function(g,y){return this.acceleration.set(g,y),this},setAccelerationX:function(g){return this.acceleration.x=g,this},setAccelerationY:function(g){return this.acceleration.y=g,this},setAllowDrag:function(g){return g===void 0&&(g=!0),this.allowDrag=g,this},setAllowGravity:function(g){return g===void 0&&(g=!0),this.allowGravity=g,this},setAllowRotation:function(g){return g===void 0&&(g=!0),this.allowRotation=g,this},setDrag:function(g,y){return this.drag.set(g,y),this},setDamping:function(g){return this.useDamping=g,this},setDragX:function(g){return this.drag.x=g,this},setDragY:function(g){return this.drag.y=g,this},setGravity:function(g,y){return this.gravity.set(g,y),this},setGravityX:function(g){return this.gravity.x=g,this},setGravityY:function(g){return this.gravity.y=g,this},setFriction:function(g,y){return this.friction.set(g,y),this},setFrictionX:function(g){return this.friction.x=g,this},setFrictionY:function(g){return this.friction.y=g,this},setAngularVelocity:function(g){return this.angularVelocity=g,this},setAngularAcceleration:function(g){return this.angularAcceleration=g,this},setAngularDrag:function(g){return this.angularDrag=g,this},setMass:function(g){return this.mass=g,this},setImmovable:function(g){return g===void 0&&(g=!0),this.immovable=g,this},setEnable:function(g){return g===void 0&&(g=!0),this.enable=g,this},processX:function(g,y,m,x){this.x+=g,this.updateCenter(),y!==null&&(this.velocity.x=y*this.slideFactor.x);var b=this.blocked;m&&(b.left=!0,b.none=!1),x&&(b.right=!0,b.none=!1)},processY:function(g,y,m,x){this.y+=g,this.updateCenter(),y!==null&&(this.velocity.y=y*this.slideFactor.y);var b=this.blocked;m&&(b.up=!0,b.none=!1),x&&(b.down=!0,b.none=!1)},x:{get:function(){return this.position.x},set:function(g){this.position.x=g}},y:{get:function(){return this.position.y},set:function(g){this.position.y=g}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=v},79342:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l,d,c,p){this.world=h,this.name="",this.active=!0,this.overlapOnly=a,this.object1=u,this.object2=l,this.collideCallback=d,this.processCallback=c,this.callbackContext=p},setName:function(h){return this.name=h,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});s.exports=r},66022:(s,o,i)=>{var r=i(71289),h=i(13759),a=i(37742),u=i(83419),l=i(37747),d=i(60758),c=i(72624),p=i(71464),f=new u({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(v,g,y,m,x){return this.world.addCollider(v,g,y,m,x)},overlap:function(v,g,y,m,x){return this.world.addOverlap(v,g,y,m,x)},existing:function(v,g){var y=g?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(v,y),v},staticImage:function(v,g,y,m){var x=new r(this.scene,v,g,y,m);return this.sys.displayList.add(x),this.world.enableBody(x,l.STATIC_BODY),x},image:function(v,g,y,m){var x=new r(this.scene,v,g,y,m);return this.sys.displayList.add(x),this.world.enableBody(x,l.DYNAMIC_BODY),x},staticSprite:function(v,g,y,m){var x=new h(this.scene,v,g,y,m);return this.sys.displayList.add(x),this.sys.updateList.add(x),this.world.enableBody(x,l.STATIC_BODY),x},sprite:function(v,g,y,m){var x=new h(this.scene,v,g,y,m);return this.sys.displayList.add(x),this.sys.updateList.add(x),this.world.enableBody(x,l.DYNAMIC_BODY),x},staticGroup:function(v,g){return this.sys.updateList.add(new p(this.world,this.world.scene,v,g))},group:function(v,g){return this.sys.updateList.add(new d(this.world,this.world.scene,v,g))},body:function(v,g,y,m){var x=new a(this.world);return x.position.set(v,g),y&&m&&x.setSize(y,m),this.world.add(x,l.DYNAMIC_BODY),x},staticBody:function(v,g,y,m){var x=new c(this.world);return x.position.set(v,g),y&&m&&x.setSize(y,m),this.world.add(x,l.STATIC_BODY),x},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=f},79599:s=>{s.exports=function(o){var i=0;if(Array.isArray(o))for(var r=0;r<o.length;r++)i|=o[r];else i=o;return i}},64897:(s,o,i)=>{var r=i(37747);s.exports=function(h,a,u,l){var d=0,c=h.deltaAbsX()+a.deltaAbsX()+l;return h._dx===0&&a._dx===0?(h.embedded=!0,a.embedded=!0):h._dx>a._dx?(d=h.right-a.x)>c&&!u||h.checkCollision.right===!1||a.checkCollision.left===!1?d=0:(h.touching.none=!1,h.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType!==r.STATIC_BODY||u||(h.blocked.none=!1,h.blocked.right=!0),h.physicsType!==r.STATIC_BODY||u||(a.blocked.none=!1,a.blocked.left=!0)):h._dx<a._dx&&(-(d=h.x-a.width-a.x)>c&&!u||h.checkCollision.left===!1||a.checkCollision.right===!1?d=0:(h.touching.none=!1,h.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType!==r.STATIC_BODY||u||(h.blocked.none=!1,h.blocked.left=!0),h.physicsType!==r.STATIC_BODY||u||(a.blocked.none=!1,a.blocked.right=!0))),h.overlapX=d,a.overlapX=d,d}},45170:(s,o,i)=>{var r=i(37747);s.exports=function(h,a,u,l){var d=0,c=h.deltaAbsY()+a.deltaAbsY()+l;return h._dy===0&&a._dy===0?(h.embedded=!0,a.embedded=!0):h._dy>a._dy?(d=h.bottom-a.y)>c&&!u||h.checkCollision.down===!1||a.checkCollision.up===!1?d=0:(h.touching.none=!1,h.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType!==r.STATIC_BODY||u||(h.blocked.none=!1,h.blocked.down=!0),h.physicsType!==r.STATIC_BODY||u||(a.blocked.none=!1,a.blocked.up=!0)):h._dy<a._dy&&(-(d=h.y-a.bottom)>c&&!u||h.checkCollision.up===!1||a.checkCollision.down===!1?d=0:(h.touching.none=!1,h.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType!==r.STATIC_BODY||u||(h.blocked.none=!1,h.blocked.up=!0),h.physicsType!==r.STATIC_BODY||u||(a.blocked.none=!1,a.blocked.down=!0))),h.overlapY=d,a.overlapY=d,d}},60758:(s,o,i)=>{var r=i(13759),h=i(83419),a=i(78389),u=i(37747),l=i(95540),d=i(26479),c=i(41212),p=new h({Extends:d,Mixins:[a],initialize:function(f,v,g,y){if(g||y)if(c(g))y=g,g=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(g)&&c(g[0])){var m=this;g.forEach(function(x){x.internalCreateCallback=m.createCallbackHandler,x.internalRemoveCallback=m.removeCallbackHandler,x.classType=l(x,"classType",r)}),y=null}else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=f,y&&(y.classType=l(y,"classType",r)),this.physicsType=u.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:l(y,"collideWorldBounds",!1),setBoundsRectangle:l(y,"customBoundsRectangle",null),setAccelerationX:l(y,"accelerationX",0),setAccelerationY:l(y,"accelerationY",0),setAllowDrag:l(y,"allowDrag",!0),setAllowGravity:l(y,"allowGravity",!0),setAllowRotation:l(y,"allowRotation",!0),setDamping:l(y,"useDamping",!1),setBounceX:l(y,"bounceX",0),setBounceY:l(y,"bounceY",0),setDragX:l(y,"dragX",0),setDragY:l(y,"dragY",0),setEnable:l(y,"enable",!0),setGravityX:l(y,"gravityX",0),setGravityY:l(y,"gravityY",0),setFrictionX:l(y,"frictionX",0),setFrictionY:l(y,"frictionY",0),setMaxSpeed:l(y,"maxSpeed",-1),setMaxVelocityX:l(y,"maxVelocityX",1e4),setMaxVelocityY:l(y,"maxVelocityY",1e4),setVelocityX:l(y,"velocityX",0),setVelocityY:l(y,"velocityY",0),setAngularVelocity:l(y,"angularVelocity",0),setAngularAcceleration:l(y,"angularAcceleration",0),setAngularDrag:l(y,"angularDrag",0),setMass:l(y,"mass",1),setImmovable:l(y,"immovable",!1)},d.call(this,v,g,y),this.type="PhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.DYNAMIC_BODY);var v=f.body;for(var g in this.defaults)v[g](this.defaults[g])},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},setVelocity:function(f,v,g){g===void 0&&(g=0);for(var y=this.getChildren(),m=0;m<y.length;m++)y[m].body.velocity.set(f+m*g,v+m*g);return this},setVelocityX:function(f,v){v===void 0&&(v=0);for(var g=this.getChildren(),y=0;y<g.length;y++)g[y].body.velocity.x=f+y*v;return this},setVelocityY:function(f,v){v===void 0&&(v=0);for(var g=this.getChildren(),y=0;y<g.length;y++)g[y].body.velocity.y=f+y*v;return this}});s.exports=p},3017:s=>{var o,i,r,h,a,u,l,d,c,p,f,v,g,y,m,x,b,w=function(){return p&&m&&i.blocked.right?(o.processX(-b,l,!1,!0),1):c&&x&&i.blocked.left?(o.processX(b,l,!0),1):g&&x&&o.blocked.right?(i.processX(-b,d,!1,!0),2):v&&m&&o.blocked.left?(i.processX(b,d,!0),2):0},T=function(S){if(r&&h)b*=.5,S===0||S===3?(o.processX(b,a),i.processX(-b,u)):(o.processX(-b,a),i.processX(b,u));else if(r&&!h)S===0||S===3?o.processX(b,l,!0):o.processX(-b,l,!1,!0);else if(!r&&h)S===0||S===3?i.processX(-b,d,!1,!0):i.processX(b,d,!0);else{var C=.5*b;S===0?y?(o.processX(b,0,!0),i.processX(0,null,!1,!0)):g?(o.processX(C,0,!0),i.processX(-C,0,!1,!0)):(o.processX(C,i.velocity.x,!0),i.processX(-C,null,!1,!0)):S===1?f?(o.processX(0,null,!1,!0),i.processX(b,0,!0)):p?(o.processX(-C,0,!1,!0),i.processX(C,0,!0)):(o.processX(-C,null,!1,!0),i.processX(C,o.velocity.x,!0)):S===2?y?(o.processX(-b,0,!1,!0),i.processX(0,null,!0)):v?(o.processX(-C,0,!1,!0),i.processX(C,0,!0)):(o.processX(-C,i.velocity.x,!1,!0),i.processX(C,null,!0)):S===3&&(f?(o.processX(0,null,!0),i.processX(-b,0,!1,!0)):c?(o.processX(C,0,!0),i.processX(-C,0,!1,!0)):(o.processX(C,i.velocity.y,!0),i.processX(-C,null,!1,!0)))}return!0};s.exports={BlockCheck:w,Check:function(){var S=o.velocity.x,C=i.velocity.x,E=Math.sqrt(C*C*i.mass/o.mass)*(C>0?1:-1),M=Math.sqrt(S*S*o.mass/i.mass)*(S>0?1:-1),_=.5*(E+M);return M-=_,a=_+(E-=_)*o.bounce.x,u=_+M*i.bounce.x,c&&x?T(0):v&&m?T(1):p&&m?T(2):!(!g||!x)&&T(3)},Set:function(S,C,E){i=C;var M=(o=S).velocity.x,_=i.velocity.x;return r=o.pushable,c=o._dx<0,p=o._dx>0,f=o._dx===0,m=Math.abs(o.right-i.x)<=Math.abs(i.right-o.x),l=_-M*o.bounce.x,h=i.pushable,v=i._dx<0,g=i._dx>0,y=i._dx===0,x=!m,d=M-_*i.bounce.x,b=Math.abs(E),w()},Run:T,RunImmovableBody1:function(S){S===1?i.velocity.x=0:m?i.processX(b,d,!0):i.processX(-b,d,!1,!0),o.moves&&(i.y+=(o.y-o.prev.y)*o.friction.y,i._dy=i.y-i.prev.y)},RunImmovableBody2:function(S){S===2?o.velocity.x=0:x?o.processX(b,l,!0):o.processX(-b,l,!1,!0),i.moves&&(o.y+=(i.y-i.prev.y)*i.friction.y,o._dy=o.y-o.prev.y)}}},47962:s=>{var o,i,r,h,a,u,l,d,c,p,f,v,g,y,m,x,b,w=function(){return p&&m&&i.blocked.down?(o.processY(-b,l,!1,!0),1):c&&x&&i.blocked.up?(o.processY(b,l,!0),1):g&&x&&o.blocked.down?(i.processY(-b,d,!1,!0),2):v&&m&&o.blocked.up?(i.processY(b,d,!0),2):0},T=function(S){if(r&&h)b*=.5,S===0||S===3?(o.processY(b,a),i.processY(-b,u)):(o.processY(-b,a),i.processY(b,u));else if(r&&!h)S===0||S===3?o.processY(b,l,!0):o.processY(-b,l,!1,!0);else if(!r&&h)S===0||S===3?i.processY(-b,d,!1,!0):i.processY(b,d,!0);else{var C=.5*b;S===0?y?(o.processY(b,0,!0),i.processY(0,null,!1,!0)):g?(o.processY(C,0,!0),i.processY(-C,0,!1,!0)):(o.processY(C,i.velocity.y,!0),i.processY(-C,null,!1,!0)):S===1?f?(o.processY(0,null,!1,!0),i.processY(b,0,!0)):p?(o.processY(-C,0,!1,!0),i.processY(C,0,!0)):(o.processY(-C,null,!1,!0),i.processY(C,o.velocity.y,!0)):S===2?y?(o.processY(-b,0,!1,!0),i.processY(0,null,!0)):v?(o.processY(-C,0,!1,!0),i.processY(C,0,!0)):(o.processY(-C,i.velocity.y,!1,!0),i.processY(C,null,!0)):S===3&&(f?(o.processY(0,null,!0),i.processY(-b,0,!1,!0)):c?(o.processY(C,0,!0),i.processY(-C,0,!1,!0)):(o.processY(C,i.velocity.y,!0),i.processY(-C,null,!1,!0)))}return!0};s.exports={BlockCheck:w,Check:function(){var S=o.velocity.y,C=i.velocity.y,E=Math.sqrt(C*C*i.mass/o.mass)*(C>0?1:-1),M=Math.sqrt(S*S*o.mass/i.mass)*(S>0?1:-1),_=.5*(E+M);return M-=_,a=_+(E-=_)*o.bounce.y,u=_+M*i.bounce.y,c&&x?T(0):v&&m?T(1):p&&m?T(2):!(!g||!x)&&T(3)},Set:function(S,C,E){i=C;var M=(o=S).velocity.y,_=i.velocity.y;return r=o.pushable,c=o._dy<0,p=o._dy>0,f=o._dy===0,m=Math.abs(o.bottom-i.y)<=Math.abs(i.bottom-o.y),l=_-M*o.bounce.y,h=i.pushable,v=i._dy<0,g=i._dy>0,y=i._dy===0,x=!m,d=M-_*i.bounce.y,b=Math.abs(E),w()},Run:T,RunImmovableBody1:function(S){S===1?i.velocity.y=0:m?i.processY(b,d,!0):i.processY(-b,d,!1,!0),o.moves&&(i.x+=(o.x-o.prev.x)*o.friction.x,i._dx=i.x-i.prev.x)},RunImmovableBody2:function(S){S===2?o.velocity.y=0:x?o.processY(b,l,!0):o.processY(-b,l,!1,!0),i.moves&&(o.x+=(i.x-i.prev.x)*i.friction.x,o._dx=o.x-o.prev.x)}}},14087:(s,o,i)=>{var r=i(64897),h=i(3017);s.exports=function(a,u,l,d,c){c===void 0&&(c=r(a,u,l,d));var p=a.immovable,f=u.immovable;if(l||c===0||p&&f||a.customSeparateX||u.customSeparateX)return c!==0||a.embedded&&u.embedded;var v=h.Set(a,u,c);return p||f?(p?h.RunImmovableBody1(v):f&&h.RunImmovableBody2(v),!0):v>0||h.Check()}},89936:(s,o,i)=>{var r=i(45170),h=i(47962);s.exports=function(a,u,l,d,c){c===void 0&&(c=r(a,u,l,d));var p=a.immovable,f=u.immovable;if(l||c===0||p&&f||a.customSeparateY||u.customSeparateY)return c!==0||a.embedded&&u.embedded;var v=h.Set(a,u,c);return p||f?(p?h.RunImmovableBody1(v):f&&h.RunImmovableBody2(v),!0):v>0||h.Check()}},95829:s=>{s.exports=function(o,i){return i===void 0&&(i={}),i.none=o,i.up=!1,i.down=!1,i.left=!1,i.right=!1,o||(i.up=!0,i.down=!0,i.left=!0,i.right=!0),i}},72624:(s,o,i)=>{var r=i(87902),h=i(83419),a=i(78389),u=i(37747),l=i(37303),d=i(95829),c=i(26099),p=new h({Mixins:[a],initialize:function(f,v){var g=64,y=64,m=v!==void 0;m&&v.displayWidth&&(g=v.displayWidth,y=v.displayHeight),m||(v={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0}),this.world=f,this.gameObject=m?v:void 0,this.isBody=!0,this.debugShowBody=f.defaults.debugShowStaticBody,this.debugBodyColor=f.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(v.x-g*v.originX,v.y-y*v.originY),this.width=g,this.height=y,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=c.ZERO,this.allowGravity=!1,this.gravity=c.ZERO,this.bounce=c.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=d(!1),this.touching=d(!0),this.wasTouching=d(!0),this.blocked=d(!0),this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(f,v){return f&&f!==this.gameObject&&(this.gameObject.body=null,f.body=this,this.gameObject=f),v&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var f=this.gameObject;return f.getTopLeft(this.position),this.width=f.displayWidth,this.height=f.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(f,v){return v===void 0&&(v=f),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(f,v),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(f,v,g){g===void 0&&(g=!0);var y=this.gameObject;if(y&&y.frame&&(f||(f=y.frame.realWidth),v||(v=y.frame.realHeight)),this.world.staticTree.remove(this),this.width=f,this.height=v,this.halfWidth=Math.floor(f/2),this.halfHeight=Math.floor(v/2),g&&y&&y.getCenter){var m=y.displayWidth/2,x=y.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(m-this.halfWidth,x-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(f,v,g){return v===void 0&&(v=this.offset.x),g===void 0&&(g=this.offset.y),f>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=f,this.width=2*f,this.height=2*f,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(v,g),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(f,v){var g=this.gameObject;f===void 0&&(f=g.x),v===void 0&&(v=g.y),this.world.staticTree.remove(this),g.setPosition(f,v),g.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,v){return this.isCircle?r(this,f,v):l(this,f,v)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(f){var v=this.position,g=v.x+this.halfWidth,y=v.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?f.strokeCircle(g,y,this.width/2):f.strokeRect(v.x,v.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(f){return f<=0&&(f=.1),this.mass=f,this},x:{get:function(){return this.position.x},set:function(f){this.world.staticTree.remove(this),this.position.x=f,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(f){this.world.staticTree.remove(this),this.position.y=f,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});s.exports=p},71464:(s,o,i)=>{var r=i(13759),h=i(83419),a=i(78389),u=i(37747),l=i(95540),d=i(26479),c=i(41212),p=new h({Extends:d,Mixins:[a],initialize:function(f,v,g,y){g||y?c(g)?(y=g,g=null,y.internalCreateCallback=this.createCallbackHandler,y.internalRemoveCallback=this.removeCallbackHandler,y.createMultipleCallback=this.createMultipleCallbackHandler,y.classType=l(y,"classType",r)):Array.isArray(g)&&c(g[0])?(y=g,g=null,y.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler,m.internalRemoveCallback=this.removeCallbackHandler,m.createMultipleCallback=this.createMultipleCallbackHandler,m.classType=l(m,"classType",r)})):y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:y={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=f,this.physicsType=u.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,d.call(this,v,g,y),this.type="StaticPhysicsGroup"},createCallbackHandler:function(f){f.body||this.world.enableBody(f,u.STATIC_BODY)},removeCallbackHandler:function(f){f.body&&this.world.disableBody(f)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var f=this.children.entries,v=0;v<f.length;v++)f[v].body.reset();return this}});s.exports=p},82248:(s,o,i)=>{var r=i(55495),h=i(37742),a=i(45319),u=i(83419),l=i(79342),d=i(37747),c=i(20339),p=i(52816),f=i(50792),v=i(63012),g=i(43855),y=i(5470),m=i(94977),x=i(64897),b=i(45170),w=i(96523),T=i(35154),S=i(36383),C=i(25774),E=i(96602),M=i(87841),_=i(59542),O=i(40012),k=i(14087),P=i(89936),A=i(35072),L=i(72624),D=i(2483),F=i(61340),X=i(26099),z=i(15994),Y=new u({Extends:f,initialize:function(R,B){f.call(this),this.scene=R,this.bodies=new A,this.staticBodies=new A,this.pendingDestroy=new A,this.colliders=new C,this.gravity=new X(T(B,"gravity.x",0),T(B,"gravity.y",0)),this.bounds=new M(T(B,"x",0),T(B,"y",0),T(B,"width",R.sys.scale.width),T(B,"height",R.sys.scale.height)),this.checkCollision={up:T(B,"checkCollision.up",!0),down:T(B,"checkCollision.down",!0),left:T(B,"checkCollision.left",!0),right:T(B,"checkCollision.right",!0)},this.fps=T(B,"fps",60),this.fixedStep=T(B,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(B,"timeScale",1),this.OVERLAP_BIAS=T(B,"overlapBias",4),this.TILE_BIAS=T(B,"tileBias",16),this.forceX=T(B,"forceX",!1),this.isPaused=T(B,"isPaused",!1),this._total=0,this.drawDebug=T(B,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(B,"debugShowBody",!0),debugShowStaticBody:T(B,"debugShowStaticBody",!0),debugShowVelocity:T(B,"debugShowVelocity",!0),bodyDebugColor:T(B,"debugBodyColor",16711935),staticBodyDebugColor:T(B,"debugStaticBodyColor",255),velocityDebugColor:T(B,"debugVelocityColor",65280)},this.maxEntries=T(B,"maxEntries",16),this.useTree=T(B,"useTree",!0),this.tree=new _(this.maxEntries),this.staticTree=new _(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new F,this._tempMatrix2=new F,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(R,B){B===void 0&&(B=d.DYNAMIC_BODY),Array.isArray(R)||(R=[R]);for(var I=0;I<R.length;I++){var G=R[I];if(G.isParent)for(var N=G.getChildren(),W=0;W<N.length;W++){var U=N[W];U.isParent?this.enable(U,B):this.enableBody(U,B)}else this.enableBody(G,B)}},enableBody:function(R,B){return B===void 0&&(B=d.DYNAMIC_BODY),R.hasTransformComponent&&(R.body||(B===d.DYNAMIC_BODY?R.body=new h(this,R):B===d.STATIC_BODY&&(R.body=new L(this,R))),this.add(R.body)),R},add:function(R){return R.physicsType===d.DYNAMIC_BODY?this.bodies.set(R):R.physicsType===d.STATIC_BODY&&(this.staticBodies.set(R),this.staticTree.insert(R)),R.enable=!0,R},disable:function(R){Array.isArray(R)||(R=[R]);for(var B=0;B<R.length;B++){var I=R[B];if(I.isParent)for(var G=I.getChildren(),N=0;N<G.length;N++){var W=G[N];W.isParent?this.disable(W):this.disableBody(W.body)}else this.disableBody(I.body)}},disableBody:function(R){this.remove(R),R.enable=!1},remove:function(R){R.physicsType===d.DYNAMIC_BODY?(this.tree.remove(R),this.bodies.delete(R)):R.physicsType===d.STATIC_BODY&&(this.staticBodies.delete(R),this.staticTree.remove(R))},createDebugGraphic:function(){var R=this.scene.sys.add.graphics({x:0,y:0});return R.setDepth(Number.MAX_VALUE),this.debugGraphic=R,this.drawDebug=!0,R},setBounds:function(R,B,I,G,N,W,U,V){return this.bounds.setTo(R,B,I,G),N!==void 0&&this.setBoundsCollision(N,W,U,V),this},setBoundsCollision:function(R,B,I,G){return R===void 0&&(R=!0),B===void 0&&(B=!0),I===void 0&&(I=!0),G===void 0&&(G=!0),this.checkCollision.left=R,this.checkCollision.right=B,this.checkCollision.up=I,this.checkCollision.down=G,this},pause:function(){return this.isPaused=!0,this.emit(v.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(v.RESUME),this},addCollider:function(R,B,I,G,N){I===void 0&&(I=null),G===void 0&&(G=null),N===void 0&&(N=I);var W=new l(this,!1,R,B,I,G,N);return this.colliders.add(W),W},addOverlap:function(R,B,I,G,N){I===void 0&&(I=null),G===void 0&&(G=null),N===void 0&&(N=I);var W=new l(this,!0,R,B,I,G,N);return this.colliders.add(W),W},removeCollider:function(R){return this.colliders.remove(R),this},setFPS:function(R){return this.fps=R,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(R,B){if(!this.isPaused&&this.bodies.size!==0){var I,G,N=this._frameTime,W=this._frameTimeMS*this.timeScale;this._elapsed+=B;var U=this.bodies.entries,V=this._elapsed>=W;for(this.fixedStep||(N=.001*B,V=!0,this._elapsed=0),I=0;I<U.length;I++)(G=U[I]).enable&&G.preUpdate(V,N);if(V){this._elapsed-=W,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(U));var K=this.colliders.update();for(I=0;I<K.length;I++){var $=K[I];$.active&&$.update()}this.emit(v.WORLD_STEP,N)}for(;this._elapsed>=W;)this._elapsed-=W,this.step(N)}},step:function(R){var B,I,G=this.bodies.entries,N=G.length;for(B=0;B<N;B++)(I=G[B]).enable&&I.update(R);this.useTree&&(this.tree.clear(),this.tree.load(G));var W=this.colliders.update();for(B=0;B<W.length;B++){var U=W[B];U.active&&U.update()}this.emit(v.WORLD_STEP,R),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var R,B,I=this.bodies.entries,G=I.length,N=this.bodies,W=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,R=0;R<G;R++)(B=I[R]).enable&&B.postUpdate();if(this.drawDebug){var U=this.debugGraphic;for(U.clear(),R=0;R<G;R++)(B=I[R]).willDrawDebug()&&B.drawDebug(U);for(G=(I=W.entries).length,R=0;R<G;R++)(B=I[R]).willDrawDebug()&&B.drawDebug(U)}var V=this.pendingDestroy;if(V.size>0){var K=this.tree,$=this.staticTree;for(G=(I=V.entries).length,R=0;R<G;R++)(B=I[R]).physicsType===d.DYNAMIC_BODY?(K.remove(B),N.delete(B)):B.physicsType===d.STATIC_BODY&&($.remove(B),W.delete(B)),B.world=void 0,B.gameObject=void 0;V.clear()}},updateMotion:function(R,B){R.allowRotation&&this.computeAngularVelocity(R,B),this.computeVelocity(R,B)},computeAngularVelocity:function(R,B){var I=R.angularVelocity,G=R.angularAcceleration,N=R.angularDrag,W=R.maxAngular;G?I+=G*B:R.allowDrag&&N&&(y(I-(N*=B),0,.1)?I-=N:m(I+N,0,.1)?I+=N:I=0);var U=(I=a(I,-W,W))-R.angularVelocity;R.angularVelocity+=U,R.rotation+=R.angularVelocity*B},computeVelocity:function(R,B){var I=R.velocity.x,G=R.acceleration.x,N=R.drag.x,W=R.maxVelocity.x,U=R.velocity.y,V=R.acceleration.y,K=R.drag.y,$=R.maxVelocity.y,H=R.speed,j=R.maxSpeed,q=R.allowDrag,Z=R.useDamping;R.allowGravity&&(I+=(this.gravity.x+R.gravity.x)*B,U+=(this.gravity.y+R.gravity.y)*B),G?I+=G*B:q&&N&&(Z?(I*=N=Math.pow(N,B),H=Math.sqrt(I*I+U*U),g(H,0,.001)&&(I=0)):y(I-(N*=B),0,.01)?I-=N:m(I+N,0,.01)?I+=N:I=0),V?U+=V*B:q&&K&&(Z?(U*=K=Math.pow(K,B),H=Math.sqrt(I*I+U*U),g(H,0,.001)&&(U=0)):y(U-(K*=B),0,.01)?U-=K:m(U+K,0,.01)?U+=K:U=0),I=a(I,-W,W),U=a(U,-$,$),R.velocity.set(I,U),j>-1&&R.velocity.length()>j&&(R.velocity.normalize().scale(j),H=j),R.speed=H},separate:function(R,B,I,G,N){var W,U,V=!1,K=!0;if(!R.enable||!B.enable||R.checkCollision.none||B.checkCollision.none||!this.intersects(R,B)||I&&I.call(G,R.gameObject,B.gameObject)===!1)return V;if(R.isCircle||B.isCircle){var $=this.separateCircle(R,B,N);$.result?(V=!0,K=!1):(W=$.x,U=$.y,K=!0)}if(K){var H=!1,j=!1,q=this.OVERLAP_BIAS;N?(H=k(R,B,N,q,W),j=P(R,B,N,q,U)):this.forceX||Math.abs(this.gravity.y+R.gravity.y)<Math.abs(this.gravity.x+R.gravity.x)?(H=k(R,B,N,q,W),this.intersects(R,B)&&(j=P(R,B,N,q,U))):(j=P(R,B,N,q,U),this.intersects(R,B)&&(H=k(R,B,N,q,W))),V=H||j}return V&&(N?(R.onOverlap||B.onOverlap)&&this.emit(v.OVERLAP,R.gameObject,B.gameObject,R,B):(R.onCollide||B.onCollide)&&this.emit(v.COLLIDE,R.gameObject,B.gameObject,R,B)),V},separateCircle:function(R,B,I){x(R,B,!1,0),b(R,B,!1,0);var G=R.isCircle,N=B.isCircle,W=R.center,U=B.center,V=R.immovable,K=B.immovable,$=R.velocity,H=B.velocity,j=0,q=!0;if(G!==N){q=!1;var Z=W.x,Q=W.y,at=R.halfWidth,rt=B.position.x,nt=B.position.y,lt=B.right,it=B.bottom;N&&(Z=U.x,Q=U.y,at=B.halfWidth,rt=R.position.x,nt=R.position.y,lt=R.right,it=R.bottom),Q<nt?Z<rt?j=c(Z,Q,rt,nt)-at:Z>lt&&(j=c(Z,Q,lt,nt)-at):Q>it&&(Z<rt?j=c(Z,Q,rt,it)-at:Z>lt&&(j=c(Z,Q,lt,it)-at)),j*=-1}else j=R.halfWidth+B.halfWidth-p(W,U);R.overlapR=j,B.overlapR=j;var ot=r(W,U),st=(j+S.EPSILON)*Math.cos(ot),gt=(j+S.EPSILON)*Math.sin(ot),Pt={overlap:j,result:!1,x:st,y:gt};if(I&&(!q||q&&j!==0))return Pt.result=!0,Pt;if(!q&&j===0||V&&K||R.customSeparateX||B.customSeparateX)return Pt.x=void 0,Pt.y=void 0,Pt;var Ot=!R.pushable&&!B.pushable;if(q){var Jt=W.x-U.x,Kt=W.y-U.y,Lt=Math.sqrt(Math.pow(Jt,2)+Math.pow(Kt,2)),oe=(U.x-W.x)/Lt||0,ke=(U.y-W.y)/Lt||0,Te=2*($.x*oe+$.y*ke-H.x*oe-H.y*ke)/(R.mass+B.mass);(V||K)&&(Te*=2),V||($.x=$.x-Te/R.mass*oe,$.y=$.y-Te/R.mass*ke,$.multiply(R.bounce)),K||(H.x=H.x+Te/B.mass*oe,H.y=H.y+Te/B.mass*ke,H.multiply(B.bounce)),V||K||(st*=.5,gt*=.5),V||(R.x-=st,R.y-=gt,R.updateCenter()),K||(B.x+=st,B.y+=gt,B.updateCenter()),Pt.result=!0}else!V||R.pushable||Ot?(R.x-=st,R.y-=gt,R.updateCenter()):(!K||B.pushable||Ot)&&(B.x+=st,B.y+=gt,B.updateCenter()),Pt.x=void 0,Pt.y=void 0;return Pt},intersects:function(R,B){return R!==B&&(R.isCircle||B.isCircle?R.isCircle?B.isCircle?p(R.center,B.center)<=R.halfWidth+B.halfWidth:this.circleBodyIntersects(R,B):this.circleBodyIntersects(B,R):!(R.right<=B.left||R.bottom<=B.top||R.left>=B.right||R.top>=B.bottom))},circleBodyIntersects:function(R,B){var I=a(R.center.x,B.left,B.right),G=a(R.center.y,B.top,B.bottom);return(R.center.x-I)*(R.center.x-I)+(R.center.y-G)*(R.center.y-G)<=R.halfWidth*R.halfWidth},overlap:function(R,B,I,G,N){return I===void 0&&(I=null),G===void 0&&(G=null),N===void 0&&(N=I),this.collideObjects(R,B,I,G,N,!0)},collide:function(R,B,I,G,N){return I===void 0&&(I=null),G===void 0&&(G=null),N===void 0&&(N=I),this.collideObjects(R,B,I,G,N,!1)},collideObjects:function(R,B,I,G,N,W){var U,V;!R.isParent||R.physicsType!==void 0&&B!==void 0&&R!==B||(R=R.children.entries),B&&B.isParent&&B.physicsType===void 0&&(B=B.children.entries);var K=Array.isArray(R),$=Array.isArray(B);if(this._total=0,K||$)if(!K&&$)for(U=0;U<B.length;U++)this.collideHandler(R,B[U],I,G,N,W);else if(K&&!$)if(B)for(U=0;U<R.length;U++)this.collideHandler(R[U],B,I,G,N,W);else for(U=0;U<R.length;U++){var H=R[U];for(V=U+1;V<R.length;V++)U!==V&&this.collideHandler(H,R[V],I,G,N,W)}else for(U=0;U<R.length;U++)for(V=0;V<B.length;V++)this.collideHandler(R[U],B[V],I,G,N,W);else this.collideHandler(R,B,I,G,N,W);return this._total>0},collideHandler:function(R,B,I,G,N,W){if(B===void 0&&R.isParent)return this.collideGroupVsGroup(R,R,I,G,N,W);if(!R||!B)return!1;if(R.body||R.isBody){if(B.body||B.isBody)return this.collideSpriteVsSprite(R,B,I,G,N,W);if(B.isParent)return this.collideSpriteVsGroup(R,B,I,G,N,W);if(B.isTilemap)return this.collideSpriteVsTilemapLayer(R,B,I,G,N,W)}else if(R.isParent){if(B.body||B.isBody)return this.collideSpriteVsGroup(B,R,I,G,N,W);if(B.isParent)return this.collideGroupVsGroup(R,B,I,G,N,W);if(B.isTilemap)return this.collideGroupVsTilemapLayer(R,B,I,G,N,W)}else if(R.isTilemap){if(B.body||B.isBody)return this.collideSpriteVsTilemapLayer(B,R,I,G,N,W);if(B.isParent)return this.collideGroupVsTilemapLayer(B,R,I,G,N,W)}},canCollide:function(R,B){return R&&B&&(R.collisionMask&B.collisionCategory)!==0&&(B.collisionMask&R.collisionCategory)!==0},collideSpriteVsSprite:function(R,B,I,G,N,W){var U=R.isBody?R:R.body,V=B.isBody?B:B.body;return!!this.canCollide(U,V)&&(this.separate(U,V,G,N,W)&&(I&&I.call(N,R,B),this._total++),!0)},collideSpriteVsGroup:function(R,B,I,G,N,W){var U,V,K,$=R.isBody?R:R.body;if(B.length!==0&&$&&$.enable&&!$.checkCollision.none&&this.canCollide($,B))if(this.useTree||B.physicsType===d.STATIC_BODY){var H=this.treeMinMax;H.minX=$.left,H.minY=$.top,H.maxX=$.right,H.maxY=$.bottom;var j=B.physicsType===d.DYNAMIC_BODY?this.tree.search(H):this.staticTree.search(H);for(V=j.length,U=0;U<V;U++)$!==(K=j[U])&&K.enable&&!K.checkCollision.none&&B.contains(K.gameObject)&&this.separate($,K,G,N,W)&&(I&&I.call(N,$.gameObject,K.gameObject),this._total++)}else{var q=B.getChildren(),Z=B.children.entries.indexOf(R);for(V=q.length,U=0;U<V;U++)(K=q[U].body)&&U!==Z&&K.enable&&this.separate($,K,G,N,W)&&(I&&I.call(N,$.gameObject,K.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(R,B,I,G,N,W){if(!this.canCollide(R,B))return!1;var U=R.getChildren();if(U.length===0)return!1;for(var V=!1,K=0;K<U.length;K++)(U[K].body||U[K].isBody)&&this.collideSpriteVsTilemapLayer(U[K],B,I,G,N,W)&&(V=!0);return V},collideTiles:function(R,B,I,G,N){return!(B.length===0||R.body&&!R.body.enable||R.isBody&&!R.enable)&&this.collideSpriteVsTilesHandler(R,B,I,G,N,!1,!1)},overlapTiles:function(R,B,I,G,N){return!(B.length===0||R.body&&!R.body.enable||R.isBody&&!R.enable)&&this.collideSpriteVsTilesHandler(R,B,I,G,N,!0,!1)},collideSpriteVsTilemapLayer:function(R,B,I,G,N,W){var U=R.isBody?R:R.body;if(!U.enable||U.checkCollision.none||!this.canCollide(U,B))return!1;var V=B.layer,K=U.x-V.tileWidth*B.scaleX,$=U.y-V.tileHeight*B.scaleY,H=U.width+V.tileWidth*B.scaleX,j=U.height+V.tileHeight*B.scaleY,q=W?null:this.tileFilterOptions,Z=w(K,$,H,j,q,B.scene.cameras.main,B.layer);return Z.length!==0&&this.collideSpriteVsTilesHandler(R,Z,I,G,N,W,!0)},collideSpriteVsTilesHandler:function(R,B,I,G,N,W,U){for(var V,K,$=R.isBody?R:R.body,H={left:0,right:0,top:0,bottom:0},j=!1,q=0;q<B.length;q++){var Z=(K=(V=B[q]).tilemapLayer).tileToWorldXY(V.x,V.y);H.left=Z.x,H.top=Z.y,H.right=H.left+V.width*K.scaleX,H.bottom=H.top+V.height*K.scaleY,D(H,$)&&(!G||G.call(N,R,V))&&E(V,R)&&(W||O(q,$,V,H,K,this.TILE_BIAS,U))&&(this._total++,j=!0,I&&I.call(N,R,V),W&&$.onOverlap?this.emit(v.TILE_OVERLAP,R,V,$):$.onCollide&&this.emit(v.TILE_COLLIDE,R,V,$))}return j},collideGroupVsGroup:function(R,B,I,G,N,W){if(R.length!==0&&B.length!==0&&this.canCollide(R,B))for(var U=R.getChildren(),V=0;V<U.length;V++)this.collideSpriteVsGroup(U[V],B,I,G,N,W)},wrap:function(R,B){R.body?this.wrapObject(R,B):R.getChildren?this.wrapArray(R.getChildren(),B):Array.isArray(R)?this.wrapArray(R,B):this.wrapObject(R,B)},wrapArray:function(R,B){for(var I=0;I<R.length;I++)this.wrapObject(R[I],B)},wrapObject:function(R,B){B===void 0&&(B=0),R.x=z(R.x,this.bounds.left-B,this.bounds.right+B),R.y=z(R.y,this.bounds.top-B,this.bounds.bottom+B)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});s.exports=Y},1093:s=>{s.exports={setAcceleration:function(o,i){return this.body.acceleration.set(o,i),this},setAccelerationX:function(o){return this.body.acceleration.x=o,this},setAccelerationY:function(o){return this.body.acceleration.y=o,this}}},59023:s=>{s.exports={setAngularVelocity:function(o){return this.body.angularVelocity=o,this},setAngularAcceleration:function(o){return this.body.angularAcceleration=o,this},setAngularDrag:function(o){return this.body.angularDrag=o,this}}},62069:s=>{s.exports={setBounce:function(o,i){return this.body.bounce.set(o,i),this},setBounceX:function(o){return this.body.bounce.x=o,this},setBounceY:function(o){return this.body.bounce.y=o,this},setCollideWorldBounds:function(o,i,r,h){return this.body.setCollideWorldBounds(o,i,r,h),this}}},78389:(s,o,i)=>{var r=i(79599),h={setCollisionCategory:function(a){return(this.body?this.body:this).collisionCategory=a,this},willCollideWith:function(a){return((this.body?this.body:this).collisionMask&a)!==0},addCollidesWith:function(a){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask|a,this},removeCollidesWith:function(a){var u=this.body?this.body:this;return u.collisionMask=u.collisionMask&~a,this},setCollidesWith:function(a){return(this.body?this.body:this).collisionMask=r(a),this},resetCollisionCategory:function(){var a=this.body?this.body:this;return a.collisionCategory=1,a.collisionMask=1,this}};s.exports=h},87118:s=>{s.exports={setDebug:function(o,i,r){return this.debugShowBody=o,this.debugShowVelocity=i,this.debugBodyColor=r,this},setDebugBodyColor:function(o){return this.body.debugBodyColor=o,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(o){this.body.debugShowBody=o}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(o){this.body.debugShowVelocity=o}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(o){this.body.debugBodyColor=o}}}},52819:s=>{s.exports={setDrag:function(o,i){return this.body.drag.set(o,i),this},setDragX:function(o){return this.body.drag.x=o,this},setDragY:function(o){return this.body.drag.y=o,this},setDamping:function(o){return this.body.useDamping=o,this}}},4074:s=>{s.exports={setDirectControl:function(o){return this.body.setDirectControl(o),this},enableBody:function(o,i,r,h,a){return o&&this.body.reset(i,r),h&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(o,i){return o===void 0&&(o=!1),i===void 0&&(i=!1),this.body.stop(),this.body.enable=!1,o&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},40831:s=>{s.exports={setFriction:function(o,i){return this.body.friction.set(o,i),this},setFrictionX:function(o){return this.body.friction.x=o,this},setFrictionY:function(o){return this.body.friction.y=o,this}}},26775:s=>{s.exports={setGravity:function(o,i){return this.body.gravity.set(o,i),this},setGravityX:function(o){return this.body.gravity.x=o,this},setGravityY:function(o){return this.body.gravity.y=o,this}}},9437:s=>{s.exports={setImmovable:function(o){return o===void 0&&(o=!0),this.body.immovable=o,this}}},30621:s=>{s.exports={setMass:function(o){return this.body.mass=o,this}}},72441:(s,o,i)=>{var r=i(47956),h=i(96503),a=i(2044),u=i(81491);s.exports=function(l,d,c,p,f,v){var g=r(l,d-p,c-p,2*p,2*p,f,v);if(g.length===0)return g;for(var y=new h(d,c,p),m=new h,x=[],b=0;b<g.length;b++){var w=g[b];w.isCircle?(m.setTo(w.center.x,w.center.y,w.halfWidth),a(y,m)&&x.push(w)):u(y,w)&&x.push(w)}return x}},47956:s=>{s.exports=function(o,i,r,h,a,u,l){u===void 0&&(u=!0),l===void 0&&(l=!1);var d=[],c=[],p=o.treeMinMax;if(p.minX=i,p.minY=r,p.maxX=i+h,p.maxY=r+a,l&&(c=o.staticTree.search(p)),u&&o.useTree)d=o.tree.search(p);else if(u){var f=o.bodies,v={position:{x:i,y:r},left:i,top:r,right:i+h,bottom:r+a,isCircle:!1},g=o.intersects;f.iterate(function(y){g(y,v)&&d.push(y)})}return c.concat(d)}},62121:s=>{s.exports={setPushable:function(o){return o===void 0&&(o=!0),this.body.pushable=o,this}}},29384:s=>{s.exports={setOffset:function(o,i){return this.body.setOffset(o,i),this},setSize:function(o,i,r){return this.body.setSize(o,i,r),this},setBodySize:function(o,i,r){return this.body.setSize(o,i,r),this},setCircle:function(o,i,r){return this.body.setCircle(o,i,r),this}}},15098:s=>{s.exports={setVelocity:function(o,i){return this.body.setVelocity(o,i),this},setVelocityX:function(o){return this.body.setVelocityX(o),this},setVelocityY:function(o){return this.body.setVelocityY(o),this},setMaxVelocity:function(o,i){return this.body.maxVelocity.set(o,i),this}}},92209:(s,o,i)=>{s.exports={Acceleration:i(1093),Angular:i(59023),Bounce:i(62069),Collision:i(78389),Debug:i(87118),Drag:i(52819),Enable:i(4074),Friction:i(40831),Gravity:i(26775),Immovable:i(9437),Mass:i(30621),OverlapCirc:i(72441),OverlapRect:i(47956),Pushable:i(62121),Size:i(29384),Velocity:i(15098)}},37747:s=>{s.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},20009:s=>{s.exports="collide"},36768:s=>{s.exports="overlap"},60473:s=>{s.exports="pause"},89954:s=>{s.exports="resume"},61804:s=>{s.exports="tilecollide"},7161:s=>{s.exports="tileoverlap"},34689:s=>{s.exports="worldbounds"},16006:s=>{s.exports="worldstep"},63012:(s,o,i)=>{s.exports={COLLIDE:i(20009),OVERLAP:i(36768),PAUSE:i(60473),RESUME:i(89954),TILE_COLLIDE:i(61804),TILE_OVERLAP:i(7161),WORLD_BOUNDS:i(34689),WORLD_STEP:i(16006)}},27064:(s,o,i)=>{var r=i(37747),h=i(79291),a={ArcadePhysics:i(86689),Body:i(37742),Collider:i(79342),Components:i(92209),Events:i(63012),Factory:i(66022),GetCollidesWith:i(79599),GetOverlapX:i(64897),GetOverlapY:i(45170),SeparateX:i(14087),SeparateY:i(89936),Group:i(60758),Image:i(71289),Sprite:i(13759),StaticBody:i(72624),StaticGroup:i(71464),Tilemap:i(55173),World:i(82248)};a=h(!1,a,r),s.exports=a},96602:s=>{s.exports=function(o,i){return o.collisionCallback?!o.collisionCallback.call(o.collisionCallbackContext,i,o):!o.layer.callbacks[o.index]||!o.layer.callbacks[o.index].callback.call(o.layer.callbacks[o.index].callbackContext,i,o)}},36294:s=>{s.exports=function(o,i){i<0?(o.blocked.none=!1,o.blocked.left=!0):i>0&&(o.blocked.none=!1,o.blocked.right=!0),o.position.x-=i,o.updateCenter(),o.bounce.x===0?o.velocity.x=0:o.velocity.x=-o.velocity.x*o.bounce.x}},67013:s=>{s.exports=function(o,i){i<0?(o.blocked.none=!1,o.blocked.up=!0):i>0&&(o.blocked.none=!1,o.blocked.down=!0),o.position.y-=i,o.updateCenter(),o.bounce.y===0?o.velocity.y=0:o.velocity.y=-o.velocity.y*o.bounce.y}},40012:(s,o,i)=>{var r=i(21329),h=i(53442),a=i(2483);s.exports=function(u,l,d,c,p,f,v){var g=c.left,y=c.top,m=c.right,x=c.bottom,b=d.faceLeft||d.faceRight,w=d.faceTop||d.faceBottom;if(v||(b=!0,w=!0),!b&&!w)return!1;var T=0,S=0,C=0,E=1;if(l.deltaAbsX()>l.deltaAbsY()?C=-1:l.deltaAbsX()<l.deltaAbsY()&&(E=-1),l.deltaX()!==0&&l.deltaY()!==0&&b&&w&&(C=Math.min(Math.abs(l.position.x-m),Math.abs(l.right-g)),E=Math.min(Math.abs(l.position.y-x),Math.abs(l.bottom-y))),C<E){if(b&&(T=r(l,d,g,m,f,v))!==0&&!a(c,l))return!0;w&&(S=h(l,d,y,x,f,v))}else{if(w&&(S=h(l,d,y,x,f,v))!==0&&!a(c,l))return!0;b&&(T=r(l,d,g,m,f,v))}return T!==0||S!==0}},21329:(s,o,i)=>{var r=i(36294);s.exports=function(h,a,u,l,d,c){var p=0,f=a.faceLeft,v=a.faceRight,g=a.collideLeft,y=a.collideRight;return c||(f=!0,v=!0,g=!0,y=!0),h.deltaX()<0&&y&&h.checkCollision.left?v&&h.x<l&&(p=h.x-l)<-d&&(p=0):h.deltaX()>0&&g&&h.checkCollision.right&&f&&h.right>u&&(p=h.right-u)>d&&(p=0),p!==0&&(h.customSeparateX?h.overlapX=p:r(h,p)),p}},53442:(s,o,i)=>{var r=i(67013);s.exports=function(h,a,u,l,d,c){var p=0,f=a.faceTop,v=a.faceBottom,g=a.collideUp,y=a.collideDown;return c||(f=!0,v=!0,g=!0,y=!0),h.deltaY()<0&&y&&h.checkCollision.up?v&&h.y<l&&(p=h.y-l)<-d&&(p=0):h.deltaY()>0&&g&&h.checkCollision.down&&f&&h.bottom>u&&(p=h.bottom-u)>d&&(p=0),p!==0&&(h.customSeparateY?h.overlapY=p:r(h,p)),p}},2483:s=>{s.exports=function(o,i){return!(i.right<=o.left||i.bottom<=o.top||i.position.x>=o.right||i.position.y>=o.bottom)}},55173:(s,o,i)=>{var r={ProcessTileCallbacks:i(96602),ProcessTileSeparationX:i(36294),ProcessTileSeparationY:i(67013),SeparateTile:i(40012),TileCheckX:i(21329),TileCheckY:i(53442),TileIntersectsBody:i(2483)};s.exports=r},44563:(s,o,i)=>{s.exports={Arcade:i(27064),Matter:i(3875)}},68174:(s,o,i)=>{var r=i(83419),h=i(26099),a=new r({initialize:function(){this.boundsCenter=new h,this.centerDiff=new h},parseBody:function(u){if(!(u=u.hasOwnProperty("body")?u.body:u).hasOwnProperty("bounds")||!u.hasOwnProperty("centerOfMass"))return!1;var l=this.boundsCenter,d=this.centerDiff,c=u.bounds.max.x-u.bounds.min.x,p=u.bounds.max.y-u.bounds.min.y,f=c*u.centerOfMass.x,v=p*u.centerOfMass.y;return l.set(c/2,p/2),d.set(f-l.x,v-l.y),!0},getTopLeft:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l+c.x+p.x,d+c.y+p.y)}return!1},getTopCenter:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l+p.x,d+c.y+p.y)}return!1},getTopRight:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l-(c.x-p.x),d+c.y+p.y)}return!1},getLeftCenter:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l+c.x+p.x,d+p.y)}return!1},getCenter:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.centerDiff;return new h(l+c.x,d+c.y)}return!1},getRightCenter:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l-(c.x-p.x),d+p.y)}return!1},getBottomLeft:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l+c.x+p.x,d-(c.y-p.y))}return!1},getBottomCenter:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l+p.x,d-(c.y-p.y))}return!1},getBottomRight:function(u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=0),this.parseBody(u)){var c=this.boundsCenter,p=this.centerDiff;return new h(l-(c.x-p.x),d-(c.y-p.y))}return!1}});s.exports=a},19933:(s,o,i)=>{var r=i(6790);r.Body=i(22562),r.Composite=i(69351),r.World=i(4372),r.Collision=i(52284),r.Detector=i(81388),r.Pairs=i(99561),r.Pair=i(4506),r.Query=i(73296),r.Resolver=i(66272),r.Constraint=i(48140),r.Common=i(53402),r.Engine=i(48413),r.Events=i(35810),r.Sleeping=i(53614),r.Plugin=i(73832),r.Bodies=i(66280),r.Composites=i(74116),r.Axes=i(66615),r.Bounds=i(15647),r.Svg=i(74058),r.Vector=i(31725),r.Vertices=i(41598),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,s.exports=r},28137:(s,o,i)=>{var r=i(66280),h=i(83419),a=i(74116),u=i(48140),l=i(74058),d=i(75803),c=i(23181),p=i(34803),f=i(73834),v=i(19496),g=i(85791),y=i(98713),m=i(41598),x=new h({initialize:function(b){this.world=b,this.scene=b.scene,this.sys=b.scene.sys},rectangle:function(b,w,T,S,C){var E=r.rectangle(b,w,T,S,C);return this.world.add(E),E},trapezoid:function(b,w,T,S,C,E){var M=r.trapezoid(b,w,T,S,C,E);return this.world.add(M),M},circle:function(b,w,T,S,C){var E=r.circle(b,w,T,S,C);return this.world.add(E),E},polygon:function(b,w,T,S,C){var E=r.polygon(b,w,T,S,C);return this.world.add(E),E},fromVertices:function(b,w,T,S,C,E,M){typeof T=="string"&&(T=m.fromPath(T));var _=r.fromVertices(b,w,T,S,C,E,M);return this.world.add(_),_},fromPhysicsEditor:function(b,w,T,S,C){C===void 0&&(C=!0);var E=v.parseBody(b,w,T,S);return C&&!this.world.has(E)&&this.world.add(E),E},fromSVG:function(b,w,T,S,C,E){S===void 0&&(S=1),C===void 0&&(C={}),E===void 0&&(E=!0);for(var M=T.getElementsByTagName("path"),_=[],O=0;O<M.length;O++){var k=l.pathToVertices(M[O],30);S!==1&&m.scale(k,S,S),_.push(k)}var P=r.fromVertices(b,w,_,C);return E&&this.world.add(P),P},fromJSON:function(b,w,T,S,C){S===void 0&&(S={}),C===void 0&&(C=!0);var E=g.parseBody(b,w,T,S);return E&&C&&this.world.add(E),E},imageStack:function(b,w,T,S,C,E,M,_,O){M===void 0&&(M=0),_===void 0&&(_=0),O===void 0&&(O={});var k=this.world,P=this.sys.displayList;O.addToWorld=!1;var A=a.stack(T,S,C,E,M,_,function(L,D){var F=new c(k,L,D,b,w,O);return P.add(F),F.body});return k.add(A),A},stack:function(b,w,T,S,C,E,M){var _=a.stack(b,w,T,S,C,E,M);return this.world.add(_),_},pyramid:function(b,w,T,S,C,E,M){var _=a.pyramid(b,w,T,S,C,E,M);return this.world.add(_),_},chain:function(b,w,T,S,C,E){return a.chain(b,w,T,S,C,E)},mesh:function(b,w,T,S,C){return a.mesh(b,w,T,S,C)},newtonsCradle:function(b,w,T,S,C){var E=a.newtonsCradle(b,w,T,S,C);return this.world.add(E),E},car:function(b,w,T,S,C){var E=a.car(b,w,T,S,C);return this.world.add(E),E},softBody:function(b,w,T,S,C,E,M,_,O,k){var P=a.softBody(b,w,T,S,C,E,M,_,O,k);return this.world.add(P),P},joint:function(b,w,T,S,C){return this.constraint(b,w,T,S,C)},spring:function(b,w,T,S,C){return this.constraint(b,w,T,S,C)},constraint:function(b,w,T,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyA=b.type==="body"?b:b.body,C.bodyB=w.type==="body"?w:w.body,isNaN(T)||(C.length=T),C.stiffness=S;var E=u.create(C);return this.world.add(E),E},worldConstraint:function(b,w,T,S){T===void 0&&(T=1),S===void 0&&(S={}),S.bodyB=b.type==="body"?b:b.body,isNaN(w)||(S.length=w),S.stiffness=T;var C=u.create(S);return this.world.add(C),C},mouseSpring:function(b){return this.pointerConstraint(b)},pointerConstraint:function(b){b===void 0&&(b={}),b.hasOwnProperty("render")||(b.render={visible:!1});var w=new y(this.scene,this.world,b);return this.world.add(w.constraint),w},image:function(b,w,T,S,C){var E=new c(this.world,b,w,T,S,C);return this.sys.displayList.add(E),E},tileBody:function(b,w){return new f(this.world,b,w)},sprite:function(b,w,T,S,C){var E=new p(this.world,b,w,T,S,C);return this.sys.displayList.add(E),this.sys.updateList.add(E),E},gameObject:function(b,w,T){return d(this.world,b,w,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});s.exports=x},75803:(s,o,i)=>{var r=i(31884),h=i(95540),a=i(26099);function u(l){return!!l.get&&typeof l.get=="function"||!!l.set&&typeof l.set=="function"}s.exports=function(l,d,c,p){c===void 0&&(c={}),p===void 0&&(p=!0);var f=d.x,v=d.y;if(d.body={temp:!0,position:{x:f,y:v}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach(function(y){for(var m in y)u(y[m])?Object.defineProperty(d,m,{get:y[m].get,set:y[m].set}):Object.defineProperty(d,m,{value:y[m]})}),d.world=l,d._tempVec2=new a(f,v),c.hasOwnProperty("type")&&c.type==="body")d.setExistingBody(c,p);else{var g=h(c,"shape",null);g||(g="rectangle"),c.addToWorld=p,d.setBody(g,c)}return d}},23181:(s,o,i)=>{var r=i(83419),h=i(31884),a=i(95643),u=i(95540),l=i(88571),d=i(72699),c=i(26099),p=new r({Extends:l,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,d],initialize:function(f,v,g,y,m,x){a.call(this,f.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(y,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new c(v,g);var b=u(x,"shape",null);b?this.setBody(b,x):this.setRectangle(this.width,this.height,x),this.setPosition(v,g),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=p},42045:(s,o,i)=>{var r=i(60461),h=i(66615),a=i(66280),u=i(22562),l=i(68174),d=i(15647),c=i(83419),p=i(52284),f=i(53402),v=i(69351),g=i(74116),y=i(48140),m=i(81388),x=i(20339),b=i(28137),w=i(95540),T=i(35154),S=i(18210),C=i(40178),E=i(6790),M=i(74507),_=i(46975),O=i(4506),k=i(99561),P=i(73832),A=i(37277),L=i(73296),D=i(66272),F=i(44594),X=i(74058),z=i(31725),Y=i(41598),R=i(68243);f.setDecomp(i(55973));var B=new c({initialize:function(I){this.scene=I,this.systems=I.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=u,this.composite=v,this.collision=p,this.detector=m,this.pair=O,this.pairs=k,this.query=L,this.resolver=D,this.constraint=y,this.bodies=a,this.composites=g,this.axes=h,this.bounds=d,this.svg=X,this.vector=z,this.vertices=Y,this.verts=Y,this._tempVec2=z.create(),T(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),T(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),T(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),D._restingThresh=T(this.config,"restingThresh",4),D._restingThreshTangent=T(this.config,"restingThreshTangent",6),D._positionDampen=T(this.config,"positionDampen",.9),D._positionWarming=T(this.config,"positionWarming",.8),D._frictionNormalMultiplier=T(this.config,"frictionNormalMultiplier",5),I.sys.events.once(F.BOOT,this.boot,this),I.sys.events.on(F.START,this.start,this)},boot:function(){this.world=new R(this.scene,this.config),this.add=new b(this.world),this.bodyBounds=new l,this.systems.events.once(F.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new R(this.scene,this.config),this.add=new b(this.world));var I=this.systems.events;I.on(F.UPDATE,this.world.update,this.world),I.on(F.POST_UPDATE,this.world.postUpdate,this.world),I.once(F.SHUTDOWN,this.shutdown,this)},getConfig:function(){var I=this.systems.game.config.physics,G=this.systems.settings.physics;return _(w(G,"matter",{}),w(I,"matter",{}))},enableAttractorPlugin:function(){return P.register(S),P.use(E,S),this},enableWrapPlugin:function(){return P.register(M),P.use(E,M),this},enableCollisionEventsPlugin:function(){return P.register(C),P.use(E,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(I,G){this.world.step(I,G)},containsPoint:function(I,G,N){I=this.getMatterBodies(I);var W=z.create(G,N);return L.point(I,W).length>0},intersectPoint:function(I,G,N){N=this.getMatterBodies(N);var W=z.create(I,G),U=[];return L.point(N,W).forEach(function(V){U.indexOf(V)===-1&&U.push(V)}),U},intersectRect:function(I,G,N,W,U,V){U===void 0&&(U=!1),V=this.getMatterBodies(V);var K={min:{x:I,y:G},max:{x:I+N,y:G+W}},$=[];return L.region(V,K,U).forEach(function(H){$.indexOf(H)===-1&&$.push(H)}),$},intersectRay:function(I,G,N,W,U,V){U===void 0&&(U=1),V=this.getMatterBodies(V);for(var K=[],$=L.ray(V,z.create(I,G),z.create(N,W),U),H=0;H<$.length;H++)K.push($[H].body);return K},intersectBody:function(I,G){G=this.getMatterBodies(G);for(var N=[],W=L.collides(I,G),U=0;U<W.length;U++){var V=W[U];V.bodyA===I?N.push(V.bodyB):N.push(V.bodyA)}return N},overlap:function(I,G,N,W,U){N===void 0&&(N=null),W===void 0&&(W=null),U===void 0&&(U=N),Array.isArray(I)||(I=[I]),I=this.getMatterBodies(I),G=this.getMatterBodies(G);for(var V=!1,K=0;K<I.length;K++)for(var $=I[K],H=L.collides($,G),j=0;j<H.length;j++){var q=H[j],Z=q.bodyA.id===$.id?q.bodyB:q.bodyA;if(!W||W.call(U,$,Z,q)){if(V=!0,N)N.call(U,$,Z,q);else if(!W)return!0}}return V},setCollisionCategory:function(I,G){return(I=this.getMatterBodies(I)).forEach(function(N){N.collisionFilter.category=G}),this},setCollisionGroup:function(I,G){return(I=this.getMatterBodies(I)).forEach(function(N){N.collisionFilter.group=G}),this},setCollidesWith:function(I,G){I=this.getMatterBodies(I);var N=0;if(Array.isArray(G))for(var W=0;W<G.length;W++)N|=G[W];else N=G;return I.forEach(function(U){U.collisionFilter.mask=N}),this},getMatterBodies:function(I){if(!I)return this.world.getAllBodies();Array.isArray(I)||(I=[I]);for(var G=[],N=0;N<I.length;N++){var W=I[N].hasOwnProperty("body")?I[N].body:I[N];G.push(W)}return G},setVelocity:function(I,G,N){I=this.getMatterBodies(I);var W=this._tempVec2;return W.x=G,W.y=N,I.forEach(function(U){u.setVelocity(U,W)}),this},setVelocityX:function(I,G){I=this.getMatterBodies(I);var N=this._tempVec2;return N.x=G,I.forEach(function(W){N.y=W.velocity.y,u.setVelocity(W,N)}),this},setVelocityY:function(I,G){I=this.getMatterBodies(I);var N=this._tempVec2;return N.y=G,I.forEach(function(W){N.x=W.velocity.x,u.setVelocity(W,N)}),this},setAngularVelocity:function(I,G){return(I=this.getMatterBodies(I)).forEach(function(N){u.setAngularVelocity(N,G)}),this},applyForce:function(I,G){I=this.getMatterBodies(I);var N=this._tempVec2;return I.forEach(function(W){N.x=W.position.x,N.y=W.position.y,u.applyForce(W,N,G)}),this},applyForceFromPosition:function(I,G,N,W){I=this.getMatterBodies(I);var U=this._tempVec2;return I.forEach(function(V){W===void 0&&(W=V.angle),U.x=N*Math.cos(W),U.y=N*Math.sin(W),u.applyForce(V,G,U)}),this},applyForceFromAngle:function(I,G,N){I=this.getMatterBodies(I);var W=this._tempVec2;return I.forEach(function(U){N===void 0&&(N=U.angle),W.x=G*Math.cos(N),W.y=G*Math.sin(N),u.applyForce(U,{x:U.position.x,y:U.position.y},W)}),this},getConstraintLength:function(I){var G=I.pointA.x,N=I.pointA.y,W=I.pointB.x,U=I.pointB.y;return I.bodyA&&(G+=I.bodyA.position.x,N+=I.bodyA.position.y),I.bodyB&&(W+=I.bodyB.position.x,U+=I.bodyB.position.y),x(G,N,W,U)},alignBody:function(I,G,N,W){var U;switch(I=I.hasOwnProperty("body")?I.body:I,W){case r.TOP_LEFT:case r.LEFT_TOP:U=this.bodyBounds.getTopLeft(I,G,N);break;case r.TOP_CENTER:U=this.bodyBounds.getTopCenter(I,G,N);break;case r.TOP_RIGHT:case r.RIGHT_TOP:U=this.bodyBounds.getTopRight(I,G,N);break;case r.LEFT_CENTER:U=this.bodyBounds.getLeftCenter(I,G,N);break;case r.CENTER:U=this.bodyBounds.getCenter(I,G,N);break;case r.RIGHT_CENTER:U=this.bodyBounds.getRightCenter(I,G,N);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:U=this.bodyBounds.getBottomLeft(I,G,N);break;case r.BOTTOM_CENTER:U=this.bodyBounds.getBottomCenter(I,G,N);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:U=this.bodyBounds.getBottomRight(I,G,N)}return U&&u.setPosition(I,U),this},shutdown:function(){var I=this.systems.events;this.world&&(I.off(F.UPDATE,this.world.update,this.world),I.off(F.POST_UPDATE,this.world.postUpdate,this.world)),I.off(F.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(F.START,this.start,this),this.scene=null,this.systems=null}});A.register("MatterPhysics",B,"matterPhysics"),s.exports=B},34803:(s,o,i)=>{var r=i(9674),h=i(83419),a=i(31884),u=i(95643),l=i(95540),d=i(72699),c=i(68287),p=i(26099),f=new h({Extends:c,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,d],initialize:function(v,g,y,m,x,b){u.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(m,x),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new p(g,y);var w=l(b,"shape",null);w?this.setBody(w,b):this.setRectangle(this.width,this.height,b),this.setPosition(g,y),this.initPipeline(),this.initPostPipeline(!0)}});s.exports=f},73834:(s,o,i)=>{var r=i(66280),h=i(22562),a=i(83419),u=i(31884),l=i(62644),d=i(50792),c=i(95540),p=i(97022),f=i(41598),v=new a({Extends:d,Mixins:[u.Bounce,u.Collision,u.Friction,u.Gravity,u.Mass,u.Sensor,u.Sleep,u.Static],initialize:function(g,y,m){d.call(this),this.tile=y,this.world=g,y.physics.matterBody&&y.physics.matterBody.destroy(),y.physics.matterBody=this;var x=c(m,"body",null),b=c(m,"addToWorld",!0);if(x)this.setBody(x,b);else{var w=y.getCollisionGroup();c(w,"objects",[]).length>0?this.setFromTileCollision(m):this.setFromTileRectangle(m)}if(y.flipX||y.flipY){var T={x:y.getCenterX(),y:y.getCenterY()},S=y.flipX?-1:1,C=y.flipY?-1:1;h.scale(x,S,C,T)}},setFromTileRectangle:function(g){g===void 0&&(g={}),p(g,"isStatic")||(g.isStatic=!0),p(g,"addToWorld")||(g.addToWorld=!0);var y=this.tile.getBounds(),m=y.x+y.width/2,x=y.y+y.height/2,b=r.rectangle(m,x,y.width,y.height,g);return this.setBody(b,g.addToWorld),this},setFromTileCollision:function(g){g===void 0&&(g={}),p(g,"isStatic")||(g.isStatic=!0),p(g,"addToWorld")||(g.addToWorld=!0);for(var y=this.tile.tilemapLayer.scaleX,m=this.tile.tilemapLayer.scaleY,x=this.tile.getLeft(),b=this.tile.getTop(),w=this.tile.getCollisionGroup(),T=c(w,"objects",[]),S=[],C=0;C<T.length;C++){var E=T[C],M=x+E.x*y,_=b+E.y*m,O=E.width*y,k=E.height*m,P=null;if(E.rectangle)P=r.rectangle(M+O/2,_+k/2,O,k,g);else if(E.ellipse)P=r.circle(M+O/2,_+k/2,O/2,g);else if(E.polygon||E.polyline){var A=(E.polygon?E.polygon:E.polyline).map(function(X){return{x:X.x*y,y:X.y*m}}),L=f.create(A),D=f.centre(L);M+=D.x,_+=D.y,P=r.fromVertices(M,_,L,g)}P&&S.push(P)}if(S.length===1)this.setBody(S[0],g.addToWorld);else if(S.length>1){var F=l(g);F.parts=S,this.setBody(h.create(F),F.addToWorld)}return this},setBody:function(g,y){return y===void 0&&(y=!0),this.body&&this.removeBody(),this.body=g,this.body.gameObject=this,y&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});s.exports=v},19496:(s,o,i)=>{var r=i(66280),h=i(22562),a=i(53402),u=i(95540),l=i(41598),d={parseBody:function(c,p,f,v){v===void 0&&(v={});for(var g=u(f,"fixtures",[]),y=[],m=0;m<g.length;m++)for(var x=this.parseFixture(g[m]),b=0;b<x.length;b++)y.push(x[b]);var w=a.clone(f,!0);a.extend(w,v,!0),delete w.fixtures,delete w.type;var T=h.create(w);return h.setParts(T,y),h.setPosition(T,{x:c,y:p}),T},parseFixture:function(c){var p,f=a.extend({},!1,c);if(delete f.circle,delete f.vertices,c.circle){var v=u(c.circle,"x"),g=u(c.circle,"y"),y=u(c.circle,"radius");p=[r.circle(v,g,y,f)]}else c.vertices&&(p=this.parseVertices(c.vertices,f));return p},parseVertices:function(c,p){p===void 0&&(p={});for(var f=[],v=0;v<c.length;v++)l.clockwiseSort(c[v]),f.push(h.create(a.extend({position:l.centre(c[v]),vertices:c[v]},p)));return r.flagCoincidentParts(f)}};s.exports=d},85791:(s,o,i)=>{var r=i(66280),h=i(22562),a={parseBody:function(u,l,d,c){var p;c===void 0&&(c={});var f=d.vertices;if(f.length===1)c.vertices=f[0],p=h.create(c),r.flagCoincidentParts(p.parts);else{for(var v=[],g=0;g<f.length;g++){var y=h.create({vertices:f[g]});v.push(y)}r.flagCoincidentParts(v),c.parts=v,p=h.create(c)}return p.label=d.label,h.setPosition(p,{x:u,y:l}),p}};s.exports=a},98713:(s,o,i)=>{var r=i(15647),h=i(83419),a=i(69351),u=i(48140),l=i(81388),d=i(1121),c=i(8214),p=i(46975),f=i(53614),v=i(26099),g=i(41598),y=new h({initialize:function(m,x,b){b===void 0&&(b={}),this.scene=m,this.world=x,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=u.create(p(b,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(d.BEFORE_UPDATE,this.update,this),m.sys.input.on(c.POINTER_DOWN,this.onDown,this),m.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(m){this.pointer||(this.pointer=m,this.camera=m.camera)},onUp:function(m){m===this.pointer&&(this.pointer=null)},getBody:function(m){var x=this.position,b=this.constraint;this.camera.getWorldPoint(m.x,m.y,x);for(var w=a.allBodies(this.world.localWorld),T=0;T<w.length;T++){var S=w[T];if(!S.ignorePointer&&r.contains(S.bounds,x)&&l.canCollide(S.collisionFilter,b.collisionFilter)&&this.hitTestBody(S,x))return this.world.emit(d.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(m,x){for(var b=this.constraint,w=m.parts.length,T=w>1?1:0;T<w;T++){var S=m.parts[T];if(g.contains(S.vertices,x))return b.pointA=x,b.pointB={x:x.x-m.position.x,y:x.y-m.position.y},b.bodyB=m,b.angleB=m.angle,f.set(m,!1),this.part=S,this.body=m,!0}return!1},update:function(){var m=this.pointer,x=this.body;if(this.active&&m)if(m.isDown||!x){if(m.isDown){if(!this.camera||!x&&!this.getBody(m))return;x=this.body;var b=this.position,w=this.constraint;this.camera.getWorldPoint(m.x,m.y,b),w.pointA.x=b.x,w.pointA.y=b.y,f.set(x,!1),this.world.emit(d.DRAG,x,this)}}else this.stopDrag();else x&&this.stopDrag()},stopDrag:function(){var m=this.body,x=this.constraint;x.bodyB=null,x.pointB=null,this.pointer=null,this.body=null,this.part=null,m&&this.world.emit(d.DRAG_END,m,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(d.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}});s.exports=y},68243:(s,o,i)=>{var r=i(66280),h=i(22562),a=i(83419),u=i(53402),l=i(69351),d=i(48413),c=i(50792),p=i(1121),f=i(95540),v=i(35154),g=i(22562),y=i(35810),m=i(73834),x=i(4372),b=i(31725),w=new a({Extends:c,initialize:function(T,S){c.call(this),this.scene=T,this.engine=d.create(S),this.localWorld=this.engine.world;var C=v(S,"gravity",null);C?this.setGravity(C.x,C.y,C.scale):C===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(S,"enabled",!0),this.getDelta=v(S,"getDelta",this.update60Hz);var E=f(S,"runner",{}),M=f(E,"fps",!1),_=f(E,"fps",60),O=f(E,"delta",1e3/_),k=f(E,"deltaMin",1e3/_),P=f(E,"deltaMax",1e3/(.5*_));M||(_=1e3/O),this.runner={fps:_,deltaSampleSize:f(E,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:f(E,"isFixed",!1),delta:O,deltaMin:k,deltaMax:P},this.autoUpdate=v(S,"autoUpdate",!0);var A=v(S,"debug",!1);if(this.drawDebug=typeof A=="object"||A,this.debugGraphic,this.debugConfig={showAxes:f(A,"showAxes",!1),showAngleIndicator:f(A,"showAngleIndicator",!1),angleColor:f(A,"angleColor",15208787),showBroadphase:f(A,"showBroadphase",!1),broadphaseColor:f(A,"broadphaseColor",16757760),showBounds:f(A,"showBounds",!1),boundsColor:f(A,"boundsColor",16777215),showVelocity:f(A,"showVelocity",!1),velocityColor:f(A,"velocityColor",44783),showCollisions:f(A,"showCollisions",!1),collisionColor:f(A,"collisionColor",16094476),showSeparations:f(A,"showSeparations",!1),separationColor:f(A,"separationColor",16753920),showBody:f(A,"showBody",!0),showStaticBody:f(A,"showStaticBody",!0),showInternalEdges:f(A,"showInternalEdges",!1),renderFill:f(A,"renderFill",!1),renderLine:f(A,"renderLine",!0),fillColor:f(A,"fillColor",1075465),fillOpacity:f(A,"fillOpacity",1),lineColor:f(A,"lineColor",2678297),lineOpacity:f(A,"lineOpacity",1),lineThickness:f(A,"lineThickness",1),staticFillColor:f(A,"staticFillColor",857979),staticLineColor:f(A,"staticLineColor",1255396),showSleeping:f(A,"showSleeping",!1),staticBodySleepOpacity:f(A,"staticBodySleepOpacity",.7),sleepFillColor:f(A,"sleepFillColor",4605510),sleepLineColor:f(A,"sleepLineColor",10066585),showSensors:f(A,"showSensors",!0),sensorFillColor:f(A,"sensorFillColor",857979),sensorLineColor:f(A,"sensorLineColor",1255396),showPositions:f(A,"showPositions",!0),positionSize:f(A,"positionSize",4),positionColor:f(A,"positionColor",14697178),showJoint:f(A,"showJoint",!0),jointColor:f(A,"jointColor",14737474),jointLineOpacity:f(A,"jointLineOpacity",1),jointLineThickness:f(A,"jointLineThickness",2),pinSize:f(A,"pinSize",4),pinColor:f(A,"pinColor",4382944),springColor:f(A,"springColor",14697184),anchorColor:f(A,"anchorColor",15724527),anchorSize:f(A,"anchorSize",4),showConvexHulls:f(A,"showConvexHulls",!1),hullColor:f(A,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),f(S,"setBounds",!1)){var L=S.setBounds;if(typeof L=="boolean")this.setBounds();else{var D=f(L,"x",0),F=f(L,"y",0),X=f(L,"width",T.sys.scale.width),z=f(L,"height",T.sys.scale.height),Y=f(L,"thickness",64),R=f(L,"left",!0),B=f(L,"right",!0),I=f(L,"top",!0),G=f(L,"bottom",!0);this.setBounds(D,F,X,z,Y,R,B,I,G)}}},setCompositeRenderStyle:function(T){var S,C,E,M=T.bodies,_=T.constraints,O=T.composites;for(S=0;S<M.length;S++)E=(C=M[S]).render,this.setBodyRenderStyle(C,E.lineColor,E.lineOpacity,E.lineThickness,E.fillColor,E.fillOpacity);for(S=0;S<_.length;S++)E=(C=_[S]).render,this.setConstraintRenderStyle(C,E.lineColor,E.lineOpacity,E.lineThickness,E.pinSize,E.anchorColor,E.anchorSize);for(S=0;S<O.length;S++)C=O[S],this.setCompositeRenderStyle(C);return this},setBodyRenderStyle:function(T,S,C,E,M,_){var O=T.render,k=this.debugConfig;return O?(S==null&&(S=T.isStatic?k.staticLineColor:k.lineColor),C==null&&(C=k.lineOpacity),E==null&&(E=k.lineThickness),M==null&&(M=T.isStatic?k.staticFillColor:k.fillColor),_==null&&(_=k.fillOpacity),S!==!1&&(O.lineColor=S),C!==!1&&(O.lineOpacity=C),E!==!1&&(O.lineThickness=E),M!==!1&&(O.fillColor=M),_!==!1&&(O.fillOpacity=_),this):this},setConstraintRenderStyle:function(T,S,C,E,M,_,O){var k=T.render,P=this.debugConfig;if(!k)return this;if(S==null){var A=k.type;A==="line"?S=P.jointColor:A==="pin"?S=P.pinColor:A==="spring"&&(S=P.springColor)}return C==null&&(C=P.jointLineOpacity),E==null&&(E=P.jointLineThickness),M==null&&(M=P.pinSize),_==null&&(_=P.anchorColor),O==null&&(O=P.anchorSize),S!==!1&&(k.lineColor=S),C!==!1&&(k.lineOpacity=C),E!==!1&&(k.lineThickness=E),M!==!1&&(k.pinSize=M),_!==!1&&(k.anchorColor=_),O!==!1&&(k.anchorSize=O),this},setEventsProxy:function(){var T=this,S=this.engine,C=this.localWorld;this.drawDebug&&(y.on(C,"compositeModified",function(E){T.setCompositeRenderStyle(E)}),y.on(C,"beforeAdd",function(E){for(var M=[].concat(E.object),_=0;_<M.length;_++){var O=M[_],k=O.render;O.type==="body"?T.setBodyRenderStyle(O,k.lineColor,k.lineOpacity,k.lineThickness,k.fillColor,k.fillOpacity):O.type==="composite"?T.setCompositeRenderStyle(O):O.type==="constraint"&&T.setConstraintRenderStyle(O,k.lineColor,k.lineOpacity,k.lineThickness,k.pinSize,k.anchorColor,k.anchorSize)}})),y.on(C,"beforeAdd",function(E){T.emit(p.BEFORE_ADD,E)}),y.on(C,"afterAdd",function(E){T.emit(p.AFTER_ADD,E)}),y.on(C,"beforeRemove",function(E){T.emit(p.BEFORE_REMOVE,E)}),y.on(C,"afterRemove",function(E){T.emit(p.AFTER_REMOVE,E)}),y.on(S,"beforeUpdate",function(E){T.emit(p.BEFORE_UPDATE,E)}),y.on(S,"afterUpdate",function(E){T.emit(p.AFTER_UPDATE,E)}),y.on(S,"collisionStart",function(E){var M,_,O=E.pairs;O.length>0&&(M=O[0].bodyA,_=O[0].bodyB),T.emit(p.COLLISION_START,E,M,_)}),y.on(S,"collisionActive",function(E){var M,_,O=E.pairs;O.length>0&&(M=O[0].bodyA,_=O[0].bodyB),T.emit(p.COLLISION_ACTIVE,E,M,_)}),y.on(S,"collisionEnd",function(E){var M,_,O=E.pairs;O.length>0&&(M=O[0].bodyA,_=O[0].bodyB),T.emit(p.COLLISION_END,E,M,_)})},setBounds:function(T,S,C,E,M,_,O,k,P){return T===void 0&&(T=0),S===void 0&&(S=0),C===void 0&&(C=this.scene.sys.scale.width),E===void 0&&(E=this.scene.sys.scale.height),M===void 0&&(M=64),_===void 0&&(_=!0),O===void 0&&(O=!0),k===void 0&&(k=!0),P===void 0&&(P=!0),this.updateWall(_,"left",T-M,S-M,M,E+2*M),this.updateWall(O,"right",T+C,S-M,M,E+2*M),this.updateWall(k,"top",T,S-M,C,M),this.updateWall(P,"bottom",T,S+E,C,M),this},updateWall:function(T,S,C,E,M,_){var O=this.walls[S];T?(O&&x.remove(this.localWorld,O),C+=M/2,E+=_/2,this.walls[S]=this.create(C,E,M,_,{isStatic:!0,friction:0,frictionStatic:0})):(O&&x.remove(this.localWorld,O),this.walls[S]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,S,C){return T===void 0&&(T=0),S===void 0&&(S=1),C===void 0&&(C=.001),this.localWorld.gravity.x=T,this.localWorld.gravity.y=S,this.localWorld.gravity.scale=C,this},create:function(T,S,C,E,M){var _=r.rectangle(T,S,C,E,M);return x.add(this.localWorld,_),_},add:function(T){return x.add(this.localWorld,T),this},remove:function(T,S){Array.isArray(T)||(T=[T]);for(var C=0;C<T.length;C++){var E=T[C],M=E.body?E.body:E;l.remove(this.localWorld,M,S)}return this},removeConstraint:function(T,S){return l.remove(this.localWorld,T,S),this},convertTilemapLayer:function(T,S){var C=T.layer,E=T.getTilesWithin(0,0,C.width,C.height,{isColliding:!0});return this.convertTiles(E,S),this},convertTiles:function(T,S){if(T.length===0)return this;for(var C=0;C<T.length;C++)new m(this,T[C],S);return this},nextGroup:function(T){return g.nextGroup(T)},nextCategory:function(){return g.nextCategory()},pause:function(){return this.enabled=!1,this.emit(p.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(p.RESUME),this},update:function(T,S){if(this.enabled&&this.autoUpdate){var C=this.engine,E=this.runner,M=C.timing;E.isFixed?S=this.getDelta(T,S):(S=T-E.timePrev||E.delta,E.timePrev=T,E.deltaHistory.push(S),E.deltaHistory=E.deltaHistory.slice(-E.deltaSampleSize),S=(S=(S=Math.min.apply(null,E.deltaHistory))<E.deltaMin?E.deltaMin:S)>E.deltaMax?E.deltaMax:S,E.delta=S),E.timeScalePrev=M.timeScale,E.frameCounter+=1,T-E.counterTimestamp>=1e3&&(E.fps=E.frameCounter*((T-E.counterTimestamp)/1e3),E.counterTimestamp=T,E.frameCounter=0),d.update(C,S)}},step:function(T){d.update(this.engine,T)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var S=T.hasOwnProperty("body")?T.body:T;return l.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return l.allBodies(this.localWorld)},getAllConstraints:function(){return l.allConstraints(this.localWorld)},getAllComposites:function(){return l.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var T=this.debugConfig,S=this.engine,C=this.debugGraphic,E=l.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,C,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(E,C,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(E),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(E,C,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(E,C,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(S.pairs.list,C,T.separationColor),T.showCollisions&&this.renderCollisions(S.pairs.list,C,T.collisionColor)}},renderGrid:function(T,S,C,E){S.lineStyle(1,C,E);for(var M=u.keys(T.buckets),_=0;_<M.length;_++){var O=M[_];if(!(T.buckets[O].length<2)){var k=O.split(/C|R/);S.strokeRect(parseInt(k[1],10)*T.bucketWidth,parseInt(k[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,S,C){S.lineStyle(1,C,1);for(var E=0;E<T.length;E++){var M=T[E];if(M.isActive){var _=M.collision,O=_.bodyA,k=_.bodyB,P=O.position,A=k.position,L=_.penetration,D=O.isStatic||k.isStatic?1:4;k.isStatic&&(D=0),S.lineBetween(A.x,A.y,A.x-L.x*D,A.y-L.y*D),D=O.isStatic||k.isStatic?1:4,O.isStatic&&(D=0),S.lineBetween(P.x,P.y,P.x-L.x*D,P.y-L.y*D)}}return this},renderCollisions:function(T,S,C){var E,M;for(S.lineStyle(1,C,.5),S.fillStyle(C,1),E=0;E<T.length;E++)if((M=T[E]).isActive)for(var _=0;_<M.activeContacts.length;_++){var O=M.activeContacts[_].vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(E=0;E<T.length;E++)if((M=T[E]).isActive){var k=M.collision,P=M.activeContacts;if(P.length>0){var A=P[0].vertex.x,L=P[0].vertex.y;P.length===2&&(A=(P[0].vertex.x+P[1].vertex.x)/2,L=(P[0].vertex.y+P[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic?S.lineBetween(A-8*k.normal.x,L-8*k.normal.y,A,L):S.lineBetween(A+8*k.normal.x,L+8*k.normal.y,A,L)}}return this},renderBodyBounds:function(T,S,C,E){S.lineStyle(1,C,E);for(var M=0;M<T.length;M++){var _=T[M];if(_.render.visible){var O=_.bounds;if(O)S.strokeRect(O.min.x,O.min.y,O.max.x-O.min.x,O.max.y-O.min.y);else for(var k=_.parts,P=k.length>1?1:0;P<k.length;P++){var A=k[P];S.strokeRect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}}return this},renderBodyAxes:function(T,S,C,E,M){S.lineStyle(1,E,M);for(var _=0;_<T.length;_++){var O,k,P,A=T[_],L=A.parts;if(A.render.visible)if(C)for(k=L.length>1?1:0;k<L.length;k++)for(O=L[k],P=0;P<O.axes.length;P++){var D=O.axes[P];S.lineBetween(O.position.x,O.position.y,O.position.x+20*D.x,O.position.y+20*D.y)}else for(k=L.length>1?1:0;k<L.length;k++)for(O=L[k],P=0;P<O.axes.length;P++)S.lineBetween(O.position.x,O.position.y,(O.vertices[0].x+O.vertices[O.vertices.length-1].x)/2,(O.vertices[0].y+O.vertices[O.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(T,S,C,E,M){S.lineStyle(M,C,E);for(var _=0;_<T.length;_++){var O=T[_];O.render.visible&&S.lineBetween(O.position.x,O.position.y,O.position.x+2*(O.position.x-O.positionPrev.x),O.position.y+2*(O.position.y-O.positionPrev.y))}return this},renderBodies:function(T){for(var S=this.debugGraphic,C=this.debugConfig,E=C.showBody,M=C.showStaticBody,_=C.showSleeping,O=C.showInternalEdges,k=C.showConvexHulls,P=C.renderFill,A=C.renderLine,L=C.staticBodySleepOpacity,D=C.sleepFillColor,F=C.sleepLineColor,X=C.hullColor,z=0;z<T.length;z++){var Y=T[z];if(Y.render.visible&&(M||!Y.isStatic)&&(E||Y.isStatic)){var R=Y.render.lineColor,B=Y.render.lineOpacity,I=Y.render.lineThickness,G=Y.render.fillColor,N=Y.render.fillOpacity;_&&Y.isSleeping&&(Y.isStatic?(B*=L,N*=L):(R=F,G=D)),P||(G=null),A||(R=null),this.renderBody(Y,S,O,R,B,I,G,N);var W=Y.parts.length;k&&W>1&&this.renderConvexHull(Y,S,X,I)}}},renderBody:function(T,S,C,E,M,_,O,k){E===void 0&&(E=null),M===void 0&&(M=null),_===void 0&&(_=1),O===void 0&&(O=null),k===void 0&&(k=null);for(var P=this.debugConfig,A=P.sensorFillColor,L=P.sensorLineColor,D=T.parts,F=D.length,X=F>1?1:0;X<F;X++){var z=D[X],Y=z.render,R=Y.opacity;if(Y.visible&&R!==0&&(!z.isSensor||P.showSensors)){var B=z.circleRadius;if(S.beginPath(),z.isSensor?(O!==null&&S.fillStyle(A,k*R),E!==null&&S.lineStyle(_,L,M*R)):(O!==null&&S.fillStyle(O,k*R),E!==null&&S.lineStyle(_,E,M*R)),B)S.arc(z.position.x,z.position.y,B,0,2*Math.PI);else{var I=z.vertices,G=I.length;S.moveTo(I[0].x,I[0].y);for(var N=1;N<G;N++){var W=I[N];if(!I[N-1].isInternal||C?S.lineTo(W.x,W.y):S.moveTo(W.x,W.y),N<G&&W.isInternal&&!C){var U=(N+1)%G;S.moveTo(I[U].x,I[U].y)}}S.closePath()}O!==null&&S.fillPath(),E!==null&&S.strokePath()}}if(P.showPositions&&!T.isStatic){var V=T.position.x,K=T.position.y,$=Math.ceil(P.positionSize/2);S.fillStyle(P.positionColor,1),S.fillRect(V-$,K-$,P.positionSize,P.positionSize)}return this},renderConvexHull:function(T,S,C,E){if(E===void 0&&(E=1),T.parts.length>1){var M=T.vertices;S.lineStyle(E,C),S.beginPath(),S.moveTo(M[0].x,M[0].y);for(var _=1;_<M.length;_++)S.lineTo(M[_].x,M[_].y);S.lineTo(M[0].x,M[0].y),S.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,S=l.allConstraints(this.localWorld),C=0;C<S.length;C++){var E=S[C].render,M=E.lineColor,_=E.lineOpacity,O=E.lineThickness,k=E.pinSize,P=E.anchorColor,A=E.anchorSize;this.renderConstraint(S[C],T,M,_,O,k,P,A)}},renderConstraint:function(T,S,C,E,M,_,O,k){var P=T.render;if(!P.visible||!T.pointA||!T.pointB)return this;S.lineStyle(M,C,E);var A,L,D=T.bodyA,F=T.bodyB;if(A=D?b.add(D.position,T.pointA):T.pointA,P.type==="pin")S.strokeCircle(A.x,A.y,_);else{if(L=F?b.add(F.position,T.pointB):T.pointB,S.beginPath(),S.moveTo(A.x,A.y),P.type==="spring")for(var X,z=b.sub(L,A),Y=b.perp(b.normalise(z)),R=Math.ceil(u.clamp(T.length/5,12,20)),B=1;B<R;B+=1)X=B%2==0?1:-1,S.lineTo(A.x+z.x*(B/R)+Y.x*X*4,A.y+z.y*(B/R)+Y.y*X*4);S.lineTo(L.x,L.y)}return S.strokePath(),P.anchors&&k>0&&(S.fillStyle(O),S.fillCircle(A.x,A.y,k),S.fillCircle(L.x,L.y,k)),this},resetCollisionIDs:function(){return h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,this},shutdown:function(){y.off(this.engine),this.removeAllListeners(),x.clear(this.localWorld,!1),d.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});s.exports=w},70410:s=>{s.exports={setBounce:function(o){return this.body.restitution=o,this}}},66968:s=>{var o={setCollisionCategory:function(i){return this.body.collisionFilter.category=i,this},setCollisionGroup:function(i){return this.body.collisionFilter.group=i,this},setCollidesWith:function(i){var r=0;if(Array.isArray(i))for(var h=0;h<i.length;h++)r|=i[h];else r=i;return this.body.collisionFilter.mask=r,this},setOnCollide:function(i){return this.body.onCollideCallback=i,this},setOnCollideEnd:function(i){return this.body.onCollideEndCallback=i,this},setOnCollideActive:function(i){return this.body.onCollideActiveCallback=i,this},setOnCollideWith:function(i,r){Array.isArray(i)||(i=[i]);for(var h=0;h<i.length;h++){var a=i[h].hasOwnProperty("body")?i[h].body:i[h];this.body.setOnCollideWith(a,r)}return this}};s.exports=o},51607:(s,o,i)=>{var r=i(22562),h={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,u){return r.applyForce(this.body,a,u),this},thrust:function(a){var u=this.body.angle;return this._tempVec2.set(a*Math.cos(u),a*Math.sin(u)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var u=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(u),a*Math.sin(u)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var u=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(u),a*Math.sin(u)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var u=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(u),a*Math.sin(u)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};s.exports=h},5436:s=>{s.exports={setFriction:function(o,i,r){return this.body.friction=o,i!==void 0&&(this.body.frictionAir=i),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(o){return this.body.frictionAir=o,this},setFrictionStatic:function(o){return this.body.frictionStatic=o,this}}},39858:s=>{s.exports={setIgnoreGravity:function(o){return this.body.ignoreGravity=o,this}}},37302:(s,o,i)=>{var r=i(22562),h=i(26099),a={setMass:function(u){return r.setMass(this.body,u),this},setDensity:function(u){return r.setDensity(this.body,u),this},centerOfMass:{get:function(){return new h(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};s.exports=a},39132:s=>{s.exports={setSensor:function(o){return this.body.isSensor=o,this},isSensor:function(){return this.body.isSensor}}},57772:(s,o,i)=>{var r=i(66280),h=i(22562),a=i(43855),u=i(95540),l=i(19496),d=i(85791),c=i(41598),p={setRectangle:function(f,v,g){return this.setBody({type:"rectangle",width:f,height:v},g)},setCircle:function(f,v){return this.setBody({type:"circle",radius:f},v)},setPolygon:function(f,v,g){return this.setBody({type:"polygon",sides:v,radius:f},g)},setTrapezoid:function(f,v,g,y){return this.setBody({type:"trapezoid",width:f,height:v,slope:g},y)},setExistingBody:function(f,v){v===void 0&&(v=!0),this.body&&this.world.remove(this.body,!0),this.body=f;for(var g=0;g<f.parts.length;g++)f.parts[g].gameObject=this;var y=this;if(f.destroy=function(){y.world.remove(y.body,!0),y.body.gameObject=null},v&&(this.world.has(f)&&this.world.remove(f,!0),this.world.add(f)),this._originComponent){var m=f.render.sprite.xOffset,x=f.render.sprite.yOffset,b=f.centerOfMass.x,w=f.centerOfMass.y;if(a(b,.5)&&a(w,.5))this.setOrigin(m+.5,x+.5);else{var T=f.centerOffset.x,S=f.centerOffset.y;this.setOrigin(m+T/this.displayWidth,x+S/this.displayHeight)}}return this},setBody:function(f,v){if(!f)return this;var g;typeof f=="string"&&(f={type:f});var y=u(f,"type","rectangle"),m=u(f,"x",this._tempVec2.x),x=u(f,"y",this._tempVec2.y),b=u(f,"width",this.width),w=u(f,"height",this.height);switch(y){case"rectangle":g=r.rectangle(m,x,b,w,v);break;case"circle":var T=u(f,"radius",Math.max(b,w)/2),S=u(f,"maxSides",25);g=r.circle(m,x,T,v,S);break;case"trapezoid":var C=u(f,"slope",.5);g=r.trapezoid(m,x,b,w,C,v);break;case"polygon":var E=u(f,"sides",5),M=u(f,"radius",Math.max(b,w)/2);g=r.polygon(m,x,E,M,v);break;case"fromVertices":case"fromVerts":var _=u(f,"verts",null);if(_)if(typeof _=="string"&&(_=c.fromPath(_)),this.body&&!this.body.hasOwnProperty("temp"))h.setVertices(this.body,_),g=this.body;else{var O=u(f,"flagInternal",!1),k=u(f,"removeCollinear",.01),P=u(f,"minimumArea",10);g=r.fromVertices(m,x,_,v,O,k,P)}break;case"fromPhysicsEditor":g=l.parseBody(m,x,f,v);break;case"fromPhysicsTracer":g=d.parseBody(m,x,f,v)}return g&&this.setExistingBody(g,f.addToWorld),this}};s.exports=p},38083:(s,o,i)=>{var r=i(1121),h=i(53614),a=i(35810),u={setToSleep:function(){return h.set(this.body,!0),this},setAwake:function(){return h.set(this.body,!1),this},setSleepThreshold:function(l){return l===void 0&&(l=60),this.body.sleepThreshold=l,this},setSleepEvents:function(l,d){return this.setSleepStartEvent(l),this.setSleepEndEvent(d),this},setSleepStartEvent:function(l){if(l){var d=this.world;a.on(this.body,"sleepStart",function(c){d.emit(r.SLEEP_START,c,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(l){if(l){var d=this.world;a.on(this.body,"sleepEnd",function(c){d.emit(r.SLEEP_END,c,this)})}else a.off(this.body,"sleepEnd");return this}};s.exports=u},90556:(s,o,i)=>{var r=i(22562),h={setStatic:function(a){return r.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};s.exports=h},85436:(s,o,i)=>{var r=i(22562),h=i(36383),a=i(86554),u=i(30954),l={x:{get:function(){return this.body.position.x},set:function(d){this._tempVec2.set(d,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(d){this._tempVec2.set(this.x,d),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(d){var c=1/this._scaleX,p=1/this._scaleY;this._scaleX=d,this._scaleX===0?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,c,p),r.scale(this.body,d,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(d){var c=1/this._scaleX,p=1/this._scaleY;this._scaleY=d,this._scaleY===0?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,c,p),r.scale(this.body,this._scaleX,d)}},angle:{get:function(){return u(this.body.angle*h.RAD_TO_DEG)},set:function(d){this.rotation=u(d)*h.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(d){this._rotation=a(d),r.setAngle(this.body,this._rotation)}},setPosition:function(d,c){return d===void 0&&(d=0),c===void 0&&(c=d),this._tempVec2.set(d,c),r.setPosition(this.body,this._tempVec2),this},setRotation:function(d){return d===void 0&&(d=0),this._rotation=a(d),r.setAngle(this.body,d),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(d){return d===void 0&&(d=0),this.angle=d,r.setAngle(this.body,this.rotation),this},setScale:function(d,c,p){d===void 0&&(d=1),c===void 0&&(c=d);var f=1/this._scaleX,v=1/this._scaleY;return this._scaleX=d,this._scaleY=c,r.scale(this.body,f,v,p),r.scale(this.body,d,c,p),this}};s.exports=l},42081:(s,o,i)=>{var r=i(22562),h={setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,u){return this._tempVec2.set(a,u),r.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return r.getVelocity(this.body)},setAngularVelocity:function(a){return r.setAngularVelocity(this.body,a),this},getAngularVelocity:function(){return r.getAngularVelocity(this.body)},setAngularSpeed:function(a){return r.setAngularSpeed(this.body,a),this},getAngularSpeed:function(){return r.getAngularSpeed(this.body)}};s.exports=h},31884:(s,o,i)=>{s.exports={Bounce:i(70410),Collision:i(66968),Force:i(51607),Friction:i(5436),Gravity:i(39858),Mass:i(37302),Sensor:i(39132),SetBody:i(57772),Sleep:i(38083),Static:i(90556),Transform:i(85436),Velocity:i(42081)}},85608:s=>{s.exports="afteradd"},1213:s=>{s.exports="afterremove"},25968:s=>{s.exports="afterupdate"},67205:s=>{s.exports="beforeadd"},39438:s=>{s.exports="beforeremove"},44823:s=>{s.exports="beforeupdate"},92593:s=>{s.exports="collisionactive"},60128:s=>{s.exports="collisionend"},76861:s=>{s.exports="collisionstart"},92362:s=>{s.exports="dragend"},76408:s=>{s.exports="drag"},93971:s=>{s.exports="dragstart"},5656:s=>{s.exports="pause"},47861:s=>{s.exports="resume"},79099:s=>{s.exports="sleepend"},35906:s=>{s.exports="sleepstart"},1121:(s,o,i)=>{s.exports={AFTER_ADD:i(85608),AFTER_REMOVE:i(1213),AFTER_UPDATE:i(25968),BEFORE_ADD:i(67205),BEFORE_REMOVE:i(39438),BEFORE_UPDATE:i(44823),COLLISION_ACTIVE:i(92593),COLLISION_END:i(60128),COLLISION_START:i(76861),DRAG_END:i(92362),DRAG:i(76408),DRAG_START:i(93971),PAUSE:i(5656),RESUME:i(47861),SLEEP_END:i(79099),SLEEP_START:i(35906)}},3875:(s,o,i)=>{s.exports={BodyBounds:i(68174),Components:i(31884),Events:i(1121),Factory:i(28137),MatterGameObject:i(75803),Image:i(23181),Matter:i(19933),MatterPhysics:i(42045),PolyDecomp:i(55973),Sprite:i(34803),TileBody:i(73834),PhysicsEditorParser:i(19496),PhysicsJSONParser:i(85791),PointerConstraint:i(98713),World:i(68243)}},22562:(s,o,i)=>{var r={};s.exports=r;var h=i(41598),a=i(31725),u=i(53614),l=i(53402),d=i(15647),c=i(66615);(function(){r._timeCorrection=!0,r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r._baseDelta=16.666666666666668,r.create=function(f){var v={id:l.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!f.hasOwnProperty("position")&&f.hasOwnProperty("vertices")?f.position=h.centre(f.vertices):f.hasOwnProperty("vertices")||(v.vertices=h.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var g=l.extend(v,f);return p(g,f),g.setOnCollideWith=function(y,m){return m?this.onCollideWith[y.id]=m:delete this.onCollideWith[y.id],this},g},r.nextGroup=function(f){return f?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var p=function(f,v){if(v=v||{},r.set(f,{bounds:f.bounds||d.create(f.vertices),positionPrev:f.positionPrev||a.clone(f.position),anglePrev:f.anglePrev||f.angle,vertices:f.vertices,parts:f.parts||[f],isStatic:f.isStatic,isSleeping:f.isSleeping,parent:f.parent||f}),h.rotate(f.vertices,f.angle,f.position),c.rotate(f.axes,f.angle),d.update(f.bounds,f.vertices,f.velocity),r.set(f,{axes:v.axes||f.axes,area:v.area||f.area,mass:v.mass||f.mass,inertia:v.inertia||f.inertia}),f.parts.length===1){var g=f.bounds,y=f.centerOfMass,m=f.centerOffset,x=g.max.x-g.min.x,b=g.max.y-g.min.y;y.x=-(g.min.x-f.position.x)/x,y.y=-(g.min.y-f.position.y)/b,m.x=x*y.x,m.y=b*y.y}};r.set=function(f,v,g){var y;for(y in typeof v=="string"&&(y=v,(v={})[y]=g),v)if(Object.prototype.hasOwnProperty.call(v,y))switch(g=v[y],y){case"isStatic":r.setStatic(f,g);break;case"isSleeping":u.set(f,g);break;case"mass":r.setMass(f,g);break;case"density":r.setDensity(f,g);break;case"inertia":r.setInertia(f,g);break;case"vertices":r.setVertices(f,g);break;case"position":r.setPosition(f,g);break;case"angle":r.setAngle(f,g);break;case"velocity":r.setVelocity(f,g);break;case"angularVelocity":r.setAngularVelocity(f,g);break;case"speed":r.setSpeed(f,g);break;case"angularSpeed":r.setAngularSpeed(f,g);break;case"parts":r.setParts(f,g);break;case"centre":r.setCentre(f,g);break;default:f[y]=g}},r.setStatic=function(f,v){for(var g=0;g<f.parts.length;g++){var y=f.parts[g];v?(y.isStatic||(y._original={restitution:y.restitution,friction:y.friction,mass:y.mass,inertia:y.inertia,density:y.density,inverseMass:y.inverseMass,inverseInertia:y.inverseInertia}),y.restitution=0,y.friction=1,y.mass=y.inertia=y.density=1/0,y.inverseMass=y.inverseInertia=0,y.positionPrev.x=y.position.x,y.positionPrev.y=y.position.y,y.anglePrev=y.angle,y.angularVelocity=0,y.speed=0,y.angularSpeed=0,y.motion=0):y._original&&(y.restitution=y._original.restitution,y.friction=y._original.friction,y.mass=y._original.mass,y.inertia=y._original.inertia,y.density=y._original.density,y.inverseMass=y._original.inverseMass,y.inverseInertia=y._original.inverseInertia,y._original=null),y.isStatic=v}},r.setMass=function(f,v){var g=f.inertia/(f.mass/6);f.inertia=g*(v/6),f.inverseInertia=1/f.inertia,f.mass=v,f.inverseMass=1/f.mass,f.density=f.mass/f.area},r.setDensity=function(f,v){r.setMass(f,v*f.area),f.density=v},r.setInertia=function(f,v){f.inertia=v,f.inverseInertia=1/f.inertia},r.setVertices=function(f,v){v[0].body===f?f.vertices=v:f.vertices=h.create(v,f),f.axes=c.fromVertices(f.vertices),f.area=h.area(f.vertices),r.setMass(f,f.density*f.area);var g=h.centre(f.vertices);h.translate(f.vertices,g,-1),r.setInertia(f,r._inertiaScale*h.inertia(f.vertices,f.mass)),h.translate(f.vertices,f.position),d.update(f.bounds,f.vertices,f.velocity)},r.setParts=function(f,v,g){var y;for(v=v.slice(0),f.parts.length=0,f.parts.push(f),f.parent=f,y=0;y<v.length;y++){var m=v[y];m!==f&&(m.parent=f,f.parts.push(m))}if(f.parts.length!==1){if(g=g===void 0||g){var x=[];for(y=0;y<v.length;y++)x=x.concat(v[y].vertices);h.clockwiseSort(x);var b=h.hull(x),w=h.centre(b);r.setVertices(f,b),h.translate(f.vertices,w)}var T=r._totalProperties(f),S=T.centre.x,C=T.centre.y,E=f.bounds,M=f.centerOfMass,_=f.centerOffset;d.update(E,f.vertices,f.velocity),M.x=-(E.min.x-S)/(E.max.x-E.min.x),M.y=-(E.min.y-C)/(E.max.y-E.min.y),_.x=S,_.y=C,f.area=T.area,f.parent=f,f.position.x=S,f.position.y=C,f.positionPrev.x=S,f.positionPrev.y=C,r.setMass(f,T.mass),r.setInertia(f,T.inertia),r.setPosition(f,T.centre)}},r.setCentre=function(f,v,g){g?(f.positionPrev.x+=v.x,f.positionPrev.y+=v.y,f.position.x+=v.x,f.position.y+=v.y):(f.positionPrev.x=v.x-(f.position.x-f.positionPrev.x),f.positionPrev.y=v.y-(f.position.y-f.positionPrev.y),f.position.x=v.x,f.position.y=v.y)},r.setPosition=function(f,v,g){var y=a.sub(v,f.position);g?(f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.velocity.x=y.x,f.velocity.y=y.y,f.speed=a.magnitude(y)):(f.positionPrev.x+=y.x,f.positionPrev.y+=y.y);for(var m=0;m<f.parts.length;m++){var x=f.parts[m];x.position.x+=y.x,x.position.y+=y.y,h.translate(x.vertices,y),d.update(x.bounds,x.vertices,f.velocity)}},r.setAngle=function(f,v,g){var y=v-f.angle;g?(f.anglePrev=f.angle,f.angularVelocity=y,f.angularSpeed=Math.abs(y)):f.anglePrev+=y;for(var m=0;m<f.parts.length;m++){var x=f.parts[m];x.angle+=y,h.rotate(x.vertices,y,f.position),c.rotate(x.axes,y),d.update(x.bounds,x.vertices,f.velocity),m>0&&a.rotateAbout(x.position,y,f.position,x.position)}},r.setVelocity=function(f,v){var g=f.deltaTime/r._baseDelta;f.positionPrev.x=f.position.x-v.x*g,f.positionPrev.y=f.position.y-v.y*g,f.velocity.x=(f.position.x-f.positionPrev.x)/g,f.velocity.y=(f.position.y-f.positionPrev.y)/g,f.speed=a.magnitude(f.velocity)},r.getVelocity=function(f){var v=r._baseDelta/f.deltaTime;return{x:(f.position.x-f.positionPrev.x)*v,y:(f.position.y-f.positionPrev.y)*v}},r.getSpeed=function(f){return a.magnitude(r.getVelocity(f))},r.setSpeed=function(f,v){r.setVelocity(f,a.mult(a.normalise(r.getVelocity(f)),v))},r.setAngularVelocity=function(f,v){var g=f.deltaTime/r._baseDelta;f.anglePrev=f.angle-v*g,f.angularVelocity=(f.angle-f.anglePrev)/g,f.angularSpeed=Math.abs(f.angularVelocity)},r.getAngularVelocity=function(f){return(f.angle-f.anglePrev)*r._baseDelta/f.deltaTime},r.getAngularSpeed=function(f){return Math.abs(r.getAngularVelocity(f))},r.setAngularSpeed=function(f,v){r.setAngularVelocity(f,l.sign(r.getAngularVelocity(f))*v)},r.translate=function(f,v,g){r.setPosition(f,a.add(f.position,v),g)},r.rotate=function(f,v,g,y){if(g){var m=Math.cos(v),x=Math.sin(v),b=f.position.x-g.x,w=f.position.y-g.y;r.setPosition(f,{x:g.x+(b*m-w*x),y:g.y+(b*x+w*m)},y),r.setAngle(f,f.angle+v,y)}else r.setAngle(f,f.angle+v,y)},r.scale=function(f,v,g,y){var m=0,x=0;y=y||f.position;for(var b=f.inertia===1/0,w=0;w<f.parts.length;w++){var T=f.parts[w];T.scale.x=v,T.scale.y=g,h.scale(T.vertices,v,g,y),T.axes=c.fromVertices(T.vertices),T.area=h.area(T.vertices),r.setMass(T,f.density*T.area),h.translate(T.vertices,{x:-T.position.x,y:-T.position.y}),r.setInertia(T,r._inertiaScale*h.inertia(T.vertices,T.mass)),h.translate(T.vertices,{x:T.position.x,y:T.position.y}),w>0&&(m+=T.area,x+=T.inertia),T.position.x=y.x+(T.position.x-y.x)*v,T.position.y=y.y+(T.position.y-y.y)*g,d.update(T.bounds,T.vertices,f.velocity)}f.parts.length>1&&(f.area=m,f.isStatic||(r.setMass(f,f.density*m),r.setInertia(f,x))),f.circleRadius&&(v===g?f.circleRadius*=v:f.circleRadius=null),b&&r.setInertia(f,1/0)},r.update=function(f,v){var g=(v=(v!==void 0?v:16.666666666666668)*f.timeScale)*v,y=r._timeCorrection?v/(f.deltaTime||v):1,m=1-f.frictionAir*(v/l._baseDelta),x=(f.position.x-f.positionPrev.x)*y,b=(f.position.y-f.positionPrev.y)*y;f.velocity.x=x*m+f.force.x/f.mass*g,f.velocity.y=b*m+f.force.y/f.mass*g,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.position.x+=f.velocity.x,f.position.y+=f.velocity.y,f.deltaTime=v,f.angularVelocity=(f.angle-f.anglePrev)*m*y+f.torque/f.inertia*g,f.anglePrev=f.angle,f.angle+=f.angularVelocity,f.speed=a.magnitude(f.velocity),f.angularSpeed=Math.abs(f.angularVelocity);for(var w=0;w<f.parts.length;w++){var T=f.parts[w];h.translate(T.vertices,f.velocity),w>0&&(T.position.x+=f.velocity.x,T.position.y+=f.velocity.y),f.angularVelocity!==0&&(h.rotate(T.vertices,f.angularVelocity,f.position),c.rotate(T.axes,f.angularVelocity),w>0&&a.rotateAbout(T.position,f.angularVelocity,f.position,T.position)),d.update(T.bounds,T.vertices,f.velocity)}},r.updateVelocities=function(f){var v=r._baseDelta/f.deltaTime,g=f.velocity;g.x=(f.position.x-f.positionPrev.x)*v,g.y=(f.position.y-f.positionPrev.y)*v,f.speed=Math.sqrt(g.x*g.x+g.y*g.y),f.angularVelocity=(f.angle-f.anglePrev)*v,f.angularSpeed=Math.abs(f.angularVelocity)},r.applyForce=function(f,v,g){var y=v.x-f.position.x,m=v.y-f.position.y;f.force.x+=g.x,f.force.y+=g.y,f.torque+=y*g.y-m*g.x},r._totalProperties=function(f){for(var v={mass:0,area:0,inertia:0,centre:{x:0,y:0}},g=f.parts.length===1?0:1;g<f.parts.length;g++){var y=f.parts[g],m=y.mass!==1/0?y.mass:1;v.mass+=m,v.area+=y.area,v.inertia+=y.inertia,v.centre=a.add(v.centre,a.mult(y.position,m))}return v.centre=a.div(v.centre,v.mass),v}})()},69351:(s,o,i)=>{var r={};s.exports=r;var h=i(35810),a=i(53402),u=i(15647),l=i(22562);r.create=function(d){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},d)},r.setModified=function(d,c,p,f){if(h.trigger(d,"compositeModified",d),d.isModified=c,c&&d.cache&&(d.cache.allBodies=null,d.cache.allConstraints=null,d.cache.allComposites=null),p&&d.parent&&r.setModified(d.parent,c,p,f),f)for(var v=0;v<d.composites.length;v++){var g=d.composites[v];r.setModified(g,c,p,f)}},r.add=function(d,c){var p=[].concat(c);h.trigger(d,"beforeAdd",{object:c});for(var f=0;f<p.length;f++){var v=p[f];switch(v.type){case"body":if(v.parent!==v){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(d,v);break;case"constraint":r.addConstraint(d,v);break;case"composite":r.addComposite(d,v);break;case"mouseConstraint":r.addConstraint(d,v.constraint)}}return h.trigger(d,"afterAdd",{object:c}),d},r.remove=function(d,c,p){var f=[].concat(c);h.trigger(d,"beforeRemove",{object:c});for(var v=0;v<f.length;v++){var g=f[v];switch(g.type){case"body":r.removeBody(d,g,p);break;case"constraint":r.removeConstraint(d,g,p);break;case"composite":r.removeComposite(d,g,p);break;case"mouseConstraint":r.removeConstraint(d,g.constraint)}}return h.trigger(d,"afterRemove",{object:c}),d},r.addComposite=function(d,c){return d.composites.push(c),c.parent=d,r.setModified(d,!0,!0,!1),d},r.removeComposite=function(d,c,p){var f=a.indexOf(d.composites,c);if(f!==-1&&r.removeCompositeAt(d,f),p)for(var v=0;v<d.composites.length;v++)r.removeComposite(d.composites[v],c,!0);return d},r.removeCompositeAt=function(d,c){return d.composites.splice(c,1),r.setModified(d,!0,!0,!1),d},r.addBody=function(d,c){return d.bodies.push(c),r.setModified(d,!0,!0,!1),d},r.removeBody=function(d,c,p){var f=a.indexOf(d.bodies,c);if(f!==-1&&r.removeBodyAt(d,f),p)for(var v=0;v<d.composites.length;v++)r.removeBody(d.composites[v],c,!0);return d},r.removeBodyAt=function(d,c){return d.bodies.splice(c,1),r.setModified(d,!0,!0,!1),d},r.addConstraint=function(d,c){return d.constraints.push(c),r.setModified(d,!0,!0,!1),d},r.removeConstraint=function(d,c,p){var f=a.indexOf(d.constraints,c);if(f!==-1&&r.removeConstraintAt(d,f),p)for(var v=0;v<d.composites.length;v++)r.removeConstraint(d.composites[v],c,!0);return d},r.removeConstraintAt=function(d,c){return d.constraints.splice(c,1),r.setModified(d,!0,!0,!1),d},r.clear=function(d,c,p){if(p)for(var f=0;f<d.composites.length;f++)r.clear(d.composites[f],c,!0);return c?d.bodies=d.bodies.filter(function(v){return v.isStatic}):d.bodies.length=0,d.constraints.length=0,d.composites.length=0,r.setModified(d,!0,!0,!1),d},r.allBodies=function(d){if(d.cache&&d.cache.allBodies)return d.cache.allBodies;for(var c=[].concat(d.bodies),p=0;p<d.composites.length;p++)c=c.concat(r.allBodies(d.composites[p]));return d.cache&&(d.cache.allBodies=c),c},r.allConstraints=function(d){if(d.cache&&d.cache.allConstraints)return d.cache.allConstraints;for(var c=[].concat(d.constraints),p=0;p<d.composites.length;p++)c=c.concat(r.allConstraints(d.composites[p]));return d.cache&&(d.cache.allConstraints=c),c},r.allComposites=function(d){if(d.cache&&d.cache.allComposites)return d.cache.allComposites;for(var c=[].concat(d.composites),p=0;p<d.composites.length;p++)c=c.concat(r.allComposites(d.composites[p]));return d.cache&&(d.cache.allComposites=c),c},r.get=function(d,c,p){var f,v;switch(p){case"body":f=r.allBodies(d);break;case"constraint":f=r.allConstraints(d);break;case"composite":f=r.allComposites(d).concat(d)}return f?(v=f.filter(function(g){return g.id.toString()===c.toString()})).length===0?null:v[0]:null},r.move=function(d,c,p){return r.remove(d,c),r.add(p,c),d},r.rebase=function(d){for(var c=r.allBodies(d).concat(r.allConstraints(d)).concat(r.allComposites(d)),p=0;p<c.length;p++)c[p].id=a.nextId();return d},r.translate=function(d,c,p){for(var f=p?r.allBodies(d):d.bodies,v=0;v<f.length;v++)l.translate(f[v],c);return d},r.rotate=function(d,c,p,f){for(var v=Math.cos(c),g=Math.sin(c),y=f?r.allBodies(d):d.bodies,m=0;m<y.length;m++){var x=y[m],b=x.position.x-p.x,w=x.position.y-p.y;l.setPosition(x,{x:p.x+(b*v-w*g),y:p.y+(b*g+w*v)}),l.rotate(x,c)}return d},r.scale=function(d,c,p,f,v){for(var g=v?r.allBodies(d):d.bodies,y=0;y<g.length;y++){var m=g[y],x=m.position.x-f.x,b=m.position.y-f.y;l.setPosition(m,{x:f.x+x*c,y:f.y+b*p}),l.scale(m,c,p)}return d},r.bounds=function(d){for(var c=r.allBodies(d),p=[],f=0;f<c.length;f+=1){var v=c[f];p.push(v.bounds.min,v.bounds.max)}return u.create(p)}},4372:(s,o,i)=>{var r={};s.exports=r;var h=i(69351);r.create=h.create,r.add=h.add,r.remove=h.remove,r.clear=h.clear,r.addComposite=h.addComposite,r.addBody=h.addBody,r.addConstraint=h.addConstraint},52284:(s,o,i)=>{var r={};s.exports=r;var h,a,u,l=i(41598),d=i(4506);h=[],a={overlap:0,axis:null},u={overlap:0,axis:null},r.create=function(c,p){return{pair:null,collided:!1,bodyA:c,bodyB:p,parentA:c.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},r.collides=function(c,p,f){if(r._overlapAxes(a,c.vertices,p.vertices,c.axes),a.overlap<=0||(r._overlapAxes(u,p.vertices,c.vertices,p.axes),u.overlap<=0))return null;var v,g,y=f&&f.table[d.id(c,p)];y?v=y.collision:((v=r.create(c,p)).collided=!0,v.bodyA=c.id<p.id?c:p,v.bodyB=c.id<p.id?p:c,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),c=v.bodyA,p=v.bodyB,g=a.overlap<u.overlap?a:u;var m=v.normal,x=v.supports,b=g.axis,w=b.x,T=b.y;w*(p.position.x-c.position.x)+T*(p.position.y-c.position.y)<0?(m.x=w,m.y=T):(m.x=-w,m.y=-T),v.tangent.x=-m.y,v.tangent.y=m.x,v.depth=g.overlap,v.penetration.x=m.x*v.depth,v.penetration.y=m.y*v.depth;var S=r._findSupports(c,p,m,1),C=0;if(l.contains(c.vertices,S[0])&&(x[C++]=S[0]),l.contains(c.vertices,S[1])&&(x[C++]=S[1]),C<2){var E=r._findSupports(p,c,m,-1);l.contains(p.vertices,E[0])&&(x[C++]=E[0]),C<2&&l.contains(p.vertices,E[1])&&(x[C++]=E[1])}return C===0&&(x[C++]=S[0]),x.length=C,v},r._overlapAxes=function(c,p,f,v){var g,y,m,x,b,w,T=p.length,S=f.length,C=p[0].x,E=p[0].y,M=f[0].x,_=f[0].y,O=v.length,k=Number.MAX_VALUE,P=0;for(b=0;b<O;b++){var A=v[b],L=A.x,D=A.y,F=C*L+E*D,X=M*L+_*D,z=F,Y=X;for(w=1;w<T;w+=1)(x=p[w].x*L+p[w].y*D)>z?z=x:x<F&&(F=x);for(w=1;w<S;w+=1)(x=f[w].x*L+f[w].y*D)>Y?Y=x:x<X&&(X=x);if((g=(y=z-X)<(m=Y-F)?y:m)<k&&(k=g,P=b,g<=0))break}c.axis=v[P],c.overlap=k},r._projectToAxis=function(c,p,f){for(var v=p[0].x*f.x+p[0].y*f.y,g=v,y=1;y<p.length;y+=1){var m=p[y].x*f.x+p[y].y*f.y;m>g?g=m:m<v&&(v=m)}c.min=v,c.max=g},r._findSupports=function(c,p,f,v){var g,y,m,x,b,w=p.vertices,T=w.length,S=c.position.x,C=c.position.y,E=f.x*v,M=f.y*v,_=Number.MAX_VALUE;for(b=0;b<T;b+=1)(x=E*(S-(y=w[b]).x)+M*(C-y.y))<_&&(_=x,g=y);return _=E*(S-(m=w[(T+g.index-1)%T]).x)+M*(C-m.y),E*(S-(y=w[(g.index+1)%T]).x)+M*(C-y.y)<_?(h[0]=g,h[1]=y,h):(h[0]=g,h[1]=m,h)}},43424:s=>{var o={};s.exports=o,o.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}},81388:(s,o,i)=>{var r={};s.exports=r;var h=i(53402),a=i(52284);r.create=function(u){return h.extend({bodies:[],pairs:null},u)},r.setBodies=function(u,l){u.bodies=l.slice(0)},r.clear=function(u){u.bodies=[]},r.collisions=function(u){var l,d,c=[],p=u.pairs,f=u.bodies,v=f.length,g=r.canCollide,y=a.collides;for(f.sort(r._compareBoundsX),l=0;l<v;l++){var m=f[l],x=m.bounds,b=m.bounds.max.x,w=m.bounds.max.y,T=m.bounds.min.y,S=m.isStatic||m.isSleeping,C=m.parts.length,E=C===1;for(d=l+1;d<v;d++){var M=f[d];if((F=M.bounds).min.x>b)break;if(!(w<F.min.y||T>F.max.y)&&(!S||!M.isStatic&&!M.isSleeping)&&g(m.collisionFilter,M.collisionFilter)){var _=M.parts.length;if(E&&_===1)(L=y(m,M,p))&&c.push(L);else for(var O=_>1?1:0,k=C>1?1:0;k<C;k++)for(var P=m.parts[k],A=(x=P.bounds,O);A<_;A++){var L,D=M.parts[A],F=D.bounds;x.min.x>F.max.x||x.max.x<F.min.x||x.max.y<F.min.y||x.min.y>F.max.y||(L=y(P,D,p))&&c.push(L)}}}}return c},r.canCollide=function(u,l){return u.group===l.group&&u.group!==0?u.group>0:(u.mask&l.category)!==0&&(l.mask&u.category)!==0},r._compareBoundsX=function(u,l){return u.bounds.min.x-l.bounds.min.x}},4506:(s,o,i)=>{var r={};s.exports=r;var h=i(43424);r.create=function(a,u){var l=a.bodyA,d=a.bodyB,c={id:r.id(l,d),bodyA:l,bodyB:d,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:l.isSensor||d.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(c,a,u),c},r.update=function(a,u,l){var d=a.contacts,c=u.supports,p=a.activeContacts,f=u.parentA,v=u.parentB,g=f.vertices.length;a.isActive=!0,a.timeUpdated=l,a.collision=u,a.separation=u.depth,a.inverseMass=f.inverseMass+v.inverseMass,a.friction=f.friction<v.friction?f.friction:v.friction,a.frictionStatic=f.frictionStatic>v.frictionStatic?f.frictionStatic:v.frictionStatic,a.restitution=f.restitution>v.restitution?f.restitution:v.restitution,a.slop=f.slop>v.slop?f.slop:v.slop,u.pair=a,p.length=0;for(var y=0;y<c.length;y++){var m=c[y],x=m.body===f?m.index:g+m.index,b=d[x];b?p.push(b):p.push(d[x]=h.create(m))}},r.setActive=function(a,u,l){u?(a.isActive=!0,a.timeUpdated=l):(a.isActive=!1,a.activeContacts.length=0)},r.id=function(a,u){return a.id<u.id?"A"+a.id+"B"+u.id:"A"+u.id+"B"+a.id}},99561:(s,o,i)=>{var r={};s.exports=r;var h=i(4506),a=i(53402);r.create=function(u){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},r.update=function(u,l,d){var c,p,f,v,g=u.list,y=g.length,m=u.table,x=l.length,b=u.collisionStart,w=u.collisionEnd,T=u.collisionActive;for(b.length=0,w.length=0,T.length=0,v=0;v<y;v++)g[v].confirmedActive=!1;for(v=0;v<x;v++)(f=(c=l[v]).pair)?(f.isActive?T.push(f):b.push(f),h.update(f,c,d),f.confirmedActive=!0):(m[(f=h.create(c,d)).id]=f,b.push(f),g.push(f));var S=[];for(y=g.length,v=0;v<y;v++)(f=g[v]).confirmedActive||(h.setActive(f,!1,d),w.push(f),f.collision.bodyA.isSleeping||f.collision.bodyB.isSleeping||S.push(v));for(v=0;v<S.length;v++)f=g[p=S[v]-v],g.splice(p,1),delete m[f.id]},r.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}},73296:(s,o,i)=>{var r={};s.exports=r;var h=i(31725),a=i(52284),u=i(15647),l=i(66280),d=i(41598);r.collides=function(c,p){for(var f=[],v=p.length,g=c.bounds,y=a.collides,m=u.overlaps,x=0;x<v;x++){var b=p[x],w=b.parts.length,T=w===1?0:1;if(c!==b&&m(b.bounds,g))for(var S=T;S<w;S++){var C=b.parts[S];if(m(C.bounds,g)){var E=y(C,c);if(E){f.push(E);break}}}}return f},r.ray=function(c,p,f,v){v=v||1e-100;for(var g=h.angle(p,f),y=h.magnitude(h.sub(p,f)),m=.5*(f.x+p.x),x=.5*(f.y+p.y),b=l.rectangle(m,x,y,v,{angle:g}),w=r.collides(b,c),T=0;T<w.length;T+=1){var S=w[T];S.body=S.bodyB=S.bodyA}return w},r.region=function(c,p,f){for(var v=[],g=0;g<c.length;g++){var y=c[g],m=u.overlaps(y.bounds,p);(m&&!f||!m&&f)&&v.push(y)}return v},r.point=function(c,p){for(var f=[],v=0;v<c.length;v++){var g=c[v];if(u.contains(g.bounds,p))for(var y=g.parts.length===1?0:1;y<g.parts.length;y++){var m=g.parts[y];if(u.contains(m.bounds,p)&&d.contains(m.vertices,p)){f.push(g);break}}}return f}},66272:(s,o,i)=>{var r={};s.exports=r;var h=i(41598),a=i(53402),u=i(15647);r._restingThresh=2,r._restingThreshTangent=Math.sqrt(6),r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r._frictionMaxStatic=Number.MAX_VALUE,r.preSolvePosition=function(l){var d,c,p,f=l.length;for(d=0;d<f;d++)(c=l[d]).isActive&&(p=c.activeContacts.length,c.collision.parentA.totalContacts+=p,c.collision.parentB.totalContacts+=p)},r.solvePosition=function(l,d,c){var p,f,v,g,y,m,x,b,w=r._positionDampen*(c||1),T=a.clamp(d/a._baseDelta,0,1),S=l.length;for(p=0;p<S;p++)(f=l[p]).isActive&&!f.isSensor&&(g=(v=f.collision).parentA,y=v.parentB,m=v.normal,f.separation=m.x*(y.positionImpulse.x+v.penetration.x-g.positionImpulse.x)+m.y*(y.positionImpulse.y+v.penetration.y-g.positionImpulse.y));for(p=0;p<S;p++)(f=l[p]).isActive&&!f.isSensor&&(g=(v=f.collision).parentA,y=v.parentB,m=v.normal,b=f.separation-f.slop*T,(g.isStatic||y.isStatic)&&(b*=2),g.isStatic||g.isSleeping||(x=w/g.totalContacts,g.positionImpulse.x+=m.x*b*x,g.positionImpulse.y+=m.y*b*x),y.isStatic||y.isSleeping||(x=w/y.totalContacts,y.positionImpulse.x-=m.x*b*x,y.positionImpulse.y-=m.y*b*x))},r.postSolvePosition=function(l){for(var d=r._positionWarming,c=l.length,p=h.translate,f=u.update,v=0;v<c;v++){var g=l[v],y=g.positionImpulse,m=y.x,x=y.y,b=g.velocity;if(g.totalContacts=0,m!==0||x!==0){for(var w=0;w<g.parts.length;w++){var T=g.parts[w];p(T.vertices,y),f(T.bounds,T.vertices,b),T.position.x+=m,T.position.y+=x}g.positionPrev.x+=m,g.positionPrev.y+=x,m*b.x+x*b.y<0?(y.x=0,y.y=0):(y.x*=d,y.y*=d)}}},r.preSolveVelocity=function(l){var d,c,p=l.length;for(d=0;d<p;d++){var f=l[d];if(f.isActive&&!f.isSensor){var v=f.activeContacts,g=v.length,y=f.collision,m=y.parentA,x=y.parentB,b=y.normal,w=y.tangent;for(c=0;c<g;c++){var T=v[c],S=T.vertex,C=T.normalImpulse,E=T.tangentImpulse;if(C!==0||E!==0){var M=b.x*C+w.x*E,_=b.y*C+w.y*E;m.isStatic||m.isSleeping||(m.positionPrev.x+=M*m.inverseMass,m.positionPrev.y+=_*m.inverseMass,m.anglePrev+=m.inverseInertia*((S.x-m.position.x)*_-(S.y-m.position.y)*M)),x.isStatic||x.isSleeping||(x.positionPrev.x-=M*x.inverseMass,x.positionPrev.y-=_*x.inverseMass,x.anglePrev-=x.inverseInertia*((S.x-x.position.x)*_-(S.y-x.position.y)*M))}}}}},r.solveVelocity=function(l,d){var c,p,f,v,g=d/a._baseDelta,y=g*g*g,m=-r._restingThresh*g,x=r._restingThreshTangent,b=r._frictionNormalMultiplier*g,w=r._frictionMaxStatic,T=l.length;for(f=0;f<T;f++){var S=l[f];if(S.isActive&&!S.isSensor){var C=S.collision,E=C.parentA,M=C.parentB,_=E.velocity,O=M.velocity,k=C.normal.x,P=C.normal.y,A=C.tangent.x,L=C.tangent.y,D=S.activeContacts,F=D.length,X=1/F,z=E.inverseMass+M.inverseMass,Y=S.friction*S.frictionStatic*b;for(_.x=E.position.x-E.positionPrev.x,_.y=E.position.y-E.positionPrev.y,O.x=M.position.x-M.positionPrev.x,O.y=M.position.y-M.positionPrev.y,E.angularVelocity=E.angle-E.anglePrev,M.angularVelocity=M.angle-M.anglePrev,v=0;v<F;v++){var R=D[v],B=R.vertex,I=B.x-E.position.x,G=B.y-E.position.y,N=B.x-M.position.x,W=B.y-M.position.y,U=_.x-G*E.angularVelocity,V=_.y+I*E.angularVelocity,K=U-(O.x-W*M.angularVelocity),$=V-(O.y+N*M.angularVelocity),H=k*K+P*$,j=A*K+L*$,q=S.separation+H,Z=Math.min(q,1),Q=(Z=q<0?0:Z)*Y;j<-Q||j>Q?(p=j>0?j:-j,(c=S.friction*(j>0?1:-1)*y)<-p?c=-p:c>p&&(c=p)):(c=j,p=w);var at=I*P-G*k,rt=N*P-W*k,nt=X/(z+E.inverseInertia*at*at+M.inverseInertia*rt*rt),lt=(1+S.restitution)*H*nt;if(c*=nt,H<m)R.normalImpulse=0;else{var it=R.normalImpulse;R.normalImpulse+=lt,R.normalImpulse>0&&(R.normalImpulse=0),lt=R.normalImpulse-it}if(j<-x||j>x)R.tangentImpulse=0;else{var ot=R.tangentImpulse;R.tangentImpulse+=c,R.tangentImpulse<-p&&(R.tangentImpulse=-p),R.tangentImpulse>p&&(R.tangentImpulse=p),c=R.tangentImpulse-ot}var st=k*lt+A*c,gt=P*lt+L*c;E.isStatic||E.isSleeping||(E.positionPrev.x+=st*E.inverseMass,E.positionPrev.y+=gt*E.inverseMass,E.anglePrev+=(I*gt-G*st)*E.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=st*M.inverseMass,M.positionPrev.y-=gt*M.inverseMass,M.anglePrev-=(N*gt-W*st)*M.inverseInertia)}}}}},48140:(s,o,i)=>{var r={};s.exports=r;var h=i(41598),a=i(31725),u=i(53614),l=i(15647),d=i(66615),c=i(53402);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(p){var f=p;f.bodyA&&!f.pointA&&(f.pointA={x:0,y:0}),f.bodyB&&!f.pointB&&(f.pointB={x:0,y:0});var v=f.bodyA?a.add(f.bodyA.position,f.pointA):f.pointA,g=f.bodyB?a.add(f.bodyB.position,f.pointB):f.pointB,y=a.magnitude(a.sub(v,g));f.length=f.length!==void 0?f.length:y,f.id=f.id||c.nextId(),f.label=f.label||"Constraint",f.type="constraint",f.stiffness=f.stiffness||(f.length>0?1:.7),f.damping=f.damping||0,f.angularStiffness=f.angularStiffness||0,f.angleA=f.bodyA?f.bodyA.angle:f.angleA,f.angleB=f.bodyB?f.bodyB.angle:f.angleB,f.plugin={};var m={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return f.length===0&&f.stiffness>.1?(m.type="pin",m.anchors=!1):f.stiffness<.9&&(m.type="spring"),f.render=c.extend(m,f.render),f},r.preSolveAll=function(p){for(var f=0;f<p.length;f+=1){var v=p[f],g=v.constraintImpulse;v.isStatic||g.x===0&&g.y===0&&g.angle===0||(v.position.x+=g.x,v.position.y+=g.y,v.angle+=g.angle)}},r.solveAll=function(p,f){for(var v=c.clamp(f/c._baseDelta,0,1),g=0;g<p.length;g+=1){var y=p[g],m=!y.bodyA||y.bodyA&&y.bodyA.isStatic,x=!y.bodyB||y.bodyB&&y.bodyB.isStatic;(m||x)&&r.solve(p[g],v)}for(g=0;g<p.length;g+=1)m=!(y=p[g]).bodyA||y.bodyA&&y.bodyA.isStatic,x=!y.bodyB||y.bodyB&&y.bodyB.isStatic,m||x||r.solve(p[g],v)},r.solve=function(p,f){var v=p.bodyA,g=p.bodyB,y=p.pointA,m=p.pointB;if(v||g){v&&!v.isStatic&&(a.rotate(y,v.angle-p.angleA,y),p.angleA=v.angle),g&&!g.isStatic&&(a.rotate(m,g.angle-p.angleB,m),p.angleB=g.angle);var x=y,b=m;if(v&&(x=a.add(v.position,y)),g&&(b=a.add(g.position,m)),x&&b){var w=a.sub(x,b),T=a.magnitude(w);T<r._minLength&&(T=r._minLength);var S,C,E,M,_,O=(T-p.length)/T,k=p.stiffness>=1||p.length===0?p.stiffness*f:p.stiffness*f*f,P=p.damping*f,A=a.mult(w,O*k),L=(v?v.inverseMass:0)+(g?g.inverseMass:0),D=L+((v?v.inverseInertia:0)+(g?g.inverseInertia:0));if(P>0){var F=a.create();E=a.div(w,T),_=a.sub(g&&a.sub(g.position,g.positionPrev)||F,v&&a.sub(v.position,v.positionPrev)||F),M=a.dot(E,_)}v&&!v.isStatic&&(C=v.inverseMass/L,v.constraintImpulse.x-=A.x*C,v.constraintImpulse.y-=A.y*C,v.position.x-=A.x*C,v.position.y-=A.y*C,P>0&&(v.positionPrev.x-=P*E.x*M*C,v.positionPrev.y-=P*E.y*M*C),S=a.cross(y,A)/D*r._torqueDampen*v.inverseInertia*(1-p.angularStiffness),v.constraintImpulse.angle-=S,v.angle-=S),g&&!g.isStatic&&(C=g.inverseMass/L,g.constraintImpulse.x+=A.x*C,g.constraintImpulse.y+=A.y*C,g.position.x+=A.x*C,g.position.y+=A.y*C,P>0&&(g.positionPrev.x+=P*E.x*M*C,g.positionPrev.y+=P*E.y*M*C),S=a.cross(m,A)/D*r._torqueDampen*g.inverseInertia*(1-p.angularStiffness),g.constraintImpulse.angle+=S,g.angle+=S)}}},r.postSolveAll=function(p){for(var f=0;f<p.length;f++){var v=p[f],g=v.constraintImpulse;if(!(v.isStatic||g.x===0&&g.y===0&&g.angle===0)){u.set(v,!1);for(var y=0;y<v.parts.length;y++){var m=v.parts[y];h.translate(m.vertices,g),y>0&&(m.position.x+=g.x,m.position.y+=g.y),g.angle!==0&&(h.rotate(m.vertices,g.angle,v.position),d.rotate(m.axes,g.angle),y>0&&a.rotateAbout(m.position,g.angle,v.position,m.position)),l.update(m.bounds,m.vertices,v.velocity)}g.angle*=r._warming,g.x*=r._warming,g.y*=r._warming}}},r.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},r.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}},r.currentLength=function(p){var f=(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),v=(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0),g=f-((p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0)),y=v-((p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0));return Math.sqrt(g*g+y*y)}},53402:(s,o,i)=>{var r={};s.exports=r,function(){r._baseDelta=16.666666666666668,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(a,u){var l,d;typeof u=="boolean"?(l=2,d=u):(l=1,d=!0);for(var c=l;c<arguments.length;c++){var p=arguments[c];if(p)for(var f in p)d&&p[f]&&p[f].constructor===Object?a[f]&&a[f].constructor!==Object?a[f]=p[f]:(a[f]=a[f]||{},r.extend(a[f],d,p[f])):a[f]=p[f]}return a},r.clone=function(a,u){return r.extend({},u,a)},r.keys=function(a){if(Object.keys)return Object.keys(a);var u=[];for(var l in a)u.push(l);return u},r.values=function(a){var u=[];if(Object.keys){for(var l=Object.keys(a),d=0;d<l.length;d++)u.push(a[l[d]]);return u}for(var c in a)u.push(a[c]);return u},r.get=function(a,u,l,d){u=u.split(".").slice(l,d);for(var c=0;c<u.length;c+=1)a=a[u[c]];return a},r.set=function(a,u,l,d,c){var p=u.split(".").slice(d,c);return r.get(a,u,0,-1)[p[p.length-1]]=l,l},r.shuffle=function(a){for(var u=a.length-1;u>0;u--){var l=Math.floor(r.random()*(u+1)),d=a[u];a[u]=a[l],a[l]=d}return a},r.choose=function(a){return a[Math.floor(r.random()*a.length)]},r.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},r.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},r.isFunction=function(a){return typeof a=="function"},r.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},r.isString=function(a){return toString.call(a)==="[object String]"},r.clamp=function(a,u,l){return a<u?u:a>l?l:a},r.sign=function(a){return a<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(a,u){return u=u!==void 0?u:1,(a=a!==void 0?a:0)+h()*(u-a)};var h=function(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(a){return(a=a.replace("#","")).length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[a]||(r.warn(a),r._warnedOnce[a]=!0)},r.deprecated=function(a,u,l){a[u]=r.chain(function(){r.warnOnce(" deprecated ",l)},a[u])},r.nextId=function(){return r._nextId++},r.indexOf=function(a,u){if(a.indexOf)return a.indexOf(u);for(var l=0;l<a.length;l++)if(a[l]===u)return l;return-1},r.map=function(a,u){if(a.map)return a.map(u);for(var l=[],d=0;d<a.length;d+=1)l.push(u(a[d]));return l},r.topologicalSort=function(a){var u=[],l=[],d=[];for(var c in a)l[c]||d[c]||r._topologicalSort(c,l,d,a,u);return u},r._topologicalSort=function(a,u,l,d,c){var p=d[a]||[];l[a]=!0;for(var f=0;f<p.length;f+=1){var v=p[f];l[v]||u[v]||r._topologicalSort(v,u,l,d,c)}l[a]=!1,u[a]=!0,c.push(a)},r.chain=function(){for(var a=[],u=0;u<arguments.length;u+=1){var l=arguments[u];l._chained?a.push.apply(a,l._chained):a.push(l)}var d=function(){for(var c,p=new Array(arguments.length),f=0,v=arguments.length;f<v;f++)p[f]=arguments[f];for(f=0;f<a.length;f+=1){var g=a[f].apply(c,p);g!==void 0&&(c=g)}return c};return d._chained=a,d},r.chainPathBefore=function(a,u,l){return r.set(a,u,r.chain(l,r.get(a,u)))},r.chainPathAfter=function(a,u,l){return r.set(a,u,r.chain(r.get(a,u),l))},r.setDecomp=function(a){r._decomp=a},r.getDecomp=function(){var a=r._decomp;try{a||typeof window>"u"||(a=window.decomp),a||i.g===void 0||(a=i.g.decomp)}catch{a=null}return a}}()},48413:(s,o,i)=>{var r={};s.exports=r;var h=i(53614),a=i(66272),u=i(81388),l=i(99561),d=i(35810),c=i(69351),p=i(48140),f=i(53402),v=i(22562);r.create=function(g){g=g||{};var y=f.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g);return y.world=g.world||c.create({label:"World"}),y.pairs=g.pairs||l.create(),y.detector=g.detector||u.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},r.update=function(g,y){var m,x=f.now(),b=g.world,w=g.detector,T=g.pairs,S=g.timing,C=S.timestamp;y=y!==void 0?y:f._baseDelta,y*=S.timeScale,S.timestamp+=y,S.lastDelta=y;var E={timestamp:S.timestamp,delta:y};d.trigger(g,"beforeUpdate",E);var M=c.allBodies(b),_=c.allConstraints(b);for(b.isModified&&(u.setBodies(w,M),c.setModified(b,!1,!1,!0)),g.enableSleeping&&h.update(M,y),r._bodiesApplyGravity(M,g.gravity),y>0&&r._bodiesUpdate(M,y),d.trigger(g,"beforeSolve",E),p.preSolveAll(M),m=0;m<g.constraintIterations;m++)p.solveAll(_,y);p.postSolveAll(M),w.pairs=g.pairs;var O=u.collisions(w);l.update(T,O,C),g.enableSleeping&&h.afterCollisions(T.list),T.collisionStart.length>0&&d.trigger(g,"collisionStart",{pairs:T.collisionStart,timestamp:S.timestamp,delta:y});var k=f.clamp(20/g.positionIterations,0,1);for(a.preSolvePosition(T.list),m=0;m<g.positionIterations;m++)a.solvePosition(T.list,y,k);for(a.postSolvePosition(M),p.preSolveAll(M),m=0;m<g.constraintIterations;m++)p.solveAll(_,y);for(p.postSolveAll(M),a.preSolveVelocity(T.list),m=0;m<g.velocityIterations;m++)a.solveVelocity(T.list,y);return r._bodiesUpdateVelocities(M),T.collisionActive.length>0&&d.trigger(g,"collisionActive",{pairs:T.collisionActive,timestamp:S.timestamp,delta:y}),T.collisionEnd.length>0&&d.trigger(g,"collisionEnd",{pairs:T.collisionEnd,timestamp:S.timestamp,delta:y}),r._bodiesClearForces(M),d.trigger(g,"afterUpdate",E),g.timing.lastElapsed=f.now()-x,g},r.merge=function(g,y){if(f.extend(g,y),y.world){g.world=y.world,r.clear(g);for(var m=c.allBodies(g.world),x=0;x<m.length;x++){var b=m[x];h.set(b,!1),b.id=f.nextId()}}},r.clear=function(g){l.clear(g.pairs),u.clear(g.detector)},r._bodiesClearForces=function(g){for(var y=g.length,m=0;m<y;m++){var x=g[m];x.force.x=0,x.force.y=0,x.torque=0}},r._bodiesApplyGravity=function(g,y){var m=y.scale!==void 0?y.scale:.001,x=g.length;if((y.x!==0||y.y!==0)&&m!==0)for(var b=0;b<x;b++){var w=g[b];w.ignoreGravity||w.isStatic||w.isSleeping||(w.force.y+=w.mass*y.y*m,w.force.x+=w.mass*y.x*m)}},r._bodiesUpdate=function(g,y){for(var m=g.length,x=0;x<m;x++){var b=g[x];b.isStatic||b.isSleeping||v.update(b,y)}},r._bodiesUpdateVelocities=function(g){for(var y=g.length,m=0;m<y;m++)v.updateVelocities(g[m])}},35810:(s,o,i)=>{var r={};s.exports=r;var h=i(53402);r.on=function(a,u,l){for(var d,c=u.split(" "),p=0;p<c.length;p++)d=c[p],a.events=a.events||{},a.events[d]=a.events[d]||[],a.events[d].push(l);return l},r.off=function(a,u,l){if(u){typeof u=="function"&&(l=u,u=h.keys(a.events).join(" "));for(var d=u.split(" "),c=0;c<d.length;c++){var p=a.events[d[c]],f=[];if(l&&p)for(var v=0;v<p.length;v++)p[v]!==l&&f.push(p[v]);a.events[d[c]]=f}}else a.events={}},r.trigger=function(a,u,l){var d,c,p,f,v=a.events;if(v&&h.keys(v).length>0){l||(l={}),d=u.split(" ");for(var g=0;g<d.length;g++)if(p=v[c=d[g]]){(f=h.clone(l,!1)).name=c,f.source=a;for(var y=0;y<p.length;y++)p[y].apply(a,[f])}}}},6790:(s,o,i)=>{var r={};s.exports=r;var h=i(73832),a=i(53402);r.name="matter-js",r.version="0.19.0",r.uses=[],r.used=[],r.use=function(){h.use(r,Array.prototype.slice.call(arguments))},r.before=function(u,l){return u=u.replace(/^Matter./,""),a.chainPathBefore(r,u,l)},r.after=function(u,l){return u=u.replace(/^Matter./,""),a.chainPathAfter(r,u,l)}},73832:(s,o,i)=>{var r={};s.exports=r;var h=i(53402);r._registry={},r.register=function(a){if(r.isPlugin(a)||h.warn("Plugin.register:",r.toString(a),"does not implement all required fields."),a.name in r._registry){var u=r._registry[a.name],l=r.versionParse(a.version).number,d=r.versionParse(u.version).number;l>d?(h.warn("Plugin.register:",r.toString(u),"was upgraded to",r.toString(a)),r._registry[a.name]=a):l<d?h.warn("Plugin.register:",r.toString(u),"can not be downgraded to",r.toString(a)):a!==u&&h.warn("Plugin.register:",r.toString(a),"is already registered to different plugin object")}else r._registry[a.name]=a;return a},r.resolve=function(a){return r._registry[r.dependencyParse(a).name]},r.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},r.isPlugin=function(a){return a&&a.name&&a.version&&a.install},r.isUsed=function(a,u){return a.used.indexOf(u)>-1},r.isFor=function(a,u){var l=a.for&&r.dependencyParse(a.for);return!a.for||u.name===l.name&&r.versionSatisfies(u.version,l.range)},r.use=function(a,u){if(a.uses=(a.uses||[]).concat(u||[]),a.uses.length!==0){for(var l=r.dependencies(a),d=h.topologicalSort(l),c=[],p=0;p<d.length;p+=1)if(d[p]!==a.name){var f=r.resolve(d[p]);f?r.isUsed(a,f.name)||(r.isFor(f,a)||(h.warn("Plugin.use:",r.toString(f),"is for",f.for,"but installed on",r.toString(a)+"."),f._warned=!0),f.install?f.install(a):(h.warn("Plugin.use:",r.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(c.push(" "+r.toString(f)),delete f._warned):c.push(" "+r.toString(f)),a.used.push(f.name)):c.push(" "+d[p])}c.length>0&&!f.silent&&h.info(c.join("  "))}else h.warn("Plugin.use:",r.toString(a),"does not specify any dependencies to install.")},r.dependencies=function(a,u){var l=r.dependencyParse(a),d=l.name;if(!(d in(u=u||{}))){a=r.resolve(a)||a,u[d]=h.map(a.uses||[],function(p){r.isPlugin(p)&&r.register(p);var f=r.dependencyParse(p),v=r.resolve(p);return v&&!r.versionSatisfies(v.version,f.range)?(h.warn("Plugin.dependencies:",r.toString(v),"does not satisfy",r.toString(f),"used by",r.toString(l)+"."),v._warned=!0,a._warned=!0):v||(h.warn("Plugin.dependencies:",r.toString(p),"used by",r.toString(l),"could not be resolved."),a._warned=!0),f.name});for(var c=0;c<u[d].length;c+=1)r.dependencies(u[d][c],u);return u}},r.dependencyParse=function(a){return h.isString(a)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(a)||h.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}):{name:a.name,range:a.range||a.version}},r.versionParse=function(a){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(a)||h.warn("Plugin.versionParse:",a,"is not a valid version or range.");var l=u.exec(a),d=Number(l[4]),c=Number(l[5]),p=Number(l[6]);return{isRange:!!(l[1]||l[2]),version:l[3],range:a,operator:l[1]||l[2]||"",major:d,minor:c,patch:p,parts:[d,c,p],prerelease:l[7],number:1e8*d+1e4*c+p}},r.versionSatisfies=function(a,u){u=u||"*";var l=r.versionParse(u),d=r.versionParse(a);if(l.isRange){if(l.operator==="*"||a==="*")return!0;if(l.operator===">")return d.number>l.number;if(l.operator===">=")return d.number>=l.number;if(l.operator==="~")return d.major===l.major&&d.minor===l.minor&&d.patch>=l.patch;if(l.operator==="^")return l.major>0?d.major===l.major&&d.number>=l.number:l.minor>0?d.minor===l.minor&&d.patch>=l.patch:d.patch===l.patch}return a===u||a==="*"}},53614:(s,o,i)=>{var r={};s.exports=r;var h=i(22562),a=i(35810),u=i(53402);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(l,d){for(var c=d/u._baseDelta,p=r._motionSleepThreshold,f=0;f<l.length;f++){var v=l[f],g=h.getSpeed(v),y=h.getAngularSpeed(v),m=g*g+y*y;if(v.force.x===0&&v.force.y===0){var x=Math.min(v.motion,m),b=Math.max(v.motion,m);v.motion=r._minBias*x+(1-r._minBias)*b,v.sleepThreshold>0&&v.motion<p?(v.sleepCounter+=1,v.sleepCounter>=v.sleepThreshold/c&&r.set(v,!0)):v.sleepCounter>0&&(v.sleepCounter-=1)}else r.set(v,!1)}},r.afterCollisions=function(l){for(var d=r._motionSleepThreshold,c=0;c<l.length;c++){var p=l[c];if(p.isActive){var f=p.collision,v=f.bodyA.parent,g=f.bodyB.parent;if(!(v.isSleeping&&g.isSleeping||v.isStatic||g.isStatic)&&(v.isSleeping||g.isSleeping)){var y=v.isSleeping&&!v.isStatic?v:g,m=y===v?g:v;!y.isStatic&&m.motion>d&&r.set(y,!1)}}}},r.set=function(l,d){var c=l.isSleeping;d?(l.isSleeping=!0,l.sleepCounter=l.sleepThreshold,l.positionImpulse.x=0,l.positionImpulse.y=0,l.positionPrev.x=l.position.x,l.positionPrev.y=l.position.y,l.anglePrev=l.angle,l.speed=0,l.angularSpeed=0,l.motion=0,c||a.trigger(l,"sleepStart")):(l.isSleeping=!1,l.sleepCounter=0,c&&a.trigger(l,"sleepEnd"))}},66280:(s,o,i)=>{var r={};s.exports=r;var h=i(41598),a=i(53402),u=i(22562),l=i(15647),d=i(31725);r.rectangle=function(c,p,f,v,g){g=g||{};var y={label:"Rectangle Body",position:{x:c,y:p},vertices:h.fromPath("L 0 0 L "+f+" 0 L "+f+" "+v+" L 0 "+v)};if(g.chamfer){var m=g.chamfer;y.vertices=h.chamfer(y.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete g.chamfer}return u.create(a.extend({},y,g))},r.trapezoid=function(c,p,f,v,g,y){y=y||{};var m,x=f*(g*=.5),b=x+(1-2*g)*f,w=b+x;m=g<.5?"L 0 0 L "+x+" "+-v+" L "+b+" "+-v+" L "+w+" 0":"L 0 0 L "+b+" "+-v+" L "+w+" 0";var T={label:"Trapezoid Body",position:{x:c,y:p},vertices:h.fromPath(m)};if(y.chamfer){var S=y.chamfer;T.vertices=h.chamfer(T.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete y.chamfer}return u.create(a.extend({},T,y))},r.circle=function(c,p,f,v,g){v=v||{};var y={label:"Circle Body",circleRadius:f};g=g||25;var m=Math.ceil(Math.max(10,Math.min(g,f)));return m%2==1&&(m+=1),r.polygon(c,p,m,f,a.extend({},y,v))},r.polygon=function(c,p,f,v,g){if(g=g||{},f<3)return r.circle(c,p,v,g);for(var y=2*Math.PI/f,m="",x=.5*y,b=0;b<f;b+=1){var w=x+b*y,T=Math.cos(w)*v,S=Math.sin(w)*v;m+="L "+T.toFixed(3)+" "+S.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:c,y:p},vertices:h.fromPath(m)};if(g.chamfer){var E=g.chamfer;C.vertices=h.chamfer(C.vertices,E.radius,E.quality,E.qualityMin,E.qualityMax),delete g.chamfer}return u.create(a.extend({},C,g))},r.fromVertices=function(c,p,f,v,g,y,m,x){var b,w,T,S,C,E,M,_,O,k,P=a.getDecomp();for(b=!!(P&&P.quickDecomp),v=v||{},T=[],g=g!==void 0&&g,y=y!==void 0?y:.01,m=m!==void 0?m:10,x=x!==void 0?x:.01,a.isArray(f[0])||(f=[f]),O=0;O<f.length;O+=1)if(C=f[O],!(S=h.isConvex(C))&&!b&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),S||!b)C=S?h.clockwiseSort(C):h.hull(C),T.push({position:{x:c,y:p},vertices:C});else{var A=C.map(function(I){return[I.x,I.y]});P.makeCCW(A),y!==!1&&P.removeCollinearPoints(A,y),x!==!1&&P.removeDuplicatePoints&&P.removeDuplicatePoints(A,x);var L=P.quickDecomp(A);for(E=0;E<L.length;E++){var D=L[E].map(function(I){return{x:I[0],y:I[1]}});m>0&&h.area(D)<m||T.push({position:h.centre(D),vertices:D})}}for(E=0;E<T.length;E++)T[E]=u.create(a.extend(T[E],v));if(g)for(E=0;E<T.length;E++){var F=T[E];for(M=E+1;M<T.length;M++){var X=T[M];if(l.overlaps(F.bounds,X.bounds)){var z=F.vertices,Y=X.vertices;for(_=0;_<F.vertices.length;_++)for(k=0;k<X.vertices.length;k++){var R=d.magnitudeSquared(d.sub(z[(_+1)%z.length],Y[k])),B=d.magnitudeSquared(d.sub(z[_],Y[(k+1)%Y.length]));R<5&&B<5&&(z[_].isInternal=!0,Y[k].isInternal=!0)}}}}return T.length>1?(w=u.create(a.extend({parts:T.slice(0)},v)),u.setPosition(w,{x:c,y:p}),w):T[0]},r.flagCoincidentParts=function(c,p){p===void 0&&(p=5);for(var f=0;f<c.length;f++)for(var v=c[f],g=f+1;g<c.length;g++){var y=c[g];if(l.overlaps(v.bounds,y.bounds))for(var m=v.vertices,x=y.vertices,b=0;b<v.vertices.length;b++)for(var w=0;w<y.vertices.length;w++){var T=d.magnitudeSquared(d.sub(m[(b+1)%m.length],x[w])),S=d.magnitudeSquared(d.sub(m[b],x[(w+1)%x.length]));T<p&&S<p&&(m[b].isInternal=!0,x[w].isInternal=!0)}}return c}},74116:(s,o,i)=>{var r={};s.exports=r;var h=i(69351),a=i(48140),u=i(53402),l=i(22562),d=i(66280);r.stack=function(c,p,f,v,g,y,m){for(var x,b=h.create({label:"Stack"}),w=c,T=p,S=0,C=0;C<v;C++){for(var E=0,M=0;M<f;M++){var _=m(w,T,M,C,x,S);if(_){var O=_.bounds.max.y-_.bounds.min.y,k=_.bounds.max.x-_.bounds.min.x;O>E&&(E=O),l.translate(_,{x:.5*k,y:.5*O}),w=_.bounds.max.x+g,h.addBody(b,_),x=_,S+=1}else w+=g}T+=E+y,w=c}return b},r.chain=function(c,p,f,v,g,y){for(var m=c.bodies,x=1;x<m.length;x++){var b=m[x-1],w=m[x],T=b.bounds.max.y-b.bounds.min.y,S=b.bounds.max.x-b.bounds.min.x,C=w.bounds.max.y-w.bounds.min.y,E={bodyA:b,pointA:{x:S*p,y:T*f},bodyB:w,pointB:{x:(w.bounds.max.x-w.bounds.min.x)*v,y:C*g}},M=u.extend(E,y);h.addConstraint(c,a.create(M))}return c.label+=" Chain",c},r.mesh=function(c,p,f,v,g){var y,m,x,b,w,T=c.bodies;for(y=0;y<f;y++){for(m=1;m<p;m++)x=T[m-1+y*p],b=T[m+y*p],h.addConstraint(c,a.create(u.extend({bodyA:x,bodyB:b},g)));if(y>0)for(m=0;m<p;m++)x=T[m+(y-1)*p],b=T[m+y*p],h.addConstraint(c,a.create(u.extend({bodyA:x,bodyB:b},g))),v&&m>0&&(w=T[m-1+(y-1)*p],h.addConstraint(c,a.create(u.extend({bodyA:w,bodyB:b},g)))),v&&m<p-1&&(w=T[m+1+(y-1)*p],h.addConstraint(c,a.create(u.extend({bodyA:w,bodyB:b},g))))}return c.label+=" Mesh",c},r.pyramid=function(c,p,f,v,g,y,m){return r.stack(c,p,f,v,g,y,function(x,b,w,T,S,C){var E=Math.min(v,Math.ceil(f/2)),M=S?S.bounds.max.x-S.bounds.min.x:0;if(!(T>E||w<(T=E-T)||w>f-1-T))return C===1&&l.translate(S,{x:(w+(f%2==1?1:-1))*M,y:0}),m(c+(S?w*M:0)+w*g,b,w,T,S,C)})},r.newtonsCradle=function(c,p,f,v,g){for(var y=h.create({label:"Newtons Cradle"}),m=0;m<f;m++){var x=d.circle(c+m*(1.9*v),p+g,v,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=a.create({pointA:{x:c+m*(1.9*v),y:p},bodyB:x});h.addBody(y,x),h.addConstraint(y,b)}return y},r.car=function(c,p,f,v,g){var y=l.nextGroup(!0),m=.5*-f+20,x=.5*f-20,b=h.create({label:"Car"}),w=d.rectangle(c,p,f,v,{collisionFilter:{group:y},chamfer:{radius:.5*v},density:2e-4}),T=d.circle(c+m,p+0,g,{collisionFilter:{group:y},friction:.8}),S=d.circle(c+x,p+0,g,{collisionFilter:{group:y},friction:.8}),C=a.create({bodyB:w,pointB:{x:m,y:0},bodyA:T,stiffness:1,length:0}),E=a.create({bodyB:w,pointB:{x,y:0},bodyA:S,stiffness:1,length:0});return h.addBody(b,w),h.addBody(b,T),h.addBody(b,S),h.addConstraint(b,C),h.addConstraint(b,E),b},r.softBody=function(c,p,f,v,g,y,m,x,b,w){b=u.extend({inertia:1/0},b),w=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},w);var T=r.stack(c,p,f,v,g,y,function(S,C){return d.circle(S,C,x,b)});return r.mesh(T,f,v,m,w),T.label="Soft Body",T}},66615:(s,o,i)=>{var r={};s.exports=r;var h=i(31725),a=i(53402);r.fromVertices=function(u){for(var l={},d=0;d<u.length;d++){var c=(d+1)%u.length,p=h.normalise({x:u[c].y-u[d].y,y:u[d].x-u[c].x}),f=p.y===0?1/0:p.x/p.y;l[f=f.toFixed(3).toString()]=p}return a.values(l)},r.rotate=function(u,l){if(l!==0)for(var d=Math.cos(l),c=Math.sin(l),p=0;p<u.length;p++){var f,v=u[p];f=v.x*d-v.y*c,v.y=v.x*c+v.y*d,v.x=f}}},15647:s=>{var o={};s.exports=o,o.create=function(i){var r={min:{x:0,y:0},max:{x:0,y:0}};return i&&o.update(r,i),r},o.update=function(i,r,h){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var a=0;a<r.length;a++){var u=r[a];u.x>i.max.x&&(i.max.x=u.x),u.x<i.min.x&&(i.min.x=u.x),u.y>i.max.y&&(i.max.y=u.y),u.y<i.min.y&&(i.min.y=u.y)}h&&(h.x>0?i.max.x+=h.x:i.min.x+=h.x,h.y>0?i.max.y+=h.y:i.min.y+=h.y)},o.contains=function(i,r){return r.x>=i.min.x&&r.x<=i.max.x&&r.y>=i.min.y&&r.y<=i.max.y},o.overlaps=function(i,r){return i.min.x<=r.max.x&&i.max.x>=r.min.x&&i.max.y>=r.min.y&&i.min.y<=r.max.y},o.translate=function(i,r){i.min.x+=r.x,i.max.x+=r.x,i.min.y+=r.y,i.max.y+=r.y},o.shift=function(i,r){var h=i.max.x-i.min.x,a=i.max.y-i.min.y;i.min.x=r.x,i.max.x=r.x+h,i.min.y=r.y,i.max.y=r.y+a}},74058:(s,o,i)=>{var r={};s.exports=r,i(15647);var h=i(53402);r.pathToVertices=function(a,u){typeof window>"u"||"SVGPathSeg"in window||h.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var l,d,c,p,f,v,g,y,m,x,b,w=[],T=0,S=0,C=0;u=u||15;var E=function(_,O,k){var P=k%2==1&&k>1;if(!m||_!=m.x||O!=m.y){m&&P?(x=m.x,b=m.y):(x=0,b=0);var A={x:x+_,y:b+O};!P&&m||(m=A),w.push(A),S=x+_,C=b+O}},M=function(_){var O=_.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":S=_.x,C=_.y;break;case"H":S=_.x;break;case"V":C=_.y}E(S,C,_.pathSegType)}};for(r._svgPathToAbsolute(a),c=a.getTotalLength(),v=[],l=0;l<a.pathSegList.numberOfItems;l+=1)v.push(a.pathSegList.getItem(l));for(g=v.concat();T<c;){if((f=v[a.getPathSegAtLength(T)])!=y){for(;g.length&&g[0]!=f;)M(g.shift());y=f}switch(f.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p=a.getPointAtLength(T),E(p.x,p.y,0)}T+=u}for(l=0,d=g.length;l<d;++l)M(g[l]);return w},r._svgPathToAbsolute=function(a){for(var u,l,d,c,p,f,v=a.pathSegList,g=0,y=0,m=v.numberOfItems,x=0;x<m;++x){var b=v.getItem(x),w=b.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(w))"x"in b&&(g=b.x),"y"in b&&(y=b.y);else switch("x1"in b&&(d=g+b.x1),"x2"in b&&(p=g+b.x2),"y1"in b&&(c=y+b.y1),"y2"in b&&(f=y+b.y2),"x"in b&&(g+=b.x),"y"in b&&(y+=b.y),w){case"m":v.replaceItem(a.createSVGPathSegMovetoAbs(g,y),x);break;case"l":v.replaceItem(a.createSVGPathSegLinetoAbs(g,y),x);break;case"h":v.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(g),x);break;case"v":v.replaceItem(a.createSVGPathSegLinetoVerticalAbs(y),x);break;case"c":v.replaceItem(a.createSVGPathSegCurvetoCubicAbs(g,y,d,c,p,f),x);break;case"s":v.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(g,y,p,f),x);break;case"q":v.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(g,y,d,c),x);break;case"t":v.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(g,y),x);break;case"a":v.replaceItem(a.createSVGPathSegArcAbs(g,y,b.r1,b.r2,b.angle,b.largeArcFlag,b.sweepFlag),x);break;case"z":case"Z":g=u,y=l}w!="M"&&w!="m"||(u=g,l=y)}}},31725:s=>{var o={};s.exports=o,o.create=function(i,r){return{x:i||0,y:r||0}},o.clone=function(i){return{x:i.x,y:i.y}},o.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},o.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},o.rotate=function(i,r,h){var a=Math.cos(r),u=Math.sin(r);h||(h={});var l=i.x*a-i.y*u;return h.y=i.x*u+i.y*a,h.x=l,h},o.rotateAbout=function(i,r,h,a){var u=Math.cos(r),l=Math.sin(r);a||(a={});var d=h.x+((i.x-h.x)*u-(i.y-h.y)*l);return a.y=h.y+((i.x-h.x)*l+(i.y-h.y)*u),a.x=d,a},o.normalise=function(i){var r=o.magnitude(i);return r===0?{x:0,y:0}:{x:i.x/r,y:i.y/r}},o.dot=function(i,r){return i.x*r.x+i.y*r.y},o.cross=function(i,r){return i.x*r.y-i.y*r.x},o.cross3=function(i,r,h){return(r.x-i.x)*(h.y-i.y)-(r.y-i.y)*(h.x-i.x)},o.add=function(i,r,h){return h||(h={}),h.x=i.x+r.x,h.y=i.y+r.y,h},o.sub=function(i,r,h){return h||(h={}),h.x=i.x-r.x,h.y=i.y-r.y,h},o.mult=function(i,r){return{x:i.x*r,y:i.y*r}},o.div=function(i,r){return{x:i.x/r,y:i.y/r}},o.perp=function(i,r){return{x:(r=r===!0?-1:1)*-i.y,y:r*i.x}},o.neg=function(i){return{x:-i.x,y:-i.y}},o.angle=function(i,r){return Math.atan2(r.y-i.y,r.x-i.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]},41598:(s,o,i)=>{var r={};s.exports=r;var h=i(31725),a=i(53402);r.create=function(u,l){for(var d=[],c=0;c<u.length;c++){var p=u[c],f={x:p.x,y:p.y,index:c,body:l,isInternal:!1};d.push(f)}return d},r.fromPath=function(u,l){var d=[];return u.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(c,p,f){d.push({x:parseFloat(p),y:parseFloat(f)})}),r.create(d,l)},r.centre=function(u){for(var l,d,c,p=r.area(u,!0),f={x:0,y:0},v=0;v<u.length;v++)c=(v+1)%u.length,l=h.cross(u[v],u[c]),d=h.mult(h.add(u[v],u[c]),l),f=h.add(f,d);return h.div(f,6*p)},r.mean=function(u){for(var l={x:0,y:0},d=0;d<u.length;d++)l.x+=u[d].x,l.y+=u[d].y;return h.div(l,u.length)},r.area=function(u,l){for(var d=0,c=u.length-1,p=0;p<u.length;p++)d+=(u[c].x-u[p].x)*(u[c].y+u[p].y),c=p;return l?d/2:Math.abs(d)/2},r.inertia=function(u,l){for(var d,c,p=0,f=0,v=u,g=0;g<v.length;g++)c=(g+1)%v.length,p+=(d=Math.abs(h.cross(v[c],v[g])))*(h.dot(v[c],v[c])+h.dot(v[c],v[g])+h.dot(v[g],v[g])),f+=d;return l/6*(p/f)},r.translate=function(u,l,d){d=d!==void 0?d:1;var c,p=u.length,f=l.x*d,v=l.y*d;for(c=0;c<p;c++)u[c].x+=f,u[c].y+=v;return u},r.rotate=function(u,l,d){if(l!==0){var c,p,f,v,g=Math.cos(l),y=Math.sin(l),m=d.x,x=d.y,b=u.length;for(v=0;v<b;v++)p=(c=u[v]).x-m,f=c.y-x,c.x=m+(p*g-f*y),c.y=x+(p*y+f*g);return u}},r.contains=function(u,l){for(var d,c=l.x,p=l.y,f=u.length,v=u[f-1],g=0;g<f;g++){if(d=u[g],(c-v.x)*(d.y-v.y)+(p-v.y)*(v.x-d.x)>0)return!1;v=d}return!0},r.scale=function(u,l,d,c){if(l===1&&d===1)return u;var p,f;c=c||r.centre(u);for(var v=0;v<u.length;v++)p=u[v],f=h.sub(p,c),u[v].x=c.x+f.x*l,u[v].y=c.y+f.y*d;return u},r.chamfer=function(u,l,d,c,p){l=typeof l=="number"?[l]:l||[8],d=d!==void 0?d:-1,c=c||2,p=p||14;for(var f=[],v=0;v<u.length;v++){var g=u[v-1>=0?v-1:u.length-1],y=u[v],m=u[(v+1)%u.length],x=l[v<l.length?v:l.length-1];if(x!==0){var b=h.normalise({x:y.y-g.y,y:g.x-y.x}),w=h.normalise({x:m.y-y.y,y:y.x-m.x}),T=Math.sqrt(2*Math.pow(x,2)),S=h.mult(a.clone(b),x),C=h.normalise(h.mult(h.add(b,w),.5)),E=h.sub(y,h.mult(C,T)),M=d;d===-1&&(M=1.75*Math.pow(x,.32)),(M=a.clamp(M,c,p))%2==1&&(M+=1);for(var _=Math.acos(h.dot(b,w))/M,O=0;O<M;O++)f.push(h.add(h.rotate(S,_*O),E))}else f.push(y)}return f},r.clockwiseSort=function(u){var l=r.mean(u);return u.sort(function(d,c){return h.angle(l,d)-h.angle(l,c)}),u},r.isConvex=function(u){var l,d,c,p,f=0,v=u.length;if(v<3)return null;for(l=0;l<v;l++)if(c=(l+2)%v,p=(u[d=(l+1)%v].x-u[l].x)*(u[c].y-u[d].y),(p-=(u[d].y-u[l].y)*(u[c].x-u[d].x))<0?f|=1:p>0&&(f|=2),f===3)return!1;return f!==0||null},r.hull=function(u){var l,d,c=[],p=[];for((u=u.slice(0)).sort(function(f,v){var g=f.x-v.x;return g!==0?g:f.y-v.y}),d=0;d<u.length;d+=1){for(l=u[d];p.length>=2&&h.cross3(p[p.length-2],p[p.length-1],l)<=0;)p.pop();p.push(l)}for(d=u.length-1;d>=0;d-=1){for(l=u[d];c.length>=2&&h.cross3(c[c.length-2],c[c.length-1],l)<=0;)c.pop();c.push(l)}return c.pop(),p.pop(),c.concat(p)}},18210:(s,o,i)=>{var r=i(19933),h={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Body.create",function(){h.Body.init(this)}),a.before("Engine.update",function(u){h.Engine.update(u)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var u=r.Composite.allBodies(a.world),l=0;l<u.length;l++){var d=u[l],c=d.plugin.attractors;if(c&&c.length>0)for(var p=0;p<u.length;p++){var f=u[p];if(l!==p)for(var v=0;v<c.length;v++){var g=c[v],y=g;r.Common.isFunction(g)&&(y=g(d,f)),y&&r.Body.applyForce(f,f.position,y)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,u){var l=r.Vector.sub(u.position,a.position),d=r.Vector.magnitudeSquared(l)||1e-4,c=r.Vector.normalise(l),p=-h.Attractors.gravityConstant*(a.mass*u.mass/d),f=r.Vector.mult(c,p);r.Body.applyForce(a,a.position,r.Vector.neg(f)),r.Body.applyForce(u,u.position,f)}}};s.exports=h},40178:s=>{s.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(o){o.after("Engine.create",function(){o.Events.on(this,"collisionStart",function(i){i.pairs.map(function(r){var h=r.bodyA,a=r.bodyB;h.gameObject&&h.gameObject.emit("collide",h,a,r),a.gameObject&&a.gameObject.emit("collide",a,h,r),o.Events.trigger(h,"onCollide",{pair:r}),o.Events.trigger(a,"onCollide",{pair:r}),h.onCollideCallback&&h.onCollideCallback(r),a.onCollideCallback&&a.onCollideCallback(r),h.onCollideWith[a.id]&&h.onCollideWith[a.id](a,r),a.onCollideWith[h.id]&&a.onCollideWith[h.id](h,r)})}),o.Events.on(this,"collisionActive",function(i){i.pairs.map(function(r){var h=r.bodyA,a=r.bodyB;h.gameObject&&h.gameObject.emit("collideActive",h,a,r),a.gameObject&&a.gameObject.emit("collideActive",a,h,r),o.Events.trigger(h,"onCollideActive",{pair:r}),o.Events.trigger(a,"onCollideActive",{pair:r}),h.onCollideActiveCallback&&h.onCollideActiveCallback(r),a.onCollideActiveCallback&&a.onCollideActiveCallback(r)})}),o.Events.on(this,"collisionEnd",function(i){i.pairs.map(function(r){var h=r.bodyA,a=r.bodyB;h.gameObject&&h.gameObject.emit("collideEnd",h,a,r),a.gameObject&&a.gameObject.emit("collideEnd",a,h,r),o.Events.trigger(h,"onCollideEnd",{pair:r}),o.Events.trigger(a,"onCollideEnd",{pair:r}),h.onCollideEndCallback&&h.onCollideEndCallback(r),a.onCollideEndCallback&&a.onCollideEndCallback(r)})})})}}},74507:(s,o,i)=>{var r=i(19933),h={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Engine.update",function(){h.Engine.update(this)})},Engine:{update:function(a){for(var u=a.world,l=r.Composite.allBodies(u),d=r.Composite.allComposites(u),c=0;c<l.length;c+=1){var p=l[c];p.plugin.wrap&&h.Body.wrap(p,p.plugin.wrap)}for(c=0;c<d.length;c+=1){var f=d[c];f.plugin.wrap&&h.Composite.wrap(f,f.plugin.wrap)}}},Bounds:{wrap:function(a,u){var l=null,d=null;if(u.min.x!==void 0&&u.max.x!==void 0&&(a.min.x>u.max.x?l=u.min.x-a.max.x:a.max.x<u.min.x&&(l=u.max.x-a.min.x)),u.min.y!==void 0&&u.max.y!==void 0&&(a.min.y>u.max.y?d=u.min.y-a.max.y:a.max.y<u.min.y&&(d=u.max.y-a.min.y)),l!==null||d!==null)return{x:l||0,y:d||0}}},Body:{wrap:function(a,u){var l=h.Bounds.wrap(a.bounds,u);return l&&r.Body.translate(a,l),l}},Composite:{bounds:function(a){for(var u=r.Composite.allBodies(a),l=[],d=0;d<u.length;d+=1){var c=u[d];l.push(c.bounds.min,c.bounds.max)}return r.Bounds.create(l)},wrap:function(a,u){var l=h.Bounds.wrap(h.Composite.bounds(a),u);return l&&r.Composite.translate(a,l),l}}};s.exports=h},55973:s=>{function o(O,k,P){P=P||0;var A,L,D,F,X,z,Y,R=[0,0];return A=O[1][1]-O[0][1],L=O[0][0]-O[1][0],D=A*O[0][0]+L*O[0][1],F=k[1][1]-k[0][1],X=k[0][0]-k[1][0],z=F*k[0][0]+X*k[0][1],M(Y=A*X-F*L,0,P)||(R[0]=(X*D-L*z)/Y,R[1]=(A*z-F*D)/Y),R}function i(O,k,P,A){var L=k[0]-O[0],D=k[1]-O[1],F=A[0]-P[0],X=A[1]-P[1];if(F*D-X*L===0)return!1;var z=(L*(P[1]-O[1])+D*(O[0]-P[0]))/(F*D-X*L),Y=(F*(O[1]-P[1])+X*(P[0]-O[0]))/(X*L-F*D);return z>=0&&z<=1&&Y>=0&&Y<=1}function r(O,k,P){return(k[0]-O[0])*(P[1]-O[1])-(P[0]-O[0])*(k[1]-O[1])}function h(O,k,P){return r(O,k,P)>0}function a(O,k,P){return r(O,k,P)>=0}function u(O,k,P){return r(O,k,P)<0}function l(O,k,P){return r(O,k,P)<=0}s.exports={decomp:function(O){var k=S(O);return k.length>0?C(O,k):[O]},quickDecomp:function O(k,P,A,L,D,F,X){F=F||100,X=X||0,D=D||25,P=P!==void 0?P:[],A=A||[],L=L||[];var z=[0,0],Y=[0,0],R=[0,0],B=0,I=0,G=0,N=0,W=0,U=0,V=0,K=[],$=[],H=k,j=k;if(j.length<3)return P;if(++X>F)return console.warn("quickDecomp: max level ("+F+") reached."),P;for(var q=0;q<k.length;++q)if(y(H,q)){A.push(H[q]),B=I=Number.MAX_VALUE;for(var Z=0;Z<k.length;++Z)h(v(H,q-1),v(H,q),v(H,Z))&&l(v(H,q-1),v(H,q),v(H,Z-1))&&(R=E(v(H,q-1),v(H,q),v(H,Z),v(H,Z-1)),u(v(H,q+1),v(H,q),R)&&(G=f(H[q],R))<I&&(I=G,Y=R,U=Z)),h(v(H,q+1),v(H,q),v(H,Z+1))&&l(v(H,q+1),v(H,q),v(H,Z))&&(R=E(v(H,q+1),v(H,q),v(H,Z),v(H,Z+1)),h(v(H,q-1),v(H,q),R)&&(G=f(H[q],R))<B&&(B=G,z=R,W=Z));if(U===(W+1)%k.length)R[0]=(Y[0]+z[0])/2,R[1]=(Y[1]+z[1])/2,L.push(R),q<W?(g(K,H,q,W+1),K.push(R),$.push(R),U!==0&&g($,H,U,H.length),g($,H,0,q+1)):(q!==0&&g(K,H,q,H.length),g(K,H,0,W+1),K.push(R),$.push(R),g($,H,U,q+1));else{if(U>W&&(W+=k.length),N=Number.MAX_VALUE,W<U)return P;for(Z=U;Z<=W;++Z)a(v(H,q-1),v(H,q),v(H,Z))&&l(v(H,q+1),v(H,q),v(H,Z))&&(G=f(v(H,q),v(H,Z)))<N&&w(H,q,Z)&&(N=G,V=Z%k.length);q<V?(g(K,H,q,V+1),V!==0&&g($,H,V,j.length),g($,H,0,q+1)):(q!==0&&g(K,H,q,j.length),g(K,H,0,V+1),g($,H,V,q+1))}return K.length<$.length?(O(K,P,A,L,D,F,X),O($,P,A,L,D,F,X)):(O($,P,A,L,D,F,X),O(K,P,A,L,D,F,X)),P}return P.push(k),P},isSimple:function(O){var k,P=O;for(k=0;k<P.length-1;k++)for(var A=0;A<k-1;A++)if(i(P[k],P[k+1],P[A],P[A+1]))return!1;for(k=1;k<P.length-2;k++)if(i(P[0],P[P.length-1],P[k],P[k+1]))return!1;return!0},removeCollinearPoints:function(O,k){for(var P=0,A=O.length-1;O.length>3&&A>=0;--A)p(v(O,A-1),v(O,A),v(O,A+1),k)&&(O.splice(A%O.length,1),P++);return P},removeDuplicatePoints:function(O,k){for(var P=O.length-1;P>=1;--P)for(var A=O[P],L=P-1;L>=0;--L)_(A,O[L],k)&&O.splice(P,1)},makeCCW:function(O){for(var k=0,P=O,A=1;A<O.length;++A)(P[A][1]<P[k][1]||P[A][1]===P[k][1]&&P[A][0]>P[k][0])&&(k=A);return!h(v(O,k-1),v(O,k),v(O,k+1))&&(function(L){for(var D=[],F=L.length,X=0;X!==F;X++)D.push(L.pop());for(X=0;X!==F;X++)L[X]=D[X]}(O),!0)}};var d=[],c=[];function p(O,k,P,A){if(A){var L=d,D=c;L[0]=k[0]-O[0],L[1]=k[1]-O[1],D[0]=P[0]-k[0],D[1]=P[1]-k[1];var F=L[0]*D[0]+L[1]*D[1],X=Math.sqrt(L[0]*L[0]+L[1]*L[1]),z=Math.sqrt(D[0]*D[0]+D[1]*D[1]);return Math.acos(F/(X*z))<A}return r(O,k,P)===0}function f(O,k){var P=k[0]-O[0],A=k[1]-O[1];return P*P+A*A}function v(O,k){var P=O.length;return O[k<0?k%P+P:k%P]}function g(O,k,P,A){for(var L=P;L<A;L++)O.push(k[L])}function y(O,k){return u(v(O,k-1),v(O,k),v(O,k+1))}var m=[],x=[];function b(O,k,P){var A,L,D=m,F=x;if(a(v(O,k+1),v(O,k),v(O,P))&&l(v(O,k-1),v(O,k),v(O,P)))return!1;L=f(v(O,k),v(O,P));for(var X=0;X!==O.length;++X)if((X+1)%O.length!==k&&X!==k&&a(v(O,k),v(O,P),v(O,X+1))&&l(v(O,k),v(O,P),v(O,X))&&(D[0]=v(O,k),D[1]=v(O,P),F[0]=v(O,X),F[1]=v(O,X+1),A=o(D,F),f(v(O,k),A)<L))return!1;return!0}function w(O,k,P){for(var A=0;A!==O.length;++A)if(A!==k&&A!==P&&(A+1)%O.length!==k&&(A+1)%O.length!==P&&i(v(O,k),v(O,P),v(O,A),v(O,A+1)))return!1;return!0}function T(O,k,P,A){var L=A||[];if(function(F){F.length=0}(L),k<P)for(var D=k;D<=P;D++)L.push(O[D]);else{for(D=0;D<=P;D++)L.push(O[D]);for(D=k;D<O.length;D++)L.push(O[D])}return L}function S(O){for(var k=[],P=[],A=[],L=[],D=Number.MAX_VALUE,F=0;F<O.length;++F)if(y(O,F)){for(var X=0;X<O.length;++X)if(b(O,F,X)){P=S(T(O,F,X,L)),A=S(T(O,X,F,L));for(var z=0;z<A.length;z++)P.push(A[z]);P.length<D&&(k=P,D=P.length,k.push([v(O,F),v(O,X)]))}}return k}function C(O,k){if(k.length===0)return[O];if(k instanceof Array&&k.length&&k[0]instanceof Array&&k[0].length===2&&k[0][0]instanceof Array){for(var P=[O],A=0;A<k.length;A++)for(var L=k[A],D=0;D<P.length;D++){var F=C(P[D],L);if(F){P.splice(D,1),P.push(F[0],F[1]);break}}return P}return L=k,A=O.indexOf(L[0]),D=O.indexOf(L[1]),A!==-1&&D!==-1&&[T(O,A,D),T(O,D,A)]}function E(O,k,P,A,L){L=L||0;var D=k[1]-O[1],F=O[0]-k[0],X=D*O[0]+F*O[1],z=A[1]-P[1],Y=P[0]-A[0],R=z*P[0]+Y*P[1],B=D*Y-z*F;return M(B,0,L)?[0,0]:[(Y*X-F*R)/B,(D*R-z*X)/B]}function M(O,k,P){return P=P||0,Math.abs(O-k)<=P}function _(O,k,P){return M(O[0],k[0],P)&&M(O[1],k[1],P)}},52018:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){this.pluginManager=h,this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=r},42363:s=>{s.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},37277:s=>{var o={},i={},r={register:function(h,a,u,l){l===void 0&&(l=!1),o[h]={plugin:a,mapping:u,custom:l}},registerCustom:function(h,a,u,l){i[h]={plugin:a,mapping:u,data:l}},hasCore:function(h){return o.hasOwnProperty(h)},hasCustom:function(h){return i.hasOwnProperty(h)},getCore:function(h){return o[h]},getCustom:function(h){return i[h]},getCustomClass:function(h){return i.hasOwnProperty(h)?i[h].plugin:null},remove:function(h){o.hasOwnProperty(h)&&delete o[h]},removeCustom:function(h){i.hasOwnProperty(h)&&delete i[h]},destroyCorePlugins:function(){for(var h in o)o.hasOwnProperty(h)&&delete o[h]},destroyCustomPlugins:function(){for(var h in i)i.hasOwnProperty(h)&&delete i[h]}};s.exports=r},77332:(s,o,i)=>{var r=i(83419),h=i(8443),a=i(50792),u=i(74099),l=i(44603),d=i(39429),c=i(95540),p=i(37277),f=i(72905),v=new r({Extends:a,initialize:function(g){a.call(this),this.game=g,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],g.isBooted?this.boot():g.events.once(h.BOOT,this.boot,this)},boot:function(){var g,y,m,x,b,w,T,S=this.game.config,C=S.installGlobalPlugins;for(C=C.concat(this._pendingGlobal),g=0;g<C.length;g++)y=C[g],m=c(y,"key",null),x=c(y,"plugin",null),b=c(y,"start",!1),w=c(y,"mapping",null),T=c(y,"data",null),m&&(x?this.install(m,x,b,w,T):console.warn("Missing `plugin` for key: "+m));for(C=(C=S.installScenePlugins).concat(this._pendingScene),g=0;g<C.length;g++)y=C[g],m=c(y,"key",null),x=c(y,"plugin",null),w=c(y,"mapping",null),m&&(x?this.installScenePlugin(m,x,w):console.warn("Missing `plugin` for key: "+m));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function(g,y,m){var x,b,w,T=this.game,S=g.scene,C=g.settings.map,E=g.settings.isBooted;for(x=0;x<y.length;x++)T[b=y[x]]?(g[b]=T[b],C.hasOwnProperty(b)&&(S[C[b]]=g[b])):b==="game"&&C.hasOwnProperty(b)&&(S[C[b]]=T);for(var M=0;M<m.length;M++)for(w=m[M],x=0;x<w.length;x++)if(b=w[x],p.hasCore(b)){var _=p.getCore(b),O=_.mapping,k=new _.plugin(S,this,O);g[O]=k,_.custom?S[O]=k:C.hasOwnProperty(O)&&(S[C[O]]=k),E&&k.boot()}for(w=this.plugins,x=0;x<w.length;x++){var P=w[x];P.mapping&&(S[P.mapping]=P.plugin)}},getDefaultScenePlugins:function(){var g=this.game.config.defaultPlugins;return g.concat(this.scenePlugins)},installScenePlugin:function(g,y,m,x,b){if(b===void 0&&(b=!1),typeof y=="function"){if(p.hasCore(g)||p.register(g,y,m,!0),this.scenePlugins.indexOf(g)===-1)this.scenePlugins.push(g);else if(!b&&p.hasCore(g))return void console.warn("Scene Plugin key in use: "+g);if(x){var w=new y(x,this,g);x.sys[g]=w,m&&m!==""&&(x[m]=w),w.boot()}}else console.warn("Invalid Scene Plugin: "+g)},install:function(g,y,m,x,b){if(m===void 0&&(m=!1),x===void 0&&(x=null),b===void 0&&(b=null),typeof y!="function")return console.warn("Invalid Plugin: "+g),null;if(p.hasCustom(g))return console.warn("Plugin key in use: "+g),null;if(x!==null&&(m=!0),this.game.isBooted){if(p.registerCustom(g,y,x,b),m)return this.start(g)}else this._pendingGlobal.push({key:g,plugin:y,start:m,mapping:x,data:b});return null},getIndex:function(g){for(var y=this.plugins,m=0;m<y.length;m++)if(y[m].key===g)return m;return-1},getEntry:function(g){var y=this.getIndex(g);if(y!==-1)return this.plugins[y]},isActive:function(g){var y=this.getEntry(g);return y&&y.active},start:function(g,y){y===void 0&&(y=g);var m=this.getEntry(y);return m&&!m.active?(m.active=!0,m.plugin.start()):m||(m=this.createEntry(g,y)),m?m.plugin:null},createEntry:function(g,y){var m=p.getCustom(g);if(m){var x=new m.plugin(this);m={key:y,plugin:x,active:!0,mapping:m.mapping,data:m.data},this.plugins.push(m),x.init(m.data),x.start()}return m},stop:function(g){var y=this.getEntry(g);return y&&y.active&&(y.active=!1,y.plugin.stop()),this},get:function(g,y){y===void 0&&(y=!0);var m=this.getEntry(g);if(m)return m.plugin;var x=this.getClass(g);return x&&y?(m=this.createEntry(g,g))?m.plugin:null:x||null},getClass:function(g){return p.getCustomClass(g)},removeGlobalPlugin:function(g){var y=this.getEntry(g);y&&f(this.plugins,y),p.removeCustom(g)},removeScenePlugin:function(g){f(this.scenePlugins,g),p.remove(g)},registerGameObject:function(g,y,m){return y&&d.register(g,y),m&&l.register(g,m),this},removeGameObject:function(g,y,m){return y===void 0&&(y=!0),m===void 0&&(m=!0),y&&d.remove(g),m&&l.remove(g),this},registerFileType:function(g,y,m){u.register(g,y),m&&m.sys.load&&(m.sys.load[g]=y)},destroy:function(){for(var g=0;g<this.plugins.length;g++)this.plugins[g].plugin.destroy();p.destroyCustomPlugins(),this.game.noReturn&&p.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});s.exports=v},45145:(s,o,i)=>{var r=i(52018),h=i(83419),a=i(44594),u=new h({Extends:r,initialize:function(l,d,c){r.call(this,d),this.scene=l,this.systems=l.sys,this.pluginKey=c,l.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});s.exports=u},18922:(s,o,i)=>{s.exports={BasePlugin:i(52018),DefaultPlugins:i(42363),PluginCache:i(37277),PluginManager:i(77332),ScenePlugin:i(45145)}},63595:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(s){const o=performance.now(),i=this.getVideoPlaybackQuality(),r=this.mozPresentedFrames||this.mozPaintedFrames||i.totalVideoFrames-i.droppedVideoFrames,h=(a,u)=>{const l=this.getVideoPlaybackQuality(),d=this.mozPresentedFrames||this.mozPaintedFrames||l.totalVideoFrames-l.droppedVideoFrames;if(d>r){const c=this.mozFrameDelay||l.totalFrameDelay-i.totalFrameDelay||0,p=u-a;s(u,{presentationTime:u+1e3*c,expectedDisplayTime:u+p,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+p/1e3,presentedFrames:d,processingDuration:c}),delete this._rvfcpolyfillmap[o]}else this._rvfcpolyfillmap[o]=requestAnimationFrame(c=>h(u,c))};return this._rvfcpolyfillmap[o]=requestAnimationFrame(a=>h(o,a)),o},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(s){cancelAnimationFrame(this._rvfcpolyfillmap[s]),delete this._rvfcpolyfillmap[s]})},10312:s=>{s.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:s=>{s.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},68627:(s,o,i)=>{var r=i(19715),h=i(32880),a=i(83419),u=i(8054),l=i(50792),d=i(92503),c=i(56373),p=i(97480),f=i(69442),v=i(61340),g=new a({Extends:l,initialize:function(y){l.call(this);var m=y.config;this.config={clearBeforeRender:m.clearBeforeRender,backgroundColor:m.backgroundColor,antialias:m.antialias,roundPixels:m.roundPixels},this.game=y,this.type=u.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=y.canvas;var x={alpha:y.config.transparent,desynchronized:y.config.desynchronized,willReadFrequently:!1};this.gameContext=m.context?m.context:this.gameCanvas.getContext("2d",x),this.currentContext=this.gameContext,this.antialias=y.config.antialias,this.blendModes=c(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(f.READY,this.boot,this)},boot:function(){var y=this.game,m=y.scale.baseSize;this.width=m.width,this.height=m.height,this.isBooted=!0,y.scale.on(p.RESIZE,this.onResize,this),this.resize(m.width,m.height)},onResize:function(y,m){m.width===this.width&&m.height===this.height||this.resize(m.width,m.height)},resize:function(y,m){this.width=y,this.height=m,this.emit(d.RESIZE,y,m)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(y){return this.currentContext.globalCompositeOperation=y,this},setContext:function(y){return this.currentContext=y||this.gameContext,this},setAlpha:function(y){return this.currentContext.globalAlpha=y,this},preRender:function(){var y=this.gameContext,m=this.config,x=this.width,b=this.height;y.globalAlpha=1,y.globalCompositeOperation="source-over",y.setTransform(1,0,0,1,0,0),m.clearBeforeRender&&(y.clearRect(0,0,x,b),m.transparent||(y.fillStyle=m.backgroundColor.rgba,y.fillRect(0,0,x,b))),y.save(),this.drawCount=0,this.emit(d.PRE_RENDER)},render:function(y,m,x){var b=m.length;this.emit(d.RENDER,y,x);var w=x.x,T=x.y,S=x.width,C=x.height,E=x.renderToTexture?x.context:y.sys.context;E.save(),this.game.scene.customViewports&&(E.beginPath(),E.rect(w,T,S,C),E.clip()),x.emit(r.PRE_RENDER,x),this.currentContext=E;var M=x.mask;M&&M.preRenderCanvas(this,null,x._maskCamera),x.transparent||(E.fillStyle=x.backgroundColor.rgba,E.fillRect(w,T,S,C)),E.globalAlpha=x.alpha,E.globalCompositeOperation="source-over",this.drawCount+=b,x.renderToTexture&&x.emit(r.PRE_RENDER,x),x.matrix.copyToContext(E);for(var _=0;_<b;_++){var O=m[_];O.mask&&O.mask.preRenderCanvas(this,O,x),O.renderCanvas(this,O,x),O.mask&&O.mask.postRenderCanvas(this,O,x)}E.setTransform(1,0,0,1,0,0),E.globalCompositeOperation="source-over",E.globalAlpha=1,x.flashEffect.postRenderCanvas(E),x.fadeEffect.postRenderCanvas(E),x.dirty=!1,M&&M.postRenderCanvas(this),E.restore(),x.renderToTexture&&(x.emit(r.POST_RENDER,x),x.renderToGame&&y.sys.context.drawImage(x.canvas,w,T)),x.emit(r.POST_RENDER,x)},postRender:function(){this.gameContext.restore(),this.emit(d.POST_RENDER);var y=this.snapshotState;y.callback&&(h(this.gameCanvas,y),y.callback=null)},snapshotCanvas:function(y,m,x,b,w,T,S,C,E){x===void 0&&(x=!1),this.snapshotArea(b,w,T,S,m,C,E);var M=this.snapshotState;return M.getPixel=x,h(y,M),M.callback=null,this},snapshot:function(y,m,x){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,y,m,x)},snapshotArea:function(y,m,x,b,w,T,S){var C=this.snapshotState;return C.callback=w,C.type=T,C.encoder=S,C.getPixel=!1,C.x=y,C.y=m,C.width=Math.min(x,this.gameCanvas.width),C.height=Math.min(b,this.gameCanvas.height),this},snapshotPixel:function(y,m,x){return this.snapshotArea(y,m,1,1,x),this.snapshotState.getPixel=!0,this},batchSprite:function(y,m,x,b){var w=x.alpha*y.alpha;if(w!==0){var T=this.currentContext,S=this._tempMatrix1,C=this._tempMatrix2,E=m.canvasData,M=E.x,_=E.y,O=m.cutWidth,k=m.cutHeight,P=m.customPivot,A=m.source.resolution,L=y.displayOriginX,D=y.displayOriginY,F=-L+m.x,X=-D+m.y;if(y.isCropped){var z=y._crop;z.flipX===y.flipX&&z.flipY===y.flipY||m.updateCropUVs(z,y.flipX,y.flipY),O=z.cw,k=z.ch,M=z.cx,_=z.cy,F=-L+z.x,X=-D+z.y,y.flipX&&(F>=0?F=-(F+O):F<0&&(F=Math.abs(F)-O)),y.flipY&&(X>=0?X=-(X+k):X<0&&(X=Math.abs(X)-k))}var Y=1,R=1;y.flipX&&(P||(F+=-m.realWidth+2*L),Y=-1),y.flipY&&(P||(X+=-m.realHeight+2*D),R=-1);var B=y.x,I=y.y;C.applyITRS(B,I,y.rotation,y.scaleX*Y,y.scaleY*R),S.copyFrom(x.matrix),b?(S.multiplyWithOffset(b,-x.scrollX*y.scrollFactorX,-x.scrollY*y.scrollFactorY),C.e=B,C.f=I):(C.e-=x.scrollX*y.scrollFactorX,C.f-=x.scrollY*y.scrollFactorY),S.multiply(C),x.roundPixels&&(S.e=Math.round(S.e),S.f=Math.round(S.f)),T.save(),S.setToContext(T),T.globalCompositeOperation=this.blendModes[y.blendMode],T.globalAlpha=w,T.imageSmoothingEnabled=!m.source.scaleMode,y.mask&&y.mask.preRenderCanvas(this,y,x),O>0&&k>0&&(x.roundPixels?T.drawImage(m.source.image,M,_,O,k,Math.round(F),Math.round(X),Math.round(O/A),Math.round(k/A)):T.drawImage(m.source.image,M,_,O,k,F,X,O/A,k/A)),y.mask&&y.mask.postRenderCanvas(this,y,x),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});s.exports=g},55830:(s,o,i)=>{s.exports={CanvasRenderer:i(68627),GetBlendModes:i(56373),SetTransform:i(20926)}},56373:(s,o,i)=>{var r=i(10312),h=i(89289);s.exports=function(){var a=[],u=h.supportNewBlendModes,l="source-over";return a[r.NORMAL]=l,a[r.ADD]="lighter",a[r.MULTIPLY]=u?"multiply":l,a[r.SCREEN]=u?"screen":l,a[r.OVERLAY]=u?"overlay":l,a[r.DARKEN]=u?"darken":l,a[r.LIGHTEN]=u?"lighten":l,a[r.COLOR_DODGE]=u?"color-dodge":l,a[r.COLOR_BURN]=u?"color-burn":l,a[r.HARD_LIGHT]=u?"hard-light":l,a[r.SOFT_LIGHT]=u?"soft-light":l,a[r.DIFFERENCE]=u?"difference":l,a[r.EXCLUSION]=u?"exclusion":l,a[r.HUE]=u?"hue":l,a[r.SATURATION]=u?"saturation":l,a[r.COLOR]=u?"color":l,a[r.LUMINOSITY]=u?"luminosity":l,a[r.ERASE]="destination-out",a[r.SOURCE_IN]="source-in",a[r.SOURCE_OUT]="source-out",a[r.SOURCE_ATOP]="source-atop",a[r.DESTINATION_OVER]="destination-over",a[r.DESTINATION_IN]="destination-in",a[r.DESTINATION_OUT]="destination-out",a[r.DESTINATION_ATOP]="destination-atop",a[r.LIGHTER]="lighter",a[r.COPY]="copy",a[r.XOR]="xor",a}},20926:(s,o,i)=>{var r=i(91296);s.exports=function(h,a,u,l,d){var c=l.alpha*u.alpha;if(c<=0)return!1;var p=r(u,l,d).calc;return a.globalCompositeOperation=h.blendModes[u.blendMode],a.globalAlpha=c,a.save(),p.setToContext(a),a.imageSmoothingEnabled=u.frame?!u.frame.source.scaleMode:h.antialias,!0}},63899:s=>{s.exports="losewebgl"},6119:s=>{s.exports="postrender"},48070:s=>{s.exports="prerender"},15640:s=>{s.exports="render"},8912:s=>{s.exports="resize"},87124:s=>{s.exports="restorewebgl"},92503:(s,o,i)=>{s.exports={LOSE_WEBGL:i(63899),POST_RENDER:i(6119),PRE_RENDER:i(48070),RENDER:i(15640),RESIZE:i(8912),RESTORE_WEBGL:i(87124)}},36909:(s,o,i)=>{s.exports={Events:i(92503),Snapshot:i(89966)},s.exports.Canvas=i(55830),s.exports.WebGL=i(4159)},32880:(s,o,i)=>{var r=i(27919),h=i(40987),a=i(95540);s.exports=function(u,l){var d=a(l,"callback"),c=a(l,"type","image/png"),p=a(l,"encoder",.92),f=Math.abs(Math.round(a(l,"x",0))),v=Math.abs(Math.round(a(l,"y",0))),g=Math.floor(a(l,"width",u.width)),y=Math.floor(a(l,"height",u.height));if(a(l,"getPixel",!1)){var m=u.getContext("2d",{willReadFrequently:!1}).getImageData(f,v,1,1).data;d.call(null,new h(m[0],m[1],m[2],m[3]))}else if(f!==0||v!==0||g!==u.width||y!==u.height){var x=r.createWebGL(this,g,y),b=x.getContext("2d",{willReadFrequently:!0});g>0&&y>0&&b.drawImage(u,f,v,g,y,0,0,g,y);var w=new Image;w.onerror=function(){d.call(null),r.remove(x)},w.onload=function(){d.call(null,w),r.remove(x)},w.src=x.toDataURL(c,p)}else{var T=new Image;T.onerror=function(){d.call(null)},T.onload=function(){d.call(null,T)},T.src=u.toDataURL(c,p)}}},88815:(s,o,i)=>{var r=i(27919),h=i(40987),a=i(95540);s.exports=function(u,l){var d=u,c=a(l,"callback"),p=a(l,"type","image/png"),f=a(l,"encoder",.92),v=Math.abs(Math.round(a(l,"x",0))),g=Math.abs(Math.round(a(l,"y",0))),y=a(l,"getPixel",!1),m=a(l,"isFramebuffer",!1),x=m?a(l,"bufferWidth",1):d.drawingBufferWidth,b=m?a(l,"bufferHeight",1):d.drawingBufferHeight;if(y){var w=new Uint8Array(4),T=m?g:b-g;d.readPixels(v,T,1,1,d.RGBA,d.UNSIGNED_BYTE,w),c.call(null,new h(w[0],w[1],w[2],w[3]))}else{var S=Math.floor(a(l,"width",x)),C=Math.floor(a(l,"height",b)),E=S*C*4,M=new Uint8Array(E);d.readPixels(v,b-g-C,S,C,d.RGBA,d.UNSIGNED_BYTE,M);for(var _=r.createWebGL(this,S,C),O=_.getContext("2d",{willReadFrequently:!0}),k=O.getImageData(0,0,S,C),P=k.data,A=0;A<C;A++)for(var L=0;L<S;L++){var D=4*((C-A-1)*S+L),F=m?E-4*(A*S+(S-L)):4*(A*S+L);P[F+0]=M[D+0],P[F+1]=M[D+1],P[F+2]=M[D+2],P[F+3]=M[D+3]}O.putImageData(k,0,0);var X=new Image;X.onerror=function(){c.call(null),r.remove(_)},X.onload=function(){c.call(null,X),r.remove(_)},X.src=_.toDataURL(p,f)}}},89966:(s,o,i)=>{s.exports={Canvas:i(32880),WebGL:i(88815)}},7530:(s,o,i)=>{var r=i(83419),h=i(36060),a=i(90330),u=i(82264),l=i(95540),d=i(32302),c=i(63448),p=i(31302),f=i(58918),v=i(14811),g=i(92651),y=i(96569),m=i(56527),x=i(57516),b=i(43439),w=i(81041),T=i(12385),S=i(7589),C=i(95428),E=i(72905),M=new r({initialize:function(_){this.game=_.game,this.renderer=_,this.classes=new a([[h.UTILITY_PIPELINE,S],[h.MULTI_PIPELINE,x],[h.BITMAPMASK_PIPELINE,p],[h.SINGLE_PIPELINE,T],[h.ROPE_PIPELINE,w],[h.LIGHT_PIPELINE,y],[h.POINTLIGHT_PIPELINE,b],[h.MOBILE_PIPELINE,m]]),this.postPipelineClasses=new a,this.pipelines=new a,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(_,O,k){var P=this.renderer,A=this.renderTargets;this.frameInc=Math.floor(l(_,"frameInc",32));var L,D,F=P.width,X=P.height,z=this.game.config.disablePreFX;if(this.game.config.disablePostFX||this.postPipelineClasses.setAll([[String(v.BARREL),f.Barrel],[String(v.BLOOM),f.Bloom],[String(v.BLUR),f.Blur],[String(v.BOKEH),f.Bokeh],[String(v.CIRCLE),f.Circle],[String(v.COLOR_MATRIX),f.ColorMatrix],[String(v.DISPLACEMENT),f.Displacement],[String(v.GLOW),f.Glow],[String(v.GRADIENT),f.Gradient],[String(v.PIXELATE),f.Pixelate],[String(v.SHADOW),f.Shadow],[String(v.SHINE),f.Shine],[String(v.VIGNETTE),f.Vignette],[String(v.WIPE),f.Wipe]]),!z){this.classes.set(h.FX_PIPELINE,g);for(var Y=Math.min(F,X),R=Math.ceil(Y/this.frameInc),B=1;B<R;B++){var I=B*this.frameInc;A.push(new d(P,I,I)),A.push(new d(P,I,I)),A.push(new d(P,I,I)),this.maxDimension=I}A.push(new d(P,F,X,1,0,!0,!0)),A.push(new d(P,F,X,1,0,!0,!0)),A.push(new d(P,F,X,1,0,!0,!0))}var G=this,N=this.game;if(this.classes.each(function(U,V){L=G.add(U,new V({game:N})),U===h.UTILITY_PIPELINE&&(G.UTILITY_PIPELINE=L,G.fullFrame1=L.fullFrame1,G.fullFrame2=L.fullFrame2,G.halfFrame1=L.halfFrame1,G.halfFrame2=L.halfFrame2)}),this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(h.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(h.MOBILE_PIPELINE),z||(this.FX_PIPELINE=this.get(h.FX_PIPELINE)),_)for(D in _){var W=_[D];(L=new W(N)).name=D,L.isPostFX?this.postPipelineClasses.set(D,W):this.has(D)||(this.classes.set(D,W),this.add(D,L))}this.default=this.get(O),k&&!u.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(_){var O=this.get(_);return O&&(this.default=O),O},add:function(_,O){if(!O.isPostFX){var k=this.pipelines,P=this.renderer;return k.has(_)?console.warn("Pipeline exists: "+_):(O.name=_,O.manager=this,k.set(_,O)),O.hasBooted||O.boot(),P.width===0||P.height===0||O.isPreFX||O.resize(P.width,P.height),O}console.warn(_+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(_,O){this.postPipelineClasses.has(_)||this.postPipelineClasses.set(_,O)},flush:function(){this.current&&this.current.flush()},has:function(_){var O=this.pipelines;return typeof _=="string"?O.has(_):!!O.contains(_)},get:function(_){var O=this.pipelines;return typeof _=="string"?O.get(_):O.contains(_)?_:void 0},getPostPipeline:function(_,O,k){var P,A=this.postPipelineClasses,L="",D=typeof _;if(D==="string"||D==="number"?(P=A.get(_),L=_):D==="function"?(A.contains(_)&&(P=_),L=_.name):D==="object"&&(P=A.get(_.name),L=_.name),P){var F=new P(this.game,k);return F.name=L,O&&(F.gameObject=O),this.postPipelineInstances.push(F),F}},removePostPipeline:function(_){E(this.postPipelineInstances,_)},remove:function(_,O,k){O===void 0&&(O=!0),k===void 0&&(k=!0),this.pipelines.delete(_),O&&this.classes.delete(_),k&&this.postPipelineClasses.delete(_)},set:function(_,O,k){if(!_.isPostFX)return this.isCurrent(_,k)||(this.flush(),this.current&&this.current.unbind(),this.current=_,_.bind(k)),_.updateProjectionMatrix(),_.onBind(O),_},preBatch:function(_){if(_.hasPostPipeline){this.flush();for(var O=_.postPipelines,k=O.length-1;k>=0;k--){var P=O[k];P.active&&P.preBatch(_)}}},postBatch:function(_){if(_.hasPostPipeline){this.flush();for(var O=_.postPipelines,k=0;k<O.length;k++){var P=O[k];P.active&&P.postBatch(_)}}},preBatchCamera:function(_){if(_.hasPostPipeline){this.flush();for(var O=_.postPipelines,k=O.length-1;k>=0;k--){var P=O[k];P.active&&P.preBatch(_)}}},postBatchCamera:function(_){if(_.hasPostPipeline){this.flush();for(var O=_.postPipelines,k=0;k<O.length;k++){var P=O[k];P.active&&P.postBatch(_)}}},isCurrent:function(_,O){var k=this.renderer,P=this.current;return P&&!O&&(O=P.currentShader),!(P!==_||O.program!==k.currentProgram)},copyFrame:function(_,O,k,P,A){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(_,O,k,P,A),this},copyToGame:function(_){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(_),this},drawFrame:function(_,O,k,P){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(_,O,k,P),this},blendFrames:function(_,O,k,P,A){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(_,O,k,P,A),this},blendFramesAdditive:function(_,O,k,P,A){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(_,O,k,P,A),this},clearFrame:function(_,O){return this.UTILITY_PIPELINE.clearFrame(_,O),this},blitFrame:function(_,O,k,P,A,L){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(_,O,k,P,A,L),this},copyFrameRect:function(_,O,k,P,A,L,D,F){return this.UTILITY_PIPELINE.copyFrameRect(_,O,k,P,A,L,D,F),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(_){return this.UTILITY_PIPELINE.bind(_)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(_,O){O.restoreContext()}),C(this.postPipelineInstances,function(_){_.restoreContext()})},rebind:function(_){_===void 0&&this.previous&&(_=this.previous);var O=this.renderer,k=O.gl;k.disable(k.DEPTH_TEST),k.disable(k.CULL_FACE),O.hasActiveStencilMask()?k.clear(k.DEPTH_BUFFER_BIT):(k.disable(k.STENCIL_TEST),k.clear(k.DEPTH_BUFFER_BIT|k.STENCIL_BUFFER_BIT)),k.viewport(0,0,O.width,O.height),O.currentProgram=null,O.setBlendMode(0,!0);var P=O.vaoExtension;P&&P.bindVertexArrayOES(null);var A=this.pipelines.entries;for(var L in A)A[L].glReset=!0;_&&(this.current=_,_.rebind())},clear:function(){var _=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,_.currentProgram=null,_.setBlendMode(0,!0);var O=_.vaoExtension;O&&O.bindVertexArrayOES(null)},getRenderTarget:function(_){var O=this.renderTargets;if(_>this.maxDimension)return this.targetIndex=O.length-3,O[this.targetIndex];var k=3*(c(_,this.frameInc,0,!0)-1);return this.targetIndex=k,O[k]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});s.exports=M},32302:(s,o,i)=>{var r=i(83419),h=i(92503),a=new r({initialize:function(u,l,d,c,p,f,v,g,y){c===void 0&&(c=1),p===void 0&&(p=0),f===void 0&&(f=!0),v===void 0&&(v=!1),g===void 0&&(g=!0),y===void 0&&(y=!0),this.renderer=u,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=c,this.minFilter=p,this.autoClear=f,this.autoResize=!0,this.hasDepthBuffer=g,this.forceClamp=y,this.resize(l,d),v?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(u){return u&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!u&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(u,l){if((u=Math.round(u*this.scale))<=0&&(u=1),(l=Math.round(l*this.scale))<=0&&(l=1),this.autoResize&&(u!==this.width||l!==this.height)){var d=this.renderer;d.deleteFramebuffer(this.framebuffer),d.deleteTexture(this.texture),this.texture=d.createTextureFromSource(null,u,l,this.minFilter,this.forceClamp),this.framebuffer=d.createFramebuffer(u,l,this.texture,this.hasDepthBuffer),this.width=u,this.height=l}return this},willResize:function(u,l){return(u=Math.round(u*this.scale))<=0&&(u=1),(l=Math.round(l*this.scale))<=0&&(l=1),u!==this.width||l!==this.height},bind:function(u,l,d){u===void 0&&(u=!1);var c=this.renderer;if(u&&c.flush(),l&&d&&this.resize(l,d),c.pushFramebuffer(this.framebuffer,!1,!1),u&&this.adjustViewport(),this.autoClear){var p=this.renderer.gl;p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT)}c.clearStencilMask()},adjustViewport:function(){var u=this.renderer.gl;u.viewport(0,0,this.width,this.height),u.disable(u.SCISSOR_TEST)},clear:function(){var u=this.renderer,l=u.gl;u.pushFramebuffer(this.framebuffer),l.disable(l.SCISSOR_TEST),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),u.popFramebuffer(),u.resetScissor()},unbind:function(u){u===void 0&&(u=!1);var l=this.renderer;return u&&l.flush(),l.popFramebuffer()},destroy:function(){var u=this.renderer;u.off(h.RESIZE,this.resize,this),u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});s.exports=a},70554:s=>{s.exports={getTintFromFloats:function(o,i,r,h){return((255*h&255)<<24|(255*o&255)<<16|(255*i&255)<<8|255*r&255)>>>0},getTintAppendFloatAlpha:function(o,i){return((255*i&255)<<24|o)>>>0},getTintAppendFloatAlphaAndSwap:function(o,i){return((255*i&255)<<24|(255&o)<<16|(o>>8&255)<<8|o>>16&255)>>>0},getFloatsFromUintRGB:function(o){return[(o>>16&255)/255,(o>>8&255)/255,(255&o)/255]},checkShaderMax:function(o,i){var r=Math.min(16,o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS));return i&&i!==-1?Math.min(r,i):r},parseFragmentShaderMaxTextures:function(o,i){if(!o)return"";for(var r="",h=0;h<i;h++)h>0&&(r+=`
	else `),h<i-1&&(r+="if (outTexId < "+h+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+h+"], outTexCoord);",r+=`
	}`;return(o=o.replace(/%count%/gi,i.toString())).replace(/%forloop%/gi,r)},setGlowQuality:function(o,i,r,h){return r===void 0&&(r=i.config.glowFXQuality),h===void 0&&(h=i.config.glowFXDistance),(o=o.replace(/__SIZE__/gi,(1/r/h).toFixed(7))).replace(/__DIST__/gi,h.toFixed(0)+".0")}}},29100:(s,o,i)=>{var r=i(83419),h=i(62644),a=i(50792),u=i(77085),l=i(95540),d=i(37867),c=i(92503),p=i(32302),f=i(70554),v=i(38683),g=new r({Extends:a,initialize:function(y){a.call(this);var m=y.game,x=m.renderer,b=x.gl;this.name=l(y,"name","WebGLPipeline"),this.game=m,this.renderer=x,this.manager,this.gl=b,this.view=m.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=l(y,"topology",b.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=l(y,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=y,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=l(y,"resizeUniform","")},boot:function(){var y,m=this.gl,x=this.config,b=this.renderer;this.isPostFX||(this.projectionMatrix=new d().identity());var w=this.renderTargets,T=l(x,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var S=b.width,C=b.height;if(typeof T=="number")for(y=0;y<T;y++)w.push(new p(b,S,C,1,0,!0));else if(Array.isArray(T))for(y=0;y<T.length;y++){var E=l(T[y],"scale",1),M=l(T[y],"minFilter",0),_=l(T[y],"autoClear",1),O=l(T[y],"autoResize",!1),k=l(T[y],"width",null),P=l(T[y],"height",k);k?w.push(new p(b,k,P,1,M,_,O)):w.push(new p(b,S,C,E,M,_,O))}w.length&&(this.currentRenderTarget=w[0]),this.setShadersFromConfig(x);var A=this.shaders,L=0;for(y=0;y<A.length;y++)A[y].vertexSize>L&&(L=A[y].vertexSize);var D=l(x,"batchSize",b.config.batchSize);this.vertexCapacity=6*D;var F=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=F,this.bytes=new Uint8Array(F),this.vertexViewF32=new Float32Array(F),this.vertexViewU32=new Uint32Array(F);var X=l(x,"vertices",null);for(X?(this.vertexViewF32.set(X),this.vertexBuffer=b.createVertexBuffer(F,m.STATIC_DRAW)):this.vertexBuffer=b.createVertexBuffer(F.byteLength,m.DYNAMIC_DRAW),this.setVertexBuffer(),y=A.length-1;y>=0;y--)A[y].rebind();this.hasBooted=!0,b.on(c.RESIZE,this.resize,this),b.on(c.PRE_RENDER,this.onPreRender,this),b.on(c.RENDER,this.onRender,this),b.on(c.POST_RENDER,this.onPostRender,this),this.emit(u.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(y,m,x){var b=this.renderer;return y===this.currentShader&&b.currentProgram===this.currentShader.program||(this.flush(),this.setVertexBuffer(x)&&!m&&(m=!0),y.bind(m,!1),this.currentShader=y),this},getShaderByName:function(y){for(var m=this.shaders,x=0;x<m.length;x++)if(m[x].name===y)return m[x]},setShadersFromConfig:function(y){var m,x=this.shaders,b=this.renderer;for(m=0;m<x.length;m++)x[m].destroy();var w="vertShader",T="fragShader",S="attributes",C=l(y,w,null),E=f.parseFragmentShaderMaxTextures(l(y,T,null),b.maxTextures),M=l(y,S,null),_=l(y,"shaders",[]),O=_.length;if(O===0)C&&E&&(this.shaders=[new v(this,"default",C,E,h(M))]);else{var k=[];for(m=0;m<O;m++){var P,A,L,D,F=_[m];if(typeof F=="string"?(P="default",A=C,L=f.parseFragmentShaderMaxTextures(F,b.maxTextures),D=M):(P=l(F,"name","default"),A=l(F,w,C),L=f.parseFragmentShaderMaxTextures(l(F,T,E),b.maxTextures),D=l(F,S,M)),P==="default"){var X=L.split(`
`)[0].trim();X.indexOf("#define SHADER_NAME")>-1&&(P=X.substring(20))}A&&L&&k.push(new v(this,P,A,L,h(D)))}this.shaders=k}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(y){return this.currentBatch={start:this.vertexCount,count:0,texture:[y],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=y,this.batch.push(this.currentBatch),0},addTextureToBatch:function(y){var m=this.currentBatch;m&&(m.texture.push(y),m.unit++,m.maxUnit++)},pushBatch:function(y){if(!this.currentBatch||this.forceZero&&y!==this.currentTexture)return this.createBatch(y);if(y===this.currentTexture)return this.currentUnit;var m=this.currentBatch,x=m.texture.indexOf(y);return x===-1?m.texture.length===this.renderer.maxTextures?this.createBatch(y):(m.unit++,m.maxUnit++,m.texture.push(y),this.currentUnit=m.unit,this.currentTexture=y,m.unit):(this.currentUnit=x,this.currentTexture=y,x)},setGameObject:function(y,m){return m===void 0&&(m=y.frame),this.pushBatch(m.source.glTexture)},shouldFlush:function(y){return y===void 0&&(y=0),this.vertexCount+y>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(y,m){y===this.width&&m===this.height||this.flush(),this.width=y,this.height=m;for(var x=this.renderTargets,b=0;b<x.length;b++)x[b].resize(y,m);return this.setProjectionMatrix(y,m),this.resizeUniform&&this.set2f(this.resizeUniform,y,m),this.emit(u.RESIZE,y,m,this),this.onResize(y,m),this},setProjectionMatrix:function(y,m){var x=this.projectionMatrix;if(!x)return this;this.projectionWidth=y,this.projectionHeight=m,x.ortho(0,y,m,0,-1e3,1e3);for(var b=this.shaders,w="uProjectionMatrix",T=0;T<b.length;T++){var S=b[T];S.hasUniform(w)&&(S.resetUniform(w),S.setMatrix4fv(w,!1,x.val,S))}return this},flipProjectionMatrix:function(y){y===void 0&&(y=!0);var m=this.projectionMatrix;if(!m)return this;var x=this.projectionWidth,b=this.projectionHeight;y?m.ortho(0,x,0,b,-1e3,1e3):m.ortho(0,x,b,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,m.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var y=this.renderer.projectionWidth,m=this.renderer.projectionHeight;this.projectionWidth===y&&this.projectionHeight===m||this.setProjectionMatrix(y,m)}},bind:function(y){if(y===void 0&&(y=this.currentShader),this.glReset)return this.rebind(y);var m=!1,x=this.gl;return x.getParameter(x.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(x.bindBuffer(x.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,m=!0),y.bind(m),this.currentShader=y,this.activeTextures.length=0,this.emit(u.BIND,this,y),this.onActive(y),this},rebind:function(y){this.activeBuffer=null,this.setVertexBuffer();for(var m=this.shaders,x=m.length-1;x>=0;x--){var b=m[x].rebind();y&&b!==y||(this.currentShader=b)}return this.activeTextures.length=0,this.emit(u.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var y=this.shaders,m=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,m&&this.setVertexBuffer();for(var x=0;x<y.length;x++){var b=y[x];b.syncUniforms(),m&&b.rebind()}},setVertexBuffer:function(y){if(y===void 0&&(y=this.vertexBuffer),y!==this.activeBuffer){var m=this.gl;return this.gl.bindBuffer(m.ARRAY_BUFFER,y.webGLBuffer),this.activeBuffer=y,!0}return!1},preBatch:function(y){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(y),this},postBatch:function(y){return this.onDraw(this.currentRenderTarget),this.onPostBatch(y),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(y){if(y===void 0&&(y=!1),this.vertexCount>0){this.emit(u.BEFORE_FLUSH,this,y),this.onBeforeFlush(y);var m=this.gl,x=this.vertexCount,b=this.currentShader.vertexSize,w=this.topology;if(this.active){var T,S,C;this.setVertexBuffer(),x===this.vertexCapacity?m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.DYNAMIC_DRAW):m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,x*b));var E=this.batch,M=this.activeTextures;if(this.forceZero)for(M[0]||m.activeTexture(m.TEXTURE0),T=0;T<E.length;T++)C=(S=E[T]).texture[0],M[0]!==C&&(m.bindTexture(m.TEXTURE_2D,C.webGLTexture),M[0]=C),m.drawArrays(w,S.start,S.count);else for(T=0;T<E.length;T++){S=E[T];for(var _=0;_<=S.maxUnit;_++)C=S.texture[_],M[_]!==C&&(m.activeTexture(m.TEXTURE0+_),m.bindTexture(m.TEXTURE_2D,C.webGLTexture),M[_]=C);m.drawArrays(w,S.start,S.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(u.AFTER_FLUSH,this,y),this.onAfterFlush(y)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(y,m,x,b,w,T,S){var C=this.vertexViewF32,E=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++M]=y,C[++M]=m,C[++M]=x,C[++M]=b,C[++M]=w,C[++M]=T,E[++M]=S,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(y,m,x,b,w,T,S,C,E,M,_,O,k,P,A,L,D,F,X,z){z===void 0&&(z=this.currentUnit);var Y=!1;this.shouldFlush(6)&&(this.flush(),Y=!0),this.currentBatch||(z=this.setTexture2D(X));var R=this.vertexViewF32,B=this.vertexViewU32,I=this.vertexCount*this.currentShader.vertexComponentCount-1;return R[++I]=m,R[++I]=x,R[++I]=M,R[++I]=_,R[++I]=z,R[++I]=F,B[++I]=P,R[++I]=b,R[++I]=w,R[++I]=M,R[++I]=k,R[++I]=z,R[++I]=F,B[++I]=L,R[++I]=T,R[++I]=S,R[++I]=O,R[++I]=k,R[++I]=z,R[++I]=F,B[++I]=D,R[++I]=m,R[++I]=x,R[++I]=M,R[++I]=_,R[++I]=z,R[++I]=F,B[++I]=P,R[++I]=T,R[++I]=S,R[++I]=O,R[++I]=k,R[++I]=z,R[++I]=F,B[++I]=D,R[++I]=C,R[++I]=E,R[++I]=O,R[++I]=_,R[++I]=z,R[++I]=F,B[++I]=A,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),Y},batchTri:function(y,m,x,b,w,T,S,C,E,M,_,O,k,P,A,L,D){D===void 0&&(D=this.currentUnit);var F=!1;this.shouldFlush(3)&&(this.flush(),F=!0),this.currentBatch||(D=this.setTexture2D(L));var X=this.vertexViewF32,z=this.vertexViewU32,Y=this.vertexCount*this.currentShader.vertexComponentCount-1;return X[++Y]=m,X[++Y]=x,X[++Y]=C,X[++Y]=E,X[++Y]=D,X[++Y]=A,z[++Y]=O,X[++Y]=b,X[++Y]=w,X[++Y]=C,X[++Y]=_,X[++Y]=D,X[++Y]=A,z[++Y]=k,X[++Y]=T,X[++Y]=S,X[++Y]=M,X[++Y]=_,X[++Y]=D,X[++Y]=A,z[++Y]=P,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(y),F},drawFillRect:function(y,m,x,b,w,T,S,C){S===void 0&&(S=this.renderer.whiteTexture),C===void 0&&(C=!0),y=Math.floor(y),m=Math.floor(m);var E=Math.floor(y+x),M=Math.floor(m+b),_=this.setTexture2D(S),O=f.getTintAppendFloatAlphaAndSwap(w,T),k=0,P=1;C&&(k=1,P=0),this.batchQuad(null,y,m,y,M,E,M,E,m,0,k,1,P,O,O,O,O,0,S,_)},setTexture2D:function(y){return y===void 0&&(y=this.renderer.whiteTexture),this.pushBatch(y)},bindTexture:function(y,m){m===void 0&&(m=0);var x=this.gl;return x.activeTexture(x.TEXTURE0+m),x.bindTexture(x.TEXTURE_2D,y.webGLTexture),this},bindRenderTarget:function(y,m){return this.bindTexture(y.texture,m)},setTime:function(y,m){return this.set1f(y,this.game.loop.getDuration(),m),this},setBoolean:function(y,m,x){return x===void 0&&(x=this.currentShader),x.setBoolean(y,m),this},set1f:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set1f(y,m),this},set2f:function(y,m,x,b){return b===void 0&&(b=this.currentShader),b.set2f(y,m,x),this},set3f:function(y,m,x,b,w){return w===void 0&&(w=this.currentShader),w.set3f(y,m,x,b),this},set4f:function(y,m,x,b,w,T){return T===void 0&&(T=this.currentShader),T.set4f(y,m,x,b,w),this},set1fv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set1fv(y,m),this},set2fv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set2fv(y,m),this},set3fv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set3fv(y,m),this},set4fv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set4fv(y,m),this},set1iv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set1iv(y,m),this},set2iv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set2iv(y,m),this},set3iv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set3iv(y,m),this},set4iv:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set4iv(y,m),this},set1i:function(y,m,x){return x===void 0&&(x=this.currentShader),x.set1i(y,m),this},set2i:function(y,m,x,b){return b===void 0&&(b=this.currentShader),b.set2i(y,m,x),this},set3i:function(y,m,x,b,w){return w===void 0&&(w=this.currentShader),w.set3i(y,m,x,b),this},set4i:function(y,m,x,b,w,T){return T===void 0&&(T=this.currentShader),T.set4i(y,m,x,b,w),this},setMatrix2fv:function(y,m,x,b){return b===void 0&&(b=this.currentShader),b.setMatrix2fv(y,m,x),this},setMatrix3fv:function(y,m,x,b){return b===void 0&&(b=this.currentShader),b.setMatrix3fv(y,m,x),this},setMatrix4fv:function(y,m,x,b){return b===void 0&&(b=this.currentShader),b.setMatrix4fv(y,m,x),this},destroy:function(){var y;this.emit(u.DESTROY,this);var m=this.shaders;for(y=0;y<m.length;y++)m[y].destroy();var x=this.renderTargets;for(y=0;y<x.length;y++)x[y].destroy();var b=this.renderer;return b.deleteBuffer(this.vertexBuffer),b.off(c.RESIZE,this.resize,this),b.off(c.PRE_RENDER,this.onPreRender,this),b.off(c.RENDER,this.onRender,this),b.off(c.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});s.exports=g},74797:(s,o,i)=>{var r=i(95428),h=i(72905),a=i(19715),u=i(83419),l=i(8054),d=i(50792),c=i(92503),p=i(50030),f=i(37867),v=i(29747),g=i(7530),y=i(32302),m=i(97480),x=i(69442),b=i(70554),w=i(88815),T=i(26128),S=i(1482),C=i(82751),E=i(84387),M=i(93567),_=i(57183),O=new u({Extends:d,initialize:function(k){d.call(this);var P=k.config,A={alpha:P.transparent,desynchronized:P.desynchronized,depth:!0,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:A,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=k,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=k.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(k){var P,A=this.game,L=this.canvas,D=k.backgroundColor;if(!(P=A.config.context?A.config.context:L.getContext("webgl",k.contextCreation)||L.getContext("experimental-webgl",k.contextCreation))||P.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=P;var F=this,X=function(){var Y=P.getSupportedExtensions();F.supportedExtensions=Y;var R="ANGLE_instanced_arrays";F.instancedArraysExtension=Y.indexOf(R)>-1?P.getExtension(R):null;var B="OES_vertex_array_object";F.vaoExtension=Y.indexOf(B)>-1?P.getExtension(B):null};X(),this.contextLostHandler=function(Y){F.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),F.emit(c.LOSE_WEBGL,F),Y.preventDefault()},L.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.contextRestoredHandler=function(Y){if(P.isContextLost())console&&console.log("WebGL Context restored, but context is still lost");else{F.currentProgram=null,F.currentFramebuffer=null,F.setBlendMode(l.BlendModes.NORMAL),P.disable(P.BLEND),P.disable(P.DEPTH_TEST),P.enable(P.CULL_FACE),F.compression=F.getCompressedTextures();var R=function(B){B.createResource()};r(F.glTextureWrappers,R),r(F.glBufferWrappers,R),r(F.glFramebufferWrappers,R),r(F.glProgramWrappers,R),r(F.glAttribLocationWrappers,R),r(F.glUniformLocationWrappers,R),F.createTemporaryTextures(),F.pipelines.restoreContext(),F.resize(F.game.scale.baseSize.width,F.game.scale.baseSize.height),X(),F.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),F.emit(c.RESTORE_WEBGL,F),Y.preventDefault()}},L.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),A.context=P;for(var z=0;z<=27;z++)this.blendModes.push({func:[P.ONE,P.ONE_MINUS_SRC_ALPHA],equation:P.FUNC_ADD});return this.blendModes[1].func=[P.ONE,P.DST_ALPHA],this.blendModes[2].func=[P.DST_COLOR,P.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[P.ONE,P.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[P.ZERO,P.ONE_MINUS_SRC_ALPHA],equation:P.FUNC_REVERSE_SUBTRACT},this.glFormats=[P.BYTE,P.SHORT,P.UNSIGNED_BYTE,P.UNSIGNED_SHORT,P.FLOAT],this.glFuncMap={mat2:{func:P.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:P.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:P.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:P.uniform1f,length:1},"1fv":{func:P.uniform1fv,length:1},"1i":{func:P.uniform1i,length:1},"1iv":{func:P.uniform1iv,length:1},"2f":{func:P.uniform2f,length:2},"2fv":{func:P.uniform2fv,length:1},"2i":{func:P.uniform2i,length:2},"2iv":{func:P.uniform2iv,length:1},"3f":{func:P.uniform3f,length:3},"3fv":{func:P.uniform3fv,length:1},"3i":{func:P.uniform3i,length:3},"3iv":{func:P.uniform3iv,length:1},"4f":{func:P.uniform4f,length:4},"4fv":{func:P.uniform4fv,length:1},"4i":{func:P.uniform4i,length:4},"4iv":{func:P.uniform4iv,length:1}},k.maxTextures&&k.maxTextures!==-1||(k.maxTextures=P.getParameter(P.MAX_TEXTURE_IMAGE_UNITS)),k.maxTextureSize||(k.maxTextureSize=P.getParameter(P.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),P.disable(P.DEPTH_TEST),P.disable(P.CULL_FACE),P.enable(P.BLEND),P.clearColor(D.redGL,D.greenGL,D.blueGL,D.alphaGL),["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"].indexOf(k.mipmapFilter)!==-1&&(this.mipmapFilter=P[k.mipmapFilter]),this.maxTextures=b.checkShaderMax(P,k.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new g(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=new f().identity(),A.textures.once(x.READY,this.boot,this),this},boot:function(){var k=this.game,P=this.pipelines,A=k.scale.baseSize,L=A.width,D=A.height;this.width=L,this.height=D,this.isBooted=!0,this.renderTarget=new y(this,L,D,1,0,!0,!0),this.maskTarget=new y(this,L,D,1,0,!0,!0),this.maskSource=new y(this,L,D,1,0,!0,!0);var F=k.config;P.boot(F.pipeline,F.defaultPipeline,F.autoMobilePipeline),this.blankTexture=k.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=k.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=k.textures.getFrame("__WHITE").glTexture;var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,null),X.enable(X.SCISSOR_TEST),k.scale.on(m.RESIZE,this.onResize,this),this.resize(L,D)},createTemporaryTextures:function(){for(var k=this.gl,P=0;P<this.maxTextures;P++){var A=k.createTexture();k.activeTexture(k.TEXTURE0+P),k.bindTexture(k.TEXTURE_2D,A),k.texImage2D(k.TEXTURE_2D,0,k.RGBA,1,1,0,k.RGBA,k.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(P)}},captureFrame:function(k,P){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(k,P,A){},stopCapture:function(){},onCapture:function(k){},onResize:function(k,P){P.width===this.width&&P.height===this.height||this.resize(P.width,P.height)},beginCapture:function(k,P){k===void 0&&(k=this.width),P===void 0&&(P=this.height),this.renderTarget.bind(!0,k,P),this.setProjectionMatrix(k,P)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(k,P){var A=this.gl;return this.width=k,this.height=P,this.setProjectionMatrix(k,P),A.viewport(0,0,k,P),this.drawingBufferHeight=A.drawingBufferHeight,A.scissor(0,A.drawingBufferHeight-P,k,P),this.defaultScissor[2]=k,this.defaultScissor[3]=P,this.emit(c.RESIZE,k,P),this},getCompressedTextures:function(){var k="WEBGL_compressed_texture_",P="WEBKIT_"+k,A=function(D,F){var X=D.getExtension(k+F)||D.getExtension(P+F)||D.getExtension("EXT_texture_compression_"+F);if(X){var z={};for(var Y in X)z[X[Y]]=Y;return z}},L=this.gl;return{ETC:A(L,"etc"),ETC1:A(L,"etc1"),ATC:A(L,"atc"),ASTC:A(L,"astc"),BPTC:A(L,"bptc"),RGTC:A(L,"rgtc"),PVRTC:A(L,"pvrtc"),S3TC:A(L,"s3tc"),S3TCSRGB:A(L,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(k,P){var A=this.compression[k.toUpperCase()];if(P in A)return A[P]},supportsCompressedTexture:function(k,P){var A=this.compression[k.toUpperCase()];return!!A&&(!P||P in A)},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(k,P){return k===this.projectionWidth&&P===this.projectionHeight||(this.projectionWidth=k,this.projectionHeight=P,this.projectionMatrix.ortho(0,k,P,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(k){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(k)},getExtension:function(k){return this.hasExtension(k)?(k in this.extensions||(this.extensions[k]=this.gl.getExtension(k)),this.extensions[k]):null},flush:function(){this.pipelines.flush()},pushScissor:function(k,P,A,L,D){D===void 0&&(D=this.drawingBufferHeight);var F=[k,P,A,L];return this.scissorStack.push(F),this.setScissor(k,P,A,L,D),this.currentScissor=F,F},setScissor:function(k,P,A,L,D){D===void 0&&(D=this.drawingBufferHeight);var F=this.gl,X=this.currentScissor,z=A>0&&L>0;if(X&&z){var Y=X[0],R=X[1],B=X[2],I=X[3];z=Y!==k||R!==P||B!==A||I!==L}z&&(this.flush(),F.scissor(k,D-P-L,A,L))},resetScissor:function(){var k=this.gl;k.enable(k.SCISSOR_TEST);var P=this.currentScissor;if(P){var A=P[0],L=P[1],D=P[2],F=P[3];D>0&&F>0&&k.scissor(A,this.drawingBufferHeight-L-F,D,F)}},popScissor:function(){var k=this.scissorStack;k.pop();var P=k[k.length-1];P&&this.setScissor(P[0],P[1],P[2],P[3]),this.currentScissor=P},hasActiveStencilMask:function(){var k=this.currentMask.mask,P=this.currentCameraMask.mask;return k&&k.isStencil||P&&P.isStencil},resetViewport:function(){var k=this.gl;k.viewport(0,0,this.width,this.height),this.drawingBufferHeight=k.drawingBufferHeight},setBlendMode:function(k,P){P===void 0&&(P=!1);var A=this.gl,L=this.blendModes[k];return!!(P||k!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==k)&&(this.flush(),A.enable(A.BLEND),A.blendEquation(L.equation),L.func.length>2?A.blendFuncSeparate(L.func[0],L.func[1],L.func[2],L.func[3]):A.blendFunc(L.func[0],L.func[1]),this.currentBlendMode=k,!0)},addBlendMode:function(k,P){return this.blendModes.push({func:k,equation:P})-1},updateBlendMode:function(k,P,A){return this.blendModes[k]&&(this.blendModes[k].func=P,A&&(this.blendModes[k].equation=A)),this},removeBlendMode:function(k){return k>17&&this.blendModes[k]&&this.blendModes.splice(k,1),this},pushFramebuffer:function(k,P,A,L,D){return k===this.currentFramebuffer?this:(this.fboStack.push(k),this.setFramebuffer(k,P,A,L,D))},setFramebuffer:function(k,P,A,L,D){if(P===void 0&&(P=!1),A===void 0&&(A=!0),L===void 0&&(L=null),D===void 0&&(D=!1),k===this.currentFramebuffer)return this;var F=this.gl,X=this.width,z=this.height;return k&&k.renderTexture&&A?(X=k.renderTexture.width,z=k.renderTexture.height):this.flush(),k?F.bindFramebuffer(F.FRAMEBUFFER,k.webGLFramebuffer):F.bindFramebuffer(F.FRAMEBUFFER,null),A&&F.viewport(0,0,X,z),L&&F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,L.webGLTexture,0),D&&(F.clearColor(0,0,0,0),F.clear(F.COLOR_BUFFER_BIT)),P&&(k?(this.drawingBufferHeight=z,this.pushScissor(0,0,X,z)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=k,this},popFramebuffer:function(k,P){k===void 0&&(k=!1),P===void 0&&(P=!0);var A=this.fboStack;A.pop();var L=A[A.length-1];return L||(L=null),this.setFramebuffer(L,k,P),L},restoreFramebuffer:function(k,P){k===void 0&&(k=!1),P===void 0&&(P=!0);var A=this.fboStack,L=A[A.length-1];L||(L=null),this.currentFramebuffer=null,this.setFramebuffer(L,k,P)},setProgram:function(k){return k!==this.currentProgram&&(this.flush(),this.gl.useProgram(k.webGLProgram),this.currentProgram=k,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(k,P,A,L,D){D===void 0&&(D=!1);var F=this.gl,X=F.NEAREST,z=F.NEAREST,Y=F.CLAMP_TO_EDGE;P=k?k.width:P,A=k?k.height:A;var R=p(P,A);if(R&&!D&&(Y=F.REPEAT),L===l.ScaleModes.LINEAR&&this.config.antialias){var B=k&&k.compressed,I=!B&&R||B&&k.mipmaps.length>1;X=this.mipmapFilter&&I?this.mipmapFilter:F.LINEAR,z=F.LINEAR}return k||typeof P!="number"||typeof A!="number"?this.createTexture2D(0,X,z,Y,Y,F.RGBA,k):this.createTexture2D(0,X,z,Y,Y,F.RGBA,null,P,A)},createTexture2D:function(k,P,A,L,D,F,X,z,Y,R,B,I){typeof z!="number"&&(z=X?X.width:1),typeof Y!="number"&&(Y=X?X.height:1);var G=new C(this.gl,k,P,A,L,D,F,X,z,Y,R,B,I);return this.glTextureWrappers.push(G),G},createFramebuffer:function(k,P,A,L){this.currentFramebuffer=null;var D=new E(this.gl,k,P,A,L);return this.glFramebufferWrappers.push(D),D},beginBitmapMask:function(k,P){this.gl&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==k&&(this.currentMask.mask=k,this.currentMask.camera=P))},drawBitmapMask:function(k,P,A){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),k.renderWebGL(this,k,P),this.maskSource.unbind(!0),this.maskTarget.unbind();var L=this.gl,D=this.getCurrentStencilMask();D?(L.enable(L.STENCIL_TEST),D.mask.applyStencil(this,D.camera,!0)):this.currentMask.mask=null,this.pipelines.set(A),L.activeTexture(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,this.maskTarget.texture.webGLTexture),L.activeTexture(L.TEXTURE1),L.bindTexture(L.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(k,P){var A=new S(this.gl,k,P);return this.glProgramWrappers.push(A),A},createVertexBuffer:function(k,P){var A=this.gl,L=new T(A,k,A.ARRAY_BUFFER,P);return this.glBufferWrappers.push(L),L},createAttribLocation:function(k,P){var A=new M(this.gl,k,P);return this.glAttribLocationWrappers.push(A),A},createUniformLocation:function(k,P){var A=new _(this.gl,k,P);return this.glUniformLocationWrappers.push(A),A},createIndexBuffer:function(k,P){var A=this.gl,L=new T(A,k,A.ELEMENT_ARRAY_BUFFER,P);return this.glBufferWrappers.push(L),L},deleteTexture:function(k){if(k)return h(this.glTextureWrappers,k),k.destroy(),this},deleteFramebuffer:function(k){return k?(h(this.fboStack,k),h(this.glFramebufferWrappers,k),k.destroy(),this):this},deleteProgram:function(k){return k&&(h(this.glProgramWrappers,k),k.destroy()),this},deleteAttribLocation:function(k){return k&&(h(this.glAttribLocationWrappers,k),k.destroy()),this},deleteUniformLocation:function(k){return k&&(h(this.glUniformLocationWrappers,k),k.destroy()),this},deleteBuffer:function(k){return k?(h(this.glBufferWrappers,k),k.destroy(),this):this},preRenderCamera:function(k){var P=k.x,A=k.y,L=k.width,D=k.height,F=k.backgroundColor;k.emit(a.PRE_RENDER,k),this.pipelines.preBatchCamera(k),this.pushScissor(P,A,L,D),k.mask&&(this.currentCameraMask.mask=k.mask,this.currentCameraMask.camera=k._maskCamera,k.mask.preRenderWebGL(this,k,k._maskCamera)),F.alphaGL>0&&this.pipelines.setMulti().drawFillRect(P,A,L,D,b.getTintFromFloats(F.blueGL,F.greenGL,F.redGL,1),F.alphaGL)},getCurrentStencilMask:function(){var k=null,P=this.maskStack,A=this.currentCameraMask;return P.length>0?k=P[P.length-1]:A.mask&&A.mask.isStencil&&(k=A),k},postRenderCamera:function(k){var P=k.flashEffect,A=k.fadeEffect;if(P.isRunning||A.isRunning||A.isComplete){var L=this.pipelines.setMulti();P.postRenderWebGL(L,b.getTintFromFloats),A.postRenderWebGL(L,b.getTintFromFloats)}k.dirty=!1,this.popScissor(),k.mask&&(this.currentCameraMask.mask=null,k.mask.postRenderWebGL(this,k._maskCamera)),this.pipelines.postBatchCamera(k),k.emit(a.POST_RENDER,k)},preRender:function(){if(!this.contextLost){var k=this.gl;if(k.bindFramebuffer(k.FRAMEBUFFER,null),this.config.clearBeforeRender){var P=this.config.backgroundColor;k.clearColor(P.redGL,P.greenGL,P.blueGL,P.alphaGL),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT|k.STENCIL_BUFFER_BIT)}k.enable(k.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&k.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(c.PRE_RENDER)}},render:function(k,P,A){if(!this.contextLost){var L=P.length;if(this.emit(c.RENDER,k,A),this.preRenderCamera(A),L===0)return this.setBlendMode(l.BlendModes.NORMAL),void this.postRenderCamera(A);this.currentType="";for(var D=this.currentMask,F=0;F<L;F++){this.finalType=F===L-1;var X=P[F],z=X.mask;(D=this.currentMask).mask&&D.mask!==z&&D.mask.postRenderWebGL(this,D.camera),z&&D.mask!==z&&z.preRenderWebGL(this,X,A),X.blendMode!==this.currentBlendMode&&this.setBlendMode(X.blendMode);var Y=X.type;Y!==this.currentType&&(this.newType=!0,this.currentType=Y),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=P[F+1].type===this.currentType,X.renderWebGL(this,X,A),this.newType=!1}(D=this.currentMask).mask&&D.mask.postRenderWebGL(this,D.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(A)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(c.POST_RENDER);var k=this.snapshotState;k.callback&&(w(this.gl,k),k.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var k=this.gl,P=this.getCurrentStencilMask();if(P){var A=P.mask;k.enable(k.STENCIL_TEST),A.invertAlpha?k.stencilFunc(k.NOTEQUAL,A.level,255):k.stencilFunc(k.EQUAL,A.level,255)}},snapshot:function(k,P,A){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,k,P,A)},snapshotArea:function(k,P,A,L,D,F,X){var z=this.snapshotState;return z.callback=D,z.type=F,z.encoder=X,z.getPixel=!1,z.x=k,z.y=P,z.width=A,z.height=L,this},snapshotPixel:function(k,P,A){return this.snapshotArea(k,P,1,1,A),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(k,P,A,L,D,F,X,z,Y,R,B){D===void 0&&(D=!1),F===void 0&&(F=0),X===void 0&&(X=0),z===void 0&&(z=P),Y===void 0&&(Y=A),R==="pixel"&&(D=!0,R="image/png");var I=this.currentFramebuffer;this.snapshotArea(F,X,z,Y,L,R,B);var G=this.snapshotState;return G.getPixel=D,G.isFramebuffer=!0,G.bufferWidth=P,G.bufferHeight=A,G.width=Math.min(G.width,P),G.height=Math.min(G.height,A),this.setFramebuffer(k),w(this.gl,G),this.setFramebuffer(I),G.callback=null,G.isFramebuffer=!1,this},canvasToTexture:function(k,P,A,L){A===void 0&&(A=!1),L===void 0&&(L=!1);var D=this.gl,F=D.NEAREST,X=D.NEAREST,z=k.width,Y=k.height,R=D.CLAMP_TO_EDGE,B=p(z,Y);return!A&&B&&(R=D.REPEAT),this.config.antialias&&(F=B&&this.mipmapFilter?this.mipmapFilter:D.LINEAR,X=D.LINEAR),P?(P.update(k,z,Y,L,R,R,F,X,P.format),P):this.createTexture2D(0,F,X,R,R,D.RGBA,k,z,Y,!0,!1,L)},createCanvasTexture:function(k,P,A){return P===void 0&&(P=!1),A===void 0&&(A=!1),this.canvasToTexture(k,null,P,A)},updateCanvasTexture:function(k,P,A,L){return A===void 0&&(A=!1),L===void 0&&(L=!1),this.canvasToTexture(k,P,L,A)},videoToTexture:function(k,P,A,L){A===void 0&&(A=!1),L===void 0&&(L=!1);var D=this.gl,F=D.NEAREST,X=D.NEAREST,z=k.videoWidth,Y=k.videoHeight,R=D.CLAMP_TO_EDGE,B=p(z,Y);return!A&&B&&(R=D.REPEAT),this.config.antialias&&(F=B&&this.mipmapFilter?this.mipmapFilter:D.LINEAR,X=D.LINEAR),P?(P.update(k,z,Y,L,R,R,F,X,P.format),P):this.createTexture2D(0,F,X,R,R,D.RGBA,k,z,Y,!0,!0,L)},createVideoTexture:function(k,P,A){return P===void 0&&(P=!1),A===void 0&&(A=!1),this.videoToTexture(k,null,P,A)},updateVideoTexture:function(k,P,A,L){return A===void 0&&(A=!1),L===void 0&&(L=!1),this.videoToTexture(k,P,L,A)},createUint8ArrayTexture:function(k,P,A){var L=this.gl,D=L.NEAREST,F=L.NEAREST,X=L.CLAMP_TO_EDGE;return p(P,A)&&(X=L.REPEAT),this.createTexture2D(0,D,F,X,X,L.RGBA,k,P,A)},setTextureFilter:function(k,P){var A=this.gl,L=P===0?A.LINEAR:A.NEAREST;A.activeTexture(A.TEXTURE0);var D=A.getParameter(A.TEXTURE_BINDING_2D);return A.bindTexture(A.TEXTURE_2D,k.webGLTexture),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,L),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,L),k.minFilter=L,k.magFilter=L,D&&A.bindTexture(A.TEXTURE_2D,D),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var k=function(P){P.destroy()};r(this.glAttribLocationWrappers,k),r(this.glBufferWrappers,k),r(this.glFramebufferWrappers,k),r(this.glProgramWrappers,k),r(this.glTextureWrappers,k),r(this.glUniformLocationWrappers,k),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});s.exports=O},38683:(s,o,i)=>{var r=i(83419),h=i(95428),a=i(95540),u=i(14500),l=new r({initialize:function(d,c,p,f,v){this.pipeline=d,this.name=c,this.renderer=d.renderer,this.gl=this.renderer.gl,this.fragSrc=f,this.vertSrc=p,this.program=this.renderer.createProgram(p,f),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(v),this.createUniforms()},createAttributes:function(d){var c=0,p=0,f=[];this.vertexComponentCount=0;for(var v=0;v<d.length;v++){var g=d[v],y=g.name,m=a(g,"size",1),x=a(g,"type",u.FLOAT),b=x.enum,w=x.size,T=!!g.normalized;f.push({name:y,size:m,type:b,normalized:T,offset:p,enabled:!1,location:-1}),w===4?c+=m:c++,p+=m*w}this.vertexSize=p,this.vertexComponentCount=c,this.attributes=f},bind:function(d,c){return d===void 0&&(d=!1),c===void 0&&(c=!1),c&&this.pipeline.flush(),this.renderer.setProgram(this.program),d&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(d){d===void 0&&(d=!1);for(var c=this.gl,p=this.renderer,f=this.vertexSize,v=this.attributes,g=this.program,y=0;y<v.length;y++){var m=v[y],x=m.size,b=m.type,w=m.offset,T=m.enabled,S=m.location,C=!!m.normalized;if(d){S!==-1&&p.deleteAttribLocation(S);var E=this.renderer.createAttribLocation(g,m.name);E.webGLAttribLocation>=0?(c.enableVertexAttribArray(E.webGLAttribLocation),c.vertexAttribPointer(E.webGLAttribLocation,x,b,C,f,w),m.enabled=!0,m.location=E):E.webGLAttribLocation!==-1&&c.disableVertexAttribArray(E.webGLAttribLocation)}else T?c.vertexAttribPointer(S.webGLAttribLocation,x,b,C,f,w):!T&&S!==-1&&S.webGLAttribLocation>-1&&(c.disableVertexAttribArray(S.webGLAttribLocation),m.location=-1)}return this},createUniforms:function(){var d,c,p,f=this.gl,v=this.program,g=this.uniforms,y=f.getProgramParameter(v.webGLProgram,f.ACTIVE_UNIFORMS);for(d=0;d<y;d++){var m=f.getActiveUniform(v.webGLProgram,d);if(m){c=m.name,(p=this.renderer.createUniformLocation(v,c))!==null&&(g[c]={name:c,location:p,setter:null,value1:null,value2:null,value3:null,value4:null});var x=c.indexOf("[");x>0&&(c=c.substr(0,x),g.hasOwnProperty(c)||(p=this.renderer.createUniformLocation(v,c))!==null&&(g[c]={name:c,location:p,setter:null,value1:null,value2:null,value3:null,value4:null}))}}return this},syncUniforms:function(){var d=this.gl;for(var c in this.renderer.setProgram(this.program),this.uniforms){var p=this.uniforms[c];p.setter&&p.setter.call(d,p.location.webGLUniformLocation,p.value1,p.value2,p.value3,p.value4)}},hasUniform:function(d){return this.uniforms.hasOwnProperty(d)},resetUniform:function(d){var c=this.uniforms[d];return c&&(c.value1=null,c.value2=null,c.value3=null,c.value4=null),this},setUniform1:function(d,c,p,f){var v=this.uniforms[c];return v?((f||v.value1!==p)&&(v.setter||(v.setter=d),v.value1=p,this.renderer.setProgram(this.program),d.call(this.gl,v.location.webGLUniformLocation,p),this.pipeline.currentShader=this),this):this},setUniform2:function(d,c,p,f,v){var g=this.uniforms[c];return g?((v||g.value1!==p||g.value2!==f)&&(g.setter||(g.setter=d),g.value1=p,g.value2=f,this.renderer.setProgram(this.program),d.call(this.gl,g.location.webGLUniformLocation,p,f),this.pipeline.currentShader=this),this):this},setUniform3:function(d,c,p,f,v,g){var y=this.uniforms[c];return y?((g||y.value1!==p||y.value2!==f||y.value3!==v)&&(y.setter||(y.setter=d),y.value1=p,y.value2=f,y.value3=v,this.renderer.setProgram(this.program),d.call(this.gl,y.location.webGLUniformLocation,p,f,v),this.pipeline.currentShader=this),this):this},setUniform4:function(d,c,p,f,v,g,y){var m=this.uniforms[c];return m?((y||m.value1!==p||m.value2!==f||m.value3!==v||m.value4!==g)&&(m.setter||(m.setter=d),m.value1=p,m.value2=f,m.value3=v,m.value4=g,this.renderer.setProgram(this.program),d.call(this.gl,m.location.webGLUniformLocation,p,f,v,g),this.pipeline.currentShader=this),this):this},setBoolean:function(d,c){return this.setUniform1(this.gl.uniform1i,d,Number(c))},set1f:function(d,c){return this.setUniform1(this.gl.uniform1f,d,c)},set2f:function(d,c,p){return this.setUniform2(this.gl.uniform2f,d,c,p)},set3f:function(d,c,p,f){return this.setUniform3(this.gl.uniform3f,d,c,p,f)},set4f:function(d,c,p,f,v){return this.setUniform4(this.gl.uniform4f,d,c,p,f,v)},set1fv:function(d,c){return this.setUniform1(this.gl.uniform1fv,d,c,!0)},set2fv:function(d,c){return this.setUniform1(this.gl.uniform2fv,d,c,!0)},set3fv:function(d,c){return this.setUniform1(this.gl.uniform3fv,d,c,!0)},set4fv:function(d,c){return this.setUniform1(this.gl.uniform4fv,d,c,!0)},set1iv:function(d,c){return this.setUniform1(this.gl.uniform1iv,d,c,!0)},set2iv:function(d,c){return this.setUniform1(this.gl.uniform2iv,d,c,!0)},set3iv:function(d,c){return this.setUniform1(this.gl.uniform3iv,d,c,!0)},set4iv:function(d,c){return this.setUniform1(this.gl.uniform4iv,d,c,!0)},set1i:function(d,c){return this.setUniform1(this.gl.uniform1i,d,c)},set2i:function(d,c,p){return this.setUniform2(this.gl.uniform2i,d,c,p)},set3i:function(d,c,p,f){return this.setUniform3(this.gl.uniform3i,d,c,p,f)},set4i:function(d,c,p,f,v){return this.setUniform4(this.gl.uniform4i,d,c,p,f,v)},setMatrix2fv:function(d,c,p){return this.setUniform2(this.gl.uniformMatrix2fv,d,c,p,!0)},setMatrix3fv:function(d,c,p){return this.setUniform2(this.gl.uniformMatrix3fv,d,c,p,!0)},setMatrix4fv:function(d,c,p){return this.setUniform2(this.gl.uniformMatrix4fv,d,c,p,!0)},createProgram:function(d,c){return d===void 0&&(d=this.vertSrc),c===void 0&&(c=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=d,this.fragSrc=c,this.program=this.renderer.createProgram(d,c),this.createUniforms(),this.rebind()},destroy:function(){var d=this.renderer;h(this.uniforms,function(c){d.deleteUniformLocation(c.location)}),this.uniforms=null,h(this.attributes,function(c){d.deleteAttribLocation(c.location)}),this.attributes=null,d.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});s.exports=l},14500:s=>{s.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},4159:(s,o,i)=>{var r=i(14500),h=i(79291),a={PipelineManager:i(7530),Pipelines:i(96615),RenderTarget:i(32302),Utils:i(70554),WebGLPipeline:i(29100),WebGLRenderer:i(74797),WebGLShader:i(38683),Wrappers:i(9503)};a=h(!1,a,r),s.exports=a},31302:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(78908),u=i(85191),l=i(14500),d=i(29100),c=new r({Extends:d,initialize:function(p){p.fragShader=h(p,"fragShader",a),p.vertShader=h(p,"vertShader",u),p.batchSize=h(p,"batchSize",1),p.vertices=h(p,"vertices",[-1,1,-1,-7,7,1]),p.attributes=h(p,"attributes",[{name:"inPosition",size:2,type:l.FLOAT}]),d.call(this,p)},boot:function(){d.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(p,f){d.prototype.resize.call(this,p,f),this.set2f("uResolution",p,f)},beginMask:function(p,f,v){this.renderer.beginBitmapMask(p,v)},endMask:function(p,f,v){var g=this.gl,y=this.renderer,m=p.bitmapMask;m&&g&&(y.drawBitmapMask(m,f,this),v&&this.set2f("uResolution",v.width,v.height),this.set1i("uInvertMaskAlpha",p.invertAlpha),g.drawArrays(this.topology,0,3),v&&this.set2f("uResolution",this.width,this.height),g.bindTexture(g.TEXTURE_2D,null))}});s.exports=c},92651:(s,o,i)=>{var r=i(83419),h=i(58918),a=i(14811),u=i(95540),l=i(43558),d=i(89350),c=i(70554),p=new r({Extends:l,initialize:function(f){f.shaders=[c.setGlowQuality(d.FXGlowFrag,f.game),d.FXShadowFrag,d.FXPixelateFrag,d.FXVignetteFrag,d.FXShineFrag,d.FXBlurLowFrag,d.FXBlurMedFrag,d.FXBlurHighFrag,d.FXGradientFrag,d.FXBloomFrag,d.ColorMatrixFrag,d.FXCircleFrag,d.FXBarrelFrag,d.FXDisplacementFrag,d.FXWipeFrag,d.FXBokehFrag],l.call(this,f);var v=this.game;this.glow=new h.Glow(v),this.shadow=new h.Shadow(v),this.pixelate=new h.Pixelate(v),this.vignette=new h.Vignette(v),this.shine=new h.Shine(v),this.gradient=new h.Gradient(v),this.circle=new h.Circle(v),this.barrel=new h.Barrel(v),this.wipe=new h.Wipe(v),this.bokeh=new h.Bokeh(v);var g=[];g[a.GLOW]=this.onGlow,g[a.SHADOW]=this.onShadow,g[a.PIXELATE]=this.onPixelate,g[a.VIGNETTE]=this.onVignette,g[a.SHINE]=this.onShine,g[a.BLUR]=this.onBlur,g[a.GRADIENT]=this.onGradient,g[a.BLOOM]=this.onBloom,g[a.COLOR_MATRIX]=this.onColorMatrix,g[a.CIRCLE]=this.onCircle,g[a.BARREL]=this.onBarrel,g[a.DISPLACEMENT]=this.onDisplacement,g[a.WIPE]=this.onWipe,g[a.BOKEH]=this.onBokeh,this.fxHandlers=g,this.source,this.target,this.swap},onDraw:function(f,v,g){this.source=f,this.target=v,this.swap=g;var y=f.width,m=f.height,x=this.tempSprite,b=this.fxHandlers;if(x&&x.preFX)for(var w=x.preFX.list,T=0;T<w.length;T++){var S=w[T];S.active&&b[S.type].call(this,S,y,m)}this.drawToGame(this.source)},runDraw:function(){var f=this.source,v=this.target;this.copy(f,v),this.source=v,this.target=f},onGlow:function(f,v,g){var y=this.shaders[a.GLOW];this.setShader(y),this.glow.onPreRender(f,y,v,g),this.runDraw()},onShadow:function(f){var v=this.shaders[a.SHADOW];this.setShader(v),this.shadow.onPreRender(f,v),this.runDraw()},onPixelate:function(f,v,g){var y=this.shaders[a.PIXELATE];this.setShader(y),this.pixelate.onPreRender(f,y,v,g),this.runDraw()},onVignette:function(f){var v=this.shaders[a.VIGNETTE];this.setShader(v),this.vignette.onPreRender(f,v),this.runDraw()},onShine:function(f,v,g){var y=this.shaders[a.SHINE];this.setShader(y),this.shine.onPreRender(f,y,v,g),this.runDraw()},onBlur:function(f,v,g){var y=u(f,"quality"),m=this.shaders[a.BLUR+y];this.setShader(m),this.set1i("uMainSampler",0),this.set2f("resolution",v,g),this.set1f("strength",u(f,"strength")),this.set3fv("color",u(f,"glcolor"));for(var x=u(f,"x"),b=u(f,"y"),w=u(f,"steps"),T=0;T<w;T++)this.set2f("offset",x,0),this.runDraw(),this.set2f("offset",0,b),this.runDraw()},onGradient:function(f){var v=this.shaders[a.GRADIENT];this.setShader(v),this.gradient.onPreRender(f,v),this.runDraw()},onBloom:function(f,v,g){var y=this.shaders[a.BLOOM];this.copySprite(this.source,this.swap),this.setShader(y),this.set1i("uMainSampler",0),this.set1f("strength",u(f,"blurStrength")),this.set3fv("color",u(f,"glcolor"));for(var m=2/v*u(f,"offsetX"),x=2/g*u(f,"offsetY"),b=u(f,"steps"),w=0;w<b;w++)this.set2f("offset",m,0),this.runDraw(),this.set2f("offset",0,x),this.runDraw();this.blendFrames(this.swap,this.source,this.target,u(f,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(f){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",f.getData()),this.set1f("uAlpha",f.alpha),this.runDraw()},onCircle:function(f,v,g){var y=this.shaders[a.CIRCLE];this.setShader(y),this.circle.onPreRender(f,y,v,g),this.runDraw()},onBarrel:function(f){var v=this.shaders[a.BARREL];this.setShader(v),this.barrel.onPreRender(f,v),this.runDraw()},onDisplacement:function(f){this.setShader(this.shaders[a.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",f.x,f.y),this.bindTexture(f.glTexture,1),this.runDraw()},onWipe:function(f){var v=this.shaders[a.WIPE];this.setShader(v),this.wipe.onPreRender(f,v),this.runDraw()},onBokeh:function(f,v,g){var y=this.shaders[a.BOKEH];this.setShader(y),this.bokeh.onPreRender(f,y,v,g),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,l.prototype.destroy.call(this),this}});s.exports=p},96569:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(31063),u=i(57516),l=i(61340),d=i(26099),c=i(29100),p=new r({Extends:u,initialize:function(f){var v=h(f,"fragShader",a);f.fragShader=v.replace("%LIGHT_COUNT%",f.game.renderer.config.maxLights),u.call(this,f),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new d,this._tempMatrix=new l,this._tempMatrix2=new l},boot:function(){c.prototype.boot.call(this)},onRender:function(f,v){var g=f.sys.lights;if(this.lightsActive=!1,g&&g.active){var y,m=g.getLights(v),x=m.length;this.lightsActive=!0;var b=this.renderer.height,w=v.matrix,T=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",v.x,v.y,v.rotation,v.zoom),this.set3f("uAmbientLightColor",g.ambientColor.r,g.ambientColor.g,g.ambientColor.b),this.set1i("uLightCount",x),y=0;y<x;y++){var S=m[y].light,C=S.color,E="uLights["+y+"].";w.transformPoint(S.x,S.y,T),this.set2f(E+"position",T.x-v.scrollX*S.scrollFactorX*v.zoom,b-(T.y-v.scrollY*S.scrollFactorY*v.zoom)),this.set3f(E+"color",C.r,C.g,C.b),this.set1f(E+"intensity",S.intensity),this.set1f(E+"radius",S.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(f){if(f!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var v=this.inverseRotationMatrix;if(f){var g=-f,y=Math.cos(g),m=Math.sin(g);v[1]=m,v[3]=-m,v[0]=v[4]=y}else v[0]=v[4]=1,v[1]=v[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,v),this.currentNormalMapRotation=f}},setTexture2D:function(f,v){var g=this.renderer;f===void 0&&(f=g.whiteTexture);var y=this.getNormalMap(v);this.isNewNormalMap(f,y)&&(this.flush(),this.createBatch(f),this.addTextureToBatch(y),this.currentNormalMap=y);var m=0;return v&&v.parentContainer?m=v.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2).rotationNormalized:v&&(m=v.rotation),this.setNormalMapRotation(m),0},setGameObject:function(f,v){v===void 0&&(v=f.frame);var g=v.glTexture,y=this.getNormalMap(f);if(this.isNewNormalMap(g,y)&&(this.flush(),this.createBatch(g),this.addTextureToBatch(y),this.currentNormalMap=y),f.parentContainer){var m=f.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(m.rotationNormalized)}else this.setNormalMapRotation(f.rotation);return 0},isNewNormalMap:function(f,v){return this.currentTexture!==f||this.currentNormalMap!==v},getNormalMap:function(f){var v;return f?(f.displayTexture?v=f.displayTexture.dataSource[f.displayFrame.sourceIndex]:f.texture?v=f.texture.dataSource[f.frame.sourceIndex]:f.tileset&&(v=Array.isArray(f.tileset)?f.tileset[0].image.dataSource[0]:f.tileset.image.dataSource[0]),v?v.glTexture:this.renderer.normalTexture):this.renderer.normalTexture},batchSprite:function(f,v,g){this.lightsActive&&u.prototype.batchSprite.call(this,f,v,g)},batchTexture:function(f,v,g,y,m,x,b,w,T,S,C,E,M,_,O,k,P,A,L,D,F,X,z,Y,R,B,I,G,N,W,U,V){this.lightsActive&&u.prototype.batchTexture.call(this,f,v,g,y,m,x,b,w,T,S,C,E,M,_,O,k,P,A,L,D,F,X,z,Y,R,B,I,G,N,W,U,V)},batchTextureFrame:function(f,v,g,y,m,x,b){this.lightsActive&&u.prototype.batchTextureFrame.call(this,f,v,g,y,m,x,b)}});s.exports=p},56527:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(57516),u=i(45561),l=i(60722),d=i(14500),c=i(29100),p=new r({Extends:a,initialize:function(f){f.fragShader=h(f,"fragShader",u),f.vertShader=h(f,"vertShader",l),f.attributes=h(f,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),f.forceZero=!0,f.resizeUniform="uResolution",a.call(this,f)},boot:function(){c.prototype.boot.call(this);var f=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",f.width,f.height),this.set1i("uRoundPixels",f.config.roundPixels)}});s.exports=p},57516:(s,o,i)=>{var r=i(83419),h=i(94811),a=i(95540),u=i(98840),l=i(44667),d=i(61340),c=i(70554),p=i(14500),f=i(29100),v=new r({Extends:f,initialize:function(g){var y=g.game.renderer,m=a(g,"fragShader",u);g.fragShader=c.parseFragmentShaderMaxTextures(m,y.maxTextures),g.vertShader=a(g,"vertShader",l),g.attributes=a(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:p.UNSIGNED_BYTE,normalized:!0}]),g.resizeUniform="uResolution",f.call(this,g),this._tempMatrix1=new d,this._tempMatrix2=new d,this._tempMatrix3=new d,this.calcMatrix=new d,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){f.prototype.boot.call(this);var g=this.renderer;this.set1iv("uMainSampler",g.textureIndexes),this.set2f("uResolution",g.width,g.height),this.set1i("uRoundPixels",g.config.roundPixels)},batchSprite:function(g,y,m){this.manager.set(this,g);var x=this._tempMatrix1,b=this._tempMatrix2,w=this._tempMatrix3,T=g.frame,S=T.glTexture,C=T.u0,E=T.v0,M=T.u1,_=T.v1,O=T.x,k=T.y,P=T.cutWidth,A=T.cutHeight,L=T.customPivot,D=g.displayOriginX,F=g.displayOriginY,X=-D+O,z=-F+k;if(g.isCropped){var Y=g._crop;Y.flipX===g.flipX&&Y.flipY===g.flipY||T.updateCropUVs(Y,g.flipX,g.flipY),C=Y.u0,E=Y.v0,M=Y.u1,_=Y.v1,P=Y.width,A=Y.height,X=-D+(O=Y.x),z=-F+(k=Y.y)}var R=1,B=1;g.flipX&&(L||(X+=-T.realWidth+2*D),R=-1),g.flipY&&(L||(z+=-T.realHeight+2*F),B=-1);var I=g.x,G=g.y;b.applyITRS(I,G,g.rotation,g.scaleX*R,g.scaleY*B),x.copyFrom(y.matrix),m?(x.multiplyWithOffset(m,-y.scrollX*g.scrollFactorX,-y.scrollY*g.scrollFactorY),b.e=I,b.f=G):(b.e-=y.scrollX*g.scrollFactorX,b.f-=y.scrollY*g.scrollFactorY),x.multiply(b,w);var N=w.setQuad(X,z,X+P,z+A),W=c.getTintAppendFloatAlpha,U=y.alpha,V=W(g.tintTopLeft,U*g._alphaTL),K=W(g.tintTopRight,U*g._alphaTR),$=W(g.tintBottomLeft,U*g._alphaBL),H=W(g.tintBottomRight,U*g._alphaBR);this.shouldFlush(6)&&this.flush();var j=this.setGameObject(g,T);this.manager.preBatch(g),this.currentShader.set1i("uRoundPixels",y.roundPixels),this.batchQuad(g,N[0],N[1],N[2],N[3],N[4],N[5],N[6],N[7],C,E,M,_,V,K,$,H,g.tintFill,S,j),this.manager.postBatch(g)},batchTexture:function(g,y,m,x,b,w,T,S,C,E,M,_,O,k,P,A,L,D,F,X,z,Y,R,B,I,G,N,W,U,V,K,$,H){H===void 0&&(H=!1),this.manager.set(this,g);var j=this._tempMatrix1,q=this._tempMatrix2,Z=this._tempMatrix3,Q=D/m+N,at=F/x+W,rt=(D+X)/m+N,nt=(F+z)/x+W,lt=T,it=S,ot=-A,st=-L;if(g.isCropped){var gt=g._crop,Pt=gt.width,Ot=gt.height;lt=Pt,it=Ot,T=Pt,S=Ot;var Jt=D=gt.x,Kt=F=gt.y;_&&(Jt=X-gt.x-Pt),O&&(Kt=z-gt.y-Ot),Q=Jt/m+N,at=Kt/x+W,rt=(Jt+Pt)/m+N,nt=(Kt+Ot)/x+W,ot=-A+D,st=-L+F}_&&(lt*=-1,ot+=T),(O^=!K&&y.isRenderTexture?1:0)&&(it*=-1,st+=S),q.applyITRS(b,w,M,C,E),j.copyFrom(U.matrix),V?(j.multiplyWithOffset(V,-U.scrollX*k,-U.scrollY*P),q.e=b,q.f=w):(q.e-=U.scrollX*k,q.f-=U.scrollY*P),j.multiply(q,Z);var Lt=Z.setQuad(ot,st,ot+lt,st+it);$==null&&($=this.setTexture2D(y)),g&&!H&&this.manager.preBatch(g),this.currentShader.set1i("uRoundPixels",U.roundPixels),this.batchQuad(g,Lt[0],Lt[1],Lt[2],Lt[3],Lt[4],Lt[5],Lt[6],Lt[7],Q,at,rt,nt,Y,R,B,I,G,y,$),g&&!H&&this.manager.postBatch(g)},batchTextureFrame:function(g,y,m,x,b,w,T){this.manager.set(this);var S=this._tempMatrix1.copyFrom(w),C=this._tempMatrix2;T?S.multiply(T,C):C=S;var E=C.setQuad(y,m,y+g.width,m+g.height),M=this.setTexture2D(g.source.glTexture);x=c.getTintAppendFloatAlpha(x,b),this.batchQuad(null,E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],g.u0,g.v0,g.u1,g.v1,x,x,x,x,0,g.glTexture,M)},batchFillRect:function(g,y,m,x,b,w){this.renderer.pipelines.set(this);var T=this.calcMatrix;w&&w.multiply(b,T);var S=T.setQuad(g,y,g+m,y+x),C=this.fillTint;this.batchQuad(null,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],0,0,1,1,C.TL,C.TR,C.BL,C.BR,2)},batchFillTriangle:function(g,y,m,x,b,w,T,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(T,C);var E=C.getX(g,y),M=C.getY(g,y),_=C.getX(m,x),O=C.getY(m,x),k=C.getX(b,w),P=C.getY(b,w),A=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,E,M,_,O,k,P,0,0,1,1,A.TL,A.TR,A.BL,2)},batchStrokeTriangle:function(g,y,m,x,b,w,T,S,C){var E=this.tempTriangle;E[0].x=g,E[0].y=y,E[0].width=T,E[1].x=m,E[1].y=x,E[1].width=T,E[2].x=b,E[2].y=w,E[2].width=T,E[3].x=g,E[3].y=y,E[3].width=T,this.batchStrokePath(E,T,!1,S,C)},batchFillPath:function(g,y,m){this.renderer.pipelines.set(this);var x=this.calcMatrix;m&&m.multiply(y,x);for(var b,w,T=g.length,S=this.polygonCache,C=this.fillTint.TL,E=this.fillTint.TR,M=this.fillTint.BL,_=0;_<T;++_)w=g[_],S.push(w.x,w.y);T=(b=h(S)).length,this.currentShader.set1i("uRoundPixels",!1);for(var O=0;O<T;O+=3){var k=2*b[O+0],P=2*b[O+1],A=2*b[O+2],L=S[k+0],D=S[k+1],F=S[P+0],X=S[P+1],z=S[A+0],Y=S[A+1],R=x.getX(L,D),B=x.getY(L,D),I=x.getX(F,X),G=x.getY(F,X),N=x.getX(z,Y),W=x.getY(z,Y);this.batchTri(null,R,B,I,G,N,W,0,0,1,1,C,E,M,2)}S.length=0},batchStrokePath:function(g,y,m,x,b){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var w=g.length-1,T=0;T<w;T++){var S=g[T],C=g[T+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,y,T,!m&&T===w-1,x,b)}},batchLine:function(g,y,m,x,b,w,T,S,C,E,M){this.renderer.pipelines.set(this);var _=this.calcMatrix;M&&M.multiply(E,_);var O=m-g,k=x-y,P=Math.sqrt(O*O+k*k);if(P!==0){var A=b*(x-y)/P,L=b*(g-m)/P,D=w*(x-y)/P,F=w*(g-m)/P,X=m-D,z=x-F,Y=g-A,R=y-L,B=m+D,I=x+F,G=g+A,N=y+L,W=_.getX(X,z),U=_.getY(X,z),V=_.getX(Y,R),K=_.getY(Y,R),$=_.getX(B,I),H=_.getY(B,I),j=_.getX(G,N),q=_.getY(G,N),Z=this.strokeTint,Q=Z.TL,at=Z.TR,rt=Z.BL,nt=Z.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,j,q,V,K,W,U,$,H,0,0,1,1,Q,at,rt,nt,2),!(T<=2)){var lt=this.prevQuad,it=this.firstQuad;S>0&&lt[4]?this.batchQuad(null,j,q,V,K,lt[0],lt[1],lt[2],lt[3],0,0,1,1,Q,at,rt,nt,2):(it[0]=j,it[1]=q,it[2]=V,it[3]=K,it[4]=1),C&&it[4]?this.batchQuad(null,W,U,$,H,it[0],it[1],it[2],it[3],0,0,1,1,Q,at,rt,nt,2):(lt[0]=W,lt[1]=U,lt[2]=$,lt[3]=H,lt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,f.prototype.destroy.call(this),this}});s.exports=v},43439:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(4127),u=i(89924),l=i(29100),d=new r({Extends:l,initialize:function(c){c.vertShader=h(c,"vertShader",u),c.fragShader=h(c,"fragShader",a),c.attributes=h(c,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),l.call(this,c)},onRender:function(c,p){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",p.zoom)},batchPointLight:function(c,p,f,v,g,y,m,x,b,w,T,S){var C=c.color,E=c.intensity,M=c.radius,_=c.attenuation,O=C.r*E,k=C.g*E,P=C.b*E,A=p.alpha*c.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(f,v,T,S,M,_,O,k,P,A),this.batchLightVert(g,y,T,S,M,_,O,k,P,A),this.batchLightVert(m,x,T,S,M,_,O,k,P,A),this.batchLightVert(f,v,T,S,M,_,O,k,P,A),this.batchLightVert(m,x,T,S,M,_,O,k,P,A),this.batchLightVert(b,w,T,S,M,_,O,k,P,A),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(c,p,f,v,g,y,m,x,b,w){var T=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++S]=c,T[++S]=p,T[++S]=f,T[++S]=v,T[++S]=g,T[++S]=y,T[++S]=m,T[++S]=x,T[++S]=b,T[++S]=w,this.vertexCount++}});s.exports=d},84057:(s,o,i)=>{var r=i(83419),h=i(89422),a=i(95540),u=i(27681),l=i(49627),d=i(29100),c=new r({Extends:d,initialize:function(p){p.renderTarget=a(p,"renderTarget",1),p.fragShader=a(p,"fragShader",u),p.vertShader=a(p,"vertShader",l),p.attributes=a(p,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),p.batchSize=1,p.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.call(this,p),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new h,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){d.prototype.boot.call(this);var p=this.manager.UTILITY_PIPELINE;this.fullFrame1=p.fullFrame1,this.fullFrame2=p.fullFrame2,this.halfFrame1=p.halfFrame1,this.halfFrame2=p.halfFrame2;var f=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",f.width,f.height),this.set1i("uRoundPixels",f.config.roundPixels);for(var v=this.renderTargets,g=0;g<v.length;g++)v[g].autoResize=!0},postBatch:function(p){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(p),this},onDraw:function(p){this.bindAndDraw(p)},getController:function(p){return p!==void 0?p:this.controller?this.controller:this},copySprite:function(p,f,v){v===void 0&&(v=!1);var g=this.gl;g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,p.texture.webGLTexture);var y=g.getParameter(g.FRAMEBUFFER_BINDING);g.bindFramebuffer(g.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f.texture.webGLTexture,0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),v&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,y))},copyFrame:function(p,f,v,g,y){this.manager.copyFrame(p,f,v,g,y)},copyToGame:function(p){this.manager.copyToGame(p)},drawFrame:function(p,f,v){this.manager.drawFrame(p,f,v,this.colorMatrix)},blendFrames:function(p,f,v,g,y){this.manager.blendFrames(p,f,v,g,y)},blendFramesAdditive:function(p,f,v,g,y){this.manager.blendFramesAdditive(p,f,v,g,y)},clearFrame:function(p,f){this.manager.clearFrame(p,f)},blitFrame:function(p,f,v,g,y,m){this.manager.blitFrame(p,f,v,g,y,m)},copyFrameRect:function(p,f,v,g,y,m,x,b){this.manager.copyFrameRect(p,f,v,g,y,m,x,b)},bindAndDraw:function(p,f,v,g,y){v===void 0&&(v=!0),g===void 0&&(g=!0);var m=this.gl,x=this.renderer;this.bind(y),this.set1i("uMainSampler",0),f?(m.viewport(0,0,f.width,f.height),m.bindFramebuffer(m.FRAMEBUFFER,f.framebuffer.webGLFramebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f.texture.webGLTexture,0),v&&(g?m.clearColor(0,0,0,0):m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT))):(x.popFramebuffer(!1,!1),x.currentFramebuffer||m.viewport(0,0,x.width,x.height)),x.restoreStencilMask(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,p.texture.webGLTexture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),f&&(m.bindTexture(m.TEXTURE_2D,null),m.bindFramebuffer(m.FRAMEBUFFER,x.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),d.prototype.destroy.call(this),this}});s.exports=c},43558:(s,o,i)=>{var r=i(10312),h=i(67502),a=i(83419),u=i(96293),l=i(95540),d=i(57516),c=i(27681),p=i(87841),f=i(32302),v=i(45561),g=i(60722),y=i(29100),m=new a({Extends:d,initialize:function(x){var b=l(x,"fragShader",c),w=l(x,"vertShader",g),T=l(x,"drawShader",c),S=[{name:"DrawSprite",fragShader:v,vertShader:g},{name:"CopySprite",fragShader:b,vertShader:w},{name:"DrawGame",fragShader:T,vertShader:g},{name:"ColorMatrix",fragShader:u}],C=l(x,"shaders",[]);x.shaders=S.concat(C),x.vertShader||(x.vertShader=w),x.batchSize=1,d.call(this,x),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new p,this.targetBounds=new p,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){y.prototype.boot.call(this);var x=this.shaders,b=this.renderer;this.drawSpriteShader=x[0],this.copyShader=x[1],this.gameShader=x[2],this.colorMatrixShader=x[3],this.fsTarget=new f(b,b.width,b.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var w=new ArrayBuffer(168);this.quadVertexData=w,this.quadVertexViewF32=new Float32Array(w),this.quadVertexBuffer=b.createVertexBuffer(w,this.gl.STATIC_DRAW),this.onResize(b.width,b.height),this.currentShader=this.copyShader,this.set2f("uResolution",b.width,b.height),this.set1i("uRoundPixels",b.config.roundPixels)},onResize:function(x,b){var w=this.quadVertexViewF32;w[1]=b,w[22]=b,w[14]=x,w[28]=x,w[35]=x,w[36]=b},batchQuad:function(x,b,w,T,S,C,E,M,_,O,k,P,A,L,D,F,X,z,Y){var R=Math.min(b,T,C,M),B=Math.min(w,S,E,_),I=Math.max(b,T,C,M)-R,G=Math.max(w,S,E,_)-B,N=this.spriteBounds.setTo(R,B,I,G),W=x?x.preFX.padding:0,U=I+2*W,V=G+2*W,K=Math.abs(Math.max(U,V)),$=this.manager.getRenderTarget(K),H=this.targetBounds.setTo(0,0,$.width,$.height);h(H,N.centerX,N.centerY),this.tempSprite=x;var j=this.gl,q=this.renderer;q.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",q.width,q.height),this.set1i("uRoundPixels",q.config.roundPixels),this.flipProjectionMatrix(!0),x&&(this.onDrawSprite(x,$),x.preFX.onFX(this));var Z=this.fsTarget;return this.flush(),j.viewport(0,0,q.width,q.height),j.bindFramebuffer(j.FRAMEBUFFER,Z.framebuffer.webGLFramebuffer),j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Z.texture.webGLTexture,0),j.clearColor(0,0,0,0),j.clear(j.COLOR_BUFFER_BIT),this.setTexture2D(Y),this.batchVert(b,w,O,k,0,z,L),this.batchVert(T,S,O,A,0,z,F),this.batchVert(C,E,P,A,0,z,X),this.batchVert(b,w,O,k,0,z,L),this.batchVert(C,E,P,A,0,z,X),this.batchVert(M,_,P,k,0,z,D),this.flush(),this.flipProjectionMatrix(!1),j.activeTexture(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,$.texture.webGLTexture),j.copyTexSubImage2D(j.TEXTURE_2D,0,0,0,H.x,H.y,H.width,H.height),j.bindFramebuffer(j.FRAMEBUFFER,null),j.bindTexture(j.TEXTURE_2D,null),this.onBatch(x),this.currentShader=this.copyShader,this.onDraw($,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(x,b,w,T,S,C,E){w===void 0&&(w=!0),T===void 0&&(T=!0),S===void 0&&(S=!1),E===void 0&&(E=this.copyShader);var M=this.gl,_=this.tempSprite;C&&(E=this.colorMatrixShader),this.currentShader=E;var O=this.setVertexBuffer(this.quadVertexBuffer);E.bind(O,!1);var k=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",k.width,k.height),this.set1i("uRoundPixels",k.config.roundPixels),_.preFX.onFXCopy(this),this.onCopySprite(x,b,_),C&&(this.set1fv("uColorMatrix",C.getData()),this.set1f("uAlpha",C.alpha)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,x.texture.webGLTexture),x.height>b.height)M.viewport(0,0,x.width,x.height),this.setTargetUVs(x,b);else{var P=b.height-x.height;M.viewport(0,P,x.width,x.height),this.resetUVs()}if(M.bindFramebuffer(M.FRAMEBUFFER,b.framebuffer.webGLFramebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,b.texture.webGLTexture,0),w&&(M.clearColor(0,0,0,+!T),M.clear(M.COLOR_BUFFER_BIT)),S){var A=this.renderer.currentBlendMode;this.renderer.setBlendMode(r.ERASE)}M.bufferData(M.ARRAY_BUFFER,this.quadVertexData,M.STATIC_DRAW),M.drawArrays(M.TRIANGLES,0,6),S&&this.renderer.setBlendMode(A),M.bindFramebuffer(M.FRAMEBUFFER,null)},copy:function(x,b){var w=this.gl;this.set1i("uMainSampler",0),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,x.texture.webGLTexture),w.viewport(0,0,x.width,x.height),this.setUVs(0,0,0,1,1,1,1,0),w.bindFramebuffer(w.FRAMEBUFFER,b.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,b.texture.webGLTexture,0),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.quadVertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null)},blendFrames:function(x,b,w,T,S){this.manager.blendFrames(x,b,w,T,S)},blendFramesAdditive:function(x,b,w,T,S){this.manager.blendFramesAdditive(x,b,w,T,S)},drawToGame:function(x){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(x)},copyToGame:function(x){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(x)},bindAndDraw:function(x){var b=this.gl,w=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(x.texture);var T=this._tempMatrix1.loadIdentity(),S=this.targetBounds.x,C=this.targetBounds.y,E=S+x.width,M=C+x.height,_=T.getX(S,C),O=T.getX(S,M),k=T.getX(E,M),P=T.getX(E,C),A=T.getY(S,C),L=T.getY(S,M),D=T.getY(E,M),F=T.getY(E,C),X=16777215;this.batchVert(_,A,0,0,0,0,X),this.batchVert(O,L,0,1,0,0,X),this.batchVert(k,D,1,1,0,0,X),this.batchVert(_,A,0,0,0,0,X),this.batchVert(k,D,1,1,0,0,X),this.batchVert(P,F,1,0,0,0,X),w.restoreFramebuffer(!1,!0),w.currentFramebuffer||b.viewport(0,0,w.width,w.height),w.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(x){this.drawToGame(x)},setUVs:function(x,b,w,T,S,C,E,M){var _=this.quadVertexViewF32;_[2]=x,_[3]=b,_[9]=w,_[10]=T,_[16]=S,_[17]=C,_[23]=x,_[24]=b,_[30]=S,_[31]=C,_[37]=E,_[38]=M},setTargetUVs:function(x,b){var w=b.height/x.height;w=w>.5?.5-(w-.5):.5-w+.5,this.setUVs(0,w,0,1+w,1,1+w,1,w)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,d.prototype.destroy.call(this),this}});s.exports=m},81041:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(57516),u=new r({Extends:a,initialize:function(l){l.topology=5,l.batchSize=h(l,"batchSize",256),a.call(this,l)}});s.exports=u},12385:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(57516),u=i(45561),l=i(60722),d=i(29100),c=new r({Extends:a,initialize:function(p){p.fragShader=h(p,"fragShader",u),p.vertShader=h(p,"vertShader",l),p.forceZero=!0,a.call(this,p)},boot:function(){d.prototype.boot.call(this);var p=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",p.width,p.height),this.set1i("uRoundPixels",p.config.roundPixels)}});s.exports=c},7589:(s,o,i)=>{var r=i(35407),h=i(10312),a=i(83419),u=i(89422),l=i(96293),d=i(36682),c=i(95540),p=i(48247),f=i(49627),v=i(29100),g=new a({Extends:v,initialize:function(y){y.renderTarget=c(y,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),y.vertShader=c(y,"vertShader",f),y.shaders=c(y,"shaders",[{name:"Copy",fragShader:d},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:p},{name:"ColorMatrix",fragShader:l}]),y.attributes=c(y,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),y.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],y.batchSize=1,v.call(this,y),this.colorMatrix=new u,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){v.prototype.boot.call(this);var y=this.shaders,m=this.renderTargets;this.copyShader=y[0],this.addShader=y[1],this.linearShader=y[2],this.colorMatrixShader=y[3],this.fullFrame1=m[0],this.fullFrame2=m[1],this.halfFrame1=m[2],this.halfFrame2=m[3]},copyFrame:function(y,m,x,b,w){x===void 0&&(x=1),b===void 0&&(b=!0),w===void 0&&(w=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,y.texture.webGLTexture),m?(T.viewport(0,0,m.width,m.height),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture.webGLTexture,0)):T.viewport(0,0,y.width,y.height),b&&(w?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(y,m,x,b,w,T,S){x===void 0&&(x=1),b===void 0&&(b=!0),w===void 0&&(w=!0),T===void 0&&(T=!1),S===void 0&&(S=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",x),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,y.texture.webGLTexture),y.height>m.height)C.viewport(0,0,y.width,y.height),this.setTargetUVs(y,m);else{var E=m.height-y.height;C.viewport(0,E,y.width,y.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,m.texture.webGLTexture,0),b&&(w?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),T){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}S&&this.flipY(),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),T&&this.renderer.setBlendMode(M),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(y,m,x,b,w,T,S,C){S===void 0&&(S=!0),C===void 0&&(C=!0);var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,y.texture.webGLTexture,0),S&&(C?E.clearColor(0,0,0,0):E.clearColor(0,0,0,1),E.clear(E.COLOR_BUFFER_BIT)),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,m.texture.webGLTexture),E.copyTexSubImage2D(E.TEXTURE_2D,0,0,0,x,b,w,T),E.bindFramebuffer(E.FRAMEBUFFER,null),E.bindTexture(E.TEXTURE_2D,null)},copyToGame:function(y){var m=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,y.texture.webGLTexture),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6)},drawFrame:function(y,m,x,b){x===void 0&&(x=!0),b===void 0&&(b=this.colorMatrix);var w=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",b.getData()),this.set1f("uAlpha",b.alpha),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,y.texture.webGLTexture),m?(w.viewport(0,0,m.width,m.height),w.bindFramebuffer(w.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,m.texture.webGLTexture,0)):w.viewport(0,0,y.width,y.height),x?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},blendFrames:function(y,m,x,b,w,T){b===void 0&&(b=1),w===void 0&&(w=!0),T===void 0&&(T=this.linearShader);var S=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",b),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,y.texture.webGLTexture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,m.texture.webGLTexture),x?(S.bindFramebuffer(S.FRAMEBUFFER,x.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,x.texture.webGLTexture,0),S.viewport(0,0,x.width,x.height)):S.viewport(0,0,y.width,y.height),w?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(y,m,x,b,w){this.blendFrames(y,m,x,b,w,this.addShader)},clearFrame:function(y,m){m===void 0&&(m=!0);var x=this.gl;x.viewport(0,0,y.width,y.height),x.bindFramebuffer(x.FRAMEBUFFER,y.framebuffer.webGLFramebuffer),m?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT);var b=this.renderer.currentFramebuffer;x.bindFramebuffer(x.FRAMEBUFFER,b.webGLFramebuffer)},setUVs:function(y,m,x,b,w,T,S,C){var E=this.vertexViewF32;E[2]=y,E[3]=m,E[6]=x,E[7]=b,E[10]=w,E[11]=T,E[14]=y,E[15]=m,E[18]=w,E[19]=T,E[22]=S,E[23]=C},setTargetUVs:function(y,m){var x=m.height/y.height;x=x>.5?.5-(x-.5):.5-x+.5,this.setUVs(0,x,0,1+x,1,1+x,1,x)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});s.exports=g},36060:s=>{s.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"}},84817:s=>{s.exports="pipelineafterflush"},36712:s=>{s.exports="pipelinebeforeflush"},40285:s=>{s.exports="pipelinebind"},65918:s=>{s.exports="pipelineboot"},92852:s=>{s.exports="pipelinedestroy"},56072:s=>{s.exports="pipelinerebind"},57566:s=>{s.exports="pipelineresize"},77085:(s,o,i)=>{s.exports={AFTER_FLUSH:i(84817),BEFORE_FLUSH:i(36712),BIND:i(40285),BOOT:i(65918),DESTROY:i(92852),REBIND:i(56072),RESIZE:i(57566)}},54812:(s,o,i)=>{var r=i(83419),h=i(99155),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.amount=1},onPreRender:function(l,d){l=this.getController(l),this.set1f("amount",l.amount,d)}});s.exports=u},67329:(s,o,i)=>{var r=i(83419),h=i(24400),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(l){l=this.getController(l),this.set1f("strength",l.blurStrength),this.set3fv("color",l.glcolor)},onDraw:function(l){var d=this.getController(),c=this.fullFrame1,p=this.fullFrame2;this.copyFrame(l,p);for(var f=2/l.width*d.offsetX,v=2/l.height*d.offsetY,g=0;g<d.steps;g++)this.set2f("offset",f,0),this.copySprite(l,c),this.set2f("offset",0,v),this.copySprite(c,l);this.blendFrames(p,l,c,d.strength),this.copyToGame(c)}});s.exports=u},8861:(s,o,i)=>{var r=i(83419),h=i(41514),a=i(51078),u=i(94328),l=i(84057),d=new r({Extends:l,initialize:function(c){l.call(this,{game:c,shaders:[{name:"Gaussian5",fragShader:h},{name:"Gaussian9",fragShader:a},{name:"Gaussian13",fragShader:u}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(c){var p=this.getController(),f=this.gl,v=this.fullFrame1,g=f.getParameter(f.FRAMEBUFFER_BINDING);this.bind(this.shaders[p.quality]),f.activeTexture(f.TEXTURE0),f.viewport(0,0,c.width,c.height),this.set1i("uMainSampler",0),this.set2f("resolution",c.width,c.height),this.set1f("strength",p.strength),this.set3fv("color",p.glcolor);for(var y=0;y<p.steps;y++)this.set2f("offset",p.x,0),this.copySprite(c,v),this.set2f("offset",0,p.y),this.copySprite(v,c);f.bindFramebuffer(f.FRAMEBUFFER,g),f.bindTexture(f.TEXTURE_2D,null),this.copyToGame(c)}});s.exports=d},51051:(s,o,i)=>{var r=i(83419),h=i(90610),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(l,d,c,p){l=this.getController(l),this.set1f("radius",l.radius,d),this.set1f("amount",l.amount,d),this.set1f("contrast",l.contrast,d),this.set1f("strength",l.strength,d),this.set2f("blur",l.blurX,l.blurY,d),this.setBoolean("isTiltShift",l.isTiltShift,d),c&&p&&this.set2f("resolution",c,p,d)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},89428:(s,o,i)=>{var r=i(83419),h=i(91899),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(l,d,c,p){l=this.getController(l),this.set1f("scale",l.scale,d),this.set1f("feather",l.feather,d),this.set1f("thickness",l.thickness,d),this.set3fv("color",l.glcolor,d),this.set4fv("backgroundColor",l.glcolor2,d),c&&p&&this.set2f("resolution",c,p,d)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},88904:(s,o,i)=>{var r=i(83419),h=i(84057),a=new r({Extends:h,initialize:function(u){h.call(this,{game:u})},onDraw:function(u){var l=this.fullFrame1;this.controller?this.manager.drawFrame(u,l,!0,this.controller):this.drawFrame(u,l),this.copyToGame(l)}});s.exports=a},63563:(s,o,i)=>{var r=i(83419),h=i(47838),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(l){var d=this.game.textures.getFrame(l);d&&(this.glTexture=d.glTexture)},onDraw:function(l){var d=this.getController(),c=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",d.x,d.y),this.bindTexture(d.glTexture,1),this.copySprite(l,c),this.copyToGame(c)}});s.exports=u},94045:(s,o,i)=>{var r=i(83419),h=i(95540),a=i(98656),u=i(84057),l=i(70554),d=new r({Extends:u,initialize:function(c,p){var f=h(p,"quality",.1),v=h(p,"distance",10);u.call(this,{game:c,fragShader:l.setGlowQuality(a,c,f,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(c,p,f,v){c=this.getController(c),this.set1f("outerStrength",c.outerStrength,p),this.set1f("innerStrength",c.innerStrength,p),this.set4fv("glowColor",c.glcolor,p),this.setBoolean("knockout",c.knockout,p),f&&v&&this.set2f("resolution",f,v,p)},onDraw:function(c){this.set2f("resolution",c.width,c.height),this.bindAndDraw(c)}});s.exports=d},74088:(s,o,i)=>{var r=i(83419),h=i(70463),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(l,d){l=this.getController(l),this.set1f("alpha",l.alpha,d),this.set1i("size",l.size,d),this.set3fv("color1",l.glcolor1,d),this.set3fv("color2",l.glcolor2,d),this.set2f("positionFrom",l.fromX,l.fromY,d),this.set2f("positionTo",l.toX,l.toY,d)}});s.exports=u},99636:(s,o,i)=>{var r=i(83419),h=i(50831),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.amount=1},onPreRender:function(l,d,c,p){l=this.getController(l),this.set1f("amount",l.amount,d),c&&p&&this.set2f("resolution",c,p,d)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},34700:(s,o,i)=>{var r=i(83419),h=i(92595),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(l,d){var c=(l=this.getController(l)).samples;this.set1i("samples",c,d),this.set1f("intensity",l.intensity,d),this.set1f("decay",l.decay,d),this.set1f("power",l.power/c,d),this.set2f("lightPosition",l.x,l.y,d),this.set4fv("color",l.glcolor,d)}});s.exports=u},91157:(s,o,i)=>{var r=i(83419),h=i(72464),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(l,d,c,p){l=this.getController(l),this.setTime("time",d),this.set1f("speed",l.speed,d),this.set1f("lineWidth",l.lineWidth,d),this.set1f("gradient",l.gradient,d),this.setBoolean("reveal",l.reveal,d),c&&p&&this.set2f("resolution",c,p,d)},onDraw:function(l){this.set2f("resolution",l.width,l.height),this.bindAndDraw(l)}});s.exports=u},27797:(s,o,i)=>{var r=i(83419),h=i(39249),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(l,d){l=this.getController(l),this.set1f("radius",l.radius,d),this.set1f("strength",l.strength,d),this.set2f("position",l.x,l.y,d)}});s.exports=u},67603:(s,o,i)=>{var r=i(83419),h=i(2878),a=i(84057),u=new r({Extends:a,initialize:function(l){a.call(this,{game:l,fragShader:h}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(l,d){var c=(l=this.getController(l)).progress,p=l.wipeWidth,f=l.direction,v=l.axis;this.set4f("config",c,p,f,v,d),this.setBoolean("reveal",l.reveal,d)}});s.exports=u},58918:(s,o,i)=>{var r={Barrel:i(54812),Bloom:i(67329),Blur:i(8861),Bokeh:i(51051),Circle:i(89428),ColorMatrix:i(88904),Displacement:i(63563),Glow:i(94045),Gradient:i(74088),Pixelate:i(99636),Shadow:i(34700),Shine:i(91157),Vignette:i(27797),Wipe:i(67603)};s.exports=r},96615:(s,o,i)=>{var r=i(36060),h=i(79291),a={FX:i(58918),BitmapMaskPipeline:i(31302),Events:i(77085),FXPipeline:i(92651),LightPipeline:i(96569),MobilePipeline:i(56527),MultiPipeline:i(57516),PointLightPipeline:i(43439),PostFXPipeline:i(84057),PreFXPipeline:i(43558),RopePipeline:i(81041),SinglePipeline:i(12385),UtilityPipeline:i(7589)};a=h(!1,a,r),s.exports=a},35407:s=>{s.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:s=>{s.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:s=>{s.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:s=>{s.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:s=>{s.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:s=>{s.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:s=>{s.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:s=>{s.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:s=>{s.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:s=>{s.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:s=>{s.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:s=>{s.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:s=>{s.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:s=>{s.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:s=>{s.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:s=>{s.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:s=>{s.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:s=>{s.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:s=>{s.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:s=>{s.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:s=>{s.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:s=>{s.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:s=>{s.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:s=>{s.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:s=>{s.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:s=>{s.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:s=>{s.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:s=>{s.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:s=>{s.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(s,o,i)=>{s.exports={AddBlendFrag:i(35407),BitmapMaskFrag:i(78908),BitmapMaskVert:i(85191),ColorMatrixFrag:i(96293),CopyFrag:i(36682),FXBarrelFrag:i(99155),FXBloomFrag:i(24400),FXBlurHighFrag:i(94328),FXBlurLowFrag:i(41514),FXBlurMedFrag:i(51078),FXBokehFrag:i(90610),FXCircleFrag:i(91899),FXDisplacementFrag:i(47838),FXGlowFrag:i(98656),FXGradientFrag:i(70463),FXPixelateFrag:i(50831),FXShadowFrag:i(92595),FXShineFrag:i(72464),FXVignetteFrag:i(39249),FXWipeFrag:i(2878),LightFrag:i(31063),LinearBlendFrag:i(48247),MeshFrag:i(41214),MeshVert:i(39653),MobileFrag:i(62143),MobileVert:i(47940),MultiFrag:i(98840),MultiVert:i(44667),PointLightFrag:i(4127),PointLightVert:i(89924),PostFXFrag:i(27681),QuadVert:i(49627),SingleFrag:i(45561),SingleVert:i(60722)}},93567:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u){this.webGLAttribLocation=-1,this.gl=h,this.program=a,this.name=u,this.createResource()},createResource:function(){if(this.program.webGLProgram!==null){var h=this.gl;h.isContextLost()||(this.webGLAttribLocation=h.getAttribLocation(this.program.webGLProgram,this.name))}else this.webGLAttribLocation=-1},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});s.exports=r},26128:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l){this.webGLBuffer=null,this.gl=h,this.initialDataOrSize=a,this.bufferType=u,this.bufferUsage=l,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var h=this.gl;if(!h.isContextLost()){var a=this.bufferType,u=h.createBuffer();this.webGLBuffer=u,h.bindBuffer(a,this.webGLBuffer),h.bufferData(a,this.initialDataOrSize,this.bufferUsage),h.bindBuffer(a,null)}}},destroy:function(){var h=this.gl;h.isContextLost()||h.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});s.exports=r},84387:(s,o,i)=>{var r=i(83419),h={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},a=new r({initialize:function(u,l,d,c,p){this.webGLFramebuffer=null,this.gl=u,this.width=l,this.height=d,this.renderTexture=c,this.addDepthStencilBuffer=!!p,this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost()){var l,d=this.renderTexture,c=u.createFramebuffer();if(this.webGLFramebuffer=c,u.bindFramebuffer(u.FRAMEBUFFER,c),d.isRenderTexture=!0,d.isAlphaPremultiplied=!1,u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,d.webGLTexture,0),(l=u.checkFramebufferStatus(u.FRAMEBUFFER))!==u.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(h[l]||l));if(this.addDepthStencilBuffer){var p=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,p),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,this.width,this.height),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,p)}u.bindFramebuffer(u.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var u=this.gl;if(!u.isContextLost()){u.bindFramebuffer(u.FRAMEBUFFER,this.webGLFramebuffer);var l=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);l!==null&&(u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,null,0),u.deleteTexture(l));var d=u.getFramebufferAttachmentParameter(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);d!==null&&u.deleteRenderbuffer(d),u.bindFramebuffer(u.FRAMEBUFFER,null),u.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});s.exports=a},1482:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u){this.webGLProgram=null,this.gl=h,this.vertexSource=a,this.fragmentSource=u,this.createResource()},createResource:function(){var h=this.gl;if(!h.isContextLost()){var a=h.createProgram(),u=h.createShader(h.VERTEX_SHADER),l=h.createShader(h.FRAGMENT_SHADER);h.shaderSource(u,this.vertexSource),h.shaderSource(l,this.fragmentSource),h.compileShader(u),h.compileShader(l);var d=`Shader failed:
`;if(!h.getShaderParameter(u,h.COMPILE_STATUS))throw new Error("Vertex "+d+h.getShaderInfoLog(u));if(!h.getShaderParameter(l,h.COMPILE_STATUS))throw new Error("Fragment "+d+h.getShaderInfoLog(l));if(h.attachShader(a,u),h.attachShader(a,l),h.linkProgram(a),!h.getProgramParameter(a,h.LINK_STATUS))throw new Error("Link "+d+h.getProgramInfoLog(a));h.useProgram(a),this.webGLProgram=a}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});s.exports=r},82751:(s,o,i)=>{var r=i(83419),h=i(50030),a=new r({initialize:function(u,l,d,c,p,f,v,g,y,m,x,b,w){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=u,this.mipLevel=l,this.minFilter=d,this.magFilter=c,this.wrapT=p,this.wrapS=f,this.format=v,this.pixels=g,this.width=y,this.height=m,this.pma=x==null||x,this.forceSize=!!b,this.flipY=!!w,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var u=this.gl;if(!u.isContextLost())if(this.pixels instanceof a)this.webGLTexture=this.pixels.webGLTexture;else{var l=u.createTexture();l.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=l,this._processTexture()}},update:function(u,l,d,c,p,f,v,g,y){l!==0&&d!==0&&(this.pixels=u,this.width=l,this.height=d,this.flipY=c,this.wrapS=p,this.wrapT=f,this.minFilter=v,this.magFilter=g,this.format=y,this.gl.isContextLost()||this._processTexture())},_processTexture:function(){var u=this.gl;u.activeTexture(u.TEXTURE0);var l=u.getParameter(u.TEXTURE_BINDING_2D);u.bindTexture(u.TEXTURE_2D,this.webGLTexture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.minFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,this.magFilter),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,this.wrapS),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,this.wrapT),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,this.flipY);var d=this.pixels,c=this.mipLevel,p=this.width,f=this.height,v=this.format,g=!1;if(d==null)u.texImage2D(u.TEXTURE_2D,c,v,p,f,0,v,u.UNSIGNED_BYTE,null),g=h(p,f);else if(d.compressed){p=d.width,f=d.height,g=d.generateMipmap;for(var y=0;y<d.mipmaps.length;y++)u.compressedTexImage2D(u.TEXTURE_2D,y,d.internalFormat,d.mipmaps[y].width,d.mipmaps[y].height,0,d.mipmaps[y].data)}else d instanceof Uint8Array?(u.texImage2D(u.TEXTURE_2D,c,v,p,f,0,v,u.UNSIGNED_BYTE,d),g=h(p,f)):(this.forceSize||(p=d.width,f=d.height),u.texImage2D(u.TEXTURE_2D,c,v,v,u.UNSIGNED_BYTE,d),g=h(p,f));g&&u.generateMipmap(u.TEXTURE_2D),l?u.bindTexture(u.TEXTURE_2D,l):u.bindTexture(u.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(u){this.__SPECTOR_Metadata=u,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=u)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof a||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});s.exports=a},57183:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u){this.webGLUniformLocation=null,this.gl=h,this.program=a,this.name=u,this.createResource()},createResource:function(){if(this.program.webGLProgram!==null){var h=this.gl;h.isContextLost()||(this.webGLUniformLocation=h.getUniformLocation(this.program.webGLProgram,this.name))}else this.webGLUniformLocation=null},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});s.exports=r},9503:(s,o,i)=>{var r={WebGLAttribLocationWrapper:i(93567),WebGLBufferWrapper:i(26128),WebGLProgramWrapper:i(1482),WebGLTextureWrapper:i(82751),WebGLFramebufferWrapper:i(84387),WebGLUniformLocationWrapper:i(57183)};s.exports=r},76531:(s,o,i)=>{var r=i(13560),h=i(83419),a=i(50792),u=i(97480),l=i(8443),d=i(57811),c=i(74403),p=i(45818),f=i(29747),v=i(87841),g=i(86555),y=i(56583),m=i(26099),x=i(38058),b=new h({Extends:a,initialize:function(w){a.call(this),this.game=w,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new g,this.gameSize=new g,this.baseSize=new g,this.displaySize=new g,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new m(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:f,windowResize:f,fullScreenChange:f,fullScreenError:f}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(l.BOOT,this.boot,this)},boot:function(){var w=this.game;this.canvas=w.canvas,this.fullscreen=w.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.scaleMode!==r.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),w.events.on(l.PRE_STEP,this.step,this),w.events.once(l.READY,this.refresh,this),w.events.once(l.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(w){this.getParent(w),this.getParentBounds();var T=w.width,S=w.height,C=w.scaleMode,E=w.zoom,M=w.autoRound;if(typeof T=="string")if(T.substr(-1)!=="%")T=parseInt(T,10);else{var _=this.parentSize.width;_===0&&(_=window.innerWidth);var O=parseInt(T,10)/100;T=Math.floor(_*O)}if(typeof S=="string")if(S.substr(-1)!=="%")S=parseInt(S,10);else{var k=this.parentSize.height;k===0&&(k=window.innerHeight);var P=parseInt(S,10)/100;S=Math.floor(k*P)}this.scaleMode=C,this.autoRound=M,this.autoCenter=w.autoCenter,this.resizeInterval=w.resizeInterval,M&&(T=Math.floor(T),S=Math.floor(S)),this.gameSize.setSize(T,S),E===r.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,S),M&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),w.minWidth>0&&this.displaySize.setMin(w.minWidth*E,w.minHeight*E),w.maxWidth>0&&this.displaySize.setMax(w.maxWidth*E,w.maxHeight*E),this.displaySize.setSize(T,S),(w.snapWidth>0||w.snapHeight>0)&&this.displaySize.setSnap(w.snapWidth,w.snapHeight),this.orientation=p(T,S)},getParent:function(w){var T=w.parent;if(T!==null){if(this.parent=c(T),this.parentIsWindow=this.parent===document.body,w.expandParent&&w.scaleMode!==r.SCALE_MODE.NONE){var S=this.parent.getBoundingClientRect();(this.parentIsWindow||S.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",S=this.parent.getBoundingClientRect(),this.parentIsWindow||S.height!==0||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}w.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(w.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var w=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=d(!0));var S=T.width,C=T.height;if(w.width!==S||w.height!==C)return w.setSize(S,C),!0;if(this.canvas){var E=this.canvasBounds,M=this.canvas.getBoundingClientRect();if(M.x!==E.x||M.y!==E.y)return!0}return!1},lockOrientation:function(w){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!T&&T.call(screen,w)},setParentSize:function(w,T){return this.parentSize.setSize(w,T),this.refresh()},setGameSize:function(w,T){var S=this.autoRound;S&&(w=Math.floor(w),T=Math.floor(T));var C=this.width,E=this.height;return this.gameSize.resize(w,T),this.baseSize.resize(w,T),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(w/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,E)},resize:function(w,T){var S=this.zoom,C=this.autoRound;C&&(w=Math.floor(w),T=Math.floor(T));var E=this.width,M=this.height;this.gameSize.resize(w,T),this.baseSize.resize(w,T),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(w*S,T*S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var _=this.canvas.style,O=w*S,k=T*S;return C&&(O=Math.floor(O),k=Math.floor(k)),O===w&&k===T||(_.width=O+"px",_.height=k+"px"),this.refresh(E,M)},setZoom:function(w){return this.zoom=w,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(w,T){return w===void 0&&(w=0),T===void 0&&(T=w),this.displaySize.setSnap(w,T),this.refresh()},refresh:function(w,T){w===void 0&&(w=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var S=this.game.domContainer;if(S){this.baseSize.setCSS(S);var C=this.canvas.style,E=S.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=C.marginLeft,E.marginTop=C.marginTop}return this.emit(u.RESIZE,this.gameSize,this.baseSize,this.displaySize,w,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var w=p(this.width,this.height);w!==this.orientation&&(this.orientation=w,this.emit(u.ORIENTATION_CHANGE,w))}},updateScale:function(){var w,T,S=this.canvas.style,C=this.gameSize.width,E=this.gameSize.height,M=this.zoom,_=this.autoRound;if(this.scaleMode===r.SCALE_MODE.NONE)this.displaySize.setSize(C*M,E*M),w=this.displaySize.width,T=this.displaySize.height,_&&(w=Math.floor(w),T=Math.floor(T)),this._resetZoom&&(S.width=w+"px",S.height=T+"px",this._resetZoom=!1);else if(this.scaleMode===r.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),w=this.displaySize.width,T=this.displaySize.height,_&&(w=Math.floor(w),T=Math.floor(T)),this.canvas.width=w,this.canvas.height=T;else if(this.scaleMode===r.SCALE_MODE.EXPAND){this.displaySize.setSize(this.parentSize.width,this.parentSize.height),w=this.displaySize.width,T=this.displaySize.height,_&&(w=Math.floor(w),T=Math.floor(T)),S.width=w+"px",S.height=T+"px";var O=this.parentSize.width/this.gameSize.width,k=this.parentSize.height/this.gameSize.height;O<k?this.baseSize.setSize(this.gameSize.width,this.parentSize.height/O):this.baseSize.setSize(this.displaySize.width/k,this.gameSize.height),w=this.baseSize.width,T=this.baseSize.height,_&&(w=Math.floor(w),T=Math.floor(T)),this.canvas.width=w,this.canvas.height=T}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),w=this.displaySize.width,T=this.displaySize.height,_&&(w=Math.floor(w),T=Math.floor(T)),S.width=w+"px",S.height=T+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var w=y(this.parentSize.width,this.gameSize.width,0,!0),T=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(w,T),1)},updateCenter:function(){var w=this.autoCenter;if(w!==r.CENTER.NO_CENTER){var T=this.canvas,S=T.style,C=T.getBoundingClientRect(),E=C.width,M=C.height,_=Math.floor((this.parentSize.width-E)/2),O=Math.floor((this.parentSize.height-M)/2);w===r.CENTER.CENTER_HORIZONTALLY?O=0:w===r.CENTER.CENTER_VERTICALLY&&(_=0),S.marginLeft=_+"px",S.marginTop=O+"px"}},updateBounds:function(){var w=this.canvasBounds,T=this.canvas.getBoundingClientRect();w.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),w.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),w.width=T.width,w.height=T.height},transformX:function(w){return(w-this.canvasBounds.left)*this.displayScale.x},transformY:function(w){return(w-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(w){w===void 0&&(w={navigationUI:"hide"});var T=this.fullscreen;if(T.available){if(!T.active){var S=this.getFullscreenTarget();T.keyboard?S[T.request](Element.ALLOW_KEYBOARD_INPUT):S[T.request](w)}}else this.emit(u.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(u.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(w){this.removeFullscreenTarget(),this.emit(u.FULLSCREEN_FAILED,w)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var w=document.createElement("div");w.style.margin="0",w.style.padding="0",w.style.width="100%",w.style.height="100%",this.fullscreenTarget=w,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var w=this.fullscreenTarget;if(w&&w.parentNode){var T=w.parentNode;T.insertBefore(this.canvas,w),T.removeChild(w)}}},stopFullscreen:function(){var w=this.fullscreen;if(!w.available)return this.emit(u.FULLSCREEN_UNSUPPORTED),!1;w.active&&document[w.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(u.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(w){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(w)},startListeners:function(){var w=this,T=this.domlisteners;T.orientationChange=function(){w.updateBounds(),w._checkOrientation=!0,w.dirty=!0,w.refresh()},T.windowResize=function(){w.updateBounds(),w.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available&&(T.fullScreenChange=function(S){return w.onFullScreenChange(S)},T.fullScreenError=function(S){return w.onFullScreenError(S)},["webkit","moz",""].forEach(function(S){document.addEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(w,T){w instanceof x||(T=w,w=void 0),T===void 0&&(T=new v);var S,C,E=this.baseSize,M=this.parentSize,_=this.canvasBounds,O=this.displayScale,k=_.x>=0?0:-_.x*O.x,P=_.y>=0?0:-_.y*O.y;return S=M.width>=_.width?E.width:E.width-(_.width-M.width)*O.x,C=M.height>=_.height?E.height:E.height-(_.height-M.height)*O.y,T.setTo(k,P,S,C),w&&(T.width/=w.zoomX,T.height/=w.zoomY,T.centerX=w.centerX+w.scrollX,T.centerY=w.centerY+w.scrollY),T},step:function(w,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var w=this.domlisteners;window.removeEventListener("orientationchange",w.orientationChange,!1),window.removeEventListener("resize",w.windowResize,!1),["webkit","moz",""].forEach(function(T){document.removeEventListener(T+"fullscreenchange",w.fullScreenChange,!1),document.removeEventListener(T+"fullscreenerror",w.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",w.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",w.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});s.exports=b},64743:s=>{s.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:s=>{s.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},81050:s=>{s.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:s=>{s.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(s,o,i)=>{var r={CENTER:i(64743),ORIENTATION:i(39218),SCALE_MODE:i(81050),ZOOM:i(80805)};s.exports=r},56139:s=>{s.exports="enterfullscreen"},2336:s=>{s.exports="fullscreenfailed"},47412:s=>{s.exports="fullscreenunsupported"},51452:s=>{s.exports="leavefullscreen"},20666:s=>{s.exports="orientationchange"},47945:s=>{s.exports="resize"},97480:(s,o,i)=>{s.exports={ENTER_FULLSCREEN:i(56139),FULLSCREEN_FAILED:i(2336),FULLSCREEN_UNSUPPORTED:i(47412),LEAVE_FULLSCREEN:i(51452),ORIENTATION_CHANGE:i(20666),RESIZE:i(47945)}},93364:(s,o,i)=>{var r=i(79291),h=i(13560),a={Center:i(64743),Events:i(97480),Orientation:i(39218),ScaleManager:i(76531),ScaleModes:i(81050),Zoom:i(80805)};a=r(!1,a,h.CENTER),a=r(!1,a,h.ORIENTATION),a=r(!1,a,h.SCALE_MODE),a=r(!1,a,h.ZOOM),s.exports=a},27397:(s,o,i)=>{var r=i(95540),h=i(35355);s.exports=function(a){var u=a.game.config.defaultPhysicsSystem,l=r(a.settings,"physics",!1);if(u||l){var d=[];if(u&&d.push(h(u+"Physics")),l)for(var c in l)c=h(c.concat("Physics")),d.indexOf(c)===-1&&d.push(c);return d}}},52106:(s,o,i)=>{var r=i(95540);s.exports=function(h){var a=h.plugins.getDefaultScenePlugins(),u=r(h.settings,"plugins",!1);return Array.isArray(u)?u:a||[]}},87033:s=>{s.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},97482:(s,o,i)=>{var r=i(83419),h=i(2368),a=new r({initialize:function(u){this.sys=new h(this,u),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});s.exports=a},60903:(s,o,i)=>{var r=i(83419),h=i(89993),a=i(44594),u=i(8443),l=i(35154),d=i(54899),c=i(29747),p=i(97482),f=i(2368),v=new r({initialize:function(g,y){if(this.game=g,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,y){Array.isArray(y)||(y=[y]);for(var m=0;m<y.length;m++)this._pending.push({key:"default",scene:y[m],autoStart:m===0,data:{}})}g.events.once(u.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var g,y,m,x;for(this.systemScene=this.createSceneFromInstance("__SYSTEM",new p),this.game.events.emit(u.SYSTEM_READY,this.systemScene,this),g=0;g<this._pending.length;g++){var b;m=(y=this._pending[g]).key,(x=y.scene)instanceof p?b=this.createSceneFromInstance(m,x):typeof x=="object"?b=this.createSceneFromObject(m,x):typeof x=="function"&&(b=this.createSceneFromFunction(m,x)),m=b.sys.settings.key,this.keys[m]=b,this.scenes.push(b),this._data[m]&&(b.sys.settings.data=this._data[m].data,this._data[m].autoStart&&(y.autoStart=!0)),(y.autoStart||b.sys.settings.active)&&this._start.push(m)}for(this._pending.length=0,this._data={},this.isBooted=!0,g=0;g<this._start.length;g++)y=this._start[g],this.start(y);this._start.length=0}},processQueue:function(){var g=this._pending.length,y=this._queue.length;if(g!==0||y!==0){var m,x;if(g){for(m=0;m<g;m++)x=this._pending[m],this.add(x.key,x.scene,x.autoStart,x.data);for(m=0;m<this._start.length;m++)x=this._start[m],this.start(x);this._start.length=0,this._pending.length=0}for(m=0;m<this._queue.length;m++)this[(x=this._queue[m]).op](x.keyA,x.keyB);this._queue.length=0}},add:function(g,y,m,x){return m===void 0&&(m=!1),x===void 0&&(x={}),this.isProcessing||!this.isBooted?(this._pending.push({key:g,scene:y,autoStart:m,data:x}),this.isBooted||(this._data[g]={data:x}),null):(g=this.getKey(g,y),y instanceof p?b=this.createSceneFromInstance(g,y):typeof y=="object"?(y.key=g,b=this.createSceneFromObject(g,y)):typeof y=="function"&&(b=this.createSceneFromFunction(g,y)),b.sys.settings.data=x,g=b.sys.settings.key,this.keys[g]=b,this.scenes.push(b),(m||b.sys.settings.active)&&(this._pending.length?this._start.push(g):this.start(g)),b);var b},remove:function(g){if(this.isProcessing)this._queue.push({op:"remove",keyA:g,keyB:null});else{var y=this.getScene(g);if(!y||y.sys.isTransitioning())return this;var m=this.scenes.indexOf(y),x=y.sys.settings.key;m>-1&&(delete this.keys[x],this.scenes.splice(m,1),this._start.indexOf(x)>-1&&(m=this._start.indexOf(x),this._start.splice(m,1)),y.sys.destroy())}return this},bootScene:function(g){var y,m=g.sys,x=m.settings;m.sceneUpdate=c,g.init&&(g.init.call(g,x.data),x.status=h.INIT,x.isTransition&&m.events.emit(a.TRANSITION_INIT,x.transitionFrom,x.transitionDuration)),m.load&&(y=m.load).reset(),y&&g.preload?(g.preload.call(g),x.status=h.LOADING,y.once(d.COMPLETE,this.loadComplete,this),y.start()):this.create(g)},loadComplete:function(g){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(g.scene)},payloadComplete:function(g){this.bootScene(g.scene)},update:function(g,y){this.processQueue(),this.isProcessing=!0;for(var m=this.scenes.length-1;m>=0;m--){var x=this.scenes[m].sys;x.settings.status>h.START&&x.settings.status<=h.RUNNING&&x.step(g,y),x.scenePlugin&&x.scenePlugin._target&&x.scenePlugin.step(g,y)}},render:function(g){for(var y=0;y<this.scenes.length;y++){var m=this.scenes[y].sys;m.settings.visible&&m.settings.status>=h.LOADING&&m.settings.status<h.SLEEPING&&m.render(g)}this.isProcessing=!1},create:function(g){var y=g.sys,m=y.settings;g.create&&(m.status=h.CREATING,g.create.call(g,m.data),m.status===h.DESTROYED)||(m.isTransition&&y.events.emit(a.TRANSITION_START,m.transitionFrom,m.transitionDuration),g.update&&(y.sceneUpdate=g.update),m.status=h.RUNNING,y.events.emit(a.CREATE,g))},createSceneFromFunction:function(g,y){var m=new y;if(m instanceof p){var x=m.sys.settings.key;if(x!==""&&(g=x),this.keys.hasOwnProperty(g))throw new Error("Cannot add a Scene with duplicate key: "+g);return this.createSceneFromInstance(g,m)}return m.sys=new f(m),m.sys.settings.key=g,m.sys.init(this.game),m},createSceneFromInstance:function(g,y){return y.sys.settings.key===""&&(y.sys.settings.key=g),y.sys.init(this.game),y},createSceneFromObject:function(g,y){var m=new p(y),x=m.sys.settings.key;x!==""?g=x:m.sys.settings.key=g,m.sys.init(this.game);for(var b=["init","preload","create","update","render"],w=0;w<b.length;w++){var T=l(y,b[w],null);T&&(m[b[w]]=T)}if(y.hasOwnProperty("extend")){for(var S in y.extend)if(y.extend.hasOwnProperty(S)){var C=y.extend[S];S==="data"&&m.hasOwnProperty("data")&&typeof C=="object"?m.data.merge(C):S!=="sys"&&(m[S]=C)}}return m},getKey:function(g,y){if(g||(g="default"),typeof y=="function")return g;if(y instanceof p?g=y.sys.settings.key:typeof y=="object"&&y.hasOwnProperty("key")&&(g=y.key),this.keys.hasOwnProperty(g))throw new Error("Cannot add a Scene with duplicate key: "+g);return g},getScenes:function(g,y){g===void 0&&(g=!0),y===void 0&&(y=!1);for(var m=[],x=this.scenes,b=0;b<x.length;b++){var w=x[b];w&&(!g||g&&w.sys.isActive())&&m.push(w)}return y?m.reverse():m},getScene:function(g){if(typeof g=="string"){if(this.keys[g])return this.keys[g]}else for(var y=0;y<this.scenes.length;y++)if(g===this.scenes[y])return g;return null},isActive:function(g){var y=this.getScene(g);return y?y.sys.isActive():null},isPaused:function(g){var y=this.getScene(g);return y?y.sys.isPaused():null},isVisible:function(g){var y=this.getScene(g);return y?y.sys.isVisible():null},isSleeping:function(g){var y=this.getScene(g);return y?y.sys.isSleeping():null},pause:function(g,y){var m=this.getScene(g);return m&&m.sys.pause(y),this},resume:function(g,y){var m=this.getScene(g);return m&&m.sys.resume(y),this},sleep:function(g,y){var m=this.getScene(g);return m&&!m.sys.isTransitioning()&&m.sys.sleep(y),this},wake:function(g,y){var m=this.getScene(g);return m&&m.sys.wake(y),this},run:function(g,y){var m=this.getScene(g);if(!m){for(var x=0;x<this._pending.length;x++)if(this._pending[x].key===g){this.queueOp("start",g,y);break}return this}m.sys.isSleeping()?m.sys.wake(y):m.sys.isPaused()?m.sys.resume(y):this.start(g,y)},start:function(g,y){if(!this.isBooted)return this._data[g]={autoStart:!0,data:y},this;var m=this.getScene(g);if(!m)return console.warn("Scene not found for key: "+g),this;var x,b=m.sys,w=b.settings.status;if(w>=h.START&&w<=h.CREATING)return this;if(w>=h.RUNNING&&w<=h.SLEEPING)b.shutdown(),b.sceneUpdate=c,b.start(y);else if(b.sceneUpdate=c,b.start(y),b.load&&(x=b.load),x&&b.settings.hasOwnProperty("pack")&&(x.reset(),x.addPack({payload:b.settings.pack})))return b.settings.status=h.LOADING,x.once(d.COMPLETE,this.payloadComplete,this),x.start(),this;return this.bootScene(m),this},stop:function(g,y){var m=this.getScene(g);if(m&&!m.sys.isTransitioning()&&m.sys.settings.status!==h.SHUTDOWN){var x=m.sys.load;x&&(x.off(d.COMPLETE,this.loadComplete,this),x.off(d.COMPLETE,this.payloadComplete,this)),m.sys.shutdown(y)}return this},switch:function(g,y){var m=this.getScene(g),x=this.getScene(y);return m&&x&&m!==x&&(this.sleep(g),this.isSleeping(y)?this.wake(y):this.start(y)),this},getAt:function(g){return this.scenes[g]},getIndex:function(g){var y=this.getScene(g);return this.scenes.indexOf(y)},bringToTop:function(g){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:g,keyB:null});else{var y=this.getIndex(g);if(y!==-1&&y<this.scenes.length){var m=this.getScene(g);this.scenes.splice(y,1),this.scenes.push(m)}}return this},sendToBack:function(g){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:g,keyB:null});else{var y=this.getIndex(g);if(y!==-1&&y>0){var m=this.getScene(g);this.scenes.splice(y,1),this.scenes.unshift(m)}}return this},moveDown:function(g){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:g,keyB:null});else{var y=this.getIndex(g);if(y>0){var m=y-1,x=this.getScene(g),b=this.getAt(m);this.scenes[y]=b,this.scenes[m]=x}}return this},moveUp:function(g){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:g,keyB:null});else{var y=this.getIndex(g);if(y<this.scenes.length-1){var m=y+1,x=this.getScene(g),b=this.getAt(m);this.scenes[y]=b,this.scenes[m]=x}}return this},moveAbove:function(g,y){if(g===y)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:g,keyB:y});else{var m=this.getIndex(g),x=this.getIndex(y);if(m!==-1&&x!==-1&&x<m){var b=this.getAt(x);this.scenes.splice(x,1),this.scenes.splice(m+(x>m),0,b)}}return this},moveBelow:function(g,y){if(g===y)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:g,keyB:y});else{var m=this.getIndex(g),x=this.getIndex(y);if(m!==-1&&x!==-1&&x>m){var b=this.getAt(x);this.scenes.splice(x,1),m===0?this.scenes.unshift(b):this.scenes.splice(m-(x<m),0,b)}}return this},queueOp:function(g,y,m){return this._queue.push({op:g,keyA:y,keyB:m}),this},swapPosition:function(g,y){if(g===y)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:g,keyB:y});else{var m=this.getIndex(g),x=this.getIndex(y);if(m!==x&&m!==-1&&x!==-1){var b=this.getAt(m);this.scenes[m]=this.scenes[x],this.scenes[x]=b}}return this},dump:function(){for(var g=[],y=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],m=0;m<this.scenes.length;m++){var x=this.scenes[m].sys,b=!x.settings.visible||x.settings.status!==h.RUNNING&&x.settings.status!==h.PAUSED?"[-] ":"[*] ";b+=x.settings.key+" ("+y[x.settings.status]+")",g.push(b)}console.log(g.join(`
`))},destroy:function(){for(var g=0;g<this.scenes.length;g++)this.scenes[g].sys.destroy();this.systemScene.sys.destroy(),this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});s.exports=v},52209:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(44594),u=i(95540),l=i(37277),d=new h({initialize:function(c){this.scene=c,this.systems=c.sys,this.settings=c.sys.settings,this.key=c.sys.settings.key,this.manager=c.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,c.sys.events.once(a.BOOT,this.boot,this),c.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",c,p),this},restart:function(c){var p=this.key;return this.manager.queueOp("stop",p),this.manager.queueOp("start",p,c),this},transition:function(c){c===void 0&&(c={});var p=u(c,"target",!1),f=this.manager.getScene(p);if(!p||!this.checkValidTransition(f))return!1;var v=u(c,"duration",1e3);this._elapsed=0,this._target=f,this._duration=v,this._willSleep=u(c,"sleep",!1),this._willRemove=u(c,"remove",!1);var g=u(c,"onUpdate",null);g&&(this._onUpdate=g,this._onUpdateScope=u(c,"onUpdateScope",this.scene));var y=u(c,"allowInput",!1);this.settings.transitionAllowInput=y;var m=f.sys.settings;m.isTransition=!0,m.transitionFrom=this.scene,m.transitionDuration=v,m.transitionAllowInput=y,u(c,"moveAbove",!1)?this.manager.moveAbove(this.key,p):u(c,"moveBelow",!1)&&this.manager.moveBelow(this.key,p),f.sys.isSleeping()?f.sys.wake(u(c,"data")):this.manager.start(p,u(c,"data"));var x=u(c,"onStart",null),b=u(c,"onStartScope",this.scene);return x&&x.call(b,this.scene,f,v),this.systems.events.emit(a.TRANSITION_OUT,f,v),!0},checkValidTransition:function(c){return!(!c||c.sys.isActive()||c.sys.isTransitioning()||c===this.scene||this.systems.isTransitioning())},step:function(c,p){this._elapsed+=p,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var c=this._target.sys,p=this._target.sys.settings;c.events.emit(a.TRANSITION_COMPLETE,this.scene),p.isTransition=!1,p.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(c,p,f,v){return this.manager.add(c,p,f,v)},launch:function(c,p){return c&&c!==this.key&&this.manager.queueOp("start",c,p),this},run:function(c,p){return c&&c!==this.key&&this.manager.queueOp("run",c,p),this},pause:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("pause",c,p),this},resume:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("resume",c,p),this},sleep:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("sleep",c,p),this},wake:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("wake",c,p),this},switch:function(c){return c!==this.key&&this.manager.queueOp("switch",this.key,c),this},stop:function(c,p){return c===void 0&&(c=this.key),this.manager.queueOp("stop",c,p),this},setActive:function(c,p,f){p===void 0&&(p=this.key);var v=this.manager.getScene(p);return v&&v.sys.setActive(c,f),this},setVisible:function(c,p){p===void 0&&(p=this.key);var f=this.manager.getScene(p);return f&&f.sys.setVisible(c),this},isSleeping:function(c){return c===void 0&&(c=this.key),this.manager.isSleeping(c)},isActive:function(c){return c===void 0&&(c=this.key),this.manager.isActive(c)},isPaused:function(c){return c===void 0&&(c=this.key),this.manager.isPaused(c)},isVisible:function(c){return c===void 0&&(c=this.key),this.manager.isVisible(c)},swapPosition:function(c,p){return p===void 0&&(p=this.key),c!==p&&this.manager.swapPosition(c,p),this},moveAbove:function(c,p){return p===void 0&&(p=this.key),c!==p&&this.manager.moveAbove(c,p),this},moveBelow:function(c,p){return p===void 0&&(p=this.key),c!==p&&this.manager.moveBelow(c,p),this},remove:function(c){return c===void 0&&(c=this.key),this.manager.remove(c),this},moveUp:function(c){return c===void 0&&(c=this.key),this.manager.moveUp(c),this},moveDown:function(c){return c===void 0&&(c=this.key),this.manager.moveDown(c),this},bringToTop:function(c){return c===void 0&&(c=this.key),this.manager.bringToTop(c),this},sendToBack:function(c){return c===void 0&&(c=this.key),this.manager.sendToBack(c),this},get:function(c){return this.manager.getScene(c)},getStatus:function(c){var p=this.manager.getScene(c);if(p)return p.sys.getStatus()},getIndex:function(c){return c===void 0&&(c=this.key),this.manager.getIndex(c)},shutdown:function(){var c=this.systems.events;c.off(a.SHUTDOWN,this.shutdown,this),c.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});l.register("ScenePlugin",d,"scenePlugin"),s.exports=d},55681:(s,o,i)=>{var r=i(89993),h=i(35154),a=i(46975),u=i(87033),l={create:function(d){return typeof d=="string"?d={key:d}:d===void 0&&(d={}),{status:r.PENDING,key:h(d,"key",""),active:h(d,"active",!1),visible:h(d,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:h(d,"pack",!1),cameras:h(d,"cameras",null),map:h(d,"map",a(u,h(d,"mapAdd",{}))),physics:h(d,"physics",{}),loader:h(d,"loader",{}),plugins:h(d,"plugins",!1),input:h(d,"input",{})}}};s.exports=l},2368:(s,o,i)=>{var r=i(83419),h=i(89993),a=i(42363),u=i(44594),l=i(27397),d=i(52106),c=i(29747),p=i(55681),f=new r({initialize:function(v,g){this.scene=v,this.game,this.renderer,this.config=g,this.settings=p.create(g),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=c},init:function(v){this.settings.status=h.INIT,this.sceneUpdate=c,this.game=v,this.renderer=v.renderer,this.canvas=v.canvas,this.context=v.context;var g=v.plugins;this.plugins=g,g.addToScene(this,a.Global,[a.CoreScene,d(this),l(this)]),this.events.emit(u.BOOT,this),this.settings.isBooted=!0},step:function(v,g){var y=this.events;y.emit(u.PRE_UPDATE,v,g),y.emit(u.UPDATE,v,g),this.sceneUpdate.call(this.scene,v,g),y.emit(u.POST_UPDATE,v,g)},render:function(v){var g=this.displayList;g.depthSort(),this.events.emit(u.PRE_RENDER,v),this.cameras.render(v,g),this.events.emit(u.RENDER,v)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(v){var g=this.settings,y=this.getStatus();return y!==h.CREATING&&y!==h.RUNNING?console.warn("Cannot pause non-running Scene",g.key):this.settings.active&&(g.status=h.PAUSED,g.active=!1,this.events.emit(u.PAUSE,this,v)),this},resume:function(v){var g=this.events,y=this.settings;return this.settings.active||(y.status=h.RUNNING,y.active=!0,g.emit(u.RESUME,this,v)),this},sleep:function(v){var g=this.settings,y=this.getStatus();return y!==h.CREATING&&y!==h.RUNNING?console.warn("Cannot sleep non-running Scene",g.key):(g.status=h.SLEEPING,g.active=!1,g.visible=!1,this.events.emit(u.SLEEP,this,v)),this},wake:function(v){var g=this.events,y=this.settings;return y.status=h.RUNNING,y.active=!0,y.visible=!0,g.emit(u.WAKE,this,v),y.isTransition&&g.emit(u.TRANSITION_WAKE,y.transitionFrom,y.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var v=this.settings.status;return v>h.PENDING&&v<=h.RUNNING},isSleeping:function(){return this.settings.status===h.SLEEPING},isActive:function(){return this.settings.status===h.RUNNING},isPaused:function(){return this.settings.status===h.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(v){return this.settings.visible=v,this},setActive:function(v,g){return v?this.resume(g):this.pause(g)},start:function(v){var g=this.events,y=this.settings;v&&(y.data=v),y.status=h.START,y.active=!0,y.visible=!0,g.emit(u.START,this),g.emit(u.READY,this,v)},shutdown:function(v){var g=this.events,y=this.settings;g.off(u.TRANSITION_INIT),g.off(u.TRANSITION_START),g.off(u.TRANSITION_COMPLETE),g.off(u.TRANSITION_OUT),y.status=h.SHUTDOWN,y.active=!1,y.visible=!1,g.emit(u.SHUTDOWN,this,v)},destroy:function(){var v=this.events,g=this.settings;g.status=h.DESTROYED,g.active=!1,g.visible=!1,v.emit(u.DESTROY,this),v.removeAllListeners();for(var y=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],m=0;m<y.length;m++)this[y[m]]=null}});s.exports=f},89993:s=>{s.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},69830:s=>{s.exports="addedtoscene"},7919:s=>{s.exports="boot"},46763:s=>{s.exports="create"},11763:s=>{s.exports="destroy"},71555:s=>{s.exports="pause"},36735:s=>{s.exports="postupdate"},3809:s=>{s.exports="prerender"},90716:s=>{s.exports="preupdate"},58262:s=>{s.exports="ready"},91633:s=>{s.exports="removedfromscene"},10319:s=>{s.exports="render"},87132:s=>{s.exports="resume"},81961:s=>{s.exports="shutdown"},90194:s=>{s.exports="sleep"},6265:s=>{s.exports="start"},33178:s=>{s.exports="transitioncomplete"},43063:s=>{s.exports="transitioninit"},11259:s=>{s.exports="transitionout"},61611:s=>{s.exports="transitionstart"},45209:s=>{s.exports="transitionwake"},22966:s=>{s.exports="update"},21747:s=>{s.exports="wake"},44594:(s,o,i)=>{s.exports={ADDED_TO_SCENE:i(69830),BOOT:i(7919),CREATE:i(46763),DESTROY:i(11763),PAUSE:i(71555),POST_UPDATE:i(36735),PRE_RENDER:i(3809),PRE_UPDATE:i(90716),READY:i(58262),REMOVED_FROM_SCENE:i(91633),RENDER:i(10319),RESUME:i(87132),SHUTDOWN:i(81961),SLEEP:i(90194),START:i(6265),TRANSITION_COMPLETE:i(33178),TRANSITION_INIT:i(43063),TRANSITION_OUT:i(11259),TRANSITION_START:i(61611),TRANSITION_WAKE:i(45209),UPDATE:i(22966),WAKE:i(21747)}},62194:(s,o,i)=>{var r=i(89993),h=i(79291),a={Events:i(44594),GetPhysicsPlugins:i(27397),GetScenePlugins:i(52106),SceneManager:i(60903),ScenePlugin:i(52209),Settings:i(55681),Systems:i(2368)};a=h(!1,a,r),s.exports=a},30341:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(14463),u=i(79291),l=i(29747),d=new r({Extends:h,initialize:function(c,p,f){h.call(this),this.manager=c,this.key=p,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=u(this.config,f),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(c){return!(!c||!c.name||typeof c.name!="string"||(this.markers[c.name]?(console.error("addMarker "+c.name+" already exists in Sound"),1):(c=u(!0,{name:"",start:0,duration:this.totalDuration-(c.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},c),this.markers[c.name]=c,0)))},updateMarker:function(c){return!(!c||!c.name||typeof c.name!="string"||(this.markers[c.name]?(this.markers[c.name]=u(!0,this.markers[c.name],c),0):(console.warn("Audio Marker: "+c.name+" missing in Sound: "+this.key),1)))},removeMarker:function(c){var p=this.markers[c];return p?(this.markers[c]=null,p):null},play:function(c,p){if(c===void 0&&(c=""),typeof c=="object"&&(p=c,c=""),typeof c!="string")return!1;if(c){if(!this.markers[c])return console.warn("Marker: "+c+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[c],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=u(this.currentConfig,p),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:l,calculateRate:function(){var c=this.currentConfig.detune+this.manager.detune,p=Math.pow(1.0005777895065548,c);this.totalRate=this.currentConfig.rate*this.manager.rate*p},destroy:function(){this.pendingRemove||(this.stop(),this.emit(a.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});s.exports=d},85034:(s,o,i)=>{var r=i(83419),h=i(41786),a=i(50792),u=i(14463),l=i(8443),d=i(46710),c=i(58731),p=i(29747),f=i(26099),v=new r({Extends:a,initialize:function(g){a.call(this),this.game=g,this.jsonCache=g.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new f,g.events.on(l.BLUR,this.onGameBlur,this),g.events.on(l.FOCUS,this.onGameFocus,this),g.events.on(l.PRE_STEP,this.update,this),g.events.once(l.DESTROY,this.destroy,this)},add:p,addAudioSprite:function(g,y){y===void 0&&(y={});var m=this.add(g,y);for(var x in m.spritemap=this.jsonCache.get(g).spritemap,m.spritemap)if(m.spritemap.hasOwnProperty(x)){var b=h(y),w=m.spritemap[x];b.loop=!!w.hasOwnProperty("loop")&&w.loop,m.addMarker({name:x,start:w.start,duration:w.end-w.start,config:b})}return m},get:function(g){return c(this.sounds,"key",g)},getAll:function(g){return g?d(this.sounds,"key",g):d(this.sounds)},getAllPlaying:function(){return d(this.sounds,"isPlaying",!0)},play:function(g,y){var m=this.add(g);return m.once(u.COMPLETE,m.destroy,m),y?y.name?(m.addMarker(y),m.play(y.name)):m.play(y):m.play()},playAudioSprite:function(g,y,m){var x=this.addAudioSprite(g);return x.once(u.COMPLETE,x.destroy,x),x.play(y,m)},remove:function(g){var y=this.sounds.indexOf(g);return y!==-1&&(g.destroy(),this.sounds.splice(y,1),!0)},removeAll:function(){this.sounds.forEach(function(g){g.destroy()}),this.sounds.length=0},removeByKey:function(g){for(var y=0,m=this.sounds.length-1;m>=0;m--){var x=this.sounds[m];x.key===g&&(x.destroy(),this.sounds.splice(m,1),y++)}return y},pauseAll:function(){this.forEachActiveSound(function(g){g.pause()}),this.emit(u.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(g){g.resume()}),this.emit(u.RESUME_ALL,this)},setListenerPosition:p,stopAll:function(){this.forEachActiveSound(function(g){g.stop()}),this.emit(u.STOP_ALL,this)},stopByKey:function(g){var y=0;return this.getAll(g).forEach(function(m){m.stop()&&y++}),y},unlock:p,onBlur:p,onFocus:p,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(g,y){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(u.UNLOCKED,this));for(var m=this.sounds.length-1;m>=0;m--)this.sounds[m].pendingRemove&&this.sounds.splice(m,1);this.sounds.forEach(function(x){x.update(g,y)})},destroy:function(){this.game.events.off(l.BLUR,this.onGameBlur,this),this.game.events.off(l.FOCUS,this.onGameFocus,this),this.game.events.off(l.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(g,y){var m=this;this.sounds.forEach(function(x,b){x&&!x.pendingRemove&&g.call(y||m,x,b,m.sounds)})},setRate:function(g){return this.rate=g,this},rate:{get:function(){return this._rate},set:function(g){this._rate=g,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(u.GLOBAL_RATE,this,g)}},setDetune:function(g){return this.detune=g,this},detune:{get:function(){return this._detune},set:function(g){this._detune=g,this.forEachActiveSound(function(y){y.calculateRate()}),this.emit(u.GLOBAL_DETUNE,this,g)}}});s.exports=v},14747:(s,o,i)=>{var r=i(33684),h=i(25960),a=i(57490),u={create:function(l){var d=l.config.audio,c=l.device.audio;return d.noAudio||!c.webAudio&&!c.audioData?new h(l):c.webAudio&&!d.disableWebAudio?new a(l):new r(l)}};s.exports=u},19723:s=>{s.exports="complete"},98882:s=>{s.exports="decodedall"},57506:s=>{s.exports="decoded"},73146:s=>{s.exports="destroy"},11305:s=>{s.exports="detune"},40577:s=>{s.exports="detune"},30333:s=>{s.exports="mute"},20394:s=>{s.exports="rate"},21802:s=>{s.exports="volume"},1299:s=>{s.exports="looped"},99190:s=>{s.exports="loop"},97125:s=>{s.exports="mute"},89259:s=>{s.exports="pan"},79986:s=>{s.exports="pauseall"},17586:s=>{s.exports="pause"},19618:s=>{s.exports="play"},42306:s=>{s.exports="rate"},10387:s=>{s.exports="resumeall"},48959:s=>{s.exports="resume"},9960:s=>{s.exports="seek"},19180:s=>{s.exports="stopall"},98328:s=>{s.exports="stop"},50401:s=>{s.exports="unlocked"},52498:s=>{s.exports="volume"},14463:(s,o,i)=>{s.exports={COMPLETE:i(19723),DECODED:i(57506),DECODED_ALL:i(98882),DESTROY:i(73146),DETUNE:i(11305),GLOBAL_DETUNE:i(40577),GLOBAL_MUTE:i(30333),GLOBAL_RATE:i(20394),GLOBAL_VOLUME:i(21802),LOOP:i(99190),LOOPED:i(1299),MUTE:i(97125),PAN:i(89259),PAUSE_ALL:i(79986),PAUSE:i(17586),PLAY:i(19618),RATE:i(42306),RESUME_ALL:i(10387),RESUME:i(48959),SEEK:i(9960),STOP_ALL:i(19180),STOP:i(98328),UNLOCKED:i(50401),VOLUME:i(52498)}},64895:(s,o,i)=>{var r=i(30341),h=i(83419),a=i(14463),u=i(45319),l=new h({Extends:r,initialize:function(d,c,p){if(p===void 0&&(p={}),this.tags=d.game.cache.audio.get(c),!this.tags)throw new Error('No cached audio asset with key "'+c);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,d,c,p)},play:function(d,c){return!(this.manager.isLocked(this,"play",[d,c])||!r.prototype.play.call(this,d,c)||!this.pickAndPlayAudioTag()||(this.emit(a.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!r.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(a.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var d=this.currentConfig.seek,c=this.currentConfig.delay,p=(this.currentMarker?this.currentMarker.start:0)+d;return this.previousTime=p,this.audio.currentTime=p,this.applyConfig(),c===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*c,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var d=0;d<this.tags.length;d++){var c=this.tags[d];if(c.dataset.used==="false")return c.dataset.used="true",this.audio=c,!0}if(!this.manager.override)return!1;var p=[];this.manager.forEachActiveSound(function(v){v.key===this.key&&v.audio&&p.push(v)},this),p.sort(function(v,g){return v.loop===g.loop?g.seek/g.duration-v.seek/v.duration:v.loop?1:-1});var f=p[0];return this.audio=f.audio,f.reset(),f.audio=null,f.startTime=0,f.previousTime=0,!0},playCatchPromise:function(){var d=this.audio.play();d&&d.catch(function(c){console.warn(c)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(d){if(this.isPlaying)if(this.startTime>0)this.startTime<d-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,d-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var c=this.currentMarker?this.currentMarker.start:0,p=c+this.duration,f=this.audio.currentTime;if(this.currentConfig.loop)f>=p-this.manager.loopEndOffset?(this.audio.currentTime=c+Math.max(0,f-p),f=this.audio.currentTime):f<c&&(this.audio.currentTime+=c,f=this.audio.currentTime),f<this.previousTime&&this.emit(a.LOOPED,this);else if(f>=p)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(a.COMPLETE,this);this.previousTime=f}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=u(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(d){this.currentConfig.mute=d,this.manager.isLocked(this,"mute",d)||(this.updateMute(),this.emit(a.MUTE,this,d))}},setMute:function(d){return this.mute=d,this},volume:{get:function(){return this.currentConfig.volume},set:function(d){this.currentConfig.volume=d,this.manager.isLocked(this,"volume",d)||(this.updateVolume(),this.emit(a.VOLUME,this,d))}},setVolume:function(d){return this.volume=d,this},rate:{get:function(){return this.currentConfig.rate},set:function(d){this.currentConfig.rate=d,this.manager.isLocked(this,a.RATE,d)||(this.calculateRate(),this.emit(a.RATE,this,d))}},setRate:function(d){return this.rate=d,this},detune:{get:function(){return this.currentConfig.detune},set:function(d){this.currentConfig.detune=d,this.manager.isLocked(this,a.DETUNE,d)||(this.calculateRate(),this.emit(a.DETUNE,this,d))}},setDetune:function(d){return this.detune=d,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(d){this.manager.isLocked(this,"seek",d)||this.startTime>0||(this.isPlaying||this.isPaused)&&(d=Math.min(Math.max(0,d),this.duration),this.isPlaying?(this.previousTime=d,this.audio.currentTime=d):this.isPaused&&(this.currentConfig.seek=d),this.emit(a.SEEK,this,d))}},setSeek:function(d){return this.seek=d,this},loop:{get:function(){return this.currentConfig.loop},set:function(d){this.currentConfig.loop=d,this.manager.isLocked(this,"loop",d)||(this.audio&&(this.audio.loop=d),this.emit(a.LOOP,this,d))}},setLoop:function(d){return this.loop=d,this},pan:{get:function(){return this.currentConfig.pan},set:function(d){this.currentConfig.pan=d,this.emit(a.PAN,this,d)}},setPan:function(d){return this.pan=d,this}});s.exports=l},33684:(s,o,i)=>{var r=i(85034),h=i(83419),a=i(14463),u=i(64895),l=new h({Extends:r,initialize:function(d){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,d)},add:function(d,c){var p=new u(this,d,c);return this.sounds.push(p),p},unlock:function(){this.locked=!1;var d=this;if(this.game.cache.audio.entries.each(function(v,g){for(var y=0;y<g.length;y++)if(g[y].dataset.locked==="true")return d.locked=!0,!1;return!0}),this.locked){var c=!1,p=function(){c=!0},f=function(){if(c)c=!1;else{document.body.removeEventListener("touchmove",p),document.body.removeEventListener("touchend",f);var v=[];if(d.game.cache.audio.entries.each(function(y,m){for(var x=0;x<m.length;x++){var b=m[x];b.dataset.locked==="true"&&v.push(b)}return!0}),v.length!==0){var g=v[v.length-1];g.oncanplaythrough=function(){g.oncanplaythrough=null,v.forEach(function(y){y.dataset.locked="false"}),d.unlocked=!0},v.forEach(function(y){y.load()})}}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(g){g.currentMarker===null&&g.duration===0&&(g.duration=g.tags[0].duration),g.totalDuration=g.tags[0].duration});this.lockedActionsQueue.length;){var v=this.lockedActionsQueue.shift();v.sound[v.prop].apply?v.sound[v.prop].apply(v.sound,v.value||[]):v.sound[v.prop]=v.value}},this),document.body.addEventListener("touchmove",p,!1),document.body.addEventListener("touchend",f,!1)}},onBlur:function(){this.forEachActiveSound(function(d){d.isPlaying&&(this.onBlurPausedSounds.push(d),d.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(d){d.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(d,c,p){return d.tags[0].dataset.locked==="true"&&(this.lockedActionsQueue.push({sound:d,prop:c,value:p}),!0)},setMute:function(d){return this.mute=d,this},mute:{get:function(){return this._mute},set:function(d){this._mute=d,this.forEachActiveSound(function(c){c.updateMute()}),this.emit(a.GLOBAL_MUTE,this,d)}},setVolume:function(d){return this.volume=d,this},volume:{get:function(){return this._volume},set:function(d){this._volume=d,this.forEachActiveSound(function(c){c.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,d)}}});s.exports=l},23717:(s,o,i)=>{s.exports={SoundManagerCreator:i(14747),Events:i(14463),BaseSound:i(30341),BaseSoundManager:i(85034),WebAudioSound:i(71741),WebAudioSoundManager:i(57490),HTML5AudioSound:i(64895),HTML5AudioSoundManager:i(33684),NoAudioSound:i(4603),NoAudioSoundManager:i(25960)}},4603:(s,o,i)=>{var r=i(30341),h=i(83419),a=i(50792),u=i(79291),l=i(29747),d=function(){return!1},c=function(){return null},p=function(){return this},f=new h({Extends:a,initialize:function(v,g,y){y===void 0&&(y={}),a.call(this),this.manager=v,this.key=g,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=u({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},y),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:d,updateMarker:d,removeMarker:c,play:d,pause:d,resume:d,stop:d,setMute:p,setVolume:p,setRate:p,setDetune:p,setSeek:p,setLoop:p,setPan:p,applyConfig:c,resetConfig:c,update:l,calculateRate:c,destroy:function(){r.prototype.destroy.call(this)}});s.exports=f},25960:(s,o,i)=>{var r=i(85034),h=i(83419),a=i(50792),u=i(4603),l=i(29747),d=new h({Extends:a,initialize:function(c){a.call(this),this.game=c,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(c,p){var f=new u(this,c,p);return this.sounds.push(f),f},addAudioSprite:function(c,p){var f=this.add(c,p);return f.spritemap={},f},get:function(c){return r.prototype.get.call(this,c)},getAll:function(c){return r.prototype.getAll.call(this,c)},play:function(c,p){return!1},playAudioSprite:function(c,p,f){return!1},remove:function(c){return r.prototype.remove.call(this,c)},removeAll:function(){return r.prototype.removeAll.call(this)},removeByKey:function(c){return r.prototype.removeByKey.call(this,c)},stopByKey:function(c){return r.prototype.stopByKey.call(this,c)},onBlur:l,onFocus:l,onGameBlur:l,onGameFocus:l,pauseAll:l,resumeAll:l,stopAll:l,update:l,setRate:l,setDetune:l,setMute:l,setVolume:l,unlock:l,forEachActiveSound:function(c,p){r.prototype.forEachActiveSound.call(this,c,p)},destroy:function(){r.prototype.destroy.call(this)}});s.exports=d},71741:(s,o,i)=>{var r=i(30341),h=i(83419),a=i(14463),u=i(95540),l=new h({Extends:r,initialize:function(d,c,p){if(p===void 0&&(p={}),this.audioBuffer=d.game.cache.audio.get(c),!this.audioBuffer)throw new Error('Audio key "'+c+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=d.context.createGain(),this.volumeNode=d.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),d.context.createPanner&&(this.spatialNode=d.context.createPanner(),this.volumeNode.connect(this.spatialNode)),d.context.createStereoPanner?(this.pannerNode=d.context.createStereoPanner(),d.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(d.destination)):d.context.createPanner?this.spatialNode.connect(d.destination):this.volumeNode.connect(d.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,d,c,p)},play:function(d,c){return!!r.prototype.play.call(this,d,c)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(a.RESUME,this),0))},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0)},createAndStartBufferSource:function(){var d=this.currentConfig.seek,c=this.currentConfig.delay,p=this.manager.context.currentTime+c,f=(this.currentMarker?this.currentMarker.start:0)+d,v=this.duration-d;this.playTime=p-d,this.startTime=p,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,p),Math.max(0,f),Math.max(0,v)),this.resetConfig()},createAndStartLoopBufferSource:function(){var d=this.getLoopTime(),c=this.currentMarker?this.currentMarker.start:0,p=this.duration;this.loopTime=d,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,d),Math.max(0,c),Math.max(0,p))},createBufferSource:function(){var d=this,c=this.manager.context.createBufferSource();return c.buffer=this.audioBuffer,c.connect(this.muteNode),c.onended=function(p){p.target===d.source&&(d.currentConfig.loop?d.hasLooped=!0:d.hasEnded=!0)},c},stopAndRemoveBufferSource:function(){if(this.source){var d=this.source;this.source=null,d.stop(),d.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var d=this.currentConfig.source;if(d&&this.manager.context.createPanner){var c=this.spatialNode;c.panningModel=u(d,"panningModel","equalpower"),c.distanceModel=u(d,"distanceModel","inverse"),c.orientationX.value=u(d,"orientationX",0),c.orientationY.value=u(d,"orientationY",0),c.orientationZ.value=u(d,"orientationZ",-1),c.refDistance=u(d,"refDistance",1),c.maxDistance=u(d,"maxDistance",1e4),c.rolloffFactor=u(d,"rolloffFactor",1),c.coneInnerAngle=u(d,"coneInnerAngle",360),c.coneOuterAngle=u(d,"coneOuterAngle",0),c.coneOuterGain=u(d,"coneOuterGain",0),this.spatialSource=u(d,"follow",null),this.spatialSource||(c.positionX.value=u(d,"x",0),c.positionY.value=u(d,"y",0),c.positionZ.value=u(d,"z",0))}r.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(d){this.spatialNode&&(this.spatialNode.positionX.value=d)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(d){this.spatialNode&&(this.spatialNode.positionY.value=d)}},update:function(){if(this.isPlaying&&this.spatialSource){var d=u(this.spatialSource,"x",null),c=u(this.spatialSource,"y",null);d&&d!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=d),c&&c!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=c)}this.hasEnded?(r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){this.pendingRemove||(r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){r.prototype.calculateRate.call(this);var d=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,d),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,d)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var d=0,c=0;c<this.rateUpdates.length;c++)d+=((c<this.rateUpdates.length-1?this.rateUpdates[c+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[c].time)*this.rateUpdates[c].rate;return d},getLoopTime:function(){for(var d=0,c=0;c<this.rateUpdates.length-1;c++)d+=(this.rateUpdates[c+1].time-this.rateUpdates[c].time)*this.rateUpdates[c].rate;var p=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+p.time+(this.duration-d)/p.rate},rate:{get:function(){return this.currentConfig.rate},set:function(d){this.currentConfig.rate=d,this.calculateRate(),this.emit(a.RATE,this,d)}},setRate:function(d){return this.rate=d,this},detune:{get:function(){return this.currentConfig.detune},set:function(d){this.currentConfig.detune=d,this.calculateRate(),this.emit(a.DETUNE,this,d)}},setDetune:function(d){return this.detune=d,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(d){this.currentConfig.mute=d,this.muteNode.gain.setValueAtTime(d?0:1,0),this.emit(a.MUTE,this,d)}},setMute:function(d){return this.mute=d,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(d){this.currentConfig.volume=d,this.volumeNode.gain.setValueAtTime(d,0),this.emit(a.VOLUME,this,d)}},setVolume:function(d){return this.volume=d,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(d){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(d=Math.min(Math.max(0,d),this.duration),this.currentConfig.seek=d,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,d))}},setSeek:function(d){return this.seek=d,this},loop:{get:function(){return this.currentConfig.loop},set:function(d){this.currentConfig.loop=d,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),d&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,d)}},setLoop:function(d){return this.loop=d,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(d){this.currentConfig.pan=d,this.pannerNode&&this.pannerNode.pan.setValueAtTime(d,this.manager.context.currentTime),this.emit(a.PAN,this,d)}},setPan:function(d){return this.pan=d,this}});s.exports=l},57490:(s,o,i)=>{var r=i(53134),h=i(85034),a=i(83419),u=i(14463),l=i(8443),d=i(71741),c=i(95540),p=new a({Extends:h,initialize:function(f){this.context=this.createAudioContext(f),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),h.call(this,f),this.locked&&f.isBooted?this.unlock():f.events.once(l.BOOT,this.unlock,this)},createAudioContext:function(f){var v=f.config.audio;return v.context?(v.context.resume(),v.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(f){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=f,this.masterMuteNode=f.createGain(),this.masterVolumeNode=f.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(f.destination),this.destination=this.masterMuteNode,this},add:function(f,v){var g=new d(this,f,v);return this.sounds.push(g),g},decodeAudio:function(f,v){var g;g=Array.isArray(f)?f:[{key:f,data:v}];for(var y=this.game.cache.audio,m=g.length,x=0;x<g.length;x++){var b=g[x],w=b.key,T=b.data;typeof T=="string"&&(T=r(T));var S=(function(E,M){y.add(E,M),this.emit(u.DECODED,E),--m===0&&this.emit(u.DECODED_ALL)}).bind(this,w),C=(function(E,M){console.error("Error decoding audio: "+E+" - ",M?M.message:""),--m===0&&this.emit(u.DECODED_ALL)}).bind(this,w);this.context.decodeAudioData(T,S,C)}},setListenerPosition:function(f,v){return f===void 0&&(f=this.game.scale.width/2),v===void 0&&(v=this.game.scale.height/2),this.listenerPosition.set(f,v),this},unlock:function(){var f=this,v=document.body,g=function y(){if(f.context&&v){var m=v.removeEventListener.bind(v);f.context.resume().then(function(){m("touchstart",y),m("touchend",y),m("click",y),m("keydown",y),f.unlocked=!0},function(){m("touchstart",y),m("touchend",y),m("click",y),m("keydown",y)})}};v&&(v.addEventListener("touchstart",g,!1),v.addEventListener("touchend",g,!1),v.addEventListener("click",g,!1),v.addEventListener("keydown",g,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var f=this.context;!f||this.locked||f.state!=="suspended"&&f.state!=="interrupted"||f.resume()},update:function(f,v){var g=this.context.listener;if(g&&g.positionX!==void 0){var y=c(this.listenerPosition,"x",null),m=c(this.listenerPosition,"y",null);y&&y!==this._spatialx&&(this._spatialx=g.positionX.value=y),m&&m!==this._spatialy&&(this._spatialy=g.positionY.value=m)}h.prototype.update.call(this,f,v),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var f=this;this.context.close().then(function(){f.context=null})}h.prototype.destroy.call(this)},setMute:function(f){return this.mute=f,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(f){this.masterMuteNode.gain.setValueAtTime(f?0:1,0),this.emit(u.GLOBAL_MUTE,this,f)}},setVolume:function(f){return this.volume=f,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(f){this.masterVolumeNode.gain.setValueAtTime(f,0),this.emit(u.GLOBAL_VOLUME,this,f)}}});s.exports=p},73162:(s,o,i)=>{var r=i(37105),h=i(83419),a=i(29747),u=i(19186),l=new h({initialize:function(d){this.parent=d,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(d,c){return c?r.Add(this.list,d):r.Add(this.list,d,0,this.addCallback,this)},addAt:function(d,c,p){return p?r.AddAt(this.list,d,c):r.AddAt(this.list,d,c,0,this.addCallback,this)},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,c){return d?(c===void 0&&(c=function(p,f){return p[d]-f[d]}),u(this.list,c),this):this},getByName:function(d){return r.GetFirst(this.list,"name",d)},getRandom:function(d,c){return r.GetRandom(this.list,d,c)},getFirst:function(d,c,p,f){return r.GetFirst(this.list,d,c,p,f)},getAll:function(d,c,p,f){return r.GetAll(this.list,d,c,p,f)},count:function(d,c){return r.CountAllMatching(this.list,d,c)},swap:function(d,c){r.Swap(this.list,d,c)},moveTo:function(d,c){return r.MoveTo(this.list,d,c)},moveAbove:function(d,c){return r.MoveAbove(this.list,d,c)},moveBelow:function(d,c){return r.MoveBelow(this.list,d,c)},remove:function(d,c){return c?r.Remove(this.list,d):r.Remove(this.list,d,this.removeCallback,this)},removeAt:function(d,c){return c?r.RemoveAt(this.list,d):r.RemoveAt(this.list,d,this.removeCallback,this)},removeBetween:function(d,c,p){return p?r.RemoveBetween(this.list,d,c):r.RemoveBetween(this.list,d,c,this.removeCallback,this)},removeAll:function(d){for(var c=this.list.length;c--;)this.remove(this.list[c],d);return this},bringToTop:function(d){return r.BringToTop(this.list,d)},sendToBack:function(d){return r.SendToBack(this.list,d)},moveUp:function(d){return r.MoveUp(this.list,d),d},moveDown:function(d){return r.MoveDown(this.list,d),d},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(d,c){return r.Replace(this.list,d,c)},exists:function(d){return this.list.indexOf(d)>-1},setAll:function(d,c,p,f){return r.SetAll(this.list,d,c,p,f),this},each:function(d,c){for(var p=[null],f=2;f<arguments.length;f++)p.push(arguments[f]);for(f=0;f<this.list.length;f++)p[0]=this.list[f],d.apply(c,p)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});s.exports=l},90330:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){this.entries={},this.size=0,this.setAll(h)},setAll:function(h){if(Array.isArray(h))for(var a=0;a<h.length;a++)this.set(h[a][0],h[a][1]);return this},set:function(h,a){return this.has(h)||this.size++,this.entries[h]=a,this},get:function(h){if(this.has(h))return this.entries[h]},getArray:function(){var h=[],a=this.entries;for(var u in a)h.push(a[u]);return h},has:function(h){return this.entries.hasOwnProperty(h)},delete:function(h){return this.has(h)&&(delete this.entries[h],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(h){delete this.entries[h]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var h=[],a=this.entries;for(var u in a)h.push(a[u]);return h},dump:function(){var h=this.entries;for(var a in console.group("Map"),h)console.log(a,h[a]);console.groupEnd()},each:function(h){var a=this.entries;for(var u in a)if(h(u,a[u])===!1)break;return this},contains:function(h){var a=this.entries;for(var u in a)if(a[u]===h)return!0;return!1},merge:function(h,a){a===void 0&&(a=!1);var u=this.entries,l=h.entries;for(var d in l)u.hasOwnProperty(d)&&a?u[d]=l[d]:this.set(d,l[d]);return this}});s.exports=r},25774:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(82348),u=new r({Extends:h,initialize:function(){h.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(l){return this._active.indexOf(l)>-1},isPending:function(l){return this._toProcess>0&&this._pending.indexOf(l)>-1},isDestroying:function(l){return this._destroy.indexOf(l)>-1},add:function(l){return this.checkQueue&&this.isActive(l)&&!this.isDestroying(l)||this.isPending(l)||(this._pending.push(l),this._toProcess++),l},remove:function(l){if(this.isPending(l)){var d=this._pending,c=d.indexOf(l);c!==-1&&d.splice(c,1)}else this.isActive(l)&&(this._destroy.push(l),this._toProcess++);return l},removeAll:function(){for(var l=this._active,d=this._destroy,c=l.length;c--;)d.push(l[c]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var l,d,c=this._destroy,p=this._active;for(l=0;l<c.length;l++){d=c[l];var f=p.indexOf(d);f!==-1&&(p.splice(f,1),this.emit(a.PROCESS_QUEUE_REMOVE,d))}for(c.length=0,c=this._pending,l=0;l<c.length;l++)d=c[l],(!this.checkQueue||this.checkQueue&&p.indexOf(d)===-1)&&(p.push(d),this.emit(a.PROCESS_QUEUE_ADD,d));return c.length=0,this._toProcess=0,p},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});s.exports=u},59542:(s,o,i)=>{var r=i(43886);function h(T){if(!(this instanceof h))return new h(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function a(T,S,C){if(!C)return S.indexOf(T);for(var E=0;E<S.length;E++)if(C(T,S[E]))return E;return-1}function u(T,S){l(T,0,T.children.length,S,T)}function l(T,S,C,E,M){M||(M=b(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var _,O=S;O<C;O++)_=T.children[O],d(M,T.leaf?E(_):_);return M}function d(T,S){return T.minX=Math.min(T.minX,S.minX),T.minY=Math.min(T.minY,S.minY),T.maxX=Math.max(T.maxX,S.maxX),T.maxY=Math.max(T.maxY,S.maxY),T}function c(T,S){return T.minX-S.minX}function p(T,S){return T.minY-S.minY}function f(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function v(T){return T.maxX-T.minX+(T.maxY-T.minY)}function g(T,S){return(Math.max(S.maxX,T.maxX)-Math.min(S.minX,T.minX))*(Math.max(S.maxY,T.maxY)-Math.min(S.minY,T.minY))}function y(T,S){var C=Math.max(T.minX,S.minX),E=Math.max(T.minY,S.minY),M=Math.min(T.maxX,S.maxX),_=Math.min(T.maxY,S.maxY);return Math.max(0,M-C)*Math.max(0,_-E)}function m(T,S){return T.minX<=S.minX&&T.minY<=S.minY&&S.maxX<=T.maxX&&S.maxY<=T.maxY}function x(T,S){return S.minX<=T.maxX&&S.minY<=T.maxY&&S.maxX>=T.minX&&S.maxY>=T.minY}function b(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(T,S,C,E,M){for(var _,O=[S,C];O.length;)(C=O.pop())-(S=O.pop())<=E||(_=S+Math.ceil((C-S)/E/2)*E,r(T,_,S,C,M),O.push(S,_,_,C))}h.prototype={all:function(){return this._all(this.data,[])},search:function(T){var S=this.data,C=[],E=this.toBBox;if(!x(T,S))return C;for(var M,_,O,k,P=[];S;){for(M=0,_=S.children.length;M<_;M++)O=S.children[M],x(T,k=S.leaf?E(O):O)&&(S.leaf?C.push(O):m(T,k)?this._all(O,C):P.push(O));S=P.pop()}return C},collides:function(T){var S=this.data,C=this.toBBox;if(!x(T,S))return!1;for(var E,M,_,O,k=[];S;){for(E=0,M=S.children.length;E<M;E++)if(_=S.children[E],x(T,O=S.leaf?C(_):_)){if(S.leaf||m(T,O))return!0;k.push(_)}S=k.pop()}return!1},load:function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var S=0,C=T.length;S<C;S++)this.insert(T[S]);return this}var E=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===E.height)this._splitRoot(this.data,E);else{if(this.data.height<E.height){var M=this.data;this.data=E,E=M}this._insert(E,this.data.height-E.height-1,!0)}else this.data=E;return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=b([]),this},remove:function(T,S){if(!T)return this;for(var C,E,M,_,O=this.data,k=this.toBBox(T),P=[],A=[];O||P.length;){if(O||(O=P.pop(),E=P[P.length-1],C=A.pop(),_=!0),O.leaf&&(M=a(T,O.children,S))!==-1)return O.children.splice(M,1),P.push(O),this._condense(P),this;_||O.leaf||!m(O,k)?E?(C++,O=E.children[C],_=!1):O=null:(P.push(O),A.push(C),C=0,E=O,O=O.children[0])}return this},toBBox:function(T){return T},compareMinX:c,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,S){for(var C=[];T;)T.leaf?S.push.apply(S,T.children):C.push.apply(C,T.children),T=C.pop();return S},_build:function(T,S,C,E){var M,_=C-S+1,O=this._maxEntries;if(_<=O)return u(M=b(T.slice(S,C+1)),this.toBBox),M;E||(E=Math.ceil(Math.log(_)/Math.log(O)),O=Math.ceil(_/Math.pow(O,E-1))),(M=b([])).leaf=!1,M.height=E;var k,P,A,L,D=Math.ceil(_/O),F=D*Math.ceil(Math.sqrt(O));for(w(T,S,C,F,this.compareMinX),k=S;k<=C;k+=F)for(w(T,k,A=Math.min(k+F-1,C),D,this.compareMinY),P=k;P<=A;P+=D)L=Math.min(P+D-1,A),M.children.push(this._build(T,P,L,E-1));return u(M,this.toBBox),M},_chooseSubtree:function(T,S,C,E){for(var M,_,O,k,P,A,L,D;E.push(S),!S.leaf&&E.length-1!==C;){for(L=D=1/0,M=0,_=S.children.length;M<_;M++)P=f(O=S.children[M]),(A=g(T,O)-P)<D?(D=A,L=P<L?P:L,k=O):A===D&&P<L&&(L=P,k=O);S=k||S.children[0]}return S},_insert:function(T,S,C){var E=this.toBBox,M=C?T:E(T),_=[],O=this._chooseSubtree(M,this.data,S,_);for(O.children.push(T),d(O,M);S>=0&&_[S].children.length>this._maxEntries;)this._split(_,S),S--;this._adjustParentBBoxes(M,_,S)},_split:function(T,S){var C=T[S],E=C.children.length,M=this._minEntries;this._chooseSplitAxis(C,M,E);var _=this._chooseSplitIndex(C,M,E),O=b(C.children.splice(_,C.children.length-_));O.height=C.height,O.leaf=C.leaf,u(C,this.toBBox),u(O,this.toBBox),S?T[S-1].children.push(O):this._splitRoot(C,O)},_splitRoot:function(T,S){this.data=b([T,S]),this.data.height=T.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(T,S,C){var E,M,_,O,k,P,A,L;for(P=A=1/0,E=S;E<=C-S;E++)O=y(M=l(T,0,E,this.toBBox),_=l(T,E,C,this.toBBox)),k=f(M)+f(_),O<P?(P=O,L=E,A=k<A?k:A):O===P&&k<A&&(A=k,L=E);return L},_chooseSplitAxis:function(T,S,C){var E=T.leaf?this.compareMinX:c,M=T.leaf?this.compareMinY:p;this._allDistMargin(T,S,C,E)<this._allDistMargin(T,S,C,M)&&T.children.sort(E)},_allDistMargin:function(T,S,C,E){T.children.sort(E);var M,_,O=this.toBBox,k=l(T,0,S,O),P=l(T,C-S,C,O),A=v(k)+v(P);for(M=S;M<C-S;M++)_=T.children[M],d(k,T.leaf?O(_):_),A+=v(k);for(M=C-S-1;M>=S;M--)_=T.children[M],d(P,T.leaf?O(_):_),A+=v(P);return A},_adjustParentBBoxes:function(T,S,C){for(var E=C;E>=0;E--)d(S[E],T)},_condense:function(T){for(var S,C=T.length-1;C>=0;C--)T[C].children.length===0?C>0?(S=T[C-1].children).splice(S.indexOf(T[C]),1):this.clear():u(T[C],this.toBBox)},compareMinX:function(T,S){return T.left-S.left},compareMinY:function(T,S){return T.top-S.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}},s.exports=h},35072:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){if(this.entries=[],Array.isArray(h))for(var a=0;a<h.length;a++)this.set(h[a])},set:function(h){return this.entries.indexOf(h)===-1&&this.entries.push(h),this},get:function(h,a){for(var u=0;u<this.entries.length;u++){var l=this.entries[u];if(l[h]===a)return l}},getArray:function(){return this.entries.slice(0)},delete:function(h){var a=this.entries.indexOf(h);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var h=0;h<this.entries.length;h++){var a=this.entries[h];console.log(a)}console.groupEnd()},each:function(h,a){var u,l=this.entries.slice(),d=l.length;if(a)for(u=0;u<d&&h.call(a,l[u],u)!==!1;u++);else for(u=0;u<d&&h(l[u],u)!==!1;u++);return this},iterate:function(h,a){var u,l=this.entries.length;if(a)for(u=0;u<l&&h.call(a,this.entries[u],u)!==!1;u++);else for(u=0;u<l&&h(this.entries[u],u)!==!1;u++);return this},iterateLocal:function(h){var a,u=[];for(a=1;a<arguments.length;a++)u.push(arguments[a]);var l=this.entries.length;for(a=0;a<l;a++){var d=this.entries[a];d[h].apply(d,u)}return this},clear:function(){return this.entries.length=0,this},contains:function(h){return this.entries.indexOf(h)>-1},union:function(h){var a=new r;return h.entries.forEach(function(u){a.set(u)}),this.entries.forEach(function(u){a.set(u)}),a},intersect:function(h){var a=new r;return this.entries.forEach(function(u){h.contains(u)&&a.set(u)}),a},difference:function(h){var a=new r;return this.entries.forEach(function(u){h.contains(u)||a.set(u)}),a},size:{get:function(){return this.entries.length},set:function(h){return h<this.entries.length?this.entries.length=h:this.entries.length}}});s.exports=r},86555:(s,o,i)=>{var r=i(45319),h=i(83419),a=i(56583),u=i(26099),l=new h({initialize:function(d,c,p,f){d===void 0&&(d=0),c===void 0&&(c=d),p===void 0&&(p=0),f===void 0&&(f=null),this._width=d,this._height=c,this._parent=f,this.aspectMode=p,this.aspectRatio=c===0?1:d/c,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new u},setAspectMode:function(d){return d===void 0&&(d=0),this.aspectMode=d,this.setSize(this._width,this._height)},setSnap:function(d,c){return d===void 0&&(d=0),c===void 0&&(c=d),this.snapTo.set(d,c),this.setSize(this._width,this._height)},setParent:function(d){return this._parent=d,this.setSize(this._width,this._height)},setMin:function(d,c){return d===void 0&&(d=0),c===void 0&&(c=d),this.minWidth=r(d,0,this.maxWidth),this.minHeight=r(c,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(d,c){return d===void 0&&(d=Number.MAX_VALUE),c===void 0&&(c=d),this.maxWidth=r(d,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(c,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(d,c){switch(d===void 0&&(d=0),c===void 0&&(c=d),this.aspectMode){case l.NONE:this._width=this.getNewWidth(a(d,this.snapTo.x)),this._height=this.getNewHeight(a(c,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case l.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(d,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case l.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(c,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case l.FIT:this.constrain(d,c,!0);break;case l.ENVELOP:this.constrain(d,c,!1)}return this},setAspectRatio:function(d){return this.aspectRatio=d,this.setSize(this._width,this._height)},resize:function(d,c){return this._width=this.getNewWidth(a(d,this.snapTo.x)),this._height=this.getNewHeight(a(c,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(d,c){return c===void 0&&(c=!0),d=r(d,this.minWidth,this.maxWidth),c&&this._parent&&d>this._parent.width&&(d=Math.max(this.minWidth,this._parent.width)),d},getNewHeight:function(d,c){return c===void 0&&(c=!0),d=r(d,this.minHeight,this.maxHeight),c&&this._parent&&d>this._parent.height&&(d=Math.max(this.minHeight,this._parent.height)),d},constrain:function(d,c,p){d===void 0&&(d=0),c===void 0&&(c=d),p===void 0&&(p=!0),d=this.getNewWidth(d),c=this.getNewHeight(c);var f=this.snapTo,v=c===0?1:d/c;return p&&this.aspectRatio>v||!p&&this.aspectRatio<v?(c=(d=a(d,f.x))/this.aspectRatio,f.y>0&&(d=(c=a(c,f.y))*this.aspectRatio)):(p&&this.aspectRatio<v||!p&&this.aspectRatio>v)&&(d=(c=a(c,f.y))*this.aspectRatio,f.x>0&&(c=(d=a(d,f.x))*(1/this.aspectRatio))),this._width=d,this._height=c,this},fitTo:function(d,c){return this.constrain(d,c,!0)},envelop:function(d,c){return this.constrain(d,c,!1)},setWidth:function(d){return this.setSize(d,this._height)},setHeight:function(d){return this.setSize(this._width,d)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(d){d&&d.style&&(d.style.width=this._width+"px",d.style.height=this._height+"px")},copy:function(d){return d.setAspectMode(this.aspectMode),d.aspectRatio=this.aspectRatio,d.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(d){this.setSize(d,this._height)}},height:{get:function(){return this._height},set:function(d){this.setSize(this._width,d)}}});l.NONE=0,l.WIDTH_CONTROLS_HEIGHT=1,l.HEIGHT_CONTROLS_WIDTH=2,l.FIT=3,l.ENVELOP=4,s.exports=l},15238:s=>{s.exports="add"},56187:s=>{s.exports="remove"},82348:(s,o,i)=>{s.exports={PROCESS_QUEUE_ADD:i(15238),PROCESS_QUEUE_REMOVE:i(56187)}},41392:(s,o,i)=>{s.exports={Events:i(82348),List:i(73162),Map:i(90330),ProcessQueue:i(25774),RTree:i(59542),Set:i(35072),Size:i(86555)}},57382:(s,o,i)=>{var r=i(83419),h=i(45319),a=i(40987),u=i(8054),l=i(50030),d=i(79237),c=new r({Extends:d,initialize:function(p,f,v,g,y){d.call(this,p,f,v,g,y),this.add("__BASE",0,0,0,g,y),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=g,this.height=y,this.imageData=this.context.getImageData(0,0,g,y),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===u.WEBGL&&this.refresh(),this},draw:function(p,f,v,g){return g===void 0&&(g=!0),this.context.drawImage(v,p,f),g&&this.update(),this},drawFrame:function(p,f,v,g,y){v===void 0&&(v=0),g===void 0&&(g=0),y===void 0&&(y=!0);var m=this.manager.getFrame(p,f);if(m){var x=m.canvasData,b=m.cutWidth,w=m.cutHeight,T=m.source.resolution;this.context.drawImage(m.source.image,x.x,x.y,b,w,v,g,b/T,w/T),y&&this.update()}return this},setPixel:function(p,f,v,g,y,m){if(m===void 0&&(m=255),p=Math.abs(Math.floor(p)),f=Math.abs(Math.floor(f)),this.getIndex(p,f)>-1){var x=this.context.getImageData(p,f,1,1);x.data[0]=v,x.data[1]=g,x.data[2]=y,x.data[3]=m,this.context.putImageData(x,p,f)}return this},putData:function(p,f,v,g,y,m,x){return g===void 0&&(g=0),y===void 0&&(y=0),m===void 0&&(m=p.width),x===void 0&&(x=p.height),this.context.putImageData(p,f,v,g,y,m,x),this},getData:function(p,f,v,g){return p=h(Math.floor(p),0,this.width-1),f=h(Math.floor(f),0,this.height-1),v=h(v,1,this.width-p),g=h(g,1,this.height-f),this.context.getImageData(p,f,v,g)},getPixel:function(p,f,v){v||(v=new a);var g=this.getIndex(p,f);if(g>-1){var y=this.data,m=y[g+0],x=y[g+1],b=y[g+2],w=y[g+3];v.setTo(m,x,b,w)}return v},getPixels:function(p,f,v,g){p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=this.width),g===void 0&&(g=v),p=Math.abs(Math.round(p)),f=Math.abs(Math.round(f));for(var y=h(p,0,this.width),m=h(p+v,0,this.width),x=h(f,0,this.height),b=h(f+g,0,this.height),w=new a,T=[],S=x;S<b;S++){for(var C=[],E=y;E<m;E++)w=this.getPixel(E,S,w),C.push({x:E,y:S,color:w.color,alpha:w.alphaGL});T.push(C)}return T},getIndex:function(p,f){return p=Math.abs(Math.round(p)),f=Math.abs(Math.round(f)),p<this.width&&f<this.height?4*(p+f*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(p,f,v,g,y){return p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=this.width),g===void 0&&(g=this.height),y===void 0&&(y=!0),this.context.clearRect(p,f,v,g),y&&this.update(),this},setSize:function(p,f){return f===void 0&&(f=p),p===this.width&&f===this.height||(this.canvas.width=p,this.canvas.height=f,this._source.width=p,this._source.height=f,this._source.isPowerOf2=l(p,f),this.frames.__BASE.setSize(p,f,0,0),this.width=p,this.height=f,this.refresh()),this},destroy:function(){d.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});s.exports=c},81320:(s,o,i)=>{var r=i(10312),h=i(71911),a=i(27919),u=i(83419),l=i(8054),d=i(4327),c=i(95540),p=i(36060),f=i(32302),v=i(79237),g=i(70554),y=new u({Extends:v,initialize:function(m,x,b,w){b===void 0&&(b=256),w===void 0&&(w=256),this.type="DynamicTexture";var T=m.game.renderer,S=T&&T.type===l.CANVAS,C=S?a.create2D(this,b,w):[this];v.call(this,m,x,C,b,w),this.add("__BASE",0,0,0,b,w),this.renderer=T,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=S?C:null,this.context=S?C.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new h(0,0,b,w).setScene(m.game.scene.systemScene,!1),this.renderTarget=S?null:new f(T,b,w,1,0,!1,!0,!0,!1),this.pipeline=S?null:T.pipelines.get(p.SINGLE_PIPELINE),this.setSize(b,w)},setSize:function(m,x){x===void 0&&(x=m);var b=this.get(),w=b.source;if(m!==this.width||x!==this.height){this.canvas&&(this.canvas.width=m,this.canvas.height=x);var T=this.renderTarget;T&&(T.willResize(m,x)&&T.resize(m,x),T.texture!==w.glTexture&&this.renderer.deleteTexture(w.glTexture),this.setFromRenderTarget()),this.camera.setSize(m,x),w.width=m,w.height=x,b.setSize(m,x),this.width=m,this.height=x}else{var S=this.getSourceImage();b.cutX+m>S.width&&(m=S.width-b.cutX),b.cutY+x>S.height&&(x=S.height-b.cutY),b.setSize(m,x,b.cutX,b.cutY)}return this},setFromRenderTarget:function(){var m=this.get().source,x=this.renderTarget;return m.isRenderTexture=!0,m.isGLTexture=!0,m.glTexture=x.texture,this},setIsSpriteTexture:function(m){return this.isSpriteTexture=m,this},fill:function(m,x,b,w,T,S){var C=this.camera,E=this.renderer;x===void 0&&(x=1),b===void 0&&(b=0),w===void 0&&(w=0),T===void 0&&(T=this.width),S===void 0&&(S=this.height);var M=m>>16&255,_=m>>8&255,O=255&m,k=this.renderTarget;if(C.preRender(),k){k.bind(!0);var P=this.pipeline.manager.set(this.pipeline),A=E.width/k.width,L=E.height/k.height,D=k.height-(w+S);P.drawFillRect(b*A,D*L,T*A,S*L,g.getTintFromFloats(O/255,_/255,M/255,1),x),k.unbind(!0)}else{var F=this.context;E.setContext(F),F.globalCompositeOperation="source-over",F.fillStyle="rgba("+M+","+_+","+O+","+x+")",F.fillRect(b,w,T,S),E.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var m=this.context,x=this.renderTarget;x?x.clear():m&&(m.save(),m.setTransform(1,0,0,1,0,0),m.clearRect(0,0,this.width,this.height),m.restore()),this.dirty=!1}return this},stamp:function(m,x,b,w,T){b===void 0&&(b=0),w===void 0&&(w=0);var S=c(T,"alpha",1),C=c(T,"tint",16777215),E=c(T,"angle",0),M=c(T,"rotation",0),_=c(T,"scale",1),O=c(T,"scaleX",_),k=c(T,"scaleY",_),P=c(T,"originX",.5),A=c(T,"originY",.5),L=c(T,"blendMode",0),D=c(T,"erase",!1),F=c(T,"skipBatch",!1),X=this.manager.resetStamp(S,C);return X.setAngle(0),E!==0?X.setAngle(E):M!==0&&X.setRotation(M),X.setScale(O,k),X.setTexture(m,x),X.setOrigin(P,A),X.setBlendMode(L),D&&(this._eraseMode=!0),F?this.batchGameObject(X,b,w):this.draw(X,b,w),D&&(this._eraseMode=!1),this},erase:function(m,x,b){return this._eraseMode=!0,this.draw(m,x,b),this._eraseMode=!1,this},draw:function(m,x,b,w,T){return this.beginDraw(),this.batchDraw(m,x,b,w,T),this.endDraw(),this},drawFrame:function(m,x,b,w,T,S){return this.beginDraw(),this.batchDrawFrame(m,x,b,w,T,S),this.endDraw(),this},repeat:function(m,x,b,w,T,S,C,E,M){if(b===void 0&&(b=0),w===void 0&&(w=0),T===void 0&&(T=this.width),S===void 0&&(S=this.height),C===void 0&&(C=1),E===void 0&&(E=16777215),M===void 0&&(M=!1),!(x=m instanceof d?m:this.manager.getFrame(m,x)))return this;var _=this.manager.resetStamp(C,E);_.setFrame(x),_.setOrigin(0);var O=x.width,k=x.height;T=Math.floor(T),S=Math.floor(S);var P=Math.ceil(T/O),A=Math.ceil(S/k),L=P*O-T,D=A*k-S;L>0&&(L=O-L),D>0&&(D=k-D),b<0&&(P+=Math.ceil(Math.abs(b)/O)),w<0&&(A+=Math.ceil(Math.abs(w)/k));var F=b,X=w,z=!1,Y=this.manager.stampCrop.setTo(0,0,O,k);M||this.beginDraw();for(var R=0;R<A;R++)if(X+k<0)X+=k;else{for(var B=0;B<P;B++)z=!1,F+O<0||(F<0&&(z=!0,Y.width=O+F,Y.x=O-Y.width),X<0&&(z=!0,Y.height=k+X,Y.y=k-Y.height),L>0&&B===P-1&&(z=!0,Y.width=L),D>0&&R===A-1&&(z=!0,Y.height=D),z&&_.setCrop(Y),this.batchGameObject(_,F,X),_.isCropped=!1,Y.setTo(0,0,O,k)),F+=O;F=b,X+=k}return M||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var m=this.camera,x=this.renderer,b=this.renderTarget;m.preRender(),b?x.beginCapture(b.width,b.height):x.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(m,x,b,w,T){return Array.isArray(m)||(m=[m]),this.batchList(m,x,b,w,T),this},batchDrawFrame:function(m,x,b,w,T,S){b===void 0&&(b=0),w===void 0&&(w=0),T===void 0&&(T=1),S===void 0&&(S=16777215);var C=this.manager.getFrame(m,x);return C&&(this.renderTarget?this.pipeline.batchTextureFrame(C,b,w,S,T,this.camera.matrix,null):this.batchTextureFrame(C,b,w,T,S)),this},endDraw:function(m){if(m===void 0&&(m=this._eraseMode),this.isDrawing){var x=this.renderer,b=this.renderTarget;if(b){var w=x.endCapture();x.pipelines.setUtility().blitFrame(w,b,1,!1,!1,m,this.isSpriteTexture),x.resetScissor(),x.resetViewport()}else x.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(m,x,b,w,T){var S=m.length;if(S!==0)for(var C=0;C<S;C++){var E=m[C];E&&E!==this&&(E.renderWebGL||E.renderCanvas?this.batchGameObject(E,x,b):E.isParent||E.list?this.batchGroup(E.getChildren(),x,b):typeof E=="string"?this.batchTextureFrameKey(E,null,x,b,w,T):E instanceof d?this.batchTextureFrame(E,x,b,w,T):Array.isArray(E)&&this.batchList(E,x,b,w,T))}},batchGroup:function(m,x,b){x===void 0&&(x=0),b===void 0&&(b=0);for(var w=0;w<m.length;w++){var T=m[w];T.willRender(this.camera)&&this.batchGameObject(T,T.x+x,T.y+b)}},batchGameObject:function(m,x,b){x===void 0&&(x=m.x),b===void 0&&(b=m.y);var w=m.x,T=m.y,S=this.camera,C=this.renderer,E=this._eraseMode,M=m.mask;if(m.setPosition(x,b),this.canvas){if(E){var _=m.blendMode;m.blendMode=r.ERASE}M&&M.preRenderCanvas(C,m,S),m.renderCanvas(C,m,S,null),M&&M.postRenderCanvas(C,m,S),E&&(m.blendMode=_)}else C&&(M&&M.preRenderWebGL(C,m,S),E||C.setBlendMode(m.blendMode),m.renderWebGL(C,m,S),M&&M.postRenderWebGL(C,S,this.renderTarget));m.setPosition(w,T)},batchTextureFrameKey:function(m,x,b,w,T,S){var C=this.manager.getFrame(m,x);C&&this.batchTextureFrame(C,b,w,T,S)},batchTextureFrame:function(m,x,b,w,T){x===void 0&&(x=0),b===void 0&&(b=0),w===void 0&&(w=1),T===void 0&&(T=16777215);var S=this.camera.matrix;if(this.renderTarget)this.pipeline.batchTextureFrame(m,x,b,T,w,S,null);else{var C=this.context,E=m.canvasData,M=m.source.image;C.save(),C.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",C.globalAlpha=w,S.setToContext(C),E.width>0&&E.height>0&&C.drawImage(M,E.x,E.y,E.width,E.height,x,b,E.width,E.height),C.restore()}},snapshotArea:function(m,x,b,w,T,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,m,x,b,w,S,C):this.renderer.snapshotCanvas(this.canvas,T,!1,m,x,b,w,S,C),this},snapshot:function(m,x,b){return this.snapshotArea(0,0,this.width,this.height,m,x,b)},snapshotPixel:function(m,x,b){return this.snapshotArea(m,x,1,1,b,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(m,x,b,w){var T=this.manager.resetStamp();T.setTexture(this),T.setOrigin(0),T.renderWebGL(m,T,b,w)},renderCanvas:function(){},destroy:function(){var m=this.manager.stamp;m&&m.texture===this&&this.manager.resetStamp(),v.prototype.destroy.call(this),a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});s.exports=y},4327:(s,o,i)=>{var r=i(83419),h=i(45319),a=i(79291),u=new r({initialize:function(l,d,c,p,f,v,g){this.texture=l,this.name=d,this.source=l.source[c],this.sourceIndex=c,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(v,g,p,f)},setSize:function(l,d,c,p){c===void 0&&(c=0),p===void 0&&(p=0),this.cutX=c,this.cutY=p,this.cutWidth=l,this.cutHeight=d,this.width=l,this.height=d,this.halfWidth=Math.floor(.5*l),this.halfHeight=Math.floor(.5*d),this.centerX=Math.floor(l/2),this.centerY=Math.floor(d/2);var f=this.data,v=f.cut;v.x=c,v.y=p,v.w=l,v.h=d,v.r=c+l,v.b=p+d,f.sourceSize.w=l,f.sourceSize.h=d,f.spriteSourceSize.w=l,f.spriteSourceSize.h=d,f.radius=.5*Math.sqrt(l*l+d*d);var g=f.drawImage;return g.x=c,g.y=p,g.width=l,g.height=d,this.updateUVs()},setTrim:function(l,d,c,p,f,v){var g=this.data,y=g.spriteSourceSize;return g.trim=!0,g.sourceSize.w=l,g.sourceSize.h=d,y.x=c,y.y=p,y.w=f,y.h=v,y.r=c+f,y.b=p+v,this.x=c,this.y=p,this.width=f,this.height=v,this.halfWidth=.5*f,this.halfHeight=.5*v,this.centerX=Math.floor(f/2),this.centerY=Math.floor(v/2),this.updateUVs()},setScale9:function(l,d,c,p){var f=this.data;return f.scale9=!0,f.is3Slice=d===0&&p===this.height,f.scale9Borders.x=l,f.scale9Borders.y=d,f.scale9Borders.w=c,f.scale9Borders.h=p,this},setCropUVs:function(l,d,c,p,f,v,g){var y=this.cutX,m=this.cutY,x=this.cutWidth,b=this.cutHeight,w=this.realWidth,T=this.realHeight,S=y+(d=h(d,0,w)),C=m+(c=h(c,0,T)),E=p=h(p,0,w-d),M=f=h(f,0,T-c),_=this.data;if(_.trim){var O=_.spriteSourceSize,k=d+(p=h(p,0,x-d)),P=c+(f=h(f,0,b-c));if(O.r<d||O.b<c||O.x>k||O.y>P)S=0,C=0,E=0,M=0;else{var A=Math.max(O.x,d),L=Math.max(O.y,c),D=Math.min(O.r,k)-A,F=Math.min(O.b,P)-L;E=D,M=F,S=v?y+(x-(A-O.x)-D):y+(A-O.x),C=g?m+(b-(L-O.y)-F):m+(L-O.y),d=A,c=L,p=D,f=F}}else v&&(S=y+(x-d-p)),g&&(C=m+(b-c-f));var X=this.source.width,z=this.source.height;return l.u0=Math.max(0,S/X),l.v0=Math.max(0,C/z),l.u1=Math.min(1,(S+E)/X),l.v1=Math.min(1,(C+M)/z),l.x=d,l.y=c,l.cx=S,l.cy=C,l.cw=E,l.ch=M,l.width=p,l.height=f,l.flipX=v,l.flipY=g,l},updateCropUVs:function(l,d,c){return this.setCropUVs(l,l.x,l.y,l.width,l.height,d,c)},setUVs:function(l,d,c,p,f,v){var g=this.data.drawImage;return g.width=l,g.height=d,this.u0=c,this.v0=p,this.u1=f,this.v1=v,this},updateUVs:function(){var l=this.cutX,d=this.cutY,c=this.cutWidth,p=this.cutHeight,f=this.data.drawImage;f.width=c,f.height=p;var v=this.source.width,g=this.source.height;return this.u0=l/v,this.v0=d/g,this.u1=(l+c)/v,this.v1=(d+p)/g,this},updateUVsInverted:function(){var l=this.source.width,d=this.source.height;return this.u0=(this.cutX+this.cutHeight)/l,this.v0=this.cutY/d,this.u1=this.cutX/l,this.v1=(this.cutY+this.cutWidth)/d,this},clone:function(){var l=new u(this.texture,this.name,this.sourceIndex);return l.cutX=this.cutX,l.cutY=this.cutY,l.cutWidth=this.cutWidth,l.cutHeight=this.cutHeight,l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l.halfWidth=this.halfWidth,l.halfHeight=this.halfHeight,l.centerX=this.centerX,l.centerY=this.centerY,l.rotated=this.rotated,l.data=a(!0,l.data,this.data),l.updateUVs(),l},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});s.exports=u},79237:(s,o,i)=>{var r=i(83419),h=i(4327),a=i(11876),u='Texture "%s" has no frame "%s"',l=new r({initialize:function(d,c,p,f,v){Array.isArray(p)||(p=[p]),this.manager=d,this.key=c,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var g=0;g<p.length;g++)this.source.push(new a(this,p[g],f,v))},add:function(d,c,p,f,v,g){if(this.has(d))return null;var y=new h(this,d,c,p,f,v,g);return this.frames[d]=y,this.firstFrame==="__BASE"&&(this.firstFrame=d),this.frameTotal++,y},remove:function(d){return!!this.has(d)&&(this.get(d).destroy(),delete this.frames[d],!0)},has:function(d){return this.frames.hasOwnProperty(d)},get:function(d){d||(d=this.firstFrame);var c=this.frames[d];return c||(console.warn(u,this.key,d),c=this.frames[this.firstFrame]),c},getTextureSourceIndex:function(d){for(var c=0;c<this.source.length;c++)if(this.source[c]===d)return c;return-1},getFramesFromTextureSource:function(d,c){c===void 0&&(c=!1);var p=[];for(var f in this.frames)if(f!=="__BASE"||c){var v=this.frames[f];v.sourceIndex===d&&p.push(v)}return p},getFrameBounds:function(d){d===void 0&&(d=0);for(var c=this.getFramesFromTextureSource(d),p=1/0,f=1/0,v=0,g=0,y=0;y<c.length;y++){var m=c[y];m.cutX<p&&(p=m.cutX),m.cutY<f&&(f=m.cutY),m.cutX+m.cutWidth>v&&(v=m.cutX+m.cutWidth),m.cutY+m.cutHeight>g&&(g=m.cutY+m.cutHeight)}return{x:p,y:f,width:v-p,height:g-f}},getFrameNames:function(d){d===void 0&&(d=!1);var c=Object.keys(this.frames);if(!d){var p=c.indexOf("__BASE");p!==-1&&c.splice(p,1)}return c},getSourceImage:function(d){d!=null&&this.frameTotal!==1||(d="__BASE");var c=this.frames[d];return c?c.source.image:(console.warn(u,this.key,d),this.frames.__BASE.source.image)},getDataSourceImage:function(d){d!=null&&this.frameTotal!==1||(d="__BASE");var c,p=this.frames[d];return p?c=p.sourceIndex:(console.warn(u,this.key,d),c=this.frames.__BASE.sourceIndex),this.dataSource[c].image},setDataSource:function(d){Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var p=this.source[c];this.dataSource.push(new a(this,d[c],p.width,p.height))}},setFilter:function(d){var c;for(c=0;c<this.source.length;c++)this.source[c].setFilter(d);for(c=0;c<this.dataSource.length;c++)this.dataSource[c].setFilter(d)},destroy:function(){var d,c=this.source,p=this.dataSource;for(d=0;d<c.length;d++)c[d]&&c[d].destroy();for(d=0;d<p.length;d++)p[d]&&p[d].destroy();for(var f in this.frames){var v=this.frames[f];v&&v.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});s.exports=l},17130:(s,o,i)=>{var r=i(27919),h=i(57382),a=i(83419),u=i(40987),l=i(8054),d=i(81320),c=i(50792),p=i(69442),f=i(4327),v=i(8443),g=i(99584),y=i(35154),m=i(88571),x=i(41212),b=i(61309),w=i(87841),T=i(79237),S=new a({Extends:c,initialize:function(C){c.call(this),this.game=C,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new w,this.silentWarnings=!1,C.events.once(v.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(p.LOAD,this.updatePending,this),this.on(p.ERROR,this.updatePending,this);var C=this.game.config;this.addBase64("__DEFAULT",C.defaultImage),this.addBase64("__MISSING",C.missingImage),this.addBase64("__WHITE",C.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(v.DESTROY,this.destroy,this),this.game.events.once(v.SYSTEM_READY,function(E){this.stamp=new m(E).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(p.LOAD),this.off(p.ERROR),this.emit(p.READY))},checkKey:function(C){return!this.exists(C)||(this.silentWarnings||console.error("Texture key already in use: "+C),!1)},remove:function(C){if(typeof C=="string"){if(!this.exists(C))return this.silentWarnings||console.warn("No texture found matching key: "+C),this;C=this.get(C)}var E=C.key;return this.list.hasOwnProperty(E)&&(C.destroy(),this.emit(p.REMOVE,E),this.emit(p.REMOVE_KEY+E)),this},removeKey:function(C){return this.list.hasOwnProperty(C)&&delete this.list[C],this},addBase64:function(C,E){if(this.checkKey(C)){var M=this,_=new Image;_.onerror=function(){M.emit(p.ERROR,C)},_.onload=function(){var O=M.create(C,_);b.Image(O,0),M.emit(p.ADD,C,O),M.emit(p.ADD_KEY+C,O),M.emit(p.LOAD,C,O)},_.src=E}return this},getBase64:function(C,E,M,_){M===void 0&&(M="image/png"),_===void 0&&(_=.92);var O="",k=this.getFrame(C,E);if(k&&(k.source.isRenderTexture||k.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(k){var P=k.canvasData,A=r.create2D(this,P.width,P.height),L=A.getContext("2d",{willReadFrequently:!0});P.width>0&&P.height>0&&L.drawImage(k.source.image,P.x,P.y,P.width,P.height,0,0,P.width,P.height),O=A.toDataURL(M,_),r.remove(A)}return O},addImage:function(C,E,M){var _=null;return this.checkKey(C)&&(_=this.create(C,E),b.Image(_,0),M&&_.setDataSource(M),this.emit(p.ADD,C,_),this.emit(p.ADD_KEY+C,_)),_},addGLTexture:function(C,E){var M=null;if(this.checkKey(C)){var _=E.width,O=E.height;(M=this.create(C,E,_,O)).add("__BASE",0,0,0,_,O),this.emit(p.ADD,C,M),this.emit(p.ADD_KEY+C,M)}return M},addCompressedTexture:function(C,E,M){var _=null;if(this.checkKey(C)){if((_=this.create(C,E)).add("__BASE",0,0,0,E.width,E.height),M){var O=function(P,A,L){Array.isArray(L.textures)||Array.isArray(L.frames)?b.JSONArray(P,A,L):b.JSONHash(P,A,L)};if(Array.isArray(M))for(var k=0;k<M.length;k++)O(_,k,M[k]);else O(_,0,M)}this.emit(p.ADD,C,_),this.emit(p.ADD_KEY+C,_)}return _},addRenderTexture:function(C,E){var M=null;return this.checkKey(C)&&((M=this.create(C,E)).add("__BASE",0,0,0,E.width,E.height),this.emit(p.ADD,C,M),this.emit(p.ADD_KEY+C,M)),M},generate:function(C,E){if(this.checkKey(C)){var M=r.create(this,1,1);return E.canvas=M,g(E),this.addCanvas(C,M)}return null},createCanvas:function(C,E,M){if(E===void 0&&(E=256),M===void 0&&(M=256),this.checkKey(C)){var _=r.create(this,E,M,l.CANVAS,!0);return this.addCanvas(C,_)}return null},addCanvas:function(C,E,M){M===void 0&&(M=!1);var _=null;return M?_=new h(this,C,E,E.width,E.height):this.checkKey(C)&&(_=new h(this,C,E,E.width,E.height),this.list[C]=_,this.emit(p.ADD,C,_),this.emit(p.ADD_KEY+C,_)),_},addDynamicTexture:function(C,E,M){var _=null;return typeof C!="string"||this.exists(C)?C=(_=C).key:_=new d(this,C,E,M),this.checkKey(C)?(this.list[C]=_,this.emit(p.ADD,C,_),this.emit(p.ADD_KEY+C,_)):_=null,_},addAtlas:function(C,E,M,_){return Array.isArray(M.textures)||Array.isArray(M.frames)?this.addAtlasJSONArray(C,E,M,_):this.addAtlasJSONHash(C,E,M,_)},addAtlasJSONArray:function(C,E,M,_){var O=null;if(E instanceof T?(C=E.key,O=E):this.checkKey(C)&&(O=this.create(C,E)),O){if(Array.isArray(M))for(var k=M.length===1,P=0;P<O.source.length;P++){var A=k?M[0]:M[P];b.JSONArray(O,P,A)}else b.JSONArray(O,0,M);_&&O.setDataSource(_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O)}return O},addAtlasJSONHash:function(C,E,M,_){var O=null;if(E instanceof T?(C=E.key,O=E):this.checkKey(C)&&(O=this.create(C,E)),O){if(Array.isArray(M))for(var k=0;k<M.length;k++)b.JSONHash(O,k,M[k]);else b.JSONHash(O,0,M);_&&O.setDataSource(_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O)}return O},addAtlasXML:function(C,E,M,_){var O=null;return E instanceof T?(C=E.key,O=E):this.checkKey(C)&&(O=this.create(C,E)),O&&(b.AtlasXML(O,0,M),_&&O.setDataSource(_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O)),O},addUnityAtlas:function(C,E,M,_){var O=null;return E instanceof T?(C=E.key,O=E):this.checkKey(C)&&(O=this.create(C,E)),O&&(b.UnityYAML(O,0,M),_&&O.setDataSource(_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O)),O},addSpriteSheet:function(C,E,M,_){var O=null;if(E instanceof T?(C=E.key,O=E):this.checkKey(C)&&(O=this.create(C,E)),O){var k=O.source[0].width,P=O.source[0].height;b.SpriteSheet(O,0,0,0,k,P,M),_&&O.setDataSource(_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O)}return O},addSpriteSheetFromAtlas:function(C,E){if(!this.checkKey(C))return null;var M=y(E,"atlas",null),_=y(E,"frame",null);if(M&&_){var O=this.get(M).get(_);if(O){var k=O.source.image;k||(k=O.source.glTexture);var P=this.create(C,k);return O.trimmed?b.SpriteSheetFromAtlas(P,O,E):b.SpriteSheet(P,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,E),this.emit(p.ADD,C,P),this.emit(p.ADD_KEY+C,P),P}}},addUint8Array:function(C,E,M,_){if(!this.checkKey(C)||E.length/4!==M*_)return null;var O=this.create(C,E,M,_);return O.add("__BASE",0,0,0,M,_),this.emit(p.ADD,C,O),this.emit(p.ADD_KEY+C,O),O},create:function(C,E,M,_){var O=null;return this.checkKey(C)&&(O=new T(this,C,E,M,_),this.list[C]=O),O},exists:function(C){return this.list.hasOwnProperty(C)},get:function(C){return C===void 0&&(C="__DEFAULT"),this.list[C]?this.list[C]:C instanceof T?C:C instanceof f?C.texture:this.list.__MISSING},cloneFrame:function(C,E){if(this.list[C])return this.list[C].get(E).clone()},getFrame:function(C,E){if(this.list[C])return this.list[C].get(E)},parseFrame:function(C){if(C)return typeof C=="string"?this.getFrame(C):Array.isArray(C)&&C.length===2?this.getFrame(C[0],C[1]):x(C)?this.getFrame(C.key,C.frame):C instanceof T?C.get():C instanceof f?C:void 0},getTextureKeys:function(){var C=[];for(var E in this.list)E!=="__DEFAULT"&&E!=="__MISSING"&&E!=="__WHITE"&&E!=="__NORMAL"&&C.push(E);return C},getPixel:function(C,E,M,_){var O=this.getFrame(M,_);if(O){C-=O.x,E-=O.y;var k=O.data.cut;if(C+=k.x,E+=k.y,C>=k.x&&C<k.r&&E>=k.y&&E<k.b){var P=this._tempContext;P.clearRect(0,0,1,1),P.drawImage(O.source.image,C,E,1,1,0,0,1,1);var A=P.getImageData(0,0,1,1);return new u(A.data[0],A.data[1],A.data[2],A.data[3])}}return null},getPixelAlpha:function(C,E,M,_){var O=this.getFrame(M,_);if(O){C-=O.x,E-=O.y;var k=O.data.cut;if(C+=k.x,E+=k.y,C>=k.x&&C<k.r&&E>=k.y&&E<k.b){var P=this._tempContext;return P.clearRect(0,0,1,1),P.drawImage(O.source.image,C,E,1,1,0,0,1,1),P.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(C,E,M){return this.list[E]&&(C.texture=this.list[E],C.frame=C.texture.get(M)),C},renameTexture:function(C,E){var M=this.get(C);return!(!M||C===E||(M.key=E,this.list[E]=M,delete this.list[C],0))},each:function(C,E){for(var M=[null],_=1;_<arguments.length;_++)M.push(arguments[_]);for(var O in this.list)M[0]=this.list[O],C.apply(E,M)},resetStamp:function(C,E){C===void 0&&(C=1),E===void 0&&(E=16777215);var M=this.stamp;return M.setCrop(),M.setPosition(0),M.setAngle(0),M.setScale(1),M.setAlpha(C),M.setTint(E),M.setTexture("__WHITE"),M},destroy:function(){for(var C in this.list)this.list[C].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,r.remove(this._tempCanvas)}});s.exports=S},11876:(s,o,i)=>{var r=i(27919),h=i(83419),a=i(50030),u=i(29795),l=i(82751),d=new h({initialize:function(c,p,f,v,g){g===void 0&&(g=!1);var y=c.manager.game;this.renderer=y.renderer,this.texture=c,this.source=p,this.image=p.compressed?null:p,this.compressionAlgorithm=p.compressed?p.format:null,this.resolution=1,this.width=f||p.naturalWidth||p.videoWidth||p.width||0,this.height=v||p.naturalHeight||p.videoHeight||p.height||0,this.scaleMode=u.DEFAULT,this.isCanvas=p instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&p instanceof HTMLVideoElement,this.isRenderTexture=p.type==="RenderTexture"||p.type==="DynamicTexture",this.isGLTexture=p instanceof l,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.flipY=g,this.init(y)},init:function(c){var p=this.renderer;if(p){var f=this.source;if(p.gl){var v=this.image,g=this.flipY,y=this.width,m=this.height,x=this.scaleMode;this.isCanvas?this.glTexture=p.createCanvasTexture(v,!1,g):this.isVideo?this.glTexture=p.createVideoTexture(v,!1,g):this.isRenderTexture?this.glTexture=p.createTextureFromSource(null,y,m,x):this.isGLTexture?this.glTexture=f:this.compressionAlgorithm?this.glTexture=p.createTextureFromSource(f,void 0,void 0,x):f instanceof Uint8Array?this.glTexture=p.createUint8ArrayTexture(f,y,m,x):this.glTexture=p.createTextureFromSource(v,y,m,x)}else this.isRenderTexture&&(this.image=f.canvas)}c.config.antialias||this.setFilter(1)},setFilter:function(c){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,c),this.scaleMode=c},setFlipY:function(c){return c===void 0&&(c=!0),c===this.flipY||(this.flipY=c,this.update()),this},update:function(){var c=this.renderer,p=this.image,f=this.flipY,v=c.gl;v&&this.isCanvas?c.updateCanvasTexture(p,this.glTexture,f):v&&this.isVideo&&c.updateVideoTexture(p,this.glTexture,f)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});s.exports=d},19673:s=>{s.exports={LINEAR:0,NEAREST:1}},44538:s=>{s.exports="addtexture"},63486:s=>{s.exports="addtexture-"},94851:s=>{s.exports="onerror"},29099:s=>{s.exports="onload"},8678:s=>{s.exports="ready"},86415:s=>{s.exports="removetexture"},30879:s=>{s.exports="removetexture-"},69442:(s,o,i)=>{s.exports={ADD:i(44538),ADD_KEY:i(63486),ERROR:i(94851),LOAD:i(29099),READY:i(8678),REMOVE:i(86415),REMOVE_KEY:i(30879)}},27458:(s,o,i)=>{var r=i(79291),h=i(19673),a={CanvasTexture:i(57382),DynamicTexture:i(81320),Events:i(69442),FilterMode:h,Frame:i(4327),Parsers:i(61309),Texture:i(79237),TextureManager:i(17130),TextureSource:i(11876)};a=r(!1,a,h),s.exports=a},89905:s=>{s.exports=function(o,i,r){if(r.getElementsByTagName("TextureAtlas")){var h=o.source[i];o.add("__BASE",i,0,0,h.width,h.height);for(var a,u=r.getElementsByTagName("SubTexture"),l=0;l<u.length;l++){var d=u[l].attributes,c=d.name.value,p=parseInt(d.x.value,10),f=parseInt(d.y.value,10),v=parseInt(d.width.value,10),g=parseInt(d.height.value,10);if(a=o.add(c,i,p,f,v,g),d.frameX){var y=Math.abs(parseInt(d.frameX.value,10)),m=Math.abs(parseInt(d.frameY.value,10)),x=parseInt(d.frameWidth.value,10),b=parseInt(d.frameHeight.value,10);a.setTrim(v,g,y,m,x,b)}}return o}console.warn("Invalid Texture Atlas XML given")}},72893:s=>{s.exports=function(o,i){var r=o.source[i];return o.add("__BASE",i,0,0,r.width,r.height),o}},4832:s=>{s.exports=function(o,i){var r=o.source[i];return o.add("__BASE",i,0,0,r.width,r.height),o}},78566:(s,o,i)=>{var r=i(41786);s.exports=function(h,a,u){if(u.frames||u.textures){var l=h.source[a];h.add("__BASE",a,0,0,l.width,l.height);for(var d,c=Array.isArray(u.textures)?u.textures[a].frames:u.frames,p=0;p<c.length;p++){var f=c[p];if(d=h.add(f.filename,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h)){f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=r(f)}else console.warn("Invalid atlas json, frame already exists: "+f.filename)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?h.customData[g]=u[g].slice(0):h.customData[g]=u[g]);return h}console.warn("Invalid Texture Atlas JSON Array")}},39711:(s,o,i)=>{var r=i(41786);s.exports=function(h,a,u){if(u.frames){var l=h.source[a];h.add("__BASE",a,0,0,l.width,l.height);var d,c=u.frames;for(var p in c)if(c.hasOwnProperty(p)){var f=c[p];if(d=h.add(p,a,f.frame.x,f.frame.y,f.frame.w,f.frame.h)){f.trimmed&&d.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(d.rotated=!0,d.updateUVsInverted());var v=f.anchor||f.pivot;v&&(d.customPivot=!0,d.pivotX=v.x,d.pivotY=v.y),f.scale9Borders&&d.setScale9(f.scale9Borders.x,f.scale9Borders.y,f.scale9Borders.w,f.scale9Borders.h),d.customData=r(f)}else console.warn("Invalid atlas json, frame already exists: "+p)}for(var g in u)g!=="frames"&&(Array.isArray(u[g])?h.customData[g]=u[g].slice(0):h.customData[g]=u[g]);return h}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},31403:s=>{s.exports=function(o){var i,r=[171,75,84,88,32,49,49,187,13,10,26,10],h=new Uint8Array(o,0,12);for(i=0;i<h.length;i++)if(h[i]!==r[i])return void console.warn("KTXParser - Invalid file format");var a=Uint32Array.BYTES_PER_ELEMENT,u=new DataView(o,12,13*a),l=u.getUint32(0,!0)===67305985;if(u.getUint32(1*a,l)===0){var d=u.getUint32(4*a,l),c=u.getUint32(6*a,l),p=u.getUint32(7*a,l),f=Math.max(1,u.getUint32(11*a,l)),v=u.getUint32(12*a,l),g=new Array(f),y=64+v,m=c,x=p;for(i=0;i<f;i++){var b=new Int32Array(o,y,1)[0];y+=4,g[i]={data:new Uint8Array(o,y,b),width:m,height:x},m=Math.max(1,m>>1),x=Math.max(1,x>>1),y+=b}return{mipmaps:g,width:c,height:p,internalFormat:d,compressed:!0,generateMipmap:!1}}console.warn("KTXParser - Only compressed formats supported")}},82038:s=>{function o(d,c,p,f,v,g,y){return y===void 0&&(y=16),Math.floor((d+p)/v)*Math.floor((c+f)/g)*y}function i(d,c){return(d=Math.max(d,16))*(c=Math.max(c,8))/4}function r(d,c){return(d=Math.max(d,8))*(c=Math.max(c,8))/2}function h(d,c){return Math.ceil(d/4)*Math.ceil(c/4)*16}function a(d,c){return o(d,c,3,3,4,4,8)}function u(d,c){return o(d,c,3,3,4,4)}var l={0:{sizeFunc:i,glFormat:[35841]},1:{sizeFunc:i,glFormat:[35843]},2:{sizeFunc:r,glFormat:[35840]},3:{sizeFunc:r,glFormat:[35842]},6:{sizeFunc:a,glFormat:[36196]},7:{sizeFunc:a,glFormat:[33776,35916]},8:{sizeFunc:u,glFormat:[33777,35917]},9:{sizeFunc:u,glFormat:[33778,35918]},11:{sizeFunc:u,glFormat:[33779,35919]},14:{sizeFunc:h,glFormat:[36494,36495]},15:{sizeFunc:h,glFormat:[36492,36493]},22:{sizeFunc:a,glFormat:[37492,37493]},23:{sizeFunc:u,glFormat:[37496,37497]},24:{sizeFunc:a,glFormat:[37494,37495]},25:{sizeFunc:a,glFormat:[37488]},26:{sizeFunc:u,glFormat:[37490]},27:{sizeFunc:u,glFormat:[37808,37840]},28:{sizeFunc:function(d,c){return o(d,c,4,3,5,4)},glFormat:[37809,37841]},29:{sizeFunc:function(d,c){return o(d,c,4,4,5,5)},glFormat:[37810,37842]},30:{sizeFunc:function(d,c){return o(d,c,5,4,6,5)},glFormat:[37811,37843]},31:{sizeFunc:function(d,c){return o(d,c,5,5,6,6)},glFormat:[37812,37844]},32:{sizeFunc:function(d,c){return o(d,c,7,4,8,5)},glFormat:[37813,37845]},33:{sizeFunc:function(d,c){return o(d,c,7,5,8,6)},glFormat:[37814,37846]},34:{sizeFunc:function(d,c){return o(d,c,7,7,8,8)},glFormat:[37815,37847]},35:{sizeFunc:function(d,c){return o(d,c,9,4,10,5)},glFormat:[37816,37848]},36:{sizeFunc:function(d,c){return o(d,c,9,5,10,6)},glFormat:[37817,37849]},37:{sizeFunc:function(d,c){return o(d,c,9,7,10,8)},glFormat:[37818,37850]},38:{sizeFunc:function(d,c){return o(d,c,9,9,10,10)},glFormat:[37819,37851]},39:{sizeFunc:function(d,c){return o(d,c,11,9,12,10)},glFormat:[37820,37852]},40:{sizeFunc:function(d,c){return o(d,c,11,11,12,12)},glFormat:[37821,37853]}};s.exports=function(d){for(var c=new Uint32Array(d,0,13),p=c[0]===55727696?c[2]:c[3],f=c[4],v=l[p].glFormat[f],g=l[p].sizeFunc,y=c[11],m=c[7],x=c[6],b=52+c[12],w=new Uint8Array(d,b),T=new Array(y),S=0,C=m,E=x,M=0;M<y;M++){var _=g(C,E);T[M]={data:new Uint8Array(w.buffer,w.byteOffset+S,_),width:C,height:E},C=Math.max(1,C>>1),E=Math.max(1,E>>1),S+=_}return{mipmaps:T,width:m,height:x,internalFormat:v,compressed:!0,generateMipmap:!1}}},75549:(s,o,i)=>{var r=i(95540);s.exports=function(h,a,u,l,d,c,p){var f=r(p,"frameWidth",null),v=r(p,"frameHeight",f);if(f===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var g=h.source[a];h.add("__BASE",a,0,0,g.width,g.height);var y=r(p,"startFrame",0),m=r(p,"endFrame",-1),x=r(p,"margin",0),b=r(p,"spacing",0),w=Math.floor((d-x+b)/(f+b))*Math.floor((c-x+b)/(v+b));w===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",h.key),(y>w||y<-w)&&(y=0),y<0&&(y=w+y),(m===-1||m>w||m<y)&&(m=w);for(var T=x,S=x,C=0,E=0,M=0,_=0;_<w;_++){C=0,E=0;var O=T+f,k=S+v;O>d&&(C=O-d),k>c&&(E=k-c),_>=y&&_<=m&&(h.add(M,a,u+T,l+S,f-C,v-E),M++),(T+=f+b)+f>d&&(T=x,S+=v+b)}return h}},47534:(s,o,i)=>{var r=i(95540);s.exports=function(h,a,u){var l=r(u,"frameWidth",null),d=r(u,"frameHeight",l);if(!l)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var c=h.source[0];h.add("__BASE",0,0,0,c.width,c.height),r(u,"startFrame",0),r(u,"endFrame",-1);for(var p,f=r(u,"margin",0),v=r(u,"spacing",0),g=a.cutX,y=a.cutY,m=a.cutWidth,x=a.cutHeight,b=a.realWidth,w=a.realHeight,T=Math.floor((b-f+v)/(l+v)),S=Math.floor((w-f+v)/(d+v)),C=a.x,E=l-C,M=l-(b-m-C),_=a.y,O=d-_,k=d-(w-x-_),P=f,A=f,L=0,D=0;D<S;D++){for(var F=D===0,X=D===S-1,z=0;z<T;z++){var Y=z===0,R=z===T-1;if(p=h.add(L,0,g+P,y+A,l,d),Y||F||R||X){var B=Y?C:0,I=F?_:0,G=0,N=0;Y&&(G+=l-E),R&&(G+=l-M),F&&(N+=d-O),X&&(N+=d-k);var W=l-G,U=d-N;p.cutWidth=W,p.cutHeight=U,p.setTrim(l,d,B,I,W,U)}P+=v,P+=Y?E:R?M:l,L++}P=f,A+=v,A+=F?O:X?k:d}return h}},86147:s=>{var o=0,i=function(r,h,a,u){var l=o-u.y-u.height;r.add(a,h,u.x,l,u.width,u.height)};s.exports=function(r,h,a){var u=r.source[h];r.add("__BASE",h,0,0,u.width,u.height),o=u.height;for(var l=a.split(`
`),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",p="",f={x:0,y:0,width:0,height:0},v=0;v<l.length;v++){var g=l[v].match(d);if(g){var y=g[1]==="- ",m=g[2],x=g[3];if(y&&(p!==c&&(i(r,h,p,f),c=p),f={x:0,y:0,width:0,height:0}),m!=="name")switch(m){case"x":case"y":case"width":case"height":f[m]=parseInt(x,10)}else p=x}}return p!==c&&i(r,h,p,f),r}},55222:(s,o,i)=>{var r=i(50030);function h(c){for(var p=c.mipmaps,f=0;f<p.length;f++){var v=p[f].width,g=p[f].height;if((v<<f)%4!=0||(g<<f)%4!=0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+f+" is "+v+"x"+g),!1}return!0}function a(){return!0}function u(c){var p=c.mipmaps[0];return!!r(p.width,p.height)||(console.warn("PVRTC base dimensions must be power of two. Base level is "+p.width+"x"+p.height),!1)}function l(c){var p=c.mipmaps[0];return p.width%4==0&&p.height%4==0||(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+p.width+"x"+p.height+" pixels"),!1)}var d={37488:a,37489:a,37490:a,37491:a,37492:a,37493:a,37494:a,37495:a,37496:a,37497:a,36196:a,37808:a,37809:a,37810:a,37811:a,37812:a,37813:a,37814:a,37815:a,37816:a,37817:a,37818:a,37819:a,37820:a,37821:a,37840:a,37841:a,37842:a,37843:a,37844:a,37845:a,37846:a,37847:a,37848:a,37849:a,37850:a,37851:a,37852:a,37853:a,36492:h,36493:h,36494:h,36495:h,36283:h,36284:h,36285:h,36286:h,35840:u,35841:u,35842:u,35843:u,33776:h,33777:h,33778:h,33779:h,35916:l,35917:l,35918:l,35919:l};s.exports=function(c){for(var p=c.mipmaps,f=1;f<p.length;f++){var v=p[f].width,g=p[f].height;if(!r(v,g))return console.warn("Mip level "+f+" is not a power-of-two size: "+v+"x"+g),!1}var y=d[c.internalFormat];return y?y(c):(console.warn("No format checker found for internal format "+c.internalFormat+". Assuming valid."),!0)}},61309:(s,o,i)=>{s.exports={AtlasXML:i(89905),Canvas:i(72893),Image:i(4832),JSONArray:i(78566),JSONHash:i(39711),KTXParser:i(31403),PVRParser:i(82038),SpriteSheet:i(75549),SpriteSheetFromAtlas:i(47534),UnityYAML:i(86147)}},80341:s=>{s.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(s,o,i)=>{var r=new(i(83419))({initialize:function(h,a,u,l,d,c,p){(u===void 0||u<=0)&&(u=32),(l===void 0||l<=0)&&(l=32),d===void 0&&(d=0),c===void 0&&(c=0),this.name=h,this.firstgid=0|a,this.imageWidth=0|u,this.imageHeight=0|l,this.imageMargin=0|d,this.imageSpacing=0|c,this.properties=p||{},this.images=[],this.total=0},containsImageIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},addImage:function(h,a){return this.images.push({gid:h,image:a}),this.total++,this}});s.exports=r},27462:(s,o,i)=>{var r=new(i(83419))({initialize:function(h){if(this.gids=[],h!==void 0)for(var a=0;a<h.length;++a)for(var u=h[a],l=0;l<u.total;++l)this.gids[u.firstgid+l]=u;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(h){this.gids=h?this._gids:void 0}},getTypeIncludingTile:function(h){if(h.type!==void 0&&h.type!=="")return h.type;if(this.gids&&h.gid!==void 0){var a=this.gids[h.gid];if(a){var u=a.getTileData(h.gid);if(u)return u.type}}},setTextureAndFrame:function(h,a,u,l){if(a===null&&this.gids&&l.gid!==void 0){var d=this.gids[l.gid];d&&(a===null&&d.image!==void 0&&(a=d.image.key),u===null&&(u=l.gid-d.firstgid),h.scene.textures.getFrame(a,u)||(a=null,u=null))}h.setTexture(a,u)},setPropertiesFromTiledObject:function(h,a){if(this.gids!==void 0&&a.gid!==void 0){var u=this.gids[a.gid];u!==void 0&&this.setFromJSON(h,u.getTileProperties(a.gid))}this.setFromJSON(h,a.properties)},setFromJSON:function(h,a){if(a)if(Array.isArray(a))for(var u=0;u<a.length;u++){var l=a[u];h[l.name]!==void 0?h[l.name]=l.value:h.setData(l.name,l.value)}else for(var d in a)h[d]!==void 0?h[d]=a[d]:h.setData(d,a[d])}});s.exports=r},31989:(s,o,i)=>{var r=i(80341),h=i(87010),a=i(46177),u=i(49075);s.exports=function(l,d,c,p,f,v,g,y){c===void 0&&(c=32),p===void 0&&(p=32),f===void 0&&(f=10),v===void 0&&(v=10),y===void 0&&(y=!1);var m=null;if(Array.isArray(g))m=a(d!==void 0?d:"map",r.ARRAY_2D,g,c,p,y);else if(d!==void 0){var x=l.cache.tilemap.get(d);x?m=a(d,x.format,x.data,c,p,y):console.warn("No map data found for key "+d)}return m===null&&(m=new h({tileWidth:c,tileHeight:p,width:f,height:v})),new u(l,m)}},23029:(s,o,i)=>{var r=i(83419),h=i(31401),a=i(91907),u=i(62644),l=i(93232),d=new r({Mixins:[h.AlphaSingle,h.Flip,h.Visible],initialize:function(c,p,f,v,g,y,m,x){this.layer=c,this.index=p,this.x=f,this.y=v,this.width=g,this.height=y,this.right,this.bottom,this.baseWidth=m!==void 0?m:g,this.baseHeight=x!==void 0?x:y,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(c,p){return!(c<this.pixelX||p<this.pixelY||c>this.right||p>this.bottom)},copy:function(c){return this.index=c.index,this.alpha=c.alpha,this.properties=u(c.properties),this.visible=c.visible,this.setFlip(c.flipX,c.flipY),this.tint=c.tint,this.rotation=c.rotation,this.collideUp=c.collideUp,this.collideDown=c.collideDown,this.collideLeft=c.collideLeft,this.collideRight=c.collideRight,this.collisionCallback=c.collisionCallback,this.collisionCallbackContext=c.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(c){var p=this.tilemapLayer;return p?p.tileToWorldXY(this.x,this.y,void 0,c).x:this.x*this.baseWidth},getRight:function(c){var p=this.tilemapLayer;return p?this.getLeft(c)+this.width*p.scaleX:this.getLeft(c)+this.width},getTop:function(c){var p=this.tilemapLayer;return p?p.tileToWorldXY(this.x,this.y,void 0,c).y:this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(c){var p=this.tilemapLayer;return p?this.getTop(c)+this.height*p.scaleY:this.getTop(c)+this.height},getBounds:function(c,p){return p===void 0&&(p=new l),p.x=this.getLeft(c),p.y=this.getTop(c),p.width=this.getRight(c)-p.x,p.height=this.getBottom(c)-p.y,p},getCenterX:function(c){return(this.getLeft(c)+this.getRight(c))/2},getCenterY:function(c){return(this.getTop(c)+this.getBottom(c))/2},intersects:function(c,p,f,v){return!(f<=this.pixelX||v<=this.pixelY||c>=this.right||p>=this.bottom)},isInteresting:function(c,p){return c&&p?this.canCollide||this.hasInterestingFace:c?this.collides:!!p&&this.hasInterestingFace},resetCollision:function(c){return c===void 0&&(c=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,c&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(c,p,f,v,g){return p===void 0&&(p=c),f===void 0&&(f=c),v===void 0&&(v=c),g===void 0&&(g=!0),this.collideLeft=c,this.collideRight=p,this.collideUp=f,this.collideDown=v,this.faceLeft=c,this.faceRight=p,this.faceTop=f,this.faceBottom=v,g&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(c,p){return c===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=c,this.collisionCallbackContext=p),this},setSize:function(c,p,f,v){return c!==void 0&&(this.width=c),p!==void 0&&(this.height=p),f!==void 0&&(this.baseWidth=f),v!==void 0&&(this.baseHeight=v),this.updatePixelXY(),this},updatePixelXY:function(){var c=this.layer.orientation;if(c===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(c===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(c===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(c===a.HEXAGONAL){var p,f,v=this.layer.staggerAxis,g=this.layer.staggerIndex,y=this.layer.hexSideLength;v==="y"?(f=(this.baseHeight-y)/2+y,this.pixelX=g==="odd"?this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*f):v==="x"&&(p=(this.baseWidth-y)/2+y,this.pixelX=this.x*p,this.pixelY=g==="odd"?this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var c=this.layer.tilemapLayer;if(c){var p=c.gidMap[this.index];if(p)return p}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var c=this.tilemapLayer;return c?c.tilemap:null}}});s.exports=d},49075:(s,o,i)=>{var r=i(84101),h=i(83419),a=i(39506),u=i(80341),l=i(95540),d=i(14977),c=i(27462),p=i(91907),f=i(36305),v=i(19133),g=i(68287),y=i(23029),m=i(81086),x=i(20442),b=i(33629),w=new h({initialize:function(T,S){this.scene=T,this.tileWidth=S.tileWidth,this.tileHeight=S.tileHeight,this.width=S.width,this.height=S.height,this.orientation=S.orientation,this.renderOrder=S.renderOrder,this.format=S.format,this.version=S.version,this.properties=S.properties,this.widthInPixels=S.widthInPixels,this.heightInPixels=S.heightInPixels,this.imageCollections=S.imageCollections,this.images=S.images,this.layers=S.layers,this.tiles=S.tiles,this.tilesets=S.tilesets,this.objects=S.objects,this.currentLayerIndex=0,this.hexSideLength=S.hexSideLength;var C=this.orientation;this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(C),WorldToTileX:m.GetWorldToTileXFunction(C),WorldToTileY:m.GetWorldToTileYFunction(C),TileToWorldXY:m.GetTileToWorldXYFunction(C),TileToWorldX:m.GetTileToWorldXFunction(C),TileToWorldY:m.GetTileToWorldYFunction(C),GetTileCorners:m.GetTileCornersFunction(C)}},setRenderOrder:function(T){var S=["right-down","left-down","right-up","left-up"];return typeof T=="number"&&(T=S[T]),S.indexOf(T)>-1&&(this.renderOrder=T),this},addTilesetImage:function(T,S,C,E,M,_,O,k){if(T===void 0)return null;S==null&&(S=T);var P=this.scene.sys.textures;if(!P.exists(S))return console.warn('Texture key "%s" not found',S),null;var A=P.get(S),L=this.getTilesetIndex(T);if(L===null&&this.format===u.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',T,this.tilesets),null;var D=this.tilesets[L];return D?(D.setTileSize(C,E),D.setSpacing(M,_),D.setImage(A),D):(C===void 0&&(C=this.tileWidth),E===void 0&&(E=this.tileHeight),M===void 0&&(M=0),_===void 0&&(_=0),O===void 0&&(O=0),k===void 0&&(k={x:0,y:0}),(D=new b(T,O,C,E,M,_,void 0,void 0,k)).setImage(A),this.tilesets.push(D),this.tiles=r(this),D)},copy:function(T,S,C,E,M,_,O,k){return(k=this.getLayer(k))!==null?(m.Copy(T,S,C,E,M,_,O,k),this):null},createBlankLayer:function(T,S,C,E,M,_,O,k){if(C===void 0&&(C=0),E===void 0&&(E=0),M===void 0&&(M=this.width),_===void 0&&(_=this.height),O===void 0&&(O=this.tileWidth),k===void 0&&(k=this.tileHeight),this.getLayerIndex(T)!==null)return console.warn("Invalid Tilemap Layer ID: "+T),null;for(var P,A=new d({name:T,tileWidth:O,tileHeight:k,width:M,height:_,orientation:this.orientation}),L=0;L<_;L++){P=[];for(var D=0;D<M;D++)P.push(new y(A,-1,D,L,O,k,this.tileWidth,this.tileHeight));A.data.push(P)}this.layers.push(A),this.currentLayerIndex=this.layers.length-1;var F=new x(this.scene,this,this.currentLayerIndex,S,C,E);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createLayer:function(T,S,C,E){var M=this.getLayerIndex(T);if(M===null)return console.warn("Invalid Tilemap Layer ID: "+T),typeof T=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var _=this.layers[M];if(_.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+T),null;this.currentLayerIndex=M,C===void 0&&(C=_.x),E===void 0&&(E=_.y);var O=new x(this.scene,this,M,S,C,E);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createFromObjects:function(T,S,C){C===void 0&&(C=!0);var E=[],M=this.getObjectLayer(T);if(!M)return console.warn("createFromObjects: Invalid objectLayerName given: "+T),E;var _=new c(C?this.tilesets:void 0);Array.isArray(S)||(S=[S]);for(var O=M.objects,k=0;k<S.length;k++){var P,A=S[k],L=l(A,"id",null),D=l(A,"gid",null),F=l(A,"name",null),X=l(A,"type",null);_.enabled=!l(A,"ignoreTileset",null);for(var z=[],Y=0;Y<O.length;Y++)P=O[Y],(L===null&&D===null&&F===null&&X===null||L!==null&&P.id===L||D!==null&&P.gid===D||F!==null&&P.name===F||X!==null&&_.getTypeIncludingTile(P)===X)&&z.push(P);for(var R=l(A,"classType",g),B=l(A,"scene",this.scene),I=l(A,"container",null),G=l(A,"key",null),N=l(A,"frame",null),W=0;W<z.length;W++){P=z[W];var U=new R(B);if(U.setName(P.name),U.setPosition(P.x,P.y),_.setTextureAndFrame(U,G,N,P),P.width&&(U.displayWidth=P.width),P.height&&(U.displayHeight=P.height),this.orientation===p.ISOMETRIC){var V=this.tileWidth/this.tileHeight,K={x:U.x-U.y,y:(U.x+U.y)/V};U.x=K.x,U.y=K.y}var $={x:U.originX*P.width,y:(U.originY-(P.gid?1:0))*P.height};if(P.rotation){var H=a(P.rotation);f($,H),U.rotation=H}U.x+=$.x,U.y+=$.y,P.flippedHorizontal===void 0&&P.flippedVertical===void 0||U.setFlip(P.flippedHorizontal,P.flippedVertical),P.visible||(U.visible=!1),_.setPropertiesFromTiledObject(U,P),I?I.add(U):B.add.existing(U),E.push(U)}}return E},createFromTiles:function(T,S,C,E,M,_){return(_=this.getLayer(_))===null?null:m.CreateFromTiles(T,S,C,E,M,_)},fill:function(T,S,C,E,M,_,O){return _===void 0&&(_=!0),(O=this.getLayer(O))===null?null:(m.Fill(T,S,C,E,M,_,O),this)},filterObjects:function(T,S,C){if(typeof T=="string"){var E=T;if(!(T=this.getObjectLayer(T)))return console.warn("No object layer found with the name: "+E),null}return T.objects.filter(S,C)},filterTiles:function(T,S,C,E,M,_,O,k){return(k=this.getLayer(k))===null?null:m.FilterTiles(T,S,C,E,M,_,O,k)},findByIndex:function(T,S,C,E){return(E=this.getLayer(E))===null?null:m.FindByIndex(T,S,C,E)},findObject:function(T,S,C){if(typeof T=="string"){var E=T;if(!(T=this.getObjectLayer(T)))return console.warn("No object layer found with the name: "+E),null}return T.objects.find(S,C)||null},findTile:function(T,S,C,E,M,_,O,k){return(k=this.getLayer(k))===null?null:m.FindTile(T,S,C,E,M,_,O,k)},forEachTile:function(T,S,C,E,M,_,O,k){return(k=this.getLayer(k))===null?null:(m.ForEachTile(T,S,C,E,M,_,O,k),this)},getImageIndex:function(T){return this.getIndex(this.images,T)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(T){return T.name}):[]},getIndex:function(T,S){for(var C=0;C<T.length;C++)if(T[C].name===S)return C;return null},getLayer:function(T){var S=this.getLayerIndex(T);return S!==null?this.layers[S]:null},getObjectLayer:function(T){var S=this.getIndex(this.objects,T);return S!==null?this.objects[S]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(T){return T.name}):[]},getLayerIndex:function(T){return T===void 0?this.currentLayerIndex:typeof T=="string"?this.getLayerIndexByName(T):typeof T=="number"&&T<this.layers.length?T:T instanceof x&&T.tilemap===this?T.layerIndex:null},getLayerIndexByName:function(T){return this.getIndex(this.layers,T)},getTileAt:function(T,S,C,E){return(E=this.getLayer(E))===null?null:m.GetTileAt(T,S,C,E)},getTileAtWorldXY:function(T,S,C,E,M){return(M=this.getLayer(M))===null?null:m.GetTileAtWorldXY(T,S,C,E,M)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(T){return T.name}):[]},getTilesWithin:function(T,S,C,E,M,_){return(_=this.getLayer(_))===null?null:m.GetTilesWithin(T,S,C,E,M,_)},getTilesWithinShape:function(T,S,C,E){return(E=this.getLayer(E))===null?null:m.GetTilesWithinShape(T,S,C,E)},getTilesWithinWorldXY:function(T,S,C,E,M,_,O){return(O=this.getLayer(O))===null?null:m.GetTilesWithinWorldXY(T,S,C,E,M,_,O)},getTileset:function(T){var S=this.getIndex(this.tilesets,T);return S!==null?this.tilesets[S]:null},getTilesetIndex:function(T){return this.getIndex(this.tilesets,T)},hasTileAt:function(T,S,C){return(C=this.getLayer(C))===null?null:m.HasTileAt(T,S,C)},hasTileAtWorldXY:function(T,S,C,E){return(E=this.getLayer(E))===null?null:m.HasTileAtWorldXY(T,S,C,E)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(T){this.setLayer(T)}},putTileAt:function(T,S,C,E,M){return E===void 0&&(E=!0),(M=this.getLayer(M))===null?null:m.PutTileAt(T,S,C,E,M)},putTileAtWorldXY:function(T,S,C,E,M,_){return E===void 0&&(E=!0),(_=this.getLayer(_))===null?null:m.PutTileAtWorldXY(T,S,C,E,M,_)},putTilesAt:function(T,S,C,E,M){return E===void 0&&(E=!0),(M=this.getLayer(M))===null?null:(m.PutTilesAt(T,S,C,E,M),this)},randomize:function(T,S,C,E,M,_){return(_=this.getLayer(_))===null?null:(m.Randomize(T,S,C,E,M,_),this)},calculateFacesAt:function(T,S,C){return(C=this.getLayer(C))===null?null:(m.CalculateFacesAt(T,S,C),this)},calculateFacesWithin:function(T,S,C,E,M){return(M=this.getLayer(M))===null?null:(m.CalculateFacesWithin(T,S,C,E,M),this)},removeLayer:function(T){var S=this.getLayerIndex(T);if(S!==null){v(this.layers,S);for(var C=S;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===S&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(T){var S=this.getLayerIndex(T);return S!==null?((T=this.layers[S]).tilemapLayer.destroy(),v(this.layers,S),this.currentLayerIndex===S&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var T=this.layers,S=0;S<T.length;S++)T[S].tilemapLayer&&T[S].tilemapLayer.destroy(!1);return T.length=0,this.currentLayerIndex=0,this},removeTile:function(T,S,C){S===void 0&&(S=-1),C===void 0&&(C=!0);var E=[];Array.isArray(T)||(T=[T]);for(var M=0;M<T.length;M++){var _=T[M];E.push(this.removeTileAt(_.x,_.y,!0,C,_.tilemapLayer)),S>-1&&this.putTileAt(S,_.x,_.y,C,_.tilemapLayer)}return E},removeTileAt:function(T,S,C,E,M){return C===void 0&&(C=!0),E===void 0&&(E=!0),(M=this.getLayer(M))===null?null:m.RemoveTileAt(T,S,C,E,M)},removeTileAtWorldXY:function(T,S,C,E,M,_){return C===void 0&&(C=!0),E===void 0&&(E=!0),(_=this.getLayer(_))===null?null:m.RemoveTileAtWorldXY(T,S,C,E,M,_)},renderDebug:function(T,S,C){return(C=this.getLayer(C))===null?null:(this.orientation===p.ORTHOGONAL&&m.RenderDebug(T,S,C),this)},renderDebugFull:function(T,S){for(var C=this.layers,E=0;E<C.length;E++)m.RenderDebug(T,S,C[E]);return this},replaceByIndex:function(T,S,C,E,M,_,O){return(O=this.getLayer(O))===null?null:(m.ReplaceByIndex(T,S,C,E,M,_,O),this)},setCollision:function(T,S,C,E,M){return S===void 0&&(S=!0),C===void 0&&(C=!0),M===void 0&&(M=!0),(E=this.getLayer(E))===null?null:(m.SetCollision(T,S,C,E,M),this)},setCollisionBetween:function(T,S,C,E,M){return C===void 0&&(C=!0),E===void 0&&(E=!0),(M=this.getLayer(M))===null?null:(m.SetCollisionBetween(T,S,C,E,M),this)},setCollisionByProperty:function(T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),(E=this.getLayer(E))===null?null:(m.SetCollisionByProperty(T,S,C,E),this)},setCollisionByExclusion:function(T,S,C,E){return S===void 0&&(S=!0),C===void 0&&(C=!0),(E=this.getLayer(E))===null?null:(m.SetCollisionByExclusion(T,S,C,E),this)},setCollisionFromCollisionGroup:function(T,S,C){return T===void 0&&(T=!0),S===void 0&&(S=!0),(C=this.getLayer(C))===null?null:(m.SetCollisionFromCollisionGroup(T,S,C),this)},setTileIndexCallback:function(T,S,C,E){return(E=this.getLayer(E))===null?null:(m.SetTileIndexCallback(T,S,C,E),this)},setTileLocationCallback:function(T,S,C,E,M,_,O){return(O=this.getLayer(O))===null?null:(m.SetTileLocationCallback(T,S,C,E,M,_,O),this)},setLayer:function(T){var S=this.getLayerIndex(T);return S!==null&&(this.currentLayerIndex=S),this},setBaseTileSize:function(T,S){this.tileWidth=T,this.tileHeight=S,this.widthInPixels=this.width*T,this.heightInPixels=this.height*S;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=T,this.layers[C].baseTileHeight=S;for(var E=this.layers[C].data,M=this.layers[C].width,_=this.layers[C].height,O=0;O<_;O++)for(var k=0;k<M;k++){var P=E[O][k];P!==null&&P.setSize(void 0,void 0,T,S)}}return this},setLayerTileSize:function(T,S,C){if((C=this.getLayer(C))===null)return this;C.tileWidth=T,C.tileHeight=S;for(var E=C.data,M=C.width,_=C.height,O=0;O<_;O++)for(var k=0;k<M;k++){var P=E[O][k];P!==null&&P.setSize(T,S)}return this},shuffle:function(T,S,C,E,M){return(M=this.getLayer(M))===null?null:(m.Shuffle(T,S,C,E,M),this)},swapByIndex:function(T,S,C,E,M,_,O){return(O=this.getLayer(O))===null?null:(m.SwapByIndex(T,S,C,E,M,_,O),this)},tileToWorldX:function(T,S,C){return(C=this.getLayer(C))===null?null:this._convert.TileToWorldX(T,S,C)},tileToWorldY:function(T,S,C){return(C=this.getLayer(C))===null?null:this._convert.TileToWorldY(T,S,C)},tileToWorldXY:function(T,S,C,E,M){return(M=this.getLayer(M))===null?null:this._convert.TileToWorldXY(T,S,C,E,M)},getTileCorners:function(T,S,C,E){return(E=this.getLayer(E))===null?null:this._convert.GetTileCorners(T,S,C,E)},weightedRandomize:function(T,S,C,E,M,_){return(_=this.getLayer(_))===null?null:(m.WeightedRandomize(S,C,E,M,T,_),this)},worldToTileX:function(T,S,C,E){return(E=this.getLayer(E))===null?null:this._convert.WorldToTileX(T,S,C,E)},worldToTileY:function(T,S,C,E){return(E=this.getLayer(E))===null?null:this._convert.WorldToTileY(T,S,C,E)},worldToTileXY:function(T,S,C,E,M,_){return(_=this.getLayer(_))===null?null:this._convert.WorldToTileXY(T,S,C,E,M,_)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});s.exports=w},45939:(s,o,i)=>{var r=i(44603),h=i(31989);r.register("tilemap",function(a){var u=a!==void 0?a:{};return h(this.scene,u.key,u.tileWidth,u.tileHeight,u.width,u.height,u.data,u.insertNull)})},46029:(s,o,i)=>{var r=i(39429),h=i(31989);r.register("tilemap",function(a,u,l,d,c,p,f){return a===null&&(a=void 0),u===null&&(u=void 0),l===null&&(l=void 0),d===null&&(d=void 0),c===null&&(c=void 0),h(this.scene,a,u,l,d,c,p,f)})},20442:(s,o,i)=>{var r=i(83419),h=i(78389),a=i(31401),u=i(95643),l=i(81086),d=i(19218),c=i(26099),p=new r({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,h,d],initialize:function(f,v,g,y,m,x){u.call(this,f,"TilemapLayer"),this.isTilemap=!0,this.tilemap=v,this.layerIndex=g,this.layer=v.layers[g],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new c,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(y),this.setAlpha(this.layer.alpha),this.setPosition(m,x),this.setOrigin(0,0),this.setSize(v.tileWidth*this.layer.width,v.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(f){var v=[],g=[],y=this.tilemap;Array.isArray(f)||(f=[f]);for(var m=0;m<f.length;m++){var x=f[m];if(typeof x=="string"&&(x=y.getTileset(x)),x){g.push(x);for(var b=x.firstgid,w=0;w<x.total;w++)v[b+w]=x}}this.gidMap=v,this.tileset=g},setRenderOrder:function(f){return typeof f=="string"&&(f=["right-down","left-down","right-up","left-up"].indexOf(f)),f>=0&&f<4&&(this._renderOrder=f),this},calculateFacesAt:function(f,v){return l.CalculateFacesAt(f,v,this.layer),this},calculateFacesWithin:function(f,v,g,y){return l.CalculateFacesWithin(f,v,g,y,this.layer),this},createFromTiles:function(f,v,g,y,m){return l.CreateFromTiles(f,v,g,y,m,this.layer)},cull:function(f){return this.cullCallback(this.layer,f,this.culledTiles,this._renderOrder)},copy:function(f,v,g,y,m,x,b){return l.Copy(f,v,g,y,m,x,b,this.layer),this},fill:function(f,v,g,y,m,x){return l.Fill(f,v,g,y,m,x,this.layer),this},filterTiles:function(f,v,g,y,m,x,b){return l.FilterTiles(f,v,g,y,m,x,b,this.layer)},findByIndex:function(f,v,g){return l.FindByIndex(f,v,g,this.layer)},findTile:function(f,v,g,y,m,x,b){return l.FindTile(f,v,g,y,m,x,b,this.layer)},forEachTile:function(f,v,g,y,m,x,b){return l.ForEachTile(f,v,g,y,m,x,b,this.layer),this},setTint:function(f,v,g,y,m,x){return f===void 0&&(f=16777215),this.forEachTile(function(b){b.tint=f,b.tintFill=!1},this,v,g,y,m,x)},setTintFill:function(f,v,g,y,m,x){return f===void 0&&(f=16777215),this.forEachTile(function(b){b.tint=f,b.tintFill=!0},this,v,g,y,m,x)},getTileAt:function(f,v,g){return l.GetTileAt(f,v,g,this.layer)},getTileAtWorldXY:function(f,v,g,y){return l.GetTileAtWorldXY(f,v,g,y,this.layer)},getIsoTileAtWorldXY:function(f,v,g,y,m){g===void 0&&(g=!0);var x=this.tempVec;return l.IsometricWorldToTileXY(f,v,!0,x,m,this.layer,g),this.getTileAt(x.x,x.y,y)},getTilesWithin:function(f,v,g,y,m){return l.GetTilesWithin(f,v,g,y,m,this.layer)},getTilesWithinShape:function(f,v,g){return l.GetTilesWithinShape(f,v,g,this.layer)},getTilesWithinWorldXY:function(f,v,g,y,m,x){return l.GetTilesWithinWorldXY(f,v,g,y,m,x,this.layer)},hasTileAt:function(f,v){return l.HasTileAt(f,v,this.layer)},hasTileAtWorldXY:function(f,v,g){return l.HasTileAtWorldXY(f,v,g,this.layer)},putTileAt:function(f,v,g,y){return l.PutTileAt(f,v,g,y,this.layer)},putTileAtWorldXY:function(f,v,g,y,m){return l.PutTileAtWorldXY(f,v,g,y,m,this.layer)},putTilesAt:function(f,v,g,y){return l.PutTilesAt(f,v,g,y,this.layer),this},randomize:function(f,v,g,y,m){return l.Randomize(f,v,g,y,m,this.layer),this},removeTileAt:function(f,v,g,y){return l.RemoveTileAt(f,v,g,y,this.layer)},removeTileAtWorldXY:function(f,v,g,y,m){return l.RemoveTileAtWorldXY(f,v,g,y,m,this.layer)},renderDebug:function(f,v){return l.RenderDebug(f,v,this.layer),this},replaceByIndex:function(f,v,g,y,m,x){return l.ReplaceByIndex(f,v,g,y,m,x,this.layer),this},setSkipCull:function(f){return f===void 0&&(f=!0),this.skipCull=f,this},setCullPadding:function(f,v){return f===void 0&&(f=1),v===void 0&&(v=1),this.cullPaddingX=f,this.cullPaddingY=v,this},setCollision:function(f,v,g,y){return l.SetCollision(f,v,g,this.layer,y),this},setCollisionBetween:function(f,v,g,y){return l.SetCollisionBetween(f,v,g,y,this.layer),this},setCollisionByProperty:function(f,v,g){return l.SetCollisionByProperty(f,v,g,this.layer),this},setCollisionByExclusion:function(f,v,g){return l.SetCollisionByExclusion(f,v,g,this.layer),this},setCollisionFromCollisionGroup:function(f,v){return l.SetCollisionFromCollisionGroup(f,v,this.layer),this},setTileIndexCallback:function(f,v,g){return l.SetTileIndexCallback(f,v,g,this.layer),this},setTileLocationCallback:function(f,v,g,y,m,x){return l.SetTileLocationCallback(f,v,g,y,m,x,this.layer),this},shuffle:function(f,v,g,y){return l.Shuffle(f,v,g,y,this.layer),this},swapByIndex:function(f,v,g,y,m,x){return l.SwapByIndex(f,v,g,y,m,x,this.layer),this},tileToWorldX:function(f,v){return this.tilemap.tileToWorldX(f,v,this)},tileToWorldY:function(f,v){return this.tilemap.tileToWorldY(f,v,this)},tileToWorldXY:function(f,v,g,y){return this.tilemap.tileToWorldXY(f,v,g,y,this)},getTileCorners:function(f,v,g){return this.tilemap.getTileCorners(f,v,g,this)},weightedRandomize:function(f,v,g,y,m){return l.WeightedRandomize(v,g,y,m,f,this.layer),this},worldToTileX:function(f,v,g){return this.tilemap.worldToTileX(f,v,g,this)},worldToTileY:function(f,v,g){return this.tilemap.worldToTileY(f,v,g,this)},worldToTileXY:function(f,v,g,y,m){return this.tilemap.worldToTileXY(f,v,g,y,m,this)},destroy:function(f){f===void 0&&(f=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),f&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});s.exports=p},16153:(s,o,i)=>{var r=i(61340),h=new r,a=new r,u=new r;s.exports=function(l,d,c,p){var f=d.cull(c),v=f.length,g=c.alpha*d.alpha;if(!(v===0||g<=0)){var y=h,m=a,x=u;m.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY),y.copyFrom(c.matrix);var b=l.currentContext,w=d.gidMap;b.save(),p?(y.multiplyWithOffset(p,-c.scrollX*d.scrollFactorX,-c.scrollY*d.scrollFactorY),m.e=d.x,m.f=d.y,y.multiply(m,x),x.copyToContext(b)):(m.e-=c.scrollX*d.scrollFactorX,m.f-=c.scrollY*d.scrollFactorY,m.copyToContext(b)),(!l.antialias||d.scaleX>1||d.scaleY>1)&&(b.imageSmoothingEnabled=!1);for(var T=0;T<v;T++){var S=f[T],C=w[S.index];if(C){var E=C.image.getSourceImage(),M=C.getTileTextureCoordinates(S.index),_=C.tileWidth,O=C.tileHeight;if(M!==null&&_!==0&&O!==0){var k=.5*_,P=.5*O;M.x+=C.tileOffset.x,M.y+=C.tileOffset.y,b.save(),b.translate(S.pixelX+k,S.pixelY+P),S.rotation!==0&&b.rotate(S.rotation),(S.flipX||S.flipY)&&b.scale(S.flipX?-1:1,S.flipY?-1:1),b.globalAlpha=g*S.alpha,b.drawImage(E,M.x,M.y,_,O,-k,-P,_,O),b.restore()}}}b.restore()}}},19218:(s,o,i)=>{var r,h;i(29747),r=i(99558),h=i(16153),s.exports={renderWebGL:r,renderCanvas:h}},99558:(s,o,i)=>{var r=i(70554);s.exports=function(h,a,u){var l=a.cull(u),d=l.length,c=u.alpha*a.alpha;if(!(d===0||c<=0)){var p=a.gidMap,f=h.pipelines.set(a.pipeline,a),v=r.getTintAppendFloatAlpha,g=a.scrollFactorX,y=a.scrollFactorY,m=a.x,x=a.y,b=a.scaleX,w=a.scaleY;h.pipelines.preBatch(a);for(var T=0;T<d;T++){var S=l[T],C=p[S.index];if(C){var E=C.getTileTextureCoordinates(S.index),M=C.tileWidth,_=C.tileHeight;if(E&&M!==0&&_!==0){var O=.5*M,k=.5*_,P=C.glTexture,A=f.setTexture2D(P,a),L=M,D=_,F=E.x,X=E.y,z=C.tileOffset.x,Y=C.tileOffset.y,R=v(S.tint,c*S.alpha);f.batchTexture(a,P,P.width,P.height,m+S.pixelX*b+(O*b-z),x+S.pixelY*w+(k*w-Y),M,_,b,w,S.rotation,S.flipX,S.flipY,g,y,O,k,F,X,L,D,R,R,R,R,S.tintFill,0,0,u,null,!0,A,!0)}}}h.pipelines.postBatch(a)}}},33629:(s,o,i)=>{var r=i(83419),h=i(26099),a=new r({initialize:function(u,l,d,c,p,f,v,g,y){(d===void 0||d<=0)&&(d=32),(c===void 0||c<=0)&&(c=32),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v={}),g===void 0&&(g={}),this.name=u,this.firstgid=l,this.tileWidth=d,this.tileHeight=c,this.tileMargin=p,this.tileSpacing=f,this.tileProperties=v,this.tileData=g,this.tileOffset=new h,y!==void 0&&this.tileOffset.set(y.x,y.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(u){return this.containsTileIndex(u)?this.tileProperties[u-this.firstgid]:null},getTileData:function(u){return this.containsTileIndex(u)?this.tileData[u-this.firstgid]:null},getTileCollisionGroup:function(u){var l=this.getTileData(u);return l&&l.objectgroup?l.objectgroup:null},containsTileIndex:function(u){return u>=this.firstgid&&u<this.firstgid+this.total},getTileTextureCoordinates:function(u){return this.containsTileIndex(u)?this.texCoordinates[u-this.firstgid]:null},setImage:function(u){this.image=u;var l=u.get(),d=u.getFrameBounds();return this.glTexture=l.source.glTexture,l.width>d.width||l.height>d.height?this.updateTileData(l.width,l.height):this.updateTileData(d.width,d.height,d.x,d.y),this},setTileSize:function(u,l){return u!==void 0&&(this.tileWidth=u),l!==void 0&&(this.tileHeight=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(u,l){return u!==void 0&&(this.tileMargin=u),l!==void 0&&(this.tileSpacing=l),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(u,l,d,c){d===void 0&&(d=0),c===void 0&&(c=0);var p=(l-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),f=(u-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);p%1==0&&f%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),p=Math.floor(p),f=Math.floor(f),this.rows=p,this.columns=f,this.total=p*f,this.texCoordinates.length=0;for(var v=this.tileMargin+d,g=this.tileMargin+c,y=0;y<this.rows;y++){for(var m=0;m<this.columns;m++)this.texCoordinates.push({x:v,y:g}),v+=this.tileWidth+this.tileSpacing;v=this.tileMargin+d,g+=this.tileHeight+this.tileSpacing}return this}});s.exports=a},72023:(s,o,i)=>{var r=i(7423);s.exports=function(h,a,u){var l=r(h,a,!0,u),d=r(h,a-1,!0,u),c=r(h,a+1,!0,u),p=r(h-1,a,!0,u),f=r(h+1,a,!0,u),v=l&&l.collides;return v&&(l.faceTop=!0,l.faceBottom=!0,l.faceLeft=!0,l.faceRight=!0),d&&d.collides&&(v&&(l.faceTop=!1),d.faceBottom=!v),c&&c.collides&&(v&&(l.faceBottom=!1),c.faceTop=!v),p&&p.collides&&(v&&(l.faceLeft=!1),p.faceRight=!v),f&&f.collides&&(v&&(l.faceRight=!1),f.faceLeft=!v),l&&!l.collides&&l.resetFaces(),l}},42573:(s,o,i)=>{var r=i(7423),h=i(7386);s.exports=function(a,u,l,d,c){for(var p=null,f=null,v=null,g=null,y=h(a,u,l,d,null,c),m=0;m<y.length;m++){var x=y[m];x&&(x.collides?(p=r(x.x,x.y-1,!0,c),f=r(x.x,x.y+1,!0,c),v=r(x.x-1,x.y,!0,c),g=r(x.x+1,x.y,!0,c),x.faceTop=!p||!p.collides,x.faceBottom=!f||!f.collides,x.faceLeft=!v||!v.collides,x.faceRight=!g||!g.collides):x.resetFaces())}}},33528:(s,o,i)=>{var r=new(i(26099));s.exports=function(h,a,u,l){var d=u.tilemapLayer,c=d.cullPaddingX,p=d.cullPaddingY,f=d.tilemap.tileToWorldXY(h,a,r,l,d);return f.x>l.worldView.x+d.scaleX*u.tileWidth*(-c-.5)&&f.x<l.worldView.right+d.scaleX*u.tileWidth*(c-.5)&&f.y>l.worldView.y+d.scaleY*u.tileHeight*(-p-1)&&f.y<l.worldView.bottom+d.scaleY*u.tileHeight*(p-.5)}},1785:(s,o,i)=>{var r=i(42573),h=i(7386),a=i(62991),u=i(23029);s.exports=function(l,d,c,p,f,v,g,y){g===void 0&&(g=!0);var m=h(l,d,c,p,null,y),x=[];m.forEach(function(M){var _=new u(M.layer,M.index,M.x,M.y,M.width,M.height,M.baseWidth,M.baseHeight);_.copy(M),x.push(_)});for(var b=f-l,w=v-d,T=0;T<x.length;T++){var S=x[T],C=S.x+b,E=S.y+w;a(C,E,y)&&y.data[E][C]&&(S.x=C,S.y=E,S.updatePixelXY(),y.data[E][C]=S)}g&&r(f-1,v-1,c+2,p+2,y),m.length=0,x.length=0}},78419:(s,o,i)=>{var r=i(62644),h=i(7386),a=i(27987);s.exports=function(u,l,d,c,p,f){d||(d={}),Array.isArray(u)||(u=[u]);var v=f.tilemapLayer;c||(c=v.scene),p||(p=c.cameras.main);var g,y=f.width,m=f.height,x=h(0,0,y,m,null,f),b=[],w=function(E,M,_){for(var O=0;O<_.length;O++){var k=_[O];E.hasOwnProperty(k)||(E[k]=M[k])}};for(g=0;g<x.length;g++){var T=x[g],S=r(d);if(u.indexOf(T.index)!==-1){var C=v.tileToWorldXY(T.x,T.y,void 0,p,f);S.x=C.x,S.y=C.y,w(S,T,["rotation","flipX","flipY","alpha","visible","tint"]),S.hasOwnProperty("origin")||(S.x+=.5*T.width,S.y+=.5*T.height),S.hasOwnProperty("useSpriteSheet")&&(S.key=T.tileset.image,S.frame=T.index-1),b.push(c.make.sprite(S))}}if(Array.isArray(l))for(g=0;g<u.length;g++)a(u[g],l[g],0,0,y,m,f);else if(l!==null)for(g=0;g<u.length;g++)a(u[g],l,0,0,y,m,f);return b}},19545:(s,o,i)=>{var r=i(87841),h=i(63448),a=i(56583),u=new r;s.exports=function(l,d){var c=l.tilemapLayer.tilemap,p=l.tilemapLayer,f=Math.floor(c.tileWidth*p.scaleX),v=Math.floor(c.tileHeight*p.scaleY),g=a(d.worldView.x-p.x,f,0,!0)-p.cullPaddingX,y=h(d.worldView.right-p.x,f,0,!0)+p.cullPaddingX,m=a(d.worldView.y-p.y,v,0,!0)-p.cullPaddingY,x=h(d.worldView.bottom-p.y,v,0,!0)+p.cullPaddingY;return u.setTo(g,m,y-g,x-m)}},30003:(s,o,i)=>{var r=i(19545),h=i(32483);s.exports=function(a,u,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var c=a.tilemapLayer,p=r(a,u);return(c.skipCull||c.scrollFactorX!==1||c.scrollFactorY!==1)&&(p.left=0,p.right=a.width,p.top=0,p.bottom=a.height),h(a,p,d,l),l}},35137:(s,o,i)=>{var r=i(7386),h=i(42573),a=i(20576);s.exports=function(u,l,d,c,p,f,v){for(var g=v.collideIndexes.indexOf(u)!==-1,y=r(l,d,c,p,null,v),m=0;m<y.length;m++)y[m].index=u,a(y[m],g);f&&h(l-1,d-1,c+2,p+2,v)}},40253:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p,f){return r(u,l,d,c,p,f).filter(h,a)}},52692:s=>{s.exports=function(o,i,r,h){i===void 0&&(i=0),r===void 0&&(r=!1);var a,u,l,d=0;if(r){for(u=h.height-1;u>=0;u--)for(a=h.width-1;a>=0;a--)if((l=h.data[u][a])&&l.index===o){if(d===i)return l;d+=1}}else for(u=0;u<h.height;u++)for(a=0;a<h.width;a++)if((l=h.data[u][a])&&l.index===o){if(d===i)return l;d+=1}return null}},66151:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p,f){return r(u,l,d,c,p,f).find(h,a)||null}},97560:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p,f){r(u,l,d,c,p,f).forEach(h,a)}},43305:(s,o,i)=>{var r=i(91907),h=i(30003),a=i(9474),u=i(14018),l=i(29747),d=i(54503);s.exports=function(c){return c===r.ORTHOGONAL?h:c===r.HEXAGONAL?a:c===r.STAGGERED?d:c===r.ISOMETRIC?u:l}},7423:(s,o,i)=>{var r=i(62991);s.exports=function(h,a,u,l){if(u===void 0&&(u=!1),r(h,a,l)){var d=l.data[a][h]||null;return d?d.index===-1?u?d:null:d:null}return null}},60540:(s,o,i)=>{var r=i(7423),h=new(i(26099));s.exports=function(a,u,l,d,c){return c.tilemapLayer.worldToTileXY(a,u,!0,h,d),r(h.x,h.y,l,c)}},55826:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l){var d=l.baseTileWidth,c=l.baseTileHeight,p=l.tilemapLayer,f=0,v=0;p&&(u||(u=p.scene.cameras.main),f=p.x+u.scrollX*(1-p.scrollFactorX),v=p.y+u.scrollY*(1-p.scrollFactorY),d*=p.scaleX,c*=p.scaleY);var g=f+h*d,y=v+a*c;return[new r(g,y),new r(g+d,y),new r(g+d,y+c),new r(g,y+c)]}},11758:(s,o,i)=>{var r=i(91907),h=i(27229),a=i(29747),u=i(55826);s.exports=function(l){return l===r.ORTHOGONAL?u:l===r.ISOMETRIC?a:l===r.HEXAGONAL?h:(r.STAGGERED,a)}},39167:(s,o,i)=>{var r=i(91907),h=i(29747),a=i(97281);s.exports=function(u){return u===r.ORTHOGONAL?a:h}},62e3:(s,o,i)=>{var r=i(91907),h=i(19951),a=i(14127),u=i(29747),l=i(97202),d=i(70326);s.exports=function(c){return c===r.ORTHOGONAL?d:c===r.ISOMETRIC?a:c===r.HEXAGONAL?h:c===r.STAGGERED?l:u}},5984:(s,o,i)=>{var r=i(91907),h=i(29747),a=i(28054),u=i(29650);s.exports=function(l){return l===r.ORTHOGONAL?u:l===r.STAGGERED?a:h}},7386:(s,o,i)=>{var r=i(95540);s.exports=function(h,a,u,l,d,c){h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=c.width),l===void 0&&(l=c.height),d||(d={});var p=r(d,"isNotEmpty",!1),f=r(d,"isColliding",!1),v=r(d,"hasInterestingFace",!1);h<0&&(u+=h,h=0),a<0&&(l+=a,a=0),h+u>c.width&&(u=Math.max(c.width-h,0)),a+l>c.height&&(l=Math.max(c.height-a,0));for(var g=[],y=a;y<a+l;y++)for(var m=h;m<h+u;m++){var x=c.data[y][m];if(x!==null){if(p&&x.index===-1||f&&!x.collides||v&&!x.hasInterestingFace)continue;g.push(x)}}return g}},91141:(s,o,i)=>{var r=i(55738),h=i(7386),a=i(91865),u=i(29747),l=i(26099),d=function(v,g){return a.RectangleToTriangle(g,v)},c=new l,p=new l,f=new l;s.exports=function(v,g,y,m){if(v===void 0)return[];var x=u;v instanceof r.Circle?x=a.CircleToRectangle:v instanceof r.Rectangle?x=a.RectangleToRectangle:v instanceof r.Triangle?x=d:v instanceof r.Line&&(x=a.LineToRectangle),m.tilemapLayer.worldToTileXY(v.left,v.top,!0,p,y);var b=p.x,w=p.y;m.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,f,y);var T=Math.ceil(f.x),S=Math.ceil(f.y),C=Math.max(T-b,1),E=Math.max(S-w,1),M=h(b,w,C,E,g,m),_=m.tileWidth,O=m.tileHeight;m.tilemapLayer&&(_*=m.tilemapLayer.scaleX,O*=m.tilemapLayer.scaleY);for(var k=[],P=new r.Rectangle(0,0,_,O),A=0;A<M.length;A++){var L=M[A];m.tilemapLayer.tileToWorldXY(L.x,L.y,c,y),P.x=c.x,P.y=c.y,x(v,P)&&k.push(L)}return k}},96523:(s,o,i)=>{var r=i(7386),h=i(26099),a=new h,u=new h;s.exports=function(l,d,c,p,f,v,g){var y=g.tilemapLayer.tilemap._convert.WorldToTileXY;y(l,d,!0,a,v,g);var m=a.x,x=a.y;y(l+c,d+p,!1,u,v,g);var b=Math.ceil(u.x),w=Math.ceil(u.y);return r(m,x,b-m,w-x,f,g)}},96113:(s,o,i)=>{var r=i(91907),h=i(20242),a=i(10095);s.exports=function(u){return u===r.ORTHOGONAL?a:h}},16926:(s,o,i)=>{var r=i(91907),h=i(86625),a=i(96897),u=i(29747),l=i(15108),d=i(85896);s.exports=function(c){return c===r.ORTHOGONAL?d:c===r.ISOMETRIC?a:c===r.HEXAGONAL?h:c===r.STAGGERED?l:u}},55762:(s,o,i)=>{var r=i(91907),h=i(20242),a=i(51900),u=i(63288);s.exports=function(l){return l===r.ORTHOGONAL?u:l===r.STAGGERED?a:h}},45091:(s,o,i)=>{var r=i(62991);s.exports=function(h,a,u){if(r(h,a,u)){var l=u.data[a][h];return l!==null&&l.index>-1}return!1}},24152:(s,o,i)=>{var r=i(45091),h=new(i(26099));s.exports=function(a,u,l,d){d.tilemapLayer.worldToTileXY(a,u,!0,h,l);var c=h.x,p=h.y;return r(c,p,d)}},90454:(s,o,i)=>{var r=i(63448),h=i(56583);s.exports=function(a,u){var l,d,c,p,f=a.tilemapLayer.tilemap,v=a.tilemapLayer,g=Math.floor(f.tileWidth*v.scaleX),y=Math.floor(f.tileHeight*v.scaleY),m=a.hexSideLength;if(a.staggerAxis==="y"){var x=(y-m)/2+m;l=h(u.worldView.x-v.x,g,0,!0)-v.cullPaddingX,d=r(u.worldView.right-v.x,g,0,!0)+v.cullPaddingX,c=h(u.worldView.y-v.y,x,0,!0)-v.cullPaddingY,p=r(u.worldView.bottom-v.y,x,0,!0)+v.cullPaddingY}else{var b=(g-m)/2+m;l=h(u.worldView.x-v.x,b,0,!0)-v.cullPaddingX,d=r(u.worldView.right-v.x,b,0,!0)+v.cullPaddingX,c=h(u.worldView.y-v.y,y,0,!0)-v.cullPaddingY,p=r(u.worldView.bottom-v.y,y,0,!0)+v.cullPaddingY}return{left:l,right:d,top:c,bottom:p}}},9474:(s,o,i)=>{var r=i(90454),h=i(32483);s.exports=function(a,u,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var c=a.tilemapLayer,p=r(a,u);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(p.left=0,p.right=a.width,p.top=0,p.bottom=a.height),h(a,p,d,l),l}},27229:(s,o,i)=>{var r=i(19951),h=i(26099),a=new h;s.exports=function(u,l,d,c){var p=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer;v&&(p*=v.scaleX,f*=v.scaleY);var g,y,m=r(u,l,a,d,c),x=[],b=.5773502691896257;c.staggerAxis==="y"?(g=b*p,y=f/2):(g=p/2,y=b*f);for(var w=0;w<6;w++){var T=2*Math.PI*(.5-w)/6;x.push(new h(m.x+g*Math.cos(T),m.y+y*Math.sin(T)))}return x}},19951:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d){u||(u=new r);var c=d.baseTileWidth,p=d.baseTileHeight,f=d.tilemapLayer,v=0,g=0;f&&(l||(l=f.scene.cameras.main),v=f.x+l.scrollX*(1-f.scrollFactorX),g=f.y+l.scrollY*(1-f.scrollFactorY),c*=f.scaleX,p*=f.scaleY);var y,m,x=c/2,b=p/2;return d.staggerAxis==="y"?(y=v+c*h+c,m=g+1.5*a*b+b,a%2==0&&(this.staggerIndex==="odd"?y-=x:y+=x)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(y=v+1.5*h*x+x,m=g+p*h+p,h%2==0&&(this.staggerIndex==="odd"?m-=b:m+=b)),u.set(y,m)}},86625:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d,c){l||(l=new r);var p=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer;v&&(d||(d=v.scene.cameras.main),h-=v.x+d.scrollX*(1-v.scrollFactorX),a-=v.y+d.scrollY*(1-v.scrollFactorY),p*=v.scaleX,f*=v.scaleY);var g,y,m,x,b,w=.5773502691896257,T=-.3333333333333333,S=.6666666666666666,C=p/2,E=f/2;c.staggerAxis==="y"?(m=w*(g=(h-C)/(w*p))+T*(y=(a-E)/E),x=0*g+S*y):(m=T*(g=(h-C)/C)+w*(y=(a-E)/(w*f)),x=S*g+0*y),b=-m-x;var M,_=Math.round(m),O=Math.round(x),k=Math.round(b),P=Math.abs(_-m),A=Math.abs(O-x),L=Math.abs(k-b);P>A&&P>L?_=-O-k:A>L&&(O=-_-k);var D=O;return M=c.staggerIndex==="odd"?D%2==0?O/2+_:O/2+_-.5:D%2==0?O/2+_:O/2+_+.5,l.set(M,D)}},62991:s=>{s.exports=function(o,i,r){return o>=0&&o<r.width&&i>=0&&i<r.height}},14018:(s,o,i)=>{var r=i(33528);s.exports=function(h,a,u,l){u===void 0&&(u=[]),l===void 0&&(l=0),u.length=0;var d,c,p,f=h.tilemapLayer,v=h.data,g=h.width,y=h.height,m=f.skipCull,x=g,b=y;if(l===0)for(c=0;c<b;c++)for(d=0;d<x;d++)(p=v[c][d])&&p.index!==-1&&p.visible&&p.alpha!==0&&(m||r(d,c,h,a))&&u.push(p);else if(l===1)for(c=0;c<b;c++)for(d=x;d>=0;d--)(p=v[c][d])&&p.index!==-1&&p.visible&&p.alpha!==0&&(m||r(d,c,h,a))&&u.push(p);else if(l===2)for(c=b;c>=0;c--)for(d=0;d<x;d++)(p=v[c][d])&&p.index!==-1&&p.visible&&p.alpha!==0&&(m||r(d,c,h,a))&&u.push(p);else if(l===3)for(c=b;c>=0;c--)for(d=x;d>=0;d--)(p=v[c][d])&&p.index!==-1&&p.visible&&p.alpha!==0&&(m||r(d,c,h,a))&&u.push(p);return f.tilesDrawn=u.length,f.tilesTotal=g*y,u}},14127:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d){u||(u=new r);var c=d.baseTileWidth,p=d.baseTileHeight,f=d.tilemapLayer,v=0,g=0;f&&(l||(l=f.scene.cameras.main),v=f.x+l.scrollX*(1-f.scrollFactorX),c*=f.scaleX,g=f.y+l.scrollY*(1-f.scrollFactorY),p*=f.scaleY);var y=v+c/2*(h-a),m=g+(h+a)*(p/2);return u.set(y,m)}},96897:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d,c,p){l||(l=new r);var f=c.baseTileWidth,v=c.baseTileHeight,g=c.tilemapLayer;g&&(d||(d=g.scene.cameras.main),a-=g.y+d.scrollY*(1-g.scrollFactorY),v*=g.scaleY,h-=g.x+d.scrollX*(1-g.scrollFactorX),f*=g.scaleX);var y=f/2,m=v/2;p||(a-=v);var x=.5*((h-=y)/y+a/m),b=.5*(-h/y+a/m);return u&&(x=Math.floor(x),b=Math.floor(b)),l.set(x,b)}},71558:(s,o,i)=>{var r=i(23029),h=i(62991),a=i(72023),u=i(20576);s.exports=function(l,d,c,p,f){if(p===void 0&&(p=!0),!h(d,c,f))return null;var v,g=f.data[c][d],y=g&&g.collides;l instanceof r?(f.data[c][d]===null&&(f.data[c][d]=new r(f,l.index,d,c,f.tileWidth,f.tileHeight)),f.data[c][d].copy(l)):(v=l,f.data[c][d]===null?f.data[c][d]=new r(f,v,d,c,f.tileWidth,f.tileHeight):f.data[c][d].index=v);var m=f.data[c][d],x=f.collideIndexes.indexOf(m.index)!==-1;if((v=l instanceof r?l.index:l)===-1)m.width=f.tileWidth,m.height=f.tileHeight;else{var b=f.tilemapLayer.tilemap,w=b.tiles[v][2],T=b.tilesets[w];m.width=T.tileWidth,m.height=T.tileHeight}return u(m,x),p&&y!==m.collides&&a(d,c,f),m}},26303:(s,o,i)=>{var r=i(71558),h=new(i(26099));s.exports=function(a,u,l,d,c,p){return p.tilemapLayer.worldToTileXY(u,l,!0,h,c,p),r(a,h.x,h.y,d,p)}},14051:(s,o,i)=>{var r=i(42573),h=i(71558);s.exports=function(a,u,l,d,c){if(d===void 0&&(d=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var p=a.length,f=a[0].length,v=0;v<p;v++)for(var g=0;g<f;g++){var y=a[v][g];h(y,u+g,l+v,!1,c)}d&&r(u-1,l-1,f+2,p+2,c)}},77389:(s,o,i)=>{var r=i(7386),h=i(26546);s.exports=function(a,u,l,d,c,p){var f,v=r(a,u,l,d,{},p);if(!c)for(c=[],f=0;f<v.length;f++)c.indexOf(v[f].index)===-1&&c.push(v[f].index);for(f=0;f<v.length;f++)v[f].index=h(c)}},63557:(s,o,i)=>{var r=i(23029),h=i(62991),a=i(72023);s.exports=function(u,l,d,c,p){if(d===void 0&&(d=!0),c===void 0&&(c=!0),!h(u,l,p))return null;var f=p.data[l][u];return f?(p.data[l][u]=d?null:new r(p,-1,u,l,p.tileWidth,p.tileHeight),c&&f&&f.collides&&a(u,l,p),f):null}},94178:(s,o,i)=>{var r=i(63557),h=new(i(26099));s.exports=function(a,u,l,d,c,p){return p.tilemapLayer.worldToTileXY(a,u,!0,h,c,p),r(h.x,h.y,l,d,p)}},15533:(s,o,i)=>{var r=i(7386),h=i(3956),a=new h(105,210,231,150),u=new h(243,134,48,200),l=new h(40,39,37,150);s.exports=function(d,c,p){c===void 0&&(c={});var f=c.tileColor!==void 0?c.tileColor:a,v=c.collidingTileColor!==void 0?c.collidingTileColor:u,g=c.faceColor!==void 0?c.faceColor:l,y=r(0,0,p.width,p.height,null,p);d.translateCanvas(p.tilemapLayer.x,p.tilemapLayer.y),d.scaleCanvas(p.tilemapLayer.scaleX,p.tilemapLayer.scaleY);for(var m=0;m<y.length;m++){var x=y[m],b=x.width,w=x.height,T=x.pixelX,S=x.pixelY,C=x.collides?v:f;C!==null&&(d.fillStyle(C.color,C.alpha/255),d.fillRect(T,S,b,w)),T+=1,S+=1,b-=2,w-=2,g!==null&&(d.lineStyle(1,g.color,g.alpha/255),x.faceTop&&d.lineBetween(T,S,T+b,S),x.faceRight&&d.lineBetween(T+b,S,T+b,S+w),x.faceBottom&&d.lineBetween(T,S+w,T+b,S+w),x.faceLeft&&d.lineBetween(T,S,T,S+w))}}},27987:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p){for(var f=r(u,l,d,c,null,p),v=0;v<f.length;v++)f[v]&&f[v].index===h&&(f[v].index=a)}},32483:s=>{s.exports=function(o,i,r,h){var a,u,l,d=o.data,c=o.width,p=o.height,f=o.tilemapLayer,v=Math.max(0,i.left),g=Math.min(c,i.right),y=Math.max(0,i.top),m=Math.min(p,i.bottom);if(r===0)for(u=y;u<m;u++)for(a=v;d[u]&&a<g;a++)(l=d[u][a])&&l.index!==-1&&l.visible&&l.alpha!==0&&h.push(l);else if(r===1)for(u=y;u<m;u++)for(a=g;d[u]&&a>=v;a--)(l=d[u][a])&&l.index!==-1&&l.visible&&l.alpha!==0&&h.push(l);else if(r===2)for(u=m;u>=y;u--)for(a=v;d[u]&&a<g;a++)(l=d[u][a])&&l.index!==-1&&l.visible&&l.alpha!==0&&h.push(l);else if(r===3)for(u=m;u>=y;u--)for(a=g;d[u]&&a>=v;a--)(l=d[u][a])&&l.index!==-1&&l.visible&&l.alpha!==0&&h.push(l);return f.tilesDrawn=h.length,f.tilesTotal=c*p,h}},57068:(s,o,i)=>{var r=i(20576),h=i(42573),a=i(9589);s.exports=function(u,l,d,c,p){l===void 0&&(l=!0),d===void 0&&(d=!0),p===void 0&&(p=!0),Array.isArray(u)||(u=[u]);for(var f=0;f<u.length;f++)a(u[f],l,c);if(p)for(var v=0;v<c.height;v++)for(var g=0;g<c.width;g++){var y=c.data[v][g];y&&u.indexOf(y.index)!==-1&&r(y,l)}d&&h(0,0,c.width,c.height,c)}},37266:(s,o,i)=>{var r=i(20576),h=i(42573),a=i(9589);s.exports=function(u,l,d,c,p,f){if(d===void 0&&(d=!0),c===void 0&&(c=!0),f===void 0&&(f=!0),!(u>l)){for(var v=u;v<=l;v++)a(v,d,p);if(f)for(var g=0;g<p.height;g++)for(var y=0;y<p.width;y++){var m=p.data[g][y];m&&m.index>=u&&m.index<=l&&r(m,d)}c&&h(0,0,p.width,p.height,p)}}},75661:(s,o,i)=>{var r=i(20576),h=i(42573),a=i(9589);s.exports=function(u,l,d,c){l===void 0&&(l=!0),d===void 0&&(d=!0),Array.isArray(u)||(u=[u]);for(var p=0;p<c.height;p++)for(var f=0;f<c.width;f++){var v=c.data[p][f];v&&u.indexOf(v.index)===-1&&(r(v,l),a(v.index,l,c))}d&&h(0,0,c.width,c.height,c)}},64740:(s,o,i)=>{var r=i(20576),h=i(42573),a=i(97022);s.exports=function(u,l,d,c){l===void 0&&(l=!0),d===void 0&&(d=!0);for(var p=0;p<c.height;p++)for(var f=0;f<c.width;f++){var v=c.data[p][f];if(v){for(var g in u)if(a(v.properties,g)){var y=u[g];Array.isArray(y)||(y=[y]);for(var m=0;m<y.length;m++)v.properties[g]===y[m]&&r(v,l)}}}d&&h(0,0,c.width,c.height,c)}},63307:(s,o,i)=>{var r=i(20576),h=i(42573);s.exports=function(a,u,l){a===void 0&&(a=!0),u===void 0&&(u=!0);for(var d=0;d<l.height;d++)for(var c=0;c<l.width;c++){var p=l.data[d][c];if(p){var f=p.getCollisionGroup();f&&f.objects&&f.objects.length>0&&r(p,a)}}u&&h(0,0,l.width,l.height,l)}},9589:s=>{s.exports=function(o,i,r){var h=r.collideIndexes.indexOf(o);i&&h===-1?r.collideIndexes.push(o):i||h===-1||r.collideIndexes.splice(h,1)}},20576:s=>{s.exports=function(o,i){i?o.setCollision(!0,!0,!0,!0,!1):o.resetCollision(!1)}},79583:s=>{s.exports=function(o,i,r,h){if(typeof o=="number")h.callbacks[o]=i!==null?{callback:i,callbackContext:r}:void 0;else for(var a=0,u=o.length;a<u;a++)h.callbacks[o[a]]=i!==null?{callback:i,callbackContext:r}:void 0}},93254:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p){for(var f=r(h,a,u,l,null,p),v=0;v<f.length;v++)f[v].setCollisionCallback(d,c)}},32903:(s,o,i)=>{var r=i(7386),h=i(33680);s.exports=function(a,u,l,d,c){var p=r(a,u,l,d,null,c),f=p.map(function(g){return g.index});h(f);for(var v=0;v<p.length;v++)p[v].index=f[v]}},61325:(s,o,i)=>{var r=i(63448),h=i(56583);s.exports=function(a,u){var l=a.tilemapLayer.tilemap,d=a.tilemapLayer,c=Math.floor(l.tileWidth*d.scaleX),p=Math.floor(l.tileHeight*d.scaleY);return{left:h(u.worldView.x-d.x,c,0,!0)-d.cullPaddingX,right:r(u.worldView.right-d.x,c,0,!0)+d.cullPaddingX,top:h(u.worldView.y-d.y,p/2,0,!0)-d.cullPaddingY,bottom:r(u.worldView.bottom-d.y,p/2,0,!0)+d.cullPaddingY}}},54503:(s,o,i)=>{var r=i(61325),h=i(32483);s.exports=function(a,u,l,d){l===void 0&&(l=[]),d===void 0&&(d=0),l.length=0;var c=a.tilemapLayer,p=r(a,u);return c.skipCull&&c.scrollFactorX===1&&c.scrollFactorY===1&&(p.left=0,p.right=a.width,p.top=0,p.bottom=a.height),h(a,p,d,l),l}},97202:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d){u||(u=new r);var c=d.baseTileWidth,p=d.baseTileHeight,f=d.tilemapLayer,v=0,g=0;f&&(l||(l=f.scene.cameras.main),v=f.x+l.scrollX*(1-f.scrollFactorX),c*=f.scaleX,g=f.y+l.scrollY*(1-f.scrollFactorY),p*=f.scaleY);var y=v+h*c+a%2*(c/2),m=g+a*(p/2);return u.set(y,m)}},28054:s=>{s.exports=function(o,i,r){var h=r.baseTileHeight,a=r.tilemapLayer,u=0;return a&&(i===void 0&&(i=a.scene.cameras.main),u=a.y+i.scrollY*(1-a.scrollFactorY),h*=a.scaleY),u+o*(h/2)+h}},15108:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d,c){l||(l=new r);var p=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer;v&&(d||(d=v.scene.cameras.main),a-=v.y+d.scrollY*(1-v.scrollFactorY),f*=v.scaleY,h-=v.x+d.scrollX*(1-v.scrollFactorX),p*=v.scaleX);var g=u?Math.floor(a/(f/2)):a/(f/2),y=u?Math.floor((h+g%2*.5*p)/p):(h+g%2*.5*p)/p;return l.set(y,g)}},51900:s=>{s.exports=function(o,i,r,h){var a=h.baseTileHeight,u=h.tilemapLayer;return u&&(r||(r=u.scene.cameras.main),o-=u.y+r.scrollY*(1-u.scrollFactorY),a*=u.scaleY),i?Math.floor(o/(a/2)):o/(a/2)}},86560:(s,o,i)=>{var r=i(7386);s.exports=function(h,a,u,l,d,c,p){for(var f=r(u,l,d,c,null,p),v=0;v<f.length;v++)f[v]&&(f[v].index===h?f[v].index=a:f[v].index===a&&(f[v].index=h))}},97281:s=>{s.exports=function(o,i,r){var h=r.baseTileWidth,a=r.tilemapLayer,u=0;return a&&(i||(i=a.scene.cameras.main),u=a.x+i.scrollX*(1-a.scrollFactorX),h*=a.scaleX),u+o*h}},70326:(s,o,i)=>{var r=i(97281),h=i(29650),a=i(26099);s.exports=function(u,l,d,c,p){return d||(d=new a(0,0)),d.x=r(u,c,p),d.y=h(l,c,p),d}},29650:s=>{s.exports=function(o,i,r){var h=r.baseTileHeight,a=r.tilemapLayer,u=0;return a&&(i||(i=a.scene.cameras.main),u=a.y+i.scrollY*(1-a.scrollFactorY),h*=a.scaleY),u+o*h}},77366:(s,o,i)=>{var r=i(7386),h=i(75508);s.exports=function(a,u,l,d,c,p){if(c){var f,v=r(a,u,l,d,null,p),g=0;for(f=0;f<c.length;f++)g+=c[f].weight;if(!(g<=0))for(f=0;f<v.length;f++){for(var y=h.RND.frac()*g,m=0,x=-1,b=0;b<c.length;b++)if(y<=(m+=c[b].weight)){var w=c[b].index;x=Array.isArray(w)?w[Math.floor(h.RND.frac()*w.length)]:w;break}v[f].index=x}}}},10095:(s,o,i)=>{var r=i(85896),h=new(i(26099));s.exports=function(a,u,l,d){return r(a,0,u,h,l,d),h.x}},85896:(s,o,i)=>{var r=i(26099);s.exports=function(h,a,u,l,d,c){u===void 0&&(u=!0),l||(l=new r);var p=c.baseTileWidth,f=c.baseTileHeight,v=c.tilemapLayer;v&&(d||(d=v.scene.cameras.main),h-=v.x+d.scrollX*(1-v.scrollFactorX),a-=v.y+d.scrollY*(1-v.scrollFactorY),p*=v.scaleX,f*=v.scaleY);var g=h/p,y=a/f;return u&&(g=Math.floor(g),y=Math.floor(y)),l.set(g,y)}},63288:(s,o,i)=>{var r=i(85896),h=new(i(26099));s.exports=function(a,u,l,d){return r(0,a,u,h,l,d),h.y}},81086:(s,o,i)=>{s.exports={CalculateFacesAt:i(72023),CalculateFacesWithin:i(42573),CheckIsoBounds:i(33528),Copy:i(1785),CreateFromTiles:i(78419),CullBounds:i(19545),CullTiles:i(30003),Fill:i(35137),FilterTiles:i(40253),FindByIndex:i(52692),FindTile:i(66151),ForEachTile:i(97560),GetCullTilesFunction:i(43305),GetTileAt:i(7423),GetTileAtWorldXY:i(60540),GetTileCorners:i(55826),GetTileCornersFunction:i(11758),GetTilesWithin:i(7386),GetTilesWithinShape:i(91141),GetTilesWithinWorldXY:i(96523),GetTileToWorldXFunction:i(39167),GetTileToWorldXYFunction:i(62e3),GetTileToWorldYFunction:i(5984),GetWorldToTileXFunction:i(96113),GetWorldToTileXYFunction:i(16926),GetWorldToTileYFunction:i(55762),HasTileAt:i(45091),HasTileAtWorldXY:i(24152),HexagonalCullBounds:i(90454),HexagonalCullTiles:i(9474),HexagonalGetTileCorners:i(27229),HexagonalTileToWorldXY:i(19951),HexagonalWorldToTileXY:i(86625),IsInLayerBounds:i(62991),IsometricCullTiles:i(14018),IsometricTileToWorldXY:i(14127),IsometricWorldToTileXY:i(96897),PutTileAt:i(71558),PutTileAtWorldXY:i(26303),PutTilesAt:i(14051),Randomize:i(77389),RemoveTileAt:i(63557),RemoveTileAtWorldXY:i(94178),RenderDebug:i(15533),ReplaceByIndex:i(27987),RunCull:i(32483),SetCollision:i(57068),SetCollisionBetween:i(37266),SetCollisionByExclusion:i(75661),SetCollisionByProperty:i(64740),SetCollisionFromCollisionGroup:i(63307),SetLayerCollisionIndex:i(9589),SetTileCollision:i(20576),SetTileIndexCallback:i(79583),SetTileLocationCallback:i(93254),Shuffle:i(32903),StaggeredCullBounds:i(61325),StaggeredCullTiles:i(54503),StaggeredTileToWorldXY:i(97202),StaggeredTileToWorldY:i(28054),StaggeredWorldToTileXY:i(15108),StaggeredWorldToTileY:i(51900),SwapByIndex:i(86560),TileToWorldX:i(97281),TileToWorldXY:i(70326),TileToWorldY:i(29650),WeightedRandomize:i(77366),WorldToTileX:i(10095),WorldToTileXY:i(85896),WorldToTileY:i(63288)}},91907:s=>{s.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(s,o,i)=>{var r={ORIENTATION:i(91907)};s.exports=r},62501:(s,o,i)=>{var r=i(79291),h=i(21829),a={Components:i(81086),Parsers:i(57442),Formats:i(80341),ImageCollection:i(16536),ParseToTilemap:i(31989),Tile:i(23029),Tilemap:i(49075),TilemapCreator:i(45939),TilemapFactory:i(46029),Tileset:i(33629),TilemapLayer:i(20442),Orientation:i(91907),LayerData:i(14977),MapData:i(87010),ObjectLayer:i(48700)};a=r(!1,a,h.ORIENTATION),s.exports=a},14977:(s,o,i)=>{var r=i(83419),h=i(91907),a=i(95540),u=new r({initialize:function(l){l===void 0&&(l={}),this.name=a(l,"name","layer"),this.id=a(l,"id",0),this.x=a(l,"x",0),this.y=a(l,"y",0),this.width=a(l,"width",0),this.height=a(l,"height",0),this.tileWidth=a(l,"tileWidth",0),this.tileHeight=a(l,"tileHeight",0),this.baseTileWidth=a(l,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(l,"baseTileHeight",this.tileHeight),this.orientation=a(l,"orientation",h.ORTHOGONAL),this.widthInPixels=a(l,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(l,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(l,"alpha",1),this.visible=a(l,"visible",!0),this.properties=a(l,"properties",[]),this.indexes=a(l,"indexes",[]),this.collideIndexes=a(l,"collideIndexes",[]),this.callbacks=a(l,"callbacks",[]),this.bodies=a(l,"bodies",[]),this.data=a(l,"data",[]),this.tilemapLayer=a(l,"tilemapLayer",null),this.hexSideLength=a(l,"hexSideLength",0),this.staggerAxis=a(l,"staggerAxis","y"),this.staggerIndex=a(l,"staggerIndex","odd")}});s.exports=u},87010:(s,o,i)=>{var r=i(83419),h=i(91907),a=i(95540),u=new r({initialize:function(l){l===void 0&&(l={}),this.name=a(l,"name","map"),this.width=a(l,"width",0),this.height=a(l,"height",0),this.infinite=a(l,"infinite",!1),this.tileWidth=a(l,"tileWidth",0),this.tileHeight=a(l,"tileHeight",0),this.widthInPixels=a(l,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(l,"heightInPixels",this.height*this.tileHeight),this.format=a(l,"format",null),this.orientation=a(l,"orientation",h.ORTHOGONAL),this.renderOrder=a(l,"renderOrder","right-down"),this.version=a(l,"version","1"),this.properties=a(l,"properties",{}),this.layers=a(l,"layers",[]),this.images=a(l,"images",[]),this.objects=a(l,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=a(l,"collision",{}),this.tilesets=a(l,"tilesets",[]),this.imageCollections=a(l,"imageCollections",[]),this.tiles=a(l,"tiles",[]),this.hexSideLength=a(l,"hexSideLength",0),this.staggerAxis=a(l,"staggerAxis","y"),this.staggerIndex=a(l,"staggerIndex","odd")}});s.exports=u},48700:(s,o,i)=>{var r=i(83419),h=i(95540),a=new r({initialize:function(u){u===void 0&&(u={}),this.name=h(u,"name","object layer"),this.id=h(u,"id",0),this.opacity=h(u,"opacity",1),this.properties=h(u,"properties",{}),this.propertyTypes=h(u,"propertytypes",{}),this.type=h(u,"type","objectgroup"),this.visible=h(u,"visible",!0),this.objects=h(u,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});s.exports=a},6641:(s,o,i)=>{var r=i(91907);s.exports=function(h){return(h=h.toLowerCase())==="isometric"?r.ISOMETRIC:h==="staggered"?r.STAGGERED:h==="hexagonal"?r.HEXAGONAL:r.ORTHOGONAL}},46177:(s,o,i)=>{var r=i(80341),h=i(2342),a=i(82593),u=i(46594),l=i(87021);s.exports=function(d,c,p,f,v,g){var y;switch(c){case r.ARRAY_2D:y=h(d,p,f,v,g);break;case r.CSV:y=a(d,p,f,v,g);break;case r.TILED_JSON:y=u(d,p,g);break;case r.WELTMEISTER:y=l(d,p,g);break;default:console.warn("Unrecognized tilemap data format: "+c),y=null}return y}},2342:(s,o,i)=>{var r=i(80341),h=i(14977),a=i(87010),u=i(23029);s.exports=function(l,d,c,p,f){for(var v=new h({tileWidth:c,tileHeight:p}),g=new a({name:l,tileWidth:c,tileHeight:p,format:r.ARRAY_2D,layers:[v]}),y=[],m=d.length,x=0,b=0;b<d.length;b++){y[b]=[];for(var w=d[b],T=0;T<w.length;T++){var S=parseInt(w[T],10);isNaN(S)||S===-1?y[b][T]=f?null:new u(v,-1,T,b,c,p):y[b][T]=new u(v,S,T,b,c,p)}x===0&&(x=w.length)}return g.width=v.width=x,g.height=v.height=m,g.widthInPixels=v.widthInPixels=x*c,g.heightInPixels=v.heightInPixels=m*p,v.data=y,g}},82593:(s,o,i)=>{var r=i(80341),h=i(2342);s.exports=function(a,u,l,d,c){var p=u.trim().split(`
`).map(function(v){return v.split(",")}),f=h(a,p,l,d,c);return f.format=r.CSV,f}},6656:(s,o,i)=>{var r=i(14977),h=i(23029);s.exports=function(a,u){for(var l=[],d=0;d<a.layer.length;d++){for(var c=a.layer[d],p=new r({name:c.name,width:c.width,height:c.height,tileWidth:c.tilesize,tileHeight:c.tilesize,visible:c.visible===1}),f=[],v=[],g=0;g<c.data.length;g++){for(var y=0;y<c.data[g].length;y++){var m,x=c.data[g][y]-1;m=x>-1?new h(p,x,y,g,c.tilesize,c.tilesize):u?null:new h(p,-1,y,g,c.tilesize,c.tilesize),f.push(m)}v.push(f),f=[]}p.data=v,l.push(p)}return l}},96483:(s,o,i)=>{var r=i(33629);s.exports=function(h){for(var a=[],u=[],l=0;l<h.layer.length;l++){var d=h.layer[l],c=d.tilesetName;c!==""&&u.indexOf(c)===-1&&(u.push(c),a.push(new r(c,0,d.tilesize,d.tilesize,0,0)))}return a}},87021:(s,o,i)=>{var r=i(80341),h=i(87010),a=i(6656),u=i(96483);s.exports=function(l,d,c){if(d.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+l),null;for(var p=0,f=0,v=0;v<d.layer.length;v++)d.layer[v].width>p&&(p=d.layer[v].width),d.layer[v].height>f&&(f=d.layer[v].height);var g=new h({width:p,height:f,name:l,tileWidth:d.layer[0].tilesize,tileHeight:d.layer[0].tilesize,format:r.WELTMEISTER});return g.layers=a(d,c),g.tilesets=u(d),g}},52833:(s,o,i)=>{s.exports={ParseTileLayers:i(6656),ParseTilesets:i(96483),ParseWeltmeister:i(87021)}},57442:(s,o,i)=>{s.exports={FromOrientationString:i(6641),Parse:i(46177),Parse2DArray:i(2342),ParseCSV:i(82593),Impact:i(52833),Tiled:i(96761)}},51233:(s,o,i)=>{var r=i(79291);s.exports=function(h){for(var a,u,l,d,c,p=0;p<h.layers.length;p++){a=h.layers[p],d=null;for(var f=0;f<a.data.length;f++){c=a.data[f];for(var v=0;v<c.length;v++)(u=c[v])===null||u.index<0||(l=h.tiles[u.index][2],d=h.tilesets[l],u.width=d.tileWidth,u.height=d.tileHeight,d.tileProperties&&d.tileProperties[u.index-d.firstgid]&&(u.properties=r(u.properties,d.tileProperties[u.index-d.firstgid])))}}}},41868:s=>{s.exports=function(o){for(var i=window.atob(o),r=i.length,h=new Array(r/4),a=0;a<r;a+=4)h[a/4]=(i.charCodeAt(a)|i.charCodeAt(a+1)<<8|i.charCodeAt(a+2)<<16|i.charCodeAt(a+3)<<24)>>>0;return h}},84101:(s,o,i)=>{var r=i(33629);s.exports=function(h){var a,u,l=[];for(a=0;a<h.imageCollections.length;a++)for(var d=h.imageCollections[a],c=d.images,p=0;p<c.length;p++){var f=c[p];(u=new r(f.image,f.gid,d.imageWidth,d.imageHeight,0,0)).updateTileData(d.imageWidth,d.imageHeight),h.tilesets.push(u)}for(a=0;a<h.tilesets.length;a++)for(var v=(u=h.tilesets[a]).tileMargin,g=u.tileMargin,y=0,m=0,x=0,b=u.firstgid;b<u.firstgid+u.total&&(l[b]=[v,g,a],v+=u.tileWidth+u.tileSpacing,++y!==u.total)&&(++m!==u.columns||(v=u.tileMargin,g+=u.tileHeight+u.tileSpacing,m=0,++x!==u.rows));b++);return l}},79677:(s,o,i)=>{var r=i(95540);s.exports=function(h,a,u){if(!a)return{i:0,layers:h.layers,name:"",opacity:1,visible:!0,x:0,y:0};var l=a.x+r(a,"startx",0)*h.tilewidth+r(a,"offsetx",0),d=a.y+r(a,"starty",0)*h.tileheight+r(a,"offsety",0);return{i:0,layers:a.layers,name:u.name+a.name+"/",opacity:u.opacity*a.opacity,visible:u.visible&&a.visible,x:u.x+l,y:u.y+d}}},29920:s=>{s.exports=function(o){var i=!!(2147483648&o),r=!!(1073741824&o),h=!!(536870912&o);o&=536870911;var a=0,u=!1;return i&&r&&h?(a=Math.PI/2,u=!0):i&&r&&!h?(a=Math.PI,u=!1):i&&!r&&h?(a=Math.PI/2,u=!1):!i||r||h?!i&&r&&h?(a=3*Math.PI/2,u=!1):i||!r||h?i||r||!h?i||r||h||(a=0,u=!1):(a=3*Math.PI/2,u=!0):(a=Math.PI,u=!0):(a=0,u=!0),{gid:o,flippedHorizontal:i,flippedVertical:r,flippedAntiDiagonal:h,rotation:a,flipped:u}}},12635:(s,o,i)=>{var r=i(95540),h=i(79677);s.exports=function(a){for(var u=[],l=[],d=h(a);d.i<d.layers.length||l.length>0;)if(d.i>=d.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=l.pop()}else{var c=d.layers[d.i];if(d.i++,c.type==="imagelayer"){var p=r(c,"offsetx",0)+r(c,"startx",0),f=r(c,"offsety",0)+r(c,"starty",0);u.push({name:d.name+c.name,image:c.image,x:d.x+p+c.x,y:d.y+f+c.y,alpha:d.opacity*c.opacity,visible:d.visible&&c.visible,properties:r(c,"properties",{})})}else if(c.type==="group"){var v=h(a,c,d);l.push(d),d=v}}return u}},46594:(s,o,i)=>{var r=i(51233),h=i(84101),a=i(91907),u=i(62644),l=i(80341),d=i(6641),c=i(87010),p=i(12635),f=i(22611),v=i(28200),g=i(24619);s.exports=function(y,m,x){var b=u(m),w=new c({width:b.width,height:b.height,name:y,tileWidth:b.tilewidth,tileHeight:b.tileheight,orientation:d(b.orientation),format:l.TILED_JSON,version:b.version,properties:b.properties,renderOrder:b.renderorder,infinite:b.infinite});w.orientation===a.HEXAGONAL&&(w.hexSideLength=b.hexsidelength,w.staggerAxis=b.staggeraxis,w.staggerIndex=b.staggerindex),w.layers=v(b,x),w.images=p(b);var T=g(b);return w.tilesets=T.tilesets,w.imageCollections=T.imageCollections,w.objects=f(b),w.tiles=h(w),r(w),w}},52205:(s,o,i)=>{var r=i(18254),h=i(29920),a=function(l){return{x:l.x,y:l.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"];s.exports=function(l,d,c){d===void 0&&(d=0),c===void 0&&(c=0);var p=r(l,u);if(p.x+=d,p.y+=c,l.gid){var f=h(l.gid);p.gid=f.gid,p.flippedHorizontal=f.flippedHorizontal,p.flippedVertical=f.flippedVertical,p.flippedAntiDiagonal=f.flippedAntiDiagonal}else l.polyline?p.polyline=l.polyline.map(a):l.polygon?p.polygon=l.polygon.map(a):l.ellipse?p.ellipse=l.ellipse:l.text?p.text=l.text:l.point?p.point=!0:p.rectangle=!0;return p}},22611:(s,o,i)=>{var r=i(95540),h=i(52205),a=i(48700),u=i(79677);s.exports=function(l){for(var d=[],c=[],p=u(l);p.i<p.layers.length||c.length>0;)if(p.i>=p.layers.length){if(c.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}p=c.pop()}else{var f=p.layers[p.i];if(p.i++,f.opacity*=p.opacity,f.visible=p.visible&&f.visible,f.type==="objectgroup"){f.name=p.name+f.name;for(var v=p.x+r(f,"startx",0)+r(f,"offsetx",0),g=p.y+r(f,"starty",0)+r(f,"offsety",0),y=[],m=0;m<f.objects.length;m++){var x=h(f.objects[m],v,g);y.push(x)}var b=new a(f);b.objects=y,d.push(b)}else if(f.type==="group"){var w=u(l,f,p);c.push(p),p=w}}return d}},28200:(s,o,i)=>{var r=i(41868),h=i(91907),a=i(79677),u=i(6641),l=i(95540),d=i(14977),c=i(29920),p=i(23029);s.exports=function(f,v){for(var g=l(f,"infinite",!1),y=[],m=[],x=a(f);x.i<x.layers.length||m.length>0;)if(x.i>=x.layers.length){if(m.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}x=m.pop()}else{var b=x.layers[x.i];if(x.i++,b.type==="tilelayer")if(b.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+b.name+"'");else{if(b.encoding&&b.encoding==="base64"){if(b.chunks)for(var w=0;w<b.chunks.length;w++)b.chunks[w].data=r(b.chunks[w].data);b.data&&(b.data=r(b.data)),delete b.encoding}var T,S,C,E,M=[],_=0;if(g){var O=l(b,"startx",0)+b.x,k=l(b,"starty",0)+b.y;(T=new d({name:x.name+b.name,id:b.id,x:x.x+l(b,"offsetx",0)+O*f.tilewidth,y:x.y+l(b,"offsety",0)+k*f.tileheight,width:b.width,height:b.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:x.opacity*b.opacity,visible:x.visible&&b.visible,properties:l(b,"properties",[]),orientation:u(f.orientation)})).orientation===h.HEXAGONAL&&(T.hexSideLength=f.hexsidelength,T.staggerAxis=f.staggeraxis,T.staggerIndex=f.staggerindex);for(var P=0;P<b.height;P++){M[P]=[null];for(var A=0;A<b.width;A++)M[P][A]=null}for(P=0,N=b.chunks.length;P<N;P++)for(var L=b.chunks[P],D=L.x-O,F=L.y-k,X=0,z=0,Y=L.data.length;z<Y;z++){var R=_+D,B=X+F;(S=c(L.data[z])).gid>0?((C=new p(T,S.gid,R,B,f.tilewidth,f.tileheight)).rotation=S.rotation,C.flipX=S.flipped,M[B][R]=C):(E=v?null:new p(T,-1,R,B,f.tilewidth,f.tileheight),M[B][R]=E),++_===L.width&&(X++,_=0)}}else{(T=new d({name:x.name+b.name,id:b.id,x:x.x+l(b,"offsetx",0)+b.x,y:x.y+l(b,"offsety",0)+b.y,width:b.width,height:b.height,tileWidth:f.tilewidth,tileHeight:f.tileheight,alpha:x.opacity*b.opacity,visible:x.visible&&b.visible,properties:l(b,"properties",[]),orientation:u(f.orientation)})).orientation===h.HEXAGONAL&&(T.hexSideLength=f.hexsidelength,T.staggerAxis=f.staggeraxis,T.staggerIndex=f.staggerindex);for(var I=[],G=0,N=b.data.length;G<N;G++)(S=c(b.data[G])).gid>0?((C=new p(T,S.gid,_,M.length,f.tilewidth,f.tileheight)).rotation=S.rotation,C.flipX=S.flipped,I.push(C)):(E=v?null:new p(T,-1,_,M.length,f.tilewidth,f.tileheight),I.push(E)),++_===b.width&&(M.push(I),_=0,I=[])}T.data=M,y.push(T)}else if(b.type==="group"){var W=a(f,b,x);m.push(x),x=W}}return y}},24619:(s,o,i)=>{var r=i(33629),h=i(16536),a=i(52205),u=i(57880);s.exports=function(l){for(var d,c=[],p=[],f=null,v=0;v<l.tilesets.length;v++){var g=l.tilesets[v];if(g.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(g.image){var y=new r(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,void 0,void 0,g.tileoffset);if(l.version>1){var m=void 0,x=void 0;if(Array.isArray(g.tiles)){m=m||{},x=x||{};for(var b=0;b<g.tiles.length;b++){var w=g.tiles[b];if(w.properties){var T={};w.properties.forEach(function(A){T[A.name]=A.value}),x[w.id]=T}if(w.objectgroup&&((m[w.id]||(m[w.id]={})).objectgroup=w.objectgroup,w.objectgroup.objects)){var S=w.objectgroup.objects.map(function(A){return a(A)});m[w.id].objectgroup.objects=S}w.animation&&((m[w.id]||(m[w.id]={})).animation=w.animation),w.type&&((m[w.id]||(m[w.id]={})).type=w.type)}}Array.isArray(g.wangsets)&&(m=m||{},x=x||{},u(g.wangsets,m)),m&&(y.tileData=m,y.tileProperties=x)}else if(g.tileproperties&&(y.tileProperties=g.tileproperties),g.tiles)for(d in y.tileData=g.tiles,y.tileData){var C=y.tileData[d].objectgroup;if(C&&C.objects){var E=C.objects.map(function(A){return a(A)});y.tileData[d].objectgroup.objects=E}}y.updateTileData(g.imagewidth,g.imageheight),c.push(y)}else{var M=new h(g.name,g.firstgid,g.tilewidth,g.tileheight,g.margin,g.spacing,g.properties),_=0;for(b=0;b<g.tiles.length;b++){var O=(w=g.tiles[b]).image,k=parseInt(w.id,10),P=g.firstgid+k;M.addImage(P,O),_=Math.max(k,_)}M.maxId=_,p.push(M)}f&&(f.lastgid=g.firstgid-1),f=g}return{tilesets:c,imageCollections:p}}},57880:s=>{s.exports=function(o,i){for(var r=0;r<o.length;r++){var h=o[r],a=r;if(h.name&&h.name!==""&&(a=h.name),Array.isArray(h.wangtiles)&&h.wangtiles.length>0){var u,l,d,c={},p={};if(Array.isArray(h.edgecolors))for(u=0;u<h.edgecolors.length;u++)d=1+u,(l=h.edgecolors[u]).name!==""&&(c[d]=l.name);if(Array.isArray(h.cornercolors))for(u=0;u<h.cornercolors.length;u++)d=1+u,(l=h.cornercolors[u]).name!==""&&(p[d]=l.name);if(Array.isArray(h.colors))for(u=0;u<h.colors.length;u++)d=1+u,(l=h.colors[u]).name!==""&&(c[d]=p[d]=l.name);for(var f=[c,p,c,p,c,p,c,p],v=0;v<h.wangtiles.length;v++){var g=h.wangtiles[v],y=i[g.tileid]||(i[g.tileid]={});y=y.wangid||(y.wangid={});for(var m=[],x=0;x<Math.min(f.length,g.wangid.length);x++)if((l=g.wangid[x])!==0){var b=f[x][l];b===void 0?m.push(l):m.push(b)}else m.push(void 0);y[a]=m}}}}},96761:(s,o,i)=>{s.exports={AssignTileProperties:i(51233),Base64Decode:i(41868),BuildTilesetIndex:i(84101),CreateGroupLayer:i(79677),ParseGID:i(29920),ParseImageLayers:i(12635),ParseJSONTiled:i(46594),ParseObject:i(52205),ParseObjectLayers:i(22611),ParseTileLayers:i(28200),ParseTilesets:i(24619)}},33385:(s,o,i)=>{var r=i(83419),h=i(37277),a=i(44594),u=i(94880),l=i(72905),d=new r({initialize:function(c){this.scene=c,this.systems=c.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],c.sys.events.once(a.BOOT,this.boot,this),c.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var c=this.systems.events;c.on(a.PRE_UPDATE,this.preUpdate,this),c.on(a.UPDATE,this.update,this),c.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(c){var p;return c instanceof u?(p=c,this.removeEvent(p),p.elapsed=p.startAt,p.hasDispatched=!1,p.repeatCount=p.repeat===-1||p.loop?999999999999:p.repeat):p=new u(c),this._pendingInsertion.push(p),p},delayedCall:function(c,p,f,v){return this.addEvent({delay:c,callback:p,args:f,callbackScope:v})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++){var f=c[p];l(this._pendingRemoval,f),l(this._pendingInsertion,f),l(this._active,f)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var c=this._pendingRemoval.length,p=this._pendingInsertion.length;if(c!==0||p!==0){var f,v;for(f=0;f<c;f++){v=this._pendingRemoval[f];var g=this._active.indexOf(v);g>-1&&this._active.splice(g,1),v.destroy()}for(f=0;f<p;f++)v=this._pendingInsertion[f],this._active.push(v);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(c,p){if(this.now=c,!this.paused){p*=this.timeScale;for(var f=0;f<this._active.length;f++){var v=this._active[f];if(!v.paused&&(v.elapsed+=p*v.timeScale,v.elapsed>=v.delay)){var g=v.elapsed-v.delay;if(v.elapsed=v.delay,!v.hasDispatched&&v.callback&&(v.hasDispatched=!0,v.callback.apply(v.callbackScope,v.args)),v.repeatCount>0){if(v.repeatCount--,g>=v.delay)for(;g>=v.delay&&v.repeatCount>0;)v.callback&&v.callback.apply(v.callbackScope,v.args),g-=v.delay,v.repeatCount--;v.elapsed=g,v.hasDispatched=!1}else v.hasDispatched&&this._pendingRemoval.push(v)}}}},shutdown:function(){var c;for(c=0;c<this._pendingInsertion.length;c++)this._pendingInsertion[c].destroy();for(c=0;c<this._active.length;c++)this._active[c].destroy();for(c=0;c<this._pendingRemoval.length;c++)this._pendingRemoval[c].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var p=this.systems.events;p.off(a.PRE_UPDATE,this.preUpdate,this),p.off(a.UPDATE,this.update,this),p.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});h.register("Clock",d,"time"),s.exports=d},96120:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(39429),u=i(95540),l=i(44594),d=i(89809),c=new r({Extends:h,initialize:function(p,f){h.call(this),this.scene=p,this.systems=p.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var v=this.systems.events;v.on(l.PRE_UPDATE,this.preUpdate,this),v.on(l.UPDATE,this.update,this),v.once(l.SHUTDOWN,this.destroy,this),f&&this.add(f)},preUpdate:function(p,f){this.paused||(this.elapsed+=f)},update:function(){if(!this.paused&&!this.complete){var p,f,v=this.events,g=!1,y=this.systems;for(p=0;p<v.length;p++){var m=v[p];if(!m.complete&&m.time<=this.elapsed){if(m.complete=!0,this.totalComplete++,f=m.target?m.target:this,m.if&&!m.if.call(f,m))continue;if(m.once&&(g=!0),m.set&&m.target)for(var x in m.set)m.target[x]=m.set[x];this.iteration&&m.repeat++,m.loop&&m.repeat&&m.loop.call(f),m.tween&&y.tweens.add(m.tween),m.sound&&(typeof m.sound=="string"?y.sound.play(m.sound):y.sound.play(m.sound.key,m.sound.config)),m.event&&this.emit(m.event,f),m.run&&m.run.call(f),m.stop&&this.stop()}}if(g)for(p=0;p<v.length;p++)v[p].complete&&v[p].once&&(v.splice(p,1),p--);this.totalComplete>=v.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(d.COMPLETE,this)}},play:function(p){return p===void 0&&(p=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,p&&this.reset(),this},pause:function(){return this.paused=!0,this},repeat:function(p){return p!==void 0&&p!==!0||(p=-1),p===!1&&(p=0),this.loop=p,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(p){p===void 0&&(p=!1),this.elapsed=0,p||(this.iteration=0);for(var f=0;f<this.events.length;f++)this.events[f].complete=!1,p||(this.events[f].repeat=0);return this.play(!1)},add:function(p){Array.isArray(p)||(p=[p]);var f=this.events,v=0;f.length>0&&(v=f[f.length-1].time);for(var g=0;g<p.length;g++){var y=p[g],m=u(y,"at",0),x=u(y,"in",null);x!==null&&(m=this.elapsed+x);var b=u(y,"from",null);b!==null&&(m=v+b),f.push({complete:!1,time:m,repeat:0,if:u(y,"if",null),run:u(y,"run",null),loop:u(y,"loop",null),event:u(y,"event",null),target:u(y,"target",null),set:u(y,"set",null),tween:u(y,"tween",null),sound:u(y,"sound",null),once:u(y,"once",!1),stop:u(y,"stop",!1)}),v=m}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){return Math.min(this.totalComplete,this.events.length)/this.events.length},destroy:function(){var p=this.systems.events;p.off(l.PRE_UPDATE,this.preUpdate,this),p.off(l.UPDATE,this.update,this),p.off(l.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});a.register("timeline",function(p){return new c(this.scene,p)}),s.exports=c},94880:(s,o,i)=>{var r=i(83419),h=i(95540),a=new r({initialize:function(u){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(u)},reset:function(u){if(this.delay=h(u,"delay",0),this.repeat=h(u,"repeat",0),this.loop=h(u,"loop",!1),this.callback=h(u,"callback",void 0),this.callbackScope=h(u,"callbackScope",this),this.args=h(u,"args",[]),this.timeScale=h(u,"timeScale",1),this.startAt=h(u,"startAt",0),this.paused=h(u,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var u=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/u}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return .001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return .001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return .001*this.getOverallRemaining()},remove:function(u){u===void 0&&(u=!1),this.elapsed=this.delay,this.hasDispatched=!u,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});s.exports=a},35945:s=>{s.exports="complete"},89809:(s,o,i)=>{s.exports={COMPLETE:i(35945)}},90291:(s,o,i)=>{s.exports={Clock:i(33385),Events:i(89809),Timeline:i(96120),TimerEvent:i(94880)}},40382:(s,o,i)=>{var r=i(72905),h=i(83419),a=i(43491),u=i(88032),l=i(37277),d=i(44594),c=i(93109),p=i(86081),f=i(8357),v=i(43960),g=i(26012),y=new h({initialize:function(m){this.scene=m,this.events=m.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(d.UPDATE,this.update,this),this.events.once(d.SHUTDOWN,this.shutdown,this)},create:function(m){Array.isArray(m)||(m=[m]);for(var x=[],b=0;b<m.length;b++){var w=m[b];w instanceof p||w instanceof v?x.push(w):Array.isArray(w.tweens)?x.push(g(this,w)):x.push(f(this,w))}return x.length===1?x[0]:x},add:function(m){var x=m,b=this.tweens;return x instanceof p||x instanceof v||(x=Array.isArray(x.tweens)?g(this,x):f(this,x)),b.push(x.reset()),x},addMultiple:function(m){for(var x,b=[],w=this.tweens,T=0;T<m.length;T++)(x=m[T])instanceof p||x instanceof v||(x=Array.isArray(x.tweens)?g(this,x):f(this,x)),w.push(x.reset()),b.push(x);return b},chain:function(m){var x=g(this,m);return this.tweens.push(x.init()),x},getChainedTweens:function(m){return m.getChainedTweens()},has:function(m){return this.tweens.indexOf(m)>-1},existing:function(m){return this.has(m)||this.tweens.push(m.reset()),this},addCounter:function(m){var x=u(this,m);return this.tweens.push(x.reset()),x},stagger:function(m,x){return c(m,x)},setLagSmooth:function(m,x){return m===void 0&&(m=1/1e-8),x===void 0&&(x=0),this.maxLag=m,this.lagSkip=Math.min(x,this.maxLag),this},setFps:function(m){return m===void 0&&(m=240),this.gap=1e3/m,this.nextTime=1e3*this.time+this.gap,this},getDelta:function(m){var x=Date.now()-this.prevTime;x>this.maxLag&&(this.startTime+=x-this.lagSkip),this.prevTime+=x;var b=this.prevTime-this.startTime,w=b-this.nextTime,T=b-1e3*this.time;return w>0||m?(b/=1e3,this.time=b,this.nextTime+=w+(w>=this.gap?4:this.gap-w)):T=0,T},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(m){m===void 0&&(m=!1);var x=this.getDelta(m);if(!(x<=0)){var b,w;this.processing=!0;var T=[],S=this.tweens;for(b=0;b<S.length;b++)(w=S[b]).update(x)&&T.push(w);var C=T.length;if(C&&S.length>0){for(b=0;b<C;b++){w=T[b];var E=S.indexOf(w);E>-1&&(w.isPendingRemove()||w.isDestroyed())&&(S.splice(E,1),w.destroy())}T.length=0}this.processing=!1}},remove:function(m){return this.processing?m.setPendingRemoveState():(r(this.tweens,m),m.setRemovedState()),this},reset:function(m){return this.existing(m),m.seek(),m.setActiveState(),this},makeActive:function(m){return this.existing(m),m.setActiveState(),this},each:function(m,x){var b,w=[null];for(b=1;b<arguments.length;b++)w.push(arguments[b]);return this.tweens.forEach(function(T){w[0]=T,m.apply(x,w)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(m){for(var x=[],b=this.tweens,w=(m=Array.isArray(m)?a(m):[m]).length,T=0;T<b.length;T++)for(var S=b[T],C=0;C<w;C++)!S.isDestroyed()&&S.hasTarget(m[C])&&x.push(S);return x},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(m){return this.timeScale=m,this},isTweening:function(m){for(var x,b=this.tweens,w=0;w<b.length;w++)if((x=b[w]).isPlaying()&&x.hasTarget(m))return!0;return!1},killAll:function(){for(var m=this.processing?this.getTweens():this.tweens,x=0;x<m.length;x++)m[x].destroy();return this.processing||(m.length=0),this},killTweensOf:function(m){for(var x=this.getTweensOf(m),b=0;b<x.length;b++)x[b].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(d.UPDATE,this.update,this),this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.events=null}});l.register("TweenManager",y,"tweens"),s.exports=y},57355:s=>{s.exports=function(o,i,r){return o&&o.hasOwnProperty(i)?o[i]:r}},6113:(s,o,i)=>{var r=i(62640),h=i(35355);s.exports=function(a,u){var l=r.Power0;if(typeof a=="string")if(r.hasOwnProperty(a))l=r[a];else{var d="";if(a.indexOf(".")){var c=(d=a.substring(a.indexOf(".")+1)).toLowerCase();c==="in"?d="easeIn":c==="out"?d="easeOut":c==="inout"&&(d="easeInOut")}a=h(a.substring(0,a.indexOf(".")+1)+d),r.hasOwnProperty(a)&&(l=r[a])}else typeof a=="function"&&(l=a);if(!u)return l;var p=u.slice(0);return p.unshift(0),function(f){return p[0]=f,l.apply(this,p)}}},91389:(s,o,i)=>{var r=i(89318),h=i(77259),a={bezier:r,catmull:h,catmullrom:h,linear:i(28392)};s.exports=function(u){if(u===null)return null;var l=a.linear;return typeof u=="string"?a.hasOwnProperty(u)&&(l=a[u]):typeof u=="function"&&(l=u),l}},55292:s=>{s.exports=function(o,i,r){return o.hasOwnProperty(i)?typeof o[i]=="function"?function(h,a,u,l,d,c){return o[i](h,a,u,l,d,c)}:function(){return o[i]}:typeof r=="function"?r:function(){return r}}},82985:(s,o,i)=>{var r=i(81076);s.exports=function(h){var a,u=[];if(h.hasOwnProperty("props"))for(a in h.props)a.substring(0,1)!=="_"&&u.push({key:a,value:h.props[a]});else for(a in h)r.indexOf(a)===-1&&a.substring(0,1)!=="_"&&u.push({key:a,value:h[a]});return u}},62329:(s,o,i)=>{var r=i(35154);s.exports=function(h){var a=r(h,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a}},17777:(s,o,i)=>{var r=i(30976),h=i(99472);function a(c){return!!c.getActive&&typeof c.getActive=="function"}function u(c){return!!c.getStart&&typeof c.getStart=="function"}function l(c){return!!c.getEnd&&typeof c.getEnd=="function"}var d=function(c,p){var f,v,g=function(F,X,z){return z},y=function(F,X,z){return z},m=null,x=typeof p;if(x==="number")g=function(){return p};else if(Array.isArray(p))y=function(){return p[0]},g=function(){return p[p.length-1]};else if(x==="string"){var b=p.toLowerCase(),w=b.substring(0,6)==="random",T=b.substring(0,3)==="int";if(w||T){var S=b.indexOf("("),C=b.indexOf(")"),E=b.indexOf(",");if(!(S&&C&&E))throw new Error("invalid random() format");var M=parseFloat(b.substring(S+1,E)),_=parseFloat(b.substring(E+1,C));g=w?function(){return h(M,_)}:function(){return r(M,_)}}else{b=b[0];var O=parseFloat(p.substr(2));switch(b){case"+":g=function(F,X,z){return z+O};break;case"-":g=function(F,X,z){return z-O};break;case"*":g=function(F,X,z){return z*O};break;case"/":g=function(F,X,z){return z/O};break;default:g=function(){return parseFloat(p)}}}}else if(x==="function")g=p;else if(x==="object")if(u(v=p)||l(v)||a(v))a(p)&&(m=p.getActive),l(p)&&(g=p.getEnd),u(p)&&(y=p.getStart);else if(p.hasOwnProperty("value"))f=d(c,p.value);else{var k=p.hasOwnProperty("to"),P=p.hasOwnProperty("from"),A=p.hasOwnProperty("start");if(k&&(P||A)){if(f=d(c,p.to),A){var L=d(c,p.start);f.getActive=L.getEnd}if(P){var D=d(c,p.from);f.getStart=D.getEnd}}}return f||(f={getActive:m,getEnd:g,getStart:y}),f};s.exports=d},88032:(s,o,i)=>{var r=i(70402),h=i(69902),a=i(23568),u=i(57355),l=i(6113),d=i(55292),c=i(35154),p=i(17777),f=i(269),v=i(86081);s.exports=function(g,y,m){if(y instanceof v)return y.parent=g,y;m=m===void 0?h:f(h,m);var x=c(y,"from",0),b=c(y,"to",1),w=[{value:x}],T=c(y,"delay",m.delay),S=c(y,"easeParams",m.easeParams),C=c(y,"ease",m.ease),E=p("value",b),M=new v(g,w),_=M.add(0,"value",E.getEnd,E.getStart,E.getActive,l(c(y,"ease",C),c(y,"easeParams",S)),d(y,"delay",T),c(y,"duration",m.duration),u(y,"yoyo",m.yoyo),c(y,"hold",m.hold),c(y,"repeat",m.repeat),c(y,"repeatDelay",m.repeatDelay),!1,!1);_.start=x,_.current=x,M.completeDelay=a(y,"completeDelay",0),M.loop=Math.round(a(y,"loop",0)),M.loopDelay=Math.round(a(y,"loopDelay",0)),M.paused=u(y,"paused",!1),M.persist=u(y,"persist",!1),M.callbackScope=c(y,"callbackScope",M);for(var O=r.TYPES,k=0;k<O.length;k++){var P=O[k],A=c(y,P,!1);if(A){var L=c(y,P+"Params",[]);M.setCallback(P,A,L)}}return M}},93109:(s,o,i)=>{var r=i(6113),h=i(35154),a=i(36383);s.exports=function(u,l){l===void 0&&(l={});var d=h(l,"start",0),c=h(l,"ease",null),p=h(l,"grid",null),f=h(l,"from",0),v=f==="first",g=f==="center",y=f==="last",m=typeof f=="number",x=Array.isArray(u),b=parseFloat(x?u[0]:u),w=x?parseFloat(u[1]):0,T=Math.max(b,w);if(x&&(d+=b),p){var S=p[0],C=p[1],E=0,M=0,_=0,O=0,k=[];y?(E=S-1,M=C-1):m?(E=f%S,M=Math.floor(f/S)):g&&(E=(S-1)/2,M=(C-1)/2);for(var P=a.MIN_SAFE_INTEGER,A=0;A<C;A++){k[A]=[];for(var L=0;L<S;L++){_=E-L,O=M-A;var D=Math.sqrt(_*_+O*O);D>P&&(P=D),k[A][L]=D}}}var F=c?r(c):null;return p?function(X,z,Y,R){var B,I=0,G=R%S,N=Math.floor(R/S);if(G>=0&&G<S&&N>=0&&N<C&&(I=k[N][G]),x){var W=w-b;B=F?I/P*W*F(I/P):I/P*W}else B=F?I*b*F(I/P):I*b;return B+d}:function(X,z,Y,R,B){var I,G,N;return B--,v?I=R:g?I=Math.abs(B/2-R):y?I=B-R:m&&(I=Math.abs(f-R)),x?(N=g?(w-b)/B*(2*I):(w-b)/B*I,G=F?N*F(I/B):N):G=F?B*T*F(I/B):I*b,G+d}}},8357:(s,o,i)=>{var r=i(70402),h=i(69902),a=i(23568),u=i(57355),l=i(6113),d=i(91389),c=i(55292),p=i(82985),f=i(62329),v=i(35154),g=i(17777),y=i(269),m=i(86081);s.exports=function(x,b,w){if(b instanceof m)return b.parent=x,b;w=w===void 0?h:y(h,w);var T=f(b);!T&&w.targets&&(T=w.targets);for(var S=p(b),C=v(b,"delay",w.delay),E=v(b,"duration",w.duration),M=v(b,"easeParams",w.easeParams),_=v(b,"ease",w.ease),O=v(b,"hold",w.hold),k=v(b,"repeat",w.repeat),P=v(b,"repeatDelay",w.repeatDelay),A=u(b,"yoyo",w.yoyo),L=u(b,"flipX",w.flipX),D=u(b,"flipY",w.flipY),F=v(b,"interpolation",w.interpolation),X=function(K,$,H,j){if(H==="texture"){var q=j,Z=void 0;Array.isArray(j)?(q=j[0],Z=j[1]):j.hasOwnProperty("value")?(q=j.value,Array.isArray(j.value)?(q=j.value[0],Z=j.value[1]):typeof j.value=="string"&&(q=j.value)):typeof j=="string"&&(q=j),K.addFrame($,q,Z,c(j,"delay",C),v(j,"duration",E),v(j,"hold",O),v(j,"repeat",k),v(j,"repeatDelay",P),u(j,"flipX",L),u(j,"flipY",D))}else{var Q=g(H,j),at=d(v(j,"interpolation",F));K.add($,H,Q.getEnd,Q.getStart,Q.getActive,l(v(j,"ease",_),v(j,"easeParams",M)),c(j,"delay",C),v(j,"duration",E),u(j,"yoyo",A),v(j,"hold",O),v(j,"repeat",k),v(j,"repeatDelay",P),u(j,"flipX",L),u(j,"flipY",D),at,at?j:null)}},z=new m(x,T),Y=0;Y<S.length;Y++)for(var R=S[Y].key,B=S[Y].value,I=0;I<T.length;I++)R!=="scale"||T[I].hasOwnProperty("scale")?X(z,I,R,B):(X(z,I,"scaleX",B),X(z,I,"scaleY",B));z.completeDelay=a(b,"completeDelay",0),z.loop=Math.round(a(b,"loop",0)),z.loopDelay=Math.round(a(b,"loopDelay",0)),z.paused=u(b,"paused",!1),z.persist=u(b,"persist",!1),z.callbackScope=v(b,"callbackScope",z);for(var G=r.TYPES,N=0;N<G.length;N++){var W=G[N],U=v(b,W,!1);if(U){var V=v(b,W+"Params",[]);z.setCallback(W,U,V)}}return z}},26012:(s,o,i)=>{var r=i(70402),h=i(23568),a=i(57355),u=i(62329),l=i(35154),d=i(8357),c=i(43960);s.exports=function(p,f){if(f instanceof c)return f.parent=p,f;var v,g=new c(p);g.startDelay=l(f,"delay",0),g.completeDelay=h(f,"completeDelay",0),g.loop=Math.round(h(f,"loop",l(f,"repeat",0))),g.loopDelay=Math.round(h(f,"loopDelay",l(f,"repeatDelay",0))),g.paused=a(f,"paused",!1),g.persist=a(f,"persist",!1),g.callbackScope=l(f,"callbackScope",g);var y=r.TYPES;for(v=0;v<y.length;v++){var m=y[v],x=l(f,m,!1);if(x){var b=l(f,m+"Params",[]);g.setCallback(m,x,b)}}var w=l(f,"tweens",null);if(Array.isArray(w)){var T=[],S=u(f),C=void 0;for(S&&(C={targets:S}),v=0;v<w.length;v++)T.push(d(g,w[v],C));g.add(T)}return g}},30231:(s,o,i)=>{s.exports={GetBoolean:i(57355),GetEaseFunction:i(6113),GetInterpolationFunction:i(91389),GetNewValue:i(55292),GetProps:i(82985),GetTargets:i(62329),GetValueOp:i(17777),NumberTweenBuilder:i(88032),StaggerBuilder:i(93109),TweenBuilder:i(8357)}},73685:s=>{s.exports="active"},98540:s=>{s.exports="complete"},67233:s=>{s.exports="loop"},2859:s=>{s.exports="pause"},98336:s=>{s.exports="repeat"},25764:s=>{s.exports="resume"},32193:s=>{s.exports="start"},84371:s=>{s.exports="stop"},70766:s=>{s.exports="update"},55659:s=>{s.exports="yoyo"},842:(s,o,i)=>{s.exports={TWEEN_ACTIVE:i(73685),TWEEN_COMPLETE:i(98540),TWEEN_LOOP:i(67233),TWEEN_PAUSE:i(2859),TWEEN_RESUME:i(25764),TWEEN_REPEAT:i(98336),TWEEN_START:i(32193),TWEEN_STOP:i(84371),TWEEN_UPDATE:i(70766),TWEEN_YOYO:i(55659)}},43066:(s,o,i)=>{var r={States:i(86353),Builders:i(30231),Events:i(842),TweenManager:i(40382),Tween:i(86081),TweenData:i(48177),TweenFrameData:i(42220),BaseTween:i(70402),TweenChain:i(43960)};s.exports=r},70402:(s,o,i)=>{var r=i(83419),h=i(50792),a=i(842),u=i(86353),l=new r({Extends:h,initialize:function(d){h.call(this),this.parent=d,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(d){return this.timeScale=d,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(a.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(a.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(a.TWEEN_COMPLETE,"onComplete")},complete:function(d){return d===void 0&&(d=0),d?(this.setCompleteDelayState(),this.countdown=d):this.onCompleteHandler(),this},completeAfterLoop:function(d){return d===void 0&&(d=0),this.loopCounter>d&&(this.loopCounter=d),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return!this.parent||this.isRemoved()||this.isPendingRemove()||this.isDestroyed()||(this.dispatchEvent(a.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(d){this.countdown-=d,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(d){return this.countdown-=d,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(a.TWEEN_START,"onStart"),d=0),d},updateCompleteDelay:function(d){this.countdown-=d,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(d,c,p){return p===void 0&&(p=[]),this.callbacks.hasOwnProperty(d)&&(this.callbacks[d]={func:c,params:p}),this},setPendingState:function(){this.state=u.PENDING},setActiveState:function(){this.state=u.ACTIVE},setLoopDelayState:function(){this.state=u.LOOP_DELAY},setCompleteDelayState:function(){this.state=u.COMPLETE_DELAY},setStartDelayState:function(){this.state=u.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=u.PENDING_REMOVE},setRemovedState:function(){this.state=u.REMOVED},setFinishedState:function(){this.state=u.FINISHED},setDestroyedState:function(){this.state=u.DESTROYED},isPending:function(){return this.state===u.PENDING},isActive:function(){return this.state===u.ACTIVE},isLoopDelayed:function(){return this.state===u.LOOP_DELAY},isCompleteDelayed:function(){return this.state===u.COMPLETE_DELAY},isStartDelayed:function(){return this.state===u.START_DELAY},isPendingRemove:function(){return this.state===u.PENDING_REMOVE},isRemoved:function(){return this.state===u.REMOVED},isFinished:function(){return this.state===u.FINISHED},isDestroyed:function(){return this.state===u.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(d){d.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});l.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],s.exports=l},95042:(s,o,i)=>{var r=i(83419),h=i(842),a=i(86353),u=new r({initialize:function(l,d,c,p,f,v,g,y,m,x){this.tween=l,this.targetIndex=d,this.duration=p,this.totalDuration=0,this.delay=0,this.getDelay=c,this.yoyo=f,this.hold=v,this.repeat=g,this.repeatDelay=y,this.repeatCounter=0,this.flipX=m,this.flipY=x,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(l){l===void 0&&(l=this.current),this.tween.targets[this.targetIndex][this.key]=l},setCreatedState:function(){this.state=a.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=a.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=a.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=a.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=a.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=a.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=a.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=a.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===a.CREATED},isDelayed:function(){return this.state===a.DELAY},isPendingRender:function(){return this.state===a.PENDING_RENDER},isPlayingForward:function(){return this.state===a.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===a.PLAYING_BACKWARD},isHolding:function(){return this.state===a.HOLD_DELAY},isRepeating:function(){return this.state===a.REPEAT_DELAY},isComplete:function(){return this.state===a.COMPLETE},setStateFromEnd:function(l){this.yoyo?this.onRepeat(l,!0,!0):this.repeatCounter>0?this.onRepeat(l,!0,!1):this.setCompleteState()},setStateFromStart:function(l){this.repeatCounter>0?this.onRepeat(l,!1):this.setCompleteState()},reset:function(){var l=this.tween,d=l.totalTargets,c=this.targetIndex,p=l.targets[c],f=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(p,f,0,c,d,l),this.repeatCounter=this.repeat===-1?a.MAX:this.repeat,this.setPendingRenderState();var v=this.duration+this.hold;this.yoyo&&(v+=this.duration);var g=v+this.repeatDelay;this.totalDuration=this.delay+v,this.repeat===-1?(this.totalDuration+=g*a.MAX,l.isInfinite=!0):this.repeat>0&&(this.totalDuration+=g*this.repeat),this.totalDuration>l.duration&&(l.duration=this.totalDuration),this.delay<l.startDelay&&(l.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(l,d,c){var p=this.tween,f=p.totalTargets,v=this.targetIndex,g=p.targets[v],y=this.key,m=y!=="texture";if(this.elapsed=l,this.progress=l/this.duration,this.flipX&&g.toggleFlipX(),this.flipY&&g.toggleFlipY(),m&&(d||c)&&(this.start=this.getStartValue(g,y,this.start,v,f,p)),c)return this.setPlayingBackwardState(),void this.dispatchEvent(h.TWEEN_YOYO,"onYoyo");this.repeatCounter--,m&&(this.end=this.getEndValue(g,y,this.start,v,f,p)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-l,m&&(this.current=this.start,g[y]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(h.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});s.exports=u},69902:s=>{s.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null}},81076:s=>{s.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(s,o,i)=>{var r=i(70402),h=i(83419),a=i(842),u=i(44603),l=i(39429),d=i(36383),c=i(86353),p=i(48177),f=i(42220),v=new h({Extends:r,initialize:function(g,y){r.call(this,g),this.targets=y,this.totalTargets=y.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(g,y,m,x,b,w,T,S,C,E,M,_,O,k,P,A){var L=new p(this,g,y,m,x,b,w,T,S,C,E,M,_,O,k,P,A);return this.totalData=this.data.push(L),L},addFrame:function(g,y,m,x,b,w,T,S,C,E){var M=new f(this,g,y,m,x,b,w,T,S,C,E);return this.totalData=this.data.push(M),M},getValue:function(g){g===void 0&&(g=0);var y=null;return this.data&&(y=this.data[g].current),y},hasTarget:function(g){return this.targets&&this.targets.indexOf(g)!==-1},updateTo:function(g,y,m){if(m===void 0&&(m=!1),g!=="texture")for(var x=0;x<this.totalData;x++){var b=this.data[x];b.key===g&&(b.isPlayingForward()||b.isPlayingBackward())&&(b.end=y,m&&(b.start=b.current))}return this},restart:function(){switch(this.state){case c.REMOVED:case c.FINISHED:this.seek(),this.parent.makeActive(this);break;case c.PENDING:case c.PENDING_REMOVE:this.parent.reset(this);break;case c.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek()}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,r.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(g,y,m){if(g===void 0&&(g=0),y===void 0&&(y=16.6),m===void 0&&(m=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;m||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive");var x=this.paused;if(this.paused=!1,g>0){for(var b=Math.floor(g/y),w=g-b*y,T=0;T<b;T++)this.update(y);w>0&&this.update(w)}return this.paused=x,this.isSeeking=!1,this},initTweenData:function(g){g===void 0&&(g=!1),this.duration=0,this.startDelay=d.MAX_SAFE_INTEGER;for(var y=this.data,m=0;m<this.totalData;m++)y[m].reset(g);this.duration=Math.max(this.duration,.01);var x=this.duration,b=this.completeDelay,w=this.loopCounter,T=this.loopDelay;this.totalDuration=w>0?x+b+(x+T)*w:x+b},reset:function(g){return g===void 0&&(g=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=c.MAX),g||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")),this},update:function(g){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(g*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(g),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(g),!1;this.hasStarted||(this.startDelay-=g,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),g=0));var y=!1;if(this.isActive())for(var m=this.data,x=0;x<this.totalData;x++)m[x].update(g)&&(y=!0);this.elapsed+=g,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=g,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),y||this.nextState();var b=this.isPendingRemove();return b&&this.persist&&(this.setFinishedState(),b=!1),b},forward:function(g){return this.update(g),this},rewind:function(g){return this.update(-g),this},dispatchEvent:function(g,y){if(!this.isSeeking){this.emit(g,this,this.targets);var m=this.callbacks[y];m&&m.func.apply(this.callbackScope,[this,this.targets].concat(m.params))}},destroy:function(){r.prototype.destroy.call(this),this.targets=null}});l.register("tween",function(g){return this.scene.sys.tweens.add(g)}),u.register("tween",function(g){return this.scene.sys.tweens.create(g)}),s.exports=v},43960:(s,o,i)=>{var r=i(72905),h=i(70402),a=i(83419),u=i(842),l=i(44603),d=i(39429),c=i(86353),p=new a({Extends:h,initialize:function(f){h.call(this,f),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?c.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(u.TWEEN_ACTIVE,"onActive"),this},add:function(f){var v=this.parent.create(f);Array.isArray(v)||(v=[v]);for(var g=this.data,y=0;y<v.length;y++){var m=v[y];m.parent=this,g.push(m.reset())}return this.totalData=g.length,this},remove:function(f){return r(this.data,f),f.setRemovedState(),f===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(f){for(var v=this.data,g=0;g<this.totalData;g++)if(v[g].hasTarget(f))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(f){return f.seek(),f.setActiveState(),this},makeActive:function(f){return f.reset(),f.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(u.TWEEN_LOOP,"onLoop"));else{if(!(this.completeDelay>0))return this.onCompleteHandler(),!0;this.countdown=this.completeDelay,this.setCompleteDelayState()}return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var f=this.data,v=this.totalData,g=0;g<v;g++)f[g].reset(!1);this.currentIndex=0,this.currentTween=f[0]},update:function(f){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;f*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(f):this.isCompleteDelayed()?this.updateCompleteDelay(f):this.isStartDelayed()&&(f=this.updateStartCountdown(f));var v=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(f)&&this.nextTween()&&this.nextState(),(v=this.isPendingRemove())&&this.persist&&(this.setFinishedState(),v=!1)),v},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData||(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(f){this.currentIndex=f,this.currentTween=this.data[f],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(u.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(f,v){this.emit(f,this);var g=this.callbacks[v];g&&g.func.apply(this.callbackScope,[this].concat(g.params))},destroy:function(){h.prototype.destroy.call(this),this.currentTween=null}});d.register("tweenchain",function(f){return this.scene.sys.tweens.chain(f)}),l.register("tweenchain",function(f){return this.scene.sys.tweens.create(f)}),s.exports=p},48177:(s,o,i)=>{var r=i(95042),h=i(45319),a=i(83419),u=i(842),l=new a({Extends:r,initialize:function(d,c,p,f,v,g,y,m,x,b,w,T,S,C,E,M,_){r.call(this,d,c,m,x,b,w,T,S,C,E),this.key=p,this.getActiveValue=g,this.getEndValue=f,this.getStartValue=v,this.ease=y,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=M,this.interpolationData=_},reset:function(d){r.prototype.reset.call(this);var c=this.tween.targets[this.targetIndex],p=this.key;d&&(c[p]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(c[p]=this.getActiveValue(c,p,0))},update:function(d){var c=this.tween,p=c.totalTargets,f=this.targetIndex,v=c.targets[f],g=this.key;if(!v)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=d,this.elapsed<=0&&(this.elapsed=0,d=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(v,g,v[g],f,p,c),this.end=this.getEndValue(v,g,this.start,f,p,c),this.current=this.start,v[g]=this.start,this.setPlayingForwardState(),!0;var y=this.isPlayingForward(),m=this.isPlayingBackward();if(y||m){var x=this.elapsed,b=this.duration,w=0,T=!1;(x+=d)>=b?(w=x-b,x=b,T=!0):x<0&&(x=0);var S=h(x/b,0,1);if(this.elapsed=x,this.progress=S,this.previous=this.current,T)y?(this.current=this.end,v[g]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(w)):(this.current=this.start,v[g]=this.start,this.setStateFromStart(w));else{y||(S=1-S);var C=this.ease(S);this.interpolation?this.current=this.interpolation(this.interpolationData,C):this.current=this.start+(this.end-this.start)*C,v[g]=this.current}this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(d,c){var p=this.tween;if(!p.isSeeking){var f=p.targets[this.targetIndex],v=this.key,g=this.current,y=this.previous;p.emit(d,p,v,f,g,y);var m=p.callbacks[c];m&&m.func.apply(p.callbackScope,[p,f,v,g,y].concat(m.params))}},destroy:function(){r.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});s.exports=l},42220:(s,o,i)=>{var r=i(95042),h=i(45319),a=i(83419),u=i(842),l=new a({Extends:r,initialize:function(d,c,p,f,v,g,y,m,x,b,w){r.call(this,d,c,v,g,!1,y,m,x,b,w),this.key="texture",this.startTexture=null,this.endTexture=p,this.startFrame=null,this.endFrame=f,this.yoyo=m!==0},reset:function(d){r.prototype.reset.call(this);var c=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=c.texture.key,this.startFrame=c.frame.name),d&&c.setTexture(this.startTexture,this.startFrame)},update:function(d){var c=this.tween,p=this.targetIndex,f=c.targets[p];if(!f)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=d,this.elapsed<=0&&(this.elapsed=0,d=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(u.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&f.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var v=this.isPlayingForward(),g=this.isPlayingBackward();if(v||g){var y=this.elapsed,m=this.duration,x=0,b=!1;(y+=d)>=m?(x=y-m,y=m,b=!0):y<0&&(y=0);var w=h(y/m,0,1);this.elapsed=y,this.progress=w,b&&(v?(f.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(x)):(f.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(x))),this.dispatchEvent(u.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(d,c){var p=this.tween;if(!p.isSeeking){var f=p.targets[this.targetIndex],v=this.key;p.emit(d,p,v,f);var g=p.callbacks[c];g&&g.func.apply(p.callbackScope,[p,f,v].concat(g.params))}},destroy:function(){r.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});s.exports=l},86353:s=>{s.exports={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999}},83419:s=>{function o(u,l,d){var c=d?u[l]:Object.getOwnPropertyDescriptor(u,l);return!d&&c.value&&typeof c.value=="object"&&(c=c.value),!(!c||!function(p){return!!p.get&&typeof p.get=="function"||!!p.set&&typeof p.set=="function"}(c))&&(c.enumerable===void 0&&(c.enumerable=!0),c.configurable===void 0&&(c.configurable=!0),c)}function i(u,l){var d=Object.getOwnPropertyDescriptor(u,l);return!!d&&(d.value&&typeof d.value=="object"&&(d=d.value),d.configurable===!1)}function r(u,l,d,c){for(var p in l)if(l.hasOwnProperty(p)){var f=o(l,p,d);if(f!==!1){if(i((c||u).prototype,p)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+p+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(u.prototype,p,f)}else u.prototype[p]=l[p]}}function h(u,l){if(l){Array.isArray(l)||(l=[l]);for(var d=0;d<l.length;d++)r(u,l[d].prototype||l[d])}}function a(u){var l,d;if(u||(u={}),u.initialize){if(typeof u.initialize!="function")throw new Error("initialize must be a function");l=u.initialize,delete u.initialize}else if(u.Extends){var c=u.Extends;l=function(){c.apply(this,arguments)}}else l=function(){};u.Extends?(l.prototype=Object.create(u.Extends.prototype),l.prototype.constructor=l,d=u.Extends,delete u.Extends):l.prototype.constructor=l;var p=null;return u.Mixins&&(p=u.Mixins,delete u.Mixins),h(l,p),r(l,u,!0,d),l}a.extend=r,a.mixin=h,a.ignoreFinals=!1,s.exports=a},29747:s=>{s.exports=function(){}},20242:s=>{s.exports=function(){return null}},71146:s=>{s.exports=function(o,i,r,h,a){if(a===void 0&&(a=o),r>0){var u=r-o.length;if(u<=0)return null}if(!Array.isArray(i))return o.indexOf(i)===-1?(o.push(i),h&&h.call(a,i),i):null;for(var l=i.length-1;l>=0;)o.indexOf(i[l])!==-1&&i.splice(l,1),l--;if((l=i.length)===0)return null;r>0&&l>u&&(i.splice(u),l=u);for(var d=0;d<l;d++){var c=i[d];o.push(c),h&&h.call(a,c)}return i}},51067:s=>{s.exports=function(o,i,r,h,a,u){if(r===void 0&&(r=0),u===void 0&&(u=o),h>0){var l=h-o.length;if(l<=0)return null}if(!Array.isArray(i))return o.indexOf(i)===-1?(o.splice(r,0,i),a&&a.call(u,i),i):null;for(var d=i.length-1;d>=0;)o.indexOf(i[d])!==-1&&i.pop(),d--;if((d=i.length)===0)return null;h>0&&d>l&&(i.splice(l),d=l);for(var c=d-1;c>=0;c--){var p=i[c];o.splice(r,0,p),a&&a.call(u,p)}return i}},66905:s=>{s.exports=function(o,i){var r=o.indexOf(i);return r!==-1&&r<o.length&&(o.splice(r,1),o.push(i)),i}},21612:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){l===void 0&&(l=0),d===void 0&&(d=h.length);var c=0;if(r(h,l,d))for(var p=l;p<d;p++)h[p][a]===u&&c++;return c}},95428:s=>{s.exports=function(o,i,r){var h,a=[null];for(h=3;h<arguments.length;h++)a.push(arguments[h]);for(h=0;h<o.length;h++)a[0]=o[h],i.apply(r,a);return o}},36914:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),r(h,l,d)){var c,p=[null];for(c=5;c<arguments.length;c++)p.push(arguments[c]);for(c=l;c<d;c++)p[0]=h[c],a.apply(u,p)}return h}},81957:s=>{s.exports=function(o,i,r){if(!i.length)return NaN;if(i.length===1)return i[0];var h,a,u=1;if(r){if(o<i[0][r])return i[0];for(;i[u][r]<o;)u++}else for(;i[u]<o;)u++;return u>i.length&&(u=i.length),r?(h=i[u-1][r],(a=i[u][r])-o<=o-h?i[u]:i[u-1]):(h=i[u-1],(a=i[u])-o<=o-h?a:h)}},43491:s=>{var o=function(i,r){r===void 0&&(r=[]);for(var h=0;h<i.length;h++)Array.isArray(i[h])?o(i[h],r):r.push(i[h]);return r};s.exports=o},46710:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){l===void 0&&(l=0),d===void 0&&(d=h.length);var c=[];if(r(h,l,d))for(var p=l;p<d;p++){var f=h[p];(!a||a&&u===void 0&&f.hasOwnProperty(a)||a&&u!==void 0&&f[a]===u)&&c.push(f)}return c}},58731:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),r(h,l,d))for(var c=l;c<d;c++){var p=h[c];if(!a||a&&u===void 0&&p.hasOwnProperty(a)||a&&u!==void 0&&p[a]===u)return p}return null}},26546:s=>{s.exports=function(o,i,r){i===void 0&&(i=0),r===void 0&&(r=o.length);var h=i+Math.floor(Math.random()*r);return o[h]===void 0?null:o[h]}},85835:s=>{s.exports=function(o,i,r){if(i===r)return o;var h=o.indexOf(i),a=o.indexOf(r);if(h<0||a<0)throw new Error("Supplied items must be elements of the same array");return h>a||(o.splice(h,1),a===o.length-1?o.push(i):o.splice(a,0,i)),o}},83371:s=>{s.exports=function(o,i,r){if(i===r)return o;var h=o.indexOf(i),a=o.indexOf(r);if(h<0||a<0)throw new Error("Supplied items must be elements of the same array");return h<a||(o.splice(h,1),a===0?o.unshift(i):o.splice(a,0,i)),o}},70864:s=>{s.exports=function(o,i){var r=o.indexOf(i);if(r>0){var h=o[r-1],a=o.indexOf(h);o[r]=h,o[a]=i}return o}},69693:s=>{s.exports=function(o,i,r){var h=o.indexOf(i);if(h===-1||r<0||r>=o.length)throw new Error("Supplied index out of bounds");return h!==r&&(o.splice(h,1),o.splice(r,0,i)),i}},40853:s=>{s.exports=function(o,i){var r=o.indexOf(i);if(r!==-1&&r<o.length-1){var h=o[r+1],a=o.indexOf(h);o[r]=h,o[a]=i}return o}},20283:s=>{s.exports=function(o,i,r,h){var a,u=[],l=!1;if((r||h)&&(l=!0,r||(r=""),h||(h="")),i<o)for(a=o;a>=i;a--)l?u.push(r+a.toString()+h):u.push(a);else for(a=o;a<=i;a++)l?u.push(r+a.toString()+h):u.push(a);return u}},593:(s,o,i)=>{var r=i(2284);s.exports=function(h,a,u){h===void 0&&(h=0),a===void 0&&(a=null),u===void 0&&(u=1),a===null&&(a=h,h=0);for(var l=[],d=Math.max(r((a-h)/(u||1)),0),c=0;c<d;c++)l.push(h),h+=u;return l}},43886:s=>{function o(h,a,u){var l=h[a];h[a]=h[u],h[u]=l}function i(h,a){return h<a?-1:h>a?1:0}var r=function(h,a,u,l,d){for(u===void 0&&(u=0),l===void 0&&(l=h.length-1),d===void 0&&(d=i);l>u;){if(l-u>600){var c=l-u+1,p=a-u+1,f=Math.log(c),v=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*v*(c-v)/c)*(p-c/2<0?-1:1),y=Math.max(u,Math.floor(a-p*v/c+g)),m=Math.min(l,Math.floor(a+(c-p)*v/c+g));r(h,a,y,m,d)}var x=h[a],b=u,w=l;for(o(h,u,a),d(h[l],x)>0&&o(h,u,l);b<w;){for(o(h,b,w),b++,w--;d(h[b],x)<0;)b++;for(;d(h[w],x)>0;)w--}d(h[u],x)===0?o(h,u,w):o(h,++w,l),w<=a&&(u=w+1),a<=w&&(l=w-1)}};s.exports=r},88492:(s,o,i)=>{var r=i(35154),h=i(33680),a=function(u,l,d){for(var c=[],p=0;p<u.length;p++)for(var f=0;f<l.length;f++)for(var v=0;v<d;v++)c.push({a:u[p],b:l[f]});return c};s.exports=function(u,l,d){var c=r(d,"max",0),p=r(d,"qty",1),f=r(d,"random",!1),v=r(d,"randomB",!1),g=r(d,"repeat",0),y=r(d,"yoyo",!1),m=[];if(v&&h(l),g===-1)if(c===0)g=0;else{var x=u.length*l.length*p;y&&(x*=2),g=Math.ceil(c/x)}for(var b=0;b<=g;b++){var w=a(u,l,p);f&&h(w),m=m.concat(w),y&&(w.reverse(),m=m.concat(w))}return c&&m.splice(c),m}},72905:(s,o,i)=>{var r=i(19133);s.exports=function(h,a,u,l){var d;if(l===void 0&&(l=h),!Array.isArray(a))return(d=h.indexOf(a))!==-1?(r(h,d),u&&u.call(l,a),a):null;for(var c=a.length-1,p=[];c>=0;){var f=a[c];(d=h.indexOf(f))!==-1&&(r(h,d),p.push(f),u&&u.call(l,f)),c--}return p}},60248:(s,o,i)=>{var r=i(19133);s.exports=function(h,a,u,l){if(l===void 0&&(l=h),a<0||a>h.length-1)throw new Error("Index out of bounds");var d=r(h,a);return u&&u.call(l,d),d}},81409:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){if(a===void 0&&(a=0),u===void 0&&(u=h.length),d===void 0&&(d=h),r(h,a,u)){var c=u-a,p=h.splice(a,c);if(l)for(var f=0;f<p.length;f++){var v=p[f];l.call(d,v)}return p}return[]}},31856:(s,o,i)=>{var r=i(19133);s.exports=function(h,a,u){a===void 0&&(a=0),u===void 0&&(u=h.length);var l=a+Math.floor(Math.random()*u);return r(h,l)}},42169:s=>{s.exports=function(o,i,r){var h=o.indexOf(i),a=o.indexOf(r);return h!==-1&&a===-1&&(o[h]=r,!0)}},86003:s=>{s.exports=function(o,i){i===void 0&&(i=1);for(var r=null,h=0;h<i;h++)r=o.shift(),o.push(r);return r}},49498:s=>{s.exports=function(o,i){i===void 0&&(i=1);for(var r=null,h=0;h<i;h++)r=o.pop(),o.unshift(r);return r}},82011:s=>{s.exports=function(o,i,r,h){var a=o.length;if(i<0||i>a||i>=r||r>a){if(h)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},89545:s=>{s.exports=function(o,i){var r=o.indexOf(i);return r!==-1&&r>0&&(o.splice(r,1),o.unshift(i)),i}},17810:(s,o,i)=>{var r=i(82011);s.exports=function(h,a,u,l,d){if(l===void 0&&(l=0),d===void 0&&(d=h.length),r(h,l,d))for(var c=l;c<d;c++){var p=h[c];p.hasOwnProperty(a)&&(p[a]=u)}return h}},33680:s=>{s.exports=function(o){for(var i=o.length-1;i>0;i--){var r=Math.floor(Math.random()*(i+1)),h=o[i];o[i]=o[r],o[r]=h}return o}},90126:s=>{s.exports=function(o){var i=/\D/g;return o.sort(function(r,h){return parseInt(r.replace(i,""),10)-parseInt(h.replace(i,""),10)}),o}},19133:s=>{s.exports=function(o,i){if(!(i>=o.length)){for(var r=o.length-1,h=o[i],a=i;a<r;a++)o[a]=o[a+1];return o.length=r,h}}},19186:(s,o,i)=>{var r=i(82264);function h(u,l){return String(u).localeCompare(l)}function a(u,l,d,c){var p,f,v,g,y,m=u.length,x=0,b=2*d;for(p=0;p<m;p+=b)for(v=(f=p+d)+d,f>m&&(f=m),v>m&&(v=m),g=p,y=f;;)if(g<f&&y<v)l(u[g],u[y])<=0?c[x++]=u[g++]:c[x++]=u[y++];else if(g<f)c[x++]=u[g++];else{if(!(y<v))break;c[x++]=u[y++]}}s.exports=function(u,l){if(l===void 0&&(l=h),!u||u.length<2)return u;if(r.features.stableSort)return u.sort(l);var d=function(c,p){var f=c.length;if(f<=1)return c;for(var v=new Array(f),g=1;g<f;g*=2){a(c,p,g,v);var y=c;c=v,v=y}return c}(u,l);return d!==u&&a(d,null,u.length,u),u}},25630:s=>{s.exports=function(o,i,r){if(i===r)return o;var h=o.indexOf(i),a=o.indexOf(r);if(h<0||a<0)throw new Error("Supplied items must be elements of the same array");return o[h]=r,o[a]=i,o}},37105:(s,o,i)=>{s.exports={Matrix:i(54915),Add:i(71146),AddAt:i(51067),BringToTop:i(66905),CountAllMatching:i(21612),Each:i(95428),EachInRange:i(36914),FindClosestInSorted:i(81957),Flatten:i(43491),GetAll:i(46710),GetFirst:i(58731),GetRandom:i(26546),MoveDown:i(70864),MoveTo:i(69693),MoveUp:i(40853),MoveAbove:i(85835),MoveBelow:i(83371),NumberArray:i(20283),NumberArrayStep:i(593),QuickSelect:i(43886),Range:i(88492),Remove:i(72905),RemoveAt:i(60248),RemoveBetween:i(81409),RemoveRandomElement:i(31856),Replace:i(42169),RotateLeft:i(86003),RotateRight:i(49498),SafeRange:i(82011),SendToBack:i(89545),SetAll:i(17810),Shuffle:i(33680),SortByDigits:i(90126),SpliceOne:i(19133),StableSort:i(19186),Swap:i(25630)}},86922:s=>{s.exports=function(o){if(!Array.isArray(o)||!Array.isArray(o[0]))return!1;for(var i=o[0].length,r=1;r<o.length;r++)if(o[r].length!==i)return!1;return!0}},63362:(s,o,i)=>{var r=i(41836),h=i(86922);s.exports=function(a){var u="";if(!h(a))return u;for(var l=0;l<a.length;l++){for(var d=0;d<a[l].length;d++){var c=a[l][d].toString();u+=c!=="undefined"?r(c,2):"?",d<a[l].length-1&&(u+=" |")}if(l<a.length-1){u+=`
`;for(var p=0;p<a[l].length;p++)u+="---",p<a[l].length-1&&(u+="+");u+=`
`}}return u}},92598:s=>{s.exports=function(o){return o.reverse()}},21224:s=>{s.exports=function(o){for(var i=0;i<o.length;i++)o[i].reverse();return o}},98717:(s,o,i)=>{var r=i(37829);s.exports=function(h){return r(h,180)}},44657:(s,o,i)=>{var r=i(37829);s.exports=function(h,a){a===void 0&&(a=1);for(var u=0;u<a;u++)h=r(h,90);return h}},37829:(s,o,i)=>{var r=i(86922),h=i(2429);s.exports=function(a,u){if(u===void 0&&(u=90),!r(a))return null;if(typeof u!="string"&&(u=(u%360+360)%360),u===90||u===-270||u==="rotateLeft")(a=h(a)).reverse();else if(u===-90||u===270||u==="rotateRight")a.reverse(),a=h(a);else if(Math.abs(u)===180||u==="rotate180"){for(var l=0;l<a.length;l++)a[l].reverse();a.reverse()}return a}},92632:(s,o,i)=>{var r=i(37829);s.exports=function(h,a){a===void 0&&(a=1);for(var u=0;u<a;u++)h=r(h,-90);return h}},69512:(s,o,i)=>{var r=i(86003),h=i(49498);s.exports=function(a,u,l){if(u===void 0&&(u=0),l===void 0&&(l=0),l!==0&&(l<0?r(a,Math.abs(l)):h(a,l)),u!==0)for(var d=0;d<a.length;d++){var c=a[d];u<0?r(c,Math.abs(u)):h(c,u)}return a}},2429:s=>{s.exports=function(o){for(var i=o.length,r=o[0].length,h=new Array(r),a=0;a<r;a++){h[a]=new Array(i);for(var u=i-1;u>-1;u--)h[a][u]=o[u][a]}return h}},54915:(s,o,i)=>{s.exports={CheckMatrix:i(86922),MatrixToString:i(63362),ReverseColumns:i(92598),ReverseRows:i(21224),Rotate180:i(98717),RotateLeft:i(44657),RotateMatrix:i(37829),RotateRight:i(92632),Translate:i(69512),TransposeMatrix:i(2429)}},71334:s=>{var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";s.exports=function(i,r){for(var h=new Uint8Array(i),a=h.length,u=r?"data:"+r+";base64,":"",l=0;l<a;l+=3)u+=o[h[l]>>2],u+=o[(3&h[l])<<4|h[l+1]>>4],u+=o[(15&h[l+1])<<2|h[l+2]>>6],u+=o[63&h[l+2]];return a%3==2?u=u.substring(0,u.length-1)+"=":a%3==1&&(u=u.substring(0,u.length-2)+"=="),u}},53134:s=>{for(var o=new Uint8Array(256),i=0;i<64;i++)o["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(i)]=i;s.exports=function(r){var h,a,u,l,d=(r=r.substr(r.indexOf(",")+1)).length,c=.75*d,p=0;r[d-1]==="="&&(c--,r[d-2]==="="&&c--);for(var f=new ArrayBuffer(c),v=new Uint8Array(f),g=0;g<d;g+=4)h=o[r.charCodeAt(g)],a=o[r.charCodeAt(g+1)],u=o[r.charCodeAt(g+2)],l=o[r.charCodeAt(g+3)],v[p++]=h<<2|a>>4,v[p++]=(15&a)<<4|u>>2,v[p++]=(3&u)<<6|63&l;return f}},65839:(s,o,i)=>{s.exports={ArrayBufferToBase64:i(71334),Base64ToArrayBuffer:i(53134)}},91799:(s,o,i)=>{s.exports={Array:i(37105),Base64:i(65839),Objects:i(1183),String:i(31749),NOOP:i(29747),NULL:i(20242)}},41786:s=>{s.exports=function(o){var i={};for(var r in o)Array.isArray(o[r])?i[r]=o[r].slice(0):i[r]=o[r];return i}},62644:s=>{var o=function(i){var r,h,a;if(typeof i!="object"||i===null)return i;for(a in r=Array.isArray(i)?[]:{},i)h=i[a],r[a]=o(h);return r};s.exports=o},79291:(s,o,i)=>{var r=i(41212),h=function(){var a,u,l,d,c,p,f=arguments[0]||{},v=1,g=arguments.length,y=!1;for(typeof f=="boolean"&&(y=f,f=arguments[1]||{},v=2),g===v&&(f=this,--v);v<g;v++)if((a=arguments[v])!=null)for(u in a)l=f[u],f!==(d=a[u])&&(y&&d&&(r(d)||(c=Array.isArray(d)))?(c?(c=!1,p=l&&Array.isArray(l)?l:[]):p=l&&r(l)?l:{},f[u]=h(y,p,d)):d!==void 0&&(f[u]=d));return f};s.exports=h},23568:(s,o,i)=>{var r=i(75508),h=i(35154);s.exports=function(a,u,l){var d=h(a,u,null);if(d===null)return l;if(Array.isArray(d))return r.RND.pick(d);if(typeof d=="object"){if(d.hasOwnProperty("randInt"))return r.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return r.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if(typeof d=="function")return d(u);return d}},95540:s=>{s.exports=function(o,i,r){var h=typeof o;return o&&h!=="number"&&h!=="string"&&o.hasOwnProperty(i)&&o[i]!==void 0?o[i]:r}},82840:(s,o,i)=>{var r=i(35154),h=i(45319);s.exports=function(a,u,l,d,c){c===void 0&&(c=l);var p=r(a,u,c);return h(p,l,d)}},35154:s=>{s.exports=function(o,i,r,h){if(!o&&!h||typeof o=="number")return r;if(o&&o.hasOwnProperty(i))return o[i];if(h&&h.hasOwnProperty(i))return h[i];if(i.indexOf(".")!==-1){for(var a=i.split("."),u=o,l=h,d=r,c=r,p=!0,f=!0,v=0;v<a.length;v++)u&&u.hasOwnProperty(a[v])?(d=u[a[v]],u=u[a[v]]):p=!1,l&&l.hasOwnProperty(a[v])?(c=l[a[v]],l=l[a[v]]):f=!1;return p?d:f?c:r}return r}},69036:s=>{s.exports=function(o,i){for(var r=0;r<i.length;r++)if(!o.hasOwnProperty(i[r]))return!1;return!0}},1985:s=>{s.exports=function(o,i){for(var r=0;r<i.length;r++)if(o.hasOwnProperty(i[r]))return!0;return!1}},97022:s=>{s.exports=function(o,i){return o.hasOwnProperty(i)}},41212:s=>{s.exports=function(o){if(!o||typeof o!="object"||o.nodeType||o===o.window)return!1;try{if(o.constructor&&!{}.hasOwnProperty.call(o.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0}},46975:(s,o,i)=>{var r=i(41786);s.exports=function(h,a){var u=r(h);for(var l in a)u.hasOwnProperty(l)||(u[l]=a[l]);return u}},269:(s,o,i)=>{var r=i(41786);s.exports=function(h,a){var u=r(h);for(var l in a)u.hasOwnProperty(l)&&(u[l]=a[l]);return u}},18254:(s,o,i)=>{var r=i(97022);s.exports=function(h,a){for(var u={},l=0;l<a.length;l++){var d=a[l];r(h,d)&&(u[d]=h[d])}return u}},61622:s=>{s.exports=function(o,i,r){if(!o||typeof o=="number")return!1;if(o.hasOwnProperty(i))return o[i]=r,!0;if(i.indexOf(".")!==-1){for(var h=i.split("."),a=o,u=o,l=0;l<h.length;l++){if(!a.hasOwnProperty(h[l]))return!1;u=a,a=a[h[l]]}return u[h[h.length-1]]=r,!0}return!1}},1183:(s,o,i)=>{s.exports={Clone:i(41786),DeepCopy:i(62644),Extend:i(79291),GetAdvancedValue:i(23568),GetFastValue:i(95540),GetMinMaxValue:i(82840),GetValue:i(35154),HasAll:i(69036),HasAny:i(1985),HasValue:i(97022),IsPlainObject:i(41212),Merge:i(46975),MergeRight:i(269),Pick:i(18254),SetValue:i(61622)}},27902:s=>{s.exports=function(o,i){return o.replace(/%([0-9]+)/g,function(r,h){return i[Number(h)-1]})}},41836:s=>{s.exports=function(o,i,r,h){i===void 0&&(i=0),r===void 0&&(r=" "),h===void 0&&(h=3);var a=0;if(i+1>=(o=o.toString()).length)switch(h){case 1:o=new Array(i+1-o.length).join(r)+o;break;case 3:var u=Math.ceil((a=i-o.length)/2);o=new Array(a-u+1).join(r)+o+new Array(u+1).join(r);break;default:o+=new Array(i+1-o.length).join(r)}return o}},33628:s=>{s.exports=function(o,i){return i===0?o.slice(1):o.slice(0,i-1)+o.slice(i)}},27671:s=>{s.exports=function(o){return o.split("").reverse().join("")}},45650:s=>{s.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=16*Math.random()|0;return(o==="x"?i:3&i|8).toString(16)})}},35355:s=>{s.exports=function(o){return o&&o[0].toUpperCase()+o.slice(1)}},31749:(s,o,i)=>{s.exports={Format:i(27902),Pad:i(41836),RemoveAt:i(33628),Reverse:i(27671),UppercaseFirst:i(35355),UUID:i(45650)}}},t={};function n(s){var o=t[s];if(o!==void 0)return o.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}return n.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n(85454)})());var Ey=Object.defineProperty,J=(e,t,n)=>((s,o,i)=>o in s?Ey(s,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[o]=i)(e,typeof t!="symbol"?t+"":t,n);(function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0})}function t(n){if(n.ep)return;n.ep=!0;const s=function(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}(n);fetch(n.href,s)}})();const Yt={bgColors:[6470936,16732928,13766708,16729948,9377458,5803134,9193030],holeWidthRange:[80,260],wallRange:[10,50],growTime:1500,localStorageName:"square-landing-game",audio:{isBgm:!0,isSfx:!0}};class es extends Ct.GameObjects.Container{constructor(t,n,s){super(t,n??0,s??0),J(this,"btnBg"),J(this,"menuTxt"),J(this,"iconImg"),J(this,"textString",""),J(this,"iconTexture"),J(this,"downTexture",{key:"menu_btn_down"}),J(this,"upTexture",{key:"menu_btn"}),J(this,"downAudioKey","tap-a"),J(this,"upAudioKey","tap-b"),J(this,"isDown",!1),J(this,"actionCallback");const o=t.add.image(0,0,"menu_btn");o.scaleX=.8,o.scaleY=.8,this.add(o);const i=t.add.text(0,0,"",{});i.setOrigin(.5,.5),i.setStyle({align:"center",color:"#ffffffff",fontFamily:"Arial Black",fontSize:"30px",stroke:"#000000ff",strokeThickness:10}),this.add(i);const r=t.add.image(0,0,"musicOn");r.visible=!1,this.add(r),this.btnBg=o,this.menuTxt=i,this.iconImg=r,this.btnBg.setInteractive(),this.btnBg.on("pointerdown",()=>{this.isDown=!0,this.btnBg.setTexture(this.downTexture.key),Yt.audio.isSfx&&this.scene.sound.play(this.downAudioKey)}),this.btnBg.on("pointerup",()=>{this.isDown&&(this.isDown=!1,this.btnBg.setTexture(this.upTexture.key),this.actionCallback&&this.actionCallback(),Yt.audio.isSfx&&this.scene.sound.play(this.upAudioKey))}),this.btnBg.on("pointerout",()=>{this.isDown&&(this.isDown=!1,this.btnBg.setTexture(this.upTexture.key),Yt.audio.isSfx&&this.scene.sound.play(this.upAudioKey))})}setAction(t){this.menuTxt.setText(this.textString),this.btnBg.setTexture(this.upTexture.key),this.iconTexture&&this.iconTexture.key&&(this.iconImg.setTexture(this.iconTexture.key),this.iconImg.setVisible(!0)),this.actionCallback=t}}class ql{constructor(t){J(this,"gameObject"),J(this,"target","GAME_OBJECT"),J(this,"targetName",""),this.gameObject=t,t.__ActionTargetComp=this}static getComponent(t){return t.__ActionTargetComp}static getTargetGameObject(t,n){const s=ql.getComponent(t);if(s)switch(s.target){case"GAME_OBJECT":return t.gameObject;case"ARG_1":return n[0];case"ARG_2":return n[1];case"ARG_3":return n[2];case"ARG_4":return n[3];case"ARG_5":return n[4];case"ARG_6":return n[5];case"ARG_7":return n[6];case"ARG_8":return n[7]}return t.gameObject}}class Ji{constructor(t){J(this,"_scene"),J(this,"_gameObject"),J(this,"_parent"),J(this,"_children"),this._parent=t,t instanceof Ji?(this._scene=t.scene,this._gameObject=t.gameObject,t.add(this)):t instanceof Ct.GameObjects.GameObject?(this._scene=t.scene,this._gameObject=t):this._scene=t;const n=this.awake!==Ji.prototype.awake,s=this.start!==Ji.prototype.start,o=this.update!==Ji.prototype.update,i=this.destroy!==Ji.prototype.destroy;if(n&&this.scene.events.once("scene-awake",this.awake,this),s&&this.scene.events.once(Ct.Scenes.Events.UPDATE,this.start,this),o&&this.scene.events.on(Ct.Scenes.Events.UPDATE,this.update,this),n||s||o||i){const r=()=>{this.scene.events.off("scene-awake",this.awake,this),this.scene.events.off(Ct.Scenes.Events.UPDATE,this.start,this),this.scene.events.off(Ct.Scenes.Events.UPDATE,this.update,this),i&&this.destroy()};this.gameObject?this.gameObject.on(Ct.GameObjects.Events.DESTROY,r):this.scene.events.on(Ct.Scenes.Events.SHUTDOWN,r)}}getActionTargetObject(t){return ql.getTargetGameObject(this,t)}get scene(){return this._scene}get gameObject(){return this._gameObject}get parent(){return this._parent}get children(){return this._children||(this._children=[]),this._children}add(t){this.children.push(t)}executeChildren(...t){if(this._children)for(const n of this._children)n.execute(...t)}execute(...t){}awake(){}start(){}update(){}destroy(){}}class Py extends Ji{constructor(t){super(t)}chckRange(t,n,s){const o=n-s-t;return console.log("range: ",o),t<=n-s}}class Jr extends Ct.GameObjects.Sprite{constructor(t,n,s,o,i){super(t,n,s,o),this.setOrigin(i.x,i.y),t.add.existing(this)}tweenTo(t){this.scene.tweens.add({targets:this,x:t,duration:500,ease:"Cubic.easeOut"})}}class Oy extends Ct.GameObjects.Sprite{constructor(t,n,s,o){super(t,n,s,o),this.successful=0,this.setScale(.2),t.add.existing(this)}}class ky extends Ct.GameObjects.BitmapText{constructor(t,n,s,o,i,r,h){super(t,n,s,o,i,r),this.setOrigin(.5),this.setScale(.4),this.setTint(h),t.add.existing(this)}updateText(t){this.setText(t)}}const Ku=["tap and hold to grow","release to drop"],qu="On no!!";class $l extends Ji{constructor(t){super(t),J(this,"gameKey","square-landing-game")}getConfig(t,n){const s=JSON.parse(localStorage.getItem(this.gameKey)??"{}");for(const o in s)if(o===t)return s[t];return this.setConfig(t,n),JSON.parse(localStorage.getItem(this.gameKey)??"{}")}setConfig(t,n){const s={...JSON.parse(localStorage.getItem(this.gameKey)??"{}")};s[t]=n,localStorage.setItem(this.gameKey,JSON.stringify(s))}}class My extends Ct.Scene{constructor(){super("Level"),J(this,"inputRangeRect"),J(this,"backBtn"),J(this,"fitRangeChckerScript"),J(this,"localStorageNode"),this.localStorageNode=new $l(this)}editorCreate(){const t=this.add.rectangle(0,0,640,960);t.setOrigin(0,0),t.alpha=1e-5,t.isFilled=!0;const n=new es(this,60,60);this.add.existing(n);const s=new Py(this);n.iconTexture={key:"exitLeft"},n.downTexture={key:"button_round_down"},n.upTexture={key:"button_round"},this.inputRangeRect=t,this.backBtn=n,this.fitRangeChckerScript=s,this.events.emit("scene-awake")}create(){this.editorCreate();const t=Ct.Utils.Array.GetRandom(Yt.bgColors);this.cameras.main.setBackgroundColor(t),this.gameWidth=this.game.config.width,this.gameHeight=this.game.config.height,this.saveData={level:1},this.placeWalls(),this.square=new Oy(this,this.gameWidth/2,-400,"square"),this.squareText=new ky(this,this.square.x,this.square.y,"font",this.saveData.level,120,t),this.squareTweenTargets=[this.square,this.squareText],this.levelText=this.add.bitmapText(this.gameWidth/2,0,"font","level "+this.saveData.level,60),this.levelText.setOrigin(.5,0),this.updateLevel(),this.inputRangeRect.setInteractive(),this.inputRangeRect.on("pointerdown",this.startGrowing,this),this.inputRangeRect.on("pointerup",this.stopGrowing,this),this.createExit()}createExit(){this.backBtn.setAction(()=>{this.scene.start("Main")}),this.backBtn.iconImg.x-=3,this.backBtn.iconImg.y-=7}placeWalls(){this.leftSquare=new Jr(this,0,this.gameHeight,"base",new Ct.Math.Vector2(1,1)),this.rightSquare=new Jr(this,this.gameWidth,this.gameHeight,"base",new Ct.Math.Vector2(0,1)),this.leftWall=new Jr(this,0,this.gameHeight-this.leftSquare.height,"top",new Ct.Math.Vector2(1,1)),this.rightWall=new Jr(this,this.gameWidth,this.gameHeight-this.leftSquare.height,"top",new Ct.Math.Vector2(0,1))}updateLevel(){let t=Ct.Math.Between(Yt.holeWidthRange[0],Yt.holeWidthRange[1]),n=Ct.Math.Between(Yt.wallRange[0],Yt.wallRange[1]);this.leftSquare.tweenTo((this.gameWidth-t)/2),this.rightSquare.tweenTo((this.gameWidth+t)/2),this.leftWall.tweenTo((this.gameWidth-t)/2-n),this.rightWall.tweenTo((this.gameWidth+t)/2+n),this.tweens.add({targets:this.squareTweenTargets,y:150,scaleX:.2,scaleY:.2,angle:50,duration:500,ease:"Cubic.easeOut",onComplete:()=>{this.rotateTween=this.tweens.add({targets:this.squareTweenTargets,angle:40,duration:300,yoyo:!0,repeat:-1}),this.square.successful==0&&this.addInfo(t,n),this.currentGameMode=1}})}addInfo(t,n){this.infoGroup=this.add.group();let s=this.add.sprite(this.gameWidth/2,this.gameHeight-this.leftSquare.displayHeight,"square");s.displayWidth=t+n,s.displayHeight=t+n,s.alpha=.3,s.setOrigin(.5,1),this.infoGroup.add(s);let o=this.add.bitmapText(this.gameWidth/2,s.y-s.displayHeight-20,"font","land here",48);o.setOrigin(.5,1),this.infoGroup.add(o);let i=this.add.bitmapText(this.gameWidth/2,250,"font",Ku[0],40);i.setOrigin(.5,0),this.infoGroup.add(i);let r=this.add.bitmapText(this.gameWidth/2,300,"font",Ku[1],40);r.setOrigin(.5,0),this.infoGroup.add(r)}startGrowing(){this.currentGameMode==1&&(this.currentGameMode=2,this.square.successful==0&&this.infoGroup.toggleVisible(),this.growTween=this.tweens.add({targets:this.squareTweenTargets,scaleX:1,scaleY:1,duration:Yt.growTime}))}stopGrowing(){this.currentGameMode==2&&(this.currentGameMode=0,this.growTween.stop(),this.rotateTween.stop(),this.rotateTween=this.tweens.add({targets:this.squareTweenTargets,angle:0,duration:300,ease:"Cubic.easeOut",onComplete:()=>{if(this.square.displayWidth<=this.rightSquare.x-this.leftSquare.x)this.tweens.add({targets:this.squareTweenTargets,y:this.gameHeight+this.square.displayWidth,duration:600,ease:"Cubic.easeIn",onComplete:()=>{this.levelText.text=qu,this.gameOver()}});else{const t=this.fitRangeChckerScript.chckRange(this.square.displayWidth,this.rightWall.x,this.leftWall.x);this.fallAndBounce(t)}}}))}fallAndBounce(t){let n=this.gameHeight-this.leftSquare.displayHeight-this.square.displayHeight/2,s=t?"Yeah!!!":qu;t?this.square.successful++:n=this.gameHeight-this.leftSquare.displayHeight-this.leftWall.displayHeight-this.square.displayHeight/2,this.tweens.add({targets:this.squareTweenTargets,y:n,duration:600,ease:"Bounce.easeOut",onComplete:()=>{this.levelText.text=s,t?this.time.addEvent({delay:1e3,callback:()=>{this.square.successful==this.saveData.level?(this.saveData.level++,this.localStorageNode.setConfig(Yt.localStorageName,this.saveData.level),this.scene.start("Level")):(this.squareText.updateText(this.saveData.level-this.square.successful),this.levelText.text="level "+this.saveData.level,this.updateLevel())}}):this.gameOver()}})}gameOver(){this.time.addEvent({delay:1e3,callback:()=>{this.scene.start("Level")}})}}const _y=Phaser.Renderer.WebGL.Utils,Ay={renderWebGL:function(e,t,n,s){if(t.dirty&&(t.updateTexture(),t.dirty=!1),t.width!==0&&t.height!==0){n.addToRenderList(t);var o=t.frame,i=o.width,r=o.height,h=_y.getTintAppendFloatAlpha,a=e.pipelines.set(t.pipeline,t),u=a.setTexture2D(o.glTexture,t);e.pipelines.preBatch(t),a.batchTexture(t,o.glTexture,i,r,t.x,t.y,i/t.resolution,r/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,i,r,h(t.tintTopLeft,n.alpha*t._alphaTL),h(t.tintTopRight,n.alpha*t._alphaTR),h(t.tintBottomLeft,n.alpha*t._alphaBL),h(t.tintBottomRight,n.alpha*t._alphaBR),t.tintFill,0,0,n,s,!1,u),e.pipelines.postBatch(t)}},renderCanvas:function(e,t,n,s){t.dirty&&(t.updateTexture(),t.dirty=!1),t.width!==0&&t.height!==0&&(n.addToRenderList(t),e.batchSprite(t,t.frame,n,s))}},Ry=Phaser.Display.Color,Ly={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},drawFrame(e,t,n,s,o,i,r,h,a,u){var l=this.scene.sys.textures.getFrame(e,t);if(!l)return this;var d=l.cutWidth,c=l.cutHeight;n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=d),i===void 0&&(i=c),r===void 0&&(r=0),h===void 0&&(h=0),a===void 0&&(a=d),u===void 0&&(u=c);var p=l.cutX+r,f=l.cutY+h;return this.context.drawImage(l.source.image,p,f,a,u,n,s,o,i),this.dirty=!0,this},getDataURL(e,t){return this.canvas.toDataURL(e,t)},getPixel(e,t,n){n===void 0&&(n=new Ry);var s=this.context.getImageData(e,t,1,1);return n.setTo(s.data[0],s.data[1],s.data[2],s.data[3]),n},setPixel(e,t,n,s,o,i){if(typeof n!="number"){var r=n;n=r.red,s=r.green,o=r.blue,i=r.alpha}i===void 0&&(i=n!==0||s!==0||o!==0?255:0);var h=this.context.createImageData(1,1);return h.data[0]=n,h.data[1]=s,h.data[2]=o,h.data[3]=i,this.context.putImageData(h,e,t),this.dirty=!0,this}};var eg=function(e,t,n,s,o,i,r){var h,a=e.sys.textures,u=e.renderer;s===void 0&&(s=0),o===void 0&&(o=0),i===void 0&&(i=t.width),r===void 0&&(r=t.height);var l=(h=a.exists(n)?a.get(n):a.createCanvas(n,i,r)).getSourceImage();l.width!==i&&(l.width=i),l.height!==r&&(l.height=r);var d=l.getContext("2d",{willReadFrequently:!0});d.clearRect(0,0,i,r),d.drawImage(t,s,o,i,r),u.gl&&h&&u.canvasToTexture(l,h.source[0].glTexture,!0,0)};const Dy={updateTexture(e,t){if(e){var n=this.resolution;n!==1&&(this.context.save(),this.context.scale(n,n)),t?e.call(t,this.canvas,this.context):e(this.canvas,this.context),n!==1&&this.context.restore()}this.canvas.width===this.frame.width&&this.canvas.height===this.frame.height||this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"Canvas Game Object"}),this.dirty=!1;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},generateTexture(e,t,n,s,o){var i=this.canvas;return s===void 0?s=i.width:s*=this.resolution,o===void 0?o=i.height:o*=this.resolution,eg(this.scene,i,e,t,n,s,o),this},loadTexture(e,t){var n=this.scene.sys.textures.getFrame(e,t);return n?(this.width!==n.cutWidth||this.height!==n.cutHeight?this.setSize(n.cutWidth,n.cutHeight):this.clear(),this.drawFrame(e,t),this.dirty=!0,this):this}};var $u=!1,Ao=function(e){if(!$u){e===void 0&&(e=60);var t=Phaser.VERSION.split("."),n=parseInt(t[0]);if(n===3){var s=parseInt(t[1]);s<e&&console.error(`Minimum supported version : ${n}.${s}`)}else console.error(`Can't supported version : ${n}`);$u=!0}};Ao();const Zu=Phaser.Display.Canvas.CanvasPool,Fy=Phaser.GameObjects.GameObject,By=Phaser.Utils.String.UUID;let Bn=class extends Fy{constructor(e,t,n,s,o,i){t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=1),i===void 0&&(i=1),super(e,"rexCanvas"),this.renderer=e.sys.game.renderer,this._width=s,this._height=o,this.resolution=i,s=Math.max(Math.ceil(s*this.resolution),1),o=Math.max(Math.ceil(o*this.resolution),1),this.canvas=Zu.create(this,s,o),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.dirty=!1,this.setPosition(t,n),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline(!0),this._crop=this.resetCropObject(),this._textureKey=By(),this.texture=e.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.dirty=!0}preDestroy(){Zu.remove(this.canvas),this.canvas=null,this.context=null;var e=this.texture;e&&e.destroy()}setResolution(e){if(this.resolution===e)return this;this.resolution=e;var t=Math.max(Math.ceil(this.width*e),1),n=Math.max(Math.ceil(this.height*e),1);return this.canvas.width=t,this.canvas.height=n,this.frame.source.resolution=e,this.dirty=!0,this}get width(){return this._width}set width(e){this.setSize(e,this._height)}get height(){return this._height}set height(e){this.setSize(this._width,e)}setCanvasSize(e,t){return this._width===e&&this._height===t||(this._width=e,this._height=t,this.updateDisplayOrigin(),e=Math.max(Math.ceil(e*this.resolution),1),t=Math.max(Math.ceil(t*this.resolution),1),this.canvas.width=e,this.canvas.height=t,this.frame.setSize(e,t),this.dirty=!0),this}setSize(e,t){return this.setCanvasSize(e,t),this}get displayWidth(){return this.scaleX*this._width}set displayWidth(e){this.scaleX=e/this._width}get displayHeight(){return this.scaleY*this._height}set displayHeight(e){this.scaleY=e/this._height}setDisplaySize(e,t){return this.displayWidth=e,this.displayHeight=t,this}getCanvas(e){return e||(this.dirty=!0),this.canvas}getContext(e){return e||(this.dirty=!0),this.context}needRedraw(){return this.dirty=!0,this}resize(e,t){return this.setSize(e,t),this}};const ge=Phaser.GameObjects.Components;Phaser.Class.mixin(Bn,[ge.Alpha,ge.BlendMode,ge.Crop,ge.Depth,ge.Flip,ge.GetBounds,ge.Mask,ge.Origin,ge.Pipeline,ge.PostPipeline,ge.ScrollFactor,ge.Tint,ge.Transform,ge.Visible,Ay,Ly,Dy]);const qi=Phaser.Utils.Objects.GetValue;let Zl=class{constructor(e,t,n,s,o){e===void 0&&(e=0),t===void 0&&(t=e),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),this.cornerRadius={},this._width=0,this._height=0,this.setTo(e,t,n,s,o)}setTo(e,t,n,s,o){return this.setPosition(e,t),this.setRadius(o),this.setSize(n,s),this}setPosition(e,t){return this.x=e,this.y=t,this}setRadius(e){return e===void 0&&(e=0),this.radius=e,this}setSize(e,t){return this.width=e,this.height=t,this}get minWidth(){var e=this.cornerRadius;return Math.max(e.tl.x+e.tr.x,e.bl.x+e.br.x)}get minHeight(){var e=this.cornerRadius;return Math.max(e.tl.y+e.bl.y,e.tr.y+e.br.y)}get width(){return this._width}set width(e){e==null&&(e=0),this._width=Math.max(e,this.minWidth)}get height(){return this._height}set height(e){e==null&&(e=0),this._height=Math.max(e,this.minHeight)}get radius(){var e=this.cornerRadius;return Math.max(e.tl.x,e.tl.y,e.tr.x,e.tr.y,e.bl.x,e.bl.y,e.br.x,e.br.y)}set radius(e){var t,n;typeof e=="number"?(t=e,n=e):(t=qi(e,"x",0),n=qi(e,"y",0));var s=this.cornerRadius;s.tl=Qr(qi(e,"tl",void 0),t,n),s.tr=Qr(qi(e,"tr",void 0),t,n),s.bl=Qr(qi(e,"bl",void 0),t,n),s.br=Qr(qi(e,"br",void 0),t,n)}get radiusTL(){var e=this.cornerRadius.tl;return Math.max(e.x,e.y)}set radiusTL(e){ta(this.cornerRadius.tl,e)}get radiusTR(){var e=this.cornerRadius.tr;return Math.max(e.x,e.y)}set radiusTR(e){ta(this.cornerRadius.tr,e)}get radiusBL(){var e=this.cornerRadius.bl;return Math.max(e.x,e.y)}set radiusBL(e){ta(this.cornerRadius.bl,e)}get radiusBR(){var e=this.cornerRadius.br;return Math.max(e.x,e.y)}set radiusBR(e){ta(this.cornerRadius.br,e)}};var Qr=function(e,t,n){return e===void 0?e={x:t,y:n}:typeof e=="number"&&(e={x:e,y:e}),ig(e),e},ta=function(e,t){typeof t=="number"?(e.x=t,e.y=t):(e.x=qi(t,"x",0),e.y=qi(t,"y",0)),ig(e)},ig=function(e){e.convex=e.x>=0||e.y>=0,e.x=Math.abs(e.x),e.y=Math.abs(e.y)};const Ju=Phaser.Math.DegToRad;var sg=function(e,t,n,s,o,i,r){var h,a,u,l,d,c=new Zl(t,n,s,o,i),p=c.minWidth,f=c.minHeight,v=s>=p?1:s/p,g=o>=f?1:o/f,y=c.cornerRadius;e.save(),e.beginPath(),e.translate(t,n),h=y.tl,ia(h)?(a=h.x*v,u=h.y*g,ea(h)?Ii(e,a,u,a,u,180,270,!1,r):Ii(e,0,0,a,u,90,0,!0,r),l=0,d=u):(e.lineTo(0,0),l=0,d=0),h=y.tr,ia(h)?(a=h.x*v,u=h.y*g,ea(h)?Ii(e,s-a,u,a,u,270,360,!1,r):Ii(e,s,0,a,u,180,90,!0,r)):e.lineTo(s,0),h=y.br,ia(h)?(a=h.x*v,u=h.y*g,ea(h)?Ii(e,s-a,o-u,a,u,0,90,!1,r):Ii(e,s,o,a,u,270,180,!0,r)):e.lineTo(s,o),h=y.bl,ia(h)?(a=h.x*v,u=h.y*g,ea(h)?Ii(e,a,o-u,a,u,90,180,!1,r):Ii(e,0,o,a,u,360,270,!0,r)):e.lineTo(0,o),e.lineTo(l,d),e.closePath(),e.restore()},ea=function(e){return!e.hasOwnProperty("convex")||e.convex},ia=function(e){return e.x>0&&e.y>0},Ii=function(e,t,n,s,o,i,r,h,a){if(h&&r>i?r-=360:!h&&r<i&&(r+=360),i=Ju(i),r=Ju(r),a==null)e.ellipse(t,n,s,o,0,i,r,h);else for(var u,l,d,c=(r-i)/(a+=1),p=0;p<=a;p++)d=i+c*p,u=t+s*Math.cos(d),l=n+o*Math.sin(d),e.lineTo(u,l)};const js=Phaser.Utils.Objects.GetValue;class Iy extends Bn{constructor(t,n,s,o,i,r){super(t,n,s),this.type="rexCircleMaskImage",this.setTexture(o,i,r)}setTexture(t,n,s){typeof n=="object"&&(s=n,n=void 0),typeof s=="string"&&(s={maskType:s});var o=js(s,"maskType",0),i=js(s,"backgroundColor",void 0),r=js(s,"strokeColor",void 0),h=js(s,"strokeWidth",r!=null?10:0);if(o===void 0?o=0:typeof o=="string"&&(o=Xy[o]),this._textureKey=t,this._frameName=n,o===null)return this.loadTexture(t,n),this.dirty=!0,this;var a=this.scene.sys.textures.getFrame(t,n);if(!a)return this;a.cutWidth!==this.width||a.cutHeight!==this.height?this.setCanvasSize(a.cutWidth,a.cutHeight):this.clear();var u=this.canvas,l=this.context,d=u.width,c=u.height;i!=null&&(l.fillStyle=i,l.fillRect(0,0,d,c)),l.save(),l.beginPath();var p=h/2;switch(o){case 1:var f=(m=Math.floor(d/2))-p,v=(x=Math.floor(c/2))-p;l.ellipse(m,x,f,v,0,0,2*Math.PI);break;case 2:var g=js(s,"radius",0),y=js(s,"iteration",void 0);sg(l,p,p,d-h,c-h,g,y);break;default:var m=Math.floor(d/2),x=Math.floor(c/2),b=Math.min(m,x)-p;l.arc(m,x,b,0,2*Math.PI)}return r!=null&&(l.strokeStyle=r,l.lineWidth=h,l.stroke()),l.clip(),this.loadTexture(t,n),l.restore(),this.dirty=!0,this}resize(t,n){return this.setDisplaySize(t,n),this}}const Xy={circle:0,ellipse:1,roundRectangle:2},zy=Phaser.Math.Linear,Qu=Phaser.Math.Percent,Yy={setValue(e,t,n){return e==null||(t!==void 0&&(e=Qu(e,t,n)),this.value=e),this},addValue(e,t,n){return t!==void 0&&(e=Qu(e,t,n)),this.value+=e,this},getValue(e,t){var n=this.value;return e!==void 0&&t!==void 0&&(n=zy(e,t,n)),n}},Fr={setEventEmitter(e,t){return t===void 0&&(t=Phaser.Events.EventEmitter),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Ny=Phaser.Scene;var Fs=function(e){return e instanceof Ny},In=function(e){return e==null||typeof e!="object"?null:Fs(e)?e:e.scene&&Fs(e.scene)?e.scene:e.parent&&e.parent.scene&&Fs(e.parent.scene)?e.parent.scene:null};const Gy=Phaser.Game;var td=function(e){return e instanceof Gy},Mn=function(e){return e==null||typeof e!="object"?null:td(e)?e:td(e.game)?e.game:Fs(e)?e.sys.game:Fs(e.scene)?e.scene.sys.game:void 0};const Uy=Phaser.Utils.Objects.GetValue;class Rt{constructor(t,n){this.setParent(t),this.isShutdown=!1,this.setEventEmitter(Uy(n,"eventEmitter",!0)),this.parent&&(this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.once("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))}shutdown(t){this.isShutdown||(this.parent&&(this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onEnvDestroy,this):this.parent===this.game?this.game.events.off("shutdown",this.onEnvDestroy,this):this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this)),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.game=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onEnvDestroy(){this.destroy(!0)}onParentDestroy(t,n){this.destroy(n)}setParent(t){return this.parent=t,this.scene=In(t),this.game=Mn(t),this}}Object.assign(Rt.prototype,Fr);const Wy=Phaser.Utils.Objects.GetValue;class Ro extends Rt{constructor(t,n){super(t,n),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Wy(n,"tickingMode",1))}boot(){this.tickingMode!==2||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){typeof t=="string"&&(t=Vy[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,this.tickingMode===1&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isPaused=!1,this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const Vy={no:0,lazy:1,always:2},jy=Phaser.Utils.Objects.GetValue;class Hy extends Ro{constructor(t,n){super(t,n);var s=this.scene?"update":"step";this.tickEventName=jy(n,"tickEventName",s),this.isSceneTicker=!Ky(this.tickEventName)}startTicking(){super.startTicking(),this.isSceneTicker?this.scene.sys.events.on(this.tickEventName,this.update,this):this.game.events.on(this.tickEventName,this.update,this)}stopTicking(){super.stopTicking(),this.isSceneTicker&&this.scene?this.scene.sys.events.off(this.tickEventName,this.update,this):this.game&&this.game.events.off(this.tickEventName,this.update,this)}}var Ky=function(e){return e==="step"||e==="poststep"};const Ti=Phaser.Utils.Objects.GetValue,ed=Phaser.Math.Clamp;let ng=class{constructor(e){this.resetFromJSON(e)}resetFromJSON(e){this.state=Ti(e,"state",Wn),this.timeScale=Ti(e,"timeScale",1),this.delay=Ti(e,"delay",0),this.repeat=Ti(e,"repeat",0),this.repeatCounter=Ti(e,"repeatCounter",0),this.repeatDelay=Ti(e,"repeatDelay",0),this.duration=Ti(e,"duration",0),this.nowTime=Ti(e,"nowTime",0),this.justRestart=Ti(e,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,repeatDelay:this.repeatDelay,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(e){return this.timeScale=e,this}setDelay(e){return e===void 0&&(e=0),this.delay=e,this}setDuration(e){return this.duration=e,this}setRepeat(e){return this.repeat=e,this}setRepeatInfinity(){return this.repeat=-1,this}setRepeatDelay(e){return this.repeatDelay=e,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Hs:Vn,this.repeatCounter=0,this}stop(){return this.state=Wn,this}update(e,t){this.state!==Wn&&this.state!==sa&&t!==0&&this.timeScale!==0&&(this.nowTime+=t*this.timeScale,this.justRestart=!1,this.nowTime>=this.duration?this.repeat===-1||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration,this.repeatDelay>0&&(this.nowTime-=this.repeatDelay,this.state=id)):(this.nowTime=this.duration,this.state=sa):this.nowTime>=0&&(this.state=Hs))}get t(){var e;switch(this.state){case Wn:case Vn:case id:e=0;break;case Hs:e=this.nowTime/this.duration;break;case sa:e=1}return ed(e,0,1)}set t(e){(e=ed(e,-1,1))<0?(this.state=Vn,this.nowTime=-this.delay*e):(this.state=Hs,this.nowTime=this.duration*e,e===1&&this.repeat!==0&&this.repeatCounter++)}setT(e){return this.t=e,this}get isIdle(){return this.state===Wn}get isDelay(){return this.state===Vn}get isCountDown(){return this.state===Hs}get isRunning(){return this.state===Vn||this.state===Hs}get isDone(){return this.state===sa}get isOddIteration(){return!(1&~this.repeatCounter)}get isEvenIteration(){return!(1&this.repeatCounter)}};const Wn=0,Vn=1,Hs=2,id=3,sa=-1;class qy extends Hy{constructor(t,n){super(t,n),this.timer=new ng}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const jn=Phaser.Utils.Objects.GetValue,sd=Phaser.Utils.Objects.GetAdvancedValue,$y=Phaser.Tweens.Builders.GetEaseFunction;class Xn extends qy{resetFromJSON(t){return this.timer.resetFromJSON(jn(t,"timer")),this.setEnable(jn(t,"enable",!0)),this.setTarget(jn(t,"target",this.parent)),this.setDelay(sd(t,"delay",0)),this.setDuration(sd(t,"duration",1e3)),this.setEase(jn(t,"ease","Linear")),this.setRepeat(jn(t,"repeat",0)),this}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setTarget(t){return t===void 0&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return t===void 0&&(t="Linear"),this.ease=t,this.easeFn=$y(t),this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return t===void 0&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateTarget(this.target,this.timer),this.complete()),this}update(t,n){if(!this.isRunning||!this.enable||this.parent.hasOwnProperty("active")&&!this.parent.active)return this;var s=this.target,o=this.timer;return o.update(t,n),o.isDelay||this.updateTarget(s,o),this.emit("update",s,this),o.isDone&&this.complete(),this}updateTarget(t,n){}}const Xi=Phaser.Utils.Objects.GetValue,Zy=Phaser.Math.Linear;class Qe extends Xn{constructor(t,n){super(t,n),this.resetFromJSON(),this.boot()}start(t){if(this.timer.isRunning)return this;var n=this.target;this.propertyKey=Xi(t,"key","value");var s=n[this.propertyKey];return this.fromValue=Xi(t,"from",s),this.toValue=Xi(t,"to",s),this.setEase(Xi(t,"ease",this.ease)),this.setDuration(Xi(t,"duration",this.duration)),this.setRepeat(Xi(t,"repeat",0)),this.setDelay(Xi(t,"delay",0)),this.setRepeatDelay(Xi(t,"repeatDelay",0)),this.timer.setDuration(this.duration).setRepeat(this.repeat).setDelay(this.delay).setRepeatDelay(this.repeatDelay),n[this.propertyKey]=this.fromValue,super.start(),this}updateTarget(t,n){var s=n.t;s=this.easeFn(s),t[this.propertyKey]=Zy(this.fromValue,this.toValue,s)}}const Jy=Phaser.Math.Percent,Qy={setEaseValuePropName(e){return this.easeValuePropName=e,this},setEaseValueDuration(e){return this.easeValueDuration=e,this},setEaseValueFunction(e){return this.easeFunction=e,this},stopEaseValue(){return this.easeValueTask&&this.easeValueTask.stop(),this},easeValueTo(e,t,n){return e==null||(t!==void 0&&(e=Jy(e,t,n)),this.easeValueTask===void 0&&(this.easeValueTask=new Qe(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,to:e,duration:this.easeValueDuration,ease:this.easeFunction})),this},easeValueRepeat(e,t,n,s){return n===void 0&&(n=-1),s===void 0&&(s=0),this.easeValueTask===void 0&&(this.easeValueTask=new Qe(this,{eventEmitter:null})),this.easeValueTask.restart({key:this.easeValuePropName,from:e,to:t,duration:this.easeValueDuration,ease:this.easeFunction,repeat:n,repeatDelay:s}),this}},Hn=Phaser.Utils.Objects.GetValue,t0=Phaser.Math.Clamp;function as(e){class t extends e{bootProgressBase(s){this.eventEmitter=Hn(s,"eventEmitter",this);var o=Hn(s,"valuechangeCallback",null);if(o!==null){var i=Hn(s,"valuechangeCallbackScope",void 0);this.eventEmitter.on("valuechange",o,i)}return this.setEaseValuePropName("value").setEaseValueDuration(Hn(s,"easeValue.duration",0)).setEaseValueFunction(Hn(s,"easeValue.ease","Linear")),this}get value(){return this._value}set value(s){s=t0(s,0,1);var o=this._value,i=o!=s;this.dirty=this.dirty||i,this._value=s,i&&this.eventEmitter.emit("valuechange",this._value,o,this.eventEmitter)}}return Object.assign(t.prototype,Yy,Qy),t}const e0=Phaser.Utils.String.Pad;var dt=function(e,t,n){if(e==null)return e;switch(typeof e){case"string":default:return e;case"number":return`#${e0(Math.floor(e).toString(16),6,"0",1)}`;case"function":return e(t,n);case"object":return e.hasOwnProperty("r")?e.hasOwnProperty("a")?`rgba(${e.r},${e.g},${e.b},${e.a})`:`rgb(${e.r},${e.g},${e.b})`:e.hasOwnProperty("h")?e.hasOwnProperty("a")?`hsla(${e.h},${e.s},${e.l},${e.a})`:`hsl(${e.h},${e.s},${e.l})`:e}},Ho=function(e,t,n,s,o,i,r,h,a,u,l,d){u===void 0&&(u=0),l===void 0&&(l=2*Math.PI),d===void 0&&(d=!1),t.beginPath(),t.ellipse(n,s,o,i,0,u,l,d),r!=null&&(t.fillStyle=r,t.fill()),h!=null&&(t.strokeStyle=h,t.lineWidth=a,t.stroke())};const nd=["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"],i0=[15792383,16444375,65535,8388564,15794175,16119260,16770244,0,16772045,255,9055202,10824234,14596231,6266528,8388352,13789470,16744272,6591981,16775388,14423100,65535,139,35723,12092939,11119017,11119017,25600,12433259,9109643,5597999,16747520,10040012,9109504,15308410,9419919,4734347,3100495,3100495,52945,9699539,16716947,49151,6908265,6908265,2003199,11674146,16775920,2263842,16711935,14474460,16316671,16766720,14329120,8421504,8421504,32768,11403055,15794160,16738740,13458524,4915330,16777200,15787660,15132410,16773365,8190976,16775885,11393254,15761536,14745599,16448210,13882323,13882323,9498256,16758465,16752762,2142890,8900346,7833753,7833753,11584734,16777184,65280,3329330,16445670,16711935,8388608,6737322,205,12211667,9662683,3978097,8087790,64154,4772300,13047173,1644912,16121850,16770273,16770229,16768685,128,16643558,8421376,7048739,16753920,16729344,14315734,15657130,10025880,11529966,14381203,16773077,16767673,13468991,16761035,14524637,11591910,8388736,6697881,16711680,12357519,4286945,9127187,16416882,16032864,3050327,16774638,10506797,12632256,8900331,6970061,7372944,7372944,16775930,65407,4620980,13808780,32896,14204888,16737095,4251856,15631086,16113331,16777215,16119285,16776960,10145074];for(var rd,Fl={},na=0,s0=nd.length;na<s0;na++)rd=nd[na].toLowerCase(),Fl[rd]=i0[na];var Bl=function(e){return typeof e!="string"||(e.startsWith("#")?e=parseInt(e.substring(1),16):e.startsWith("0x")?e=parseInt(e.substring(2),16):(t=(t=e).toLowerCase(),e=Fl.hasOwnProperty(t)?Fl[t]:null)),e;var t},Cr=function(e){return e>>16&255},Er=function(e){return e>>8&255},Pr=function(e){return 255&e},ad=function(e,t){return t===void 0&&(t={}),t.r=e>>16&255,t.g=e>>8&255,t.b=255&e,t};const n0=Phaser.Math.DegToRad,Ko=Phaser.Math.Linear;var Kn,qn;const qo=Phaser.Math.PI2;var r0=function(){var e,t,n=this.radius,s=this.thickness*this.radius,o=this.radius-s/2,i=this.radius-s,r=(this.canvas,this.context),h=this.anticlockwise,a=this.startAngle,u=this.endAngle,l=this._deltaAngle;this.trackColor&&s>0&&(r.save(),Ho(0,r,n,n,o,o,void 0,this.trackColor,s,a,u,h),r.restore()),this.barColor&&o>0&&(e=this.value>=1?u:h?(a-l*this.value+qo)%qo:(a+l*this.value)%qo,r.save(),this.barColor2?function(d,c,p,f,v,g,y,m,x,b,w,T,S){b===void 0&&(b=0),w===void 0&&(w=2*Math.PI),T===void 0&&(T=!1),S===void 0&&(S=2),y=Bl(y),m=Bl(m),Kn=ad(y,Kn),qn=ad(m,qn);var C,E=n0(S);(C=T?b-w:w-b)<0&&(C+=2*Math.PI);var M=Math.ceil(C/E),_=C/M;T&&(_=-_);for(var O=0;O<M;O++){var k=O/M,P=Math.round(Ko(Kn.r,qn.r,k)),A=Math.round(Ko(Kn.g,qn.g,k)),L=Math.round(Ko(Kn.b,qn.b,k)),D=b+O*_,F=D+_;O<M-1&&(F+=_/2),c.beginPath(),c.ellipse(p,f,v,g,0,D,F,T),c.strokeStyle=`rgb(${P},${A},${L})`,c.lineWidth=x,c.stroke()}}(0,r,n,n,o,o,this.barColor2,this.barColor,s,a,e,h):Ho(0,r,n,n,o,o,void 0,this.barColor,s,a,e,h),r.restore()),this.centerColor&&i>0&&(this.centerColor2?((t=this.context.createRadialGradient(n,n,0,n,n,i)).addColorStop(0,this.centerColor),t.addColorStop(1,this.centerColor2)):t=this.centerColor,r.save(),Ho(0,r,n,n,i,i,t),r.restore()),this.textFormatCallback&&(this.textColor||this.textStrokeColor)&&(r.save(),function(d,c,p,f,v,g,y,m,x){x===void 0&&m!=null&&(x=2),c.font=g,c.textAlign="center",c.textBaseline="middle",c.fillStyle=y,c.strokeStyle=m,c.lineWidth=x,c.lineCap="round",c.lineJoin="round",m!=null&&m!=="none"&&x>0&&c.strokeText(v,p,f),y!=null&&y!=="none"&&c.fillText(v,p,f)}(0,r,n,n,this.getFormatText(),this.textFont,this.textColor,this.textStrokeColor,this.textStrokeThickness),r.restore())};const _t=Phaser.Utils.Objects.GetValue,a0=Phaser.Utils.Objects.IsPlainObject,o0=Phaser.Math.Clamp,h0=Phaser.Math.DegToRad(270),mo=Phaser.Math.PI2;let Jl=class extends as(Bn){constructor(e,t,n,s,o,i,r){a0(t)&&(t=_t(r=t,"x",0),n=_t(r,"y",0),s=_t(r,"radius",1),o=_t(r,"barColor",void 0),i=_t(r,"value",0));var h=2*s;super(e,t,n,h,h,_t(r,"resolution",1)),this.type="rexCircularProgressCanvas",this.bootProgressBase(r),this.setRadius(s),this.setTrackColor(_t(r,"trackColor",void 0)),this.setBarColor(o),this.setBarColor2(_t(r,"barColor2",void 0)),this.setCenterColor(_t(r,"centerColor",void 0)),this.setThickness(_t(r,"thickness",.2)),this.setAnticlockwise(_t(r,"anticlockwise",!1)),this.setStartAngle(_t(r,"startAngle",h0));var a=_t(r,"endAngle");a===void 0&&(a=this.anticlockwise?this.startAngle-mo:this.startAngle+mo),this.setEndAngle(_t(r,"endAngle",a)),this.setTextColor(_t(r,"textColor",void 0)),this.setTextStrokeColor(_t(r,"textStrokeColor",void 0),_t(r,"textStrokeThickness",void 0));var u=_t(r,"textFont",void 0);u?this.setTextFont(u):this.setTextFont(_t(r,"textSize","16px"),_t(r,"textFamily","Courier"),_t(r,"textStyle","")),this.setTextFormatCallback(_t(r,"textFormatCallback",void 0),_t(r,"textFormatCallbackScope",void 0)),this.setValue(i)}resize(e,t){return(e=Math.floor(Math.min(e,t)))===this.width||(super.resize(e,e),this.setRadius(e/2)),this}get radius(){return this._radius}set radius(e){this.dirty=this.dirty||this._radius!=e,this._radius=e;var t=2*e;this.resize(t,t)}setRadius(e){return this.radius=e,this}get trackColor(){return this._trackColor}set trackColor(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get barColor(){return this._barColor}set barColor(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get barColor2(){return this._barColor2}set barColor2(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=e,this._barColor2=e}setBarColor2(e){return this.barColor2=e,this}get startAngle(){return this._startAngle}set startAngle(e){this.dirty=this.dirty||this._startAngle!=e,this._startAngle=e,this._deltaAngle=$o(this._startAngle,this._endAngle,this._anticlockwise)}setStartAngle(e){return this.startAngle=e,this}get endAngle(){return this._endAngle}set endAngle(e){this.dirty=this.dirty||this._endAngle!=e,this._endAngle=e,this._deltaAngle=$o(this._startAngle,this._endAngle,this._anticlockwise)}setEndAngle(e){return this.endAngle=e,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(e){this.dirty=this.dirty||this._anticlockwise!=e,this._anticlockwise=e,this._deltaAngle=$o(this._startAngle,this._endAngle,this._anticlockwise)}setAnticlockwise(e){return e===void 0&&(e=!0),this.anticlockwise=e,this}get thickness(){return this._thickness}set thickness(e){e=o0(e,0,1),this.dirty=this.dirty||this._thickness!=e,this._thickness=e}setThickness(e){return this.thickness=e,this}get centerColor(){return this._centerColor}set centerColor(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor!=e,this._centerColor=e}get centerColor2(){return this._centerColor2}set centerColor2(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._centerColor2!=e,this._centerColor2=e}setCenterColor(e,t){return this.centerColor=e,this.centerColor2=t,this}get textColor(){return this._textColor}set textColor(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._textColor!=e,this._textColor=e}setTextColor(e){return this.textColor=e,this}get textStrokeColor(){return this._textStrokeColor}set textStrokeColor(e){e=dt(e,this.canvas,this.context),this.dirty=this.dirty||this._textStrokeColor!=e,this._textStrokeColor=e}get textStrokeThickness(){return this._textStrokeThickness}set textStrokeThickness(e){this.dirty=this.dirty||this._textStrokeThickness!=e,this._textStrokeThickness=e}setTextStrokeColor(e,t){return t===void 0&&(t=2),this.textStrokeColor=e,this.textStrokeThickness=t,this}get textFont(){return this._textFont}set textFont(e){this.dirty=this.dirty||this._textFont!=e,this._textFont=e}setTextFont(e,t,n){var s;return s=t===void 0?e:n+" "+e+" "+t,this.textFont=s,this}setTextFormatCallback(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),r0.call(this)},this),this}getFormatText(e){return e===void 0&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)}};var $o=function(e,t,n){return n?e<=t?mo+e-t:e-t:e>=t?mo+t-e:t-e};class l0 extends Ct.Scene{constructor(){super("Preload"),J(this,"companyLogo")}editorCreate(){const t=this.add.image(320,446,"companyLogo");t.scaleX=.2,t.scaleY=.2;const n=this.add.text(320,578,"",{});n.setOrigin(.5,.5),n.text="Loading",n.setStyle({color:"#e0e0e0",fontFamily:"arial",fontSize:"20px"}),this.companyLogo=t,this.events.emit("scene-awake")}preload(){this.editorCreate(),this.preloadProgress(),this.preloadLogo(),this.load.pack("asset-pack","assets/asset-pack.json"),this.load.bitmapFont("font","assets/font.png","assets/font.fnt")}create(){this.scene.start("Main")}preloadProgress(){const t=new Jl(this,this.companyLogo.x,this.companyLogo.y,106,"white",0);this.add.existing(t),t.setThickness(.1),this.load.on(Ct.Loader.Events.PROGRESS,n=>{t.setValue(n)})}preloadLogo(){this.companyLogo.setVisible(!1);const t=new Iy(this,this.companyLogo.x,this.companyLogo.y,this.companyLogo.texture.key);t.setScale(this.companyLogo.scaleX,this.companyLogo.scaleY),this.add.existing(t)}}class od extends Ct.GameObjects.Container{constructor(t,n,s){super(t,n??0,s??0),J(this,"btnBg"),J(this,"menuTxt"),J(this,"icon"),J(this,"textString",""),J(this,"downTexture",{key:"button_round_down"}),J(this,"upTexture",{key:"button_round"}),J(this,"iconTexture"),J(this,"iconTextureDown"),J(this,"isToggled",!1),J(this,"downAudioKey","tap-a"),J(this,"upAudioKey","tap-b"),J(this,"isDown",!1),J(this,"releaseCallback"),J(this,"toggleCallback");const o=t.add.image(0,0,"button_round");this.add(o);const i=t.add.text(0,0,"",{});i.setOrigin(.5,.5),i.setStyle({align:"center",color:"#ffffffff",fontFamily:"Arial Black",fontSize:"30px",stroke:"#000000ff",strokeThickness:10}),this.add(i);const r=t.add.image(0,0,"_MISSING");this.add(r),this.btnBg=o,this.menuTxt=i,this.icon=r,this.btnBg.setInteractive(),this.btnBg.on("pointerdown",()=>{this.isDown=!0,this.btnBg.setTexture(this.downTexture.key),Yt.audio.isSfx&&this.scene.sound.play(this.downAudioKey)}),this.btnBg.on("pointerup",()=>{this.isDown&&(this.isDown=!1,this.isToggled?this.releaseToggle():this.actToggle(),Yt.audio.isSfx&&this.scene.sound.play(this.upAudioKey))}),this.btnBg.on("pointerout",()=>{this.isDown&&(this.isDown=!1,this.btnBg.setTexture(this.upTexture.key),Yt.audio.isSfx&&this.scene.sound.play(this.upAudioKey))})}setAction(t,n,s=!1){this.menuTxt.setText(this.textString),this.btnBg.setTexture(this.downTexture.key),this.releaseCallback=t,this.toggleCallback=n,s?this.actToggle():this.releaseToggle()}actToggle(){this.btnBg.setTexture(this.upTexture.key),this.toggleCallback&&this.toggleCallback(),this.iconTextureDown.key&&this.icon.setTexture(this.iconTextureDown.key),this.icon&&this.icon.setTintFill(7697781),this.isToggled=!0}releaseToggle(){this.btnBg.setTexture(this.upTexture.key),this.releaseCallback&&this.releaseCallback(),this.iconTexture.key&&this.icon.setTexture(this.iconTexture.key),this.icon&&this.icon.clearTint(),this.isToggled=!1}}var u0=Phaser.Renderer.WebGL.Utils,rg=function(e,t,n,s,o,i){for(var r=u0.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*s),h=n.pathData,a=n.pathIndexes,u=0;u<a.length;u+=3){var l=2*a[u],d=2*a[u+1],c=2*a[u+2],p=h[l+0]-o,f=h[l+1]-i,v=h[d+0]-o,g=h[d+1]-i,y=h[c+0]-o,m=h[c+1]-i,x=t.getX(p,f),b=t.getY(p,f),w=t.getX(v,g),T=t.getY(v,g),S=t.getX(y,m),C=t.getY(y,m);e.batchTri(n,x,b,w,T,S,C,0,0,1,1,r,r,r,2)}},d0=Phaser.Renderer.WebGL.Utils,vo=function(e,t,n,s,o){var i=e.strokeTint,r=d0.getTintAppendFloatAlpha(t.strokeColor,t.strokeAlpha*n);i.TL=r,i.TR=r,i.BL=r,i.BR=r;var h=t.pathData,a=h.length-1,u=t.lineWidth,l=u/2,d=h[0]-s,c=h[1]-o;t.closePath||(a-=2);for(var p=2;p<a;p+=2){var f=h[p]-s,v=h[p+1]-o;e.batchLine(d,c,f,v,l,l,u,p-2,!!t.closePath&&p===a-1),d=f,c=v}};const c0=Phaser.GameObjects.GetCalcMatrix;var Or=function(e,t,n,s){var o=t.fillColor,i=t.fillAlpha,r=(16711680&o)>>>16,h=(65280&o)>>>8,a=255&o;e.fillStyle="rgba("+r+","+h+","+a+","+i+")"},kr=function(e,t,n,s){var o=t.strokeColor,i=t.strokeAlpha,r=(16711680&o)>>>16,h=(65280&o)>>>8,a=255&o;e.strokeStyle="rgba("+r+","+h+","+a+","+i+")",e.lineWidth=t.lineWidth};const f0=Phaser.Renderer.Canvas.SetTransform,p0={renderWebGL:function(e,t,n,s){t.dirty&&(t.updateData(),t.dirty=!1),n.addToRenderList(t);var o=e.pipelines.set(t.pipeline),i=c0(t,n,s),r=o.calcMatrix.copyFrom(i.calc),h=t._displayOriginX,a=t._displayOriginY,u=n.alpha*t.alpha;e.pipelines.preBatch(t),t.isFilled&&rg(o,r,t,u,h,a),t.isStroked&&vo(o,t,u,h,a),e.pipelines.postBatch(t)},renderCanvas:function(e,t,n,s){t.dirty&&(t.updateData(),t.dirty=!1),n.addToRenderList(t);var o=e.currentContext;if(f0(e,o,t,n,s)){var i=t._displayOriginX,r=t._displayOriginY,h=t.pathData,a=h.length-1,u=h[0]-i,l=h[1]-r;o.beginPath(),o.moveTo(u,l),t.closePath||(a-=2);for(var d=2;d<a;d+=2){var c=h[d]-i,p=h[d+1]-r;o.lineTo(c,p)}o.closePath(),t.isFilled&&(Or(o,t),o.fill()),t.isStroked&&(kr(o,t),o.stroke()),o.restore()}}},g0=Phaser.GameObjects.Shape;class Ql extends g0{get fillColor(){return this._fillColor}set fillColor(t){this._fillColor=t,this.isFilled=t!=null&&this._fillAlpha>0}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this._fillAlpha=t,this.isFilled=t>0&&this._fillColor!=null}setFillStyle(t,n){return n===void 0&&(n=1),this.fillColor=t,this.fillAlpha=n,this}get strokeColor(){return this._strokeColor}set strokeColor(t){this._strokeColor=t,this.isStroked=t!=null&&this._strokeAlpha>0&&this._lineWidth>0}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this._strokeAlpha=t,this.isStroked=t>0&&this._strokeColor!=null&&this._lineWidth>0}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.isStroked=t>0&&this._strokeColor!=null}setStrokeStyle(t,n,s){return s===void 0&&(s=1),this.lineWidth=t,this.strokeColor=n,this.strokeAlpha=s,this}updateData(){return this}get width(){return this.geom.width}set width(t){this.resize(t,this.height)}get height(){return this.geom.height}set height(t){this.resize(this.width,t)}setSize(t,n){var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=n),this}resize(t,n){return this.setSize(t,n),this}}Object.assign(Ql.prototype,p0);var Mt=function(e){return e.x>0&&e.y>0},$t=function(e,t,n){var s=n.length;if(s>=2){var o=n[s-2],i=n[s-1];if(e===o&&t===i)return n}return n.push(e,t),n};const hd=Phaser.Math.DegToRad;var Zt=function(e,t,n,s,o,i,r,h,a){r&&i>o?i-=360:!r&&i<o&&(i+=360);var u=hd(i-o)/h;o=hd(o);for(var l=0;l<=h;l++){var d=o+u*l,c=e+n*Math.cos(d),p=t+s*Math.sin(d);$t(c,p,a)}return a};const m0=Phaser.Utils.Objects.IsPlainObject,ld=Phaser.Utils.Objects.GetValue,v0=Phaser.Geom.Polygon.Earcut;let zn=class extends Ql{constructor(e,t,n,s,o,i,r,h){var a,u,l,d;if(m0(t)){var c=t;t=c.x,n=c.y,s=c.width,o=c.height,i=c.radius,r=c.color,h=c.alpha,a=c.strokeColor,u=c.strokeAlpha,l=c.strokeWidth,d=c.shape}t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=s),i===void 0&&(i=0),d===void 0&&(d=0);var p=new Zl;if(super(e,"rexRoundRectangleShape",p),this.setShapeType(d),this.shapeType===0){var f=ld(i,"radius",i);p.setTo(0,0,s,o,f)}else f={x:s/2,y:o/2},p.setTo(0,0,s,o,f);this.setIteration(ld(i,"iteration",void 0)),this.setPosition(t,n),this.setFillStyle(r,h),l===void 0&&(l=2),this.setStrokeStyle(l,a,u),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var e=this.geom,t=this.pathData;t.length=0;var n,s=e.width,o=e.height,i=e.cornerRadius,r=this.iteration+1;if(n=i.tl,Mt(n))if(n.convex){var h=n.x,a=n.y;Zt(h,a,n.x,n.y,180,270,!1,r,t)}else Zt(h=0,a=0,n.x,n.y,90,0,!0,r,t);else $t(0,0,t);return n=i.tr,Mt(n)?n.convex?(h=s-n.x,a=n.y,Zt(h,a,n.x,n.y,270,360,!1,r,t)):Zt(h=s,a=0,n.x,n.y,180,90,!0,r,t):$t(s,0,t),n=i.br,Mt(n)?n.convex?(h=s-n.x,a=o-n.y,Zt(h,a,n.x,n.y,0,90,!1,r,t)):Zt(h=s,a=o,n.x,n.y,270,180,!0,r,t):$t(s,o,t),n=i.bl,Mt(n)?n.convex?(h=n.x,a=o-n.y,Zt(h,a,n.x,n.y,90,180,!1,r,t)):Zt(h=0,a=o,n.x,n.y,360,270,!0,r,t):$t(0,o,t),t.push(t[0],t[1]),this.pathIndexes=v0(t),this}setShapeType(e){return typeof e=="string"&&(e=y0[e]),this.shapeType=e,this}setSize(e,t){return t===void 0&&(t=e),this.geom.width===e&&this.geom.height===t||(this.geom.setSize(e,t),this.shapeType===1&&this.setRadius({x:e/2,y:t/2}),this.updateDisplayOrigin(),this.dirty=!0,super.setSize(e,t)),this}get radius(){return this.geom.radius}set radius(e){this.geom.setRadius(e),this.updateDisplayOrigin(),this.dirty=!0}get radiusTL(){return this.geom.radiusTL}set radiusTL(e){this.geom.radiusTL=e,this.dirty=!0}get radiusTR(){return this.geom.radiusTR}set radiusTR(e){this.geom.radiusTR=e,this.dirty=!0}get radiusBL(){return this.geom.radiusBL}set radiusBL(e){this.geom.radiusBL=e,this.dirty=!0}get radiusBR(){return this.geom.radiusBR}set radiusBR(e){this.geom.radiusBR=e,this.dirty=!0}setRadius(e){return e===void 0&&(e=0),this.radius=e,this}setRadiusTL(e){return e===void 0&&(e=0),this.radiusTL=e,this}setRadiusTR(e){return e===void 0&&(e=0),this.radiusTR=e,this}setRadiusBL(e){return e===void 0&&(e=0),this.radiusBL=e,this}setRadiusBR(e){return e===void 0&&(e=0),this.radiusBR=e,this}get cornerRadius(){return this.geom.cornerRadius}set cornerRadius(e){this.radius=e}setCornerRadius(e){return this.setRadius(e)}get iteration(){return this._iteration}set iteration(e){this._iteration!==void 0?this._iteration!==e&&(this._iteration=e,this.dirty=!0):this._iteration=e}setIteration(e){return e===void 0&&(e=6),this.iteration=e,this}};const y0={rectangle:0,circle:1};var x0=function(e,t,n){return n==="__BASE"?`${e},${t}`:`${n}:${e},${t}`};function Ne(e){if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(n=>Ne(n));if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Object.getPrototypeOf(e)!==Object.prototype)return e;const t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=Ne(e[n]));return t}const b0=Phaser.Utils.Objects.IsPlainObject,ud=Phaser.Utils.Objects.GetValue;var Zo=function(e){return typeof e=="string"&&(e=T0[e]),e};const T0={scale:0,repeat:1};var w0=function(e,t){return e===0||e===this.columns.count-1||t===0||t===this.rows.count-1},Ht=function(){};const S0={_beginDraw:Ht,_drawImage:Ht,_drawTileSprite:Ht,_endDraw:Ht,setGetFrameNameCallback:function(e){return e===void 0&&(e=x0),this.getFrameNameCallback=e,this},setBaseTexture:function(e,t,n,s){Array.isArray(t)&&(s=n,n=t,t=void 0),t==null&&(t="__BASE"),typeof n=="number"&&arguments.length>=6?(n=[arguments[2],void 0,arguments[3]],s=[arguments[4],void 0,arguments[5]]):n===void 0&&s===void 0&&this.columns.data!==void 0&&this.rows.data!==void 0?(n=this.columns.data,s=this.rows.data):(n=Ne(n),s=Ne(s)),this.textureKey=e,this.baseFrameName=t,this.columns.data=n,this.columns.count=n?n.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.columns.scale=1,this.rows.data=s,this.rows.count=s?s.length:0,this.rows.stretch=0,this.rows.minHeight=0,this.rows.scale=1;var o=this.scene.sys.textures.get(e);if(!o)return this.clear(),this;if(!n||!s)return this.clear(),this;for(var i=o.get(t),r=i.width,h=0,a=0,u=n.length;a<u;a++)n[a]===void 0?h++:typeof n[a]=="number"?r-=n[a]:r-=n[a].width;var l=h>0?r/h:0,d=i.height,c=0;for(a=0,u=s.length;a<u;a++)s[a]===void 0?c++:typeof s[a]=="number"?d-=s[a]:d-=s[a].width;for(var p,f,v,g,y,m=c?d/c:0,x=0,b=0,w=0,T=s.length;w<T;w++){s[w]===void 0&&(s[w]=m),typeof s[w]=="number"&&(s[w]={height:s[w],stretch:w%2}),v=(p=s[w]).height,this.rows.stretch+=0|p.stretch,this.rows.minHeight+=p.stretch>0?0:v,x=0,a=0;for(var S=n.length;a<S;a++){if(n[a]===void 0&&(n[a]=l),typeof n[a]=="number"&&(n[a]={width:n[a],stretch:a%2}),g=(f=n[a]).width,w===0&&(this.columns.stretch+=0|f.stretch,this.columns.minWidth+=f.stretch>0?0:g),g>=1&&v>=1){var C=typeof(y=this.getFrameNameCallback(a,w,t));C!=="string"&&C!=="number"||o.add(y,0,x+i.cutX,b+i.cutY,g,v)}x+=g}b+=v}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),this.textureKey===void 0)return this;var e=this.scene.sys.textures.get(this.textureKey);if(!e)return this;var t,n,s,o,i,r,h,a=this.columns.minWidth*this.maxFixedPartScaleX,u=this.rows.minHeight*this.maxFixedPartScaleY,l=this.width-a,d=this.height-u,c=l>=0?this.maxFixedPartScaleX:this.width/a,p=d>=0?this.maxFixedPartScaleY:this.height/u;if(this.preserveRatio){var f=Math.min(c,p);if(c>f){var v=(c-f)*a;l>=0?l+=v:l=v,c=f}if(p>f){var g=(p-f)*u;d>=0?d+=g:d=g,p=f}}this.columns.scale=c,this.rows.scale=p,t=l>0&&this.columns.stretch>0?l/this.columns.stretch:0,n=d>0&&this.rows.stretch>0?d/this.rows.stretch:0;var y=0,m=0;this._beginDraw();for(var x=0,b=this.rows.count;x<b;x++){h=(i=this.rows.data[x]).stretch===0?i.height*p:n*i.stretch,y=0;for(var w=0,T=this.columns.count;w<T;w++)r=(o=this.columns.data[w]).stretch===0?o.width*c:t*o.stretch,s=this.getFrameNameCallback(w,x,this.baseFrameName),e.has(s)&&r>0&&h>0&&((i.stretch===0&&o.stretch===0||this.getStretchMode(w,x)===0?0:1)==0?this._drawImage(this.textureKey,s,y,m,r,h):this._drawTileSprite(this.textureKey,s,y,m,r,h)),y+=r;m+=h}this._endDraw()},setStretchMode:function(e){return b0(e)?(this.stretchMode.edge=Zo(ud(e,"edge",0)),this.stretchMode.internal=Zo(ud(e,"internal",0))):(e=Zo(e),this.stretchMode.edge=e,this.stretchMode.internal=e),this},getStretchMode:function(e,t){return w0.call(this,e,t)?this.stretchMode.edge:this.stretchMode.internal},setPreserveRatio:function(e){return e==null&&(e=!0),this.preserveRatio=e,this},setMaxFixedPartScale:function(e,t){return t===void 0&&(t=e),this.maxFixedPartScaleX=e,this.maxFixedPartScaleY=t,this}},$n=Phaser.Utils.Objects.IsPlainObject,ft=Phaser.Utils.Objects.GetValue;var ag=function(e,t){class n extends e{constructor(o,i,r,h,a,u,l,d,c,p){if($n(i)?(i=ft(p=i,"x",0),r=ft(p,"y",0),h=ft(p,"width",1),a=ft(p,"height",1),u=ft(p,"key",void 0),l=ft(p,"baseFrame",void 0),d=ft(p,"columns",void 0),c=ft(p,"rows",void 0)):$n(h)?(h=ft(p=h,"width",1),a=ft(p,"height",1),u=ft(p,"key",void 0),l=ft(p,"baseFrame",void 0),d=ft(p,"columns",void 0),c=ft(p,"rows",void 0)):$n(u)?(u=ft(p=u,"key",void 0),l=ft(p,"baseFrame",void 0),d=ft(p,"columns",void 0),c=ft(p,"rows",void 0)):$n(l)?(l=ft(p=l,"baseFrame",void 0),d=ft(p,"columns",void 0),c=ft(p,"rows",void 0)):Array.isArray(l)?(p=c,c=d,d=l,l=ft(p,"baseFrame",void 0)):$n(d)&&(d=ft(p=d,"columns",void 0),c=ft(p,"rows",void 0)),l===void 0&&(l=ft(p,"frame",void 0)),d===void 0){var f=ft(p,"leftWidth",void 0),v=ft(p,"rightWidth",void 0);f!==void 0&&v!==void 0&&(d=[f,void 0,v])}if(c===void 0){var g=ft(p,"topHeight",void 0),y=ft(p,"bottomHeight",void 0);g!==void 0&&y!==void 0&&(c=[g,void 0,y])}super(o),this.type=t,this.setPosition(i,r).setSize(h,a).setOrigin(.5,.5),this.columns={},this.rows={},this.stretchMode={},this._tileSprite=void 0,this._image=void 0,this.setGetFrameNameCallback(ft(p,"getFrameNameCallback",void 0)),this.setStretchMode(ft(p,"stretchMode",0)),this.setPreserveRatio(ft(p,"preserveRatio",!0));var m=ft(p,"maxFixedPartScale",1),x=ft(p,"maxFixedPartScaleX",m),b=ft(p,"maxFixedPartScaleY",void 0);this.setMaxFixedPartScale(x,b),this.setBaseTexture(u,l,d,c)}get minWidth(){return this.columns.minWidth}get minHeight(){return this.rows.minHeight}get fixedPartScaleX(){return this.columns.scale}get fixedPartScaleY(){return this.rows.scale}resize(o,i){return this.width===o&&this.height===i||(super.resize?super.resize(o,i):super.setSize(o,i),this.updateTexture()),this}get leftWidth(){return this.columns.data[0]}get rightWidth(){return this.columns.data[this.columns.count-1]}get topHeight(){return this.rows.data[0]}get bottomHeight(){return this.rows.data[this.rows.count-1]}}return Object.assign(n.prototype,S0),n};const C0=Phaser.GameObjects;var zi=void 0,dd=function(e,t){if(zi||(zi={},Mn(e).events.once("destroy",function(){for(var s in zi)zi[s].destroy();zi=void 0})),!zi.hasOwnProperty(t)){var n=Mn(e).scene.systemScene;(e=new C0[t](n)).setOrigin(0),zi[t]=e}return zi[t]};const E0=Phaser.GameObjects.RenderTexture;let og=class extends ag(E0,"rexNinePatch"){};var P0={_drawImage:function(e,t,n,s,o,i){var r=dd(this,"Image").setTexture(e,t).setDisplaySize(o,i);this.draw(r,n,s)},_drawTileSprite:function(e,t,n,s,o,i){var r=dd(this,"TileSprite").setTexture(e,t).setSize(o,i);this.draw(r,n,s)}};Object.assign(og.prototype,P0);const O0=Phaser.GameObjects.GetCalcMatrix,k0=Phaser.Renderer.Canvas.SetTransform,M0={renderWebGL:function(e,t,n,s){var o=t.getRenderList();if(o.length!==0){n.addToRenderList(t);var i=e.pipelines.set(t.pipeline),r=t.frame.glTexture,h=i.setGameObject(t),a=n.roundPixels,u=O0(t,n,s),l=i.calcMatrix.copyFrom(u.calc),d=t._displayOriginX,c=t._displayOriginY,p=n.alpha*t.alpha;e.pipelines.preBatch(t);for(var f=0,v=o.length;f<v;f++)o[f].webglRender(i,l,p,d,c,r,h,a);e.pipelines.postBatch(t)}},renderCanvas:function(e,t,n,s){var o=e.currentContext,i=t.getRenderList();if(i.length!==0&&k0(e,o,t,n,s)){n.addToRenderList(t);var r=n.roundPixels,h=-t._displayOriginX,a=-t._displayOriginY;o.translate(h,a);for(var u=0,l=i.length;u<l;u++)i[u].canvasRender(o,h,a,r);o.restore()}}};var cd=function(e,t){if(this.width===e&&this.height===t)return this;this.width=e,this.height=t,this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=e,n.hitArea.height=t),this};const _0=Phaser.Utils.Array.Remove;var fd=function(){return this.poolManager&&this.poolManager.freeMultiple(this.children.list),this.children.list.length=0,this.lastAppendedChildren.length=0,this.dirty=!0,this};const A0={setTint(e){return this.tint=e,this.tintFill=!1,this},setTintFill(e){return this.tint=e,this.tintFill=!0,this},clearTint(){return this.setTint(16777215),this}};var hg={setTexture:function(e,t){return this.texture=this.scene.sys.textures.get(e),this.frame=this.texture.get(t),this},resize:cd,setSize:cd,addChild:function(e){return this.lastAppendedChildren.length=0,Array.isArray(e)?(this.children.add(e),this.lastAppendedChildren.push(...e)):(this.children.add(e),this.lastAppendedChildren.push(e)),this},removeChild:function(e){return this.poolManager&&this.poolManager.free(e),_0(this.children.list,e),this.lastAppendedChildren.length=0,this.dirty=!0,this},removeChildren:fd,clear:fd,getLastAppendedChildren:function(){return this.lastAppendedChildren},getChildren:function(){return this.children.list}};Object.assign(hg,A0);class mi{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}}const R0=Phaser.Utils.Objects.GetValue;var L0={};let D0=class{constructor(e){this.pools=R0(e,"pools",L0)}destroy(){this.pools=void 0}free(e){if(!this.pools)return this;var t=e.type;return this.pools.hasOwnProperty(t)||(this.pools[t]=new mi),this.pools[t].push(e),e.onFree(),this}freeMultiple(e){if(!this.pools)return this;for(var t=0,n=e.length;t<n;t++)this.free(e[t]);return this}allocate(e){return this.pools&&this.pools.hasOwnProperty(e)?this.pools[e].pop():null}};Ao();const F0=Phaser.GameObjects.GameObject,B0=Phaser.Utils.Objects.IsPlainObject,Zn=Phaser.Utils.Objects.GetValue,I0=Phaser.Structs.List,X0=Phaser.Utils.Array.StableSort;class lg extends F0{constructor(t,n,s,o,i,r){B0(n)&&(n=Zn(r=n,"x",0),s=Zn(r,"y",0),o=Zn(r,"texture"),i=Zn(r,"frame")),n===void 0&&(n=0),s===void 0&&(s=0),super(t,"rexBlitter"),this.children=new I0,this.renderList=[],this.displayListDirty=!1,this.lastAppendedChildren=[];var h=Zn(r,"reuseBob",!0);this.poolManager=h?new D0(r):void 0,this.setTexture(o,i),this.setPosition(n,s),this.setOrigin(0,0),this.clearTint(),this.initPipeline(),this.initPostPipeline()}preDestroy(){this.removeChildren(),this.children.destroy(),this.renderList.length=0,this.poolManager&&this.poolManager.destroy()}getRenderList(){if(this.displayListDirty){this.renderList.length=0;for(var t=!1,n=this.children.list,s=0,o=n.length;s<o;s++){var i=n[s];z0(i)&&(this.renderList.push(i),t||(t=i.depth!==0))}t&&X0(this.renderList,Y0),this.displayListDirty=!1}return this.renderList}}var z0=function(e){return e.active&&e.visible&&e.alpha>0},Y0=function(e,t){return e._depth-t._depth};const Me=Phaser.GameObjects.Components;Phaser.Class.mixin(lg,[Me.Alpha,Me.BlendMode,Me.ComputedSize,Me.Depth,Me.GetBounds,Me.Mask,Me.Origin,Me.Pipeline,Me.PostPipeline,Me.ScrollFactor,Me.Transform,Me.Visible,M0,hg]);const ug="image";var xt=function(e,t,n){if(!e||typeof e=="number")return n;if(typeof t=="string"){if(e.hasOwnProperty(t))return e[t];if(t.indexOf(".")===-1)return n;t=t.split(".")}for(var s=t,o=e,i=n,r=0;r<s.length;r++){if(t=s[r],!o.hasOwnProperty(t)){i=n;break}o=i=o[t]}return i},ss=function(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))e.length=0;else for(var t in e)delete e[t];return e};const Lo={enableData(){return this.data===void 0&&(this.data={}),this},setData(e,t){if(this.enableData(),arguments.length===1){var n=e;for(e in n)this.data[e]=n[e]}else this.data[e]=t;return this},getData(e,t){return this.enableData(),e===void 0?this.data:xt(this.data,e,t)},incData(e,t,n){return n===void 0&&(n=0),this.enableData(),this.setData(e,this.getData(e,n)+t),this},mulData(e,t,n){return n===void 0&&(n=0),this.enableData(),this.setData(e,this.getData(e,n)*t),this},clearData(){return this.data&&ss(this.data),this}};let dg=class{constructor(e,t){this.type=t,this.data=void 0,this.setParent(e).reset().setActive()}destroy(){this.parent&&this.parent.removeChild(this)}setParent(e){return this.parent=e,this}setDisplayListDirty(e){return e&&this.parent&&(this.parent.displayListDirty=!0),this}get active(){return this._active}set active(e){this.setDisplayListDirty(this._active!=e),this._active=e}setActive(e){return e===void 0&&(e=!0),this.active=e,this}modifyPorperties(e){return this}reset(){this.clearData()}onFree(){this.reset().setActive(!1).setParent()}};Object.assign(dg.prototype,Lo);const N0=Phaser.Math.DegToRad,G0=Phaser.Math.RadToDeg,Ks=Phaser.Utils.Objects.GetValue;let U0=class extends dg{get visible(){return this._visible}set visible(e){this.setDisplayListDirty(this._visible!=e),this._visible=e}setVisible(e){return e===void 0&&(e=!0),this.visible=e,this}get alpha(){return this._alpha}set alpha(e){this.setDisplayListDirty(!!this._alpha!=!!e),this._alpha=e}setAlpha(e){return this.alpha=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setPosition(e,t){return this.x=e,this.y=t,this}setRotation(e){return this.rotation=e,this}get angle(){return G0(this.rotation)}set angle(e){this.rotation=N0(e)}setAngle(e){return this.angle=e,this}setScaleX(e){return this.scaleX=e,this}get width(){return this._width}set width(e){this._width=e}setWidth(e,t){return t===void 0&&(t=!1),this.width=e,t&&(this.scaleY=this.scaleX),this}setScaleY(e){return this.scaleY=e,this}setScale(e,t){return t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this}get height(){return this._height}set height(e){this._height=e}setHeight(e,t){return t===void 0&&(t=!1),this.height=e,t&&(this.scaleX=this.scaleY),this}setScale(e,t){return t===void 0&&(t=e),this.scaleX=e,this.scaleY=t,this}get displayWidth(){return this._width*this.scaleX}set displayWidth(e){this.scaleX=e/this._width}setDisplayWidth(e,t){return t===void 0&&(t=!1),this.displayWidth=e,t&&(this.scaleY=this.scaleX),this}get displayHeight(){return this._height*this.scaleY}set displayHeight(e){this.scaleY=e/this._height}setDisplayHeight(e,t){return t===void 0&&(t=!1),this.displayHeight=e,t&&(this.scaleX=this.scaleY),this}setOriginX(e){return this.originX=e,this._displayOriginX=this.width*e,this}setOriginY(e){return this.originY=e,this._displayOriginY=this.height*e,this}setOrigin(e,t){return t===void 0&&(t=e),this.setOriginX(e).setOriginY(t),this}get depth(){return this._depth}set depth(e){this.setDisplayListDirty(this._depth!=e),this._depth=e}setDepth(e){return e===void 0&&(e=0),this.depth=e,this}modifyPorperties(e){if(!e)return this;e.hasOwnProperty("x")&&this.setX(e.x),e.hasOwnProperty("y")&&this.setY(e.y),e.hasOwnProperty("rotation")?this.setRotation(e.rotation):e.hasOwnProperty("angle")&&this.setAngle(e.angle),e.hasOwnProperty("alpha")&&this.setAlpha(e.alpha);var t=Ks(e,"width",void 0),n=Ks(e,"height",void 0),s=Ks(e,"scale",void 0),o=Ks(e,"scaleX",s),i=Ks(e,"scaleY",s);t!==void 0?n===void 0&&i===void 0?this.setWidth(t,!0):this.setWidth(t):o!==void 0?this.setScaleX(o):e.hasOwnProperty("displayWidth")&&this.setDisplayWidth(e.displayWidth),n!==void 0?t===void 0&&o===void 0?this.setHeight(n,!0):this.setHeight(n):i!==void 0?this.setScaleY(i):e.hasOwnProperty("displayHeight")&&this.setDisplayHeight(e.displayHeight);var r=Ks(e,"origin",void 0);return r!==void 0?this.setOrigin(r):(e.hasOwnProperty("originX")&&this.setOriginX(e.originX),e.hasOwnProperty("originY")&&this.setOriginY(e.originY)),e.hasOwnProperty("depth")&&this.setDepth(e.depth),this}reset(){return super.reset(),this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setOrigin(0).setDepth(0),this}webglRender(e,t,n,s,o,i,r,h){}canvasRender(e,t,n,s){}};const W0=Phaser.GameObjects.Components.TransformMatrix,V0=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha;var ra=new W0;const j0=Phaser.Utils.Objects.IsPlainObject;let cg=class extends U0{constructor(e,t){super(e,ug),this._crop=H0(),this.setFrame(t)}get width(){return this._width}set width(e){}get height(){return this._height}set height(e){}setFrame(e){return arguments.length>0&&!j0(e)&&(e=this.parent.texture.get(e)),this.frame=e,e?(this._width=e.realWidth,this._height=e.realHeight):(this._width=0,this._height=0),this}setFlipX(e){return e===void 0&&(e=!0),this.flipX=e,this}setFlipY(e){return e===void 0&&(e=!0),this.flipY=e,this}resetFlip(){return this.flipX=!1,this.flipY=!1,this}get tint(){return this._tint===void 0?this.parent.tint:this._tint}set tint(e){this._tint=e}setTint(e){return this.tint=e,this.tintFill=!1,this}setTintFill(e){return this.tint=e,this.tintFill=!0,this}clearTint(){return this.setTint(16777215),this}resetTint(){return this.tint=void 0,this.tintFill=void 0,this}get tintFill(){return this._tintFill===void 0?this.parent.tintFill:this._tintFill}set tintFill(e){this._tintFill=e}setCrop(e,t,n,s){return e===void 0?(this.isCropped=!1,this):this.frame?e===0&&t===0&&n===this._width&&s===this._height?(this.isCropped=!1,this):(this.frame.setCropUVs(this._crop,e,t,n,s,this.flipX,this.flipY),this.isCropped=!0,this):this}reset(){return super.reset(),this.resetFlip().resetTint().setFrame().setCrop(),this}modifyPorperties(e){return e?(e.hasOwnProperty("width")&&(e.displayWidth=e.width,delete e.width),e.hasOwnProperty("height")&&(e.displayHeight=e.height,delete e.height),e.hasOwnProperty("frame")&&this.setFrame(e.frame),super.modifyPorperties(e),e.hasOwnProperty("flipX")&&this.setFlipX(e.flipX),e.hasOwnProperty("flipY")&&this.setFlipY(e.flipY),e.hasOwnProperty("tint")&&this.setTint(e.tint),e.hasOwnProperty("tintFill")&&this.setTintFill(e.tintFill),this):this}};var H0=function(e){return e===void 0&&(e={}),e.u0=0,e.v0=0,e.u1=0,e.v1=0,e.x=0,e.y=0,e.width=0,e.height=0,e.flipX=!1,e.flipY=!1,e.cx=0,e.cy=0,e.cw=0,e.ch=0,e},K0={webglRender:function(e,t,n,s,o,i,r,h){var a=this.frame;if(a){var u,l,d,c,p,f,v,g,y=this._width,m=this._height,x=y*this.originX,b=m*this.originY,w=this.x-s,T=this.y-o;if(this.isCropped){var S=this._crop;S.flipX===this.flipX&&S.flipY===this.flipY||a.updateCropUVs(S,this.flipX,this.flipY),u=S.u0,l=S.v0,d=S.u1,c=S.v1,v=S.width,g=S.height,p=S.x,f=S.y}else u=this.frame.u0,l=this.frame.v0,d=this.frame.u1,c=this.frame.v1,v=y,g=m,p=0,f=0;var C=1,E=1;this.flipX&&(w+=y-2*x,C=-1),this.flipY&&(T+=m-2*b,E=-1),ra.applyITRS(w,T,this.rotation,this.scaleX*C,this.scaleY*E),t.multiply(ra,ra);var M=-x+p,_=-b+f,O=M+v,k=_+g,P=ra.setQuad(M,_,O,k,h),A=V0(this.tint,this.alpha*n);e.batchQuad(this.parent,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],u,l,d,c,A,A,A,A,this.tintFill,i,r)}},canvasRender:function(e,t,n,s){var o=this.frame;if(o){e.save();var i,r,h,a,u=this._width,l=this._height,d=u*this.originX,c=l*this.originY,p=this.x-d,f=this.y-c;if(this.isCropped){var v=this._crop;v.flipX===this.flipX&&v.flipY===this.flipY||o.updateCropUVs(v,this.flipX,this.flipY),h=v.cw,a=v.ch,i=v.cx,r=v.cy}else h=o.cutWidth,a=o.cutHeight,i=o.cutX,r=o.cutY;var g=1,y=1;this.flipX&&(p+=u,g=-1),this.flipY&&(f+=l,y=-1);var m=o.source.resolution,x=h/m,b=a/m;s&&(p=Math.floor(p+.5),f=Math.floor(f+.5),x+=.5,b+=.5),e.translate(p,f),e.rotate(this.rotation),e.scale(this.scaleX*g,this.scaleY*y),e.drawImage(o.source.image,i,r,h,a,0,0,x,b),e.restore()}}};Object.assign(cg.prototype,K0);var pd=function(e,t){typeof t=="string"&&(t={frame:t});var n=e.poolManager?e.poolManager.allocate(ug):null;return n===null?n=new cg(e):n.setParent(e).setActive(),n.modifyPorperties(t),e.addChild(n),n};const q0={_drawImage:function(e,t,n,s,o,i){pd(this,{frame:t,x:n,y:s,width:o,height:i})},_drawTileSprite:function(e,t,n,s,o,i){var r=this.texture.get(t),h=r.width,a=r.height,u=o%h,l=i%a;u===0&&(u=h),l===0&&(l=a);for(var d=Math.ceil(o/h),c=Math.ceil(i/a),p=d-1,f=c-1,v=0;v<d;v++)for(var g=0;g<c;g++){let x=pd(this,{frame:t,x:n+v*h,y:s+g*a});var y=v===p?u:h,m=g===f?l:a;y===h&&m===a||x.setCrop(0,0,y,m)}}};class $0 extends ag(lg,"rexNinePatch2"){setBaseTexture(t,n,s,o){return this.setTexture(t,n),super.setBaseTexture(t,n,s,o),this}}Object.assign($0.prototype,q0);var fg=function(e,t,n,s,o,i,r,h){if(t!=null||n!=null){var a=e.canvas.width,u=e.canvas.height;n==null&&(s=0);var l=s/2;a=Math.max(1,a-s),u=Math.max(1,u-s),function(d,c,p,f,v,g,y,m,x,b,w,T,S){var C;sg(c,p,f,v,g,y,S),m!=null&&(w!=null&&((C=T?c.createLinearGradient(0,0,v,0):c.createLinearGradient(0,0,0,g)).addColorStop(0,m),C.addColorStop(1,w),m=C),c.fillStyle=m,c.fill()),x!=null&&b>0&&(c.strokeStyle=x,c.lineWidth=b,c.stroke())}(e.canvas,e.context,l,l,a,u,o,t,n,s,i,r,h)}};Phaser.Utils.Objects.GetValue;var yt=function(e,t){if(!e)return!1;if(e.hasOwnProperty(t))return!0;for(;e;){if(Object.getOwnPropertyDescriptor(e,t))return!0;e=e.__proto__}return!1},Yi=function(e,t,n){t&&!yt(e,`${t}X`)&&(Object.defineProperty(e,`${t}X`,{get:function(){return n.x},set:function(s){n.x=s,e.dirty=!0}}),Object.defineProperty(e,`${t}Y`,{get:function(){return n.y},set:function(s){n.y=s,e.dirty=!0}}),Object.defineProperty(e,`${t}T`,{get:function(){return n.t},set:function(s){n.t=s,e.dirty=!0}}))};const Z0={setTLPosition(e,t){return this.geom.setTLPosition(e,t),this.dirty=!0,this},setTRPosition(e,t){return this.geom.setTRPosition(e,t),this.dirty=!0,this},setBLPosition(e,t){return this.geom.setBLPosition(e,t),this.dirty=!0,this},setBRPosition(e,t){return this.geom.setBRPosition(e,t),this.dirty=!0,this},resetCornerPosition(){return this.geom.resetCornerPosition(),this.dirty=!0,this},insertTopSidePoint(e,t,n,s){var o=this.geom.topSidePoints;if(Array.isArray(e))for(var i,r=0,h=(o=e).length;r<h;r++)i=o[r],this.geom.insertTopSidePoint(i.t,i.x,i.y),Yi(this,i.key,o[o.length-1]);else this.geom.insertTopSidePoint(e,t,n),Yi(this,s,o[o.length-1]);return this.dirty=!0,this},insertRightSidePoint(e,t,n,s){var o=this.geom.rightSidePoints;if(Array.isArray(e))for(var i,r=0,h=(o=e).length;r<h;r++)i=o[r],this.geom.insertRightSidePoint(i.t,i.x,i.y),Yi(this,i.key,o[o.length-1]);else this.geom.insertRightSidePoint(e,t,n),Yi(this,s,o[o.length-1]);return this.dirty=!0,this},insertBottomSidePoint(e,t,n,s){var o=this.geom.bottomSidePoints;if(Array.isArray(e))for(var i,r=0,h=(o=e).length;r<h;r++)i=o[r],this.geom.insertBottomSidePoint(i.t,i.x,i.y),Yi(this,i.key,o[o.length-1]);else this.geom.insertBottomSidePoint(e,t,n),Yi(this,s,o[o.length-1]);return this.dirty=!0,this},insertLeftSidePoint(e,t,n,s){var o=this.geom.leftSidePoints;if(Array.isArray(e))for(var i,r=0,h=(o=e).length;r<h;r++)i=o[r],this.geom.insertLeftSidePoint(i.t,i.x,i.y),Yi(this,i.key,o[o.length-1]);else this.geom.insertLeftSidePoint(e,t,n),Yi(this,s,o[o.length-1]);return this.dirty=!0,this},clearTopSidePoints(){return this.geom.clearTopSidePoints(),this.dirty=!0,this},clearRightSidePoints(){return this.geom.clearRightSidePoints(),this.dirty=!0,this},clearBottomSidePoints(){return this.geom.clearBottomSidePoints(),this.dirty=!0,this},clearLeftSidePoints(){return this.geom.clearLeftSidePoints(),this.dirty=!0,this},clearAllSidesPoints(){return this.geom.clearAllSidesPoints(),this.dirty=!0,this}};class J0{constructor(t,n,s,o){t===void 0&&(t=0),n===void 0&&(n=t),s===void 0&&(s=0),o===void 0&&(o=0),this.setTo(t,n,s,o),this.tlx=0,this.tly=0,this.trx=0,this.try=0,this.blx=0,this.bly=0,this.brx=0,this.bry=0,this.topSidePoints=[],this.rightSidePoints=[],this.bottomSidePoints=[],this.leftSidePoints=[]}setTo(t,n,s,o){return this.setPosition(t,n),this.setSize(s,o),this}setPosition(t,n){return this.x=t,this.y=n,this}setSize(t,n){return this.width=t,this.height=n,this}setTLPosition(t,n){return this.tlx=t,this.tly=n,this}setTRPosition(t,n){return this.trx=t,this.try=n,this}setBLPosition(t,n){return this.blx=t,this.bly=n,this}setBRPosition(t,n){return this.brx=t,this.bry=n,this}resetCornerPosition(){return this.setTLPosition(0,0).setTRPosition(0,0).setBLPosition(0,0).setBRPosition(0,0),this}insertTopSidePoint(t,n,s){return aa(this.topSidePoints,t,n,s),this}insertRightSidePoint(t,n,s){return aa(this.rightSidePoints,t,n,s),this}insertBottomSidePoint(t,n,s){return aa(this.bottomSidePoints,t,n,s),this}insertLeftSidePoint(t,n,s){return aa(this.leftSidePoints,t,n,s),this}clearTopSidePoints(){return this.topSidePoints.length=0,this}clearRightSidePoints(){return this.rightSidePoints.length=0,this}clearBottomSidePoints(){return this.bottomSidePoints.length=0,this}clearLeftSidePoints(){return this.leftSidePoints.length=0,this}clearAllSidesPoints(){return this.clearTopSidePoints().clearRightSidePoints().clearBottomSidePoints().clearLeftSidePoints(),this}}var aa=function(e,t,n,s){if(typeof t!="number"){var o=t;t=o.t,n=o.x,s=o.y}e.push({t,x:n,y:s})};const Q0=Phaser.Utils.Objects.IsPlainObject,_e=Phaser.Utils.Objects.GetValue,Ni=Phaser.Math.Linear,tx=Phaser.Geom.Polygon.Earcut;var oa=function(e){e.length<=1||e.sort(function(t,n){return t.t-n.t})};Object.assign((class extends Ql{constructor(e,t,n,s,o,i,r){var h,a,u;if(Q0(t)){var l=t;t=l.x,n=l.y,s=l.width,o=l.height,i=l.color,r=l.alpha,h=l.strokeColor,a=l.strokeAlpha,u=l.strokeWidth}t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=s);var d=new J0;super(e,"rexQuadShape",d),d.setTo(0,0,s,o),this.setPosition(t,n),this.setFillStyle(i,r),h!==void 0&&u===void 0&&(u=2),this.setStrokeStyle(u,h,a),this.setTLPosition(_e(l,"tlx",0),_e(l,"tly",0)).setTRPosition(_e(l,"trx",0),_e(l,"try",0)).setBLPosition(_e(l,"blx",0),_e(l,"bly",0)).setBRPosition(_e(l,"brx",0),_e(l,"bry",0));var c=_e(l,"leftSidePoints");c&&this.insertLeftSidePoint(c);var p=_e(l,"topSidePoints");p&&this.insertTopSidePoint(p);var f=_e(l,"rightSidePoints");f&&this.insertRightSidePoint(f);var v=_e(l,"bottomSidePoints");v&&this.insertBottomSidePoint(v),this.updateDisplayOrigin(),this.dirty=!0}updateData(){var e=this.geom,t=this.pathData;t.length=0;var n=e.width,s=e.height,o=0+e.tlx,i=0+e.tly,r=n+e.trx,h=0+e.try,a=n+e.brx,u=s+e.bry,l=0+e.blx,d=s+e.bly,c=e.topSidePoints,p=e.rightSidePoints,f=e.bottomSidePoints,v=e.leftSidePoints;$t(o,i,t),oa(c);for(var g=0,y=c.length;g<y;g++){var m=c[g],x=Ni(o,r,m.t)+m.x,b=Ni(i,h,m.t)+m.y;$t(x,b,t)}for($t(r,h,t),oa(p),g=0,y=p.length;g<y;g++)m=p[g],x=Ni(r,a,m.t)+m.x,b=Ni(h,u,m.t)+m.y,$t(x,b,t);for($t(a,u,t),oa(f),g=f.length-1;g>=0;g--)m=f[g],x=Ni(l,a,m.t)+m.x,b=Ni(d,u,m.t)+m.y,$t(x,b,t);for($t(l,d,t),oa(v),g=v.length-1;g>=0;g--)m=v[g],x=Ni(o,l,m.t)+m.x,b=Ni(i,d,m.t)+m.y,$t(x,b,t);return t.push(t[0],t[1]),this.pathIndexes=tx(t),this}get tlx(){return this.geom.tlx}set tlx(e){this.geom.tlx=e,this.dirty=!0}get tly(){return this.geom.tly}set tly(e){this.geom.tly=e,this.dirty=!0}get trx(){return this.geom.trx}set trx(e){this.geom.trx=e,this.dirty=!0}get try(){return this.geom.try}set try(e){this.geom.try=e,this.dirty=!0}get blx(){return this.geom.blx}set blx(e){this.geom.blx=e,this.dirty=!0}get bly(){return this.geom.bly}set bly(e){this.geom.bly=e,this.dirty=!0}get brx(){return this.geom.brx}set brx(e){this.geom.brx=e,this.dirty=!0}get bry(){return this.geom.bry}set bry(e){this.geom.bry=e,this.dirty=!0}get leftSidePoints(){return this.geom.leftSidePoints}get topSidePoints(){return this.geom.topSidePoints}get bottomSidePoints(){return this.geom.bottomSidePoints}get rightSidePoints(){return this.geom.rightSidePoints}}).prototype,Z0);var ex=Phaser.Renderer.WebGL.Utils;const ix={renderWebGL:function(e,t,n,s){if(t.width!==0&&t.height!==0){n.addToRenderList(t);var o=t.frame,i=o.width,r=o.height,h=ex.getTintAppendFloatAlpha,a=e.pipelines.set(t.pipeline,t),u=a.setTexture2D(o.glTexture,t);e.pipelines.preBatch(t),a.batchTexture(t,o.glTexture,i,r,t.x,t.y,i/t.style.resolution,r/t.style.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,i,r,h(t.tintTopLeft,n.alpha*t._alphaTL),h(t.tintTopRight,n.alpha*t._alphaTR),h(t.tintBottomLeft,n.alpha*t._alphaBL),h(t.tintBottomRight,n.alpha*t._alphaBR),t.tintFill,0,0,n,s,!1,u),e.pipelines.postBatch(t)}},renderCanvas:function(e,t,n,s){t.width!==0&&t.height!==0&&(n.addToRenderList(t),e.batchSprite(t,t.frame,n,s))}},Jo=Phaser.Display.Canvas.CanvasPool;Ao();const sx=Phaser.GameObjects.GameObject;class pg extends sx{setStyle(t){return this.style.setStyle(t)}setFont(t){return this.style.setFont(t)}setFontFamily(t){return this.style.setFontFamily(t)}setFontSize(t){return this.style.setFontSize(t)}setFontStyle(t){return this.style.setFontStyle(t)}setTestString(t){return this.style.setTestString(t)}setFixedSize(t,n){return this.style.setFixedSize(t,n)}setBackgroundColor(t,n,s){return this.style.setBackgroundColor(t,n,s)}setBackgroundStrokeColor(t,n){return this.style.setBackgroundStrokeColor(t,n)}setBackgroundCornerRadius(t,n){return this.style.setBackgroundCornerRadius(t,n)}setFill(t){return this.style.setFill(t)}setColor(t){return this.style.setColor(t)}setStroke(t,n){return this.style.setStroke(t,n)}setShadow(t,n,s,o,i,r){return this.style.setShadow(t,n,s,o,i,r)}setShadowOffset(t,n){return this.style.setShadowOffset(t,n)}setShadowColor(t){return this.style.setShadowColor(t)}setShadowBlur(t){return this.style.setShadowBlur(t)}setShadowStroke(t){return this.style.setShadowStroke(t)}setShadowFill(t){return this.style.setShadowFill(t)}setUnderline(t,n,s){return this.style.setUnderline(t,n,s)}setUnderlineColor(t){return this.style.setUnderlineColor(t)}setUnderlineThickness(t){return this.style.setUnderlineThickness(t)}setUnderlineOffset(t){return this.style.setUnderlineOffset(t)}setStrikethrough(t,n,s){return this.style.setStrikethrough(t,n,s)}setStrikethroughColor(t){return this.style.setStrikethroughColor(t)}setStrikethroughThickness(t){return this.style.setStrikethroughThickness(t)}setStrikethroughOffset(t){return this.style.setStrikethroughOffset(t)}setWrapMode(t){return this.style.setWrapMode(t)}setWrapWidth(t){return this.style.setWrapWidth(t)}setWordWrapWidth(t){return this.style.setWrapWidth(t)}setAlign(t){return this.style.setHAlign(t)}setHAlign(t){return this.style.setHAlign(t)}setVAlign(t){return this.style.setVAlign(t)}get lineSpacing(){return this.style.lineSpacing}set lineSpacing(t){this.style.lineSpacing=t}setLineSpacing(t){return this.style.lineSpacing=t,this.updateText(!0),this}setXOffset(t){return this.style.setXOffset(t)}setMaxLines(t){return this.style.setMaxLines(t)}setResolution(t){return this.style.setResolution(t)}getTextMetrics(){return this.style.getTextMetrics()}setTextMetrics(t,n){return this.style.setTextMetrics(t,n)}measureTextMargins(t,n){return function(s,o,i){i===void 0&&(i={});var r=Jo.create(this),h=r.getContext("2d",{willReadFrequently:!0});s.syncFont(r,h);var a=h.measureText(o),u=Math.ceil(a.width*s.baselineX),l=u,d=2*l;if(l=l*s.baselineY|0,r.width=u,r.height=d,h.fillStyle="#f00",h.fillRect(0,0,u,d),h.font=s._font,h.textBaseline="alphabetic",h.fillStyle="#000",h.fillText(s.testString,0,l),i.left=0,u===0||d===0||!h.getImageData(0,0,u,d))return Jo.remove(r),i;for(var c=h.getImageData(0,0,u,d).data,p=!1,f=0;f<u;f++){for(var v=0;v<d;v++)if(c[4*(v*u+f)]!==255){i.left=f,p=!0;break}if(p)break}return Jo.remove(r),i}(this.style,t,n)}}const he=Phaser.GameObjects.Components;Phaser.Class.mixin(pg,[he.Alpha,he.BlendMode,he.ComputedSize,he.Crop,he.Depth,he.Flip,he.GetBounds,he.Mask,he.Origin,he.Pipeline,he.PostPipeline,he.ScrollFactor,he.Tint,he.Transform,he.Visible,ix]);var nx={backgroundColor:["backgroundColor",null,dt],backgroundColor2:["backgroundColor2",null,dt],backgroundHorizontalGradient:["backgroundHorizontalGradient",!0,null],backgroundStrokeColor:["backgroundStrokeColor",null,dt],backgroundStrokeLineWidth:["backgroundStrokeLineWidth",2,null],backgroundCornerRadius:["backgroundCornerRadius",0,null],backgroundCornerIteration:["backgroundCornerIteration",null,null],fontFamily:["fontFamily","Courier",null],fontSize:["fontSize","16px",null],fontStyle:["fontStyle","",null],color:["color","#fff",dt],stroke:["stroke","#fff",dt],strokeThickness:["strokeThickness",0,null],shadowOffsetX:["shadow.offsetX",0,null],shadowOffsetY:["shadow.offsetY",0,null],shadowColor:["shadow.color","#000",dt],shadowBlur:["shadow.blur",0,null],shadowStroke:["shadow.stroke",!1,null],shadowFill:["shadow.fill",!1,null],underlineColor:["underline.color","#000",dt],underlineThickness:["underline.thickness",0,null],underlineOffset:["underline.offset",0,null],strikethroughColor:["strikethrough.color","#000",dt],strikethroughThickness:["strikethrough.thickness",0,null],strikethroughOffset:["strikethrough.offset",0,null],halign:["halign","left",null],valign:["valign","top",null],maxLines:["maxLines",0,null],fixedWidth:["fixedWidth",0,null],fixedHeight:["fixedHeight",0,null],resolution:["resolution",0,null],lineSpacing:["lineSpacing",0,null],xOffset:["xOffset",0,null],rtl:["rtl",!1,null],testString:["testString","|Mqgy",null],baselineX:["baselineX",1.2,null],baselineY:["baselineY",1.4,null],wrapMode:["wrap.mode",0,null],wrapWidth:["wrap.width",0,null],wrapCallback:["wrap.callback",null],wrapCallbackScope:["wrap.callbackScope",null]};const ha=Phaser.Display.Canvas.CanvasPool;var gd=function(e){var t=ha.create(this),n=t.getContext("2d",{willReadFrequently:!0});e.syncFont(t,n);var s=n.measureText(e.testString);if("actualBoundingBoxAscent"in s){var o=s.actualBoundingBoxAscent,i=s.actualBoundingBoxDescent,r={ascent:o,descent:i,fontSize:o+i};return ha.remove(t),r}var h=Math.ceil(s.width*e.baselineX),a=h,u=2*a;if(a=a*e.baselineY|0,t.width=h,t.height=u,n.fillStyle="#f00",n.fillRect(0,0,h,u),n.font=e._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(e.testString,0,a),r={ascent:0,descent:0,fontSize:0},!n.getImageData(0,0,h,u))return r.ascent=a,r.descent=a+6,r.fontSize=r.ascent+r.descent,ha.remove(t),r;var l,d,c=n.getImageData(0,0,h,u).data,p=c.length,f=4*h,v=0,g=!1;for(l=0;l<a;l++){for(d=0;d<f;d+=4)if(c[v+d]!==255){g=!0;break}if(g)break;v+=f}for(r.ascent=a-l,v=p-f,g=!1,l=u;l>a;l--){for(d=0;d<f;d+=4)if(c[v+d]!==255){g=!0;break}if(g)break;v-=f}return r.descent=l-a,r.fontSize=r.ascent+r.descent,ha.remove(t),r},gg=/(?:\r\n|\r|\n)/;const yo={none:0,word:1,char:2,character:2,mix:3},rx=Phaser.Utils.Objects.GetAdvancedValue,we=Phaser.Utils.Objects.GetValue;let tu=class{constructor(e,t,n){this.parent=e,n===void 0&&(n=nx),this.propertyMap=n,this.backgroundColor,this.backgroundColor2,this.backgroundHorizontalGradient,this.backgroundStrokeColor,this.backgroundStrokeLineWidth,this.backgroundCornerRadius,this.backgroundCornerIteration,this.fontFamily,this.fontSize,this.fontStyle,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.underlineColor,this.underlineThickness,this.underlineOffset,this.strikethroughColor,this.strikethroughThickness,this.strikethroughOffset,this.halign,this.valign,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.xOffset,this.rtl,this.testString,this.baselineX,this.baselineY,this.wrapMode,this.wrapWidth,this.wrapCallback,this.wrapCallbackScope,this._font,this.setStyle(t,!1,!0)}get isWrapFitMode(){return this.fixedWidth>0&&this.wrapMode!==0&&this.wrapWidth===0}setStyle(e,t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!1),e&&e.hasOwnProperty("wordWrap")){var s=e.wordWrap;s.hasOwnProperty("width")&&(e.wrap={mode:"word",width:s.width})}if(e&&e.hasOwnProperty("wrap")){var o=e.wrap;if(o.hasOwnProperty("mode")){var i=o.mode;typeof i=="string"&&(o.mode=yo[i])}else o.hasOwnProperty("width")&&(o.mode=1)}e&&e.rtl&&n&&!e.hasOwnProperty("halign")&&(e.halign="right"),e&&e.hasOwnProperty("fontSize")&&typeof e.fontSize=="number"&&(e.fontSize=e.fontSize.toString()+"px");var r=this.propertyMap;for(var h in r){var a=r[h],u=a[0],l=n?a[1]:this[h],d=a[2];if(h==="wrapCallback"||h==="wrapCallbackScope")this[h]=we(e,u,l);else{var c=rx(e,u,l);d&&(c=d(c)),this[h]=c}}var p=we(e,"font",null);this._font=p===null?this.fontStyle+" "+this.fontSize+" "+this.fontFamily:p;var f=we(e,"fill",null);f!==null&&(this.color=dt(f));var v=we(e,"metrics",!1);return v?this.metrics={ascent:we(v,"ascent",0),descent:we(v,"descent",0),fontSize:we(v,"fontSize",0)}:!t&&this.metrics||(this.metrics=gd(this)),t?this.parent.updateText():this.parent}syncFont(e,t){t.font=this._font}syncStyle(e,t){t.textBaseline="alphabetic",t.fillStyle=this.color,t.strokeStyle=this.stroke,t.lineWidth=this.strokeThickness,t.lineCap="round",t.lineJoin="round"}syncShadow(e,t){t?(e.shadowOffsetX=this.shadowOffsetX,e.shadowOffsetY=this.shadowOffsetY,e.shadowColor=this.shadowColor,e.shadowBlur=this.shadowBlur):(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowColor=0,e.shadowBlur=0)}update(e){return e&&(this._font=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim(),this.metrics=gd(this)),this.parent.updateText(e)}buildFont(){var e=`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`.trim();return e!==this._font&&(this._font=e),this}setFont(e){return typeof e=="string"?(this.fontFamily=e,this.fontSize="",this.fontStyle=""):(this.fontFamily=we(e,"fontFamily","Courier"),this.fontSize=we(e,"fontSize","16px"),this.fontStyle=we(e,"fontStyle","")),this.update(!0)}setFontFamily(e){return this.fontFamily=e,this.update(!0)}setFontStyle(e){return this.fontStyle=e,this.update(!0)}setFontSize(e){return typeof e=="number"&&(e=e.toString()+"px"),this.fontSize=e,this.update(!0)}setTestString(e){return this.testString=e,this.update(!0)}setFixedSize(e,t){return this.fixedWidth=e,this.fixedHeight=t,e&&(this.parent.width=e),t&&(this.parent.height=t),this.update(this.isWrapFitMode)}setResolution(e){return this.resolution=e,this.update(!1)}setXOffset(e){return this.xOffset=e,this.update(!1)}setBackgroundColor(e,t,n){return n===void 0&&(n=!0),this.backgroundColor=dt(e,this.parent.canvas,this.parent.context),this.backgroundColor2=dt(t,this.parent.canvas,this.parent.context),this.backgroundHorizontalGradient=n,this.update(!1)}setBackgroundStrokeColor(e,t){return this.backgroundStrokeColor=dt(e,this.parent.canvas,this.parent.context),this.backgroundStrokeLineWidth=t,this.update(!1)}setBackgroundCornerRadius(e,t){return this.backgroundCornerRadius=e,this.backgroundCornerIteration=t,this.update(!1)}setFill(e){return this.color=dt(e,this.parent.canvas,this.parent.context),this.update(!1)}setColor(e){return this.color=dt(e,this.parent.canvas,this.parent.context),this.update(!1)}setStroke(e,t){return e===void 0?this.strokeThickness=0:(t===void 0&&(t=this.strokeThickness),this.stroke=dt(e,this.parent.canvas,this.parent.context),this.strokeThickness=t),this.update(!0)}setShadow(e,t,n,s,o,i){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n="#000"),s===void 0&&(s=0),o===void 0&&(o=!1),i===void 0&&(i=!0),this.shadowOffsetX=e,this.shadowOffsetY=t,this.shadowColor=dt(n,this.parent.canvas,this.parent.context),this.shadowBlur=s,this.shadowStroke=o,this.shadowFill=i,this.update(!1)}setShadowOffset(e,t){return e===void 0&&(e=0),t===void 0&&(t=e),this.shadowOffsetX=e,this.shadowOffsetY=t,this.update(!1)}setShadowColor(e){return e===void 0&&(e="#000"),this.shadowColor=dt(e,this.parent.canvas,this.parent.context),this.update(!1)}setShadowBlur(e){return e===void 0&&(e=0),this.shadowBlur=e,this.update(!1)}setShadowStroke(e){return this.shadowStroke=e,this.update(!1)}setShadowFill(e){return this.shadowFill=e,this.update(!1)}setUnderline(e,t,n){return e===void 0&&(e="#000"),t===void 0&&(t=0),n===void 0&&(n=0),this.underlineColor=dt(e,this.parent.canvas,this.parent.context),this.underlineThickness=t,this.underlineOffset=n,this.update(!1)}setUnderlineColor(e){return e===void 0&&(e="#000"),this.underlineColor=dt(e,this.parent.canvas,this.parent.context),this.update(!1)}setUnderlineThickness(e){return e===void 0&&(e=0),this.underlineThickness=e,this.update(!1)}setUnderlineOffset(e){return e===void 0&&(e=0),this.underlineOffset=e,this.update(!1)}setStrikethrough(e,t,n){return e===void 0&&(e="#000"),t===void 0&&(t=0),n===void 0&&(n=0),this.strikethroughColor=dt(e,this.parent.canvas,this.parent.context),this.strikethroughThickness=t,this.strikethroughOffset=n,this.update(!1)}setStrikethroughColor(e){return e===void 0&&(e="#000"),this.strikethroughColor=dt(e,this.parent.canvas,this.parent.context),this.update(!1)}setStrikethroughThickness(e){return e===void 0&&(e=0),this.strikethroughThickness=e,this.update(!1)}setStrikethroughOffset(e){return e===void 0&&(e=0),this.strikethroughOffset=e,this.update(!1)}setWrapMode(e){return typeof e=="string"&&(e=yo[e.toLowerCase()]||0),this.wrapMode=e,this.update(!0)}setWrapWidth(e){return this.wrapWidth=e,this.update(!1)}setAlign(e,t){return e===void 0&&(e="left"),t===void 0&&(t="top"),this.halign=e,this.valign=t,this.update(!1)}setHAlign(e){return e===void 0&&(e="left"),this.halign=e,this.update(!1)}setVAlign(e){return e===void 0&&(e="top"),this.valign=e,this.update(!1)}setMaxLines(e){return e===void 0&&(e=0),this.maxLines=e,this.update(!1)}getTextMetrics(){var e=this.metrics;return{ascent:e.ascent,descent:e.descent,fontSize:e.fontSize}}setTextMetrics(e,t){return this.metrics.ascent=e.ascent,this.metrics.descent=e.descent,this.metrics.fontSize=e.fontSize,t&&(typeof t=="string"?(this.fontFamily=t,this.fontSize="",this.fontStyle=""):(this.fontFamily=we(t,"fontFamily",this.fontFamily),this.fontSize=we(t,"fontSize",this.fontSize),this.fontStyle=we(t,"fontStyle",this.fontStyle))),this.parent.updateText(!0)}get lineHeight(){return this.metrics.fontSize+this.parent.lineSpacing}toJSON(){var e={},t=this.propertyMap;for(var n in t)e[n]=this[n];return e.metrics=this.getTextMetrics(),e}destroy(){this.parent=void 0}};var Pn=function(e){return e==null?e="":Array.isArray(e)?e=e.join(`
`):typeof e=="number"&&(e=e.toString()),e};const ax={draw(e,t,n,s){var o=this.penManager;this.hitAreaManager.clear();var i=this.context;i.save();var r=this.defaultStyle;this.clear(),fg(this,r.backgroundColor,r.backgroundStrokeColor,r.backgroundStrokeLineWidth,r.backgroundCornerRadius,r.backgroundColor2,r.backgroundHorizontalGradient,r.backgroundCornerIteration),e+=this.startXOffset,t+=this.startYOffset;var h,a,u,l,d,c,p=r.halign,f=r.valign,v=r.lineHeight,g=o.lines,y=g.length,m=r.maxLines;m>0&&y>m?(a=m,u=f==="center"?Math.floor((y-a)/2):f==="bottom"?y-a:0):(a=y,u=0),l=u+a;var x=this.rtl,b=x?this.parent.width:void 0;c=f==="center"?Math.max((s-a*v)/2,0):f==="bottom"?Math.max(s-a*v-2,0):0,c+=t;for(var w=u;w<l;w++)if((h=o.getLineWidth(w))!==0){for(var T=g[w],S=T.length,C=p,E=0;E<S;E++){var M=T[E].prop.align;if(M!==void 0){C=M;break}}for(d=C==="center"?(n-h)/2:C==="right"?x?0:n-h:x?n-h:0,d+=e,E=0;E<S;E++)this.drawPen(T[E],d,c,b)}i.restore()},drawPen(e,t,n,s){t+=e.x,n+=e.y+(e.prop.y||0),s!==void 0&&(t=s-t);var o=this.canvas,i=this.context;i.save();var r=this.parser.propToContextStyle(this.defaultStyle,e.prop);if(r.bgcolor!==null&&e.width>0){var h=this.defaultStyle.metrics,a=n-h.ascent,u=h.fontSize;this.drawRectangle(t,a,e.width,u,r.bgcolor,r)}if(r.underlineThickness>0&&e.width>0){var l=n+r.underlineOffset-r.underlineThickness/2;this.drawLine(t,l,e.width,r.underlineThickness,r.underlineColor,r)}if(e.isTextPen&&(r.buildFont(),r.syncFont(o,i),r.syncStyle(o,i),this.drawText(t,n,e.text,r)),e.isImagePen&&this.drawImage(t,n,e.prop.img,e.prop.color,r),r.strikethroughThickness>0&&e.width>0&&(l=n+r.strikethroughOffset-r.strikethroughThickness/2,this.drawLine(t,l,e.width,r.strikethroughThickness,r.strikethroughColor,r)),i.restore(),e.hasAreaMarker&&e.width>0){var d,c=e.prop.area;if(c)d={key:c};else{var p=e.prop.url;d={key:`url:${p}`,url:p}}this.hitAreaManager.add(t,n-this.startYOffset,e.width,this.defaultStyle.lineHeight,d)}},clear(){var e=this.canvas;this.context.clearRect(0,0,e.width,e.height)},drawRectangle(e,t,n,s,o,i){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;r.fillStyle=o,r.fillRect(e,t,n,s)},drawLine(e,t,n,s,o,i){this.autoRound&&(e=Math.round(e),t=Math.round(t));var r=this.context;i.syncShadow(r,i.shadowStroke);var h=r.lineCap;r.lineCap="butt",r.strokeStyle=o,r.lineWidth=s,r.beginPath(),r.moveTo(e,t),r.lineTo(e+n,t),r.stroke(),r.lineCap=h},drawText(e,t,n,s){this.autoRound&&(e=Math.round(e),t=Math.round(t));var o=this.context;s.stroke&&s.stroke!=="none"&&s.strokeThickness>0&&(s.syncShadow(o,s.shadowStroke),o.strokeText(n,e,t)),s.color&&s.color!=="none"&&(s.syncShadow(o,s.shadowFill),o.fillText(n,e,t))},drawImage(e,t,n,s,o){t-=this.startYOffset,this.parent.imageManager.draw(n,this.context,e,t,s,this.autoRound)}},us=Phaser.Utils.Objects.GetValue;class ox{constructor(t){this.prop={},this.resetFromJSON(t)}resetFromJSON(t){this.text=us(t,"text",""),this.x=us(t,"x",0),this.y=us(t,"y",0),this.width=us(t,"width",0);var n=us(t,"prop",null);n===null&&(n={}),this.prop=n,this.newLineMode=us(t,"newLineMode",0),this.startIndex=us(t,"startIndex",0)}get plainText(){var t=this.text;return this.newLineMode===1&&(t+=`
`),t}get wrapText(){var t=this.text;return this.newLineMode!==0&&(t+=`
`),t}get rawTextLength(){var t=this.text.length;return this.newLineMode===1&&(t+=1),t}get endIndex(){return this.startIndex+this.rawTextLength}get lastX(){return this.x+this.width}get isTextPen(){return this.text!==""}get isImagePen(){return!!this.prop.img}get hasAreaMarker(){return!!this.prop.area||!!this.prop.url}}var vi=function(e,t){var n=Array.isArray(e);if(t===void 0?t=n?[]:{}:ss(t),n){t.length=e.length;for(var s=0,o=e.length;s<o;s++)t[s]=e[s]}else for(var i in e)t[i]=e[i];return t};const md=Phaser.Utils.Objects.GetFastValue;class eu{constructor(t){this.pens=[],this.lines=[],this.maxLinesWidth=void 0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.tagToText=md(t,"tagToText",Ht),this.tagToTextScope=md(t,"tagToTextScope",void 0)}destroy(){this.clear(),this.tagToText=void 0,this.tagToTextScope=void 0}clear(){for(var t=0,n=this.lines.length;t<n;t++)this.lines[t].length=0;this.pensPool.pushMultiple(this.pens),this.linesPool.pushMultiple(this.lines),this.maxLinesWidth=void 0}addTextPen(t,n,s,o,i,r){var h=this.pensPool.pop();return h==null&&(h=new ox),ds.text=t,ds.x=n,ds.y=s,ds.width=o,ds.prop=i,ds.newLineMode=r,h.resetFromJSON(ds),this.addPen(h),this}addImagePen(t,n,s,o){return this.addTextPen("",t,n,s,o,0),this}addNewLinePen(){var t=this.lastPen,n=t?t.lastX:0,s=t?t.y:0,o=t?vi(t.prop):null;return this.addTextPen("",n,s,0,o,2),this}addPen(t){var n=this.lastPen;t.startIndex=n==null?0:n.endIndex,this.pens.push(t);var s=this.lastLine;s==null&&(s=this.linesPool.pop()||[],this.lines.push(s)),s.push(t),t.newLineMode!==0&&(s=this.linesPool.pop()||[],this.lines.push(s)),this.maxLinesWidth=void 0}clone(t){t==null&&(t=new eu),t.clear();for(var n=0,s=this.lines.length;n<s;n++)for(var o=this.lines[n],i=0,r=o.length;i<r;i++){var h=o[i];t.addPen(h.text,h.x,h.y,h.width,vi(h.prop),h.newLineMode)}return t}get lastPen(){return this.pens[this.pens.length-1]}get lastLine(){return this.lines[this.lines.length-1]}getLineStartIndex(t){if(t>=this.lines.length)return this.getLineEndIndex(t);var n=this.lines[t];return n&&n[0]?n[0].startIndex:0}getLineEndIndex(t){t>=this.lines.length&&(t=this.lines.length-1);var n,s,o=!1;for(n=t;n>=0&&!(o=(s=this.lines[n])!=null&&s.length>0);n--);return o?s[s.length-1].endIndex:0}getLineWidth(t){var n=this.lines[t];if(!n)return 0;var s=n[n.length-1];return s==null?0:s.lastX}getMaxLineWidth(){if(this.maxLinesWidth!==void 0)return this.maxLinesWidth;for(var t,n=0,s=0,o=this.lines.length;s<o;s++)(t=this.getLineWidth(s))>n&&(n=t);return this.maxLinesWidth=n,n}getLineWidths(){for(var t=[],n=0,s=this.lines.length;n<s;n++)t.push(this.getLineWidth(n));return t}get linesCount(){return this.lines.length}get plainText(){for(var t="",n=this.pens,s=0,o=n.length;s<o;s++)t+=n[s].plainText;return t}get rawTextLength(){for(var t=0,n=this.pens,s=0,o=this.pens.length;s<o;s++)t+=n[s].rawTextLength;return t}getSliceTagText(t,n,s){var o=this.lastPen;if(o==null)return"";var i=o.endIndex;t!==void 0&&t!==0||(t=-1),n!==void 0&&n!==i||(n=i+1),s===void 0&&(s=!1);for(var r,h,a,u,l,d,c="",p=0,f=this.pens.length;p<f&&((u=(r=this.pens[p]).endIndex)<=t||(r=this.pens[p],h=s?r.wrapText:r.plainText,l=r.prop,(a=r.startIndex)>=t&&u<=n||(h=h.substring(t-a,n-a)),this.tagToTextScope?c+=this.tagToText.call(this.tagToTextScope,h,l,d):c+=this.tagToText(h,l,d),d=l,!(u>=n)));p++);return c}get length(){return this.lines.length}set length(t){this.clear()}}var ds={};const hx=Phaser.Geom.Rectangle;var vd=new mi;class lx{constructor(){this.hitAreas=[]}destroy(){this.clear()}clear(){for(var t=0,n=this.hitAreas.length;t<n;t++)this.hitAreas[t].data=null;return vd.pushMultiple(this.hitAreas),this}add(t,n,s,o,i){i===void 0&&(i={});var r=vd.pop();return r===null?r=new hx(t,n,s,o):r.setTo(t,n,s,o),r.data=i,this.hitAreas.push(r),this}getFirst(t,n){for(var s=0,o=this.hitAreas.length;s<o;s++){var i=this.hitAreas[s];if(i.contains(t,n))return i}return null}getByKey(t){for(var n=0,s=this.hitAreas.length;n<s;n++){var o=this.hitAreas[n];if(o.data.key===t)return o}return null}drawBounds(t,n,s){n===void 0&&(n=16777215),s&&t.save().translateCanvas(s.x,s.y).rotateCanvas(s.rotation).scaleCanvas(s.scaleX,s.scaleY);for(var o=0,i=this.hitAreas.length;o<i;o++){var r=this.hitAreas[o];t.lineStyle(1,n).strokeRect(r.x,r.y,r.width,r.height)}return s&&t.restore(),this}}var ux=function(e,t,n,s){var o=this.hitAreaManager.getFirst(t,n);if(o!==null){var i=o.data.key;On.call(this,"areadown",i,e,t,n,s),o.data&&(o.data.isDown=!0)}},dx=function(e,t,n,s){var o=this.hitAreaManager.getFirst(t,n);if(o!==null){var i=o.data.key;if(On.call(this,"areaup",i,e,t,n,s),o.data){if(o.data.isDown){if(On.call(this,"areaclick",i,e,t,n,s),!o.data)return;var r=o.data.url;r&&window.open(r,"_blank")}o.data.isDown=!1}}},Qo=function(e,t,n,s){if(t!==null){var o=(r=this.hitAreaManager.getFirst(t,n))?r.data.key:null;if(this.lastHitAreaKey!==o){if(this.lastHitAreaKey!==null){On.call(this,"areaout",this.lastHitAreaKey,e,t,n,s);var i=this.hitAreaManager.getByKey(this.lastHitAreaKey);i&&(this.urlTagCursorStyle&&yd(this.scene,i,""),i.data.isDown=!1)}o!==null&&(On.call(this,"areaover",o,e,t,n,s),r.data&&this.urlTagCursorStyle&&yd(this.scene,r,this.urlTagCursorStyle)),this.lastHitAreaKey=o}}else{var r;this.lastHitAreaKey!==null&&(On.call(this,"areaout",this.lastHitAreaKey,e,t,n,s),(r=this.hitAreaManager.getByKey(this.lastHitAreaKey))&&r.data&&(r.data.isDown=!1),this.lastHitAreaKey=null)}},On=function(e,t,n,s,o,i){this.parent.emit(`${e}-${t}`,n,s,o,i),this.parent.emit(e,t,n,s,o,i)},yd=function(e,t,n){t&&t.data&&t.data.url&&(e.input.manager.canvas.style.cursor=n)};const xd=Phaser.GameObjects.Components.TransformMatrix,cx=Phaser.Math.TransformXY;var la,bd,mg=function(e,t,n,s,o){s===void 0&&(s=e.scene.cameras.main),o===void 0?o={}:o===!0&&(o=fx);var i=s.scrollX,r=s.scrollY,h=t+i*e.scrollFactorX-i,a=n+r*e.scrollFactorY-r;return e.parentContainer?(la===void 0&&(la=new xd,bd=new xd),e.getWorldTransformMatrix(la,bd),la.applyInverse(h,a,o)):cx(h,a,e.x,e.y,e.rotation,e.scaleX,e.scaleY,o),o.x+=e.displayOriginX,o.y+=e.displayOriginY,o},fx={},px=/^[\x00-\x7F]+$/,Mr=function(e){return px.test(e)};const gx=gg;var vg=function(e,t,n,s,o,i){s<=0&&(n=0);var r=[];if(!e||!e.length)return r;for(var h,a,u,l=n===0,d=e.split(gx),c=0,p=d.length;c<p;c++)if(h=d[c],u=c===p-1?0:1,l){var f=t.measureText(h).width;r.push(i.getLine(h,f,u))}else{if(a=c===0?s-o:s,h.length<=100&&(f=t.measureText(h).width)<=a){r.push(i.getLine(h,f,u));continue}for(var v,g,y,m=mx(h,n),x="",b=0,w=0,T=m.length;w<T;w++)if(v=m[w],(g=t.measureText(v).width)>s&&vx(v)){x!==""?r.push(i.getLine(x,b,2)):w===0&&o>0&&r.push(i.getLine("",0,2)),r.push(...vg(v,t,2,s,0,i));var S=r.pop();x=S.text,b=S.width,i.freeLine(S),x===" "&&(x="",b=0)}else(y=b+g)>a?(r.push(i.getLine(x,b,2)),x=v,b=g,a=s):(x+=v,b=y),w===T-1&&r.push(i.getLine(x,b,u))}return r},mx=function(e,t){var n;switch(t){case 1:n=[];for(var s=0,o=(e=e.split(" ")).length;s<o;s++){var i=e[s];s<o-1?n.push(i+" "):i!==""&&n.push(i)}break;case 2:n=e.split("");break;default:for(n=[],s=0,o=(e=e.split(" ")).length;s<o;s++)i=e[s],s<o-1?Mr(i)?n.push(i+" "):(n.push(...i.split("")),n.push(" ")):i!==""&&(Mr(i)?n.push(i):n.push(...i.split("")))}return n},vx=function(e){switch(e.length){case 1:return!1;case 2:return e.charAt(1)!==" ";default:return!0}};const th=Phaser.Utils.Objects.GetValue;class yg{constructor(t){this.parent=t.parent,this.scene=this.parent.scene,this.context=th(t,"context",null),this.canvas=this.context.canvas,this.parser=th(t,"parser",null),this.defaultStyle=th(t,"style",null),this.autoRound=!0,this.pensPool=t.pensPool,this.linesPool=t.linesPool,this.wrapTextLinesPool=t.wrapTextLinesPool,this.penManager=this.newPenManager(),this._tmpPenManager=null,this.hitAreaManager=new lx,this.lastHitAreaKey=null,this.urlTagCursorStyle=null}destroy(){this.parent=void 0,this.scene=void 0,this.context=void 0,this.canvas=void 0,this.parser=void 0,this.defaultStyle=void 0,this.penManager&&(this.penManager.destroy(),this.penManager=void 0),this._tmpPenManager&&(this._tmpPenManager.destroy(),this._tmpPenManager=void 0),this.hitAreaManager&&(this.hitAreaManager.destroy(),this.hitAreaManager=void 0),this.pensPool=void 0,this.linesPool=void 0,this.wrapTextLinesPool=void 0}updatePenManager(t,n,s,o,i){if(i===void 0&&(i=this.penManager),i.clear(),t==="")return i;var r=this.parent.style;if(r.isWrapFitMode){var h=this.parent.padding;s=r.fixedWidth-h.left-h.right}for(var a,u,l,d,c,p=this.canvas,f=this.context,v=0,g=0,y=r.wrapCallback,m=r.wrapCallbackScope,x=!0,b=this.parser.splitText(t),w=this.wrapTextLinesPool,T=0,S=b.length;T<S;T++)if(a=(d=this.parser.tagTextToProp(b[T],u)).plainText,(u=d.prop).img){var C=this.imageManager.getOuterWidth(u.img);s>0&&n!==0&&s<v+C&&(i.addNewLinePen(),g+=o,v=0),i.addImagePen(v,g,C,vi(u)),v+=C}else if(a!==""){if(f.save(),(l=this.parser.propToContextStyle(this.defaultStyle,u)).buildFont(),l.syncFont(p,f),l.syncStyle(p,f),y){typeof(c=y.call(m,a,f,s,v))=="string"&&(c=c.split(`
`));for(var E=0,M=c.length;E<M;E++)typeof(_=c[E])=="string"?c[E]=w.getLine(_,f.measureText(_).width,E<M-1?2:0):x=!1}else c=vg(a,f,n,s,v,w);var _;for(E=0,M=c.length;E<M;E++)_=c[E],i.addTextPen(_.text,v,g,_.width,vi(u),_.newLineMode),_.newLineMode!==0?(v=0,g+=o):v+=_.width;x&&w.freeLines(c),c=null,f.restore()}for(T=0,S=this.lines.length;T<S;T++){var O=this.lines[T],k=O[O.length-1];k&&(k.width+=this.parser.getStrokeThinkness(this.defaultStyle,k.prop))}return i}get startXOffset(){return this.defaultStyle.xOffset}get startYOffset(){return this.defaultStyle.metrics.ascent}get lines(){return this.penManager.lines}get displayLinesCount(){var t=this.penManager.linesCount,n=this.defaultStyle.maxLines;return n>0&&t>n&&(t=n),t}get linesWidth(){return Math.ceil(this.penManager.getMaxLineWidth())}get linesHeight(){var t=this.displayLinesCount,n=this.defaultStyle.lineHeight*t;return t>0&&(n-=this.defaultStyle.lineSpacing),n}get imageManager(){return this.parent.imageManager}get rtl(){return this.parent.style.rtl}newPenManager(){return new eu({pensPool:this.pensPool,linesPool:this.linesPool,tagToText:this.parser.propToTagText,tagToTextScope:this.parser})}get tmpPenManager(){return this._tmpPenManager===null&&(this._tmpPenManager=this.newPenManager()),this._tmpPenManager}getPlainText(t,n,s){var o;if(t==null)o=this.penManager.plainText;else{var i=this.parser.splitText(t,1);o="";for(var r=0,h=i.length;r<h;r++)o+=i[r]}return n==null&&s==null||(n==null&&(n=0),s==null&&(s=o.length),o=o.substring(n,s)),o}getPenManager(t,n){if(t===void 0)return this.copyPenManager(n,this.penManager);n===void 0&&(n=this.newPenManager());var s=this.defaultStyle;return this.updatePenManager(t,s.wrapMode,s.wrapWidth,s.lineHeight,n),n}getText(t,n,s,o){if(t==null)return this.penManager.getSliceTagText(n,s,o);var i=this.tmpPenManager,r=this.defaultStyle;return this.updatePenManager(t,r.wrapMode,r.wrapWidth,r.lineHeight,i),i.getSliceTagText(n,s,o)}copyPenManager(t,n){return n===void 0&&(n=this.penManager),n.copy(t)}getTextWidth(t){return t===void 0&&(t=this.penManager),t.getMaxLineWidth()}getLastPen(t){return t===void 0&&(t=this.penManager),t.lastPen}}var yx={setInteractive:function(){this.parent.on("pointerdown",ux,this).on("pointerup",dx,this).on("pointermove",Qo,this).on("pointerover",Qo,this).on("pointerout",function(e,t){Qo.call(this,e,null,null,t)},this)},getHitArea:function(e,t,n){var s=mg(this.parent,e,t,n,!0),o=this.hitAreaManager.getFirst(s.x,s.y);if(o!==null)return o.data.key}};Object.assign(yg.prototype,ax,yx);class Td extends mi{freeLine(t){if(t)return this.push(t),this}freeLines(t){if(t)return this.pushMultiple(t),this}getLine(t,n,s){var o=this.pop();return o===null&&(o={}),o.text=t,o.width=n,o.newLineMode=s,o}}const xx=Phaser.Utils.Objects.IsPlainObject,qs=Phaser.Utils.Objects.GetValue;var eh=function(e,t){xx(e)?e=(t=e).key:t===void 0&&(t={key:e}),t.hasOwnProperty("key")||(t.key=e);var n=t.key,s=t.frame,o=t.width,i=t.height;if(o===void 0||i===void 0){var r=this.textureManager.getFrame(n,s),h=r?r.cutWidth:0,a=r?r.cutHeight:0;o===void 0&&i===void 0?(o=h,i=a):o===void 0?o=h*(i/a):i===void 0&&(i=a*(o/h))}this.images[e]={key:n,frame:s,width:o,height:i,y:qs(t,"y",0),left:qs(t,"left",0),right:qs(t,"right",0),originX:qs(t,"originX",0),originY:qs(t,"originY",0),tintFill:qs(t,"tintFill",!1)}};const wd=Phaser.Display.Canvas.CanvasPool;var xg=function(e,t,n,s,o,i,r,h){n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=e.cutWidth),i===void 0&&(i=e.cutHeight),h===void 0&&(h=!1),h&&(n=Math.round(n),s=Math.round(s));var a=t.getContext("2d",{willReadFrequently:!0});if(r){var u=wd.create(null,o,i,Phaser.CANVAS,!0),l=u.getContext("2d",{willReadFrequently:!0});l.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,0,0,o,i),l.globalCompositeOperation="source-in",l.fillStyle=r,l.fillRect(0,0,o,i),a.drawImage(u,0,0,o,i,n,s,o,i),wd.remove(u)}else a.drawImage(e.source.image,e.cutX,e.cutY,e.cutWidth,e.cutHeight,n,s,o,i)};class iu{constructor(t){this.textureManager=t.sys.textures,this.images={}}destroy(){this.textureManager=void 0,this.images=void 0}add(t,n){if(typeof t=="string")eh.call(this,t,n);else if(Array.isArray(t))for(var s=0,o=(i=t).length;s<o;s++)eh.call(this,i[s]);else{var i=t;for(var t in i)eh.call(this,t,i[t])}return this}has(t){return this.images.hasOwnProperty(t)}remove(t){return this.has(t)&&delete this.images[t],this}get(t){return this.has(t)||this.textureManager.exists(t)&&this.add(t),this.images[t]}getOuterWidth(t){var n=this.get(t);return n?n.width+n.left+n.right:0}getFrame(t){var n=this.get(t);return n?this.textureManager.getFrame(n.key,n.frame):void 0}hasTexture(t){return!!this.getFrame(t)}}var bx={draw:function(e,t,n,s,o,i){var r=this.get(e);if(r){var h=this.textureManager.getFrame(r.key,r.frame),a=r.width,u=r.height;n+=r.left-r.originX*a,s+=r.y-r.originY*u,r.tintFill||(o=void 0),xg(h,t.canvas,n,s,a,u,o,i)}}};Object.assign(iu.prototype,bx);var bg=function(e,t){var n;return e||e===0||(e=""),t===void 0&&(t=!0),Array.isArray(e)&&(e=e.join(`
`)),(n=t?`${this.text}
${e}`:`${this.text}${e}`)!=this.text&&this.setText(n),this};const Tx=Phaser.Utils.Objects.IsPlainObject,Sd=Phaser.DOM.AddToDOM,Cd=Phaser.Display.Canvas.CanvasPool,wx=Phaser.GameObjects.GameObject,me=Phaser.Utils.Objects.GetValue,Sx=Phaser.DOM.RemoveFromDOM,Cx=gg,Ex=Phaser.Utils.String.UUID;var $s=null,ih=null,sh=null;class Tg extends pg{constructor(t,n,s,o,i,r,h){if(Tx(n)){var a=n;n=me(a,"x",0),s=me(a,"y",0),o=me(a,"text",""),i=me(a,"style")}if(n===void 0&&(n=0),s===void 0&&(s=0),super(t,r),this.renderer=t.sys.game.renderer,this.setPosition(n,s),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=Cd.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this._imageManager=void 0,i){if(i.hasOwnProperty("align")){var u=i.align;delete i.align,i.halign=u}i.hasOwnProperty("stroke")&&!i.hasOwnProperty("strokeThickness")&&(i.strokeThickness=1)}this.style=new tu(this,i);var l,d,c,p=me(i,"images",void 0);p&&this.addImage(p),this.autoRound=!0,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=Ex(),this.texture=t.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),me(i,"sharedPool",!0)?($s||($s={},ih=new mi,sh=new Td,this.scene.game.events.once("destroy",function(){$s=null,ih=null,sh=null})),$s.hasOwnProperty(r)||($s[r]=new mi),l=$s[r],d=ih,c=sh):(l=new mi,d=new mi,c=new Td),this.canvasText=new yg({parent:this,context:this.context,parser:h,style:this.style,pensPool:l,linesPool:d,wrapTextLinesPool:c}),this.parser=h,this.initRTL(),i&&i.padding&&this.setPadding(i.padding),this.setText(o),this.setUrlTagCursorStyle(me(i,"urlTagCursorStyle","pointer")),me(i,"interactive",!1)&&this.setInteractive()}preDestroy(){Sx(this.canvas),this.canvasText.destroy(),this.canvasText=void 0,this._imageManager&&(this._imageManager.destroy(),this._imageManager=void 0),Cd.remove(this.canvas);var t=this.texture;t&&t.destroy()}set text(t){this.setText(t)}get text(){return this._text}initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Sd(this.canvas,this.scene.sys.canvas),this.originX=1)}setRTL(t){t===void 0&&(t=!0);var n=this.style;if(n.rtl===t)return this;if(n.rtl=t,t?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",Sd(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),n.halign==="left"?n.halign="right":n.halign==="right"&&(n.halign="left"),this._imageManager){var s=this._imageManager.images;for(var o in s)s[o].originX=1-s[o].originX}return this}setText(t){return(t=Pn(t))===this._text||(this._text=t,this.updateText()),this}setPadding(t,n,s,o){if(typeof t=="object"){var i=t,r=me(i,"x",null);r!==null?(t=r,s=r):(t=me(i,"left",0),s=me(i,"right",t));var h=me(i,"y",null);h!==null?(n=h,o=h):(n=me(i,"top",0),o=me(i,"bottom",n))}else t===void 0&&(t=0),n===void 0&&(n=t),s===void 0&&(s=t),o===void 0&&(o=n);return this.padding.left=t,this.padding.top=n,this.padding.right=s,this.padding.bottom=o,this.updateText(!1)}updateText(t){t===void 0&&(t=!0);var n=this.canvasText,s=this.style;t&&n.updatePenManager(this._text,s.wrapMode,s.wrapWidth,s.lineHeight);var o,i,r=this.padding,h=Math.ceil(n.linesWidth);s.fixedWidth===0?(this.width=h+r.left+r.right,o=h):(this.width=s.fixedWidth,(o=this.width-r.left-r.right)<h&&(o=h)),s.fixedHeight===0?(this.height=n.linesHeight+r.top+r.bottom,i=n.linesHeight):(this.height=s.fixedHeight,(i=this.height-r.top-r.bottom)<n.linesHeight&&(i=n.linesHeight));var a=this.width,u=this.height;this.updateDisplayOrigin();var l=s.resolution;a*=l,u*=l,a=Math.max(Math.ceil(a),1),u=Math.max(Math.ceil(u),1);var d=this.canvas,c=this.context;d.width!==a||d.height!==u?(d.width=a,d.height=u,this.frame.setSize(a,u)):c.clearRect(0,0,a,u),c.save(),c.scale(l,l);var p=this.style.rtl?r.right:r.left,f=r.top;n.draw(p,f,o,i),c.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0),this.frame.glTexture.spectorMetadata={textureKey:"BBCodeText Game Object"}),this.dirty=!0;var v=this.input;return v&&!v.customHitArea&&(v.hitArea.width=this.width,v.hitArea.height=this.height),this}toJSON(){var t=Components.ToJSON(this),n={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),resolution:this.resolution,padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=n,t}setInteractive(t,n,s){var o=!!this.input;return wx.prototype.setInteractive.call(this,t,n,s),o||this.canvasText.setInteractive(),this}setUrlTagCursorStyle(t){return this.urlTagCursorStyle=t,this}get urlTagCursorStyle(){return this.canvasText.urlTagCursorStyle}set urlTagCursorStyle(t){this.canvasText.urlTagCursorStyle=t}getWrappedText(t,n,s){return typeof t=="number"&&(s=n,n=t,t=void 0),(t=this.canvasText.getText(t,n,s,!0)).split(Cx)}getPlainText(t,n,s){return typeof t=="number"&&(s=n,n=t,t=void 0),this.canvasText.getPlainText(t,n,s)}getText(t,n,s,o){return typeof t=="number"&&(o=s,s=n,n=t,t=void 0),o===void 0&&(o=!1),this.canvasText.getText(t,n,s,o)}getSubString(t,n,s){return typeof t=="number"&&(s=n,n=t,t=void 0),this.getText(t,n,s)}copyPenManager(t){return this.canvasText.copyPenManager(t)}getPenManager(t,n){return this.canvasText.getPenManager(t,n)}setSize(t,n){return this.setFixedSize(t,n)}resize(t,n){return this.setFixedSize(t,n)}get imageManager(){return this._imageManager||(this._imageManager=new iu(this.scene)),this._imageManager}addImage(t,n){return this.imageManager.add(t,n),this}drawAreaBounds(t,n){return this.canvasText.hitAreaManager.drawBounds(t,n,this),this}generateTexture(t,n,s,o,i){var r=this.canvas;return o===void 0?o=r.width:o*=this.resolution,i===void 0?i=r.height:i*=this.resolution,eg(this.scene,r,t,n,s,o,i),this}getHitArea(t,n,s){return this.canvasText.getHitArea(t,n,s)}}var Px={appendText:bg};Object.assign(Tg.prototype,Px);const Dt=!1,kt=!0;var Ed,Pd,Ox={plainText:null,prevProp:null},ht=function(e,t,n,s){return t===kt?e[n]=s:e.hasOwnProperty(n)&&delete e[n],e},kx=new tu,Mx={},_n=function(e){return e.replace(_x,"\\$&").replace(Ax,"\\x2d")},_x=/[|\\{}()[\]^$+*?.]/g,Ax=/-/g,ut={},At=function(e,t,n,s){return s===void 0?`${e}${n}${t}`:`${e}${n}=(${s})${t}`},Vt=function(e,t,n){return`${e}/${n}${t}`},nh="[-.0-9]+",Zs=["[a-zA-Z]+","#[0-9abcdef]+","rgba?\\(s*[.0-9]+s*(,s*[.0-9]+s*){2,3}\\)"].join("|"),wg=function(e,t){if(t===void 0){var n=e;e=n[0],t=n[1]}if(Ed===e&&Pd===t)return!1;Ed=e,Pd=t,e=_n(e);var s=function(nt){return`[^${nt}]+`}(t=_n(t)),o=At(e,t,"esc"),i=Vt(e,t,"esc"),r=At(e,t,"raw"),h=Vt(e,t,"raw"),a=At(e,t,"b"),u=Vt(e,t,"b"),l=At(e,t,"i"),d=Vt(e,t,"i"),c="weight",p=At(e,t,c,nh),f=Vt(e,t,c),v="size",g=At(e,t,v,nh),y=Vt(e,t,v),m="family",x=At(e,t,m,s),b=Vt(e,t,m),w="color",T=At(e,t,w,Zs),S=Vt(e,t,w),C=At(e,t,"u"),E=At(e,t,"u",Zs),M=Vt(e,t,"u"),_=At(e,t,"s"),O=At(e,t,"s",Zs),k=Vt(e,t,"s"),P="shadow",A=At(e,t,P),L=At(e,t,P,Zs),D=Vt(e,t,P),F="stroke",X=At(e,t,F),z=At(e,t,F,Zs),Y=Vt(e,t,F),R="bgcolor",B=At(e,t,R,Zs),I=Vt(e,t,R),G=At(e,t,"y",nh),N=Vt(e,t,"y"),W=At(e,t,"img",s),U=Vt(e,t,"img"),V="area",K=At(e,t,V,s),$=Vt(e,t,V),H=At(e,t,"url",s),j=Vt(e,t,"url"),q="align",Z=At(e,t,q,s),Q=Vt(e,t,q),at=At(e,t,"id",s),rt=Vt(e,t,"id");return ut.RE_ESC_OPEN=new RegExp(o,"i"),ut.RE_ESC_CLOSE=new RegExp(i,"i"),ut.RE_RAW_OPEN=new RegExp(r,"i"),ut.RE_RAW_CLOSE=new RegExp(h,"i"),ut.RE_BLOD_OPEN=new RegExp(a,"i"),ut.RE_BLOD_CLOSE=new RegExp(u,"i"),ut.RE_ITALICS_OPEN=new RegExp(l,"i"),ut.RE_ITALICS_CLOSE=new RegExp(d,"i"),ut.RE_WEIGHT_OPEN=new RegExp(p,"i"),ut.RE_WEIGHT_CLOSE=new RegExp(f,"i"),ut.RE_SIZE_OPEN=new RegExp(g,"i"),ut.RE_SIZE_CLOSE=new RegExp(y,"i"),ut.RE_FAMILY_OPEN=new RegExp(x,"i"),ut.RE_FAMILY_CLOSE=new RegExp(b,"i"),ut.RE_COLOR_OPEN=new RegExp(T,"i"),ut.RE_COLOR_CLOSE=new RegExp(S,"i"),ut.RE_UNDERLINE_OPEN=new RegExp(C,"i"),ut.RE_UNDERLINE_OPENC=new RegExp(E,"i"),ut.RE_UNDERLINE_CLOSE=new RegExp(M,"i"),ut.RE_STRIKETHROUGH_OPEN=new RegExp(_,"i"),ut.RE_STRIKETHROUGH_OPENC=new RegExp(O,"i"),ut.RE_STRIKETHROUGH_CLOSE=new RegExp(k,"i"),ut.RE_SHADOW_OPEN=new RegExp(A,"i"),ut.RE_SHADOW_OPENC=new RegExp(L,"i"),ut.RE_SHADOW_CLOSE=new RegExp(D,"i"),ut.RE_STROKE_OPEN=new RegExp(X,"i"),ut.RE_STROKE_OPENC=new RegExp(z,"i"),ut.RE_STROKE_CLOSE=new RegExp(Y,"i"),ut.RE_BGCOLOR_OPEN=new RegExp(B,"i"),ut.RE_BGCOLOR_CLOSE=new RegExp(I,"i"),ut.RE_OFFSETY_OPEN=new RegExp(G,"i"),ut.RE_OFFSETY_CLOSE=new RegExp(N,"i"),ut.RE_IMAGE_OPEN=new RegExp(W,"i"),ut.RE_IMAGE_CLOSE=new RegExp(U,"i"),ut.RE_AREA_OPEN=new RegExp(K,"i"),ut.RE_AREA_CLOSE=new RegExp($,"i"),ut.RE_URL_OPEN=new RegExp(H,"i"),ut.RE_URL_CLOSE=new RegExp(j,"i"),ut.RE_ALIGN_OPEN=new RegExp(Z,"i"),ut.RE_ALIGN_CLOSE=new RegExp(Q,"i"),ut.RE_ID_OPEN=new RegExp(at,"i"),ut.RE_ID_CLOSE=new RegExp(rt,"i"),ut.RE_SPLITTEXT=new RegExp([r,h,o,i,a,u,l,d,p,f,g,y,x,b,T,S,C,E,M,_,O,k,A,L,D,X,z,Y,B,I,G,N,W,U,K,$,H,j,Z,Q,at,rt].join("|"),"ig"),!0},Od=function(e,t){return e!==void 0&&wg(e,t),Object.assign({},ut)};const Rx=Phaser.Utils.Objects.GetValue;let Sg=class{constructor(e){var t=Rx(e,"delimiters","[]");this.tagRegex=Od(t),this.delimiters=t}getStrokeThinkness(e,t){return t.hasOwnProperty("stroke")?e.strokeThickness:0}setDelimiters(e,t){return wg(e,t)&&(this.tagRegex=Od()),this}};var Lx={splitText:function(e,t){for(var n=this.tagRegex,s=[],o=0,i=!1,r=!1;;){var h=n.RE_SPLITTEXT.exec(e);if(!h)break;var a=h[0];if(r){if(!n.RE_ESC_CLOSE.test(a))continue;r=!1}else if(i){if(!n.RE_RAW_CLOSE.test(a))continue;i=!1}else n.RE_ESC_OPEN.test(a)?r=!0:n.RE_RAW_OPEN.test(a)&&(i=!0);var u=n.RE_SPLITTEXT.lastIndex,l=u-a.length;if(o<l){var d=e.substring(o,l);s.push(d)}t===void 0&&s.push(a),o=u}var c=e.length;return o<c&&s.push(e.substring(o,c)),s},tagTextToProp:function(e,t){var n=this.tagRegex;t==null&&(t={});var s="";if(t.img&&ht(t,Dt,"img"),t.esc)n.RE_ESC_CLOSE.test(e)?ht(t,Dt,"esc"):s=e;else if(t.raw)n.RE_RAW_CLOSE.test(e)?ht(t,Dt,"raw"):s=e;else if(n.RE_ESC_OPEN.test(e))ht(t,kt,"esc",!0);else if(n.RE_ESC_CLOSE.test(e))ht(t,Dt,"esc");else if(n.RE_RAW_OPEN.test(e))ht(t,kt,"raw",!0);else if(n.RE_RAW_CLOSE.test(e))ht(t,Dt,"raw");else if(n.RE_BLOD_OPEN.test(e))ht(t,kt,"b",!0);else if(n.RE_BLOD_CLOSE.test(e))ht(t,Dt,"b");else if(n.RE_ITALICS_OPEN.test(e))ht(t,kt,"i",!0);else if(n.RE_ITALICS_CLOSE.test(e))ht(t,Dt,"i");else if(n.RE_WEIGHT_OPEN.test(e)){var o=e.match(n.RE_WEIGHT_OPEN);ht(t,kt,"weight",o[1])}else n.RE_WEIGHT_CLOSE.test(e)?ht(t,Dt,"weight"):n.RE_SIZE_OPEN.test(e)?(o=e.match(n.RE_SIZE_OPEN),ht(t,kt,"size",`${o[1]}px`)):n.RE_SIZE_CLOSE.test(e)?ht(t,Dt,"size"):n.RE_FAMILY_OPEN.test(e)?(o=e.match(n.RE_FAMILY_OPEN),ht(t,kt,"family",o[1])):n.RE_FAMILY_CLOSE.test(e)?ht(t,Dt,"family"):n.RE_COLOR_OPEN.test(e)?(o=e.match(n.RE_COLOR_OPEN),ht(t,kt,"color",o[1])):n.RE_COLOR_CLOSE.test(e)?ht(t,Dt,"color"):n.RE_UNDERLINE_OPEN.test(e)?ht(t,kt,"u",!0):n.RE_UNDERLINE_OPENC.test(e)?(o=e.match(n.RE_UNDERLINE_OPENC),ht(t,kt,"u",o[1])):n.RE_UNDERLINE_CLOSE.test(e)?ht(t,Dt,"u"):n.RE_STRIKETHROUGH_OPEN.test(e)?ht(t,kt,"s",!0):n.RE_STRIKETHROUGH_OPENC.test(e)?(o=e.match(n.RE_STRIKETHROUGH_OPENC),ht(t,kt,"s",o[1])):n.RE_STRIKETHROUGH_CLOSE.test(e)?ht(t,Dt,"s"):n.RE_SHADOW_OPEN.test(e)?ht(t,kt,"shadow",!0):n.RE_SHADOW_OPENC.test(e)?(o=e.match(n.RE_SHADOW_OPENC),ht(t,kt,"shadow",o[1])):n.RE_SHADOW_CLOSE.test(e)?ht(t,Dt,"shadow"):n.RE_STROKE_OPEN.test(e)?ht(t,kt,"stroke",!0):n.RE_STROKE_OPENC.test(e)?(o=e.match(n.RE_STROKE_OPENC),ht(t,kt,"stroke",o[1])):n.RE_STROKE_CLOSE.test(e)?ht(t,Dt,"stroke"):n.RE_BGCOLOR_OPEN.test(e)?(o=e.match(n.RE_BGCOLOR_OPEN),ht(t,kt,"bgcolor",o[1])):n.RE_BGCOLOR_CLOSE.test(e)?ht(t,Dt,"bgcolor"):n.RE_OFFSETY_OPEN.test(e)?(o=e.match(n.RE_OFFSETY_OPEN),ht(t,kt,"y",parseFloat(o[1]))):n.RE_OFFSETY_CLOSE.test(e)?ht(t,Dt,"y"):n.RE_IMAGE_OPEN.test(e)?(o=e.match(n.RE_IMAGE_OPEN),ht(t,kt,"img",o[1])):n.RE_IMAGE_CLOSE.test(e)?ht(t,Dt,"img"):n.RE_AREA_OPEN.test(e)?(o=e.match(n.RE_AREA_OPEN),ht(t,kt,"area",o[1])):n.RE_AREA_CLOSE.test(e)?ht(t,Dt,"area"):n.RE_URL_OPEN.test(e)?(o=e.match(n.RE_URL_OPEN),ht(t,kt,"url",o[1])):n.RE_URL_CLOSE.test(e)?ht(t,Dt,"url"):n.RE_ALIGN_OPEN.test(e)?(o=e.match(n.RE_ALIGN_OPEN),ht(t,kt,"align",o[1])):n.RE_ALIGN_CLOSE.test(e)?ht(t,Dt,"align"):n.RE_ID_OPEN.test(e)?(o=e.match(n.RE_ID_OPEN),ht(t,kt,"id",o[1])):n.RE_ID_CLOSE.test(e)?ht(t,Dt,"id"):s=e;var i=Ox;return i.plainText=s,i.prop=t,i},propToContextStyle:function(e,t){var n=kx;if(t.hasOwnProperty("img"))n.image=t.img;else{if(n.image=null,t.hasOwnProperty("family")?n.fontFamily=t.family:n.fontFamily=e.fontFamily,t.hasOwnProperty("size")){var s=t.size;typeof s=="number"&&(s=`${s}px`),n.fontSize=s}else n.fontSize=e.fontSize;n.fontStyle=function(o){var i=o.b,r=o.weight,h=o.i;return i||r||h?h?i?"bold italic":r?`${r} italic`:"italic":i?"bold":r.toString():""}(t),t.hasOwnProperty("color")?n.color=t.color:n.color=e.color,t.hasOwnProperty("stroke")?t.stroke===!0?(n.stroke=e.stroke,n.strokeThickness=e.strokeThickness):(n.stroke=t.stroke,n.strokeThickness=e.strokeThickness):(n.stroke=e.stroke,n.strokeThickness=0)}return t.hasOwnProperty("shadow")?t.shadow===!0?(n.shadowColor=e.shadowColor,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY,n.shadowBlur=e.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor=t.shadow,n.shadowOffsetX=e.shadowOffsetX,n.shadowOffsetY=e.shadowOffsetY,n.shadowBlur=e.shadowBlur,n.shadowStroke=!0,n.shadowFill=!0):(n.shadowColor="#000",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowStroke=!1,n.shadowFill=!1),t.hasOwnProperty("u")?t.u===!0?(n.underlineColor=e.underlineColor,n.underlineThickness=e.underlineThickness,n.underlineOffset=e.underlineOffset):(n.underlineColor=t.u,n.underlineThickness=e.underlineThickness,n.underlineOffset=e.underlineOffset):(n.underlineColor="#000",n.underlineThickness=0,n.underlineOffset=0),t.hasOwnProperty("s")?t.s===!0?(n.strikethroughColor=e.strikethroughColor,n.strikethroughThickness=e.strikethroughThickness,n.strikethroughOffset=e.strikethroughOffset):(n.strikethroughColor=t.s,n.strikethroughThickness=e.strikethroughThickness,n.strikethroughOffset=e.strikethroughOffset):(n.strikethroughColor="#000",n.strikethroughThickness=0,n.strikethroughOffset=0),t.hasOwnProperty("bgcolor")?n.bgcolor=t.bgcolor:n.bgcolor=null,n},propToTagText:function(e,t,n){n==null&&(n=Mx);var s=this.delimiters[0],o=this.delimiters[1],i=[];for(var r in n)t.hasOwnProperty(r)||i.push(`${s}/${r}${o}`);for(var r in t){var h=t[r];if(r!=="img"){if(n[r]===h)continue}switch(r){case"size":i.push(`${s}size=${h.replace("px","")}${o}`);break;case"color":case"weight":case"family":case"stroke":case"bgcolor":case"y":case"img":case"area":case"url":case"align":case"id":i.push(`${s}${r}=${h}${o}`);break;case"u":case"s":h===!0?i.push(`${s}${r}${o}`):i.push(`${s}${r}=${h}${o}`);break;default:i.push(`${s}${r}${o}`)}}return i.push(e),i.join("")}};Object.assign(Sg.prototype,Lx);class Dx extends Tg{constructor(t,n,s,o,i){super(t,n,s,o,i,"rexBBCodeText",new Sg(i))}setDelimiters(t,n){return this.parser.setDelimiters(t,n),this}}new tu,Phaser.Utils.Objects.GetValue;const ua=Phaser.Utils.Objects.GetValue;var co=function(e,t){return t===void 0?e:e[t]},ns=function(e,t,n){e===void 0&&(e={}),t===void 0&&(t=0);var s=typeof t;return s==="string"?e[t]=n:s==="number"?(e.left=t,e.right=t,e.top=t,e.bottom=t):(e.left=ua(t,"left",0),e.right=ua(t,"right",0),e.top=ua(t,"top",0),e.bottom=ua(t,"bottom",0)),e};let su=class{constructor(e,t){this.setParent(e),this.type=t,this.renderable=!1,this.reset().setActive()}destroy(){this.parent.removeChild(this)}setParent(e){return this.parent=e,this}get scene(){return this.parent.scene}get canvas(){return this.parent?this.parent.canvas:null}get context(){return this.parent?this.parent.context:null}setDirty(e){return e&&this.parent&&(this.parent.dirty=!0),this}get active(){return this._active}set active(e){this.setDirty(this._active!=e),this._active=e}setActive(e){return e===void 0&&(e=!0),this.active=e,this}modifyPorperties(e){return this}onFree(){this.reset().setParent()}reset(){return this}render(){}contains(e,t){return!1}};Object.assign(su.prototype,Lo);const Fx={renderContent(){},render(){if(!this.willRender)return this;var e=this.context;if(e.save(),e.globalAlpha=this.alpha,this.toLocalPosition){var t=this.drawX,n=this.drawY;this.autoRound&&(t=Math.round(t),n=Math.round(n)),e.translate(t,n),e.scale(this.scaleX,this.scaleY),e.rotate(this.rotation)}return this.drawBelowCallback&&this.drawBelowCallback(this),this.renderContent(),this.drawAboveCallback&&this.drawAboveCallback(this),e.restore(),this}},Bx=Phaser.Math.RotateAround;var rh;const Ix=Phaser.Geom.Rectangle;var da;const Xx=Phaser.Math.RotateAround;var ah,Cg=function(e,t,n,s){return s===void 0?s={}:s===!0&&(ah===void 0&&(ah={}),s=ah),s.x=t,s.y=n,e.rotation!==0&&Xx(s,0,0,e.rotation),s.x=s.x*e.scaleX+e.drawX,s.y=s.y*e.scaleY+e.drawY,s};const kd=Phaser.GameObjects.Components.TransformMatrix;var Jn,Md,zx={},Eg=function(e,t,n,s,o){return typeof n!="number"&&(o=n,n=0,s=0),function(i,r,h,a,u){var l=Cg(r,h,a,!0),d=function(c,p,f,v){v===void 0?v={}:v===!0&&(v=zx);var g=p-c.width*c.originX,y=f-c.height*c.originY;return Jn===void 0&&(Jn=new kd,Md=new kd),c.parentContainer?c.getWorldTransformMatrix(Jn,Md):Jn.applyITRS(c.x,c.y,c.rotation,c.scaleX,c.scaleY),Jn.transformPoint(g,y,v),v}(i,l.x,l.y,u);return d}(e,t,t.drawCenterX+n,t.drawCenterY+s,o)},Pg={contains:function(e,t){if(this.width===0||this.height===0)return!1;var n=function(s,o,i,r){return r===void 0?r={}:r===!0&&(rh===void 0&&(rh={}),r=rh),r.x=(s-i.drawX)/i.scaleX,r.y=(o-i.drawY)/i.scaleY,i.rotation!==0&&Bx(r,0,0,-i.rotation),r}(e,t,this,!0);return function(s){da===void 0&&(da=new Ix);var o=s.drawTLX,i=s.drawTLY;return da.setTo(o,i,s.drawTRX-o,s.drawBLY-i),da}(this).contains(n.x,n.y)},getWorldPosition:function(e,t,n){return Eg(this.parent,this,e,t,n)}};Object.assign(Pg,Fx);const Yx=Phaser.Math.DegToRad,Nx=Phaser.Math.RadToDeg,ca=Phaser.Utils.Objects.GetValue;class zs extends su{constructor(t,n){super(t,n),this.renderable=!0,this.scrollFactorX=1,this.scrollFactorY=1,this.toLocalPosition=!0,this.originX=0,this.offsetX=0,this.offsetY=0}get visible(){return this._visible}set visible(t){this.setDirty(this._visible!=t),this._visible=t}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}get alpha(){return this._alpha}set alpha(t){this.setDirty(this._alpha!=t),this._alpha=t}setAlpha(t){return this.alpha=t,this}get x(){return this._x}set x(t){this.setDirty(this._x!=t),this._x=t}setX(t){return this.x=t,this}get y(){return this._y}set y(t){this.setDirty(this._y!=t),this._y=t}setY(t){return this.y=t,this}setPosition(t,n){return this.x=t,this.y=n,this}setInitialPosition(t,n){return this.x0=t,this.y0=n,this}setScrollFactorX(t){return this.scrollFactorX=t,this}setScrollFactorY(t){return this.scrollFactorY=t,this}setScrollFactor(t,n){return n===void 0&&(n=t),this.scrollFactorX=t,this.scrollFactorY=n,this}get rotation(){return this._rotation}set rotation(t){this.setDirty(this._rotation!=t),this._rotation=t}setRotation(t){return this.rotation=t,this}get angle(){return Nx(this._rotation)}set angle(t){this.rotation=Yx(t)}setAngle(t){return this.angle=t,this}get scaleX(){return this._scaleX}set scaleX(t){this.setDirty(this._scaleX!==t),this._scaleX=t}setScaleX(t){return this.scaleX=t,this}get width(){return 0}set width(t){}setWidth(t,n){return n===void 0&&(n=!1),this.width=t,n&&(this.scaleY=this.scaleX),this}get leftSpace(){return this._leftSpace}set leftSpace(t){this.setDirty(this._leftSpace!==t),this._leftSpace=t}setLeftSpace(t){return this.leftSpace=t,this}get rightSpace(){return this._rightSpace}set rightSpace(t){this.setDirty(this._rightSpace!==t),this._rightSpace=t}setRightSpace(t){return this.rightSpace=t,this}get outerWidth(){return this.width+this.leftSpace+this.rightSpace}get scaleY(){return this._scaleY}set scaleY(t){this.setDirty(this._scaleY!==t),this._scaleY=t}setScaleY(t){return this.scaleY=t,this}get height(){return 0}set height(t){}setHeight(t,n){return n===void 0&&(n=!1),this.height=t,n&&(this.scaleX=this.scaleY),this}setScale(t,n){return n===void 0&&(n=t),this.scaleX=t,this.scaleY=n,this}setOrigin(t){return this.originX=t,this}setAlign(t){return this.align=t,this}modifyPorperties(t){if(!t)return this;t.hasOwnProperty("x")&&this.setX(t.x),t.hasOwnProperty("y")&&this.setY(t.y),t.hasOwnProperty("rotation")?this.setRotation(t.rotation):t.hasOwnProperty("angle")&&this.setAngle(t.angle),t.hasOwnProperty("alpha")&&this.setAlpha(t.alpha);var n=ca(t,"width",void 0),s=ca(t,"height",void 0),o=ca(t,"scaleX",void 0),i=ca(t,"scaleY",void 0);return n!==void 0?s===void 0&&i===void 0?this.setWidth(n,!0):this.setWidth(n):o!==void 0&&this.setScaleX(o),s!==void 0?n===void 0&&o===void 0?this.setHeight(s,!0):this.setHeight(s):i!==void 0&&this.setScaleY(i),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),this}setDrawBelowCallback(t){return this.drawBelowCallback=t,this}setDrawAboveCallback(t){return this.drawAboveCallback=t,this}reset(){return this.setVisible().setAlpha(1).setPosition(0,0).setRotation(0).setScale(1,1).setLeftSpace(0).setRightSpace(0).setOrigin(0).setAlign().setDrawBelowCallback().setDrawAboveCallback(),this}get willRender(){return this.visible&&this.alpha>0}get drawX(){var t=this.x+this.leftSpace+this.offsetX-this.originX*this.width;return this.parent._textOX*this.scrollFactorX+t}get drawY(){var t=this.y+this.offsetY;return this.parent._textOY*this.scrollFactorY+t}get drawTLX(){return 0}get drawTLY(){return 0}get drawBLX(){return 0}get drawBLY(){return 0}get drawTRX(){return 0}get drawTRY(){return 0}get drawBRX(){return 0}get drawBRY(){return 0}get drawCenterX(){return(this.drawTRX+this.drawTLX)/2}get drawCenterY(){return(this.drawBLY+this.drawTLY)/2}}Object.assign(zs.prototype,Pg);var is=function(e,t,n){return t.hasOwnProperty(e)?t[e]:n[e]};const cs=Phaser.Utils.Objects.GetValue;class Gx extends zs{constructor(t,n){super(t,"background"),this.setScrollFactor(0),this.setColor(cs(n,"color",null),cs(n,"color2",null),cs(n,"horizontalGradient",!0)),this.setStroke(cs(n,"stroke",null),cs(n,"strokeThickness",2)),this.setCornerRadius(cs(n,"cornerRadius",0),cs(n,"cornerIteration",null))}set color(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,n,s){return s===void 0&&(s=!0),this.color=t,this.color2=n,this.horizontalGradient=s,this}set stroke(t){t=dt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,n){return t!=null&&n===void 0&&(n=2),this.stroke=t,this.strokeThickness=n,this}set cornerRadius(t){this.setDirty(this._cornerRadius!=t),this._cornerRadius=t}get cornerRadius(){return this._cornerRadius}set cornerIteration(t){this.setDirty(this._cornerIteration!=t),this._cornerIteration=t}get cornerIteration(){return this._cornerIteration}modifyStyle(t){return t.hasOwnProperty("color")&&this.setColor(t.color,is("color2",t,this),is("horizontalGradient",t,this)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,is("strokeThickness",t,this)),t.hasOwnProperty("cornerRadius")&&this.setCornerRadius(t.cornerRadius,is("cornerIteration",t,this)),this}modifyPorperties(t){return super.modifyPorperties(t),this.modifyStyle(t),this}setCornerRadius(t,n){return this.cornerRadius=t,this.cornerIteration=n,this}renderContent(){fg(this.parent,this.color,this.stroke,this.strokeThickness,this.cornerRadius,this.color2,this.horizontalGradient,this.cornerIteration)}}const Gi=Phaser.Utils.Objects.GetValue;class Ux extends zs{constructor(t,n){super(t,"innerbounds"),this.setScrollFactor(0),this.setColor(Gi(n,"color",null),Gi(n,"color2",null),Gi(n,"horizontalGradient",!0)),this.setStroke(Gi(n,"stroke",null),Gi(n,"strokeThickness",2))}set color(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color!=t),this._color=t}get color(){return this._color}set color2(t){t=dt(t,this.canvas,this.context),this.setDirty(this._color2!=t),this._color2=t}get color2(){return this._color2}set horizontalGradient(t){this.setDirty(this._horizontalGradient!=t),this._horizontalGradient=t}get horizontalGradient(){return this._horizontalGradient}setColor(t,n,s){return s===void 0&&(s=!0),this.color=t,this.color2=n,this.horizontalGradient=s,this}set stroke(t){t=dt(t,this.canvas,this.context),this.setDirty(this._stroke!=t),this._stroke=t}get stroke(){return this._stroke}set strokeThickness(t){this.setDirty(this._strokeThickness!=t),this._strokeThickness=t}get strokeThickness(){return this._strokeThickness}setStroke(t,n){return t!=null&&n===void 0&&(n=2),this.stroke=t,this.strokeThickness=n,this}modifyPorperties(t){super.modifyPorperties(t),t.hasOwnProperty("color")&&this.setColor(t.color,Gi(t,"color2",null),Gi(t,"horizontalGradient",!0)),t.hasOwnProperty("stroke")&&this.setStroke(t.stroke,Gi(t,"strokeThickness",2))}renderContent(){var t,n,s=this.parent.padding,o=s.left,i=s.top,r=this.parent.width-s.left-s.right,h=this.parent.height-s.top-s.bottom,a=this.context;this.color!=null&&(this.color2!=null?((n=this.horizontalGradient?a.createLinearGradient(0,0,r,0):a.createLinearGradient(0,0,0,h)).addColorStop(0,this.color),n.addColorStop(1,this.color2),t=n):t=this.color,a.fillStyle=t,a.fillRect(o,i,r,h)),this.stroke!=null&&this.strokeThickness>0&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.strokeRect(o,i,r,h))}}const Nt=Phaser.Utils.Objects.GetValue;class Do{constructor(t,n){this.parent=t,this.set(n)}toJSON(){return{bold:this.bold,italic:this.italic,fontSize:this.fontSize,fontFamily:this.fontFamily,color:this.color,stroke:this.stroke,strokeThickness:this.strokeThickness,shaodwColor:this.shadowColor,shadowBlur:this.shadowBlur,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,offsetX:this.offsetX,offsetY:this.offsetY,leftSpace:this.leftSpace,rightSpace:this.rightSpace,backgroundHeight:this.backgroundHeight,backgroundBottomY:this.backgroundBottomY,align:this.align}}set(t){return this.setBold(Nt(t,"bold",!1)),this.setItalic(Nt(t,"italic",!1)),this.setFontSize(Nt(t,"fontSize","16px")),this.setFontFamily(Nt(t,"fontFamily","Courier")),this.setColor(Nt(t,"color","#fff")),this.setStrokeStyle(Nt(t,"stroke",null),Nt(t,"strokeThickness",0)),this.setShadow(Nt(t,"shadowColor",null),Nt(t,"shadowOffsetX",0),Nt(t,"shadowOffsetY",0),Nt(t,"shadowBlur",0)),this.setOffset(Nt(t,"offsetX",0),Nt(t,"offsetY",0)),this.setSpace(Nt(t,"leftSpace",0),Nt(t,"rightSpace",0)),this.setAlign(Nt(t,"align",void 0)),this.setBackgroundColor(Nt(t,"backgroundColor",null)),this.setBackgroundHeight(Nt(t,"backgroundHeight",void 0)),this.setBackgroundBottomY(Nt(t,"backgroundBottomY",void 0)),this.setBackgroundLeftX(Nt(t,"backgroundLeftX",0)),this.setBackgroundRightX(Nt(t,"backgroundRightX",0)),this}modify(t){return t.hasOwnProperty("bold")&&this.setBold(t.bold),t.hasOwnProperty("italic")&&this.setItalic(t.italic),t.hasOwnProperty("fontSize")&&this.setFontSize(t.fontSize),t.hasOwnProperty("fontFamily")&&this.setFontFamily(t.fontFamily),t.hasOwnProperty("color")&&this.setColor(t.color),(t.hasOwnProperty("stroke")||t.hasOwnProperty("strokeThickness"))&&this.setStrokeStyle(is("stroke",t,this),is("strokeThickness",t,this)),t.hasOwnProperty("shadowColor")&&this.setShadowColor(t.shadowColor),(t.hasOwnProperty("shadowOffsetX")||t.hasOwnProperty("shadowOffsetY"))&&this.setShadowOffset(is("shadowOffsetX",t,this),is("shadowOffsetY",t,this)),t.hasOwnProperty("shadowBlur")&&this.setShadowBlur(t.shaodwBlur),t.hasOwnProperty("offsetX")&&this.setOffsetX(t.offsetX),t.hasOwnProperty("offsetY")&&this.setOffsetY(t.offsetY),t.hasOwnProperty("leftSpace")&&this.setLeftSpace(t.leftSpace),t.hasOwnProperty("rightSpace")&&this.setRightSpace(t.rightSpace),t.hasOwnProperty("align")&&this.setAlign(t.align),t.hasOwnProperty("backgroundColor")&&this.setBackgroundColor(t.backgroundColor),t.hasOwnProperty("backgroundHeight")&&this.setBackgroundHeight(t.backgroundHeight),t.hasOwnProperty("backgroundBottomY")&&this.setBackgroundBottomY(t.backgroundBottomY),t.hasOwnProperty("backgroundLeftX")&&this.setBackgroundLeftX(t.backgroundLeftX),t.hasOwnProperty("backgroundRightX")&&this.setBackgroundRightX(t.backgroundRightX),this}setUpdateTextFlag(){return this.parent&&(this.parent.updateTextFlag=!0),this}clone(){return new Do(null,this.toJSON())}copyFrom(t){return this.set(t.toJSON()),this}copyTo(t){return t.set(this.toJSON()),this}setBold(t){return t===void 0&&(t=!0),this.bold=t,this.setUpdateTextFlag(),this}setItalic(t){return t===void 0&&(t=!0),this.italic=t,this.setUpdateTextFlag(),this}get fontStyle(){return this.bold&&this.italic?"bold italic":this.bold?"bold":this.italic?"italic":""}setFontSize(t){return typeof t=="number"&&(t=`${t}px`),this.fontSize=t,this.setUpdateTextFlag(),this}setFontFamily(t){return this.fontFamily=t,this.setUpdateTextFlag(),this}get font(){return`${this.fontStyle} ${this.fontSize} ${this.fontFamily}`}setColor(t){return this.color=dt(t),this}get hasFill(){return this.color!=null}setStrokeStyle(t,n){return this.stroke=dt(t),n!==void 0&&(this.strokeThickness=n),this}setStrokeThickness(t){return this.strokeThickness=t,this}get hasStroke(){return this.stroke!=null&&this.strokeThickness>0}setShadowColor(t){return this.shadowColor=dt(t),this}setShadowOffset(t,n){return t===void 0&&(t=0),n===void 0&&(n=0),this.shadowOffsetX=t,this.shadowOffsetY=n,this}setShadowBlur(t){return t===void 0&&(t=0),this.shaodwBlur=t,this}setShadow(t,n,s,o){return this.setShadowColor(t).setShadowOffset(n,s).setShadowBlur(o),this}setBackgroundColor(t){return this.backgroundColor=dt(t),this}get hasBackgroundColor(){return this.backgroundColor!=null}setBackgroundHeight(t){return this.backgroundHeight=t,this}setBackgroundBottomY(t){return this.backgroundBottomY=t,this}setBackgroundLeftX(t){return this.backgroundLeftX=t,this}setBackgroundRightX(t){return this.backgroundRightX=t,this}setOffsetX(t){return t===void 0&&(t=0),this.offsetX=t,this}setOffsetY(t){return t===void 0&&(t=0),this.offsetY=t,this}setOffset(t,n){return this.setOffsetX(t).setOffsetY(n),this}setLeftSpace(t){return t===void 0&&(t=0),this.leftSpace=t,this}setRightSpace(t){return t===void 0&&(t=0),this.rightSpace=t,this}setSpace(t,n){return this.setLeftSpace(t).setRightSpace(n),this}setAlign(t){return this.align=t,this}syncFont(t){return t.font=this.font,this}syncStyle(t){t.textBaseline="alphabetic";var n=this.hasFill,s=this.hasStroke;return t.fillStyle=n?this.color:"#000",t.strokeStyle=s?this.stroke:"#000",t.lineWidth=s?this.strokeThickness:0,t.lineCap="round",t.lineJoin="round",this}syncShadow(t){t.shadowColor!=null?(t.shadowColor=this.shadowColor,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowBlur=this.shadowBlur):(t.shadowColor=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0)}getTextMetrics(t,n){return this.syncFont(t).syncStyle(t),t.measureText(n)}}const Wx=Phaser.Utils.Array.Remove,Vx=Phaser.Utils.Array.Remove,Ai="text",Og="image",kg="drawer",Mg="space",nu="command";var _g=function(e){return e.type===Ai&&e.text===`
`},Ag=function(e){return e.type===Ai&&e.text==="\f"},jx=function(e){return e.type===Ai&&e.text===" "},Rs=function(e){return e.type===Ai},Hx=function(e){return e.type===nu};class _d extends zs{constructor(t,n,s){super(t,Ai),this.updateTextFlag=!1,this.style=new Do(this,s),this.setText(n)}get autoRound(){return this.parent.autoRound}get offsetX(){return this.style.offsetX}set offsetX(t){this.style&&(this.style.offsetX=t)}get offsetY(){return this.style.offsetY}set offsetY(t){this.style&&(this.style.offsetY=t)}get leftSpace(){return this.style.leftSpace*this.scaleX}set leftSpace(t){this.style&&(this.style.leftSpace=t),super.leftSpace=t}get rightSpace(){return this.style.rightSpace*this.scaleX}set rightSpace(t){this.style&&(this.style.rightSpace=t),super.rightSpace=t}get align(){return this.style.align}set align(t){this.style&&(this.style.align=t)}modifyStyle(t){return this.setDirty(!0),this.style.modify(t),this.updateTextFlag&&this.updateTextSize(),this}modifyPorperties(t){return t?(this.modifyStyle(t),super.modifyPorperties(t),this):this}setText(t){return this.setDirty(this.text!=t),this.text=t,this.updateTextSize(),this}updateTextSize(){var t=this.text;if(t===`
`||t==="\f"||t==="")this.clearTextSize();else{var n,s,o=this.style.getTextMetrics(this.context,this.text);this.textWidth=o.width,"actualBoundingBoxAscent"in o?(n=o.actualBoundingBoxAscent,s=o.actualBoundingBoxDescent):(n=0,s=0),this.textHeight=n+s,this.ascent=n,this.descent=s}return this.updateTextFlag=!1,this}clearTextSize(){return this.textWidth=0,this.textHeight=0,this.ascent=0,this.descent=0,this}copyTextSize(t){return this.textWidth=t.textWidth,this.textHeight=t.textHeight,this.ascent=t.ascent,this.descent=t.descent,this}get width(){return this.textWidth*this.scaleX}set width(t){this.textWidth>0?this.scaleX=t/this.textWidth:this.scaleX=1}get height(){return this.textHeight*this.scaleY}set height(t){this.textHeight>0?this.scaleY=t/this.textHeight:this.scaleY=1}get willRender(){return this.textWidth!==0&&super.willRender}renderContent(){var t=this.context,n=this.style;if(n.hasBackgroundColor){t.fillStyle=n.backgroundColor;var s=this.drawTLX+n.backgroundLeftX,o=s,i=this.drawTRX+n.backgroundRightX-s+1;if(i>0){var r=n.backgroundBottomY;r==null&&(r=this.drawBLY);var h=n.backgroundHeight;h==null&&(h=r-this.drawTLY);var a=r-h;t.fillRect(o,a,i,h)}}var u=n.hasFill,l=n.hasStroke;(u||l)&&(n.syncFont(t).syncStyle(t),l&&(n.syncShadow(t),t.strokeText(this.text,0,0)),u&&(n.syncShadow(t),t.fillText(this.text,0,0)))}get drawTLX(){return-this.leftSpace}get drawTLY(){return-this.ascent}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.descent}get drawTRX(){return this.textWidth+this.rightSpace}get drawTRY(){return-this.ascent}get drawBRX(){return this.textWidth+this.rightSpace}get drawBRY(){return this.descent}}var br=function(e,t){var n=this.createCharChildren(e,t);return this.addChild(n),this};Phaser.Display.Canvas.CanvasPool;class Kx extends zs{constructor(t,n,s){super(t,Og),this.setTexture(n,s),this.color=void 0}get frameWidth(){return this.frameObj?this.frameObj.cutWidth:0}get frameHeight(){return this.frameObj?this.frameObj.cutHeight:0}get offsetY(){return-this.height}set offsetY(t){}get key(){return this._key}set key(t){this.setDirty(this._key!=t),this._key=t}get frame(){return this._frame}set frame(t){this.setDirty(this._frame!=t),this._frame=t}setTexture(t,n){return this.key=t,this.frame=n,this.frameObj=this.scene.sys.textures.getFrame(t,n),this}get width(){return this.frameWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=t/this.frameWidth}get height(){return this.frameHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=t/this.frameHeight}setHeight(t,n){return n===void 0&&(n=!1),this.height=t,n&&(this.scaleX=this.scaleY),this}setColor(t){return this.color=t,this}modifyPorperties(t){return t.hasOwnProperty("color")&&this.setColor(t.color),super.modifyPorperties(t),this}renderContent(){xg(this.frameObj,this.canvas,0,0,this.frameWidth,this.frameHeight,this.color,!1)}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.frameHeight}get drawTRX(){return this.frameWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.frameWidth+this.rightSpace}get drawBRY(){return this.frameHeight}}var Rg=function(e,t,n){var s=this.createImageChild(e,t,n);return this.addChild(s),this};class qx extends zs{constructor(t,n,s,o){super(t,kg),this.setRenderCallback(n),this.setDrawerSize(s,o)}setRenderCallback(t){return t?this.renderContent=t.bind(this):delete this.renderContent,this}setDrawerSize(t,n){return t===!0?(this.toLocalPosition=!1,t=void 0,n=void 0):this.toLocalPosition=!0,t===void 0&&(t=0),n===void 0&&(n=t),this.drawerWidth=t,this.drawerHeight=n,this}onFree(){super.onFree(),this.setRenderCallback()}get width(){return this.drawerWidth*this.scaleX}set width(t){this.setDirty(this.width!==t),this.scaleX=this.drawerWidth>0?t/this.drawerWidth:1}get height(){return this.drawerHeight*this.scaleY}set height(t){this.setDirty(this.height!==t),this.scaleY=this.drawerHeight>0?t/this.drawerHeight:1}get offsetY(){return-this.height}set offsetY(t){}get drawTLX(){return-this.leftSpace}get drawTLY(){return 0}get drawBLX(){return-this.leftSpace}get drawBLY(){return this.drawerHeight}get drawTRX(){return this.drawerWidth+this.rightSpace}get drawTRY(){return 0}get drawBRX(){return this.drawerWidth+this.rightSpace}get drawBRY(){return this.drawerHeight}}let $x=class extends zs{constructor(e,t){super(e,Mg),this.setSpaceWidth(t)}get width(){return this.spaceWidth*this.scaleX}set width(e){this.spaceWidth>0?this.scaleX=e/this.spaceWidth:this.scaleX=1}setSpaceWidth(e){return this.spaceWidth=e,this}};var Lg=function(e){var t=this.createSpaceChild(e);return this.addChild(t),this};class Zx extends su{constructor(t,n,s,o,i){super(t,nu),this.setName(n).setParameter(o).setCallback(s,i)}setName(t){return this.name=t,this}setParameter(t){return this.param=t,this}setCallback(t,n){return this.callback=t,this.scope=n,this}exec(){return this.scope?this.callback.call(this.scope,this.param,this.name):this.callback(this.param,this.name)}onFree(){super.onFree(),this.setName().setCallback().setParameter()}}var et=function(e,t,n,s){var o=this.createCommandChild(e,t,n,s);return this.addChild(o),this},Dg=function(e){return Object.assign({callback:void 0,start:0,isLastPage:!1,maxLines:void 0,padding:void 0,letterSpacing:void 0,hAlign:void 0,vAlign:void 0,children:[],lines:[],maxLineWidth:0,linesHeight:0,lineHeight:void 0,maxLineHeight:0,linesWidth:0,lineWidth:void 0},e)};const Jx={none:0,word:1,char:2,character:2,mix:3};var Qx=function(e,t,n,s){s===void 0&&(s={word:[],width:0}),s.word.length=0;for(var o=n===2,i=n===3,r=!o&&!i,h=e.length,a=t,u=s.word,l=0,d=!1;a<h;){var c=e[a];if(c.renderable){var p=c.type===Ai?c.text:null;if(p===null||p===`
`||p==="\f"){a===t&&(u.push(c),l+=c.outerWidth);break}if(r){if(u.push(c),l+=c.outerWidth,p===" ")break;a++}else{if(o){u.push(c),l+=c.outerWidth;break}if(i){if(!Mr(p)){if(d)break;u.push(c),l+=c.outerWidth;var f=e[a+1];f&&f.type===Ai&&f.text===" "&&(u.push(f),l+=f.outerWidth);break}if(u.push(c),l+=c.outerWidth,p===" ")break;a++,d=!0}}}else u.push(c),a++}return s.width=l,s},Fg=function(e){for(var t=0,n=e.length;t<n;t++){var s=e[t];if(s.align!==void 0)return s.align}},Bg=function(e,t,n){if(t!==0||n!==0)for(var s=0,o=e.length;s<o;s++){var i=e[s];i.renderable&&(i.x+=t,i.y+=n)}},oh=function(e,t){for(var n=t/e.length,s=0,o=e.length;s<o;s++){var i=e[s];i.renderable&&(i.x+=n*s)}},Ad=function(){var e,t,n=this.defaultTextStyle.getTextMetrics(this.context,this.testString);return"actualBoundingBoxAscent"in n?(e=n.actualBoundingBoxAscent,t=n.actualBoundingBoxDescent):(e=0,t=0),fa.ascent=e,fa.descent=t,fa.height=e+t,fa},fa={};const le=Phaser.Utils.Objects.GetValue;var tb=function(e){var t=le(e,"start",0);ns(this.wrapPadding,le(e,"padding",0));var n,s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,o=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=le(e,"lineHeight"),r=le(e,"ascent",i);if(i===void 0){var h=le(e,"useDefaultTextHeight",!1);if(n=le(e,"maxLines",0),this.fixedHeight>0&&!h){var a=this.fixedHeight-s;n>0?i=a/n:(i=(u=Ad.call(this)).height,r=u.ascent,n=Math.floor((a-r)/i))}else{var u;i=(u=Ad.call(this)).height,r=u.ascent}}else this.fixedHeight>0?(n=le(e,"maxLines"))===void 0&&(a=this.fixedHeight-s,n=Math.floor(a/i)):n=le(e,"maxLines",0);r===void 0&&(r=i);var l=n===0,d=le(e,"wrapMode");d===void 0&&(d=le(e,"charWrap",!1)?"char":"word"),typeof d=="string"&&(d=Jx[d]);var c=le(e,"wrapWidth",void 0);c===void 0&&(this.fixedWidth>0?c=this.fixedWidth-o:(c=1/0,d=0));for(var p=le(e,"letterSpacing",0),f=le(e,"hAlign",0),v=le(e,"vAlign",0),g=le(e,"justifyPercentage",.25),y=Dg({callback:"runWordWrap",start:t,padding:this.wrapPadding,letterSpacing:p,maxLines:n,hAlign:f,vAlign:v,justifyPercentage:g,ascent:r,lineHeight:i,wrapWidth:c,wrapMode:d}),m=this.children,x=0,b=m.length;x<b;x++)m[x].setActive(!1);c+=p;for(var w,T=this.padding.left+this.wrapPadding.left,S=T,C=this.padding.top+this.wrapPadding.top+r,E=c,M=t,_=m.length,O=y.children,k=y.lines,P=[],A=0,L=0,D=!1;M<_;){var F=(w=Qx(m,M,d,w)).word,X=F.length,z=w.width+X*p;M+=X;var Y=_g(F[0]);D=Ag(F[0]);var R=Y||D;if(E<z||R){if(R){var B=F[0];B.setActive().setPosition(S,C),O.push(B),P.push(B)}if(S=T,C+=i,E=c,k.push({children:P,width:A}),L=Math.max(L,A),A=0,P=[],D||!l&&k.length===n)break;if(R)continue}for(E-=z,A+=z,x=0,b=F.length;x<b;x++)(N=F[x]).setActive(),O.push(N),P.push(N),N.renderable&&(N.setPosition(S,C),S+=N.outerWidth+p)}P.length>0&&(k.push({children:P,width:A}),L=Math.max(L,A)),y.start+=O.length,y.isLastPage=!D&&y.start===_,y.maxLineWidth=L,y.linesHeight=k.length*i;var I=this.fixedWidth>0?this.fixedWidth:y.maxLineWidth+o,G=this.fixedHeight>0?this.fixedHeight:y.linesHeight+s;for(function(W,U,V){for(var K,$,H=W.hAlign,j=W.vAlign,q=W.justifyPercentage,Z=W.lines,Q=0,at=Z.length;Q<at;Q++){var rt=Z[Q],nt=rt.width,lt=rt.children,it=Fg(lt);switch(it===void 0&&(it=H),it){case 0:case"left":default:K=0;break;case 1:case"center":K=(ot=U-nt)/2;break;case 2:case"right":K=ot=U-nt;break;case 3:case"justify":case"justify-left":(ot=U-nt)/U<q&&oh(lt,ot),K=0;break;case 4:case"justify-center":(ot=U-nt)/U<q?(oh(lt,ot),K=0):K=ot/2;break;case 5:case"justify-right":var ot;(ot=U-nt)/U<q?(oh(lt,ot),K=0):K=ot}var st=W.linesHeight;switch(j){case 1:case"center":$=(V-st)/2;break;case 2:case"bottom":$=V-st;break;default:$=0}Bg(lt,K,$)}}(y,I-o,a=G-s),this.setCanvasSize(I,G),x=0,b=O.length;x<b;x++){var N;(N=O[x]).renderable&&(N.x0=N.x,N.y0=N.y)}return y};const eb=Phaser.Utils.Objects.Merge,Se=Phaser.Utils.Objects.GetValue;var ib=function(e){var t=Se(e,"start",0);ns(this.wrapPadding,Se(e,"padding",0));var n,s=this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom,o=this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,i=Se(e,"lineWidth",void 0);if(i===void 0)n=Se(e,"maxLines",0),i=this.fixedWidth>0?(r=this.fixedWidth-o)/n:0;else if(this.fixedWidth>0){if((n=Se(e,"maxLines",void 0))===void 0){var r=this.fixedWidth-o;n=Math.floor(r/i)+1}}else n=Se(e,"maxLines",0);var h=n===0,a=Se(e,"fixedCharacterHeight",void 0);if(a===void 0){var u=Se(e,"charPerLine",void 0);if(u!==void 0){var l=this.fixedHeight-s;a=Math.floor(l/u)}}var d=Se(e,"wrapHeight",void 0);d===void 0&&(d=this.fixedHeight>0?this.fixedHeight-s:1/0);for(var c=Se(e,"letterSpacing",0),p=Se(e,"rtl",!0),f=Se(e,"hAlign",p?2:0),v=Se(e,"vAlign",0),g=Dg({callback:"runVerticalWrap",start:t,padding:this.wrapPadding,letterSpacing:c,maxLines:n,hAlign:f,vAlign:v,lineWidth:i,fixedCharacterHeight:a,wrapHeight:d,rtl:p}),y=this.children,m=0,x=y.length;m<x;m++)y[m].setActive(!1);d+=c;for(var b=this.padding.left+this.wrapPadding.left,w=this.padding.top+this.wrapPadding.top,T=b,S=w,C=d,E=t,M=y.length,_=g.children,O=g.lines,k=[],P=0,A=0;E<M;){var L=y[E];if(E++,L.renderable){var D=(a!==void 0?a:L.height)+c,F=_g(L),X=Ag(L),z=F||X;if(C<D||z){if(F&&(L.setActive().setPosition(T,S).setOrigin(.5),_.push(L),k.push(L)),T=b,S=w,C=d,O.push({children:k,height:P}),A=Math.max(A,P),P=0,k=[],X||!h&&O.length===n)break;if(z)continue}C-=D,P+=D,L.setActive().setPosition(T,S).setOrigin(.5),_.push(L),k.push(L),S+=D}else L.setActive(),_.push(L),k.push(L)}k.length>0&&(O.push({children:k,height:P}),A=Math.max(A,P)),g.start+=_.length,g.isLastPage=g.start===M,g.maxLineHeight=A,g.linesWidth=O.length*i;var Y=this.fixedWidth>0?this.fixedWidth:g.linesWidth+o,R=this.fixedHeight>0?this.fixedHeight:g.maxLineHeight+s;for(function(B,I,G){var N,W,U=B.hAlign,V=B.vAlign,K=B.rtl,$=B.lines,H=B.lineWidth,j=B.linesWidth;switch(U){case 1:case"center":N=(I-j)/2;break;case 2:case"right":N=I-j;break;default:N=0}K&&(N+=H);for(var q=0,Z=$.length;q<Z;q++){var Q=$[K?Z-q-1:q],at=Q.children,rt=Q.height,nt=Fg(at);switch(nt===void 0&&(nt=V),nt){case 1:case"center":W=(G-rt)/2;break;case 2:case"bottom":W=G-rt;break;default:W=0}Bg(at,N,W),N+=H}}(g,r=Y-o,l=R-s),this.setCanvasSize(Y,R),m=0,x=_.length;m<x;m++)(L=_[m]).renderable&&(L.x0=L.x,L.y0=L.y);return g};const sb=Phaser.Utils.Objects.Merge,Rd=Phaser.Utils.Objects.GetValue,nb={setVAlign(e){return this.wrapConfig.vAlign=e,this},setHAlign(e){return this.wrapConfig.hAlign=e,this}},rb={setTextOX(e){return e===this._textOX||(this._textOX=e),this},setTextOY(e){return e===this._textOY||(this._textOY=e),this},setTextOXY(e,t){if(e!==this._textOX||t!==this._textOY)return this._textOX=e,this._textOY=t,this},addTextOX(e){return this.setTextOX(this._textOX+e),this},addTextOY(e){return this.setTextOY(this._textOY+e),this},addTextOXY(e,t){return this.setTextOXY(this._textOX+e,this._textOY+t),this}},ab=Phaser.Utils.Array.GetAll,ob=Phaser.Math.Distance.BetweenPointsSquared;var ru=function(e,t,n){for(var s=0,o=e.length;s<o;s++){var i=e[s];if(i.active&&i.renderable&&i.contains(t,n))return i}return null},hb=function(){return this.on("pointerdown",lb,this).on("pointerdown",ub,this).on("pointermove",hh,this).on("pointerover",hh,this).on("pointerout",function(e,t){hh.call(this,e,null,null,t)},this),this},lb=function(e,t,n,s){if(this.childrenInteractiveEnable){var o=ru(this.children,t,n);o&&this.emit("child.pointerdown",o,e,t,n,s)}},ub=function(e,t,n,s){if(this.childrenInteractiveEnable){var o=ru(this.children,t,n);o&&this.emit("child.pointerup",o,e,t,n,s)}},hh=function(e,t,n,s){if(this.childrenInteractiveEnable)if(t!==null){var o=ru(this.children,t,n);o!==this.lastOverChild&&(this.lastOverChild!==null&&this.emit("child.pointerout",this.lastOverChild,e,t,n,s),o!==null&&this.emit("child.pointerover",o,e,t,n,s),this.lastOverChild=o)}else this.lastOverChild!==null&&(this.emit("child.pointerout",this.lastOverChild,e,t,n,s),this.lastOverChild=null)};const db=Phaser.GameObjects.GameObject,cb=Phaser.Utils.Array.BringToTop,fb=Phaser.Utils.Array.SendToBack,pb=Phaser.Utils.Array.MoveUp,gb=Phaser.Utils.Array.MoveDown,mb=Phaser.Utils.Array.MoveAbove,vb=Phaser.Utils.Array.MoveBelow,yb={moveChildToFist(e){return fb(this.children,e),this},moveChildToLast(e){return cb(this.children,e),this},movechildUp(e){return pb(this.children,e),this},movechildDown(e){return gb(this.children,e),this},movechildAbove(e,t){return mb(this.children,e,t),this},movechildBelow(e,t){return vb(this.children,e,t),this}},xb={setBackgroundColor(e,t,n){return this.background.setColor(e,t,n),this},setBackgroundStroke(e,t){return this.background.setStroke(e,t),this},setBackgroundCornerRadius(e,t){return this.background.setCornerRadius(e,t),this}},bb={setInnerBoundsColor(e,t,n){return this.innerBounds.setColor(e,t,n),this},setInnerBoundsStroke(e,t){return this.innerBounds.setStroke(e,t),this}};var Ig={setFixedSize:function(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),this.fixedWidth===e&&this.fixedHeight===t||(this.fixedWidth=e,this.fixedHeight=t,this.dirty=!0,this.setCanvasSize(e>0?e:this.width,t>0?t:this.height)),this},setPadding:function(e,t){var n=this.padding,s=n.left,o=n.right,i=n.top,r=n.bottom;return ns(n,e,t),this.dirty=this.dirty||s!=n.left||o!=n.right||i!=n.top||r!=n.bottom,this},getPadding:function(e){return co(this.padding,e)},modifyTextStyle:function(e){return this.textStyle.modify(e),this},modifyDefaultTextStyle:function(e){return this.defaultTextStyle.modify(e),this},resetTextStyle:function(){return this.textStyle.copyFrom(this.defaultTextStyle),this},setTestString:function(e){return this.testString=e,this},removeChild:function(e){return this.poolManager.free(e),Wx(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},removeChildren:function(){return this.poolManager.freeMultiple(this.children),this.children.length=0,this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},popChild:function(e){return Vx(this.children,e),this.lastAppendedChildren.length=0,this.lastOverChild=null,this.dirty=!0,this},clearContent:function(){return this.setText(),this},addChild:function(e,t){var n=Array.isArray(e);return t===void 0||t===this.children.length?n?this.children.push(...e):this.children.push(e):n?this.children.splice(t,0,...e):this.children.splice(t,0,e),this.lastAppendedChildren.length=0,n?this.lastAppendedChildren.push(...e):this.lastAppendedChildren.push(e),this},createCharChild:function(e,t){t&&this.textStyle.modify(t);var n=this.poolManager.allocate(Ai);return n===null?n=new _d(this,e,this.textStyle):n.setParent(this).setActive().modifyStyle(this.textStyle).setText(e),n},createCharChildren:function(e,t){t&&this.textStyle.modify(t);for(var n=[],s=0,o=e.length;s<o;s++){var i=e.charAt(s),r=this.poolManager.allocate(Ai);r===null?r=new _d(this,i,this.textStyle):r.setParent(this).setActive().modifyStyle(this.textStyle).setText(i),n.push(r)}return n},setText:function(e,t){return e===void 0&&(e=""),this.removeChildren(),br.call(this,e,t),this.dirty=!0,this},appendText:br,insertText:function(e,t,n){var s=this.createCharChildren(t,n);return e=this.getCharChildIndex(e,!0),this.addChild(s,e),this},removeText:function(e,t){t===void 0&&(t=1);for(var n=0;n<t;n++){var s=this.getCharChildIndex(e,!0);if(s===void 0)break;this.removeChild(this.children[s])}return this},getText:function(e){var t="";return this.forEachCharChild(function(n){t+=n.text},void 0,e),t},createImageChild:function(e,t,n){var s=this.poolManager.allocate(Og);return s===null?s=new Kx(this,e,t):s.setParent(this).setActive().setTexture(e,t),s.modifyPorperties(n),s},appendImage:Rg,createDrawerChild:function(e,t,n){var s=this.poolManager.allocate(kg);return s===null?s=new qx(this,e,t,n):s.setParent(this).setActive().setRenderCallback(e).setDrawerSize(t,n),s},appendDrawer:function(e,t,n){var s=this.createDrawerChild(e,t,n);return this.addChild(s),this},createSpaceChild:function(e){var t=this.poolManager.allocate(Mg);return t===null?t=new $x(this,e):t.setParent(this).setActive().setSpaceWidth(e),t},appendSpace:Lg,createCommandChild:function(e,t,n,s){var o=this.poolManager.allocate(nu);return o===null?o=new Zx(this,e,t,n,s):o.setParent(this).setActive().setName(e).setCallback(t,s).setParameter(n),o},appendCommand:et,setWrapConfig:function(e){return e===void 0?e={}:typeof e=="object"&&(e=Ne(e)),this.wrapConfig=e,this},runWordWrap:function(e){return e===void 0&&(e={}),tb.call(this,eb(e,this.wrapConfig))},runVerticalWrap:function(e){return e===void 0&&(e={}),ib.call(this,sb(e,this.wrapConfig))},runWrap:function(e){var t=Rd(this.wrapConfig,"callback");return t||(t=Rd(e,"callback",this.runWordWrap)),typeof t=="string"&&(t=this[t]),t.call(this,e)},renderContent:function(){var e;this.clear(),this.setCanvasSize(this.width,this.height),this.background.active&&this.background.render();for(var t=0,n=this.children.length;t<n;t++)(e=this.children[t]).active&&e.render();this.innerBounds.active&&this.innerBounds.render()},forEachChild:function(e,t,n){n===void 0&&(n=!0);for(var s=this.children.filter(function(h){return!(n&&!h.active)}),o=0,i=s.length;o<i;o++){var r=s[o];if(t?e.call(this,r,o,s):e(r,o,s))break}return this},forEachRenderableChild:function(e,t,n){n===void 0&&(n=!0);for(var s=this.children.filter(function(h){return!(n&&!h.active||!h.renderable||h.removed)}),o=0,i=s.length;o<i;o++){var r=s[o];if(t?e.call(this,r,o,s):e(r,o,s))break}return this},forEachCharChild:function(e,t,n){n===void 0&&(n=!0);for(var s=this.children.filter(function(h){return!(n&&!h.active||!Rs(h)||h.removed)}),o=0,i=s.length;o<i;o++){var r=s[o];if(t?e.call(this,r,o,s):e(r,o,s))break}return this},getChildren:function(){return this.children},getActiveChildren:function(){return ab(this.children,"active",!0)},getCharChildren:function(e,t){return t===void 0&&(t=[]),this.forEachCharChild(function(n){t.push(n)},void 0,e),t},getLastAppendedChildren:function(){return this.lastAppendedChildren},getNearestChild:function(e,t){var n={x:e,y:t},s=1/0,o=null;return this.forEachRenderableChild(function(i){var r=ob(n,function(h,a,u,l){typeof a!="number"&&(l=a,a=0,u=0);var d=h.drawCenterX+a,c=h.drawCenterY+u;return Cg(h,d,c,l)}(i,!0));s>r&&(s=r,o=i)}),o},getCharWorldPosition:function(e,t,n,s){return typeof e=="number"&&(e=this.getCharChild(e,!0)),Eg(this,e,t,n,s)},setToMinSize:function(){for(var e=this.children,t=0,n=0,s=0,o=e.length;s<o;s++){var i=e[s];if(i.renderable&&i.active&&i.visible){var r=i.x0!==void 0?i.x0:i.x,h=i.y0!==void 0?i.y0:i.y;t=Math.max(t,r),n=Math.max(n,h)}}var a=t+this.padding.left+this.padding.right+this.wrapPadding.left+this.wrapPadding.right,u=n+this.padding.top+this.padding.bottom+this.wrapPadding.top+this.wrapPadding.bottom;return this.width===a&&this.height===u||(this.dirty=!0,this.setCanvasSize(a,u)),this},getCharChildIndex:function(e,t){t===void 0&&(t=!0);for(var n=this.children,s=0,o=n.length;s<o;s++){var i=n[s];if((!t||i.active)&&Rs(i)&&!i.removed){if(e===0)return s;e--}}},getCharChild:function(e,t){t===void 0&&(t=!0);for(var n=this.children,s=0,o=n.length;s<o;s++){var i=n[s];if((!t||i.active)&&Rs(i)&&!i.removed){if(e===0)return i;e--}}},getCharIndex:function(e,t){if(typeof e!="number"&&(e=this.children.indexOf(e))<0)return null;t===void 0&&(t=!0);var n=this.children;e>=n.length&&(e=n.length);for(var s=0,o=0;o<e;o++){var i=n[o];t&&!i.active||Rs(i)&&!i.removed&&s++}return s},setChildrenInteractiveEnable:function(e){return e===void 0&&(e=!0),this.childrenInteractiveEnable!==e&&(this.lastOverChild=null),this.childrenInteractiveEnable=e,this},setInteractive:function(e,t,n){var s=!!this.input;return db.prototype.setInteractive.call(this,e,t,n),s||hb.call(this),this}};Object.assign(Ig,yb,xb,bb,nb,rb);const Tb=Phaser.Utils.Objects.GetFastValue;var wb={};class Sb{constructor(t){this.pools=Tb(t,"pools",wb)}free(t){if(!this.pools)return this;var n=t.type;return this.pools.hasOwnProperty(n)||(this.pools[n]=new mi),this.pools[n].push(t),t.onFree(),this}freeMultiple(t){if(!this.pools)return this;for(var n=0,s=t.length;n<s;n++)this.free(t[n]);return this}allocate(t){return this.pools&&this.pools.hasOwnProperty(t)?this.pools[t].pop():null}}const lh=Phaser.Utils.Objects.IsPlainObject,Qt=Phaser.Utils.Objects.GetValue;class Fo extends Bn{constructor(t,n,s,o,i,r,h){lh(n)?(n=Qt(h=n,"x",0),s=Qt(h,"y",0),o=Qt(h,"width",0),i=Qt(h,"height",0),r=Qt(h,"resolution",1)):lh(o)?(o=Qt(h=o,"width",0),i=Qt(h,"height",0),r=Qt(h,"resolution",1)):lh(r)&&(r=Qt(h=r,"resolution",1)),super(t,n,s,o===0?1:o,i===0?1:i,r),this.type="rexDynamicText",this.autoRound=!0,this.padding=ns(),this.wrapPadding=ns();var a=Qt(h,"style",void 0);this.defaultTextStyle=new Do(null,a),this.textStyle=this.defaultTextStyle.clone(),this.setTestString(Qt(h,"testString","|Mqgy")),this._textOX=0,this._textOY=0,this.background=new Gx(this,Qt(h,"background",void 0)),this.innerBounds=new Ux(this,Qt(h,"innerBounds",void 0)),this.children=[],this.lastAppendedChildren=[],this.lastOverChild=null,this.poolManager=new Sb(h),this.setFixedSize(o,i),this.setPadding(Qt(h,"padding",0)),this.setWrapConfig(Qt(h,"wrap",void 0)),this.setChildrenInteractiveEnable(Qt(h,"childrenInteractive",!1));var u=Qt(h,"text",void 0);u&&this.setText(u)}updateTexture(){return super.updateTexture(function(){this.renderContent()},this),this}get text(){return this.getText(!0)}set text(t){this.setText(t)}setSize(t,n){return this.setFixedSize(t,n),this}get textOX(){return this._textOX}set textOX(t){this.setTextOX(t)}get textOY(){return this._textOY}set textOY(t){this.setTextOY(t)}}Object.assign(Fo.prototype,Ig);const Cb={hasProperty(e){var t=this.gameObject;return!!t.hasOwnProperty(e)||t[e]!==void 0},getProperty(e){return this.gameObject[e]},setProperty(e,t){return this.gameObject[e]=t,this},easeProperty(e){var t=e.property,n=e.value,s=e.duration,o=e.delay,i=e.ease,r=e.repeat,h=e.yoyo,a=e.from,u=e.complete,l=e.target;if(s===void 0&&(s=1e3),o===void 0&&(o=0),i===void 0&&(i="Linear"),r===void 0&&(r=0),h===void 0&&(h=!1),l===void 0&&(l=this.gameObject),a){var d=n;n=l[t],l[t]=d}return(e={targets:l,duration:s,delay:o,ease:i,repeat:r,yoyo:h,onComplete:u})[t]=n,this.addTweenTask(t,e),this},addTweenTask(e,t){var n=this.tweens,s=n[e];s&&s.remove();var o=t.onComplete;return t.onComplete=function(){n[e].remove(),n[e]=null,o&&o(t.targets,e)},(s=this.scene.tweens.add(t)).timeScale=this.timeScale,n[e]=s,this},getTweenTask(e){return this.tweens[e]},freeTweens(){var e,t=this.tweens;for(var n in t)(e=t[n])&&e.remove(),t[n]=null;return this}},Eb={hasMethod(e){return typeof this.gameObject[e]=="function"},call(e,...t){if(!this.hasMethod(e))return console.warn(`[GameObjectManager] Game object '${this.name}' does not have method '${e}'`),this;var n=this.gameObject;return n[e].apply(n,t),this}},Pb={hasData(e){var t=this.gameObject;return!!t.data&&t.data.has(e)},getData(e){return this.gameObject.getData(e)},setData(e,t){return this.gameObject.setData(e,t),this}};class au{constructor(t,n,s){this.GOManager=t,this.tweens={},this.effects={},this.setGO(n,s)}get scene(){return this.GOManager.scene}get timeScale(){return this.GOManager.timeScale}destroy(){this.freeGO(),this.GOManager=void 0}freeGO(){return this.freeTweens(),this.gameObject.bob=void 0,this.gameObject.destroy(),this.gameObject=void 0,this}setGO(t,n){return t.goName=n,t.goType=this.GOManager.name,t.bob=this,this.gameObject=t,this.name=n,this.freeTweens(),this}setTimeScale(t){var n=this.tweens;for(var s in n){var o=n[s];o&&(o.timeScale=t)}return this}}Object.assign(au.prototype,Cb,Eb,Pb);var Br=function(e){for(var t in e)return!1;return!0},Ls=function(e){return e&&e.charAt(0)!=="!"};const Ob={has(e){return this.bobs.hasOwnProperty(e)},exists(e){return this.bobs.hasOwnProperty(e)},get(e,t){if(Ls(e))return this.bobs[e];for(var n in t===void 0&&(t=[]),e&&(e=e.substring(1)),this.bobs)e&&n===e||t.push(this.bobs[n]);return t},getFitst(e){for(var t in e&&e.charAt(0)==="!"&&(e=e.substring(1)),this.bobs)if(!e||e!==t)return this.bobs[t];return null},getGO(e,t){var n=this.get(e);return n?Array.isArray(n)?(t===void 0&&(t=[]),n.forEach(function(s){t.push(s.gameObject)}),t):n.gameObject:null},forEachGO(e,t){for(var n in this.bobs){var s=this.bobs[n].gameObject;if(t?e.call(t,s,n,this):e(s,n,this))break}return this},getAllGO(e){for(var t in e===void 0&&(e=[]),this.bobs){var n=this.bobs[t].gameObject;e.push(n)}return e}},kb=Phaser.Events.EventEmitter;var Mb=function(e,t,n,s,o,i){return i===void 0?i={}:i===!0&&(i=_b),typeof n!="number"&&(n=0,s=0),i.x=o.x+o.width*e+n,i.y=o.y+o.height*t+s,i},_b={},ne=function(e){return e.preFX?e.preFX:e.postFX?e.postFX:null},zt=function(e,t){e._effectSwitchNames||(e._effectSwitchNames=[],e.clearAllEffects=function(){for(var n=e._effectSwitchNames,s=0,o=n.length;s<o;s++)e[n[s]]=null;return e},e.on("destroy",e.clearAllEffects,e)),e._effectSwitchNames.push(t)},te=function(e,t,n){if(yt(e,t))return e;var s=ne(e);if(!s)return e;var o,i=`_${t}Effect`;return Object.defineProperty(e,t,{get:function(){return o},set:function(r){o!==r&&((o=r)===null||o===!1?e[i]&&(s.remove(e[i]),e[i]=void 0):(e[i]||(e[i]=s.addColorMatrix()),e[i][t](n===1?r:void 0)))}}),e[t]=null,zt(e,t),e};const pa={barrel:function(e){if(yt(e,"barrel"))return e;var t,n=ne(e);return n&&(Object.defineProperty(e,"barrel",{get:function(){return t},set:function(s){t!==s&&((t=s)===null||t===!1?e._barrelEffect&&(n.remove(e._barrelEffect),e._barrelEffect=void 0):(e._barrelEffect||(e._barrelEffect=n.addBarrel()),e._barrelEffect.amount=t))}}),e.barrel=null,zt(e,"barrel")),e},blackWhite:function(e){return te(e,"blackWhite"),e},bloom:function(e){if(yt(e,"bloomColor"))return e;var t=ne(e);if(!t)return e;var n,s=1,o=1,i=1,r=1,h=4;return Object.defineProperty(e,"bloomColor",{get:function(){return n},set:function(a){n!==a&&((n=a)===null||n===!1?e._bloom&&(t.remove(e._bloom),e._bloom=void 0,t.setPadding(0)):(e._bloom||(e._bloom=t.addBloom(n,s,o,i,r,h),t.setPadding(Math.max(s,o)+1)),e._bloom.color=n))}}),Object.defineProperty(e,"bloomOffsetX",{get:function(){return s},set:function(a){if(s!==a&&(s=a,e._bloom)){var u=Math.max(s,o);t.setPadding(u+1),e._bloom.offsetX=s}}}),Object.defineProperty(e,"bloomOffsetY",{get:function(){return o},set:function(a){if(o!==a&&(o=a,e._bloom)){var u=Math.max(s,o);t.setPadding(u+1),e._bloom.offsetY=o}}}),Object.defineProperty(e,"bloomBlurStrength",{get:function(){return i},set:function(a){i!==a&&(i=a,e._bloom&&(e._bloom.blurStrength=i))}}),Object.defineProperty(e,"bloomStrength",{get:function(){return r},set:function(a){r!==a&&(r=a,e._bloom&&(e._bloom.strength=r))}}),Object.defineProperty(e,"bloomSteps",{get:function(){return h},set:function(a){h!==a&&(h=a,e._bloom&&(e._bloom.steps=h))}}),e.bloomColor=null,zt(e,"bloomColor"),e},blur:function(e){if(yt(e,"blurColor"))return e;var t=ne(e);if(!t)return e;var n,s=0,o=1,i=1,r=1,h=4;return Object.defineProperty(e,"blurColor",{get:function(){return n},set:function(a){n!==a&&((n=a)===null||n===!1?e._blur&&(t.remove(e._blur),e._blur=void 0,t.setPadding(0)):(e._blur||(e._blur=t.addBlur(s,o,i,r,n,h),t.setPadding(Math.max(o,i)+1)),e._blur.color=n))}}),Object.defineProperty(e,"blurQuality",{get:function(){return s},set:function(a){s!==a&&(s=a,e._blur&&(e._blur.quality=s))}}),Object.defineProperty(e,"blurX",{get:function(){return o},set:function(a){if(o!==a&&(o=a,e._blur)){var u=Math.max(o,i);t.setPadding(u+1),e._blur.x=o}}}),Object.defineProperty(e,"blurY",{get:function(){return i},set:function(a){if(i!==a&&(i=a,e._blur)){var u=Math.max(o,i);t.setPadding(u+1),e._blur.y=i}}}),Object.defineProperty(e,"blurStrength",{get:function(){return r},set:function(a){r!==a&&(r=a,e._blur&&(e._blur.strength=r))}}),Object.defineProperty(e,"blurSteps",{get:function(){return h},set:function(a){h!==a&&(h=a,e._blur&&(e._blur.steps=h))}}),e.blurColor=null,zt(e,"blurColor"),e},bokeh:function(e){if(yt(e,"bokehRadius"))return e;var t=ne(e);if(!t)return e;var n,s=1,o=.2;return Object.defineProperty(e,"bokehRadius",{get:function(){return n},set:function(i){n!==i&&((n=i)===null||n===!1?e._bokeh&&(t.remove(e._bokeh),e._bokeh=void 0):(e._bokeh||(e._bokeh=t.addBokeh(n,s,o)),e._bokeh.radius=n))}}),Object.defineProperty(e,"bokehAmount",{get:function(){return s},set:function(i){s!==i&&(s=i,e._bokeh&&(e._bokeh.amount=s))}}),Object.defineProperty(e,"bokehContrast",{get:function(){return o},set:function(i){o!==i&&(o=i,e._bokeh&&(e._bokeh.contrast=o))}}),e.bokehRadius=null,zt(e,"bokehRadius"),e},brightness:function(e){return te(e,"brightness",1),e},brown:function(e){return te(e,"brown"),e},circle:function(e){if(yt(e,"circleColor"))return e;var t=ne(e);if(!t)return e;var n,s=8,o=0,i=.4,r=1,h=.005;return Object.defineProperty(e,"circleColor",{get:function(){return n},set:function(a){n!==a&&((n=a)===null||n===!1?e._circle&&(t.remove(e._circle),e._circle=void 0):(e._circle||(e._circle=t.addCircle(s,n,o,r,h),e.circleBackgroundAlpha=i),e._circle.color=n))}}),Object.defineProperty(e,"circleThickness",{get:function(){return s},set:function(a){s!==a&&(s=a,e._circle&&(e._circle.thickness=s))}}),Object.defineProperty(e,"circleBackgroundColor",{get:function(){return o},set:function(a){o!==a&&(o=a,e._circle&&(e._circle.backgroundColor=o))}}),Object.defineProperty(e,"circleBackgroundAlpha",{get:function(){return i},set:function(a){i!==a&&(i=a,e._circle&&(e._circle.glcolor2[3]=i))}}),Object.defineProperty(e,"circleScale",{get:function(){return r},set:function(a){r!==a&&(r=a,e._circle&&(e._circle.scale=r))}}),Object.defineProperty(e,"circleFeather",{get:function(){return h},set:function(a){h!==a&&(h=a,e._circle&&(e._circle.feather=h))}}),e.circleColor=null,zt(e,"circleColor"),e},contrast:function(e){return te(e,"contrast",1),e},desaturate:function(e){return te(e,"desaturate",1),e},desaturateLuminance:function(e){return te(e,"desaturateLuminance"),e},displacement:function(e){if(yt(e,"displacementKey"))return e;var t=ne(e);if(!t)return e;var n,s=.005,o=.005;return Object.defineProperty(e,"displacementKey",{get:function(){return n},set:function(i){n!==i&&((n=i)===null||n===!1?e._displacement&&(t.remove(e._displacement),e._displacement=void 0):(e._displacement||(e._displacement=t.addDisplacement(n,s,o)),e._displacement.setTexture(n)))}}),Object.defineProperty(e,"displacementX",{get:function(){return s},set:function(i){s!==i&&(s=i,e._displacement&&(e._displacement.x=s))}}),Object.defineProperty(e,"displacementY",{get:function(){return o},set:function(i){o!==i&&(o=i,e._displacement&&(e._displacement.y=o))}}),e.displacementKey=null,zt(e,"displacementKey"),e},glow:function(e){if(yt(e,"glowColor"))return e;var t=ne(e);if(!t)return e;var n,s=4,o=0;return Object.defineProperty(e,"glowColor",{get:function(){return n},set:function(i){n!==i&&((n=i)===null||n===!1?e._glow&&(t.remove(e._glow),e._glow=void 0,t.setPadding(0)):(e._glow||(e._glow=t.addGlow(n,s,o),t.setPadding(s+1)),e._glow.color=n))}}),Object.defineProperty(e,"glowOuterStrength",{get:function(){return s},set:function(i){s!==i&&(s=i,e._glow&&(t.setPadding(s+1),e._glow.outerStrength=s))}}),Object.defineProperty(e,"glowInnerStrength",{get:function(){return o},set:function(i){o!==i&&(o=i,e._glow&&(e._glow.innerStrength=o))}}),e.glowColor=null,zt(e,"glowColor"),e},gradient:function(e){if(yt(e,"gradientColor"))return e;var t=ne(e);if(!t)return e;var n,s,o=.5,i=0,r=0,h=0,a=1,u=0;return Object.defineProperty(e,"gradientColor",{get:function(){return[n,s]},set:function(l){var d,c;l===null||l===!1?(d=null,c=null):(d=l[0],c=l[1]),n===d&&s===c||(s=c,(n=d)===null||n===!1?e._gradient&&(t.remove(e._gradient),e._gradient=void 0):(e._gradient||(e._gradient=t.addGradient(n,s,o,i,r,h,a,u)),e._gradient.color1=n,e._gradient.color2=s))}}),Object.defineProperty(e,"gradientColor1",{get:function(){return n},set:function(l){l!==null&&l!==!1?n!==l&&(n=l,e._gradient&&(e._gradient.color1=n)):e.gradientColor=l}}),Object.defineProperty(e,"gradientColor2",{get:function(){return s},set:function(l){l!==null&&l!==!1?s!==l&&(s=l,e._gradient&&(e._gradient.color2=s)):e.gradientColor=l}}),Object.defineProperty(e,"gradientAlpha",{get:function(){return o},set:function(l){o!==l&&(o=l,e._gradient&&(e._gradient.alpha=o))}}),Object.defineProperty(e,"gradientFromX",{get:function(){return i},set:function(l){i!==l&&(i=l,e._gradient&&(e._gradient.fromX=i))}}),Object.defineProperty(e,"gradientFromY",{get:function(){return r},set:function(l){r!==l&&(r=l,e._gradient&&(e._gradient.fromY=r))}}),Object.defineProperty(e,"gradientToX",{get:function(){return h},set:function(l){h!==l&&(h=l,e._gradient&&(e._gradient.toX=h))}}),Object.defineProperty(e,"gradientToY",{get:function(){return a},set:function(l){a!==l&&(a=l,e._gradient&&(e._gradient.toY=a))}}),Object.defineProperty(e,"gradientSize",{get:function(){return u},set:function(l){u!==l&&(u=l,e._gradient&&(e._gradient.size=u))}}),e.gradientColor=null,zt(e,"gradientColor"),e},grayscale:function(e){return te(e,"grayscale",1),e},hue:function(e){return te(e,"hue",1),e},kodachrome:function(e){return te(e,"kodachrome"),e},lsd:function(e){return te(e,"lsd"),e},negative:function(e){return te(e,"negative"),e},pixelate:function(e){if(yt(e,"pixelate"))return e;var t,n=ne(e);return n&&(Object.defineProperty(e,"pixelate",{get:function(){return t},set:function(s){t!==s&&((t=s)===null||t===!1?e._pixelateEffect&&(n.remove(e._pixelateEffect),e._pixelateEffect=void 0):(e._pixelateEffect||(e._pixelateEffect=n.addPixelate()),e._pixelateEffect.amount=t))}}),e.pixelate=null,zt(e,"pixelate")),e},polaroid:function(e){return te(e,"polaroid"),e},reveal:function(e){if(yt(e,"revealLeft"))return e;var t=ne(e);if(!t)return e;var n,s,o,i,r=.1,h=function(){n=null,s=null,o=null,i=null},a=function(u){u._revealEffect&&(t.remove(u._revealEffect),u._revealEffect=void 0)};return Object.defineProperty(e,"revealLeft",{get:function(){return n},set:function(u){n!==u&&(h(),(n=u)===null||n===!1?a(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=0,e._revealEffect.progress=n))}}),Object.defineProperty(e,"revealRight",{get:function(){return s},set:function(u){s!==u&&(h(),(s=u)===null||s===!1?a(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=0,e._revealEffect.progress=s))}}),Object.defineProperty(e,"revealUp",{get:function(){return o},set:function(u){o!==u&&(h(),(o=u)===null||o===!1?a(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=1,e._revealEffect.axis=1,e._revealEffect.progress=o))}}),Object.defineProperty(e,"revealDown",{get:function(){return i},set:function(u){i!==u&&(h(),(i=u)===null||i===!1?a(e):(e._revealEffect||(e._revealEffect=t.addReveal(r,0,0)),e._revealEffect.direction=0,e._revealEffect.axis=1,e._revealEffect.progress=i))}}),Object.defineProperty(e,"revealWidth",{get:function(){return r},set:function(u){r!==u&&(r=u,e._revealEffect&&(e._revealEffect.wipeWidth=r))}}),e.revealLeft=null,zt(e,"revealLeft"),zt(e,"revealRight"),zt(e,"revealUp"),zt(e,"revealDown"),e},saturate:function(e){return te(e,"saturate",1),e},sepia:function(e){return te(e,"sepia"),e},shadow:function(e){if(yt(e,"shadowColor"))return e;var t=ne(e);if(!t)return e;var n,s=0,o=0,i=.1,r=1,h=6,a=1;return Object.defineProperty(e,"shadowColor",{get:function(){return n},set:function(u){n!==u&&((n=u)===null||n===!1?e._shadow&&(t.remove(e._shadow),e._shadow=void 0):(e._shadow||(e._shadow=t.addShadow(s,o,i,r,n,h,a)),e._shadow.color=n))}}),Object.defineProperty(e,"shadowX",{get:function(){return s},set:function(u){s!==u&&(s=u,e._shadow&&(e._shadow.x=s))}}),Object.defineProperty(e,"shadowY",{get:function(){return o},set:function(u){o!==u&&(o=u,e._shadow&&(e._shadow.y=o))}}),Object.defineProperty(e,"decay",{get:function(){return i},set:function(u){i!==u&&(i=u,e._shadow&&(e._shadow.decay=i))}}),Object.defineProperty(e,"shadowPower",{get:function(){return r},set:function(u){r!==u&&(r=u,e._shadow&&(e._shadow.power=r))}}),Object.defineProperty(e,"shadowSamples",{get:function(){return h},set:function(u){h!==u&&(h=u,e._shadow&&(e._shadow.samples=h))}}),Object.defineProperty(e,"shadowIntensity",{get:function(){return a},set:function(u){a!==u&&(a=u,e._shadow&&(e._shadow.intensity=a))}}),e.shadowColor=null,zt(e,"shadowColor"),e},shiftToBGR:function(e){return te(e,"shiftToBGR"),e},shine:function(e){if(yt(e,"shineSpeed"))return e;var t=ne(e);if(!t)return e;var n,s=.5,o=3;return Object.defineProperty(e,"shineSpeed",{get:function(){return n},set:function(i){n!==i&&((n=i)===null||n===!1?e._shine&&(t.remove(e._shine),e._shine=void 0):(e._shine||(e._shine=t.addShine(n,s,o)),e._shine.speed=n))}}),Object.defineProperty(e,"shineLineWidth",{get:function(){return s},set:function(i){s!==i&&(s=i,e._shine&&(e._shine.lineWidth=s))}}),Object.defineProperty(e,"shineGradient",{get:function(){return o},set:function(i){o!==i&&(o=i,e._shine&&(e._shine.gradient=o))}}),e.shineSpeed=null,zt(e,"shineSpeed"),e},technicolor:function(e){return te(e,"technicolor"),e},tiltShift:function(e){if(yt(e,"tiltShiftRadius"))return e;var t=ne(e);if(!t)return e;var n,s=1,o=.2,i=1,r=1,h=1;return Object.defineProperty(e,"tiltShiftRadius",{get:function(){return n},set:function(a){n!==a&&((n=a)===null||n===!1?e._tiltShift&&(t.remove(e._tiltShift),e._tiltShift=void 0):(e._tiltShift||(e._tiltShift=t.addTiltShift(n,s,o,i,r,h)),e._tiltShift.radius=n))}}),Object.defineProperty(e,"tiltShiftAmount",{get:function(){return s},set:function(a){s!==a&&(s=a,e._tiltShift&&(e._tiltShift.amount=s))}}),Object.defineProperty(e,"tiltShiftContrast",{get:function(){return o},set:function(a){o!==a&&(o=a,e._tiltShift&&(e._tiltShift.contrast=o))}}),Object.defineProperty(e,"tiltShiftBlurX",{get:function(){return i},set:function(a){i!==a&&(i=a,e._tiltShift&&(e._tiltShift.blurX=i))}}),Object.defineProperty(e,"tiltShiftBlurY",{get:function(){return r},set:function(a){r!==a&&(r=a,e._tiltShift&&(e._tiltShift.blurY=r))}}),Object.defineProperty(e,"tiltShiftStrength",{get:function(){return h},set:function(a){h!==a&&(h=a,e._tiltShift&&(e._tiltShift.strength=h))}}),e.tiltShiftRadius=null,zt(e,"tiltShiftRadius"),e},vignette:function(e){if(yt(e,"vignetteRadius"))return e;var t=ne(e);if(!t)return e;var n,s=.5,o=.5,i=.5;return Object.defineProperty(e,"vignetteRadius",{get:function(){return n},set:function(r){n!==r&&((n=r)===null||n===!1?e._vignette&&(t.remove(e._vignette),e._vignette=void 0):(e._vignette||(e._vignette=t.addVignette(s,o,n,i)),e._vignette.radius=n))}}),Object.defineProperty(e,"vignetteX",{get:function(){return s},set:function(r){s!==r&&(s=r,e._vignette&&(e._vignette.x=s))}}),Object.defineProperty(e,"vignetteY",{get:function(){return o},set:function(r){o!==r&&(o=r,e._vignette&&(e._vignette.y=o))}}),Object.defineProperty(e,"vignetteStrength",{get:function(){return i},set:function(r){i!==r&&(i=r,e._vignette&&(e._vignette.strength=i))}}),e.vignetteRadius=null,zt(e,"vignetteRadius"),e},vintagePinhole:function(e){return te(e,"vintagePinhole"),e},wipe:function(e){if(yt(e,"wipeLeft"))return e;var t=ne(e);if(!t)return e;var n,s,o,i,r=.1,h=function(){n=null,s=null,o=null,i=null},a=function(u){u._wipeEffect&&(t.remove(u._wipeEffect),u._wipeEffect=void 0)};return Object.defineProperty(e,"wipeLeft",{get:function(){return n},set:function(u){n!==u&&(h(),(n=u)===null||n===!1?a(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=0,e._wipeEffect.progress=n))}}),Object.defineProperty(e,"wipeRight",{get:function(){return s},set:function(u){s!==u&&(h(),(s=u)===null||s===!1?a(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=0,e._wipeEffect.progress=s))}}),Object.defineProperty(e,"wipeUp",{get:function(){return o},set:function(u){o!==u&&(h(),(o=u)===null||o===!1?a(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=1,e._wipeEffect.axis=1,e._wipeEffect.progress=o))}}),Object.defineProperty(e,"wipeDown",{get:function(){return i},set:function(u){i!==u&&(h(),(i=u)===null||i===!1?a(e):(e._wipeEffect||(e._wipeEffect=t.addWipe(r,0,0)),e._wipeEffect.direction=0,e._wipeEffect.axis=1,e._wipeEffect.progress=i))}}),Object.defineProperty(e,"wipeWidth",{get:function(){return r},set:function(u){r!==u&&(r=u,e._wipeEffect&&(e._wipeEffect.wipeWidth=r))}}),e.wipeLeft=null,zt(e,"wipeLeft"),zt(e,"wipeRight"),zt(e,"wipeUp"),zt(e,"wipeDown"),e}};var Yn=function(e,t){if(t===void 0)t=!0;else if(typeof t=="string")t={config:!0};else if(Array.isArray(t))for(var n=t,s=(t={},0),o=n.length;s<o;s++)t[n[s]]=!0;if(t===!0)for(var i in pa)pa[i](e);else for(var i in t)t[i]&&pa[i]&&pa[i](e);return e};const Ab=Phaser.Utils.Array.Remove,Rb={addGO(e,t){this.remove(e,!0),this.useTintFadeEffect(t)&&function(s,o){if(s.hasOwnProperty("tintR"))return s;o===void 0&&(o=16777215);var i=Cr(o),r=Er(o),h=Pr(o);Object.defineProperty(s,"tint",{get:function(){return o},set:function(a){a=16777215&Math.floor(a),s.setTint&&s.setTint(a),o!==a&&(i=Cr(o=a),r=Er(o),h=Pr(o))}}),Object.defineProperty(s,"tintR",{get:function(){return i},set:function(a){a=255&Math.floor(a),i!==a&&(i=a,s.tint=(255&a)<<16|65535&o)}}),Object.defineProperty(s,"tintG",{get:function(){return r},set:function(a){a=255&Math.floor(a),r!==a&&(r=a,s.tint=(255&a)<<8|16711935&o)}}),Object.defineProperty(s,"tintB",{get:function(){return h},set:function(a){a=255&Math.floor(a),h!==a&&(h=a,s.tint=255&a|16776960&o)}}),Object.defineProperty(s,"tintGray",{get:function(){return Math.floor((i+r+h)/3)},set:function(a){a=255&Math.floor(a),i===a&&r===a&&h===a||(i=a,r=a,h=a,s.tint=(255&a)<<16|(255&a)<<8|255&a)}}),s.tint=o}(t),this.viewportCoordinateEnable&&function(s,o,i,r,h,a,u){if(s.hasOwnProperty("vp"))return s;typeof i=="function"&&(u=i,i=void 0),typeof h=="function"&&(u=h,h=void 0),i===void 0&&(i=.5),r===void 0&&(r=.5),h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=Mb),function(c){if(c.events)return c;var p=new kb,f=c.x;Object.defineProperty(c,"x",{get:function(){return f},set:function(m){f!==m&&(f=m,p.emit("update",c))}});var v=c.y;Object.defineProperty(c,"y",{get:function(){return v},set:function(m){v!==m&&(v=m,p.emit("update",c))}});var g=c.width;Object.defineProperty(c,"width",{get:function(){return g},set:function(m){g!==m&&(g=m,p.emit("update",c))}});var y=c.height;Object.defineProperty(c,"height",{get:function(){return y},set:function(m){y!==m&&(y=m,p.emit("update",c))}}),c.events=p}(o);var l=o.events;s.vp=o;var d=function(){u(i,r,h,a,o,s)};l.on("update",d),s.once("destroy",function(){l.off("update",d),s.vp=void 0}),Object.defineProperty(s,"vpx",{get:function(){return i},set:function(c){i!==c&&(i=c,d())}}),Object.defineProperty(s,"vpy",{get:function(){return r},set:function(c){r!==c&&(r=c,d())}}),Object.defineProperty(s,"vpxOffset",{get:function(){return h},set:function(c){h!==c&&(h=c,d())}}),Object.defineProperty(s,"vpyOffset",{get:function(){return a},set:function(c){a!==c&&(a=c,d())}}),d()}(t,this.viewport),this.effectPropertiesConfig&&Yn(t,this.effectPropertiesConfig),t.setName(e).once("destroy",function(){Ab(this.removedGOs,t),this.isEmpty&&this.emit("empty")},this);var n=new this.BobClass(this,t,e);return this.bobs[e]=n,this},add(e,...t){var n=this.createGameObjectCallback,s=this.createGameObjectScope,o=n.call(s,this.scene,...t);this.addGO(e,o),this.gameObjectDepth!=null&&o.setDepth(this.gameObjectDepth);var i=this.get(e);return this.fadeBob(i,0,1),this}},Lb={remove(e,t){var n=this.get(e);if(!n)return this;Array.isArray(n)||(n=[n]);var s=this;return n.forEach(function(o){delete s.bobs[o.name];var i=o.gameObject;s.removedGOs.push(i),i.setName(),t?o.destroy():s.fadeBob(o,void 0,0,function(){o.destroy()})}),this},removeAll(){var e=this.bobs;for(var t in e)this.remove(t);return this},clear(e){e===void 0&&(e=!0);var t=this.bobs;for(var n in t)e&&t[n].destroy(),delete t[n];return this.removedGOs.length=0,this}},Db={hasProperty(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);return!!n&&n.hasProperty(t)},getProperty(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);if(n)return n.getProperty(t)},isNumberProperty(e,t){return typeof this.getProperty(e,t)=="number"},setProperty(e,t,n){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),this.symbols&&typeof n=="string"&&this.isNumberProperty(e,t)&&(n in this.symbols?n=this.symbols[n]:console.warn(`Can't find symbol ${n}`)),s.forEach(function(o){o.setProperty(t,n)}),this):this},easeProperty(e,t){var n=this.get(e);if(!n)return this;Array.isArray(n)||(n=[n]);var s=t.value,o=t.property;return this.symbols&&typeof s=="string"&&this.isNumberProperty(e,o)&&s in this.symbols&&(t.value=this.symbols[s]),n.forEach(function(i){i.easeProperty(t)}),this},hasTweenTask(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);return!!n&&n.tweens.hasOwnProperty(t)},getTweenTask(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);return n&&n.tweens[t]||null}},Fb={hasMethod(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);return!!n&&n.hasMethod(t)},call(e,t,...n){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),s.forEach(function(o){o.call(t,...n)}),this):this}},Bb={hasData(e,t){var n=Ls(e)?this.get(e):this.getFitst(e);return!!n&&n.hasData(t)},getData(e,t){if(this.has(e))return this.get(e).getData(t)},setData(e,t,n){var s=this.get(e);return s?(Array.isArray(s)||(s=[s]),s.forEach(function(o){o.setData(t,n)}),this):this}},Ib={tint:0,alpha:1,revealUp:2,revealDown:3,revealLeft:4,revealRight:5},Xb={setGOFadeMode(e){return typeof e=="string"&&(e=Ib[e]),this.fadeMode=e,this},setGOFadeTime(e){return this.fadeTime=e,this},useTintFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===0)&&this.fadeTime>0&&e.setTint!==void 0},useAlphaFadeEffect(e){return(this.fadeMode===void 0||this.fadeMode===1)&&this.fadeTime>0&&e.setAlpha!==void 0},useRevealEffect(e){return this.fadeMode>=2&&this.fadeMode<=5&&this.fadeTime>0&&(e.preFX||e.postFX)},fadeBob(e,t,n,s){var o=e.gameObject;if(this.useTintFadeEffect(o))t!==void 0&&e.setProperty("tintGray",255*t),e.easeProperty({property:"tintGray",value:Math.floor(255*n),duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useAlphaFadeEffect(o))t!==void 0&&e.setProperty("alpha",t),e.easeProperty({property:"alpha",value:n,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s});else if(this.useRevealEffect(o)){var i;switch(Yn(o,"reveal"),this.fadeMode){case 2:i="revealUp";break;case 3:i="revealDown";break;case 4:i="revealLeft";break;case 5:i="revealRight"}t===void 0&&(t=0),o[i]=t,e.easeProperty({property:i,value:n,duration:this.fadeTime,delay:0,ease:"Linear",repeat:0,yoyo:!1,from:!1,complete:s}),e.getTweenTask(i).once("complete",function(){o[i]=null})}else s&&s(o);return this}};var bt=function(e){return e.displayWidth!==void 0?e.displayWidth:e.width},Tt=function(e){return e.displayHeight!==void 0?e.displayHeight:e.height};const Ld=Phaser.Geom.Rectangle,yi=Phaser.Math.Vector2,zb=Phaser.Math.RotateAround,Yb=Phaser.GameObjects.Container;var ou=function(e,t){if(t===void 0?t=new Ld:t===!0&&(uh===void 0&&(uh=new Ld),t=uh),e.getBounds&&!(e instanceof Yb))return e.getBounds(t);var n,s,o,i,r,h,a,u;if(e.parentContainer){var l=e.parentContainer.getBoundsTransformMatrix();Ds(e,t),l.transformPoint(t.x,t.y,t),n=t.x,s=t.y,_r(e,t),l.transformPoint(t.x,t.y,t),o=t.x,i=t.y,Ar(e,t),l.transformPoint(t.x,t.y,t),r=t.x,h=t.y,Il(e,t),l.transformPoint(t.x,t.y,t),a=t.x,u=t.y}else Ds(e,t),n=t.x,s=t.y,_r(e,t),o=t.x,i=t.y,Ar(e,t),r=t.x,h=t.y,Il(e,t),a=t.x,u=t.y;return t.x=Math.min(n,o,r,a),t.y=Math.min(s,i,h,u),t.width=Math.max(n,o,r,a)-t.x,t.height=Math.max(s,i,h,u)-t.y,t},uh=void 0,Ds=function(e,t,n){return t===void 0?t=new yi:t===!0&&(fe===void 0&&(fe=new yi),t=fe),e.getTopLeft?e.getTopLeft(t):(t.x=e.x-bt(e)*e.originX,t.y=e.y-Tt(e)*e.originY,Ir(e,t,n))},_r=function(e,t,n){return t===void 0?t=new yi:t===!0&&(fe===void 0&&(fe=new yi),t=fe),e.getTopRight?e.getTopRight(t):(t.x=e.x-bt(e)*e.originX+bt(e),t.y=e.y-Tt(e)*e.originY,Ir(e,t,n))},Ar=function(e,t,n){return t===void 0?t=new yi:t===!0&&(fe===void 0&&(fe=new yi),t=fe),e.getBottomLeft?e.getBottomLeft(t):(t.x=e.x-bt(e)*e.originX,t.y=e.y-Tt(e)*e.originY+Tt(e),Ir(e,t,n))},Il=function(e,t,n){return t===void 0?t=new yi:t===!0&&(fe===void 0&&(fe=new yi),t=fe),e.getBottomRight?e.getBottomRight(t):(t.x=e.x-bt(e)*e.originX+bt(e),t.y=e.y-Tt(e)*e.originY+Tt(e),Ir(e,t,n))},Dd=function(e,t,n){t===void 0?t=new yi:t===!0&&(fe===void 0&&(fe=new yi),t=fe);var s=bt(e),o=Tt(e);return t.x=e.x+s*(.5-e.originX),t.y=e.y+o*(.5-e.originY),Ir(e,t,n)},fe=void 0,Ir=function(e,t,n){return n===void 0&&(n=!1),e.rotation!==0&&zb(t,e.x,e.y,e.rotation),n&&e.parentContainer&&e.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t};const Qn=Phaser.Utils.Objects.GetValue;var Xg=function(e,t,n){var s,o,i,r,h;if(typeof n=="number"?s=n:(s=Qn(n,"color"),o=Qn(n,"lineWidth"),i=Qn(n,"fillColor"),r=Qn(n,"fillAlpha",1),h=Qn(n,"padding",0)),Array.isArray(e))for(var a=0,u=e.length;a<u;a++)Fd(e[a],t,s,o,i,r,h);else Fd(e,t,s,o,i,r,h)},Fd=function(e,t,n,s,o,i,r){if(e.getBounds||e.width!==void 0&&e.height!==void 0){n===void 0&&(n=16777215),s===void 0&&(s=1),o===void 0&&(o=null),i===void 0&&(i=1),r===void 0&&(r=0);var h=Ds(e,Js[0]);h.x-=r,h.y-=r;var a=_r(e,Js[1]);a.x+=r,a.y-=r;var u=Il(e,Js[2]);u.x+=r,u.y+=r;var l=Ar(e,Js[3]);l.x-=r,l.y+=r,o!==null&&t.fillStyle(o,i).fillPoints(Js,!0,!0),n!==null&&t.lineStyle(s,n).strokePoints(Js,!0,!0)}},Js=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],zg=function(e,t){var n,s=e.cameras;if(t===void 0)n=s.main;else switch(typeof t){case"string":n=s.getCamera(t);break;case"number":n=s.cameras[t];break;default:n=t}return n};const Nb={setCamera(e,t){var n=this.get(e);if(!n)return this;var s=zg(this.scene,t);return s?(n.gameObject.cameraFilter=4294967295^s.id,n.camera=s,this):this},getCamera(e){var t=this.get(e);return t?t.camera:null}};var Yg={drawGameObjectsBounds:function(e,t){return this.forEachGO(function(n){n.drawBounds?n.drawBounds(e,t):Xg(n,e,t)}),this}};Object.assign(Yg,Ob,Rb,Lb,Db,Fb,Bb,Xb,Nb);const Gb=Phaser.Cameras.Scene2D.BaseCamera,Ng=Phaser.Geom.Rectangle;var Xr=function(e,t,n){return t instanceof Gb||(n=t,t=void 0),n===void 0?n=new Ng:n===!0&&(n=Ub),t?e.scale.getViewPort(t,n):e.scale.getViewPort(n)},Ub=new Ng;const ve=Phaser.Utils.Objects.GetValue;class An{constructor(t,n){this.scene=t,this.BobClass=ve(n,"BobClass",au),this.setCreateGameObjectCallback(ve(n,"createGameObject"),ve(n,"createGameObjectScope")),this.setEventEmitter(ve(n,"eventEmitter",void 0)),this.setGameObjectDepth(ve(n,"depth",void 0));var s=ve(n,"fade",500);typeof s=="number"?(this.setGOFadeMode(),this.setGOFadeTime(s)):(this.setGOFadeMode(ve(s,"mode")),this.setGOFadeTime(ve(s,"time",500)));var o=ve(n,"viewportCoordinate",!1);o!==!1?(this.setViewportCoordinateEnable(ve(n,"enable",!0)),this.setViewport(ve(o,"viewport"))):this.setViewportCoordinateEnable(!1);var i=ve(n,"effectProperties",!1);this.setEffectPropertiesConfig(i),this.setSymbols(ve(n,"symbols")),this.bobs={},this.removedGOs=[],this._timeScale=1,this.name=ve(n,"name")}destroy(t){this.clear(!t),this.createGameObjectCallback=void 0,this.viewport=void 0,this.scene=void 0}set timeScale(t){if(this._timeScale!==t){this._timeScale=t;var n=this.bobs;for(var s in n)n[s].setTimeScale(t)}}get timeScale(){return this._timeScale}setTimeScale(t){return this.timeScale=t,this}setCreateGameObjectCallback(t,n){return this.createGameObjectCallback=t,this.createGameObjectScope=n,this}setGameObjectDepth(t){return this.gameObjectDepth=t,this}setViewportCoordinateEnable(t){return t===void 0&&(t=!0),this.viewportCoordinateEnable=t,this}setEffectPropertiesConfig(t){return t===void 0&&(t=!0),this.effectPropertiesConfig=t,this}setViewport(t){return t===void 0&&(t=Xr(this.scene,this.scene.cameras.main)),this.viewport=t,this}setSymbols(t){return this.symbols=t,this}get isEmpty(){return Br(this.bobs)&&this.removedGOs.length===0}}Object.assign(An.prototype,Fr,Yg);const Wb=Phaser.GameObjects.GameObject,Vb=Phaser.GameObjects.Layer;var xi=function(e){return e instanceof Wb||e instanceof Vb};const jb=Phaser.GameObjects.Layer;var Tr=function(e){return e instanceof jb},Gg=function(e){var t=e.displayList;return Tr(t)?t:null},ze=function(e,t){if(e.length<=1)return e;var n;t===void 0&&(t=!1);for(var s=0,o=e.length;s<o;s++){var i=e[s];if(i.displayList?n=i.displayList:i.parentContainer&&(n=i.parentContainer.list),n)break}return n||(n=i.scene.sys.displayList),n.depthSort&&(n.depthSort(),n=n.list),t?e.sort(function(r,h){return n.indexOf(h)-n.indexOf(r)}):e.sort(function(r,h){return n.indexOf(r)-n.indexOf(h)}),e};const Hb={getLayer(e){return this.getGO(e)},getLayers(e){return e===void 0&&(e=[]),this.forEachGO(function(t){e.push(t)}),ze(e,!1),e},addToLayer(e,t){var n=this.getGO(e);if(n){Array.isArray(t)||(t=[t]);for(var s=0,o=t.length;s<o;s++){var i=t[s];i.isRexContainerLite?i.addToLayer(n):n.add(i)}return n.scrollFactorX!==void 0&&i.setScrollFactor(n.scrollFactorX,n.scrollFactorY),this}console.warn(`[LayerManager] Can't get layer "${e}"`)},addToBottomLayer(e){var t=this.getLayers()[0];return this.addToLayer(t.goName,e),this},addToTopLayer(e){var t=this.getLayers(),n=t[t.length-1];return this.addToLayer(n.goName,e),this},removeFromLayer(e,t,n){var s=this.getGO(e);if(s)return n===void 0&&(n=!0),t.isRexContainerLite?t.removeFromLayer(s,n):(s.remove(t),n&&t.addToDisplayList()),this;console.warn(`[LayerManager] Can't get layer "${e}"`)},clearLayer(e,t){t===void 0&&(t=!0);var n=this.getGO(e);if(n){if(t)for(var s=n.getAll(),o=0,i=s.length;o<i;o++)s[o].destroy();else n.removeAll();return this}console.warn(`Can't get layer "${e}"`)}},Kb={setScrollFactor(e,t,n){n===void 0&&(n=t);var s=this.getLayer(e);if(!s)return this;s.scrollFactorX=t,s.scrollFactorY=n;for(var o=s.getAll(),i=0,r=o.length;i<r;i++)o[i].setScrollFactor(t,n);return this}},xo=Phaser.Utils.Array,Ug=function(e){var t;return e.parentContainer?(t=e.parentContainer.list).indexOf(this)===-1&&e.parentContainer.add(this):e.displayList&&(t=e.displayList.list).indexOf(this)===-1&&e.displayList.add(this),t?(xo.MoveBelow(t,this,e),this):this},Wg=function(e){var t;return e.parentContainer?(t=e.parentContainer.list).indexOf(this)===-1&&(e.isRexContainerLite?e.addToContainer(e.parentContainer):e.parentContainer.add(e)):e.displayList&&(t=e.displayList.list).indexOf(this)===-1&&(e.isRexContainerLite?e.addToLayer(e.displayList):e.displayList.add(e)),t?(xo.MoveAbove(t,this,e),this):this},ga={bringMeToTop:function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(xo.BringToTop(e,this),this):this},sendMeToBack:function(){var e;return this.parentContainer?e=this.parentContainer.list:this.displayList&&(e=this.displayList.list),e?(xo.SendToBack(e,this),this):this},moveMyDepthBelow:Ug,moveMyDepthAbove:Wg},qb={bringLayerToTop(e){var t=this.getLayer(e);return t?(ga.bringMeToTop.call(t),this):this},sendLayerToBack(e){var t=this.getLayer(e);return t?(ga.sendMeToBack.call(t),this):this},moveLayerBelow(e,t){if(e===t)return this;var n=this.getLayer(e),s=this.getLayer(t);return n&&s?(ga.moveMyDepthBelow.call(n,s),this):this},moveLayerAbove(e,t){if(e===t)return this;var n=this.getLayer(e),s=this.getLayer(t);return n&&s?(ga.moveMyDepthAbove.call(n,s),this):this}},$b=An.prototype.setCamera,Zb={setCamera(e,t){var n=zg(this.scene,t);return n||(n=this.scene.cameras.add(void 0,void 0,void 0,void 0,!1,t)),$b.call(this,e,n),this}};var Vg={};Object.assign(Vg,Hb,Kb,qb,Zb);const ma=Phaser.Utils.Objects.GetValue;class jg extends An{constructor(t,n){n===void 0?n={}:Array.isArray(n)&&(n={layers:n}),n.hasOwnProperty("fade")||(n.fade=0),n.viewportCoordinate=!1,super(t,n);var s=ma(n,"rootLayer");this.setRootLayer(s);var o=ma(n,"layers");if(o)for(var i=0,r=o.length;i<r;i++){var h=o[i];if(typeof h=="string")this.add(h);else{var a=h.name;this.add(a);var u=h.scrollFactor,l=ma(h,"scrollFactorX",u),d=ma(h,"scrollFactorY",u);l!==void 0&&this.setScrollFactor(a,l,d),this.setCamera(a,h.cameraName)}}}setCreateGameObjectCallback(t,n){return t||(t=Jb),super.setCreateGameObjectCallback(t,n),this}setRootLayer(t){if(t===this.rootLayer)return this;var n=this.getAllGO();return t?t.add(n):this.scene.displayList.add(n),this.rootLayer=t,this}addGO(t,n){return super.addGO(t,n),n.name=t,this.rootLayer&&this.rootLayer.add(n),this}get(t,n){if(xi(t)){var s=Gg(t);if(!s||!(t=s.name))return}return super.get(t,n)}}var Jb=function(e,t){var n=e.add.layer();return t!==void 0&&n.setDepth(t),n};Object.assign(jg.prototype,Vg);const Qb=Phaser.Sound.BaseSound;var hu=function(e){return e instanceof Qb};const Bd=Phaser.Utils.Objects.GetValue,Id=Phaser.Utils.Objects.GetAdvancedValue,t1=Phaser.Math.Linear;let Hg=class extends Xn{constructor(e,t,n){hu(e)&&(n=t,t=e,e=void 0),t.active=!0,t.scene=e,t.game=t.manager.game,super(t,n),this.volume={},this.resetFromJSON(n)}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(Bd(e,"mode",0)),this.setEnable(Bd(e,"enable",!0)),this.setVolumeRange(Id(e,"volume.start",this.parent.volume),Id(e,"volume.end",0)),this}setMode(e){return typeof e=="string"&&(e=e1[e]),this.mode=e,this}setVolumeRange(e,t){return this.volume.start=e,this.volume.end=t,this}start(){return this.timer.isRunning||(this.parent.setVolume(this.volume.start),this.timer.setDelay(this.delay).setDuration(this.duration),super.start()),this}updateTarget(e,t){e.volume=t1(this.volume.start,this.volume.end,t.t)}complete(){switch(super.complete(),this.mode){case 1:this.parent.stop();break;case 2:this.parent.stop(),this.parent.destroy()}return this}};const e1={stop:1,destroy:2};var Bo=function(e,t,n,s,o){hu(e)&&(o=s,s=n,n=t,t=e,e=void 0),s===void 0&&(s=1),o===void 0&&(o=0);var i,r={mode:0,volume:{start:o,end:s},duration:n};return typeof t=="string"&&(t=e.sys.sound.add(t)),t.hasOwnProperty("_fade")?(i=t._fade).stop().resetFromJSON(r):(i=new Hg(e,t,r),t._fade=i),i.start(),t.isPlaying||t.setVolume(o).play(),t},Rn=function(e,t,n,s){hu(e)&&(s=n,n=t,t=e,e=void 0),s===void 0&&(s=!0);var o,i={mode:s?2:1,volume:{start:t.volume,end:0},duration:n};return t.hasOwnProperty("_fade")?(o=t._fade).stop().resetFromJSON(i):(o=new Hg(e,t,i),t._fade=o),o.start(),t.isPlaying||t.play(),t};const tr=Phaser.Utils.Objects.GetValue,i1={setBackgroundMusicLoop(e){return e===void 0&&(e=!0),this.backgroundMusicLoop=e,this},setBackgroundMusicFadeTime(e){return this.backgroundMusicFadeTime=e,this},getBackgroundMusic(){return this.backgroundMusic},setCurrentBackgroundMusic(e){return this.backgroundMusic=e,e&&(e.once("complete",function(){this.backgroundMusic===e&&(this.backgroundMusic.destroy(),this.backgroundMusic=void 0)},this).once("destroy",function(){this.backgroundMusic===e&&(this.backgroundMusic=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic&&this.backgroundMusic.key===e)return this;this.stopBackgroundMusic();var n=this.sound.add(e,{loop:tr(t,"loop",this.backgroundMusicLoop),mute:tr(t,"mute",this.backgroundMusicMute),volume:tr(t,"volume",this.backgroundMusicVolume),detune:tr(t,"detune",0),rate:tr(t,"rate",1)});return this.setCurrentBackgroundMusic(n),this.backgroundMusicFadeTime>0&&this.fadeInBackgroundMusic(this.backgroundMusicFadeTime),this},pauseBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.pause(),this},resumeBackgroundMusic(){return this.backgroundMusic&&this.backgroundMusic.resume(),this},stopBackgroundMusic(){return this.backgroundMusic&&(this.backgroundMusicFadeTime>0?this.fadeOutBackgroundMusic(this.backgroundMusicFadeTime,!0):(this.backgroundMusic.stop(),this.backgroundMusic.destroy(),this.backgroundMusic=void 0)),this},fadeInBackgroundMusic(e){return this.backgroundMusic&&Bo(this.backgroundMusic,e,this.backgroundMusicVolume,0),this},fadeOutBackgroundMusic(e,t){return this.backgroundMusic&&Rn(this.backgroundMusic,e,t),this},crossFadeBackgroundMusic(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var n=this.backgroundMusicFadeTime;return this.backgroundMusicFadeTime=0,this.fadeOutBackgroundMusic(t,!0).playBackgroundMusic(e).fadeInBackgroundMusic(t),this.backgroundMusicFadeTime=n,this},setBackgroundMusicMute(e){return e===void 0&&(e=!0),this.backgroundMusicMute=e,this},setBackgroundMusicVolume(e){return this.backgroundMusicVolume=e,this},setBackgroundMusicRate(e){return this.backgroundMusic&&this.backgroundMusic.setRate(e),this},setBackgroundMusicDetune(e){return this.backgroundMusic&&this.backgroundMusic.setDetune(e),this}},er=Phaser.Utils.Objects.GetValue,s1={setBackgroundMusic2Loop(e){return e===void 0&&(e=!0),this.backgroundMusic2Loop=e,this},setBackgroundMusic2FadeTime(e){return this.backgroundMusic2FadeTime=e,this},getBackgroundMusic2(){return this.backgroundMusic2},setCurrentBackgroundMusic2(e){return this.backgroundMusic2=e,e&&(e.once("complete",function(){this.backgroundMusic2===e&&(this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)},this).once("destroy",function(){this.backgroundMusic2===e&&(this.backgroundMusic2=void 0)},this),e.isPlaying||e.play()),this},playBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;if(this.backgroundMusic2&&this.backgroundMusic2.key===e)return this;this.stopBackgroundMusic2();var n=this.sound.add(e,{loop:er(t,"loop",this.backgroundMusicLoop),mute:er(t,"mute",this.backgroundMusic2Mute),volume:er(t,"volume",this.backgroundMusic2Volume),detune:er(t,"detune",0),rate:er(t,"rate",1)});return this.setCurrentBackgroundMusic2(n),this.backgroundMusic2FadeTime>0&&this.fadeInBackgroundMusic2(this.backgroundMusic2FadeTime),this},pauseBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.pause(),this},resumeBackgroundMusic2(){return this.backgroundMusic2&&this.backgroundMusic2.resume(),this},stopBackgroundMusic2(){return this.backgroundMusic2&&(this.backgroundMusic2FadeTime>0?this.fadeOutBackgroundMusic2(this.backgroundMusic2FadeTime,!0):(this.backgroundMusic2.stop(),this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0)),this},fadeInBackgroundMusic2(e){return this.backgroundMusic2&&Bo(this.backgroundMusic2,e,this.backgroundMusic2Volume,0),this},fadeOutBackgroundMusic2(e,t){return this.backgroundMusic2&&Rn(this.backgroundMusic2,e,t),this},crossFadeBackgroundMusic2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var n=this.backgroundMusic2FadeTime;return this.backgroundMusic2FadeTime=0,this.fadeOutBackgroundMusic2(t,!0).playBackgroundMusic2(e).fadeInBackgroundMusic2(t),this.backgroundMusic2FadeTime=n,this},setBackgroundMusic2Mute(e){return e===void 0&&(e=!0),this.backgroundMusic2Mute=e,this},setBackgroundMusic2Volume(e){return this.backgroundMusic2Volume=e,this},setBackgroundMusic2Rate(e){return this.backgroundMusic2&&this.backgroundMusic2.setRate(e),this},setBackgroundMusic2Detune(e){return this.backgroundMusic2&&this.backgroundMusic2.setDetune(e),this}},Xd=Phaser.Utils.Array.Remove,va=Phaser.Utils.Objects.GetValue,n1={getSoundEffects(){return this.soundEffects},getLastSoundEffect(){return this.soundEffects[this.soundEffects.length-1]},playSoundEffect(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var n=this.sound.add(e,{mute:va(t,"mute",this.soundEffectsMute),volume:va(t,"volume",this.soundEffectsVolume),detune:va(t,"detune",0),rate:va(t,"rate",1)});return this.soundEffects.push(n),n.once("complete",function(){n.destroy(),this.sound&&Xd(this.soundEffects,n)},this).once("destroy",function(){this.sound&&Xd(this.soundEffects,n)},this).play(),this},stopAllSoundEffects(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect(e){var t=this.getLastSoundEffect();return t&&Bo(t,e,this.soundEffectsVolume,0),this},fadeOutSoundEffect(e,t){var n=this.getLastSoundEffect();return n&&Rn(n,e,t),this},fadeOutAllSoundEffects(e,t){for(var n=this.soundEffects.length-1;n>=0;n--)Rn(this.soundEffects[n],e,t);return this},setSoundEffectMute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var n=this.getLastSoundEffect();n&&n.setMute(e)}else this.soundEffectsMute=e;return this},setSoundEffectVolume(e,t){if(t===void 0&&(t=!1),t){var n=this.getLastSoundEffect();n&&n.setVolume(e)}else this.soundEffectsVolume=e;return this},setSoundEffectDetune(e,t){var n;t===void 0&&(t=!1);for(var s=0,o=(n=t?[this.getLastSoundEffect()]:this.soundEffects).length;s<o;s++)n[s].setDetune(e);return this},setSoundEffectRate(e,t){var n;t===void 0&&(t=!1);for(var s=0,o=(n=t?[this.getLastSoundEffect()]:this.soundEffects).length;s<o;s++)n[s].setRate(e);return this}},zd=Phaser.Utils.Array.Remove,ya=Phaser.Utils.Objects.GetValue,r1={getSoundEffects2(){return this.soundEffects2},getLastSoundEffect2(){return this.soundEffects2[this.soundEffects2.length-1]},playSoundEffect2(e,t){if(!this.hasAudio(e))return console.error(`[Sound manager] Audio key'${e}' is not existed`),this;var n=this.sound.add(e,{mute:ya(t,"mute",this.soundEffects2Mute),volume:ya(t,"volume",this.soundEffects2Volume),detune:ya(t,"detune",0),rate:ya(t,"rate",1)});return this.soundEffects2.push(n),n.once("complete",function(){n.destroy(),this.sound&&zd(this.soundEffects2,n)},this).once("destroy",function(){this.sound&&zd(this.soundEffects2,n)},this).play(),this},stopAllSoundEffects2(){for(var e=this.soundEffects.length-1;e>=0;e--){var t=this.soundEffects[e];t.stop(),t.destroy()}return this},fadeInSoundEffect2(e){var t=this.getLastSoundEffect2();return t&&Bo(t,e,this.soundEffects2Volume,0),this},fadeOutSoundEffect2(e,t){var n=this.getLastSoundEffect2();return n&&Rn(n,e,t),this},fadeOutAllSoundEffects2(e,t){for(var n=this.soundEffects2.length-1;n>=0;n--)Rn(this.soundEffects2[n],e,t);return this},setSoundEffect2Mute(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=!1),t){var n=this.getLastSoundEffect2();n&&n.setMute(e)}else this.soundEffects2Mute=e;return this},setSoundEffect2Volume(e,t){if(t===void 0&&(t=!1),t){var n=this.getLastSoundEffect2();n&&n.setVolume(e)}else this.soundEffects2Volume=e;return this},setSoundEffect2Detune(e,t){var n;t===void 0&&(t=!1);for(var s=0,o=(n=t?[this.getLastSoundEffect2()]:this.soundEffects2).length;s<o;s++)n[s].setDetune(e);return this},setSoundEffect2Rate(e,t){var n;t===void 0&&(t=!1);for(var s=0,o=(n=t?[this.getLastSoundEffect2()]:this.soundEffects2).length;s<o;s++)n[s].setRate(e);return this}};var Kg={hasAudio:function(e){return this.sound.game.cache.audio.has(e)}};Object.assign(Kg,i1,s1,n1,r1);const Ae=Phaser.Utils.Objects.GetValue;class qg{constructor(t,n){this.sound=function(i){return Fs(i)?i.sys.sound:i.sound}(t),this.backgroundMusic=void 0,this._backgroundMusicVolume=Ae(n,"bgm.volume",1),this._backgroundMusicMute=Ae(n,"bgm.mute",!1),this.setBackgroundMusicLoop(Ae(n,"bgm.loop",!0)),this.setBackgroundMusicFadeTime(Ae(n,"bgm.fade",500)),this.backgroundMusic2=void 0,this._backgroundMusic2Volume=Ae(n,"bgm2.volume",1),this._backgroundMusic2Mute=Ae(n,"bgm2.mute",!1),this.setBackgroundMusic2Loop(Ae(n,"bgm2.loop",!0)),this.setBackgroundMusic2FadeTime(Ae(n,"bgm2.fade",500)),this.soundEffects=[],this._soundEffectsVolume=Ae(n,"soundEffect.volume",1),this.soundEffects2=[],this._soundEffects2Volume=Ae(n,"soundEffect2.volume",1);var s=Ae(n,"bgm.initial",void 0);s&&this.setCurrentBackgroundMusic(s);var o=Ae(n,"bgm2.initial",void 0);o&&this.setCurrentBackgroundMusic2(o)}destroy(){if(this.backgroundMusic&&this.backgroundMusic.destroy(),this.backgroundMusic=void 0,this.backgroundMusic2&&this.backgroundMusic2.destroy(),this.backgroundMusic2=void 0,this.soundEffects.length)for(var t=this.soundEffects.length-1;t>=0;t--)this.soundEffects[t].destroy();if(this.soundEffects.length=0,this.soundEffects2.length)for(t=this.soundEffects2.length-1;t>=0;t--)this.soundEffects2[t].destroy();return this.soundEffects2.length=0,this.sound=void 0,this}get backgroundMusicMute(){return this._backgroundMusicMute}set backgroundMusicMute(t){this._backgroundMusicMute=t,this.backgroundMusic&&this.backgroundMusic.setMute(mute)}get backgroundMusicVolume(){return this._backgroundMusicVolume}set backgroundMusicVolume(t){this._backgroundMusicVolume=t,this.backgroundMusic&&this.backgroundMusic.setVolume(t)}get backgroundMusic2Mute(){return this._backgroundMusic2Mute}set backgroundMusic2Mute(t){this._backgroundMusic2Mute=t,this.backgroundMusic2&&this.backgroundMusic2.setMute(mute)}get backgroundMusic2Volume(){return this._backgroundMusic2Volume}set backgroundMusic2Volume(t){this._backgroundMusic2Volume=t,this.backgroundMusic2&&this.backgroundMusic2.setVolume(t)}get soundEffectsMute(){return this._soundEffectsMute}set soundEffectsMute(t){this._soundEffectsMute=t;for(var n=this.soundEffects,s=0,o=n.length;s<o;s++)n[s].setMute(t)}get soundEffectsVolume(){return this._soundEffectsVolume}set soundEffectsVolume(t){this._soundEffectsVolume=t;for(var n=this.soundEffects,s=0,o=n.length;s<o;s++)n[s].setVolume(t)}get soundEffects2Mute(){return this._soundEffects2Mute}set soundEffects2Mute(t){this._soundEffects2Mute=t;for(var n=this.soundEffects,s=0,o=soundEffects2.length;s<o;s++)n[s].setMute(t)}get soundEffects2Volume(){return this._soundEffects2Volume}set soundEffects2Volume(t){this._soundEffects2Volume=t;for(var n=this.soundEffects2,s=0,o=n.length;s<o;s++)n[s].setVolume(t)}}Object.assign(qg.prototype,Kg);const dh=Phaser.Utils.Objects.GetValue;class a1 extends Ro{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.isRunning=dh(t,"isRunning",!1),this.timeScale=dh(t,"timeScale",1),this.now=dh(t,"now",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,now:this.now,tickingMode:this.tickingMode}}start(t){return t===void 0&&(t=0),this.delta=0,this.now=t,super.start(),this}seek(t){return this.now=t,this}setTimeScale(t){return this.timeScale=t,this}tick(t){return t*=this.timeScale,this.now+=t,this.delta=t,this.emit("update",this.now,this.delta),this}}class $g extends a1{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}update(t,n){return this.isRunning&&this.timeScale!==0?(this.tick(n),this):this}}var pe=function(e,t){return t===void 0&&(t=.5),e<=t?e/=t:e=1-(e-t)/(1-t),e};const Yd=Phaser.Math.Clamp;class o1{constructor(t,n){this.setTimeline(t).reset(n)}setTimeline(t){return this.timeline=t,this}setName(t){return this.name=t,this}setCallbacks(t,n,s,o){return this.target=t,this.onStart=n,this.onProgress=s,this.onComplete=o,this}setDuration(t,n){return n===void 0&&(n=!1),this.duration=t,this.remainder=t,this.t=0,this.yoyo=n,this}setPaused(t){return this.isPaused=t,this}pause(){return this.isPaused=!0,this}resume(){return this.isPaused=!1,this}setRemoved(t){return this.removed=t,this}remove(){return this.removed=!0,this}seek(t){return this.remainder=this.duration*(1-t),this}reset(t){return this.setName(t.name).setDuration(t.duration,t.yoyo).setCallbacks(t.target,t.onStart,t.onProgress,t.onComplete).setPaused(!1).setRemoved(!1),this}onFree(){this.setTimeline().setCallbacks()}getProgress(){var t=1-this.remainder/this.duration;return t=Yd(t,0,1),this.yoyo&&(t=pe(t)),t}setProgress(t){t=Yd(t,0,1),this.remainder=this.duration*(1-t)}runCallback(t){t&&t(this.target,this.t,this)}update(t,n){if(this.removed)return!0;if(this.isPaused)return!1;this.remainder-=n,this.t=this.getProgress(),this.runCallback(this.onProgress);var s=this.remainder<=0;return s&&this.runCallback(this.onComplete),s}}const h1=Phaser.Utils.Objects.GetValue,l1=new class extends mi{allocate(){return this.pop()}free(e){e.onFree(),this.push(e)}freeMultiple(e){for(var t=0,n=e.length;t<n;t++)this.free(e[t]);return this}};class u1 extends $g{constructor(t,n){super(t,n),this.addedTimers=[],this.timers=[],this.timerPool=h1(n,"pool",l1)}shutdown(){this.isShutdown||(this.timerPool.freeMultiple(this.addedTimers).freeMultiple(this.timers),this.timerPool=void 0,this.addedTimers=void 0,this.timers=void 0,super.shutdown())}addTimer(t){var n=this.timerPool.allocate();return n?n.setTimeline(this).reset(t):n=new o1(this,t),this.addedTimers.push(n),n.runCallback(n.onStart),this.isRunning||this.start(),n}delayCall(t,n,s,o){return this.addTimer({duration:t,onComplete:function(i,r,h){s===void 0&&(s=[]),s.push(h),n.apply(o,s)}})}delayEvent(t,n){this.removeDelayEvent(n);var s=this.delayCall(t,function(){this.removeDelayEvent(n),this.emit(n)},[],this);return this.once(`_remove.${n}`,function(){s.remove(),s=void 0}),this}removeDelayEvent(t){return this.emit(`_remove.${t}`),this}getTimers(t){for(var n=[],s=[this.addedTimers,this.timers],o=0,i=s.length;o<i;o++)for(var r=s[o],h=0,a=r.length;h<a;h++){var u=r[h];u.name===t&&n.push(u)}return n}update(t,n){if(super.update(t,n),this.isRunning){this.timers.push(...this.addedTimers),this.addedTimers.length=0;for(var s=[],o=0,i=this.timers.length;o<i;o++){var r=this.timers[o];r.update(this.now,this.delta)?this.timerPool.free(r):s.push(r)}this.timers=s,this.timers.length===0&&this.addedTimers.length===0&&this.complete()}}}let Zg=class{constructor(e){e||(this.setEventEmitter(!0),e=this),this.parent=e,this.waitId=0,this.waitCompleteEventName="_wait.complete",this.removeWaitEventsEventName="_remove.wait"}destroy(){this.removeWaitEvents(),this.clearWaitCompleteCallbacks(),this.parent=null}waitEvent(e,t,n){var s=this.getWaitCompleteTriggerCallback(n);return e.once(t,s,this),this.parent.once(this.removeWaitEventsEventName,function(){e.off(t,s,this)}),this.parent}getWaitCompleteTriggerCallback(e){e===void 0&&(e=!0);var t=this.waitId,n=this,s=function(){t<n.waitId||(n.waitId++,n.removeWaitEvents(),n.parent.emit(n.waitCompleteEventName))};return e?function(){var o,i,r;o=n.parent,i=s,(r=In(o)).time.delayedCall(0,function(){r.sys.events.once("preupdate",function(){i.call(void 0,void 0)})})}:s}removeWaitEvents(){return this.parent.emit(this.removeWaitEventsEventName),this}addWaitCompleteCallback(e,t){return this.parent.on(this.waitCompleteEventName,e,t),this}clearWaitCompleteCallbacks(){return this.parent.off(this.waitCompleteEventName),this}};Object.assign(Zg.prototype,Fr);const d1={waitTime(e){var t=this.parent.timeline;return t.delayEvent(e,"delay"),this.parent.once(this.removeWaitEventsEventName,function(){t.removeDelayEvent("delay")}),this.waitEvent(t,"delay")}},c1={setClickTarget(e){return this.clickTarget=e,e?Fs(e)?this.touchEE=e.input:this.touchEE=e.setInteractive():this.touchEE=null,this},clearClickTarget(){return this.setClickTarget(),this},setClickShortcutKeys(e){return this.clickShortcutKeys=e,this},clearClickShortcutKeys(){return this.setClickShortcutKeys(),this},waitClick(){var e=this.touchEE,t=this.clickShortcutKeys;return e||t?(e&&this.waitEvent(e,"pointerdown"),t&&this.waitKeyDown(t)):this.waitTime(0),this},waitKeyDown(e){var t,n=this.scene.input.keyboard;if(typeof e=="string"){if(e.indexOf("|")===-1)return this.waitEvent(n,`keydown-${e.toUpperCase()}`);for(var s=(t="(?<!\\\\)\\|",e.split(new RegExp(t,"g")).map(function(r){return r.replace("\\|","|")})),o=0,i=s.length;o<i;o++)this.waitEvent(n,`keydown-${s[o].toUpperCase()}`);return this.parent}return this.waitEvent(n,"keydown")}},f1={waitGameObjectTweenComplete(e,t,n){var s=this.parent.getGameObjectTweenTask(e,t,n);return s?this.waitEvent(s,"complete"):this.waitTime(0)},waitGameObjectDataFlag(e,t,n,s){var o=this.parent.getGameObject(e,t);if(!o)return this.waitTime(0);if(o.getData(n)===s)return this.waitTime(0);var i=`changedata-${n}`,r=function(h,a,u){(a=!!a)===s&&h.emit("_dataFlagMatch")};return o.on(i,r),this.parent.once(this.removeWaitEventsEventName,function(){o.off(i,r)}),this.waitEvent(o,"_dataFlagMatch")},waitGameObjectDestroy(e,t){var n=this.parent.getGameObject(e,t);return n?this.waitEvent(n,"destroy"):this.waitTime(0)},waitGameObjectManagerEmpty(e){if(e){var t=this.parent.getGameObjectManager(e);return t?this.waitEvent(t,"empty"):this.waitTime(0)}var n=this.parent.gameObjectManagers,s=!1;for(var o in n)s=!0,this.waitEvent(n[o],"empty");return s?this.parent:this.waitTime(0)}},p1={setCameraTarget(e){return this.cameraTarget=e,this},clearCameraTarget(){return this.setCameraTarget(),this},waitCameraEffectComplete(e,t){var n,s,o;if(!(n=t?this.scene.cameras.getCamera(t):this.cameraTarget))return this.waitTime(0);switch(e){case"camera.fadein":s=n.fadeEffect,o="camerafadeincomplete";break;case"camera.fadeout":s=n.fadeEffect,o="camerafadeoutcomplete";break;case"camera.flash":s=n.flashEffect,o="cameraflashcomplete";break;case"camera.shake":s=n.shakeEffect,o="camerashakecomplete";break;case"camera.zoom":s=n.zoomEffect,o="camerazoomcomplete";break;case"camera.rotate":s=n.rotateToEffect,o="camerarotatecomplete";break;case"camera.scroll":s=n.panEffect,o="camerapancomplete"}return s.isRunning?this.waitEvent(n,o):this.waitTime(0)}},g1={waitSoundEffectComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitSoundEffect2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getLastSoundEffect2();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusicComplete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic();return e?this.waitEvent(e,"complete"):this.waitTime(0)},waitBackgroundMusic2Complete(){if(!this.parent.soundManager)return this.waitTime(0);var e=this.parent.soundManager.getBackgroundMusic2();return e?this.waitEvent(e,"complete"):this.waitTime(0)}};var Jg={waitAny:function(e){if(!e)return this.waitTime(0);var t=!1;for(var n in e)switch(n){case"time":t=!0,this.waitTime(e.time);break;case"click":t=!0,this.waitClick();break;case"key":t=!0,this.waitKeyDown(e.key);break;case"bgm":t=!0,this.waitBackgroundMusicComplete();break;case"bgm2":t=!0,this.waitBackgroundMusic2Complete();break;case"se":t=!0,this.waitSoundEffectComplete();break;case"se2":t=!0,this.waitSoundEffect2Complete();break;case"camera":t=!0,this.waitCameraEffectComplete(`camera.${e.camera.toLowerCase()}`,e.cameraName);break;default:var s=n.split(".");if(s.length===2){var o=s[0],i=s[1],r=this.parent.getGameObjectManager(void 0,o);if(!r)continue;if(i==="destroy")return this.waitGameObjectDestroy(void 0,o);if(typeof r.getProperty(o,i)=="number"){t=!0,this.waitGameObjectTweenComplete(void 0,o,i);continue}var h=i,a=h.startsWith("!");if(a&&(h=h.substring(1)),r.hasData(o,i)){t=!0,this.waitGameObjectDataFlag(void 0,o,h,!a);continue}this.waitEvent(gameObject,i);continue}s.length}return t||this.waitTime(0),this.parent}};Object.assign(Jg,d1,c1,f1,p1,g1);class Qg extends Zg{constructor(t,n){super(t),this.waitCompleteEventName=xt(n,"completeEventName",this.waitCompleteEventName),this.setClickTarget(xt(n,"clickTarget",this.scene)),this.setClickShortcutKeys(xt(n,"clickShortcutKeys",void 0)),this.setCameraTarget(xt(n,"camera",this.scene.cameras.main))}get clickTarget(){return this.parent.clickTarget}set clickTarget(t){this.parent.clickTarget=t}get clickShortcutKeys(){return this.parent.clickShortcutKeys}set clickShortcutKeys(t){this.parent.clickShortcutKeys=t}get cameraTarget(){return this.parent.cameraTarget}set cameraTarget(t){this.parent.cameraTarget=t}destroy(){this.clearClickTarget(),this.clearClickShortcutKeys(),this.clearCameraTarget(),super.destroy()}get scene(){return this.parent.managersScene}}Object.assign(Qg.prototype,Jg);const xa=Phaser.Utils.Objects.GetValue;var m1=function(e,t){this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=e,this.gameObjectManagers={};var n=xa(t,"layers",!1);if(n!==!1){var s=new jg(e,{name:"LAYER",layers:n,rootLayer:xa(t,"rootLayer",void 0),depth:xa(t,"layerDepth",void 0)});this.addGameObjectManager(s),this.layerManager=s}var o=xa(t,"sounds");return o!==!1&&(this.soundManager=new qg(e,o)),this.timeline=new u1(this),this.waitEventManager=new Qg(this,t),this},v1=function(e){for(var t in this.timeline.timeScale=e,this.gameObjectManagers)this.gameObjectManagers[t].setTimeScale(e);return this},y1=function(){return this.timeline.timeScale},x1=function(e){for(var t in this.waitEventManager.destroy(),this.waitEventManager=void 0,delete this.gameObjectManagers.layer,this.gameObjectManagers)this.gameObjectManagers[t].destroy(e),delete this.gameObjectManagers[t];this.layerManager&&(this.layerManager.destroy(e),this.layerManager=void 0),this.soundManager&&(this.soundManager.destroy(),this.soundManager=void 0),this.timeline&&(this.timeline.destroy(),this.timeline=void 0),this.clickTarget=void 0,this.clickShortcutKeys=void 0,this.cameraTarget=void 0,this.managersScene=void 0};const tm={addGameObjectManager(e,t){var n;return e instanceof An?n=e:typeof e=="string"?(n=t).name=e:(e===void 0&&(e={}),t===void 0&&(t=An),e.createGameObjectScope||(e.createGameObjectScope=this),n=new t(this.managersScene,e)),this.gameObjectManagers[n.name]=n,this},getGameObjectManager(e,t){if(e)return this.gameObjectManagers[e];for(var e in t&&t.charAt(0)==="!"&&(t=t.substring(1)),this.gameObjectManagers){var n;if((n=this.gameObjectManagers[e]).has(t))return n}},getGameObjectManagerNames(){var e=[];for(var t in this.gameObjectManagers)e.push(t);return e},getGameObjectManagerName(e){var t=this.getGameObjectManager(void 0,e);if(t)return t.name},hasGameObjectMananger(e){return e in this.gameObjectManagers}},b1={createGameObject(e,t,...n){return this.getGameObjectManager(e,t).add(t,...n),this},destroyGameObject(e,t){var n=this.getGameObjectManager(e,t);return t===void 0?n.removeAll():n.remove(t),this},hasGameObject(e,t){return!!this.getGameObjectManager(e,t)},callGameObjectMethod(e,t,n,...s){return this.getGameObjectManager(e,t).call(t,n,...s),this},setGameObjectProperty(e,t,n,s){return this.getGameObjectManager(e,t).setProperty(t,n,s),this},easeGameObjectProperty(e,t,n){return this.getGameObjectManager(e,t).easeProperty(t,n),this},getGameObjectTweenTask(e,t,n){return this.getGameObjectManager(e,t).getTweenTask(t,n)},getGameObject(e,t,n){var s=this.getGameObjectManager(e,t);if(!s)return n;if(typeof t=="string")return s.getGO(t);n===void 0&&(n=[]);var o=t;o===void 0&&(o=Object.keys(s.bobs));for(var i=Array.isArray(n),r=0,h=o.length;r<h;r++){t=o[r];var a=s.getGO(t);a&&(i?n.push(a):n[t]=a)}return n},addGameObject(e,t,n){var s=this.getGameObjectManager(e,t);if(typeof t=="string")s.addGO(t,n);else{var o=t;for(t in o)s.addGO(t,o[t])}return this},drawGameObjectsBounds(e,t,n){e instanceof Phaser.GameObjects.Graphics&&(n=t,t=e,e=void 0),e===void 0&&(e=this.getGameObjectManagerNames()),Array.isArray(e)||(e=[e]);for(var s=0,o=e.length;s<o;s++)this.getGameObjectManager(e[s]).drawGameObjectsBounds(t,n);return this}};var em={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}function o(a,u,l){this.fn=a,this.context=u,this.once=l||!1}function i(a,u,l,d,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var p=new o(l,d||a,c),f=n?n+u:u;return a._events[f]?a._events[f].fn?a._events[f]=[a._events[f],p]:a._events[f].push(p):(a._events[f]=p,a._eventsCount++),a}function r(a,u){--a._eventsCount===0?a._events=new s:delete a._events[u]}function h(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1)),h.prototype.eventNames=function(){var a,u,l=[];if(this._eventsCount===0)return l;for(u in a=this._events)t.call(a,u)&&l.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(a)):l},h.prototype.listeners=function(a){var u=n?n+a:a,l=this._events[u];if(!l)return[];if(l.fn)return[l.fn];for(var d=0,c=l.length,p=new Array(c);d<c;d++)p[d]=l[d].fn;return p},h.prototype.listenerCount=function(a){var u=n?n+a:a,l=this._events[u];return l?l.fn?1:l.length:0},h.prototype.emit=function(a,u,l,d,c,p){var f=n?n+a:a;if(!this._events[f])return!1;var v,g,y=this._events[f],m=arguments.length;if(y.fn){switch(y.once&&this.removeListener(a,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,l),!0;case 4:return y.fn.call(y.context,u,l,d),!0;case 5:return y.fn.call(y.context,u,l,d,c),!0;case 6:return y.fn.call(y.context,u,l,d,c,p),!0}for(g=1,v=new Array(m-1);g<m;g++)v[g-1]=arguments[g];y.fn.apply(y.context,v)}else{var x,b=y.length;for(g=0;g<b;g++)switch(y[g].once&&this.removeListener(a,y[g].fn,void 0,!0),m){case 1:y[g].fn.call(y[g].context);break;case 2:y[g].fn.call(y[g].context,u);break;case 3:y[g].fn.call(y[g].context,u,l);break;case 4:y[g].fn.call(y[g].context,u,l,d);break;default:if(!v)for(x=1,v=new Array(m-1);x<m;x++)v[x-1]=arguments[x];y[g].fn.apply(y[g].context,v)}}return!0},h.prototype.on=function(a,u,l){return i(this,a,u,l,!1)},h.prototype.once=function(a,u,l){return i(this,a,u,l,!0)},h.prototype.removeListener=function(a,u,l,d){var c=n?n+a:a;if(!this._events[c])return this;if(!u)return r(this,c),this;var p=this._events[c];if(p.fn)p.fn!==u||d&&!p.once||l&&p.context!==l||r(this,c);else{for(var f=0,v=[],g=p.length;f<g;f++)(p[f].fn!==u||d&&!p[f].once||l&&p[f].context!==l)&&v.push(p[f]);v.length?this._events[c]=v.length===1?v[0]:v:r(this,c)}return this},h.prototype.removeAllListeners=function(a){var u;return a?(u=n?n+a:a,this._events[u]&&r(this,u)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,e.exports=h})(em);const T1=tg(em.exports);class im extends T1{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}const sm={setEventEmitter(e,t){return t===void 0&&(t=im),this._privateEE=e===!0||e===void 0,this._eventEmitter=this._privateEE?new t:e,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(e){return this._eventEmitter&&e&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};var w1=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,S1=/^0x[0-9A-F]+$/i,lu=function(e){if(typeof e!="string")return e;if(e==="")e=null;else if(w1.test(e))e=parseFloat(e);else if(S1.test(e))e=parseInt(e,16);else switch(e){case"false":e=!1;break;case"true":e=!0;break;case"null":e=null;break;case"undefined":e=void 0}return e};let nm=class{constructor(e){this.setEventEmitter(xt(e,"eventEmitter",void 0)),this.setValueConverter(xt(e,"valueConvert",!0)),this.setLoopEnable(xt(e,"loop",!1)),this.setMultipleLinesTagEnable(xt(e,"multipleLinesTag",!1));var t=xt(e,"delimiters","<>");this.setDelimiters(t[0],t[1]),this.setTranslateTagNameCallback(xt(e,"translateTagNameCallback")),this.isRunning=!1,this.isPaused=!1,this.skipEventFlag=!1,this.justCompleted=!1,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}setMultipleLinesTagEnable(e){return e===void 0&&(e=!0),this.multipleLinesTagEnable=e,this}setDelimiters(e,t){t===void 0&&(t=e[1],e=e[0]),this.delimiterLeft=e,this.delimiterRight=t,e=_n(this.delimiterLeft),t=_n(this.delimiterRight);var n=this.multipleLinesTagEnable?"gs":"gi";return this.reSplit=RegExp(`${e}(.+?)${t}`,n),this}setTranslateTagNameCallback(e){return this.translateTagNameCallback=e,this}setValueConverter(e){return e===!0?e=lu:e||(e=C1),this.valueConverter=e,this}setLoopEnable(e){return e===void 0&&(e=!0),this.loopEnable=e,this}setSource(e){return this.source=e,this}resetIndex(e){return e===void 0&&(e=0),this.progressIndex=e,this.reSplit.lastIndex=e,this.lastTagStart=null,this.lastTagEnd=null,this.lastContent=null,this.justCompleted=!1,this.isRunning=!1,this}start(e){return this.setSource(e).restart(),this}restart(){this.resetIndex().next()}next(){if(this.isPaused&&this.onResume(),this.isRunning)return this;if(this.isRunning=!0,this.justCompleted)return this.isRunning=!1,this;this.reSplit.lastIndex===0&&this.onStart();var e=this.source,t=e.length;for(this.reSplit.lastIndex=this.progressIndex;;){var n=this.reSplit.exec(e);if(!n){if(this.progressIndex<t&&(this.onContent(e.substring(this.progressIndex,t)),this.isPaused)){this.progressIndex=t;break}return this.onComplete(),void(this.isRunning=!1)}var s=this.reSplit.lastIndex,o=s-n[0].length;if(this.progressIndex<o&&(this.onContent(e.substring(this.progressIndex,o)),this.isPaused)){this.progressIndex=o;break}if(this.lastTagSource=n[0],this.onTag(n[1]),this.lastTagSource=void 0,this.progressIndex=s,this.isPaused)break}return this.isRunning=!1,this}skipEvent(){return this.skipEventFlag=!0,this}pause(){return this.isPaused||this.onPause(),this}pauseUntilEvent(e,t){return this.isPaused||(this.pause(),e.once(t,function(){this.next()},this)),this}onContent(e){this.skipEventFlag=!1,this.emit("content",e),this.lastContent=e}onTag(e){}onStart(){this.isRunning=!0,this.emit("start",this)}onComplete(){this.isRunning=!1,this.justCompleted=!0,this.emit("complete",this),this.loopEnable&&this.resetIndex()}onPause(){this.isPaused=!0,this.emit("pause",this)}onResume(){this.isPaused=!1,this.emit("resume",this)}};const C1=function(e){return e};Object.assign(nm.prototype,sm);class E1 extends nm{constructor(t){t===void 0&&(t={}),t.hasOwnProperty("multipleLinesTag")||(t.multipleLinesTag=!1),super(t),this.setTagExpression(xt(t,"regex.tag",void 0)),this.setValueExpression(xt(t,"regex.value",void 0));var n=xt(t,"delimiters","<>");this.setDelimiters(n[0],n[1])}setTagExpression(t){return t||(t=ba),this.tagExpression=t,this}setValueExpression(t){return t||(t=ba),this.valueExpression=t,this}setDelimiters(t,n){super.setDelimiters(t,n);var s=`(${this.tagExpression})(=(${this.valueExpression}))?`;if(this.reTag=RegExp(s,"i"),this.tagExpression!==ba||this.valueExpression!==ba){var o=`${this.tagExpression}(=${this.valueExpression})?`,i=`/${this.tagExpression}`;t=_n(this.delimiterLeft),n=_n(this.delimiterRight);var r=this.multipleLinesTagEnable?"gs":"gi";this.reSplit=RegExp(`${t}((${o})|(${i}))${n}`,r)}return this}onTag(t){var n=t.match(this.reTag),s=n[1],o=s.charAt(0)==="/";if(o&&(s=s.substring(1,s.length)),this.translateTagNameCallback&&(s=this.translateTagNameCallback(s)),this.skipEventFlag=!1,o)this.emit(`-${s}`),this.skipEventFlag||this.emit("-",s),this.lastTagEnd=s;else{var i=function(r,h,a){if(r==null)return[];h===void 0&&(h=lu),a===void 0&&(a=",");for(var u=r.split(a),l=0,d=u.length;l<d;l++)u[l]=h(u[l]);return u}(n[3],this.valueConverter);this.emit(`+${s}`,...i),this.skipEventFlag||this.emit("+",s,...i),this.lastTagStart=s}}}const ba="[^=]+";var P1=function(e){this.typeWriter.setTypingSpeed(e)},Nd=function(e,t){et.call(e,"speed",P1,t,e)},O1=function(e){if(!this.skipSoundEffect){var t=e[0],n=e[1];this.soundManager.playSoundEffect(t),n&&this.soundManager.fadeInSoundEffect(n)}},k1=function(e){if(!this.skipSoundEffect){var t=e[0],n=e[1];this.soundManager.playSoundEffect2(t),n&&this.soundManager.fadeInSoundEffect2(n)}},M1=function(e){this.soundManager.fadeInSoundEffect(e)},_1=function(e){this.soundManager.fadeInSoundEffect2(e)},A1=function(e){this.soundManager.fadeOutSoundEffect(...e)},R1=function(e){this.soundManager.fadeOutSoundEffect2(...e)},L1=function(e){this.soundManager.setSoundEffectVolume(e,!0)},D1=function(e){this.soundManager.setSoundEffectVolume2(e,!0)},F1=function(){this.soundManager.setSoundEffectMute(!0)},B1=function(){this.soundManager.setSoundEffect2Mute(!0)},I1=function(){this.soundManager.setSoundEffectMute(!1)},X1=function(){this.soundManager.setSoundEffect2Mute(!1)},z1=function(e){var t=e[0],n=e[1];this.soundManager.playBackgroundMusic(t),n&&this.soundManager.fadeInBackgroundMusic(n)},Y1=function(){this.soundManager.stopBackgroundMusic()},N1=function(e){var t=e[0],n=e[1];this.soundManager.playBackgroundMusic2(t),n&&this.soundManager.fadeInBackgroundMusic2(n)},G1=function(){this.soundManager.stopBackgroundMusic2()},U1=function(e){this.soundManager.fadeInBackgroundMusic(e)},W1=function(e){this.soundManager.fadeInBackgroundMusic2(e)},V1=function(e){this.soundManager.fadeOutBackgroundMusic(...e)},j1=function(e){this.soundManager.fadeOutBackgroundMusic2(...e)},H1=function(e){this.soundManager.crossFadeBackgroundMusic(...e)},K1=function(e){this.soundManager.crossFadeBackgroundMusic2(...e)},q1=function(){this.soundManager.pauseBackgroundMusic()},$1=function(){this.soundManager.resumeBackgroundMusic()},Z1=function(){this.soundManager.pauseBackgroundMusic2()},J1=function(){this.soundManager.resumeBackgroundMusic2()},Q1=function(e){this.soundManager.setBackgroundMusicVolume(e)},tT=function(e){this.soundManager.setBackgroundMusicVolume2(e)},eT=function(){this.soundManager.setBackgroundMusicMute(!0)},iT=function(){this.soundManager.setBackgroundMusic2Mute(!0)},sT=function(){this.soundManager.setBackgroundMusicMute(!1)},nT=function(){this.soundManager.setBackgroundMusic2Mute(!1)},rT=function(e){this.cameraTarget.fadeIn(...e)},aT=function(e){this.cameraTarget.fadeOut(...e)},oT=function(e){this.cameraTarget.shake(...e)},hT=function(e){this.cameraTarget.flash(...e)},lT=function(e){this.cameraTarget.setZoom(e)},uT=function(e){this.cameraTarget.zoomTo(...e)};const Gd=Phaser.Math.DegToRad;var dT=function(e){this.cameraTarget.setRotation(e)},cT=function(e){var t=e[0],n=e[1],s=e[2];this.cameraTarget.rotateTo(t,!1,n,s)},fT=function(e){this.cameraTarget.setScroll(...e)},pT=function(e){var t=e[0],n=e[1],s=e[2],o=e[3],i=this.cameraTarget,r=i.scrollX,h=i.scrollY;i.setScroll(t,n),t+=i.centerX,n+=i.centerY,i.setScroll(r,h),i.pan(t,n,s,o)},gT=function(e){this.typeWriter.wait(e)},Ud=function(e,t){et.call(e,"wait",gT,t,e)},mT=function(e,t){var n=`tag.${t}`;e==null?this.emit(n):this.emit(n,...e)},Wd=function(e,t,n){et.call(e,t,mT,n,e)};const Vd=[function(e,t,n){var s,o="color";t.on("start",function(){s=e.textStyle.color}).on(`+${o}`,function(i){e.textStyle.setColor(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setColor(s),t.skipEvent()}).on("complete",function(){e.textStyle.setColor(s)})},function(e,t,n){var s,o="stroke";t.on("start",function(){s=e.textStyle.stroke,e.textStyle.setStrokeStyle(null)}).on(`+${o}`,function(i){i===void 0&&(i=s),e.textStyle.setStrokeStyle(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setStrokeStyle(null),t.skipEvent()}).on("complete",function(){e.textStyle.setStrokeStyle(s)})},function(e,t,n){t.on("start",function(){e.textStyle.setBold(!1)}).on("+b",function(){e.textStyle.setBold(!0),t.skipEvent()}).on("-b",function(){e.textStyle.setBold(!1),t.skipEvent()})},function(e,t,n){t.on("start",function(){e.textStyle.setItalic(!1)}).on("+i",function(){e.textStyle.setItalic(!0),t.skipEvent()}).on("-i",function(){e.textStyle.setItalic(!1),t.skipEvent()})},function(e,t,n){var s,o="size";t.on("start",function(){s=e.textStyle.fontSize}).on(`+${o}`,function(i){e.textStyle.setFontSize(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setFontSize(s),t.skipEvent()}).on("complete",function(){e.textStyle.setFontSize(s)})},function(e,t,n){var s,o="shadow";t.on("start",function(){s=e.textStyle.shadowColor,e.textStyle.setShadowColor(null)}).on(`+${o}`,function(i){i===void 0&&(i=s),e.textStyle.setShadowColor(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setShadowColor(null),t.skipEvent()}).on("complete",function(){e.textStyle.setShadowColor(s)})},function(e,t,n){var s="align";t.on(`+${s}`,function(o){e.textStyle.setAlign(o),t.skipEvent()}).on(`-${s}`,function(){e.textStyle.setAlign(),t.skipEvent()}).on("complete",function(){e.textStyle.setAlign()})},function(e,t,n){var s;t.on("start",function(){s=e.textStyle.offsetY,e.textStyle.setOffsetY(0)}).on("+y",function(o){o===void 0&&(o=s),e.textStyle.setOffsetY(o),t.skipEvent()}).on("-y",function(){e.textStyle.setOffsetY(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetY(0)})},function(e,t,n){var s;t.on("start",function(){s=e.textStyle.offsetY,e.textStyle.setOffsetX(0)}).on("+x",function(o){o===void 0&&(o=s),e.textStyle.setOffsetX(o),t.skipEvent()}).on("-x",function(){e.textStyle.setOffsetX(0),t.skipEvent()}).on("complete",function(){e.textStyle.setOffsetX(0)})},function(e,t,n){var s,o="left";t.on("start",function(){s=e.textStyle.leftSpace,e.textStyle.setLeftSpace(0)}).on(`+${o}`,function(i){i===void 0&&(i=s),e.textStyle.setLeftSpace(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setLeftSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setLeftSpace(0)})},function(e,t,n){var s,o="right";t.on("start",function(){s=e.textStyle.rightSpace,e.textStyle.setRightSpace(0)}).on(`+${o}`,function(i){i===void 0&&(i=s),e.textStyle.setRightSpace(i),t.skipEvent()}).on(`-${o}`,function(){e.textStyle.setRightSpace(0),t.skipEvent()}).on("complete",function(){e.textStyle.setRightSpace(0)})},function(e,t,n){t.on("+img",function(s){var o=e.imageManager.get(s);o&&Rg.call(e,o.key,o.frame,{width:o.width,hieght:o.height,leftSpace:o.left,rightSpace:o.right,color:o.tintFill?e.textStyle.color:void 0}),t.skipEvent()}).on("-img",function(){t.skipEvent()})},function(e,t,n){var s="space";t.on(`+${s}`,function(o){Lg.call(e,o),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="speed";t.on(`+${s}`,function(o){Nd(e,o),t.skipEvent()}).on(`-${s}`,function(){Nd(e,void 0),t.skipEvent()})},function(e,t,n){var s="se";t.on(`+${s}`,function(o,i){et.call(e,s,O1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2",t.on(`+${s}`,function(o,i){et.call(e,s,k1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="se.fadein";t.on(`+${s}`,function(o){et.call(e,s,M1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2.fadein",t.on(`+${s}`,function(o){et.call(e,s,_1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="se.fadeout";t.on(`+${s}`,function(o,i){et.call(e,s,A1,[o,i=i==="stop"],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2.fadeout",t.on(`+${s}`,function(o,i){et.call(e,s,R1,[o,i=i==="stop"],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="se.volume";t.on(`+${s}`,function(o){et.call(e,s,L1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2.volume",t.on(`+${s}`,function(o){et.call(e,s,D1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="se.mute";t.on(`+${s}`,function(){et.call(e,s,F1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2.mute",t.on(`+${s}`,function(){et.call(e,s,B1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se.unmute",t.on(`+${s}`,function(){et.call(e,s,I1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="se2.unmute",t.on(`+${s}`,function(){et.call(e,s,X1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="bgm";t.on(`+${s}`,function(o,i){et.call(e,s,z1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){et.call(e,"bgm.stop",Y1,void 0,e),t.skipEvent()}),s="bgm2",t.on(`+${s}`,function(o,i){et.call(e,s,N1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){et.call(e,"bgm2.stop",G1,void 0,e),t.skipEvent()})},function(e,t,n){var s="bgm.fadein";t.on(`+${s}`,function(o){et.call(e,s,U1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.fadein",t.on(`+${s}`,function(o){et.call(e,s,W1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="bgm.fadeout";t.on(`+${s}`,function(o,i){et.call(e,s,V1,[o,i=i==="stop"],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.fadeout",t.on(`+${s}`,function(o,i){et.call(e,s,j1,[o,i=i==="stop"],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="bgm.cross";t.on(`+${s}`,function(o,i){et.call(e,s,H1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.cross",t.on(`+${s}`,function(o,i){et.call(e,s,K1,[o,i],e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="bgm.pause";t.on(`+${s}`,function(){et.call(e,s,q1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){et.call(e,"bgm.resume",$1,void 0,e),t.skipEvent()}),s="bgm2.pause",t.on(`+${s}`,function(){et.call(e,s,Z1,void 0,e),t.skipEvent()}).on(`-${s}`,function(){et.call(e,"bgm2.resume",J1,void 0,e),t.skipEvent()})},function(e,t,n){var s="bgm.volume";t.on(`+${s}`,function(o){et.call(e,s,Q1,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.volume",t.on(`+${s}`,function(o){et.call(e,s,tT,o,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="bgm.mute";t.on(`+${s}`,function(){et.call(e,s,eT,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.mute",t.on(`+${s}`,function(){et.call(e,s,iT,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm.unmute",t.on(`+${s}`,function(){et.call(e,s,sT,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}),s="bgm2.unmute",t.on(`+${s}`,function(){et.call(e,s,nT,void 0,e),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()})},function(e,t,n){var s="camera.fadein";t.on(`+${s}`,function(o,i,r,h){et.call(e,s,rT,[o,i,r,h],e),t.skipEvent()})},function(e,t,n){var s="camera.fadeout";t.on(`+${s}`,function(o,i,r,h){et.call(e,s,aT,[o,i,r,h],e),t.skipEvent()})},function(e,t,n){var s="camera.shake";t.on(`+${s}`,function(o,i){et.call(e,s,oT,[o,i],e),t.skipEvent()})},function(e,t,n){var s="camera.flash";t.on(`+${s}`,function(o,i,r,h){et.call(e,s,hT,[o,i,r,h],e),t.skipEvent()})},function(e,t,n){var s="camera.zoom";t.on(`+${s}`,function(o){et.call(e,s,lT,o,e),t.skipEvent()}).on(`+${s}.to`,function(o,i,r){et.call(e,"camera.zoom.to",uT,[o,i,r],e),t.skipEvent()})},function(e,t,n){var s="camera.rotate";t.on(`+${s}`,function(o){o=Gd(o),et.call(e,s,dT,o,e),t.skipEvent()}).on(`+${s}.to`,function(o,i,r){o=Gd(o),et.call(e,"camera.rotate.to",cT,[o,i,r],e),t.skipEvent()})},function(e,t,n){var s="camera.scroll";t.on(`+${s}`,function(o,i){et.call(e,s,fT,[o,i],e),t.skipEvent()}).on(`+${s}.to`,function(o,i,r,h){et.call(e,"camera.scroll.to",pT,[o,i,r,h],e),t.skipEvent()})},function(e,t,n){var s="wait",o="click";t.on(`+${s}`,function(i){Ud(e,i),t.skipEvent()}).on(`-${s}`,function(){t.skipEvent()}).on(`+${o}`,function(){Ud(e,"click"),t.skipEvent()}).on(`-${o}`,function(){t.skipEvent()})},function(e,t,n){t.on("+r",function(){br.call(e,`
`),t.skipEvent()}).on("-r",function(){t.skipEvent()})},function(e,t,n){for(var s=["pagebreak","pb"],o=0,i=s.length;o<i;o++){var r=s[o];t.on(`+${r}`,function(){br.call(e,"\f"),t.skipEvent()}).on(`-${r}`,function(){t.skipEvent()})}},function(e,t,n){t.on("+content.off",function(){t.setContentOutputEnable(!1),t.skipEvent()})},function(e,t,n){t.on("+content.on",function(){t.setContentOutputEnable(),t.skipEvent()})},function(e,t,n){t.on("content",function(s){if(t.contentOutputEnable)br.call(e,s);else{var o=`+${t.lastTagStart}`;e.emit(`parser.${o}#content`,t,s)}})},function(e,t,n){t.on("start",function(){e.emit("parser.start",t)}).on("+",function(s,...o){if(!t.skipEventFlag){var i=`+${s}`,r=o;e.emit(`parser.${i}`,t,...o,r),Wd(e,i,r)}}).on("-",function(s){if(!t.skipEventFlag){var o=`-${s}`,i=[];e.emit(`parser.${o}`,t,i),Wd(e,o,i)}}).on("complete",function(){e.emit("parser.complete",t)})}],vT=Phaser.Utils.Objects.GetValue;class yT extends E1{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("delimiters")||(n.delimiters="[]"),super(n),function(s,o,i){for(var r=0,h=Vd.length;r<h;r++)Vd[r](s,o,i)}(t,this,n),this.setCommentLineStartSymbol(vT(n,"comment","//")),this.setContentOutputEnable()}setCommentLineStartSymbol(t){return this.commentLineStart=t,this}setContentOutputEnable(t){return t===void 0&&(t=!0),this.contentOutputEnable=t,this}start(t){return super.start(function(n,s){for(var o=n.commentLineStart,i=s.split(`
`),r=0,h=i.length;r<h;r++){var a=i[r];a===""||(a.trim().length===0||o&&a.startsWith(o))&&(i[r]="")}return i.join("")}(this,t)),this}}const xT={setDefaultTypingSpeed(e){return this.defaultSpeed=e,this},setTypingSpeed(e){return e===void 0&&(e=this.defaultSpeed),this.speed=e,this}},Ms="page.fadeout",Xl="_remove.play",jd=[Ms,Xl];var uu=function(e,t){return new Promise(function(n,s){e.once(t,function(){n()})})},re=function(e){return uu(e,"complete")};const rm="anim";var am=function(e){e===void 0&&(e=0);var t=0;for(this.inTypingProcessLoop=!0;this.inTypingProcessLoop;){var n=this.getNextChild();if(!n){this.timeline.isRunning?this.timeline.once("complete",function(){this.isPageTyping=!1,this.emit("complete")},this):(this.isPageTyping=!1,this.emit("complete"));break}if(n.renderable){var s=this.animationConfig;if(s.duration>0){var o=this.timeline.addTimer({name:rm,target:n,duration:s.duration,yoyo:s.yoyo,onStart:s.onStart,onProgress:s.onProgress,onComplete:s.onComplete});this.skipTypingAnimation&&o.seek(1)}else s.onStart&&s.onStart(n,0);this.minSizeEnable&&this.textPlayer.setToMinSize(),this.textPlayer.emit("typing",n);var i=this.nextChild;if(i&&!(this.skipSpaceEnable&&jx(i))){if(t+=this.speed+e,e=0,t>0){this.typingTimer=this.timeline.addTimer({name:"delay",target:this,duration:t,onComplete:function(r,h,a){r.typingTimer=void 0,am.call(r,a.remainder)}});break}}}else Hx(n)&&n.exec()}this.minSizeEnable&&this.textPlayer.setToMinSize(),this.inTypingProcessLoop=!1},bT=function(e){switch(e){case"camera.fadein":case"camera.fadeout":case"camera.flash":case"camera.shake":case"camera.zoom":case"camera.rotate":case"camera.scroll":return!0;default:return!1}},TT=function(e,t){var n=t.split(".");return e.gameObjectManagers.hasOwnProperty(n[0])},wT=function(e,t,n,s){var o=e.waitEventManager,i=t.split("."),r=i[0],h=e.getGameObjectManager(r),a=`wait.${r}`;switch(i.length){case 1:return o.waitGameObjectManagerEmpty(r),void e.emit(a);case 2:var u=i[1];return o.waitGameObjectDestroy(r,u),void e.emit(a,u);case 3:u=i[1];var l=i[2];if(typeof h.getProperty(u,l)=="number")return o.waitGameObjectTweenComplete(r,u,l),void e.emit(a,u,l);var d=l,c=d.startsWith("!");return c&&(d=d.substring(1)),h.hasData(u,d)?(o.waitGameObjectDataFlag(r,u,d,!c),void e.emit(a,u,d)):void o.waitTime(0)}};const ST=Phaser.Input.Keyboard.KeyCodes;var om=function(e,t,n,s){var o=e.waitEventManager;o.clearWaitCompleteCallbacks().addWaitCompleteCallback(n,s);for(var i=0,r=(t=typeof t=="string"&&t.length>1&&t.indexOf("|")!==-1?t.split("|"):[t]).length;i<r;i++){var h=t[i];if(h==null||h==="wait"){var a=e.waitEventManager.getWaitCompleteTriggerCallback();e.emit("wait",a)}else if(typeof h!="number"&&isNaN(h))if(h==="click")o.waitClick(),e.emit("wait.click");else if(h==="se"){o.waitSoundEffectComplete();var u=e.soundManager.getLastSoundEffect();e.emit("wait.music",u)}else h==="se2"?(o.waitSoundEffect2Complete(),u=e.soundManager.getLastSoundEffect2(),e.emit("wait.music",u)):h==="bgm"?(o.waitBackgroundMusicComplete(),u=e.soundManager.getBackgroundMusic(),e.emit("wait.music",u)):h==="bgm2"?(o.waitBackgroundMusic2Complete(),u=e.soundManager.getBackgroundMusic2(),e.emit("wait.music",u)):ST.hasOwnProperty(h.toUpperCase())?(o.waitKeyDown(h),e.emit("wait.keydown",h)):bT(h)?(o.waitCameraEffectComplete(h),e.emit("wait.camera",h)):TT(e,h)?wT(e,h):(a=e.waitEventManager.getWaitCompleteTriggerCallback(),e.emit(`wait.${h}`,a));else{var l=parseFloat(h);o.waitTime(l),e.emit("wait.time",l)}}},hm={fadeOutPage:function(){if(!this.fadeOutPageCallback||!this.children)return this.emit(Ms),this;var e=this.children.filter(function(s){return s.renderable}),t=this.fadeOutPageCallback(e,this.fadeOutPageDuration);if(t)if(t.once)t.once("complete",function(){this.emit(Ms)},this);else if(t.then){var n=this;t.then(function(){n.emit(Ms)})}else this.emit(Ms);else this.emit(Ms);return this},start:function(e){return this.children=e,this.index=0,this.isPageTyping=!0,this.onTypeStart&&this.onTypeStart(e),this.typing(),re(this)},typing:am,pause:function(){return this.timeline.pause(),this},resume:function(){return this.timeline.resume(),this},pauseTyping:function(){return this.isTypingPaused||(this.typingTimer?(this.typingTimer.pause(),this.isTypingPaused=!0):this.inTypingProcessLoop&&(this.inTypingProcessLoop=!1,this.isTypingPaused=!0)),this},resumeTyping:function(e){return this.isTypingPaused?(e===void 0&&(e=0),this.typingTimer?(this.isTypingPaused=!1,this.typingTimer.resume(),this.typingTimer.remainder+=e):this.isTypingPaused&&(this.isTypingPaused=!1,this.typing(e)),this):this},wait:function(e){return this.ignoreWait||(this.pauseTyping(),om(this.textPlayer,e,this.resumeTyping,this)),this},setIgnoreWait:function(e){return e===void 0&&(e=!0),this.ignoreWait=e,this},setSkipSpaceEnable:function(e){return e===void 0&&(e=!0),this.skipSpaceEnable=e,this},setSkipTypingAnimation:function(e){if(e===void 0&&(e=!0),this.skipTypingAnimation=e,e)for(var t=this.timeline.getTimers(rm),n=0,s=t.length;n<s;n++)t[n].seek(1);return this},setSkipSoundEffect:function(e){if(e===void 0&&(e=!0),this.skipSoundEffect=e,e){var t=this.textPlayer._soundManager;t&&t.fadeOutAllSoundEffects(100,!0)}return this},skipCurrentTypingDelay:function(){return this.typingTimer&&this.typingTimer.seek(1),this}};Object.assign(hm,xT);const Qs=Phaser.Utils.Objects.GetValue;class lm{constructor(t,n){this.setEventEmitter(),this.textPlayer=t,this.isPageTyping=!1,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.inTypingProcessLoop=!1,this.isTypingPaused=!1,this.setIgnoreWait(!1),this.setSkipTypingAnimation(!1),this.setTypingStartCallback(Qs(n,"onTypingStart",ET)),this.setDefaultTypingSpeed(Qs(n,"speed",250)),this.setTypingSpeed(),this.setSkipSpaceEnable(Qs(n,"skipSpace",!1)),this.setAnimationConfig(Qs(n,"animation",void 0)),this.setMinSizeEnable(Qs(n,"minSizeEnable",!1)),this.setFadeOutPageCallback(Qs(n,"fadeOutPage"))}destroy(){this.destroyEventEmitter(),this.textPlayer=void 0,this.typingTimer=void 0,this.pauseTypingTimer=void 0,this.onTypeStart=void 0,this.animationConfig=void 0}get timeline(){return this.textPlayer.timeline}setTypingStartCallback(t){return this.onTypeStart=t,this}setAnimationConfig(t){return t||(t={}),t.hasOwnProperty("duration")||(t.duration=0),t.hasOwnProperty("onStart")||(t.onStart=CT),this.animationConfig=t,this}setFadeOutPageCallback(t){return this.fadeOutPageCallback=t,this}setMinSizeEnable(t){return t===void 0&&(t=!0),this.minSizeEnable=t,this}getNextChild(){var t=this.nextChild;return this.index=Math.min(this.index+1,this.children.length),this._nextChild=void 0,t}get nextChild(){return this._nextChild||(this._nextChild=this.children[this.index]),this._nextChild}}var CT=function(e){e.setVisible&&e.setVisible()},ET=function(e){for(var t=0,n=e.length;t<n;t++){var s=e[t];s.setVisible&&s.setVisible(!1)}};Object.assign(lm.prototype,Fr,hm);class PT extends au{playAnimation(t){return this.gameObject.anims.timeScale=this.timeScale,this.gameObject.play(t),this}stopAnimation(){return this.gameObject.stop(),this}chainAnimation(t){return this.gameObject.chain(t),this}pauseAnimation(){return this.gameObject.anims.pause(),this}setTimeScale(t){return super.setTimeScale(t),this.gameObject.anims&&(this.gameObject.anims.timeScale=t),this}}const OT={playAnimation(e,t){return this.has(e)||this.add(e),this.get(e).playAnimation(t),this},stopAnimation(e){return this.has(e)?(this.get(e).stopAnimation(),this):this},chainAnimation(e,t){return this.has(e)?(this.get(e).chainAnimation(t),this):this},pauseAnimation(e){return this.has(e)?(this.get(e).pauseAnimation(),this):this}};var um={};Object.assign(um,OT);var dm=function(e){return e&&e!=="sprite"?e==="image"&&(e=MT):e=kT,e},kT=function(e,t,n){return typeof n!="string"&&typeof n!="number"&&(n=void 0),e.add.sprite(0,0,t,n)},MT=function(e,t,n){return typeof n!="string"&&typeof n!="number"&&(n=void 0),e.add.image(0,0,t,n)};class cm extends An{constructor(t,n){n===void 0&&(n={}),n.BobClass=PT,super(t,n)}setCreateGameObjectCallback(t,n){return t=dm(t),super.setCreateGameObjectCallback(t,n),this}}Object.assign(cm.prototype,um);var Hd=function(e,t){return e.length===3&&e[0]===t&&e[2]==="play"},_T=function(e){var t,n,s;[t,n,s]=e;var o=s.shift(),i=this.getGameObjectManager(t);i.playAnimation(n,o),s.length>0&&i.chainAnimation(n,s)},Kd=function(e){var t,n;[t,...n]=e,this.getGameObjectManager(t).stopAnimation(...n)},AT=function(e){var t,n;[t,...n]=e,this.getGameObjectManager(t).pauseAnimation(...n)},RT=function(e){var t,n;[t,...n]=e,this.getGameObjectManager(t).chainAnimation(...n)};const LT=[function(e,t,n){var s=n.name;t.on("+",function(o,...i){if(!t.skipEventFlag){var r,h=o.split(".");Hd(h,s)&&(r=h[1],et.call(e,`${s}.play`,_T,[s,r,i],e),t.skipEvent())}}).on("+",function(o){if(!t.skipEventFlag){var i,r=o.split(".");(function(h,a){return h.length===3&&h[0]===a&&h[2]==="stop"})(r,s)&&(i=r[1],et.call(e,`${s}.stop`,Kd,[s,i],e),t.skipEvent())}}).on("-",function(o){if(!t.skipEventFlag){var i,r=o.split(".");Hd(r,s)&&(i=r[1],et.call(e,`${s}.stop`,Kd,[s,i],e),t.skipEvent())}})},function(e,t,n){var s=n.name;t.on("+",function(o){if(!t.skipEventFlag){var i,r=o.split(".");(function(h,a){return h.length===3&&h[0]===a&&h[2]==="pause"})(r,s)&&(i=r[1],et.call(e,`${s}.pause`,AT,[s,i],e),t.skipEvent())}})},function(e,t,n){var s=n.name;t.on("+",function(o){if(!t.skipEventFlag){var i,r=o.split(".");if(function(a,u){return a.length===3&&a[0]===u&&a[2]==="chain"}(r,s)){i=r[1];var h=Array.prototype.slice.call(arguments,1);et.call(e,`${s}.chain`,RT,[s,i,h],e),t.skipEvent()}}})}];var DT=function(e){e===void 0&&(e={}),e.name="sprite",e.parseCallbacks=LT,e.createGameObject=dm(e.createGameObject),this.addGameObjectManager(e,cm)},qd=function(e,t){return e.length===2&&e[0]===t},FT=function(e){var t,n;[t,...n]=e,this.getGameObjectManager(t).add(...n)},BT=function(e){var t,n;[t,...n]=e,this.getGameObjectManager(t).remove(...n)},IT=function(e){this.getGameObjectManager(e).removeAll()},XT=function(e){var t,n,s,o;[t,n,s,...o]=e;var i=`${t}.${s}`;if(this.emit(i,n,...o),!(this.listenerCount(i)>0)){var r=this.getGameObjectManager(t);r.hasMethod(n,s)?r.call(n,s,...o):r.setProperty(n,s,o[0])}},zT={to:!0,yoyo:!0,from:!0,toLeft:!0,toRight:!0,toUp:!0,toDown:!0,yoyoLeft:!0,yoyoRight:!0,yoyoUp:!0,yoyoDown:!0,fromLeft:!0,fromRight:!0,fromUp:!0,fromDown:!0},YT=function(e){var t,n,s,o,i,r,h,a;[t,n,s,o,i,r,h,a]=e;var u=this.getGameObjectManager(t),l=u.getProperty(n,s);if(typeof l=="number"){a.endsWith("Left")||a.endsWith("Up")?a.startsWith("to")||a.startsWith("yoyo")?o=l-o:a.startsWith("from")&&(u.setProperty(n,s,l-o),o=l):a.endsWith("Right")||a.endsWith("Down")?a.startsWith("to")||a.startsWith("yoyo")?o=l+o:a.startsWith("from")&&(u.setProperty(n,s,l+o),o=l):a==="from"&&(u.setProperty(n,s,o),o=l);var d=a.startsWith("yoyo");u.easeProperty(n,{property:s,value:o,duration:i,ease:r,repeat:h,yoyo:d})}};const $d=[function(e,t,n){var s=n.name;t.on("+",function(o,...i){if(!t.skipEventFlag){var r,h=o.split(".");qd(h,s)&&(r=h[1],et.call(e,`${s}.add`,FT,[s,r,...i],e),t.skipEvent())}}).on("-",function(o){if(!t.skipEventFlag){var i,r=o.split(".");qd(r,s)&&(i=r[1],et.call(e,`${s}.remove`,BT,[s,i],e),t.skipEvent())}})},function(e,t,n){var s=n.name;t.on("-",function(o){t.skipEventFlag||o===s&&(et.call(e,`${s}.removeall`,IT,s,e),t.skipEvent())})},function(e,t,n){var s=n.name;t.on("+",function(o,...i){if(!t.skipEventFlag){var r,h,a=o.split(".");(function(u,l){return u.length===3&&u[0]===l})(a,s)&&(r=a[1],h=a[2],et.call(e,`${s}.call`,XT,[s,r,h,...i],e),t.skipEvent())}})},function(e,t,n){var s=n.name;e.getGameObjectManager(s),t.on("+",function(o,i,r,h,a){if(!t.skipEventFlag){var u,l,d,c=o.split(".");(function(p,f){return p.length===4&&p[0]===f&&zT[p[3]]})(c,s)&&(u=c[1],l=c[2],d=c[3],typeof h=="number"&&(a=h,h=void 0),et.call(e,`${s}.ease`,YT,[s,u,l,i,r,h,a,d],e),t.skipEvent())}})}],NT=tm.addGameObjectManager,GT={addGameObjectManager(e,t){(e=e?vi(e):{}).name||console.warn("[TextPlayer] Parameter 'name' is required in addGameObjectManager(config) method");var n=e.defaultLayer,s=e.createGameObject,o=this.layerManager;e.createGameObject=function(a,...u){var l=s.call(this,a,...u);return n&&o&&o.addToLayer(n,l),l},NT.call(this,e,t);for(var i=e.parseCallbacks,r=0,h=(i=i?[...i,...$d]:$d).length;r<h;r++)i[r](this,this.parser,e);return this}},UT={play(e){return this.isPlaying||(this.removeChildren(),this.parser.start(e),this.isPlaying=!0,this.once("complete",function(){this.isPlaying=!1},this),this.lastWrapResult=void 0,this.typingNextPage()),this},playPromise(e){var t=re(this);return this.play(e),t}};var zl=function(){return!this.isPlaying||this.isPageTyping||this.typeWriter.once(Ms,WT,this).fadeOutPage(),this},WT=function(){var e=this.runWrap(this.lastWrapResult);this.lastWrapResult=e,this.emit("page.start");var t=function(){this.emit(Xl),e.isLastPage?this.emit("complete"):(this.emit("page.complete"),this.ignoreNextPageInput?zl.call(this):this.nextPageInput&&this.nextPageInput(zl,this))};this.once(Xl,function(){this.typeWriter.off("complete",t,this)},this),this.typeWriter.once("complete",t,this).start(e.children)};const VT={pauseTyping(){return this.typeWriter.pauseTyping(),this},pause(){return this.pauseTyping(),this.timeline.pause(),this}},jT={resumeTyping(e){return this.typeWriter.resumeTyping(e),this},resume(){return this.resumeTyping(),this.timeline.resume(),this}},HT={setDefaultTypingSpeed(e){return this.defaultTypingSpeed=e,this},setTypingSpeed(e){return this.typingSpeed=e,this}},KT={getSprite(e){return this.getGameObject("sprite",e)},addSprite(e,t){return this.addGameObject("sprite",e,t),this}},qT={setContentOutputEnable(e){return this.parser.setContentOutputEnable(e),this},setContentCallback(e,t){return this.contentCallback=e,this.contentCallbackScope=t,this}};var fm={setClickTarget:function(e){return this.waitEventManager.setClickTarget(e),this},setCameraTarget:function(e){return this.waitEventManager.setCameraTarget(e),this},setNextPageInput:function(e){var t=this;this.nextPageInput=e?typeof e=="function"?function(n,s){var o=t.waitEventManager;o.clearWaitCompleteCallbacks().addWaitCompleteCallback(n,s);var i=o.getWaitCompleteTriggerCallback();e.call(t,i)}:function(n,s){om(t,e,n,s)}:null},addImage:function(e,t){return this.imageManager.add(e,t),this},typingNextPage:zl,wait:function(e){return this.typeWriter.wait(e),this},setIgnoreWait:function(e){return this.typeWriter.setIgnoreWait(e),this},setIgnoreNextPageInput:function(e){return e===void 0&&(e=!0),this.ignoreNextPageInput=e,this},showPage:function(){if(!this.isPlaying||!this.isPageTyping)return this;var e=this.typeWriter.speed,t=this.typeWriter.ignoreWait,n=this.typeWriter.skipTypingAnimation,s=this.typeWriter.skipSoundEffect;return this.typeWriter.once("complete",function(){this.typeWriter.setTypingSpeed(e).setIgnoreWait(t).setSkipTypingAnimation(n).setSkipSoundEffect(s)},this).setTypingSpeed(0).skipCurrentTypingDelay().setIgnoreWait(!0).setSkipTypingAnimation(!0).setSkipSoundEffect(!0),this}};Object.assign(fm,GT,UT,VT,jT,HT,KT,qT);const Zd=Phaser.Utils.Objects.IsPlainObject,tn=Phaser.Utils.Objects.GetValue;class $T extends function(t){class n extends t{}var s={initManagers:m1,setTimeScale:v1,getTimeScale:y1,destroyManagers:x1};return Object.assign(n.prototype,s,tm,b1),n}(Fo){constructor(t,n,s,o,i,r){Zd(n)?r=n:Zd(o)&&(r=o),r===void 0&&(r={});var h=r.text;delete r.text,super(t,n,s,o,i,r),this.type="rexTextPlayer",this.initManagers(t,r),this.parser=new yT(this,tn(r,"parser",void 0)),this.typeWriter=new lm(this,tn(r,"typing",void 0)),this._imageManager=void 0;var a=tn(r,"images",void 0);a&&this.addImage(a);var u=tn(r,"sprites");u!==!1&&u!==null&&DT.call(this,u),this.setIgnoreNextPageInput(tn(r,"ignoreNextPageInput",!1)),this.setNextPageInput(tn(r,"nextPageInput",null)),this.isPlaying=!1,h&&this.play(h)}get imageManager(){return this._imageManager===void 0&&(this._imageManager=new iu(this.scene)),this._imageManager}get spriteManager(){return this.getGameObjectManager("sprite")}destroy(t){this.scene&&!this.ignoreDestroy&&(function(n){for(var s=0,o=jd.length;s<o;s++)n.emit(jd[s])}(this),this.parser.destroy(),this.parser=void 0,this.typeWriter.destroy(t),this.typeWriter=void 0,this._imageManager&&this._imageManager.destroy(t),this._imageManager=void 0,this.destroyManagers(t),super.destroy(t))}get isPageTyping(){return this.typeWriter.isPageTyping}set defaultTypingSpeed(t){this.typeWriter.setDefaultTypingSpeed(t)}get defaultTypingSpeed(){return this.typeWriter.defaultTypingSpeed}set typingSpeed(t){this.typeWriter.setTypingSpeed(t)}get typingSpeed(){return this.typeWriter.speed}set timeScale(t){this.setTimeScale(t)}get timeScale(){return this.getTimeScale()}}Object.assign($T.prototype,fm);const pm={maxLength:["maxLength",void 0],minLength:["minLength",void 0],readOnly:["readOnly",!1]},gm={direction:["direction",void 0]};var Qi=function(e,t,n){if(typeof n=="string")e.hasOwnProperty(n)&&(t[n]=e[n]);else{var s=n;if(Array.isArray(s))for(var o=0,i=s.length;o<i;o++)Qi(e,t,s[o]);else for(var n in s)Qi(e,t,n)}},mm=function(e,t,n,s,o){if(t)return!(n&&!n(e,t)||!Jd(e,t)||s&&!s(e,t));o===void 0&&(o=!1);for(var i=e.scene.input.manager,r=i.pointersTotal,h=i.pointers,a=0;a<r;a++)if(t=h[a],(!n||n(e,t))&&Jd(e,t)&&(!s||s(e,t)))return!o||t;return!1},Jd=function(e,t){for(var n=e.scene,s=n.input.cameras.getCamerasBelowPointer(t),o=n.input.manager,i=[e],r=0,h=s.length;r<h;r++)if(o.hitTest(t,i,s[r],Ta),Ta.length>0)return Ta.length=0,!0;return Ta.length=0,!1},Ta=[],en=void 0;const ZT=Phaser.Utils.Objects.GetValue;var bo=function(e,t,n){var s,o;for(var i in n===void 0&&(n={}),e)s=e[i],(o=ZT(t,i,s[1]))!==void 0&&(n[s[0]]=o);return n},vm=function(e){e.addEventListener("touchstart",sn,!1),e.addEventListener("touchmove",sn,!1),e.addEventListener("touchend",sn,!1),e.addEventListener("mousedown",sn,!1),e.addEventListener("mouseup",sn,!1),e.addEventListener("mousemove",sn,!1)},sn=function(e){e.stopPropagation()},ym=function(){return this.close(),this.emit("keydown-ENTER",this.parent,this),this},JT=function(){this.isOpened=!0,this.initText(),this.enterCloseEnable&&this.scene.input.keyboard.once("keydown-ENTER",ym,this),this.scene.sys.events.on("postupdate",this.updateText,this),this.clickOutSideTarget?(Wg.call(this.clickOutSideTarget,this.parent),Ug.call(this.clickOutSideTarget,this.parent),this.clickOutSideTarget.setInteractive().on("pointerdown",this.onClickOutside,this)):this.scene.input.on("pointerdown",this.onClickOutside,this),this.onOpenCallback&&this.onOpenCallback(this.parent,this),this.emit("open",this)},QT=function(){this.isOpened=!1,this.updateText(),this.enterCloseEnable&&this.scene.input.keyboard.off("keydown-ENTER",ym,this),this.scene.sys.events.off("postupdate",this.updateText,this),this.clickOutSideTarget?this.clickOutSideTarget.disableInteractive().off("pointerdown",this.onClickOutside,this):this.scene.input.off("pointerdown",this.onClickOutside,this),this.onCloseCallback&&this.onCloseCallback(this.parent,this),function(e){if(e){var t=e.parentElement;t&&t.removeChild(e)}}(this.node),this.node=void 0,this.emit("close",this)};const ch=Phaser.Utils.Objects.GetValue;var tw=function(e,t){var n,s=ch(t,"inputType",void 0);s===void 0&&(s=ch(t,"type","text")),s==="textarea"?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=s;var o=ch(t,"style",void 0),i=n.style;bo(gm,o,i),i.position="absolute",i.opacity=0,i.pointerEvents="none",i.zIndex=0,i.transform="scale(0)",bo(pm,t,n),vm(n);var r=e.scene.sys.scale;return(r.isFullscreen?r.fullscreenTarget:document.body).appendChild(n),n.addEventListener("focus",function(h){JT.call(e)}),n.addEventListener("blur",function(h){QT.call(e)}),n},ew={open:function(){return this.isOpened||this.readOnly||(this!==en&&(en!==void 0&&en.close(),en=this),this.node||(this.node=tw(this,this.nodeConfig)),this.setFocus()),this},close:function(){return this.isOpened?(this===en&&(en=void 0),this.setBlur(),this):this}};const wi=Phaser.Utils.Objects.GetValue;class xm extends Rt{constructor(t,n){super(t);var s=wi(n,"inputType",void 0);s===void 0&&(s=wi(n,"type","text")),this.setEnterCloseEnable(wi(n,"enterClose",s!=="textarea"));var o=wi(n,"onOpen",void 0);o||(o=wi(n,"onFocus",void 0)),this.onOpenCallback=o,this.clickOutSideTarget=wi(n,"clickOutSideTarget",void 0);var i=wi(n,"onClose",void 0);i||(i=wi(n,"onBlur",void 0)),this.onCloseCallback=i,this.onUpdateCallback=wi(n,"onUpdate",void 0),this.isOpened=!1,t.on("pointerdown",function(){this.open()},this).setInteractive(),this.nodeConfig=function(r){r===void 0&&(r={});var h={};return Qi(r,h,"inputType"),Qi(r,h,"type"),Qi(r,h,"style"),Qi(r,h,gm),Qi(r,h,pm),h}(n),this.node=void 0}destroy(){this.close(),this.clickOutSideTarget&&this.clickOutSideTarget.destroy(),super.destroy()}onClickOutside(t){mm(this.parent,t)||this.close()}setEnterCloseEnable(t){return t===void 0&&(t=!0),this.enterCloseEnable=t,this}initText(){}updateText(){}get text(){return this.node?this.node.value:""}set text(t){this.node&&(this.node.value=t)}setText(t){return this.text=t,this}get maxLength(){return this.nodeConfig.maxLength}set maxLength(t){this.nodeConfig.maxLength=t,this.node&&(this.node.maxLength=t)}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.nodeConfig.minLength}set minLength(t){this.nodeConfig.minLength=t,this.node&&(this.node.minLength=t)}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node&&(this.node.placeholder=t)}setPlaceholder(t){return this.placeholder=t,this}selectText(t,n){return this.node?(t===void 0?this.node.select():this.node.setSelectionRange(t,n),this):this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node?this.node.selectionStart:0}get selectionEnd(){return this.node?this.node.selectionEnd:0}get selectedText(){if(!this.node)return"";var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node?this.node.selectionStart:0}set cursorPosition(t){this.node&&this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node?this.node.title:""}set tooltip(t){if(!this.node)return this;this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.nodeConfig.readOnly}set readOnly(t){this.nodeConfig.readOnly=t,this.node&&(this.node.readOnly=t)}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node?this.node.spellcheck:""}set spellCheck(t){this.node&&(this.node.spellcheck=t)}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){if(this.node)return this.node.style.color}set fontColor(t){this.node&&(this.node.style.color=t)}setFontColor(t){return this.fontColor=t,this}setStyle(t,n){return this.node?(this.node.style[t]=n,this):this}getStyle(t){if(this.node)return this.node.style[t]}scrollToBottom(){return this.node?(this.node.scrollTop=this.node.scrollHeight,this):this}setEnabled(t){return this.node?(t===void 0&&(t=!0),this.node.disabled=!t,this):this}setBlur(){return this.node?(this.node.blur(),this):this}setFocus(){return this.node?(this.node.focus(),this):this}get isFocused(){return this.isOpened}}Object.assign(xm.prototype,ew);var iw=function(e,t,n){e=e.replace(" ","");var s=n.previousText;if(e===s)return e;if(isNaN(e)){n.emit("nan",e,n),e=s;var o=n.cursorPosition-1;n.setText(e),n.setCursorPosition(o)}else n.previousText=e;return e},Qd=function(e){var t=e.prevSelectionStart;if(t!==null){for(var n=e.prevSelectionEnd,s=e.parent,o=t;o<n;o++){var i=s.getCharChild(o);i&&s.emit("cursorout",i,o,s)}e.prevSelectionStart=null,e.prevSelectionEnd=null}},tc=function(e){var t=e.prevCursorPosition;if(t!==null){var n=e.parent,s=n.getCharChild(t);s&&n.emit("cursorout",s,t,n),e.prevCursorPosition=null}};const sw=Phaser.Utils.Objects.GetValue;class nw extends xm{constructor(t,n){super(t,n),this.setSelectAllWhenFocusEnable(sw(n,"selectAll",!1)),this.cursorMoveStartIndex=null,this.prevCursorPosition=null,this.prevSelectionStart=null,this.prevSelectionEnd=null,this.firstClickAfterOpen=!1,this.requestCursorPosition=null,t.on("pointerdown",function(s,o,i,r){var h=t.getNearestChild(o,i),a=t.getCharIndex(h);this.selectAllWhenFocus&&this.firstClickAfterOpen||this.setCursorPosition(a),this.cursorMoveStartIndex=a,this.firstClickAfterOpen=!1},this).on("pointermove",function(s,o,i,r){if(s.isDown){var h=t.getNearestChild(o,i),a=t.getCharIndex(h);this.cursorMoveStartIndex<a?this.selectText(this.cursorMoveStartIndex,a+1):this.selectText(a,this.cursorMoveStartIndex+1)}},this),this.on("open",function(){this.selectAllWhenFocus&&this.selectAll(),this.firstClickAfterOpen=!0,t.emit("open")},this).on("close",function(){t.emit("close")}).on("keydown-ENTER",function(){t.emit("keydown-ENTER")})}initText(){var t=this.parent;return this.prevCursorPosition=null,this.setText(t.text),this}updateText(){var t=this.parent,n=this.text;if(this.onUpdateCallback){var s=this.onUpdateCallback(n,t,this);s!=null&&(n=s)}return t.text!==n&&t.setText(n),this.isOpened?this.selectionStart!==this.selectionEnd?(tc(this),function(o){var i=o.parent,r=o.isOpened?o.selectionStart:null,h=o.isOpened?o.selectionEnd:null,a=o.prevSelectionStart,u=o.prevSelectionEnd;if(a!==r||u!==h){var l,d;a===null?(l=r,d=h):r===null?(l=a,d=u):(l=Math.min(a,r),d=Math.max(u,h));for(var c=l;c<d;c++){var p;if((p=a!==null&&c>=a&&c<u)!=(r!==null&&c>=r&&c<h)){var f=i.getCharChild(c);if(f){var v=p?"rangeout":"rangein";i.emit(v,f,c,i)}}}o.prevSelectionStart=r,o.prevSelectionEnd=h}}(this)):(Qd(this),function(o){var i=o.parent,r=i.text;o.requestCursorPosition!==null&&(o.setCursorPosition(o.requestCursorPosition),o.requestCursorPosition=null);var h,a=o.cursorPosition;o.prevCursorPosition!==a&&(o.prevCursorPosition!==null&&o.prevCursorPosition>r.length&&(o.prevCursorPosition=null),o.prevCursorPosition!==null&&(h=i.getCharChild(o.prevCursorPosition))&&(h.text===`
`&&h.clearTextSize(),i.emit("cursorout",h,o.prevCursorPosition,i)),a!=null&&(h=i.getCharChild(a))&&(h.text===`
`&&h.copyTextSize(i.lastInsertCursor),function(u){var l,d,c=u.parent,p=c.width,f=c.height,v=u.drawX,g=u.drawY,y=v+u.drawTLX,m=v+u.drawTRX,x=g+u.drawTLY,b=g+u.drawBLY;l=y<0?0-y:m>p?p-m:0,d=x<0?0-x:b>f?f-b:0,c._textOX+=l,c._textOY+=d}(h),i.emit("cursorin",h,a,i)),i.emit("movecursor",a,o.prevCursorPosition,i),o.prevCursorPosition=a)}(this)):(Qd(this),tc(this)),this}setNumberInput(){return this.onUpdateCallback=iw,this}setSelectAllWhenFocusEnable(t){return t===void 0&&(t=!0),this.selectAllWhenFocus=t,this}setRequestCursorPosition(t){return this.isOpened?(this.requestCursorPosition=t,this):this}}const rw=Phaser.Utils.Objects.GetValue,aw=["inputType","onOpen","clickOutSideTarget","onFocus","onClose","onBlur","onUpdate","enterClose","readOnly","maxLength","minLength","selectAll"];var Mi=function(e,t){if(e&&typeof e!="number"){if(e.hasOwnProperty(t))return!0;if(t.indexOf(".")!==-1){for(var n=t.split("."),s=e,o=0;o<n.length;o++){if(!s.hasOwnProperty(n[o]))return!1;s=s[n[o]]}return!0}return!1}return!1},ec=function(e){return e==null||e===""||e.length===0},gi=function(e,t,n,s){if(s===void 0&&(s="."),typeof e=="object"){if(ec(t)){if(n==null)return;typeof n=="object"&&(e=n)}else{typeof t=="string"&&(t=t.split(s));var o=t.pop(),i=function(r,h){var a=r;if(!ec(h)){var u;typeof h=="string"&&(h=h.split("."));for(var l=0,d=h.length;l<d;l++){var c;a[u=h[l]]!=null&&typeof a[u]=="object"||(c={},a[u]=c),a=a[u]}}return a}(e,t);i[o]=n}return e}},Yl=function(e){if(e.parentContainer)return Yl(e.parentContainer);var t=Gg(e);return t?Yl(t):e};class bm extends Rt{constructor(t,n){super(t),this.targetCamera=void 0,this.boot()}boot(){this.scene.sys.events.on("prerender",this.resize,this)}destroy(){this.scene&&(this.scene.sys.events.off("prerender",this.resize,this),super.destroy())}resize(){var t=this.scene,n=this.parent,s=function(c){for(var p,f=Yl(c).cameraFilter,v=c.scene.sys.cameras.cameras,g=0,y=v.length;g<y;g++)if(!((f&(p=v[g]).id)>0))return p;return null}(n);if(s){n.setScrollFactor(0).setOrigin(.5);var o=t.sys.scale.gameSize,i=o.width,r=o.height,h=1/s.zoom,a=i/2,u=r/2,l=i*h,d=r*h;n.x===a&&n.y===u||n.setPosition(a,u),n.width===l&&n.height===d||n.setSize(l,d)}}}const ow=Phaser.GameObjects.Zone;let hw=class extends ow{constructor(e){super(e,0,0,2,2),this.fullWindow=new bm(this)}};var fo=function(e,t,n,s){if(n===void 0&&(n="."),s===void 0&&(s={}),!e)return s;if(t in e)return Object.assign(s,e[t]);for(var o in t+=n,e)o.startsWith(t)&&(s[o.replace(t,"")]=e[o]);return s},lw=function(){var e=this.scene.input.keyboard;this.textEdit.on("open",function(){e.on("keydown-UP",this.cursorMoveUp,this).on("keydown-DOWN",this.cursorMoveDown,this)},this).on("close",function(){e.off("keydown-UP",this.cursorMoveUp,this).off("keydown-DOWN",this.cursorMoveDown,this)},this)},Io=function(e,t,n){if(n===void 0&&(n={}),Array.isArray(t))for(var s=0,o=t.length;s<o;s++)n[i=t[s]]=e[i];else for(var i in t)n[i]=e[i];return n},zr=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var n in t)if(!(n in e))return!1;return!0},uw=function(e){Br(e)||this.setCursorStyle(e).on("cursorin",function(t){var n=this.cursorStyle,s=Io(t.style,n);zr(n,s)||(t.styleSave=s,t.modifyStyle(n))},this).on("cursorout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},dw=function(e){Br(e)||this.setRangeStyle(e).on("rangein",function(t){var n=this.rangeStyle,s=Io(t.style,n);zr(n,s)||(t.styleSave=s,t.modifyStyle(n))},this).on("rangeout",function(t){t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)},cw=function(e){Br(e)||this.setFocusStyle(e).on("open",function(){var t=this.background,n=this.focusStyle,s=Io(t,n);zr(n,s)||(t.styleSave=s,t.modifyStyle(n))},this).on("close",function(){var t=this.background;t.styleSave&&(t.modifyStyle(t.styleSave),t.styleSave=void 0)},this)};function Ri(){}function fw(e,t,n,s,o){let i=0,r=t.length,h=0,a=0;for(;i<r;i++){let l=t[i];if(l.removed){if(l.value=e.join(s.slice(a,a+l.count)),a+=l.count,i&&t[i-1].added){let d=t[i-1];t[i-1]=t[i],t[i]=d}}else{if(!l.added&&o){let d=n.slice(h,h+l.count);d=d.map(function(c,p){let f=s[a+p];return f.length>c.length?f:c}),l.value=e.join(d)}else l.value=e.join(n.slice(h,h+l.count));h+=l.count,l.added||(a+=l.count)}}let u=t[r-1];return r>1&&typeof u.value=="string"&&(u.added||u.removed)&&e.equals("",u.value)&&(t[r-2].value+=u.value,t.pop()),t}function pw(e){return{newPos:e.newPos,components:e.components.slice(0)}}Ri.prototype={diff(e,t,n={}){let s=n.callback;typeof n=="function"&&(s=n,n={}),this.options=n;let o=this;function i(p){return s?(setTimeout(function(){s(void 0,p)},0),!0):p}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));let r=(t=this.removeEmpty(this.tokenize(t))).length,h=e.length,a=1,u=r+h;n.maxEditLength&&(u=Math.min(u,n.maxEditLength));let l=[{newPos:-1,components:[]}],d=this.extractCommon(l[0],t,e,0);if(l[0].newPos+1>=r&&d+1>=h)return i([{value:this.join(t),count:t.length}]);function c(){for(let p=-1*a;p<=a;p+=2){let f,v=l[p-1],g=l[p+1],y=(g?g.newPos:0)-p;v&&(l[p-1]=void 0);let m=v&&v.newPos+1<r,x=g&&0<=y&&y<h;if(m||x){if(!m||x&&v.newPos<g.newPos?(f=pw(g),o.pushComponent(f.components,void 0,!0)):(f=v,f.newPos++,o.pushComponent(f.components,!0,void 0)),y=o.extractCommon(f,t,e,p),f.newPos+1>=r&&y+1>=h)return i(fw(o,f.components,t,e,o.useLongestToken));l[p]=f}else l[p]=void 0}a++}if(s)(function p(){setTimeout(function(){if(a>u)return s();c()||p()},0)})();else for(;a<=u;){let p=c();if(p)return p}},pushComponent(e,t,n){let s=e[e.length-1];s&&s.added===t&&s.removed===n?e[e.length-1]={count:s.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon(e,t,n,s){let o=t.length,i=n.length,r=e.newPos,h=r-s,a=0;for(;r+1<o&&h+1<i&&this.equals(t[r+1],n[h+1]);)r++,h++,a++;return a&&e.components.push({count:a}),e.newPos=r,h},equals(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty(e){let t=[];for(let n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:e=>e,tokenize:e=>e.split(""),join:e=>e.join("")};const gw=new Ri,ic=/^[a-zA-Z\u{C0}-\u{FF}\u{D8}-\u{F6}\u{F8}-\u{2C6}\u{2C8}-\u{2D7}\u{2DE}-\u{2FF}\u{1E00}-\u{1EFF}]+$/u,sc=/\S/,nc=new Ri;nc.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!sc.test(e)&&!sc.test(t)},nc.tokenize=function(e){let t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/);for(let n=0;n<t.length-1;n++)!t[n+1]&&t[n+2]&&ic.test(t[n])&&ic.test(t[n+2])&&(t[n]+=t[n+2],t.splice(n+1,2),n--);return t};const Tm=new Ri;Tm.tokenize=function(e){let t=[],n=e.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let s=0;s<n.length;s++){let o=n[s];s%2&&!this.options.newlineIsToken?t[t.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),t.push(o))}return t},new Ri().tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},new Ri().tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};const mw=Object.prototype.toString,ir=new Ri;function Nl(e,t,n,s,o){let i,r;for(t=t||[],n=n||[],s&&(e=s(o,e)),i=0;i<t.length;i+=1)if(t[i]===e)return n[i];if(mw.call(e)==="[object Array]"){for(t.push(e),r=new Array(e.length),n.push(r),i=0;i<e.length;i+=1)r[i]=Nl(e[i],t,n,s,o);return t.pop(),n.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),typeof e=="object"&&e!==null){t.push(e),r={},n.push(r);let h,a=[];for(h in e)e.hasOwnProperty(h)&&a.push(h);for(a.sort(),i=0;i<a.length;i+=1)h=a[i],r[h]=Nl(e[h],t,n,s,h);t.pop(),n.pop()}else r=e;return r}ir.useLongestToken=!0,ir.tokenize=Tm.tokenize,ir.castInput=function(e){const{undefinedReplacement:t,stringifyReplacer:n=(s,o)=>o===void 0?t:o}=this.options;return typeof e=="string"?e:JSON.stringify(Nl(e,null,null,n),n,"  ")},ir.equals=function(e,t){return Ri.prototype.equals.call(ir,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};const fh=new Ri;fh.tokenize=function(e){return e.slice()},fh.join=fh.removeEmpty=function(e){return e};const vw=Phaser.Utils.Array.Remove,yw={setTextOYByPercentage(e){return this.setTextOY(-this.textVisibleHeight*e),this},getTextOYPercentage(){var e=this.textVisibleHeight;return e===0?0:this._textOY/-e},setTextOXByPercentage(e){return this.setTextOX(-this.textVisibleWidth*e),this},getTextOXPercentage(){var e=this.textVisibleWidth;return e===0?0:this._textOX/-e}},wa=Phaser.Math.Clamp;var rc=function(e,t){var n={lineIndex:0,position:0};if(t<0)return n;for(var s=0,o=e.length;s<o;s++){var i=e[s];if(t<=i){n.lineIndex=s;break}t-=i}return n.position=t,n},ac=function(e,t){var n=0,s=t.lineIndex;if(s<0)return n;for(var o=0,i=e.length;o<i;o++){var r=e[o];if(s>o)n+=r;else{if(s!==o)break;n+=Math.min(t.position,r)}}return n};const xw={cursorMoveLeft(){if(!this.isOpened)return this;var e=wa(this.cursorPosition-1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveRight(){if(!this.isOpened)return this;var e=wa(this.cursorPosition+1,0,this.inputText.length);return this.setCursorPosition(e),this},cursorMoveUp(){if(!this.isOpened)return this;var e=rc(this.characterCountOfLines,this.cursorPosition);e.lineIndex-=1;var t=wa(ac(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this},cursorMoveDown(){if(!this.isOpened)return this;var e=rc(this.characterCountOfLines,this.cursorPosition);e.lineIndex+=1;var t=wa(ac(this.characterCountOfLines,e),0,this.inputText.length);return this.setCursorPosition(t),this}},oc=Phaser.Utils.Objects.IsPlainObject;class du extends Fo{constructor(t,n,s,o,i,r){oc(n)?r=n:oc(o)&&(r=o),r===void 0&&(r={}),function(x,b){var w=!b.textArea;if(Mi(b,"wrap.vAlign")||gi(b,"wrap.vAlign",T=w?"center":"top"),Mi(b,"wrap.wrapMode")||gi(b,"wrap.wrapMode","char"),Mi(b,"wrap.maxLines")||gi(b,"wrap.maxLines",T=w?1:void 0),w&&gi(b,"wrap.wrapWidth",1/0),Mi(b,"wrap.useDefaultTextHeight")||gi(b,"wrap.useDefaultTextHeight",!0),b.edit||(b.edit={}),!Mi(b.edit,"inputType")){var T=w?"text":"textarea";gi(b.edit,"inputType",T)}if(b.clickOutSideTarget===!0){var S=new hw(x);x.add.existing(S),b.clickOutSideTarget=S}}(t,r);var h=r.text;h&&delete r.text;var a=fo(r.background,"focus"),u=fo(r.style,"cursor"),l=fo(r.style,"range");super(t,n,s,o,i,r),this.type="rexCanvasInput",this.contentWidth=void 0,this.contentHeight=void 0,this.lineHeight=void 0,this.linesCount=void 0,this.characterCountOfLines=[],this._text,this.textEdit=function(x,b){var w=rw(b,"edit");return w===void 0&&(w={}),Qi(b,w,aw),new nw(x,w)}(this,r),lw.call(this),r.focusStyle&&Object.assign(a,r.focusStyle),cw.call(this,a),r.cursorStyle&&Object.assign(u,r.cursorStyle),uw.call(this,u),r.rangeStyle&&Object.assign(l,r.rangeStyle),Br(l)&&Object.assign(l,u),dw.call(this,l);var d=r.onAddChar;d&&this.on("addchar",d);var c=r.onCursorIn;c&&this.on("cursorin",c);var p=r.onCursorOut;p&&this.on("cursorout",p);var f=!r.onRangeIn&&!r.onRangeOut,v=f?r.onCursorIn:r.onRangeIn;v&&this.on("rangein",v);var g=f?r.onCursorOut:r.onRangeOut;g&&this.on("rangeout",g);var y,m=r.onMoveCursor;m&&this.on("movecursor",m),this.setParseTextCallback(r.parseTextCallback),this.lastInsertCursor=((y=this.createCharChild("|")).text="",y),h||(h=""),this.setText(h)}addChild(t,n){if(super.addChild(t,n),Array.isArray(t))for(var s=t,o=0,i=s.length;o<i;o++)t=s[o],Rs(t)&&this.emit("addchar",t,n+o,this);else Rs(t)&&this.emit("addchar",t,n,this);return this}get text(){return this._text}set text(t){t=t==null?"":t.toString(),this._text!==t&&(function(n,s){var o=n.text;if(s!==o){if(o==null&&(o=""),vw(n.children,n.lastInsertCursor),s==="")n.removeChildren();else for(var i=(l=o,d=s,gw.diff(l,d,void 0)),r=0,h=0,a=i.length;h<a;h++){var u=i[h];u.removed?n.removeText(r,u.count):(u.added&&n.insertText(r,u.value),r+=u.count)}var l,d;n.children.push(n.lastInsertCursor),n.runWrap(),n.isOpened&&n.textEdit.setText(s),n.emit("textchange",s,n)}}(this,t),this._text=t)}setText(t){return this.text=t,this}appendText(t){return this.setText(this.text+t),this}runWrap(t){var n=super.runWrap(t);this.contentWidth=n.maxLineWidth,this.contentHeight=n.linesHeight,this.lineHeight=n.lineHeight,this.linesCount=n.lines.length,this.characterCountOfLines.length=0;for(var s=n.lines,o=0,i=s.length;o<i;o++){for(var r=s[o].children,h=0,a=0,u=r.length;a<u;a++){var l=r[a];l.active&&!l.removed&&Rs(l)&&h++}this.characterCountOfLines.push(h)}return n}setSize(t,n){return this.width===t&&this.height===n||(super.setSize(t,n),this.runWrap()),this}get displayText(){return this.text}set displayText(t){this.text=t}setDisplayText(t){return this.displayText=t,this}get inputText(){return this.textEdit.text}set inputText(t){this.textEdit.text=t}setInputText(t){return this.inputText=t,this}setParseTextCallback(t){return t||(t=bw),this.parseTextCallback=t,this}get value(){return this.parseTextCallback(this.text)}set value(t){this.setText(t)}getValue(){return this.value}setValue(t){return this.value=t,this}get readOnly(){return this.textEdit.readOnly}set readOnly(t){this.textEdit.readOnly=t}setReadOnly(t){return this.textEdit.setReadOnly(t),this}open(t){return t&&this.textEdit.once("close",t),this.textEdit.open(),this}close(){return this.textEdit.close(),this}get isOpened(){return this.textEdit.isOpened}setFocusStyle(t){return this.focusStyle=t,this}setCursorStyle(t){return this.cursorStyle=t,this}setRangeStyle(t){return this.rangeStyle=t,this}setNumberInput(){return this.textEdit.setNumberInput().setSelectAllWhenFocusEnable(),this.parseTextCallback=Number,this}get maxLength(){return this.textEdit.maxLength}set maxLength(t){this.textEdit.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.textEdit.minLength}set minLength(t){this.textEdit.minLength=t}setMinLength(t){return this.minLength=t,this}get cursorPosition(){return this.textEdit.cursorPosition}set cursorPosition(t){this.isOpened&&(this.textEdit.cursorPosition=t,this.textEdit.requestCursorPosition=t)}setCursorPosition(t){return this.cursorPosition=t,this}get topTextOY(){return 0}get bottomTextOY(){return-this.tableVisibleHeight}get leftTextOX(){return 0}get rightTextOX(){return-this.textVisibleWidth}get textVisibleHeight(){var t=this.contentHeight-this.height;return t<0&&(t=0),t}get textVisibleWidth(){var t=this.contentWidth-this.width;return t<0&&(t=0),t}set t(t){this.setTextOYByPercentage(t).updateTexture()}get t(){return this.getTextOYPercentage()}set s(t){this.setTextOXByPercentage(t).updateTexture()}get s(){return this.getTextOXPercentage()}}var bw=function(e){return e};Object.assign(du.prototype,yw,xw);var wm=function(e){return Mn(e).loop.delta};Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap;const Tw=Phaser.GameObjects.GetCalcMatrix,ww=Phaser.Renderer.Canvas.SetTransform,Sw={renderWebGL:function(e,t,n,s){t.updateData(),n.addToRenderList(t);var o=e.pipelines.set(t.pipeline),i=Tw(t,n,s),r=o.calcMatrix.copyFrom(i.calc),h=t._displayOriginX,a=t._displayOriginY,u=n.alpha*t.alpha;e.pipelines.preBatch(t);for(var l,d=t.geom,c=0,p=d.length;c<p;c++)(l=d[c]).visible&&l.webglRender(o,r,u,h,a);e.pipelines.postBatch(t)},renderCanvas:function(e,t,n,s){t.updateData(),n.addToRenderList(t);var o=e.currentContext;if(ww(e,o,t,n,s)){for(var i,r=t._displayOriginX,h=t._displayOriginY,a=t.geom,u=0,l=a.length;u<l;u++)(i=a[u]).visible&&i.canvasRender(o,r,h);o.restore()}}},Cw=Phaser.GameObjects.Shape,Ew=Phaser.Utils.Array.Remove;class Di extends Cw{constructor(t,n,s,o,i){n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=2),i===void 0&&(i=o),super(t,"rexShapes",[]),this._width=-1,this._height=-1,this.dirty=!0,this.isSizeChanged=!0,this.shapes={},this.setPosition(n,s),this.setSize(o,i),this.updateDisplayOrigin()}get width(){return this._width}set width(t){this.setSize(t,this._height)}get height(){return this._height}set height(t){this.setSize(this._width,t)}setDirty(t){return t===void 0&&(t=!0),this.dirty=t,this}setSize(t,n){this.isSizeChanged=this.isSizeChanged||this._width!==t||this._height!==n,this.dirty=this.dirty||this.isSizeChanged,this._width=t,this._height=n,this.updateDisplayOrigin();var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=t,s.hitArea.height=n),this}resize(t,n){return this.setSize(t,n),this}get fillColor(){return this._fillColor}set fillColor(t){this.setFillStyle(t,this._fillAlpha)}get fillAlpha(){return this._fillAlpha}set fillAlpha(t){this.setFillStyle(this._fillColor,t)}setFillStyle(t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.fillColor!==t||this.fillAlpha!==n,this._fillColor=t,this._fillAlpha=n,this}get lineWidth(){return this._lineWidth}set lineWidth(t){this.setStrokeStyle(t,this._strokeColor,this._strokeAlpha)}get strokeColor(){return this._strokeColor}set strokeColor(t){this.setStrokeStyle(this._lineWidth,t,this._strokeAlpha)}get strokeAlpha(){return this._strokeAlpha}set strokeAlpha(t){this.setStrokeStyle(this._lineWidth,this._strokeColor,t)}setStrokeStyle(t,n,s){return s===void 0&&(s=1),this.dirty=this.dirty||this.lineWidth!==t||this.strokeColor!==n||this.strokeAlpha!==s,this._lineWidth=t,this._strokeColor=n,this._strokeAlpha=s,this}updateShapes(){}updateData(){if(!this.dirty)return this;this.updateShapes();for(var t=this.geom,n=0,s=t.length;n<s;n++){var o=t[n];o.dirty&&o.updateData()}return this.isSizeChanged=!1,this.dirty=!1,this}clear(){return this.geom.length=0,ss(this.shapes),this.dirty=!0,this}getShape(t){return this.shapes[t]}getShapes(){return this.geom}addShape(t){this.geom.push(t);var n=t.name;return n&&(this.shapes[n]=t),this.dirty=!0,this}deleteShape(t){var n=this.getShape(t);return n&&(delete this.shapes[t],Ew(this.geom,n)),this}}Object.assign(Di.prototype,Sw);const Pw={setBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.boxFillColor!==e||this.boxFillAlpha!==t,this.boxFillColor=e,this.boxFillAlpha=t,this},setUncheckedBoxFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.uncheckedBoxFillColor!==e||this.uncheckedBoxFillAlpha!==t,this.uncheckedBoxFillColor=e,this.uncheckedBoxFillAlpha=t,this},setBoxStrokeStyle(e,t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.boxLineWidth!==e||this.boxStrokeColor!==t||this.boxStrokeAlpha!==n,this.boxLineWidth=e,this.boxStrokeColor=t,this.boxStrokeAlpha=n,this},setUncheckedBoxStrokeStyle(e,t,n){return n===void 0&&(n=1),this.dirty=this.dirty||this.uncheckedBoxLineWidth!==e||this.uncheckedBoxStrokeColor!==t||this.uncheckedBoxStrokeAlpha!==n,this.uncheckedBoxLineWidth=e,this.uncheckedBoxStrokeColor=t,this.uncheckedBoxStrokeAlpha=n,this},setCheckerStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.checkerColor!==e||this.checkAlpha!==t,this.checkerColor=e,this.checkAlpha=t,this},setBoxShape(e){return e===void 0&&(e=!1),this.isCircleShape===e||(this.isCircleShape=e,this.isSizeChanged=!0,this.dirty=!0),this}},Ow={setBoxSize(e){return this.dirty=this.dirty||this.boxSize!==e,this.boxSize=e,this},setCheckerSize(e){return this.dirty=this.dirty||this.checkerSize!==e,this.checkerSize=e,this}};class To{constructor(){this.name=void 0,this.dirty=!0,this.visible=!0,this.data=void 0,this.isFilled=!1,this.fillColor=void 0,this.fillAlpha=1,this.isStroked=!1,this.lineWidth=1,this.strokeColor=void 0,this.strokeAlpha=1}setName(t){return this.name=t,this}setVisible(t){return t===void 0&&(t=!0),this.visible=t,this}reset(){return this.setVisible().fillStyle().lineStyle(),this}webglRender(t,n,s,o,i){}canvasRender(t,n,s){}updateData(){this.dirty=!1}}Object.assign(To.prototype,{fillStyle:function(e,t){return e==null?this.isFilled=!1:(t===void 0&&(t=1),this.isFilled=!0,this.fillColor=e,this.fillAlpha=t),this},lineStyle:function(e,t,n){return e==null||t==null?this.isStroked=!1:(n===void 0&&(n=1),this.isStroked=!0,this.lineWidth=e,this.strokeColor=t,this.strokeAlpha=n),this}},Lo);const kw=Phaser.Geom.Polygon.Earcut;class Yr extends To{constructor(){super(),this.pathData=[],this.pathIndexes=[],this.closePath=!1}updateData(){return this.pathIndexes=kw(this.pathData),super.updateData(),this}webglRender(t,n,s,o,i){this.isFilled&&rg(t,n,this,s,o,i),this.isStroked&&vo(t,this,s,o,i)}canvasRender(t,n,s){var o=this.pathData,i=o.length-1,r=o[0]-n,h=o[1]-s;t.beginPath(),t.moveTo(r,h),this.closePath||(i-=2);for(var a=2;a<i;a+=2){var u=o[a]-n,l=o[a+1]-s;t.lineTo(u,l)}this.closePath&&t.closePath(),this.isFilled&&(Or(t,this),t.fill()),this.isStroked&&(kr(t,this),t.stroke())}}const hc=Phaser.Math.DegToRad;class Ln extends Yr{constructor(t,n,s,o,i,r,h,a){t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),i===void 0&&(i=0),r===void 0&&(r=360),h===void 0&&(h=!1),a===void 0&&(a=!1),super(),this.setCenterPosition(t,n),this.setRadius(s,o),this.setAngle(i,r,h),this.setPie(a),this.setIterations(32)}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setCenterPosition(t,n){return n===void 0&&(n=t),this.x=t,this.y=n,this}get radiusX(){return this._radiusX}set radiusX(t){this.dirty=this.dirty||this._radiusX!==t,this._radiusX=t}get radiusY(){return this._radiusY}set radiusY(t){this.dirty=this.dirty||this._radiusY!==t,this._radiusY=t}setRadius(t,n){return n===void 0&&(n=t),this.radiusX=t,this.radiusY=n,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!==t,this._startAngle=t}get endAngle(){return this._endAngle}set endAngle(t){this.dirty=this.dirty||this._endAngle!==t,this._endAngle=t}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!==t,this._anticlockwise=t}setAngle(t,n,s){return s===void 0&&(s=!1),this.startAngle=t,this.endAngle=n,this.anticlockwise=s,this}get pie(){return this._pie}set pie(t){this.dirty=this.dirty||this._pie!==t,this._pie=t}setPie(t){return t===void 0&&(t=!0),this.pie=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){return this.pathData.length=0,this.pie&&this.pathData.push(this.x,this.y),Zt(this.x,this.y,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise,this.iterations,this.pathData),this.pie&&this.pathData.push(this.x,this.y),this.pathData.push(this.pathData[0],this.pathData[1]),super.updateData(),this}canvasRender(t,n,s){t.beginPath();var o=this.x-n,i=this.y-s,r=hc(this.startAngle),h=hc(this.endAngle);this.pie&&(t.moveTo(o,i),t.lineTo(o+Math.cos(r)*this.radiusX,i+Math.sin(r)*this.radiusY)),t.ellipse(o,i,this.radiusX,this.radiusY,0,r,h,this.anticlockwise),this.pie&&t.lineTo(o,i),this.isFilled&&(Or(t,this),t.fill()),this.isStroked&&(kr(t,this),t.stroke())}}class Ge extends Ln{constructor(t,n,s){super(t,n,s,s,0,360)}}class rs extends Yr{constructor(t,n,s,o){t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),super(),this.setP0(t,n),this.setP1(s,o)}get x0(){return this._x0}set x0(t){this.dirty=this.dirty||this._x0!==t,this._x0=t}get y0(){return this._y0}set y0(t){this.dirty=this.dirty||this._y0!==t,this._y0=t}setP0(t,n){return this.x0=t,this.y0=n,this}get x1(){return this._x1}set x1(t){this.dirty=this.dirty||this._x1!==t,this._x1=t}get y1(){return this._y1}set y1(t){this.dirty=this.dirty||this._y1!==t,this._y1=t}setP1(t,n){return this.x1=t,this.y1=n,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x0,this.y0),super.updateData(),this}}const lc=Phaser.Math.Interpolation.QuadraticBezier,uc=Phaser.Math.Interpolation.CubicBezier,dc=Phaser.Math.Interpolation.CatmullRom;var Sm=function(e){var t=e.length;if(t<2)return e;var n=e[t-2],s=e[t-1];return e.push(n),e.push(s),e};const Mw={clear(){return this.start(),this},start(){return this.startAt(),this},startAt(e,t){return this.restorePathData(),this.accumulationLengths=void 0,function(n,s,o){o.length=0,n!=null&&o.push(n,s)}(e,t,this.pathData),this.firstPointX=e,this.firstPointY=t,this.lastPointX=e,this.lastPointY=t,this},lineTo(e,t,n){return n===void 0&&(n=!1),n&&(e+=this.lastPointX,t+=this.lastPointY),$t(e,t,this.pathData),this.lastPointX=e,this.lastPointY=t,this},verticalLineTo(e,t){return this.lineTo(e,this.lastPointY,t),this},horizontalLineTo(e,t){return this.lineTo(this.lastPointX,e,t),this},ellipticalArc(e,t,n,s,o,i,r){return r===void 0&&(r=!1),Zt(e,t,n,s,o,i,r,this.iterations,this.pathData),this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this},arc(e,t,n,s,o,i){return this.ellipticalArc(e,t,n,n,s,o,i),this},quadraticBezierTo(e,t,n,s){return function(o,i,r,h,a,u){for(var l=u.length,d=u[l-2],c=u[l-1],p=1,f=a-1;p<=f;p++){var v=p/f;u.push(lc(v,d,o,r),lc(v,c,i,h))}}(e,t,n,s,this.iterations,this.pathData),this.lastPointX=n,this.lastPointY=s,this},cubicBezierTo(e,t,n,s,o,i){return function(r,h,a,u,l,d,c,p){for(var f=p.length,v=p[f-2],g=p[f-1],y=1,m=c-1;y<=m;y++){var x=y/m;p.push(uc(x,v,r,a,l),uc(x,g,h,u,d))}}(e,t,n,s,o,i,this.iterations,this.pathData),this.lastPointX=o,this.lastPointY=i,this},catmullRomTo(...e){return function(t,n,s){for(var o=s.length,i=[s[o-2]],r=[s[o-1]],h=0,a=t.length;h<a;h+=2)i.push(t[h]),r.push(t[h+1]);h=1;for(var u=n-1;h<=u;h++){var l=h/u;s.push(dc(i,l),dc(r,l))}}(e,this.iterations,this.pathData),this.lastPointX=e[e.length-2],this.lastPointY=e[e.length-1],this},close(){var e=this.pathData[0],t=this.pathData[1];return e===this.lastPointX&&t===this.lastPointY||this.lineTo(e,t),this.closePath=!0,this},end(){return Sm(this.pathData),this}},_w=Phaser.Math.RotateAround;var Cm=function(e,t,n){for(var s=0,o=n.length-1;s<o;s+=2)n[s]+=e,n[s+1]+=t;return n};const Aw=Phaser.Math.DegToRad;Phaser.Math.RotateAround;const Rw={rotateAround(e,t,n){if(this.pathData.length===0)return this;(function(o,i,r,h){for(var a={x:0,y:0},u=0,l=h.length-1;u<l;u+=2)a.x=h[u],a.y=h[u+1],_w(a,o,i,r),h[u]=a.x,h[u+1]=a.y})(e,t,n=Aw(n),this.pathData);var s=this.pathData.length;return this.lastPointX=this.pathData[s-2],this.lastPointY=this.pathData[s-1],this},scale(e,t,n,s){return this.pathData.length===0||(function(o,i,r,h,a){for(var u=0,l=a.length-1;u<l;u+=2){var d=a[u]-o,c=a[u+1]-i;d*=r,c*=h,a[u]=d+o,a[u+1]=c+i}}(e,t,n,s,this.pathData),this.lastPointX=this.pathData[pathDataCnt-2],this.lastPointY=this.pathData[pathDataCnt-1]),this},offset(e,t){return Cm(e,t,this.pathData),this}};var wo=function(e,t,n,s){n===void 0&&(n=0),s===void 0&&(s=t.length),e.length=s-n;for(var o=0,i=e.length;o<i;o++)e[o]=t[o+n];return e};const Lw={savePathData(){return this.pathDataSaved||(this.pathDataSave=[...this.pathData],this.pathData.length=0,this.pathDataSaved=!0),this},restorePathData(){return this.pathDataSaved?(wo(this.pathData,this.pathDataSave),this.pathDataSave=void 0,this.pathDataSaved=!1,this):this}},Dw=Phaser.Math.Distance.Between,Fw=Phaser.Math.Wrap,Bw=Phaser.Math.Linear;var cc=function(e,t,n,s,o){if(s===void 0&&(s=n,n=0),(n=fc(n))!==(s=fc(s))){var i=t[t.length-1],r=i*n,h=i*s;n<s?ph(e,t,r,h,o):(ph(e,t,r,i,o),ph(e,t,0,h,o)),Sm(o)}},ph=function(e,t,n,s,o){for(var i=n>0,r=0,h=t.length;r<h;r++){var a=2*r,u=t[r];if(i){if(u<n)continue;if(u==n)i=!1;else{var l=1-(u-n)/(u-t[r-1]);o.push(Sa(e,a-2,a,l)),o.push(Sa(e,a-1,a+1,l)),i=!1}}if(!(u<=s)){l=1-(u-s)/(u-t[r-1]),o.push(Sa(e,a-2,a,l)),o.push(Sa(e,a-1,a+1,l));break}if(o.push(e[a]),o.push(e[a+1]),u===s)break}},Sa=function(e,t,n,s){var o=e[t],i=e[n];return Bw(o,i,s)},fc=function(e){return e===0?0:e%1==0?1:Fw(e,0,1)};const Iw={updateAccumulationLengths(){if(this.accumulationLengths==null)this.accumulationLengths=[];else if(this.accumulationLengths.length===this.pathData.length/2)return this;for(var e,t,n,s,o=this.accumulationLengths,i=this.pathData,r=0,h=0,a=i.length;h<a;h+=2)n=i[h],s=i[h+1],r+=e===void 0?0:Dw(e,t,n,s),o.push(r),e=n,t=s;return this.totalPathLength=r,this},setDisplayPathSegment(e,t){return this.pathDataSaved||(this.updateAccumulationLengths(),this.savePathData()),this.pathData.length=0,cc(this.pathDataSave,this.accumulationLengths,e,t,this.pathData),this},appendFromPathSegment(e,t,n){return t===void 0?this.pathData.push(...e.pathData):(e.updateAccumulationLengths(),cc(e.pathData,e.accumulationLengths,t,n,this.pathData)),this.firstPointX=this.pathData[0],this.firstPointY=this.pathData[1],this.lastPointX=this.pathData[this.pathData.length-2],this.lastPointY=this.pathData[this.pathData.length-1],this}},Xw={draw(e,t,n){var s=this.toPoints();return t&&e.fillPoints(s,this.closePath,this.closePath),n&&e.strokePoints(s,this.closePath,this.closePath),this}},zw=Phaser.Geom.Polygon;class Em{constructor(t){t===void 0&&(t=[]),this.pathData=t,this.closePath=!1,this.setIterations(32),this.firstPointX=void 0,this.firstPointY=void 0,this.lastPointX=void 0,this.lastPointY=void 0,this.accumulationLengths=void 0}setIterations(t){return this.iterations=t,this}toPoints(){return function(t,n){n===void 0&&(n=[]);for(var s=0,o=t.length-1;s<o;s+=2)n.push({x:t[s],y:t[s+1]});return n}(this.pathData)}toPolygon(t){return function(n,s){return s===void 0&&(s=new zw),s.setTo(n),s}(this.pathData,t)}}Object.assign(Em.prototype,Mw,Rw,Lw,Iw,Xw);class ie extends Yr{constructor(){super(),this.builder=new Em(this.pathData)}get iterations(){return this.builder.iterations}set iterations(t){this.dirty=this.dirty||this.builder.iterations!==t,this.builder.setIterations(t)}setIterations(t){return this.iterations=t,this}get lastPointX(){return this.builder.lastPointX}get lastPointY(){return this.builder.lastPointY}start(){return this.builder.start(),this.dirty=!0,this}startAt(t,n){return this.builder.startAt(t,n),this.dirty=!0,this}lineTo(t,n,s){return this.builder.lineTo(t,n,s),this.dirty=!0,this}verticalLineTo(t,n){return this.builder.verticalLineTo(t,n),this.dirty=!0,this}horizontalLineTo(t,n){return this.builder.horizontalLineTo(t,n),this.dirty=!0,this}ellipticalArc(t,n,s,o,i,r,h){return this.builder.ellipticalArc(t,n,s,o,i,r,h),this.dirty=!0,this}arc(t,n,s,o,i,r){return this.builder.arc(t,n,s,o,i,r),this.dirty=!0,this}quadraticBezierTo(t,n,s,o){return this.builder.quadraticBezierTo(t,n,s,o),this.dirty=!0,this}cubicBezierTo(t,n,s,o,i,r){return this.builder.cubicBezierTo(t,n,s,o,i,r),this.dirty=!0,this}catmullRomTo(...t){return this.builder.catmullRomTo(...t),this.dirty=!0,this}close(){return this.builder.close(),this.closePath=this.builder.closePath,this.dirty=!0,this}end(){return this.builder.end(),this.dirty=!0,this}rotateAround(t,n,s){return this.builder.rotateAround(t,n,s),this.dirty=!0,this}scale(t,n,s,o){return this.builder.scale(t,n,s,o),this.dirty=!0,this}offset(t,n){return this.builder.offset(t,n),this.dirty=!0,this}toPolygon(t){return this.builder.toPolygon(t)}appendPathFrom(t,n,s){return this.builder.appendFromPathSegment(t.builder,n,s),this}copyPathFrom(t,n,s){return this.builder.clear().appendFromPathSegment(t.builder,n,s),this}setDisplayPathSegment(t,n){return this.builder.setDisplayPathSegment(t,n),this}}const Yw=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Ca=Phaser.Utils.Objects.GetValue;class So extends Yr{constructor(t,n,s,o,i,r){t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=s),i===void 0&&(i=0),r===void 0&&(r=6),super(),this.setTopLeftPosition(t,n),this.setSize(s,o),this.setRadius(i),this.setIterations(r),this.closePath=!0}get x(){return this._x}set x(t){this.dirty=this.dirty||this._x!==t,this._x=t}get y(){return this._y}set y(t){this.dirty=this.dirty||this._y!==t,this._y=t}setTopLeftPosition(t,n){return this.x=t,this.y=n,this}get width(){return this._width}set width(t){this.dirty=this.dirty||this._width!==t,this._width=t}get height(){return this._height}set height(t){this.dirty=this.dirty||this._height!==t,this._height=t}setSize(t,n){return this.width=t,this.height=n,this}get centerX(){return this.x+this.width/2}set centerX(t){this.x=t-this.width/2}get centerY(){return this.y+this.height/2}set centerY(t){this.y=t-this.height/2}setCenterPosition(t,n){return this.centerX=t,this.centerY=n,this}get radiusTL(){return this._radiusTL}set radiusTL(t){var n=t>0;this.dirty=this.dirty||this._radiusTL!==t||this._convexTL!==n,this._convexTL=n,this._radiusTL=Math.abs(t)}get radiusTR(){return this._radiusTR}set radiusTR(t){var n=t>0;this.dirty=this.dirty||this._radiusTR!==t||this._convexTR!==n,this._convexTR=n,this._radiusTR=Math.abs(t)}get radiusBL(){return this._radiusBL}set radiusBL(t){var n=t>0;this.dirty=this.dirty||this._radiusBL!==t||this._convexBL!==n,this._convexBL=n,this._radiusBL=Math.abs(t)}get radiusBR(){return this._radiusBR}set radiusBR(t){var n=t>0;this.dirty=this.dirty||this._radiusBR!==t||this._convexBR!==n,this._convexBR=n,this._radiusBR=Math.abs(t)}get radius(){return Math.max(this.radiusTL,this.radiusTR,this.radiusBL,this.radiusBR)}set radius(t){typeof t=="number"?(this.radiusTL=t,this.radiusTR=t,this.radiusBL=t,this.radiusBR=t):(this.radiusTL=Ca(t,"tl",0),this.radiusTR=Ca(t,"tr",0),this.radiusBL=Ca(t,"bl",0),this.radiusBR=Ca(t,"br",0))}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}get iterations(){return this._iterations}set iterations(t){this.dirty=this.dirty||this._iterations!==t,this._iterations=t}setIterations(t){return this.iterations=t,this}updateData(){var t=this.pathData;t.length=0;var n,s=this.width,o=this.height,i=this.iterations+1;return(n=this.radiusTL)>0?this._convexTL?Zt(n,n,n,n,180,270,!1,i,t):Zt(0,0,n,n,90,0,!0,i,t):$t(0,0,t),(n=this.radiusTR)>0?this._convexTR?Zt(s-n,n,n,n,270,360,!1,i,t):Zt(s,0,n,n,180,90,!0,i,t):$t(s,0,t),(n=this.radiusBR)>0?this._convexBR?Zt(s-n,o-n,n,n,0,90,!1,i,t):Zt(s,o,n,n,270,180,!0,i,t):$t(s,o,t),(n=this.radiusBL)>0?this._convexBL?Zt(n,o-n,n,n,90,180,!1,i,t):Zt(0,o,n,n,360,270,!0,i,t):$t(0,o,t),t.push(t[0],t[1]),Cm(this.x,this.y,t),super.updateData(),this}}const Nw=Phaser.Renderer.WebGL.Utils.getTintAppendFloatAlpha,Gw={buildShapes(){this.addShape(new So().setName("box")).addShape(new ie().setName("checker"))},updateShapes(){var e=this.width/2,t=this.height/2,n=Math.min(e,t),s=2*n,o=e-n,i=t-n,r=this.boxLineWidth,h=Math.max(s/10,2),a=this.getShape("box"),u=this.getShape("checker");if(this.isSizeChanged){var l=s*(1-this.boxSize)/2,d=r/2,c=s*this.boxSize-r;a.setTopLeftPosition(o+d+l,i+d+l).setSize(c,c),this.isCircleShape?a.setRadius(c/2):a.setRadius(0),l=s*(1-this.checkerSize)/2;var p=s*this.checkerSize/4,f=1*p,v=2*p,g=3*p;u.startAt(f,v).lineTo(v,g).lineTo(g,f).offset(o+l,i+l).end()}this.checked?(a.fillStyle(this.boxFillColor,this.boxFillAlpha).lineStyle(r,this.boxStrokeColor,this.boxStrokeAlpha),u.lineStyle(h,this.checkerColor)):(a.fillStyle(this.uncheckedBoxFillColor,this.uncheckedBoxFillAlpha).lineStyle(r,this.uncheckedBoxStrokeColor,this.uncheckedBoxStrokeAlpha),u.lineStyle()),this.checked&&u.setDisplayPathSegment(this.checkerAnimProgress)}},Uw={setCheckerAnimationDuration(e){return e===void 0&&(e=0),this.checkerAnimDuration=e,this},playCheckerAnimation(){return this.checkerAnimProgressTask===void 0&&(this.checkerAnimProgressTask=new Qe(this,{eventEmitter:null})),this.checkerAnimProgressTask.restart({key:"checkerAnimProgress",from:0,to:1,duration:this.checkerAnimDuration}),this},stopCheckerAnimation(){return this.checkerAnimProgressTask===void 0||this.checkerAnimProgressTask.stop(),this}};var Pm={};Object.assign(Pm,Pw,Ow,Gw,Uw);const gh=23730,Ft=Phaser.Utils.Objects.GetValue,pc=Phaser.Utils.Objects.IsPlainObject;Object.assign((class extends Di{constructor(e,t,n,s,o,i,r){pc(t)?(t=Ft(r=t,"x",0),n=Ft(r,"y",0),s=Ft(r,"width",2),o=Ft(r,"height",2),i=Ft(r,"color",gh)):pc(i)&&(i=Ft(r=i,"color",gh)),super(e,t,n,s,o),this.type="rexCheckbox",i===void 0&&(i=gh),this.setBoxShape(Ft(r,"circleBox",!1)),this.setBoxFillStyle(i,Ft(r,"boxFillAlpha",1)),this.setUncheckedBoxFillStyle(Ft(r,"uncheckedColor",null),Ft(r,"uncheckedBoxFillAlpha",1)),this.setBoxStrokeStyle(Ft(r,"boxLineWidth",4),Ft(r,"boxStrokeColor",i),Ft(r,"boxStrokeAlpha",1)),this.setUncheckedBoxStrokeStyle(this.boxLineWidth,Ft(r,"uncheckedBoxStrokeColor",this.boxStrokeColor),Ft(r,"uncheckedBoxStrokeAlpha",this.boxStrokeAlpha)),this.setCheckerStyle(Ft(r,"checkerColor",16777215),Ft(r,"checkerAlpha",1)),this.setBoxSize(Ft(r,"boxSize",1)),this.setCheckerSize(Ft(r,"checkerSize",1)),this.setCheckerAnimationDuration(Ft(r,"animationDuration",150)),this.buildShapes();var h=Ft(r,"checked");h===void 0&&(h=Ft(r,"value",!1)),this.setValue(h)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,e?this.playCheckerAnimation():this.stopCheckerAnimation(),this.emit("valuechange",e))}setValue(e){return this.value=e,this}toggleValue(){return this.setValue(!this.value),this}get checked(){return this.value}set checked(e){this.value=e}setChecked(e){return e===void 0&&(e=!0),this.setValue(e),this}toggleChecked(){return this.toggleValue(),this}get checkerAnimProgress(){return this._checkerAnimProgress}set checkerAnimProgress(e){this._checkerAnimProgress!==e&&(this._checkerAnimProgress=e,this.dirty=!0)}}).prototype,Pm);const sr=Phaser.Utils.Objects.GetValue;class Nr extends Rt{constructor(t,n){super(t,n),this._enable=void 0,t.setInteractive(sr(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.isDown=!1,this.isOver=!1,this.setEnable(sr(t,"enable",!0)),this.setMode(sr(t,"mode",1)),this.setClickInterval(sr(t,"clickInterval",100)),this.setDragThreshold(sr(t,"threshold",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this),t.on("pointerover",this.onOver,this),t.on("pointerout",this.onOut,this)}shutdown(t){this.isShutdown||(this.pointer=null,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var n=t?"enable":"disable";this.emit(n,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=Ww[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}onPress(t,n,s,o){this.pointer===void 0&&(this.pointer=t,this.isDown=!0,this.emit("down",this,this.parent,t,o),this.mode===0&&this.click(t.downTime,t,o))}onRelease(t,n,s,o){this.pointer===t&&(this.isDown=!1,this.emit("up",this,this.parent,t,o),this.mode===1&&this.click(t.upTime,t,o),this.pointer=void 0)}onPointOut(t,n){this.pointer===t&&this.cancel()}onMove(t,n,s,o){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&t.getDistance()>=this.dragThreshold&&this.cancel()}onOver(t,n,s,o){return this.enable?(this.isOver=!0,this.emit("over",this,this.parent,t,o),this):this}onOut(t,n){return this.enable?(this.isOver=!1,this.emit("out",this,this.parent,t,n),this):this}click(t,n,s){if(!this.enable)return this;if(t===void 0)return this.emit("click",this,this.parent,n,s),this;this.pointer=void 0;var o=this.lastClickTime;return o!==void 0&&t-o<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.parent,n,s)),this}cancel(){return this.pointer=void 0,this}}const Ww={press:0,pointerdown:0,release:1,pointerup:1};Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.IsPlainObject;const Vw={setTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.trackFillColor!==e||this.trackFillAlpha!==t,this.trackFillColor=e,this.trackFillAlpha=t,this},setFalseValueTrackFillStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.falseValueTrackColor!==e||this.uncheckedTrackFillAlpha!==t,this.falseValueTrackColor=e,this.falseValueTrackFillAlpha=t,this},setThumbStyle(e,t){return t===void 0&&(t=1),this.dirty=this.dirty||this.thumbColor!==e||this.checkAlpha!==t,this.thumbColor=e,this.thumbAlpha=t,this}},jw={setTrackSize(e,t){return this.dirty=this.dirty||this.trackWidth!==e||this.trackHeight!==t,this.trackWidth=e,this.trackHeight=t,this},setTrackRadius(e){return this.dirty=this.dirty||this.trackRadius!==e,this.trackRadius=e,this},setThumbSize(e,t){return t===void 0&&(t=e),this.dirty=this.dirty||this.thumbWidth!==e||this.thumbHeight!==t,this.thumbWidth=e,this.thumbHeight=t,this},setThumbRadius(e){return this.dirty=this.dirty||this.thumbRadius!==e,this.thumbRadius=e,this}},Hw={setThumbPosition(e,t){return t===void 0&&(t=1-e),this.thumbLeftX=e,this.thumbRightX=t,this},setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};var mh=function(e,t,n){return(t-e)*n+e};const gc=Phaser.Math.Linear,Kw={buildShapes(){this.addShape(new So().setName("track")).addShape(new So().setName("thumb"))},updateShapes(){var e=this.width,t=this.height,n=this.value?this.toggleAnimProgress:1-this.toggleAnimProgress,s=this.getShape("track");if(this.isSizeChanged){var o=e*this.trackWidth,i=t*this.trackHeight,r=(e-o)/2,h=(t-i)/2,a=t*this.trackRadius;s.setTopLeftPosition(r,h).setSize(o,i).setRadius(a)}var u,l,d,c=(u=this.falseValueTrackColor,l=this.trackFillColor,d=n,(255&mh(Cr(u),Cr(l),d))<<16|(255&mh(Er(u),Er(l),d))<<8|255&mh(Pr(u),Pr(l),d)),p=gc(this.falseValueTrackFillAlpha,this.trackFillAlpha,n);s.fillStyle(c,p);var f=this.getShape("thumb");if(this.isSizeChanged){var v=e*this.thumbWidth,g=t*this.thumbHeight,y=t*this.thumbRadius;f.setSize(v,g).setRadius(y)}var m=gc(this.thumbLeftX,this.thumbRightX,n)*e;this.rtl&&(m=e-m);var x=t/2;f.setCenterPosition(m,x),f.fillStyle(this.thumbColor,this.thumbAlpha)}},qw={setToggleAnimationDuration(e){return e===void 0&&(e=0),this.toggleAnimDuration=e,this},playToggleAnimation(){return this.toggleAnimProgressTask===void 0&&(this.toggleAnimProgressTask=new Qe(this,{eventEmitter:null})),this.toggleAnimProgressTask.restart({key:"toggleAnimProgress",from:0,to:1,duration:this.toggleAnimDuration}),this},stopToggleAnimation(){return this.toggleAnimProgressTask===void 0||this.toggleAnimProgressTask.stop(),this}};var Om={};Object.assign(Om,Vw,jw,Hw,Kw,qw);const Bt=Phaser.Utils.Objects.GetValue,mc=Phaser.Utils.Objects.IsPlainObject,vh=23730;Object.assign((class extends Di{constructor(e,t,n,s,o,i,r){mc(t)?(t=Bt(r=t,"x",0),n=Bt(r,"y",0),s=Bt(r,"width",2),o=Bt(r,"height",2),i=Bt(r,"color",vh)):mc(i)&&(i=Bt(r=i,"color",vh)),super(e,t,n,s,o),this.type="rexToggleSwitch",i===void 0&&(i=vh),this.setTrackFillStyle(i,Bt(r,"trackFillAlpha",1)),this.setFalseValueTrackFillStyle(Bt(r,"falseValueTrackColor",function(u){var l=.3*Cr(u)+.59*Er(u)+.11*Pr(u);return(255&l)<<16|(255&l)<<8|255&l}(i)),Bt(r,"falseValueTrackFillAlpha",1)),this.setThumbStyle(Bt(r,"thumbColor",16777215),Bt(r,"thumbAlpha",1)),this.setTrackSize(Bt(r,"trackWidth",.9),Bt(r,"trackHeight",.5)),this.setTrackRadius(Bt(r,"trackRadius",.5*this.trackHeight));var h=Bt(r,"thumbHeight",void 0),a=Bt(r,"thumbWidth",h);a===void 0&&(a=.9*this.trackHeight),this.setThumbSize(a,h),this.setThumbRadius(Bt(r,"thumbRadius",.5*this.thumbHeight)),this.setThumbPosition(Bt(r,"thumbLeft",.3),Bt(r,"thumbRight",void 0)),this.setRTL(Bt(r,"rtl",!1)),this.setToggleAnimationDuration(Bt(r,"animationDuration",150)),this.buildShapes(),this.setValue(Bt(r,"value",!1),0)}get value(){return this._value}set value(e){e=!!e,this._value!==e&&(this.dirty=!0,this._value=e,this.playToggleAnimation(),this.emit("valuechange",e))}setValue(e,t){t===void 0&&(t=this.toggleAnimDuration);var n=this.toggleAnimDuration;return this.toggleAnimDuration=t,this.value=e,this.toggleAnimDuration=n,this}toggleValue(e){return this.setValue(!this.value,e),this}get toggleAnimProgress(){return this._toggleAnimProgress}set toggleAnimProgress(e){this._toggleAnimProgress!==e&&(this._toggleAnimProgress=e,this.dirty=!0)}}).prototype,Om),Phaser.Utils.Objects.GetValue;const $w={loadFromURL(e,t){var n=this,s=new Image;return s.onload=function(){n.width!==s.width||n.height!==s.height?n.resize(s.width,s.height):n.clear(),n.context.drawImage(s,0,0),n.updateTexture(),t&&t(),s.onload=null,s.src="",s.remove()},s.src=e,this},loadFromURLPromise(e){var t=this;return new Promise(function(n,s){t.loadFromURL(e,n)})},loadFromFile(e,t){var n=URL.createObjectURL(e);return this.loadFromURL(n,function(){URL.revokeObjectURL(n),t&&t()}),this},loadFromFilePromise(e){var t=this;return new Promise(function(n,s){t.loadFromFile(e,n)})}};class Gr extends Bn{}Object.assign(Gr.prototype,$w),Phaser.Utils.Objects.GetValue;const Zw=Phaser.Math.RadToDeg,vc=Phaser.Math.DegToRad;var yc=function(e,t,n,s,o,i,r,h){var a=Math.abs(r-i)===360,u=vc(i),l=vc(r),d=Math.cos(u),c=Math.sin(u),p=Math.cos(l),f=Math.sin(l);return e.startAt(t+d*s,n+c*s),e.arc(t,n,s,i,r,h),a&&o===0||(e.lineTo(t+p*o,n+f*o),o>0&&e.arc(t,n,o,r,i,!0)),e.close(),e};const Jw={buildShapes(){var e=this.iterations;this.addShape(new ie().setIterations(e).setName("track")).addShape(new ie().setIterations(e).setName("bar")).addShape(new Ge().setIterations(e).setName("center"))},updateShapes(){var e=this.radius,t=this.thickness*this.radius,n=this.radius,s=n-t,o=this.getShape("track");this.trackColor!=null&&this.thickness>0?(o.fillStyle(this.trackColor),yc(o,e,e,n,s,0,360,!1)):o.reset();var i,r,h,a=this.getShape("bar");this.barColor!=null&&this.thickness>0?(this.value===1?(i=!1,r=0,h=360):(i=this.anticlockwise,r=Zw(this.startAngle),h=360*(i?1-this.value:this.value)+r),a.fillStyle(this.barColor),yc(a,e,e,n+1,s-1,r,h,!1)):a.reset();var u=this.getShape("center");this.centerColor&&s>0?u.setCenterPosition(e,e).setRadius(s).fillStyle(this.centerColor):u.reset()}},We=Phaser.Utils.Objects.GetValue,Qw=Phaser.Utils.Objects.IsPlainObject,tS=Phaser.Math.Clamp,eS=Phaser.Math.DegToRad(270);class iS extends as(Di){constructor(t,n,s,o,i,r,h){Qw(n)&&(n=We(h=n,"x",0),s=We(h,"y",0),o=We(h,"radius",1),i=We(h,"barColor",void 0),r=We(h,"value",0)),o===void 0&&(o=1);var a=2*o;super(t,n,s,a,a),this.type="rexCircularProgress",this.bootProgressBase(h),this.setRadius(o),this.setTrackColor(We(h,"trackColor",void 0)),this.setBarColor(i),this.setCenterColor(We(h,"centerColor",void 0)),this.setThickness(We(h,"thickness",.2)),this.setStartAngle(We(h,"startAngle",eS)),this.setAnticlockwise(We(h,"anticlockwise",!1)),this.iterations=We(h,"iterations",128),this.buildShapes(),this.setValue(r)}resize(t,n){return(t=Math.floor(Math.min(t,n)))===this.width||(super.resize(t,t),this.setRadius(t/2)),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t;var n=2*t;this.resize(n,n)}setRadius(t){return this.radius=t,this}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get startAngle(){return this._startAngle}set startAngle(t){this.dirty=this.dirty||this._startAngle!=t,this._startAngle=t}setStartAngle(t){return this.startAngle=t,this}get anticlockwise(){return this._anticlockwise}set anticlockwise(t){this.dirty=this.dirty||this._anticlockwise!=t,this._anticlockwise=t}setAnticlockwise(t){return t===void 0&&(t=!0),this.anticlockwise=t,this}get thickness(){return this._thickness}set thickness(t){t=tS(t,0,1),this.dirty=this.dirty||this._thickness!=t,this._thickness=t}setThickness(t){return this.thickness=t,this}get centerColor(){return this._centerColor}set centerColor(t){this.dirty=this.dirty||this._centerColor!=t,this._centerColor=t}setCenterColor(t){return this.centerColor=t,this}}Object.assign(iS.prototype,Jw);var yh=function(e,t,n,s,o,i){var r=(t+s)/2;return i>=0?e.startAt(r+i,n).lineTo(s+i,n).lineTo(s,o).lineTo(t,o).lineTo(t+i,n).lineTo(r+i,n):e.startAt(r,n).lineTo(s,n).lineTo(s-i,o).lineTo(t-i,o).lineTo(t,n).lineTo(r,n),e.close(),e};const nr=Phaser.Utils.Objects.GetValue,xh=Phaser.Utils.Objects.IsPlainObject;let km=class extends as(Di){constructor(e,t,n,s,o,i,r,h){xh(t)?(t=(h=t).x,n=h.y,s=h.width,o=h.height,i=h.barColor,r=h.value):xh(s)?(s=(h=s).width,o=h.height,i=h.barColor,r=h.value):xh(i)&&(i=(h=i).barColor,r=h.value),t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=2),o===void 0&&(o=s),r===void 0&&(r=0),super(e,t,n,s,o,h),this.type="rexLineProgress",this.bootProgressBase(h),this.addShape(new ie().setName("trackFill")).addShape(new ie().setName("bar")).addShape(new ie().setName("trackStroke")),this.setTrackColor(nr(h,"trackColor",void 0)),this.setBarColor(i),this.setTrackStroke(nr(h,"trackStrokeThickness",2),nr(h,"trackStrokeColor",void 0)),this.setSkewX(nr(h,"skewX",0)),this.setRTL(nr(h,"rtl",!1)),this.setValue(r)}get trackColor(){return this._trackColor}set trackColor(e){this.dirty=this.dirty||this._trackColor!=e,this._trackColor=e}setTrackColor(e){return this.trackColor=e,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(e){this.dirty=this.dirty||this._trackStrokeColor!=e,this._trackStrokeColor=e}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(e){this.dirty=this.dirty||this._trackStrokeThickness!=e,this._trackStrokeThickness=e}setTrackStroke(e,t){return this.trackStrokeThickness=e,this.trackStrokeColor=t,this}get barColor(){return this._barColor}set barColor(e){this.dirty=this.dirty||this._barColor!=e,this._barColor=e}setBarColor(e){return this.barColor=e,this}get skewX(){return this._skewX}set skewX(e){this.dirty=this.dirty||this._skewX!=e,this._skewX=e}setSkewX(e){return this.skewX=e,this}get rtl(){return this._rtl}set rtl(e){e=!!e,this.dirty=this.dirty||this._rtl!=e,this._rtl=e}setRTL(e){return e===void 0&&(e=!0),this.rtl=e,this}};var sS={updateShapes:function(){var e=this.skewX,t=this.width-Math.abs(e),n=this.height,s=this.getShape("trackFill");s.fillStyle(this.trackColor),s.isFilled&&yh(s,0,0,t,n,e);var o,i,r=this.getShape("bar");r.fillStyle(this.barColor),r.isFilled&&(this.rtl?(o=t*(1-this.value),i=t):(o=0,i=t*this.value),yh(r,o,0,i,n,e));var h=this.getShape("trackStroke");h.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),h.isStroked&&yh(h,0,0,t,n,e)}};Object.assign(km.prototype,sS);var bh=function(e,t,n,s,o){e.setIterations(o).start();var i=s.tl;if(Mt(i))if(i.convex){var r=i.x,h=i.y;e.ellipticalArc(r,h,i.x,i.y,180,270,!1)}else r=0,h=0,e.ellipticalArc(r,h,i.x,i.y,90,0,!0);else e.lineTo(0,0);return i=s.tr,Mt(i)?i.convex?(r=t-i.x,h=i.y,e.ellipticalArc(r,h,i.x,i.y,270,360,!1)):(r=t,h=0,e.ellipticalArc(r,h,i.x,i.y,180,90,!0)):e.lineTo(t,0),i=s.br,Mt(i)?i.convex?(r=t-i.x,h=n-i.y,e.ellipticalArc(r,h,i.x,i.y,0,90,!1)):(r=t,h=n,e.ellipticalArc(r,h,i.x,i.y,270,180,!0)):e.lineTo(t,n),i=s.bl,Mt(i)?i.convex?(r=i.x,h=n-i.y,e.ellipticalArc(r,h,i.x,i.y,90,180,!1)):(r=0,h=n,e.ellipticalArc(r,h,i.x,i.y,360,270,!0)):e.lineTo(0,n),e.close(),e},Ea=Phaser.Math.RadToDeg,nS=function(e,t,n,s,o){var i=t*o,r=s.tl;if(Mt(r)){u=i>r.x?90:Ea(Math.acos((r.x-i)/r.x));var h=r.x,a=r.y;e.ellipticalArc(h,a,r.x,r.y,180,180+u,!1)}else e.lineTo(0,0);if(r=s.tr,Mt(r)&&i>t-r.x){var u=90-Ea(Math.acos((i-(t-r.x))/r.x));h=t-r.x,a=r.y,e.ellipticalArc(h,a,r.x,r.y,270,270+u,!1)}else e.lineTo(i,0);r=s.br,Mt(r)&&i>t-r.x?(u=90-Ea(Math.acos((i-(t-r.x))/r.x)),h=t-r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,90-u,90,!1)):e.lineTo(i,n),r=s.bl,Mt(r)?(u=i>r.x?90:Ea(Math.acos((r.x-i)/r.x)),h=r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,180-u,180,!1)):e.lineTo(0,n)},Pa=Phaser.Math.RadToDeg,rS=function(e,t,n,s,o){var i=n*o,r=s.tl;if(Mt(r)){u=i>r.y?90:Pa(Math.acos((r.y-i)/r.y));var h=r.x,a=r.y;e.ellipticalArc(h,a,r.x,r.y,270-u,270,!1)}else e.lineTo(0,0);if(r=s.tr,Mt(r)?(u=i>r.y?90:Pa(Math.acos((r.y-i)/r.y)),h=t-r.x,a=r.y,e.ellipticalArc(h,a,r.x,r.y,270,270+u,!1)):e.lineTo(t,0),r=s.br,Mt(r)&&i>n-r.y){var u=90-Pa(Math.acos((i-(n-r.y))/r.y));h=t-r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,0,0+u,!1)}else e.lineTo(t,i);r=s.bl,Mt(r)&&i>n-r.y?(u=90-Pa(Math.acos((i-(n-r.y))/r.y)),h=r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,180-u,180,!1)):e.lineTo(0,i)},Oa=Phaser.Math.RadToDeg,aS=function(e,t,n,s,o){var i=t*o,r=s.tr;if(Mt(r)){u=i>r.x?90:Oa(Math.acos((r.x-i)/r.x));var h=t-r.x,a=r.y;e.ellipticalArc(h,a,r.x,r.y,360-u,360,!1)}else e.lineTo(t,0);if(r=s.br,Mt(r)?(u=i>r.x?90:Oa(Math.acos((r.x-i)/r.x)),h=t-r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,0,0+u,!1)):e.lineTo(t,n),r=s.bl,Mt(r)&&i>t-r.x){var u=90-Oa(Math.acos((i-(t-r.x))/r.x));h=r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,90,90+u,!1)}else e.lineTo(t-i,n);r=s.tl,Mt(r)&&i>t-r.x?(u=90-Oa(Math.acos((i-(t-r.x))/r.x)),h=r.x,a=r.y,e.ellipticalArc(h,a,r.x,r.y,270-u,270,!1)):e.lineTo(t-i,0)},ka=Phaser.Math.RadToDeg,oS=function(e,t,n,s,o){var i=n*o,r=s.br;if(Mt(r)){u=i>r.y?90:ka(Math.acos((r.y-i)/r.y));var h=t-r.x,a=n-r.y;e.ellipticalArc(h,a,r.x,r.y,90-u,90,!1)}else e.lineTo(t,n);if(r=s.bl,Mt(r)?(u=i>r.y?90:ka(Math.acos((r.y-i)/r.y)),h=r.x,a=n-r.y,e.ellipticalArc(h,a,r.x,r.y,90,90+u,!1)):e.lineTo(0,n),r=s.tl,Mt(r)&&i>n-r.y){var u=90-ka(Math.acos((i-(n-r.y))/r.y));h=r.x,a=r.y,e.ellipticalArc(h,a,r.x,r.y,180,180+u,!1)}else e.lineTo(0,n-i);r=s.tr,Mt(r)&&i>n-r.y?(u=90-ka(Math.acos((i-(n-r.y))/r.y)),h=t-r.x,a=r.y,e.ellipticalArc(h,a,r.x,r.y,360-u,360,!1)):e.lineTo(t,n-i)},hS={x:0,h:0,horizontal:0,"left-to-right":0,y:1,v:1,vertical:1,"top-to-bottom":1},Ys=function(e){return typeof e=="string"&&(e=hS[e]),e};const nn=Phaser.Utils.Objects.GetValue,Th=Phaser.Utils.Objects.IsPlainObject;class lS extends as(Di){constructor(t,n,s,o,i,r,h,a,u){Th(n)?(n=(u=n).x,s=u.y,o=u.width,i=u.height,r=u.radius,h=u.barColor,a=u.value):Th(o)?(o=(u=o).width,i=u.height,r=u.radius,h=u.barColor,a=u.value):Th(r)&&(r=(u=r).radius,h=u.barColor,a=u.value),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=1),i===void 0&&(i=o),r===void 0&&(r=0),a===void 0&&(a=0),super(t,n,s,o,i,u),this.type="rexRoundRectangleProgress",this.rrGeom=new Zl,this.bootProgressBase(u),this.addShape(new ie().setName("trackFill")).addShape(new ie().setName("bar")).addShape(new ie().setName("trackStroke")),this.setTrackColor(nn(u,"trackColor",void 0)),this.setBarColor(h),this.setTrackStroke(nn(u,"trackStrokeThickness",2),nn(u,"trackStrokeColor",void 0)),this.setOrientation(nn(u,"orientation",0)),this.setRTL(nn(u,"rtl",!1)),this.setRadius(r),this.setIteration(nn(r,"iteration",void 0)),this.setValue(a)}get trackColor(){return this._trackColor}set trackColor(t){this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,n){return this.trackStrokeThickness=t,this.trackStrokeColor=n,this}get barColor(){return this._barColor}set barColor(t){this.dirty=this.dirty||this._barColor!=t,this._barColor=t}setBarColor(t){return this.barColor=t,this}get orientation(){return this._orientation}set orientation(t){t=Ys(t),this.dirty=this.dirty||this._orientation!=t,this._orientation=t}setOrientation(t){return this.orientation=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get radius(){return this.rrGeom.radius}set radius(t){this.rrGeom.setRadius(t),this.dirty=!0}get radiusTL(){return this.rrGeom.radiusTL}set radiusTL(t){this.rrGeom.radiusTL=t,this.dirty=!0}get radiusTR(){return this.rrGeom.radiusTR}set radiusTR(t){this.rrGeom.radiusTR=t,this.dirty=!0}get radiusBL(){return this.rrGeom.radiusBL}set radiusBL(t){this.rrGeom.radiusBL=t,this.dirty=!0}get radiusBR(){return this.rrGeom.radiusBR}set radiusBR(t){this.rrGeom.radiusBR=t,this.dirty=!0}setRadius(t){return t===void 0&&(t=0),this.radius=t,this}setRadiusTL(t){return t===void 0&&(t=0),this.radiusTL=t,this}setRadiusTR(t){return t===void 0&&(t=0),this.radiusTR=t,this}setRadiusBL(t){return t===void 0&&(t=0),this.radiusBL=t,this}setRadiusBR(t){return t===void 0&&(t=0),this.radiusBR=t,this}get cornerRadius(){return this.rrGeom.cornerRadius}set cornerRadius(t){this.radius=t}setCornerRadius(t){return this.setRadius(t)}get iteration(){return this._iteration}set iteration(t){this._iteration!==void 0?this._iteration!==t&&(this._iteration=t,this.dirty=!0):this._iteration=t}setIteration(t){return t===void 0&&(t=6),this.iteration=t,this}}var uS={updateShapes:function(){var e=this.width,t=this.height,n=this.rrGeom.cornerRadius,s=this.value,o=this.orientation,i=this.rtl,r=this.iteration+1,h=this.getShape("trackFill");h.fillStyle(this.trackColor),h.isFilled&&bh(h,e,t,n,r);var a=this.getShape("bar");a.fillStyle(this.barColor),a.isFilled&&function(l,d,c,p,f,v,g,y){l.setIterations(y).start(),f===0||(f===1?bh(l,d,c,p,y):((v===0?g?aS:nS:g?oS:rS)(l,d,c,p,f),l.close()))}(a,e,t,n,s,o,i,r);var u=this.getShape("trackStroke");u.lineStyle(this.trackStrokeThickness,this.trackStrokeColor),u.isStroked&&bh(u,e,t,n,r)}};Object.assign(lS.prototype,uS);var wh=function(e,t,n,s,o,i,r){r===void 0&&(r="round"),function(h,a){h.save(),h.beginPath();var u=a[0];h.moveTo(u.x,u.y);for(var l=1,d=a.length;l<d;l++)u=a[l],h.lineTo(u.x,u.y);h.closePath(),h.restore()}(t,n),t.lineJoin=r,s!=null&&(t.fillStyle=s,t.fill()),o!=null&&(t.strokeStyle=o,t.lineWidth=i,t.stroke())},dS=function(){var e,t,n=this.skewX,s=this.width-Math.abs(n),o=this.height,i=(this.canvas,this.context);if((this.trackColor||this.trackStrokeColor)&&xc(0,0,s,o,n,this.trackPoints),this.barColor&&(this.rtl?(e=s*(1-this.value),t=s):(e=0,t=s*this.value),xc(e,0,t,o,n,this.barPoints)),this.trackColor&&(i.save(),wh(0,i,this.trackPoints,this.trackColor),i.restore()),this.barColor){var r;if(i.save(),this.barColor2){var h;if(this.isHorizontalGradient){var a=o/2;h=i.createLinearGradient(e,a,t,a)}else{var u=s/2;h=i.createLinearGradient(u,0,u,o)}h.addColorStop(0,this.rtl?this.barColor:this.barColor2),h.addColorStop(1,this.rtl?this.barColor2:this.barColor),r=h}else r=this.barColor;wh(0,i,this.barPoints,r),i.restore()}this.trackStrokeColor&&this.trackStrokeThickness>0&&(i.save(),wh(0,i,this.trackPoints,void 0,this.trackStrokeColor,this.trackStrokeThickness),i.restore())},xc=function(e,t,n,s,o,i){i===void 0&&(i=[]),i.length=4;for(var r=0;r<4;r++)i[r]||(i[r]={});var h;return o>=0?((h=i[0]).x=e+o,h.y=t,(h=i[1]).x=n+o,h.y=t,(h=i[2]).x=n,h.y=s,(h=i[3]).x=e,h.y=s):((h=i[0]).x=e,h.y=t,(h=i[1]).x=n,h.y=t,(h=i[2]).x=n-o,h.y=s,(h=i[3]).x=e-o,h.y=s),i};const Ut=Phaser.Utils.Objects.GetValue,Sh=Phaser.Utils.Objects.IsPlainObject;class cS extends as(Bn){constructor(t,n,s,o,i,r,h,a){Sh(n)?(n=Ut(a=n,"x",0),s=Ut(a,"y",0),o=Ut(a,"width",2),i=Ut(a,"height",2),r=Ut(a,"barColor",void 0),h=Ut(a,"value",0)):Sh(o)?(o=Ut(a=o,"width",2),i=Ut(a,"height",2),r=Ut(a,"barColor",void 0),h=Ut(a,"value",0)):Sh(r)&&(r=Ut(a=r,"barColor",void 0),h=Ut(a,"value",0)),super(t,n,s,o,i,Ut(a,"resolution",1)),this.type="rexLineProgressCanvas",this.trackPoints=[],this.barPoints=[],this.bootProgressBase(a),this.setTrackColor(Ut(a,"trackColor",void 0)),this.setBarColor(r,Ut(a,"barColor2",void 0),Ut(a,"isHorizontalGradient",void 0)),this.setTrackStroke(Ut(a,"trackStrokeThickness",2),Ut(a,"trackStrokeColor",void 0)),this.setSkewX(Ut(a,"skewX",0)),this.setRTL(Ut(a,"rtl",!1)),this.setValue(h)}get trackColor(){return this._trackColor}set trackColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackColor!=t,this._trackColor=t}setTrackColor(t){return this.trackColor=t,this}get trackStrokeColor(){return this._trackStrokeColor}set trackStrokeColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._trackStrokeColor!=t,this._trackStrokeColor=t}get trackStrokeThickness(){return this._trackStrokeThickness}set trackStrokeThickness(t){this.dirty=this.dirty||this._trackStrokeThickness!=t,this._trackStrokeThickness=t}setTrackStroke(t,n){return this.trackStrokeThickness=t,this.trackStrokeColor=n,this}get barColor(){return this._barColor}set barColor(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor!=t,this._barColor=t}get barColor2(){return this._barColor2}set barColor2(t){t=dt(t,this.canvas,this.context),this.dirty=this.dirty||this._barColor2!=t,this._barColor2=t}get isHorizontalGradient(){return this._isHorizontalGradient}set isHorizontalGradient(t){this.dirty|=this._isHorizontalGradient!=t,this._isHorizontalGradient=t}setBarColor(t,n,s){return s===void 0&&(s=!0),this.barColor=t,this.barColor2=n,this.isHorizontalGradient=s,this}get skewX(){return this._skewX}set skewX(t){this.dirty=this.dirty||this._skewX!=t,this._skewX=t}setSkewX(t){return this.skewX=t,this}get rtl(){return this._rtl}set rtl(t){t=!!t,this.dirty=this.dirty||this._rtl!=t,this._rtl=t}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}updateTexture(){return super.updateTexture(function(){this.clear(),dS.call(this)},this),this}}Phaser.Math.Wrap;const rn=Phaser.Math.Linear;var fS=function(){var e,t,n,s,o,i,r=this.getShape("triangle"),h=this.padding,a=this.width-h.right,u=0+h.left,l=this.height-h.bottom,d=0+h.top,c=(u+a)/2,p=(d+l)/2,f={0:{a:{x:u,y:d},b:{x:a,y:p},c:{x:u,y:l}},1:{a:{x:u,y:d},b:{x:c,y:l},c:{x:a,y:d}},2:{a:{x:a,y:d},b:{x:u,y:p},c:{x:a,y:l}},3:{a:{x:u,y:l},b:{x:c,y:d},c:{x:a,y:l}}};if(this.previousDirection===void 0){var v=f[this.direction],g=v.a,y=v.b,m=v.c;e=g.x,t=g.y,n=y.x,s=y.y,o=m.x,i=m.y}else{var x=f[this.previousDirection],b=f[this.direction],w=this.easeDirectionProgress;e=rn(x.a.x,b.a.x,w),t=rn(x.a.y,b.a.y,w),n=rn(x.b.x,b.b.x,w),s=rn(x.b.y,b.b.y,w),o=rn(x.c.x,b.c.x,w),i=rn(x.c.y,b.c.y,w)}r.startAt(e,t).lineTo(n,s).lineTo(o,i),this.arrowOnly?r.end():r.close()};const Ma=(0,Phaser.Math.DegToRad)(120);var pS=function(e){e=this.getShape("triangle");var t=this.width/2,n=this.height/2,s=Math.min(t,n)*this.radius,o=this.verticeRotation;e.startAt(t+s*Math.cos(o+Ma),n+s*Math.sin(o+Ma)).lineTo(t+s*Math.cos(o),n+s*Math.sin(o)).lineTo(t+s*Math.cos(o-Ma),n+s*Math.sin(o-Ma)),this.arrowOnly?e.end():e.close()};const gS={buildShapes(){this.addShape(new ie().setName("triangle"))},updateShapes(){var e=this.getShape("triangle");this.arrowOnly?e.fillStyle().lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha):e.fillStyle(this.fillColor,this.fillAlpha).lineStyle(this.lineWidth,this.strokeColor,this.strokeAlpha),this.shapeMode===0?fS.call(this):pS.call(this)}},mS={setEaseDuration(e){return e===void 0&&(e=0),this.easeDuration=e,this},playEaseDirectionation(){return this.easeDirectionProgressTask===void 0&&(this.easeDirectionProgressTask=new Qe(this,{eventEmitter:null})),this.easeDirectionProgressTask.restart({key:"easeDirectionProgress",from:0,to:1,duration:this.easeDuration}),this},stopEaseDirection(){return this.easeDirectionProgressTask===void 0||this.easeDirectionProgressTask.stop(),this}},an=Phaser.Utils.Objects.GetValue,vS=Phaser.Utils.Objects.IsPlainObject,yS=Phaser.Math.DegToRad,xS=Phaser.Math.RadToDeg;class cu extends Di{constructor(t,n,s,o,i,r,h){var a,u,l,d,c,p,f,v;if(vS(n)){var g=n;n=g.x,s=g.y,o=g.width,i=g.height,r=g.color,h=g.alpha,a=g.strokeColor,u=g.strokeAlpha,l=g.strokeWidth,d=g.arrowOnly,c=g.direction,p=g.easeDuration,f=g.padding,v=g.radius}n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=1),i===void 0&&(i=o),d===void 0&&(d=!1),c===void 0&&(c=0),p===void 0&&(p=0),f===void 0&&(f=0),v===void 0&&(v=void 0),super(t,n,s,o,i),this.type="rexTriangle",this.setFillStyle(r,h),a!==void 0&&l===void 0&&(l=2),this.setStrokeStyle(l,a,u),this.setArrowOnly(d),this.setDirection(c,p),this.setPadding(f),this.setRadius(v),this.buildShapes()}get arrowOnly(){return this._arrowOnly}set arrowOnly(t){this.dirty=this.dirty||this._arrowOnly!=t,this._arrowOnly=t}setArrowOnly(t){return t===void 0&&(t=!0),this.arrowOnly=t,this}get direction(){return this._direction}set direction(t){t=TS(t),this._direction!==t&&(this.easeDuration>0&&this._direction!==void 0?this.previousDirection=this._direction:this.previousDirection=void 0,this._direction=t,this.verticeAngle=90*t,this.dirty=!0,this.previousDirection!==void 0?this.playEaseDirectionation():this.stopEaseDirection())}setDirection(t,n){return n!==void 0&&this.setEaseDuration(n),this.direction=t,this}toggleDirection(t){return this.setDirection(this.direction+2,t),this}get easeDirectionProgress(){return this._easeDirectionProgress}set easeDirectionProgress(t){this._easeDirectionProgress!==t&&(this._easeDirectionProgress=t,this.dirty=!0)}setPadding(t,n,s,o){if(typeof t=="object"){var i=t,r=an(i,"x",null);r!==null?(t=r,s=r):(t=an(i,"left",0),s=an(i,"right",t));var h=an(i,"y",null);h!==null?(n=h,o=h):(n=an(i,"top",0),o=an(i,"bottom",n))}else t===void 0&&(t=0),n===void 0&&(n=t),s===void 0&&(s=t),o===void 0&&(o=n);return this.padding===void 0&&(this.padding={}),this.dirty=this.dirty||this.padding.left!=t||this.padding.top!=n||this.padding.right!=s||this.padding.bottom!=o,this.padding.left=t,this.padding.top=n,this.padding.right=s,this.padding.bottom=o,this.setRadius(),this}get radius(){return this._radius}set radius(t){this.dirty=this.dirty||this._radius!=t,this._radius=t}setRadius(t){return this.radius=t,this.shapeMode=t==null?0:1,this}get verticeRotation(){return this._verticeRotation}set verticeRotation(t){this.dirty=this.dirty||this._verticeRotation!=t,this._verticeRotation=t}setVerticeRotation(t){return this.verticeRotation=t,this}get verticeAngle(){return xS(this.verticeRotation)}set verticeAngle(t){this.verticeRotation=yS(t)}setVerticeAngle(t){return this.verticeAngle=t,this}}const bS={right:0,down:1,left:2,up:3};var TS=function(e){return typeof e=="string"&&(e=bS[e]),e%4};Object.assign(cu.prototype,gS,mS),Ao();const wS=Phaser.GameObjects.Zone,SS=Phaser.Utils.Array.Add,CS=Phaser.Utils.Array.Remove;let Ur=class extends wS{constructor(e,t,n,s,o){t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=1),o===void 0&&(o=1),super(e,t,n,s,o),this.children=[]}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var t,n=this.children.length-1;n>=0;n--)(t=this.children[n]).parentContainer||t.displayList||t.destroy(e);this.clear(!e),super.destroy(e)}}contains(e){return this.children.indexOf(e)!==-1}add(e){var t=this;return SS(this.children,e,0,function(n){n.once("destroy",t.onChildDestroy,t)},this),this}remove(e,t){var n=this;return CS(this.children,e,function(s){s.off("destroy",n.onChildDestroy,n),t&&s.destroy()}),this}onChildDestroy(e,t){this.remove(e,!1)}clear(e){for(var t,n=0,s=this.children.length;n<s;n++)(t=this.children[n]).off("destroy",this.onChildDestroy,this),e&&t.destroy();return this.children.length=0,this}};const bc=Phaser.GameObjects.Components;Phaser.Class.mixin(Ur,[bc.Alpha,bc.Flip]);var Ye=function(e,t){var n;if(t===void 0)e.hasOwnProperty("rexContainer")&&(n=e.rexContainer.parent);else for(n=Ye(e);n&&n.name!==t;)n=Ye(n);return n};const ES=Phaser.Math.DegToRad,PS=Phaser.Math.RadToDeg;var ct=function(e){if(!e.hasOwnProperty("rexContainer")){var t={parent:null,self:null,layer:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,syncScrollFactor:!0,syncCameraFilter:!0,syncDisplayList:!0,visible:!0,active:!0};Object.defineProperty(t,"angle",{get:function(){return PS(this.rotation)},set:function(n){this.rotation=ES(n)}}),Object.defineProperty(t,"displayWidth",{get:function(){return e.width*this.scaleX},set:function(n){this.scaleX=n/e.width}}),Object.defineProperty(t,"displayHeight",{get:function(){return e.height*this.scaleY},set:function(n){this.scaleY=n/e.height}}),e.rexContainer=t}return e.rexContainer};const OS={setParent(e,t){t===void 0&&(t=this);var n=ct(e);return t?(n.parent=t,n.self=e):(n.parent=null,n.self=null),this},getParent(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),Ye(e,t)},getTopmostParent(e){return e===void 0&&(e=this),function(t){for(var n=Ye(t);n;)t=n,n=Ye(n);return t}(e)}},fs=Phaser.Utils.Objects.GetValue,Mm=Ur.prototype.add;var Tc=function(e,t){this.setParent(e);var n=ct(e);return _m(n,t),this.resetChildState(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e).updateCameraFilter(e),Mm.call(this,e),Am.call(this,e,n),this},Ch=function(e,t){this.setParent(e);var n=ct(e);return _m(n,t),n.x=e.x,n.y=e.y,n.rotation=e.rotation,n.scaleX=e.scaleX,n.scaleY=e.scaleY,n.alpha=e.alpha,n.visible=e.visible,n.active=e.active,this.updateChildPosition(e).updateChildAlpha(e).updateChildVisible(e).updateChildActive(e).updateChildScrollFactor(e).updateChildMask(e),Mm.call(this,e),Am.call(this,e,n),this},_m=function(e,t){t===void 0&&(t=!0),typeof t=="boolean"?(e.syncPosition=t,e.syncRotation=t,e.syncScale=t,e.syncAlpha=t,e.syncScrollFactor=t,e.syncCameraFilter=t,e.syncDisplayList=t):(e.syncPosition=fs(t,"syncPosition",!0),e.syncRotation=fs(t,"syncRotation",!0),e.syncScale=fs(t,"syncScale",!0),e.syncAlpha=fs(t,"syncAlpha",!0),e.syncScrollFactor=fs(t,"syncScrollFactor",!0),e.syncCameraFilter=fs(t,"syncCameraFilter",!0),e.syncDisplayList=fs(t,"syncDisplayList",!0))},Am=function(e,t){this.addToParentContainer(e),t.syncDisplayList&&this.addToPatentLayer(e),this.addToRenderLayer(e)};const kS={add(e){return Array.isArray(e)?this.addMultiple(e):Tc.call(this,e),this},pin(e,t){return Array.isArray(e)?this.addMultiple(e,t):Tc.call(this,e,t),this},addMultiple(e){for(var t=Array.from(arguments),n=0,s=e.length;n<s;n++)t[0]=e[n],this.add.apply(this,t);return this},addLocal(e){return Array.isArray(e)?this.addMultiple(e):Ch.call(this,e),this},pinLocal(e,t){return Array.isArray(e)?this.addMultiple(e,t):Ch.call(this,e,t),this},addLocalMultiple(e){for(var t=0,n=e.length;t<n;t++)Ch.call(this,e[t]);return this}},wc=Ur.prototype.remove,MS=Ur.prototype.clear,_S={remove(e,t){return Ye(e)!==this||(this.setParent(e,null),t||this.removeFromRenderLayer(e),wc.call(this,e,t)),this},unpin(e,t){return Ye(e)!==this||(this.setParent(e,null),t||this.removeFromRenderLayer(e),wc.call(this,e,t)),this},clear(e){for(var t=this.children,n=0,s=t.length;n<s;n++){var o=t[n];this.setParent(o,null),e||this.removeFromRenderLayer(o)}return MS.call(this,e),this}},AS={getLocalState:e=>ct(e),resetChildState(e){return this.resetChildPositionState(e).resetChildVisibleState(e).resetChildAlphaState(e).resetChildActiveState(e),this},resetChildrenState(e){for(var t=0,n=e.length;t<n;t++)this.resetChildState(e[t]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},RS={worldToLocal(e){e.x-=this.x,e.y-=this.y;var t=Math.cos(-this.rotation),n=Math.sin(-this.rotation),s=e.x,o=e.y;return e.x=s*t-o*n,e.y=s*n+o*t,e.x/=this.scaleX,e.y/=this.scaleY,e},localToWorld(e){e.x*=this.scaleX,e.y*=this.scaleY;var t=Math.cos(this.rotation),n=Math.sin(this.rotation),s=e.x,o=e.y;return e.x=s*t-o*n,e.y=s*n+o*t,e.x+=this.x,e.y+=this.y,e}};var Rr=function(e,t){return e===t?1:e/t};const LS={updateChildPosition(e){e.isRexContainerLite&&(e.syncChildrenEnable=!1);var t=ct(e),n=t.parent;return t.syncPosition&&(e.x=t.x,e.y=t.y,n.localToWorld(e)),t.syncRotation&&(e.rotation=t.rotation+n.rotation),t.syncScale&&(e.scaleX=t.scaleX*n.scaleX,e.scaleY=t.scaleY*n.scaleY),e.isRexContainerLite&&(e.syncChildrenEnable=!0,e.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(e){var t=ct(e),n=t.parent;return t.x=e.x,t.y=e.y,n.worldToLocal(t),t.scaleX=Rr(e.scaleX,n.scaleX),t.scaleY=Rr(e.scaleY,n.scaleY),t.rotation=e.rotation-n.rotation,this},setChildPosition(e,t,n){return e.x=t,e.y=n,this.resetChildPositionState(e),this},setChildLocalPosition(e,t,n){var s=ct(e);return s.x=t,s.y=n,this.updateChildPosition(e),this},resetLocalPositionState(){var e=ct(this).parent;return e&&e.resetChildPositionState(this),this},getChildLocalX:e=>ct(e).x,getChildLocalY:e=>ct(e).y},DS=Phaser.Math.DegToRad,FS={updateChildRotation(e){var t=ct(e),n=t.parent;return t.syncRotation&&(e.rotation=n.rotation+t.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(e){var t=ct(e),n=t.parent;return t.rotation=e.rotation-n.rotation,this},setChildRotation(e,t){return e.rotation=t,this.resetChildRotationState(e),this},setChildAngle(e,t){return e.angle=t,this.resetChildRotationState(e),this},setChildLocalRotation(e,t){return ct(e).rotation=t,this.updateChildRotation(e),this},setChildLocalAngle(e,t){return ct(e).rotation=DS(t),this.updateChildRotation(e),this},resetLocalRotationState(){var e=ct(this).parent;return e&&e.resetChildRotationState(this),this},getChildLocalRotation:e=>ct(e).rotation},BS={updateChildScale(e){var t=ct(e),n=t.parent;return t.syncScale&&(e.scaleX=n.scaleX*t.scaleX,e.scaleY=n.scaleY*t.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(e){var t=ct(e),n=t.parent;return t.scaleX=Rr(e.scaleX,n.scaleX),t.scaleY=Rr(e.scaleY,n.scaleY),this},setChildScale(e,t,n){return n===void 0&&(n=t),e.scaleX=t,e.scaleY=n,this.resetChildScaleState(e),this},setChildLocalScale(e,t,n){n===void 0&&(n=t);var s=ct(e);return s.scaleX=t,s.scaleY=n,this.updateChildScale(e),this},setChildDisplaySize(e,t,n){return e.setDisplaySize(t,n),this.resetChildScaleState(e),this},resetLocalScaleState(){var e=ct(this).parent;return e&&e.resetChildScaleState(this),this},getChildLocalScaleX:e=>ct(e).scaleX,getChildLocalScaleY:e=>ct(e).scaleY},IS={updateChildVisible(e){var t=ct(e),n=t.parent,s=!t.hasOwnProperty("maskVisible")||t.maskVisible,o=!n||n.visible;return e.visible=o&&t.visible&&s,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(e){var t=ct(e);return t.hasOwnProperty("maskVisible")&&delete t.maskVisible,t.visible=e.visible,this},setChildVisible(e,t){return this.setChildLocalVisible(e,t),this},setChildLocalVisible(e,t){return t===void 0&&(t=!0),ct(e).visible=t,this.updateChildVisible(e),this},setChildMaskVisible(e,t){return t===void 0&&(t=!0),ct(e).maskVisible=t,this.updateChildVisible(e),this},resetLocalVisibleState(){var e=ct(this).parent;return e&&e.resetChildVisibleState(this),this},getChildLocalVisible:e=>ct(e).visible},XS={updateChildAlpha(e){var t=ct(e),n=t.parent;return t.syncAlpha&&(e.alpha=n.alpha*t.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(e){var t=ct(e),n=t.parent;return t.alpha=Rr(e.alpha,n.alpha),this},setChildAlpha(e,t){return e.alpha=t,this.resetChildAlphaState(e),this},setChildLocalAlpha(e,t){return ct(e).alpha=t,this.updateChildAlpha(e),this},resetLocalAlphaState(){var e=ct(this).parent;return e&&e.resetChildAlphaState(this),this},getChildLocalAlpha:e=>ct(e).alpha},zS={updateChildActive(e){var t=ct(e),n=t.parent;return e.active=n.active&&t.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(e){return ct(e).active=e.active,this},setChildActive(e,t){return e.active=t,this.resetChildActiveState(e),this},setChildLocalActive(e,t){return t===void 0&&(t=!0),ct(e).active=t,this.updateChildActive(e),this},resetLocalActiveState(){var e=ct(this).parent;return e&&e.resetChildActiveState(this),this},getChildLocalActive:e=>ct(e).active},YS={updateChildScrollFactor(e){var t=ct(e),n=t.parent;return t.syncScrollFactor&&(e.scrollFactorX=n.scrollFactorX,e.scrollFactorY=n.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},NS={updateCameraFilter(e){var t=ct(e),n=t.parent;return t.syncCameraFilter&&(e.cameraFilter=n.cameraFilter),this},syncCameraFilter(){return this.syncChildrenEnable&&this.children.forEach(this.updateCameraFilter,this),this}},GS={updateChildMask(e){return this.mask==null||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==e&&(e.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(e){return this.mask=e,this},clearMask(e){e===void 0&&(e=!1);var t=this;return this._mask=null,this.setChildMaskVisible(this),this.children.forEach(function(n){n.clearMask&&n.clearMask(!1),n.hasOwnProperty("isRexContainerLite")||t.setChildMaskVisible(n)}),e&&this.mask&&this.mask.destroy(),this}};var _a=function(e){return e.filter(function(t){return!!t.displayList||!!t.parentContainer||void 0})};const US={setDepth(e,t){if(this.depth=e,!t&&this.children)for(var n=this.getAllChildren(),s=0,o=n.length;s<o;s++)n[s].depth=e;return this},swapDepth(e){var t=this.depth,n=e.depth;return this.setDepth(n),e.setDepth(t),this},incDepth(e){if(this.depth+=e,this.children)for(var t=this.getAllChildren(),n=0,s=t.length;n<s;n++)t[n].depth+=e;return this},bringToTop(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);ze(t,!1);for(var n=0,s=t.length;n<s;n++){var o=t[n];e.exists(o)&&e.bringToTop(o)}return this},bringMeToTop(){return this.bringToTop()},sendToBack(){var e=this.displayList;if(!e)return this;var t=this.getAllChildren([this]);ze(t,!0);for(var n=0,s=t.length;n<s;n++){var o=t[n];e.exists(o)&&e.sendToBack(o)}return this},sendMeToBack(){return this.sendToBack()},moveDepthBelow(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var n=this.getAllChildren([this]);ze(n,!1);for(var s=0,o=n.length;s<o;s++){var i=n[s];if(t.exists(i)){t.moveBelow(e,i);break}}return this},moveMyDepthBelow(e){return this.moveDepthBelow(e)},moveDepthAbove(e){var t=this.displayList;if(!t)return this;if(e.displayList!==t)return this;var n=this.getAllChildren([this]);ze(n,!0);for(var s=0,o=n.length;s<o;s++){var i=n[s];if(t.exists(i)){t.moveAbove(e,i);break}}return this},moveMyDepthAbove(e){return this.moveDepthAbove(e)},bringChildToTop(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=_a(t),t=ze(t,!1)):t=[e];var n=this.getAllChildren([this]);n=_a(n);for(var s=(n=ze(n,!1))[n.length-1],o=0,i=t.length;o<i;o++){var r=t[o];s!==r&&(r!==this&&s.displayList!==r.displayList||(s.displayList.moveAbove(r,s),s=r))}return this},sendChildToBack(e){var t;e!==this&&e.isRexContainerLite?(t=e.getAllChildren([e]),t=_a(t),t=ze(t,!1)):t=[e];var n=this.getAllChildren([this]);n=_a(n);for(var s=(n=ze(n,!1))[0],o=t.length-1;o>=0;o--){var i=t[o];s!==i&&(i!==this&&s.displayList!==i.displayList||(s.displayList.moveBelow(i,s),s=i))}return this}};var Rm=function(e,t){if(!t(e)&&e.isRexContainerLite)for(var n=e.children,s=0,o=n.length;s<o;s++)Rm(n[s],t)},Eh=function(e,t){for(var n=[e];n.length>0;){var s=n.shift();!t(s)&&s.isRexContainerLite&&n.push(...s.children)}};const ps=Phaser.Utils.Array,WS={getChildren(e){if(e)for(var t=0,n=this.children.length;t<n;t++)e.push(this.children[t]);else e=this.children;return e},getAllChildren(e){e===void 0&&(e=[]);var t=this;return Eh(t,function(n){n!==t&&e.push(n)}),e},getAllVisibleChildren(e){e===void 0&&(e=[]);var t=this;return Eh(t,function(n){if(n!==t)return!n.visible||void e.push(n)}),e},bfs(e,t){return t===void 0&&(t=this),Eh(t,e),this},dfs(e,t){return t===void 0&&(t=this),Rm(t,e),this},contains(e){var t=Ye(e);return!!t&&(t===this||this.contains(t))},getByName(e,t){if(t){for(var n,s,o=[this];o.length;)for(var i=0,r=(n=o.shift()).children.length;i<r;i++){if((s=n.children[i]).name===e)return s;s.isRexContainerLite&&o.push(s)}return null}return ps.GetFirst(this.children,"name",e)},getRandom(e,t){return ps.GetRandom(this.children,e,t)},getFirst(e,t,n,s){return ps.GetFirstElement(this.children,e,t,n,s)},getAll(e,t,n,s){return ps.GetAll(this.children,e,t,n,s)},count(e,t,n,s){return ps.CountAllMatching(this.children,e,t,n,s)},swap(e,t){return ps.Swap(this.children,e,t),this},setAll(e,t,n,s){return ps.SetAll(this.children,e,t,n,s),this}};var Sc=function(e){for(var t=[],n=0,s=e.length;n<s;n++){var o=e[n];o.hasOwnProperty("rexContainer")&&t.push(o.rexContainer)}return t},Cc=function(e,t,n){if(n.parent){var s=n.parent,o=n.self;switch(t){case"x":case"y":s.updateChildPosition(o);break;case"angle":case"rotation":s.updateChildRotation(o);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":s.updateChildScale(o);break;case"alpha":s.updateChildAlpha(o);break;default:s.updateChildPosition(o),s.updateChildRotation(o),s.updateChildScale(o),s.updateChildAlpha(o)}}else e.remove()};const VS={tweenChild(e){var t=e.targets;Array.isArray(t)||(t=[t]);var n=this.scene||function(o){for(var i=0,r=o.length;i<r;i++){var h=o[i].scene;if(h)return h}return null}(t);if(n){e.targets=Sc(t);var s=n.tweens.add(e);return s.on("update",Cc),s}},tweenSelf(e){return e.targets=[this],this.tweenChild(e)},createTweenChildConfig(e){var t=e.targets;t&&(Array.isArray(t)||(t=[t]),e.targets=Sc(t));var n=e.onUpdate;return e.onUpdate=function(s,o){n&&n(s,o),Cc(s,void 0,o)},e},tween(e){var t=this.scene;return e.targets||(e.targets=this),t.tweens.add(e)}},jS=Phaser.GameObjects.Container;var Lm=function(e){var t=e.getAllChildren([e]);return t.filter(function(n){return!!n.displayList||!!n.parentContainer})},Ec=function(e){var t=Lm(this);t.indexOf(this)===-1&&t.push(this),ze(t),e.add(t)},Pc=function(e,t,n){if(this.scene){var s=Lm(this);ze(s,t),e.remove(s),n&&s.forEach(function(o){o.addToDisplayList()})}};const HS={addToContainer(e){return e instanceof jS?(this._setParentContainerFlag=!0,Ec.call(this,e),this._setParentContainerFlag=!1,this):this},addToLayer(e){return Tr(e)?(Ec.call(this,e),this):this},removeFromContainer(){return this.parentContainer?(this._setParentContainerFlag=!0,Pc.call(this,this.parentContainer,!0,!1),this._setParentContainerFlag=!1,this):this},removeFromLayer(e){return e===void 0&&(e=!0),Tr(this.displayList)?(Pc.call(this,this.displayList,!1,e),this):this},getParentContainer(){if(this.parentContainer)return this.parentContainer;for(var e=this.getParent();e;){var t=e.parentContainer;if(t)return t;e=e.getParent()}return null},addToParentContainer(e){if(!e.displayList)return this;var t=this.getParentContainer();return t?(e.isRexContainerLite?e.addToContainer(t):t.add(e),this):this},addToPatentLayer(e){if(!e.displayList)return this;var t=this.displayList;return t===e.displayList||Tr(t)&&(e.isRexContainerLite?e.addToLayer(t):t.add(e)),this}},KS={hasLayer(){return!!this.privateRenderLayer},enableLayer(){if(this.hasLayer())return this;var e=this.scene.add.layer();return this.moveDepthBelow(e),this.addToLayer(e),this.privateRenderLayer=e,this},getLayer(){return this.hasLayer()||this.enableLayer(),this.privateRenderLayer},getRenderLayer(){if(this.hasLayer())return this.privateRenderLayer;for(var e=this.getParent();e;){var t=e.privateRenderLayer;if(t)return t;e=e.getParent()}return null},addToRenderLayer(e){if(!e.displayList)return this;var t=this.getRenderLayer();return t?(t===e.displayList||(e.isRexContainerLite?e.addToLayer(t):t.add(e),ct(e).layer=t),this):this},removeFromRenderLayer(e){var t=ct(e),n=t.layer;return n?(e.isRexContainerLite?e.removeFromLayer(!0):n.remove(e),t.layer=null,this):this}},Oc=Phaser.Geom.Rectangle,qS=Phaser.Geom.Rectangle.Union;var Ph,gs=Phaser.Utils.Objects.GetValue,Dm=function(e){if(e){var t,n,s=e.gameObjects,o=e.renderTexture,i=e.saveTexture,r=gs(e,"x",void 0),h=gs(e,"y",void 0),a=gs(e,"width",void 0),u=gs(e,"height",void 0),l=gs(e,"originX",0),d=gs(e,"originY",0),c=gs(e,"padding",0);if(a===void 0||u===void 0||r===void 0||h===void 0){var p=function(g,y){var m;y===void 0?y=new Oc:y===!0&&(Ph===void 0&&(Ph=new Oc),y=Ph),y.setTo(0,0,0,0);for(var x=!0,b=0,w=g.length;b<w;b++)if((m=g[b]).getBounds){var T=ou(m,!0);x?(y.setTo(T.x,T.y,T.width,T.height),x=!1):qS(T,y,y)}return y}(s,!0);r!==void 0&&h!==void 0?(a=2*Math.max(r-p.left,p.right-r),u=2*Math.max(h-p.top,p.bottom-h),l=.5,d=.5):(r=p.x,h=p.y,a=p.width,u=p.height,l=0,d=0),t=p.x,n=p.y}else t=r+(0-l)*a,n=h+(0-d)*u;t-=c,n-=c,a+=2*c,u+=2*c;var f=s[0].scene,v=f.sys.textures;return i&&!o&&(o=v.addDynamicTexture(i,a,u)),o||(o=f.add.renderTexture(0,0,a,u)),o.setPosition&&o.setPosition(r,h),o.width===a&&o.height===u||o.setSize(a,u),o.setOrigin&&o.setOrigin(l,d),o.camera.setScroll(t,n),s=ze(vi(s)),o.draw(s),i&&(xi(o)?o.saveTexture(i):o.key!==i&&v.renameTexture(o.key,key)),o}};const $S={snapshot(e){var t=this.scaleX,n=this.scaleY,s=t===1&&n===1;s||this.setScale(1),e===void 0&&(e={}),e.gameObjects=this.getAllVisibleChildren(),e.x=this.x,e.y=this.y,e.originX=this.originX,e.originY=this.originY;var o=Dm(e),i=!!o.scene;return s||(this.setScale(t,n),i&&o.setScale(t,n)),i?o:this}},kc=Phaser.Utils.Objects.GetValue,ZS=Phaser.Math.RotateAround;var Fm={changeOrigin:function(e,t){this.syncChildrenEnable=!1,function(i,r,h){h===void 0&&(h=r);var a={x:(r-i.originX)*i.displayWidth,y:(h-i.originY)*i.displayHeight};ZS(a,0,0,i.rotation),i.originX=r,i.originY=h,i.x=i.x+a.x,i.y=i.y+a.y}(this,e,t),this.syncChildrenEnable=!0;for(var n=this.getAllChildren(),s=0,o=n.length;s<o;s++)this.resetChildPositionState(n[s]);return this},drawBounds:function(e,t){var n=kc(t,"drawContainer",!0),s=kc(t,"children");return s===void 0&&(s=this.getAllVisibleChildren([this])),n||(s=s.filter(function(o){return!o.isRexContainerLite})),Xg(s,e,t),this}};Object.assign(Fm,OS,kS,_S,AS,RS,LS,FS,BS,IS,XS,zS,YS,NS,GS,US,WS,VS,HS,KS,$S);class ii extends Ur{constructor(t,n,s,o,i,r){Array.isArray(o)&&(r=o,o=void 0,i=void 0),super(t,n,s,o,i),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,this._cameraFilter=0,this.privateRenderLayer=void 0,r&&this.add(r)}destroy(t){this.scene&&!this.ignoreDestroy&&(this.syncChildrenEnable=!1,super.destroy(t),this.privateRenderLayer&&this.privateRenderLayer.scene&&(this.privateRenderLayer.list.length=0,this.privateRenderLayer.destroy()))}resize(t,n){return this.setSize(t,n),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get cameraFilter(){return this._cameraFilter}set cameraFilter(t){this._cameraFilter!==t&&(this._cameraFilter=t,this.syncCameraFilter())}get list(){return this.children}static GetParent(t){return Ye(t)}get parentContainer(){return this._parentContainer}set parentContainer(t){this._parentContainer||t?this.setParentContainerFlag?this._parentContainer=t:this._parentContainer&&!t?(this.removeFromContainer(),this._parentContainer=t):t?(this._parentContainer=t,this.addToContainer(t)):this._parentContainer=t:this._parentContainer=t}get setParentContainerFlag(){if(this._setParentContainerFlag)return!0;var t=Ye(this);return!!t&&t.setParentContainerFlag}}Object.assign(ii.prototype,Fm);var Co=function(e){return e.hasOwnProperty("rexSizer")||(e.rexSizer={}),e.rexSizer};const It=Phaser.Display.Align,Nn={center:It.CENTER,left:It.LEFT_CENTER,right:It.RIGHT_CENTER,top:It.TOP_CENTER,bottom:It.BOTTOM_CENTER,"left-top":It.TOP_LEFT,"top-left":It.TOP_LEFT,"left-center":It.LEFT_CENTER,"center-left":It.LEFT_CENTER,"left-bottom":It.BOTTOM_LEFT,"bottom-left":It.BOTTOM_LEFT,"center-top":It.TOP_CENTER,"top-center":It.TOP_CENTER,"center-center":It.CENTER,"center-bottom":It.BOTTOM_CENTER,"bottom-center":It.BOTTOM_CENTER,"right-top":It.TOP_RIGHT,"top-right":It.TOP_RIGHT,"right-center":It.RIGHT_CENTER,"center-right":It.RIGHT_CENTER,"right-bottom":It.BOTTOM_RIGHT,"bottom-right":It.BOTTOM_RIGHT};var Gl=new Phaser.GameObjects.Zone({sys:{queueDepthSort:Ht,events:{once:Ht}}},0,0,1,1);Gl.setOrigin(0);var Oh=function(e){var t=Tt(e);return e.y+t-t*e.originY},kh=function(e){var t=bt(e);return e.x-t*e.originX+.5*t},Mh=function(e,t){var n=Tt(e);return e.y=t-n+n*e.originY,e},_h=function(e,t){var n=bt(e),s=n*e.originX;return e.x=t+s-.5*n,e},Ah=function(e){var t=bt(e);return e.x-t*e.originX},Rh=function(e,t){var n=bt(e);return e.x=t+n*e.originX,e},Lh=function(e){var t=bt(e);return e.x+t-t*e.originX},Dh=function(e,t){var n=bt(e);return e.x=t-n+n*e.originX,e},Fh=function(e,t){var n=Tt(e),s=n*e.originY;return e.y=t+s-.5*n,e},Bh=function(e){var t=Tt(e);return e.y-t*e.originY+.5*t},Ih=function(e){var t=Tt(e);return e.y-t*e.originY},Xh=function(e,t){var n=Tt(e);return e.y=t+n*e.originY,e},pi=[];pi[11]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),_h(e,kh(t)+n),Mh(e,Oh(t)+s),e},pi[10]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Rh(e,Ah(t)-n),Mh(e,Oh(t)+s),e},pi[12]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Dh(e,Lh(t)+n),Mh(e,Oh(t)+s),e},pi[6]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),function(o,i,r){_h(o,i),Fh(o,r)}(e,kh(t)+n,Bh(t)+s),e},pi[4]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Rh(e,Ah(t)-n),Fh(e,Bh(t)+s),e},pi[8]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Dh(e,Lh(t)+n),Fh(e,Bh(t)+s),e},pi[1]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),_h(e,kh(t)+n),Xh(e,Ih(t)-s),e},pi[0]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Rh(e,Ah(t)-n),Xh(e,Ih(t)-s),e},pi[2]=function(e,t,n,s){return n===void 0&&(n=0),s===void 0&&(s=0),Dh(e,Lh(t)+n),Xh(e,Ih(t)-s),e};var Bm=function(e,t,n,s,o){return pi[n](e,t,s,o)},Wr=function(e,t,n,s,o,i){Gl.setPosition(t,n).setSize(s,o),Bm(e,Gl,i)};const on=Phaser.Utils.Objects.GetValue,JS=Phaser.GameObjects.Group,QS=Phaser.GameObjects.Container;var tC=function(e,t,n){return e.add.text(0,0,"")},Im=function(e,t){Array.isArray(e)||(e=[e]),t===void 0&&(t=[]);for(var n=0,s=e.length;n<s;n++){var o=e[n];o instanceof QS&&(t.push(...o.list),Im(o.list,t))}return t},ms=void 0;const Aa=Phaser.Utils.Objects.GetValue;var Ns=function(e,t){return e===void 0&&(e=0),t===void 0&&(t={}),typeof e=="number"?(t.left=e,t.right=e,t.top=e,t.bottom=e):(t.left=Aa(e,"left",0),t.right=Aa(e,"right",0),t.top=Aa(e,"top",0),t.bottom=Aa(e,"bottom",0)),t};const eC=ii.prototype.add;var Vr=function(e){return eC.call(this,e),this.sizerEventsEnable&&(e.emit("sizer.add",e,this),this.emit("add",e,this)),this};const iC={addBackground(e,t,n){return this.backgroundChildren===void 0&&(this.backgroundChildren=[]),typeof t=="string"&&(n=t,t=void 0),t===void 0&&(t=0),Vr.call(this,e),this.backgroundChildren.push(e),this.getSizerConfig(e).padding=Ns(t),n!==void 0&&this.addChildrenMap(n,e),this},isBackground(e){return this.backgroundChildren!==void 0&&this.backgroundChildren.indexOf(e)!==-1}};var ts=function(e,t){var n=null;if(t===void 0)e.hasOwnProperty("rexContainer")&&((n=e.rexContainer.parent)?n.isRexSizer||(n=ts(n)):n=null);else for(n=ts(e);n&&n.name!==t;)n=ts(n);return n};const Gn={getParentSizer(e,t){return typeof e=="string"&&(t=e,e=void 0),e===void 0&&(e=this),ts(e,t)},getTopmostSizer(e){return e===void 0&&(e=this),function(t){for(var n=ts(t);n;)t=n,n=ts(n);return t}(e)},hasParentSizer(e,t){t===void 0&&(t=this);for(var n=ts(t);n;){if(n===e)return!0;n=ts(n)}return!1},hasChild(e,t){return t===void 0&&(t=this),this.hasParentSizer(t,e)}},sC=Phaser.Utils.Array.Remove,nC=ii.prototype.remove,Mc=Gn.getParentSizer;var jr=function(e,t){for(var n=Mc(e);n;)n.removeChildCallback&&n.removeChildCallback(e,t),n=Mc(n);return this.isBackground(e)&&sC(this.backgroundChildren,e),nC.call(this,e,t),!t&&this.sizerEventsEnable&&(e.emit("sizer.remove",e,this),this.emit("remove",e,this)),this};const rC=Phaser.Utils.Array.Remove,aC=Gn.getParentSizer,oC={removeFromParentSizer(){var e=aC(gameObject);return e&&e.remove(this),this},removeBackground(e,t){return this.backgroundChildren===void 0||this.getParentSizer(e)!==this||(rC(this.backgroundChildren,e),jr.call(this,e,t)),this},removeAllBackgrounds(e){if(this.backgroundChildren===void 0)return this;for(var t=this.backgroundChildren.length-1;t>=0;t--)this.remove(this.backgroundChildren[t],e);return this}};var _c=function(e,t){if(typeof e=="string")this.childrenMap[e]=t;else{var n=e;for(e in n)this.childrenMap[e]=n[e]}return this};const hC=/(\S+)\[(\d+)\]/i,lC={getInnerPadding(e){return co(this.space,e)},setInnerPadding(e,t){return ns(this.space,e,t),this},getOuterPadding(e){return co(this.getSizerConfig(this).padding,e)},setOuterPadding(e,t){return ns(this.getSizerConfig(this).padding,e,t),this},getChildOuterPadding(e,t){return typeof e=="string"&&(e=this.getElement(e)),co(this.getSizerConfig(e).padding,t)},setChildOuterPadding(e,t,n){return typeof e=="string"&&(e=this.getElement(e)),ns(this.getSizerConfig(e).padding,t,n),this}};var fu=function(e){var t=this.childrenWidth;if(t!==void 0){var n=this.minWidth!==void 0?this.minWidth*this.scaleX:0;return e===void 0?(e=Math.max(n,t),this.layoutWarnEnable&&n>0&&t>n&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${n}) < childrenWidth (${t})`)):this.layoutWarnEnable&&(n>e||t>e)&&console.warn(`Layout width warn: ${this.constructor.name}'s minWidth (${n}) or childrenWidth (${t} > targetWidth ${e})`),e}},pu=function(){var e;for(var t in this.sizerChildren)if(!(!(e=this.sizerChildren[t])||e.isRexSizer&&e.ignoreLayout)&&e.runWidthWrap&&(!e.hasWidthWrap||e.hasWidthWrap()))return!0;return!1},gu=function(e){var t,n,s;for(var o in this.sizerChildren)!(t=this.sizerChildren[o])||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap||(n=this.getExpandedChildWidth(t,e),t.isRexSizer?(s=t.resolveWidth(n))===void 0&&(s=n):s=n,t.runWidthWrap(s));return this},mu=function(e){var t=this.childrenHeight;if(t!==void 0){var n=this.minHeight!==void 0?this.minHeight*this.scaleY:0;return e===void 0?(e=Math.max(n,t),this.layoutWarnEnable&&n>0&&t>n&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${n}) < childrenHeight (${t})`)):this.layoutWarnEnable&&(n>e||t>e)&&console.warn(`Layout height warn: ${this.constructor.name}'s minHeight (${n}) or childrenHeight (${t}) > targetHeight (${e})`),e}},vu=function(){var e;for(var t in this.sizerChildren)if(!(!(e=this.sizerChildren[t])||e.isRexSizer&&e.ignoreLayout)&&e.runHeightWrap&&(!e.hasHeightWrap||e.hasHeightWrap()))return!0;return!1},yu=function(e){var t,n,s;for(var o in this.sizerChildren)!(t=this.sizerChildren[o])||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap||(n=this.getExpandedChildHeight(t,e),t.isRexSizer?(s=t.resolveHeight(n))===void 0&&(s=n):s=n,t.runHeightWrap(s));return this};const uC={getShownChildren(e){e===void 0&&(e=[]);for(var t,n=this.children,s=0,o=n.length;s<o;s++)(t=n[s]).rexSizer&&t.rexSizer.hidden||e.push(t);return e},getAllShownChildren(e){e===void 0&&(e=[]);for(var t=[this];t.length>0;){var n=t.shift();n.rexSizer&&n.rexSizer.hidden||(n!==this&&e.push(n),n.isRexContainerLite&&t.push(...n.children))}return e}};var Hr=function(){this._childrenWidth=void 0,this._childrenHeight=void 0;for(var e,t=this.getChildrenSizers(),n=0,s=t.length;n<s;n++)(e=t[n]).ignoreLayout||e.preLayout()},Ac=[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Mesh,Phaser.GameObjects.Shader,Phaser.GameObjects.Video],Rc=[Phaser.GameObjects.BitmapText],ae=function(e,t,n){if(e&&(t!==void 0||n!==void 0))if(function(r){if(r.resize)return!0;if(!r.setSize)return!1;for(var h=0,a=Ac.length;h<a;h++){var u=Ac[h];if(u&&r instanceof u)return!1}return!0}(e)){var s,o;s=t===void 0?e.width:t/e.scaleX,o=n===void 0?e.height:n/e.scaleY,e.resize?e.resize(s,o):e.setSize(s,o)}else{var i=function(r){if(r.displayWidth===void 0)return!1;for(var h=0,a=Rc.length;h<a;h++){var u=Rc[h];if(u&&r instanceof u)return!1}return!0}(e);t!==void 0&&(i?e.displayWidth=t:e.scaleX=t/e.width),n!==void 0&&(i?e.displayHeight=n:e.scaleY=n/e.height)}},Lc=function(e,t,n){return(t=e.resolveWidth(t))!==void 0&&n&&(e.resolveChildrenWidth(t),e.runWidthWrap(t)),t},dC=function(e,t,n){return(t=e.resolveHeight(t))!==void 0&&n&&(e.resolveChildrenHeight(t),e.runHeightWrap(t)),t},cC=function(e,t,n,s){ae(n,e,t)};const Ra=Phaser.Utils.Objects.GetValue;class fC extends Rt{constructor(t,n){super(t,{eventEmitter:!1}),this.viewport=void 0,this.resetFromJSON(n)}shutdown(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,super.shutdown(t))}resetFromJSON(t){var n,s,o,i,r,h,a,u;t===void 0&&(t={}),t.x!==void 0?(n=null,s=t.x):t.left!==void 0?(n=0,s=t.left):t.right!==void 0?(n=1,s=t.right):t.centerX!==void 0&&(n=.5,s=t.centerX),t.y!==void 0?(o=null,i=t.y):t.top!==void 0?(o=0,i=t.top):t.bottom!==void 0?(o=1,i=t.bottom):t.centerY!==void 0&&(o=.5,i=t.centerY),s!==void 0&&(s=s.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),r=parseFloat(s[0])/100,h=s[1]===""?0:parseFloat(s[1])),i!==void 0&&(i=i.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),a=parseFloat(i[0])/100,u=i[1]===""?0:parseFloat(i[1]));var l,d,c=t.width;c!==void 0&&(c=c.split("%"),l=parseFloat(c[0])/100,d=c[1]===""?0:parseFloat(c[1]));var p,f,v=t.height;v!==void 0&&(v=v.split("%"),p=parseFloat(v[0])/100,f=v[1]===""?0:parseFloat(v[1])),this.setAlign(n,o),this.setPercentage(r,a),this.setOffset(h,u),this.setSizePercentage(l,p),this.setSizePadding(d,f);var g=Ra(t,"onResizeCallback",cC),y=Ra(t,"onResizeCallbackScope");this.setResizeCallback(g,y);var m=Ra(t,"onUpdateViewportCallback"),x=Ra(t,"onUpdateViewportCallbackScope");return this.setUpdateViewportCallback(m,x),this.autoAnchor(t.enable),this}autoAnchor(t){return t===void 0&&(t=!0),t=!!t,this.autoAnchorEnable===t||(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t),this}setAlign(t,n){return this.alignX=t,this.alignY=n,this}setPercentage(t,n){return this.percentageX=t,this.percentageY=n,this}setOffset(t,n){return this.offsetX=t,this.offsetY=n,this}setSizePercentage(t,n){return this.percentageWidth=t,this.percentageHeight=n,this}setSizePadding(t,n){return this.paddingWidth=t,this.paddingHeight=n,this}setResizeCallback(t,n){return this.onResizeCallback=t,this.onResizeCallbackScope=n,this}setUpdateViewportCallback(t,n){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=n,this}anchor(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}updateSize(){var t=this.onResizeCallback,n=this.onResizeCallbackScope,s=this.anchorWidth,o=this.anchorHeight;if((s!==void 0||o!==void 0)&&t){var i=this.parent;s===void 0&&(s=i.width),o===void 0&&(o=i.height),n?t.call(n,s,o,i,this):t(s,o,i,this)}}updatePosition(){var t=this.parent;return this.alignX===null?t.x=this.anchorX:this.alignX!==void 0&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),this.alignY===null?t.y=this.anchorY:this.alignY!==void 0&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}get anchorX(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}get anchorY(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}get anchorWidth(){if(this.percentageWidth!==void 0)return this.viewport.width*this.percentageWidth+this.paddingWidth}get anchorHeight(){if(this.percentageHeight!==void 0)return this.viewport.height*this.percentageHeight+this.paddingHeight}updateViewport(){var t=this.parent.scene.cameras.main;this.viewport=Xr(this.scene,t,this.viewport);var n=this.viewport,s=this.onUpdateViewportCallback,o=this.onUpdateViewportCallbackScope;s&&(o?s.call(o,n,this.parent,this):s(n,this.parent,this))}}const pC=Phaser.Utils.Objects.GetValue,hn=Phaser.Utils.Objects.GetAdvancedValue,Dc=Phaser.Math.Linear;class Lr extends Xn{constructor(t,n){super(t,n),this.scaleStart={},this.scaleEnd={},this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setMode(pC(t,"mode",0)),this.setScaleRange(hn(t,"start",void 0),hn(t,"end",0)),this}setMode(t){return typeof t=="string"&&(t=gC[t]),this.mode=t,this}setScaleRange(t,n){return typeof t=="number"?(this.startX=t,this.startY=t):(this.startX=hn(t,"x",this.parent.scaleX),this.startY=hn(t,"y",this.parent.scaleY)),typeof n=="number"?(this.endX=n,this.endY=n):(this.endX=hn(n,"x",void 0),this.endY=hn(n,"y",void 0)),this.hasScaleX=this.startX!==void 0&&this.endX!==void 0,this.hasScaleY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;this.hasScaleX&&(t.scaleX=this.startX),this.hasScaleY&&(t.scaleY=this.startY);var n=this.repeat;return this.mode===2&&n!==-1&&(n=2*(n+1)-1),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(n),super.start(),this}updateTarget(t,n){var s=n.t;n.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasScaleX&&(t.scaleX=Dc(this.startX,this.endX,s)),this.hasScaleY&&(t.scaleY=Dc(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const gC={stop:0,destroy:1,yoyo:2};var xu=function(e,t,n,s,o){var i,r;switch(s===void 0&&(s="Cubic"),n){case 0:case"x":i={x:0},r={x:e.scaleX};break;case 1:case"y":i={y:0},r={y:e.scaleY};break;default:i=0,r=e.scale}var h={mode:0,start:i,end:r,duration:t,ease:s};return o===void 0?o=new Lr(e,h):o.resetFromJSON(h),o.restart(),o},Xm=function(e,t,n,s,o,i){s===void 0&&(s="Linear"),o instanceof Lr&&(i=o,o=void 0),o===void 0&&(o=!0);var r={};switch(r.mode=o?1:0,n){case 0:case"x":r.end={x:0};break;case 1:case"y":r.end={y:0};break;default:r.end=0}return r.duration=t,r.ease=s,i===void 0?i=new Lr(e,r):i.resetFromJSON(r),i.restart(),i};const zh=Phaser.Utils.Objects.IsPlainObject,Fc={onInitScale(){var e=this,t=this._scaleBehavior;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},popUp(e,t,n){if(zh(e)){var s=e;e=s.duration,t=s.orientation,n=s.ease}var o=this._scaleBehavior===void 0;return this._scaleBehavior=xu(this,e,t,n,this._scaleBehavior),o&&this.onInitScale(),this._scaleBehavior.completeEventName="popup.complete",this},popUpPromise(e,t,n){return this.popUp(e,t,n),re(this._scaleBehavior)},isRunningPopUp(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="popup.complete"},scaleDownDestroy(e,t,n,s){if(zh(e)){var o=e;e=o.duration,t=o.orientation,n=o.ease,s=o.destroy}var i=this._scaleBehavior===void 0;return this._scaleBehavior=Xm(this,e,t,n,s,this._scaleBehavior),i&&this.onInitScale(),this._scaleBehavior.completeEventName="scaledown.complete",this},scaleDownDestroyPromise(e,t,n,s){return this.scaleDownDestroy(e,t,n,s),re(this._scaleBehavior)},scaleDown(e,t,n){return this.scaleDownDestroy(e,t,n,!1),this},scaleDownPromise(e,t,n){return this.scaleDown(e,t,n),re(this._scaleBehavior)},isRunningScaleDown(){return this._scaleBehavior&&this._scaleBehavior.completeEventName==="scaledown.complete"},scaleYoyo(e,t,n,s,o){if(zh(e)){var i=e;e=i.duration,t=i.peakValue,n=i.repeat,s=i.orientation,o=i.ease}var r=this._scaleBehavior===void 0;return this._scaleBehavior=function(h,a,u,l,d,c,p){var f,v;switch(u===void 0&&(u=1.2),l===void 0&&(l=0),c===void 0&&(c="Cubic"),d){case 0:case"x":f={x:h.scaleX},v={x:u};break;case 1:case"y":f={y:h.scaleX},v={y:u};break;default:f=h.scaleX,v=u}var g={mode:2,start:f,end:v,duration:a/2,ease:c,repeat:l};return p===void 0?p=new Lr(h,g):p.resetFromJSON(g),p.restart(),p}(this,e,t,n,s,o,this._scaleBehavior),r&&this.onInitScale(),this._scaleBehavior.completeEventName="scaleyoyo.complete",this},scaleYoyoPromise(e,t,n,s,o){return this.scaleYoyo(e,t,n,s,o),re(this._scaleBehavior)},isRunningScaleYoyo(){return this._scaleBehavior&&(this._scaleBehavior.completeEventName="scaleyoyo.complete")},isRunningEaseScale(){return this.isRunningPopUp()||this.isRunningScaleDown()||this.isRunningScaleYoyo()}};var _i={};Object.assign(_i,Fc),_i.onInitScale=function(){Fc.onInitScale.call(this);var e=this;this._scaleBehavior.on("update",function(){var t=Gn.getParentSizer(e);t&&t.resetChildPositionState(e)})};const mC=Phaser.Utils.Objects.GetValue,Bc=Phaser.Utils.Objects.GetAdvancedValue,vC=Phaser.Math.Linear;let Ul=class extends Xn{constructor(e,t){super(e,t),this.resetFromJSON(t),this.boot()}resetFromJSON(e){return super.resetFromJSON(e),this.setMode(mC(e,"mode",0)),this.setAlphaRange(Bc(e,"start",this.parent.alpha),Bc(e,"end",0)),this}setMode(e){return typeof e=="string"&&(e=yC[e]),this.mode=e,this}setAlphaRange(e,t){return this.alphaStart=e,this.alphaEnd=t,this}start(){return this.timer.isRunning||(this.parent.setAlpha(this.alphaStart),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start()),this}updateTarget(e,t){var n=t.t;t.isOddIteration&&(n=1-n),e.alpha=vC(this.alphaStart,this.alphaEnd,n)}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}};const yC={stop:0,destroy:1,yoyo:2},xC=Phaser.Utils.Objects.IsPlainObject;var bu=function(e,t,n,s){var o,i;xC(n)?(o=n.start,i=n.end):i=n,o===void 0&&(o=0),i===void 0&&(i=1);var r={mode:0,start:o,end:i,duration:t};return s===void 0?s=new Ul(e,r):s.resetFromJSON(r),s.restart(),s},Tu=function(e,t,n,s){n instanceof Ul&&(s=n,n=void 0),n===void 0&&(n=!0);var o={mode:n?1:0,end:0,duration:t};return s===void 0?s=new Ul(e,o):s.resetFromJSON(o),s.restart(),s};const Ic=Phaser.Utils.Objects.IsPlainObject,Xc={onInitFade(){var e=this,t=this._fade;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},fadeIn(e,t){if(Ic(e)){var n=e;e=n.duration,t=n.alpha}var s=this._fade===void 0;return this._fade=bu(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadein.complete",this},fadeInPromise(e,t){return this.fadeIn(e,t),re(this._fade)},isRunningFadeIn(){return this._fade&&this._fade.completeEventName==="fadein.complete"},fadeOutDestroy(e,t){if(Ic(e)){var n=e;e=n.duration,t=n.destroy}var s=this._fade===void 0;return this._fade=Tu(this,e,t,this._fade),s&&this.onInitFade(),this._fade.completeEventName="fadeout.complete",this},fadeOutDestroyPromise(e,t){return this.fadeOutDestroy(e,t),re(this._fade)},fadeOut(e){return this.fadeOutDestroy(e,!1),this},fadeOutPromise(e){return this.fadeOut(e),re(this._fade)},isRunningFadeOut(){return this._fade&&this._fade.completeEventName==="fadeout.complete"},isRunningEaseFade(){return this.isRunningFadeIn()||this.isRunningFadeOut()}};var Dr={};Object.assign(Dr,Xc),Dr.onInitFade=function(){Xc.onInitFade.call(this);var e=this;this._fade.on("update",function(){var t=Gn.getParentSizer(e);t&&t.resetChildAlphaState(e)})};const bC=Phaser.Utils.Objects.GetValue,ln=Phaser.Utils.Objects.GetAdvancedValue,zc=Phaser.Math.Linear;class La extends Xn{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(bC(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var n=ln(t,"x",void 0),s=ln(t,"y",void 0);this.setTargetPosition(n,s)}else this.setTargetPosition(t);return this}setMode(t){return typeof t=="string"&&(t=TC[t]),this.mode=t,this}setTargetPosition(t,n){if(typeof t=="number"||typeof n=="number")this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=n;else{var s=t;this.startX=ln(s,"startX",void 0),this.startY=ln(s,"startY",void 0),this.endX=ln(s,"endX",void 0),this.endY=ln(s,"endY",void 0)}return this.hasMoveX=this.startX!==void 0&&this.endX!==void 0,this.hasMoveY=this.startY!==void 0&&this.endY!==void 0,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(this.mode===2?-1:0),super.start(),this}updateTarget(t,n){var s=n.t;n.isOddIteration&&(s=1-s),s=this.easeFn(s),this.hasMoveX&&(t.x=zc(this.startX,this.endX,s)),this.hasMoveY&&(t.y=zc(this.startY,this.endY,s))}complete(){return super.complete(),this.mode===1&&this.parent.destroy(),this}}const TC={stop:0,destroy:1,yoyo:2};var Da=function(e,t){if(typeof e=="number")return e;var n=e[0],s=parseFloat(e.substr(2));switch(n){case"+":return t+s;case"-":return t-s;case"*":return t*s;case"/":return t/s}};const Yc=Phaser.Utils.Objects.IsPlainObject,Nc=Phaser.Math.Distance.Between,Gc={onInitEaseMove(){var e=this,t=this._easeMove;t.completeEventName=void 0,t.on("complete",function(){t.completeEventName&&(e.emit(t.completeEventName,e),t.completeEventName=void 0)})},moveFrom(e,t,n,s,o){if(Yc(e)){var i=e;t=i.x,n=i.y,e=i.hasOwnProperty("speed")?1e3*Nc(t,n,this.x,this.y)/i.speed:i.duration,s=i.ease}var r=this._easeMove===void 0;return this._easeMove=function(h,a,u,l,d,c,p){c instanceof La&&(p=c,c=void 0),c===void 0&&(c=!1);var f={};return f.mode=c?1:0,u!==void 0&&(f.startX=Da(u,h.x),f.endX=h.x),l!==void 0&&(f.startY=Da(l,h.y),f.endY=h.y),f.duration=a,f.ease=d===void 0?"Linear":d,p===void 0?p=new La(h,f):p.resetFromJSON(f),p.restart(),p}(this,e,t,n,s,o,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName="movefrom.complete",this},moveFromPromise(e,t,n,s,o){return this.moveFrom(e,t,n,s,o),re(this._easeMove)},moveFromDestroy(e,t,n,s){return this.moveFrom(e,t,n,s,!0),this},moveFromDestroyPromise(e,t,n,s){return this.moveFromDestroy(e,t,n,s),re(this._easeMove)},isRunningMoveFrom(){return this._easeMove&&(this._easeMove.completeEventName="movefrom.complete")},moveTo(e,t,n,s,o){if(Yc(e)){var i=e;t=i.x,n=i.y,e=i.hasOwnProperty("speed")?1e3*Nc(t,n,this.x,this.y)/i.speed:i.duration,s=i.ease}var r=this._easeMove===void 0;return this._easeMove=function(h,a,u,l,d,c,p){c instanceof La&&(p=c,c=void 0),c===void 0&&(c=!1);var f={};return f.mode=c?1:0,u!==void 0&&(f.startX=h.x,f.endX=Da(u,h.x)),l!==void 0&&(f.startY=h.y,f.endY=Da(l,h.y)),f.duration=a,f.ease=d===void 0?"Linear":d,p===void 0?p=new La(h,f):p.resetFromJSON(f),p.restart(),p}(this,e,t,n,s,o,this._easeMove),r&&this.onInitEaseMove(),this._easeMove.completeEventName,this},moveToPromise(e,t,n,s,o){return this.moveTo(e,t,n,s,o),re(this._easeMove)},moveToDestroy(e,t,n,s){return this.moveTo(e,t,n,s,!0),this},moveToDestroyPromise(e,t,n,s){return this.moveToDestroy(e,t,n,s,!0),re(this._easeMove)},isRunningMoveTo(){return this._easeMove&&this._easeMove.completeEventName==="moveto.complete"},isRunningEaseMove(){return this.isRunningMoveFrom()||this.isRunningMoveTo()},moveStop(e){return this._easeMove?(this._easeMove.stop(e),this):this}};var Eo={};Object.assign(Eo,Gc),Eo.onInitEaseMove=function(){Gc.onInitEaseMove.call(this);var e=this;this._easeMove.on("update",function(){var t=Gn.getParentSizer(e);t&&t.resetChildPositionState(e)})};const Re=Phaser.Utils.Objects.GetValue;class wC extends Ro{constructor(t,n){super(t,n),this.timer=new ng,this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.timer.resetFromJSON(Re(t,"timer")),this.setEnable(Re(t,"enable",!0)),this.setMode(Re(t,"mode",1)),this.isRunning=Re(t,"isRunning",!1),this.setMagnitudeMode(Re(t,"magnitudeMode",1)),this.setAxisMode(Re(t,"axis",0)),this.setDuration(Re(t,"duration",500)),this.setMagnitude(Re(t,"magnitude",10)),this.ox=Re(t,"ox",void 0),this.oy=Re(t,"oy",void 0),this}toJSON(){return{timer:this.timer.toJSON(),enable:this.enable,mode:this.mode,isRunning:this.isRunning,magnitudeMode,duration:this.duration,magnitude:this.magnitude,ox:this.ox,oy:this.oy}}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}startTicking(){super.startTicking(),this.mode===0?(this.scene.game.events.on("poststep",this.update,this),this.scene.game.events.on("prestep",this.backToOrigin,this)):this.scene.sys.events.on("preupdate",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&(this.mode===0?(this.scene.game.events.off("poststep",this.update,this),this.scene.game.events.off("prestep",this.backToOrigin,this)):this.scene.sys.events.off("preupdate",this.update,this))}setEnable(t){return t==null&&(t=!0),this.enable=t,this}setMode(t){return typeof t=="string"&&(t=SC[t]),this.mode=t,this}setMagnitudeMode(t){return typeof t=="string"&&(t=EC[t]),this.magnitudeMode=t,this}setAxisMode(t){return typeof t=="string"&&(t=CC[t]),this.axisMode=t,this}setDuration(t){return this.duration=t,this}setMagnitude(t){return this.magnitude=t,this}start(t,n){if(typeof t!="number"){var s=t;n=Re(s,"magnitude",void 0),t=Re(s,"duration",void 0)}return n!==void 0&&this.setMagnitude(n),t!==void 0&&this.setDuration(t),this.timer.setDuration(this.duration).start(),super.start(),this}shake(t,n){return this.start(t,n),this}update(t,n){if(!this.isRunning||!this.enable)return this;var s=this.parent;if(!s.active)return this;if(this.timer.update(t,n),this.timer.isDone)this.backToOrigin(),this.complete();else{this.ox===void 0&&(this.ox=s.x,this.oy=s.y);var o=this.magnitude;this.magnitudeMode===1&&(o*=1-this.timer.t);var i=Math.random()*Math.PI*2,r=this.ox+Math.cos(i)*o,h=this.oy+Math.sin(i)*o;switch(this.axisMode){case 1:s.x=r;break;case 2:s.y=h;break;default:s.x=r,s.y=h}}return this}backToOrigin(){if(!this.isRunning||!this.enable)return this;if(this.ox===void 0)return this;var t=this.parent;switch(this.axisMode){case 1:t.x=this.ox;break;case 2:t.y=this.oy;break;default:t.x=this.ox,t.y=this.oy}return this.ox=void 0,this.oy=void 0,this}}const SC={effect:0,behavior:1},CC={both:0,"h&v":0,"x&y":0,horizontal:1,h:1,x:1,vertical:2,v:2,y:2},EC={constant:0,decay:1},PC=Phaser.Utils.Objects.IsPlainObject,OC={shake(e,t,n){if(PC(e)){var s=e;e=s.duration,t=s.magnitude,n=s.magnitudeMode}var o;return this._shake===void 0&&(this._shake=new wC(this,{mode:0,magnitudeMode:1}),o=this,this._shake.on("complete",function(){o.emit("shake.complete",o)})),e!==void 0&&this._shake.setDuration(e),t!==void 0&&this._shake.setMagnitude(t),n!==void 0&&this._shake.setMagnitudeMode(n),this._shake.shake(),this},shakePromise(e,t){return this.shake(e,t),re(this._shake)}},Uc=Phaser.Utils.Objects.IsPlainObject;class kC extends Rt{constructor(t,n){super(t,n),this.parent.setDataEnabled(),this.easeTasks={}}complete(t){this.emit(`complete-${t}`,this.parent,this),this.emit("complete",t,this.parent,this)}getEaseTask(t){var n=this.easeTasks[t];return n===void 0&&(n=new Qe(this.parent),this.easeTasks[t]=n,n.setTarget(this.parent.data.values).on("complete",function(){this.complete(t)},this)),n}easeTo(t,n,s,o){if(Uc(t)){var i=t;t=i.key,n=i.value,s=i.duration,o=i.ease;var r=i.speed;s===void 0&&r!==void 0&&(s=Math.abs(n-this.parent.data.values[t])/r*1e3)}return s===void 0&&(s=1e3),o===void 0&&(o="Linear"),this.getEaseTask(t).restart({key:t,to:n,duration:s,ease:o}),this}easeFrom(t,n,s,o){if(Uc(t)){var i=t;t=i.key,n=i.value,s=i.duration,o=i.ease;var r=i.speed;s===void 0&&r!==void 0&&(s=Math.abs(n-this.parent.data.values[t])/r*1e3)}return s===void 0&&(s=1e3),o===void 0&&(o="Linear"),this.getEaseTask(t).restart({key:t,from:n,duration:s,ease:o}),this}stopEase(t,n){n===void 0&&(n=!0);var s=this.easeTasks[t];return s&&s.stop(n),this}stopAll(t){for(var n in t===void 0&&(t=!0),this.easeTasks)this.stopEase(n,t);return this}}const MC={easeDataTo(e,t,n,s){var o;return this._easeData||(this._easeData=new kC(this),o=this,this._easeData.on("complete",function(i){o.emit(`easedata.${i}.complete`,o),o.emit("easedata.complete",i,o)})),this._easeData.easeTo(e,t,n,s),this},easeDataToPromise(e,t,n,s){return this.easeDataTo(e,t,n,s),uu(this._easeData,`complete-${e}`)},stopEaseData(e,t){return this._easeData?(this._easeData.stopEase(e,t),this):this},stopAllEaseData(e){return this._easeData?(this._easeData.stopAll(e),this):this}};var _C=Phaser.Utils.Array.Remove;const zm={delayCall(e,t,n){var s,o;this._delayCallTimers===void 0&&((s=this)._delayCallTimers=[],s.once("destroy",function(){for(var r=s._delayCallTimers,h=0,a=r.length;h<a;h++)r[h].remove();s._delayCallTimers=void 0}));var i=this;return o=this.scene.time.delayedCall(e,function(){_C(i._delayCallTimers,o),n?t.call(n):t()}),this._delayCallTimers.push(o),this}};var _s=function(e){Nm(e,!1)},As=function(e){Nm(e,!0)},Ym=function(e){return!!e&&!Co(e).hidden},Nm=function(e,t){if(e){Co(e).hidden=t;var n=Ye(e);n?n.setChildVisible(e,!t):e.setVisible(!t)}};const AC={show(e){return e===void 0&&(e=this),_s(e),this},hide(e){return e===void 0&&(e=this),As(e),this},isShow(e){return e===void 0&&(e=this),Ym(e)}},RC=["next","exit","enter"];let Gm=class{constructor(e){var t=xt(e,"states",void 0);t&&this.addStates(t);var n=xt(e,"extend",void 0);if(n)for(var s in n)this.hasOwnProperty(s)&&this[s]!==void 0||(this[s]=n[s]);var o=xt(e,"eventEmitter",void 0),i=xt(e,"EventEmitterClass",void 0);this.setEventEmitter(o,i),this._stateLock=!1,this.resetFromJSON(e)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(e){this.setEnable(xt(e,"enable",!0)),this.start(xt(e,"start",void 0));var t=xt(e,"init",void 0);return t&&t.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(e){return e===void 0&&(e=!0),this.enable=e,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(e){if(this.enable&&!this._stateLock&&this._state!==e){if(this._prevState=this._state,this._state=e,this._stateLock=!0,this.emit("statechange",this),this._prevState!=null){var t="exit_"+this._prevState,n=this[t];n&&n.call(this),this.emit(t,this)}if(this._stateLock=!1,this._state!=null){var s="enter_"+this._state,o=this[s];o&&o.call(this),this.emit(s,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(e){return this._start=e,this._prevState=void 0,this._state=e,this}goto(e){return e!=null&&(this.state=e),this}next(){var e,t=this["next_"+this.state];return t&&(e=typeof t=="string"?t:t.call(this)),this.goto(e),this}get stateProperties(){return RC}addState(e,t){typeof e!="string"&&(e=(t=e).name);for(var n=this.stateProperties,s=0,o=n.length;s<o;s++){var i=n[s],r=t[i];r&&(this[`${i}_${e}`]=r)}return this}addStates(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.addState(e[t]);else for(var s in e)this.addState(s,e[s]);return this}runMethod(e,t,n,s,o,i){var r=this[e+"_"+this.state];if(r){var h=arguments.length;switch(h){case 1:return r.call(this);case 2:return r.call(this,t);case 3:return r.call(this,t,n);case 4:return r.call(this,t,n,s);case 5:return r.call(this,t,n,s,o);case 6:return r.call(this,t,n,s,o,i)}for(var a=new Array(h-1),u=1;u<h;u++)a[u-1]=arguments[u];return r.apply(this,a)}}};Object.assign(Gm.prototype,sm);var Yh=function(e,t,n,s,o){o===void 0&&(o=!1);var i=e._events[t];if(!i)return!1;for(var r=0,h=i.length;r<h;r++){var a=i[r];if(a.fn===n&&a.context===s&&a.once===o)return!0}return!1};const LC=["next","exit","enter","update","preupdate","postupdate"];class Gs extends Gm{shutdown(){this.stopUpdate(),this.stopPreUpdate(),this.stopPostUpdate(),this._scene=void 0,super.shutdown()}resetFromJSON(t){return super.resetFromJSON(t),this._scene=xt(t,"scene",void 0),this}get stateProperties(){return LC}update(t,n){this.runMethod("update",t,n)}preupdate(t,n){this.runMethod("preupdate",t,n)}postupdate(t,n){this.runMethod("postupdate",t,n)}startUpdate(t){t||(t=this._scene);var n=t.sys.events;return Yh(n,"update",this.update,this)||(this._scene=t,n.on("update",this.update,this)),this}stopUpdate(){return this._scene?(this._scene.sys.events.off("update",this.update,this),this):this}startPreUpdate(t){t||(t=this._scene);var n=t.sys.events;return Yh(n,"preupdate",this.preupdate,this)||(this._scene=t,n.on("preupdate",this.preupdate,this)),this}stopPreUpdate(){return this._scene?(this._scene.sys.events.off("preupdate",this.preupdate,this),this):this}startPostUpdate(t){t||(t=this._scene);var n=t.sys.events;return Yh(n,"postupdate",this.postupdate,this)||(this._scene=t,n.on("postupdate",this.postupdate,this)),this}stopPostUpdate(){return this._scene?(this._scene.sys.events.off("postupdate",this.postupdate,this),this):this}}let DC=class extends Gs{constructor(e,t){super(t),this.parent=e;var n=t.initState||"IDLE";this.start(n)}init(){this.start("IDLE")}next_IDLE(){return"TRANS_OPNE"}next_TRANS_OPNE(){return"OPEN"}enter_TRANS_OPNE(){var e=this.parent;if(e.transitInTime>0){var t=e.runTransitionInCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_OPNE(){this.parent.removeDelayCall()}next_OPEN(){return"TRANS_CLOSE"}enter_OPEN(){this.parent.onOpen()}exit_OPEN(){this.parent.removeDelayCall()}next_TRANS_CLOSE(){return"CLOSE"}enter_TRANS_CLOSE(){var e=this.parent;if(e.transitOutTime>0){var t=e.runTransitionOutCallback();e.delayCall(t,this.next,this)}else this.next()}exit_TRANS_CLOSE(){this.parent.removeDelayCall()}next_CLOSE(){return"TRANS_OPNE"}enter_CLOSE(){this.parent.onClose()}exit_CLOSE(){}canOpen(){return this.state==="IDLE"||this.state==="CLOSE"}canClose(){return this.state==="IDLE"||this.state==="OPEN"}};const FC={delayCall(e,t,n){return this.delayCallTimer=function(s,o,i,r){var h=In(s);return h.time.delayedCall(o,function(){h.game.events.once("poststep",function(){i.call(r,void 0)})})}(this,e,t,n),this},removeDelayCall(){return this.delayCallTimer&&(this.delayCallTimer.remove(!1),this.delayCallTimer=void 0),this}},BC={setTransitInTime(e){return this.transitInTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInCallback(e){return e||(e=Ht),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=Ht),this.transitOutCallback=e,this}},IC={runTransitionInCallback(){return this.transitInCallback(this.parent,this.transitInTime),this.transitInTime},onOpen(){},requestOpen(e,t){if(!this._state.canOpen())return this;this.openEventData=arguments.length>0?e:this.parent;var n=this.transitInTime;return t!==void 0&&(this.transitInTime=t),this._state.goto("TRANS_OPNE"),this.transitInTime=n,this}},XC={runTransitionOutCallback(){return this.transitOutCallback(this.parent,this.transitOutTime),this.transitOutTime},onClose(){this.oneShotMode&&this.parent.destroy()},requestClose(e,t){if(!this._state.canClose)return this;this.closeEventData=arguments.length>0?e:this.parent;var n=this.transitOutTime;return t!==void 0&&(this.transitOutTime=t),this._state.goto("TRANS_CLOSE"),this.transitOutTime=n,this}};var Um={};Object.assign(Um,FC,BC,IC,XC);const un=Phaser.Utils.Objects.GetValue;class Xo extends Rt{constructor(t,n){super(t,n),this.setTransitInTime(un(n,"duration.in",200)),this.setTransitOutTime(un(n,"duration.out",200)),this.setTransitInCallback(un(n,"transitIn")),this.setTransitOutCallback(un(n,"transitOut")),this.oneShotMode=un(n,"destroy",!1),this.delayCallTimer=void 0,this._state=new DC(this,{eventEmitter:!1,initState:un(n,"initState","IDLE")}),this.openEventData=void 0,this.closeEventData=void 0}get state(){return this._state.state}shutdown(t){this.isShutdown||(this.transitInCallback=void 0,this.transitOutCallback=void 0,this.openEventData=void 0,this.closeEventData=void 0,this.removeDelayCall(),super.shutdown(t))}}Object.assign(Xo.prototype,Um);const zC=Phaser.GameObjects.Rectangle;class YC extends zC{constructor(t,n,s){super(t,0,0,2,2,n,1),this.fullWindow=new bm(this),this.setAlpha(s)}get tint(){return this.fillColor}set tint(t){this.setFillStyle(t,this.fillAlpha)}}const Nh=Phaser.Utils.Objects.GetValue;class Wm extends Rt{constructor(t,n){super(t,{eventEmitter:!1}),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setHitAreaMode(Nh(t,"hitAreaMode",0)),this.setEnable(Nh(t,"enable",!0)),this.setStopMode(Nh(t,"stopAllLevels",!0)),this}boot(){this.parent.on("pointerdown",function(t,n,s,o){this.stopAllLevels&&o.stopPropagation()},this).on("pointerup",function(t,n,s,o){this.stopAllLevels&&o.stopPropagation()},this).on("pointermove",function(t,n,s,o){this.stopAllLevels&&o.stopPropagation()},this).on("pointerover",function(t,n,s,o){this.stopAllLevels&&o.stopPropagation()},this).on("pointerout",function(t,n){this.stopAllLevels&&n.stopPropagation()},this)}setHitAreaMode(t){typeof t=="string"&&(t=NC[t]);var n=this.parent;return n.input&&n.removeInteractive(),t===0?n.setInteractive():n.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}}),this}setEnable(t){return t===void 0&&(t=!0),t?this.parent.setInteractive():this.parent.disableInteractive(),this.enable=t,this}setStopMode(t){return t===void 0&&(t=!0),this.stopAllLevels=t,this}toggleEnable(){return this.setEnable(!this.enable),this}}var NC={default:0,fullWindow:1};const Wc=Phaser.Utils.Objects.GetValue;class GC extends YC{constructor(t,n){super(t,Wc(n,"color",0),Wc(n,"alpha",.8)),this.touchEventStop=new Wm(this,{hitAreaMode:1})}}const Fa={popUp(e,t){e._modalScaleSave!==void 0?(e.scaleX=e._modalScaleSave,e.scaleY=e._modalScaleSave):e._modalScaleSave=e.scaleX,xu(e,t)},scaleDown(e,t){Xm(e,t,void 0,void 0,!1)},fadeIn(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,bu(e,t)},fadeOut(e,t){Tu(e,t,!1)}};var UC=function(e,t){e._modalAlphaSave!==void 0?e.alpha=e._modalAlphaSave:e._modalAlphaSave=e.alpha,bu(e,t,e.alpha)},WC=function(e,t){Tu(e,t,!1)},zo=function(e,t,n,s,o){return!(!e||s&&!s(e,t,n)||!ou(e,!0).contains(t,n)||o&&!o(e,t,n))};const si=Phaser.Utils.Objects.GetValue;let VC=class extends Xo{constructor(e,t){t===void 0&&(t={}),t.transitIn==null&&(t.transitIn=Ui.popUp),t.transitOut==null&&(t.transitOut=Ui.scaleDown),t.destroy=si(t,"destroy",!0),super(e,t);var n=si(t,"cover");this.cover=n!==!1?function(h,a){var u=h.scene,l=new GC(u,a);return u.add.existing(l),h.isRexContainerLite?(h.pin(l,{syncPosition:!1,syncRotation:!1,syncScale:!1,syncAlpha:!1,syncScrollFactor:!1}),h.moveDepthBelow(l)):u.children.moveBelow(l,h),l}(e,n):void 0,this.cover&&(this.setCoverTransitInCallback(si(n,"transitIn",UC)),this.setCoverTransitOutCallback(si(n,"transitOut",WC)));var s=si(t,"touchOutsideClose",!1),o=si(t,"duration.hold",-1),i=si(t,"timeOutClose",o>=0),r=si(t,"anyTouchClose",!1);si(t,"manualClose",!1)&&(s=!1,r=!1,i=!1),r&&(s=!1),i?this.setDisplayTime(o):this.setDisplayTime(-1),r?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),si(t,"openOnStart",!0)&&this.delayCall(0,this.requestOpen,this)}shutdown(e){this.isShutdown||(this.cover||this.scene.input.off("pointerup",this.touchCloseCallback,this),this.cover&&!e&&(this.cover.destroy(),this.cover=void 0),super.shutdown(e))}touchOutsideClose(){return this.cover?this.cover.on("pointerup",this.touchCloseCallback,this):this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.cover?this.cover.once("pointerup",this.touchCloseCallback,this):this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(e){this.clickOutsideTest&&zo(this.parent,e.worldX,e.worldY)||this.requestClose()}runTransitionInCallback(){var e=super.runTransitionInCallback(),t=this.cover;return t&&this.coverTransitInCallback&&this.coverTransitInCallback(t,e),e}runTransitionOutCallback(){var e=super.runTransitionOutCallback(),t=this.cover;return t&&this.coverTransitOutCallback&&this.coverTransitOutCallback(t,e),e}onOpen(){var e=this.displayTime;e>=0&&this.delayCall(e,this.requestClose,this),this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.closeEventData),super.onClose()}setDisplayTime(e){return this.displayTime=e,this}setTransitInCallback(e){switch(typeof e=="string"&&(e=Ui[e]),e){case Ui.popUp:e=Fa.popUp;break;case Ui.fadeIn:e=Fa.fadeIn}return super.setTransitInCallback(e),this}setTransitOutCallback(e){switch(typeof e=="string"&&(e=Ui[e]),e){case Ui.scaleDown:e=Fa.scaleDown;break;case Ui.fadeOut:e=Fa.fadeOut}return super.setTransitOutCallback(e),this}setCoverTransitInCallback(e){return this.coverTransitInCallback=e,this}setCoverTransitOutCallback(e){return this.coverTransitOutCallback=e,this}};const Ui={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1};var ti=function(e){return e&&typeof e=="function"};const Yo={modal(e,t){return ti(e)&&(t=e,e=void 0),this._modalBehavior===void 0&&(this.onCreateModalBehavior&&this.onCreateModalBehavior(this,e),this._modalBehavior=function(n,s){var o=new VC(n,s);return o.on("open",function(){n.emit("modal.open",o)}),o.on("close",function(i){n.emit("modal.close",i,o)}),n.on("modal.requestClose",o.requestClose,o),o}(this,e)),t&&this._modalBehavior.once("close",t),this._modalBehavior.requestOpen(),this},modalPromise(e){var t=this;return new Promise(function(n,s){t.modal(e,n)})},modalClose(e){return function(t,n){t.emit("modal.requestClose",n)}(this,e),this}};var Si=function(e,t,n,s,o){ti(t)&&(o=s,s=n,n=t,t=this);var i=this.scene.events;return this.bindEvent(t,i,e,n,s,o),this};const jC={bindEvent(e,t,n,s,o,i){return typeof t=="string"&&(i=o,o=s,s=n,n=t,t=e,e=this),function(r,h,a,u,l,d){d===void 0&&(d=!1),h[d?"once":"on"](a,u,l),r.once("destroy",function(){h.off(a,u,l)})}(e,t,n,s,o,i),this},bindScenePreupdateEvent(e,t,n,s){return Si.call(this,"preupdate",e,t,n,s),this},bindSceneUpdateEvent(e,t,n,s){return Si.call(this,"update",e,t,n,s),this},bindScenePostupdateEvent(e,t,n,s){return Si.call(this,"postupdate",e,t,n,s),this},bindSceneRenderEvent(e,t,n,s){return Si.call(this,"render",e,t,n,s),this},bindScenePauseEvent(e,t,n,s){return Si.call(this,"pause",e,t,n,s),this},bindSceneResumeEvent(e,t,n,s){return Si.call(this,"resume",e,t,n,s),this},bindSceneSleepEvent(e,t,n,s){return Si.call(this,"sleep",e,t,n,s),this},bindSceneWakeEvent(e,t,n,s){return Si.call(this,"wake",e,t,n,s),this},bindSceneShutdownEvent(e,t,n,s){return Si.call(this,"shutdown",e,t,n,s),this}};var Vc=function(e,t,n){var s=e.camera;return s?(n===void 0?n={}:n===!0&&(n=HC),s===t?(n.x=e.worldX,n.y=e.worldY):s.getWorldPoint(e.x,e.y,n),n):null},HC={},Li=function(e,t,n,s){return function(o,i,r,h,a){var u,l=o.scene.sys.cameras.main,d=o.scrollFactorX===0&&o.scrollFactorY===0;if(i)return d?r(o,i.x,i.y,h,a):!!(u=Vc(i,l,!0))&&r(o,u.x,u.y,h,a);for(var c=o.scene.input.manager,p=c.pointersTotal,f=c.pointers,v=0;v<p;v++)if(i=f[v],d){if(r(o,i.x,i.y,h,a))return!0}else{if(!(u=Vc(i,l,!0)))continue;if(r(o,u.x,u.y,h,a))return!0}return!1}(e,t,zo,n,s)},ei=function(e){return Object.prototype.toString.call(e)==="[object Array]"},Bs=function(e,t,n,s,o){return zo(e,t,n,KC(s),o)},jc=function(e){return!(e.rexSizer&&e.rexSizer.hidden)},KC=function(e){return e?function(t,n,s){return!!jc(t)&&(e(t,n,s),!0)}:jc},Vm=function(e,t,n,s,o){if(ti(n)||(o=n,n=void 0,s=void 0),o===void 0&&(o=this.sizerChildren?this.sizerChildren:this.isRexContainerLite?this.children:this.list),ei(o)){for(var i,r=0,h=o.length;r<h;r++)if(i=o[r],Bs(i,e,t,n,s))return i}else for(var a in o)if(i=o[a],Bs(i,e,t,n,s))return i;return null},qC={},Kr=function(e){var t,n;this.sizerEventsEnable&&(t=e,(n=this.getChildPrevState(e))===void 0?n={}:n===!0&&(n=qC),n.x=t.x,n.y=t.y,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n.width=t.width,n.height=t.height,n.displayWidth=t.displayWidth,n.displayHeight=t.displayHeight,this.layoutedChildren.push(e))},qr=function(e,t,n,s,o,i,r,h){r===void 0&&(r=0),h===void 0&&(h=0),Wr(e,t,n,s,o,i),e.x+=r,e.y+=h,this.resetChildPositionState(e),this.sizerEventsEnable&&e.emit("sizer.postlayout",e,this)};const $C=Phaser.Display.Align.CENTER,ZC=Phaser.Utils.Objects.IsPlainObject,wu={onClick(e,t,n,s){return e?(typeof e=="function"&&(s=n,n=t,t=e,e=this),e._click===void 0&&(e._click=new Nr(e,s)),e._click.on("click",t,n),this):this},offClick(e,t,n){return typeof e=="function"&&(n=t,t=e,e=this),e._click===void 0||e._click.off("click",t,n),this},enableClick(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._click===void 0||e._click.setEnable(t),this},disableClick(e){return e===void 0&&(e=this),e._click===void 0||e._click.setEnable(!1),this}},rr=Phaser.Utils.Objects.GetValue;class JC extends Rt{constructor(t,n){super(t,n),this._enable=void 0;var s=rr(n,"inputConfig",void 0);s&&t.setInteractive(s),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(rr(t,"enable",!0)),this.setMode(rr(t,"mode",1)),this.setClickInterval(rr(t,"clickInterval",100)),this.setDragThreshold(rr(t,"threshold",void 0)),this}boot(){var t=this.parent.scene;t.input.on("pointerdown",this.onPress,this),t.input.on("pointerup",this.onRelease,this),t.input.on("pointermove",this.onMove,this)}shutdown(t){if(!this.isShutdown){var n=this.parent.scene;n.input.off("pointerdown",this.onPress,this),n.input.off("pointerup",this.onRelease,this),n.input.off("pointermove",this.onMove,this),this.pointer=null,super.shutdown(t)}}get enable(){return this._enable}set enable(t){if(this._enable!==t){t||this.cancel(),this._enable=t;var n=t?"enable":"disable";this.emit(n,this,this.parent)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setMode(t){return typeof t=="string"&&(t=QC[t]),this.mode=t,this}setClickInterval(t){return this.clickInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}isPointerInside(t){var n=this.parent;return(n.input?mm:Li)(n,t)}onPress(t){this.parent.willRender(t.camera)&&this.pointer===void 0&&(this.isPointerInside(t)||(this.pointer=t,this.mode===0&&(this.isPointerInside(t)||this.click(t.downTime,t))))}onRelease(t){this.parent.willRender(t.camera)&&this.pointer===t&&(this.mode===1&&(this.isPointerInside(t)||this.click(t.upTime,t)),this.pointer=void 0)}onMove(t,n,s,o){this.pointer===t&&this.dragThreshold!==void 0&&this.mode===1&&(t.getDistance()>=this.dragThreshold||this.isPointerInside(t))&&this.cancel()}click(t,n){if(!this.enable)return this;if(t===void 0)return this.emit("clickoutside",this,this.parent,n),this;this.pointer=void 0;var s=this.lastClickTime;return s!==void 0&&t-s<=this.clickInterval||(this.lastClickTime=t,this.emit("clickoutside",this,this.parent,n)),this}cancel(){return this.pointer=void 0,this}}const QC={press:0,pointerdown:0,release:1,pointerup:1},t2={onClickOutside(e,t,n,s){return e?(typeof e=="function"&&(s=n,n=t,t=e,e=this),e._clickOutside===void 0&&(e._clickOutside=new JC(e,s)),e._clickOutside.on("clickoutside",t,n),this):this},offClickOutside(e,t,n){return typeof e=="function"&&(n=t,t=e,e=this),e._clickOutside===void 0||e._clickOutside.off("clickoutside",t,n),this},enableClickOutside(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._clickOutside===void 0||e._clickOutside.setEnable(t),this},disableClickOutside(e){return e===void 0&&(e=this),e._clickOutside===void 0||e._clickOutside.setEnable(!1),this}};class e2 extends Gs{constructor(){super({eventEmitter:!1}),this.goto("IDLE")}setCooldownTime(t){return this.cooldownTime=t,this.cooldownMode=t!==void 0,this}request(){return this.runMethod("request")}update_IDLE(){this.compensationTime=0}request_IDLE(){return this.next(),!0}next_IDLE(){if(this.cooldownMode)return"COOLDOWN"}enter_COOLDOWN(){this.remainderTime=this.cooldownTime+this.compensationTime}update_COOLDOWN(t,n){this.remainderTime-=n,this.remainderTime<0&&(this.compensationTime=this.cooldownTime>n?-this.remainderTime:0,this.goto("IDLE"))}request_COOLDOWN(){return!1}}const Gh=Phaser.Utils.Objects.GetValue;class Po extends Rt{constructor(t,n){super(t,n),this._enable=void 0,this.cooldown=new e2,this.parent.setInteractive(Gh(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.prevIsInTouch=!1,this.isInTouching=!1,this.setEnable(Gh(t,"enable",!0)),this.setCooldown(Gh(t,"cooldown",void 0)),this}boot(){var t=this.parent;t.on("pointerdown",this.onPointIn,this),t.on("pointerover",this.onPointIn,this),t.on("pointerup",this.onPointOut,this),t.on("pointerout",this.onPointOut,this),this.scene.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||(this.prevIsInTouch=!1,this.isInTouching=!1,this.pointer=void 0),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get cooldownTime(){return this.cooldown.cooldownTime}set cooldownTime(t){this.cooldown.setCooldownTime(t)}setCooldown(t){return this.cooldownTime=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointIn(t,n,s){this.enable&&t.isDown&&this.pointer===void 0&&(this.pointer=t,this.isInTouching=!0)}onPointOut(t){this.enable&&this.pointer===t&&(this.pointer=void 0,this.isInTouching=!1)}preupdate(t,n){this.cooldown.update(t,n),!this.prevIsInTouch&&this.isInTouching&&this.emit("touchstart",this,this.parent),this.isInTouching&&this.cooldown.request()&&this.emit("intouch",this,this.parent,this.pointer),this.prevIsInTouch&&!this.isInTouching&&this.emit("touchend",this,this.parent),this.prevIsInTouch=this.isInTouching}}const i2={isPointerInBounds(e){return e===void 0?e=this:typeof e=="string"&&(e=this.getElement(e)),!!e&&Li(e)},onTouching(e,t,n,s){return e?(typeof e=="function"&&(s=n,n=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Po(e,s)),e._inTouching.on("intouch",t,n),this):this},offTouching(e,t,n){return typeof e=="function"&&(n=t,t=e,e=this),e._inTouching===void 0||e._inTouching.off("intouch",t,n),this},onTouchingEnd(e,t,n,s){return e?(typeof e=="function"&&(s=n,n=t,t=e,e=this),e._inTouching===void 0&&(e._inTouching=new Po(e,s)),e._inTouching.on("touchend",t,n),this):this},offTouchingEnd(e,t,n){return typeof e=="function"&&(n=t,t=e,e=this),e._inTouching===void 0||e._inTouching.off("touchend",t,n),this},enableTouching(e,t){return typeof e=="boolean"&&(t=e,e=void 0),e===void 0&&(e=this),e._inTouching===void 0||e._inTouching.setEnable(t),this},disableTouching(e){return e===void 0&&(e=this),e._inTouching===void 0||e._inTouching.setEnable(!1),this}},s2={onOver(e,t,n){return e?(typeof e=="function"&&(n=t,t=e,e=this),e.setInteractive().on("pointerover",t,n),this):this},onOut(e,t,n){return e?(typeof e=="function"&&(n=t,t=e,e=this),e.setInteractive().on("pointerout",t,n),this):this}};var jm=function(e,t,n,s){if(e==="parent"){for(var o,i=0,r=t.length;i<r;i++)if(o=t[i],Bs(o,n,s))return o.pointToChild?o.pointToChild(n,s):Vm.call(o,n,s)}else for(i=0,r=t.length;i<r;i++){var h=t[i];if(Bs(h,n,s))return h}return null},Ue=function(e,t,n,s,o,i,r,h){var a;if(i===void 0)a=o;else{var u=n[0];if(!u)return;var l=r.camera,d=o+l.scrollX*(u.scrollFactorX-1),c=i+l.scrollY*(u.scrollFactorY-1);a=jm(s,n,d,c)}a&&e.emit(t,a,r,h)};const n2=Phaser.Utils.Objects.GetValue;var r2=function(e){var t=n2(e,"down",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerdown",a2,this))},a2=function(e,t,n,s){var o=this._childrenInteractive;Ue(o.eventEmitter,`${o.eventNamePrefix}down`,o.targetSizers,o.targetMode,e.worldX,e.worldY,e,s)};const o2=Phaser.Utils.Objects.GetValue;var h2=function(e){var t=o2(e,"up",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointerup",l2,this))},l2=function(e,t,n,s){var o=this._childrenInteractive;Ue(o.eventEmitter,`${o.eventNamePrefix}up`,o.targetSizers,o.targetMode,e.worldX,e.worldY,e,s)};const u2=Phaser.Utils.Objects.GetValue;var d2=function(e){var t=u2(e,"over",void 0);t!==!1&&(t===!0&&(t=void 0),this.on("pointermove",Hc,this).on("pointerover",Hc,this).on("pointerout",c2,this))},Hc=function(e,t,n,s){var o=this._childrenInteractive,i=o.targetSizers[0];if(i){var r=e.camera,h=e.worldX+r.scrollX*(i.scrollFactorX-1),a=e.worldY+r.scrollY*(i.scrollFactorY-1),u=jm(o.targetMode,o.targetSizers,h,a),l=o.lastOverChild;u&&l&&u===l||(o.lastOverChild=u,Ue(o.eventEmitter,`${o.eventNamePrefix}out`,o.targetSizers,o.targetMode,l,void 0,e,s),Ue(o.eventEmitter,`${o.eventNamePrefix}over`,o.targetSizers,o.targetMode,u,void 0,e,s))}},c2=function(e,t){var n=this._childrenInteractive,s=n.lastOverChild;n.lastOverChild=null,Ue(n.eventEmitter,`${n.eventNamePrefix}out`,n.targetSizers,n.targetMode,s,void 0,e,t)};const f2=Phaser.Utils.Objects.GetValue;var p2=function(e){var t=f2(e,"click",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("threshold")||(t.threshold=10);var n=this._childrenInteractive;this._click=new Nr(this,t),this._click.on("click",function(s,o,i,r){Ue(n.eventEmitter,`${n.eventNamePrefix}click`,n.targetSizers,n.targetMode,i.worldX,i.worldY,i,r)},this)}};const Uh=Phaser.Utils.Objects.GetValue;class Su extends Ro{constructor(t,n){var s=In(t);s===t&&(t=void 0),super(s,n),this.gameObject=t,t&&t.setInteractive(Uh(n,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setEnable(Uh(t,"enable",!0)),this.setDetectBounds(),this.gameObject===void 0?this.setDetectBounds(Uh(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Wh,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,n){this.enable&&this.pointer===void 0&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.pointerCamera=t.camera,this.lastPointer=t,this.movedState=!1,this.tracerState=Kc,this.gameObject===void 0&&(this.isTouchingAnyObject=n.length>0),this.onDragStart())}onPointerUp(t){this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.pointerCamera=void 0,this.movedState=!1,this.tracerState=Wh,this.onDragEnd())}onPointerMove(t){if(this.enable&&t.isDown){var n=!this.bounds||this.bounds.contains(t.x,t.y),s=this.pointer===t;!s&&n||(s&&!n?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===Kc&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Wh,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,n){}postUpdate(t,n){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=g2,this}isPointerInGameObject(t,n,s){var o=this.lastPointer;return!!o&&Li(t,o,n,s)}}const Wh=0,Kc=1,g2="IDLE",vs=Phaser.Utils.Objects.GetValue,m2=Phaser.Math.Distance.Between;class Hm extends Su{constructor(t,n){super(t,n);var s=this,o={states:{IDLE:{enter:function(){s.stop(),s.tapsCount=0,s.x=0,s.y=0,s.worldX=0,s.worldY=0,s.lastPointer=void 0},exit:function(){var i=s.lastPointer;s.x=i.x,s.y=i.y,s.worldX=i.worldX,s.worldY=i.worldY}},BEGIN:{enter:function(){s.start(),s.tapsCount=0,s.emit("tappingstart",s,s.gameObject,s.lastPointer)}},RECOGNIZED:{enter:function(){s.start(),s.emit("tap",s,s.gameObject,s.lastPointer),s.emit(`${s.tapsCount}tap`,s,s.gameObject,s.lastPointer)}}},init:function(){this.state=ys},eventEmitter:!1};this.setRecongizedStateObject(new Gs(o))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(vs(t,"time",250)),this.setTapInterval(vs(t,"tapInterval",200)),this.setDragThreshold(vs(t,"threshold",9)),this.setTapOffset(vs(t,"tapOffset",10));var n=vs(t,"taps",void 0);return n!==void 0?this.setTaps(n):(this.setMaxTaps(vs(t,"maxTaps",void 0)),this.setMinTaps(vs(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case ys:this.state=dn;break;case dn:var t=this.lastPointer;m2(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=cn,this.state=dn);break;case cn:this.state=dn}}onDragEnd(){this.state===dn&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),this.maxTaps!==void 0&&this.tapsCount===this.maxTaps&&(this.state=cn))}onDrag(){this.state!==ys&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ys)}preUpdate(t,n){if(this.isRunning&&this.enable&&this.state===dn){var s=this.lastPointer;s.isDown?t-s.downTime>this.holdTime&&(this.state=ys):t-s.upTime>this.tapInterval&&(this.minTaps===void 0||this.tapsCount>=this.minTaps?this.state=cn:this.state=ys)}}postUpdate(t,n){this.isRunning&&this.enable&&this.state===cn&&(this.state=ys)}get isTapping(){return this.state===cn}get isTapped(){return this.isTapping}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,n){return n===void 0&&(n=t),this.setMinTaps(t).setMaxTaps(n),this}}const ys="IDLE",dn="BEGIN",cn="RECOGNIZED",qc=Phaser.Utils.Objects.GetValue;class Km extends Su{constructor(t,n){super(t,n);var s=this,o={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0,s.lastPointer=void 0},exit:function(){var i=s.lastPointer;s.x=i.x,s.y=i.y,s.worldX=i.worldX,s.worldY=i.worldY}},BEGIN:{enter:function(){s.start()},exit:function(){s.stop()}},RECOGNIZED:{enter:function(){s.emit("pressstart",s,s.gameObject,s.lastPointer)},exit:function(){s.emit("pressend",s,s.gameObject,s.lastPointer)}}},init:function(){this.state=Ba},eventEmitter:!1};this.setRecongizedStateObject(new Gs(o))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(qc(t,"threshold",9)),this.setHoldTime(qc(t,"time",251)),this}onDragStart(){this.state=$c,this.holdTime===0&&(this.state=Vh)}onDragEnd(){this.state=Ba}onDrag(){this.state!==Ba&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ba)}preUpdate(t,n){this.isRunning&&this.enable&&this.state===$c&&t-this.pointer.downTime>=this.holdTime&&(this.state=Vh)}get isPressing(){return this.state===Vh}get isPressed(){return this.isPressing}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const Ba="IDLE",$c="BEGIN",Vh="RECOGNIZED";Phaser.Utils.Objects.GetValue;const v2=Phaser.Math.Distance.Between,y2=Phaser.Math.Angle.Between,x2={getDt:function(){return wm(this.scene)},getVelocity:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return v2(t.x,t.y,e.x,e.y)/(.001*this.getDt())},getVelocityX:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return Math.abs(e.x-t.x)/(.001*this.getDt())},getVelocityY:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return Math.abs(e.y-t.y)/(.001*this.getDt())},getVelocityAngle:function(){var e=this.pointer.position,t=this.pointer.prevPosition;return y2(t.x,t.y,e.x,e.y)}},b2={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var T2={};const jh=Phaser.Utils.Objects.GetValue,w2=Phaser.Math.RadToDeg;class Cu extends Su{constructor(t,n){super(t,n);var s=this,o={states:{IDLE:{enter:function(){s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var i=s.lastPointer;s.x=i.x,s.y=i.y,s.worldX=i.worldX,s.worldY=i.worldY}},BEGIN:{enter:function(){s.validDrag=!1}},RECOGNIZED:{enter:function(){s.start(),s.updateDirectionStates(),s.emit("swipe",s,s.gameObject,s.lastPointer)},exit:function(){s.stop(),s.clearDirectionStates()}}},init:function(){this.state=Hh},eventEmitter:!1};this.setRecongizedStateObject(new Gs(o)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(jh(t,"threshold",10)),this.setVelocityThreshold(jh(t,"velocityThreshold",1e3)),this.setDirectionMode(jh(t,"dir","8dir")),this}onDragStart(){this.state=Zc}onDragEnd(){this.state=Hh}onDrag(){this.state===Zc&&(this.validDrag||(this.validDrag=this.dragThreshold===0||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Kh))}postUpdate(t,n){this.isRunning&&this.enable&&this.state===Kh&&(this.state=Hh)}get isSwiping(){return this.state===Kh}get isSwiped(){return this.isSwiping}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return typeof t=="string"&&(t=b2[t]),this.dirMode=t,this}updateDirectionStates(){return function(t,n,s){switch(s===void 0?s={}:s===!0&&(s=T2),s.left=!1,s.right=!1,s.up=!1,s.down=!1,t=(t+360)%360,n){case 0:t<180?s.down=!0:s.up=!0;break;case 1:t>90&&t<=270?s.left=!0:s.right=!0;break;case 2:t>45&&t<=135?s.down=!0:t>135&&t<=225?s.left=!0:t>225&&t<=315?s.up=!0:s.right=!0;break;case 3:t>22.5&&t<=67.5?(s.down=!0,s.right=!0):t>67.5&&t<=112.5?s.down=!0:t>112.5&&t<=157.5?(s.down=!0,s.left=!0):t>157.5&&t<=202.5?s.left=!0:t>202.5&&t<=247.5?(s.left=!0,s.up=!0):t>247.5&&t<=292.5?s.up=!0:(t>292.5&&t<=337.5&&(s.up=!0),s.right=!0)}}(w2(this.getVelocityAngle()),this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Cu.prototype,x2);const Hh="IDLE",Zc="BEGIN",Kh="RECOGNIZED",Ia=Phaser.Utils.Objects.GetValue,S2=Phaser.Utils.Array.SpliceOne,C2=Phaser.Math.Distance.Between,E2=Phaser.Math.Angle.Between;class qm{constructor(t,n){var s=In(t);s===t&&(t=void 0);var o=s.input.manager.pointersTotal-1;o<2&&s.input.addPointer(2-o),this.scene=s,this.gameObject=t,t&&t.setInteractive(Ia(n,"inputConfig",void 0)),this.setEventEmitter(Ia(n,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.setEnable(Ia(t,"enable",!0)),this.bounds=Ia(t,"bounds",void 0),this.tracerState=Xa,this.pointers.length=0,ss(this.movedState),this}boot(){this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,ss(this.movedState),this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0,this.gameObject=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&this.pointers.length!==2&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointers.indexOf(t)===-1)switch(this.movedState[t.id]=!1,this.pointers.push(t),this.pointerCamera=t.camera,this.tracerState){case Xa:this.tracerState=or,this.onDrag1Start();break;case or:this.tracerState=ni,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var n=this.pointers.indexOf(t);if(n!==-1)switch(delete this.movedState[t.id],S2(this.pointers,n),this.tracerState){case or:this.tracerState=Xa,this.onDrag1End();break;case ni:this.tracerState=or,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var n=!this.bounds||this.bounds.contains(t.x,t.y),s=this.pointers.indexOf(t)!==-1;if(!(!s&&n)){if(s&&!n)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case or:this.onDrag1();break;case ni:this.onDrag2()}}}}dragCancel(){return this.tracerState===ni&&this.onDrag2End(),this.pointers.length=0,ss(this.movedState),this.tracerState=Xa,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ni)return 0;var t=this.pointers[0],n=this.pointers[1];return C2(t.x,t.y,n.x,n.y)}get angleBetween(){if(this.tracerState!==ni)return 0;var t=this.pointers[0],n=this.pointers[1];return E2(t.x,t.y,n.x,n.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var n=t.position,s=t.prevPosition;ar.x=n.x-s.x,ar.y=n.y-s.y}else ar.x=0,ar.y=0;return ar}get centerX(){if(this.tracerState!==ni)return 0;var t=this.pointers[0].position,n=this.pointers[1].position;return(t.x+n.x)/2}get centerY(){if(this.tracerState!==ni)return 0;var t=this.pointers[0].position,n=this.pointers[1].position;return(t.y+n.y)/2}get prevCenterX(){if(this.tracerState!==ni)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,n=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+n.x)/2}get prevCenterY(){if(this.tracerState!==ni)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,n=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+n.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=P2,this}isPointer0InGameObject(t,n,s){var o=this.pointers[0];return!!o&&Li(t,o,n,s)}isPointer1InGameObject(t,n,s){var o=this.pointers[1];return!!o&&Li(t,o,n,s)}}Object.assign(qm.prototype,Fr);var ar={};const Xa=0,or=1,ni=2,P2="IDLE";Phaser.Utils.Objects.GetValue;const O2=Phaser.Math.RotateAround;var Jc=function(e,t,n,s){return O2(e,t,n,s),e.rotation+=s,e},k2={};const M2=Phaser.Utils.Objects.GetValue,qh=Phaser.Math.Angle.WrapDegrees,Qc=Phaser.Math.Angle.ShortestBetween,$h=Phaser.Math.RadToDeg,_2=Phaser.Math.DegToRad;var A2={spinObject:function(e,t){if(!this.isRotation)return this;t===void 0&&(t=this.pointers[0].camera);var n=this.movementCenterX,s=this.movementCenterY,o=function(d,c,p,f){return f===void 0?f={}:f===!0&&(f=k2),p.getWorldPoint(d,c,f),f}(this.centerX,this.centerY,t,!0),i=o.x,r=o.y,h=this.rotation;if(Array.isArray(e))for(var a=e,u=0,l=a.length;u<l;u++)(e=a[u]).x+=n,e.y+=s,Jc(e,i,r,h);else e.x+=n,e.y+=s,Jc(e,i,r,h);return this}};Object.assign((class extends qm{constructor(e,t){super(e,t);var n=this,s={states:{IDLE:{enter:function(){n.prevAngle=void 0,n.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("rotatestart",n)},exit:function(){n.emit("rotateend",n)}}},init:function(){this.state=tf},eventEmitter:!1};this.setRecongizedStateObject(new Gs(s))}resetFromJSON(e){return super.resetFromJSON(e),this.setDragThreshold(M2(e,"threshold",0)),this}onDrag2Start(){this.prevAngle=qh($h(this.angleBetween)),this.state=ef,this.dragThreshold===0&&(this.state=za)}onDrag2End(){this.state=tf}onDrag2(){switch(this.state){case ef:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=qh($h(this.angleBetween));this.angle=Qc(this.prevAngle,e),this.prevAngle=e,this.state=za}break;case za:e=qh($h(this.angleBetween)),this.angle=Qc(this.prevAngle,e),this.prevAngle=e,this.emit("rotate",this)}}get isRotating(){return this.state===za}get isRotated(){return this.isRotating}get rotation(){return _2(this.angle)}setDragThreshold(e){return this.dragThreshold=e,this}}).prototype,A2);const tf="IDLE",ef="BEGIN",za="RECOGNIZED",R2=Phaser.Utils.Objects.GetValue;var L2=function(e){var t=R2(e,"tap",void 0);if(t!==!1){t===!0&&(t=void 0);var n=this._childrenInteractive;this._tap=new Hm(this,t),this._tap.on("tap",function(s,o,i){Ue(n.eventEmitter,`${n.eventNamePrefix}${s.tapsCount}tap`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s),Ue(n.eventEmitter,`${n.eventNamePrefix}tap`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s)},this)}};const D2=Phaser.Utils.Objects.GetValue;var F2=function(e){var t=D2(e,"press",void 0);if(t!==!1){t===!0&&(t=void 0);var n=this._childrenInteractive;this._press=new Km(this,t),this._press.on("pressstart",function(s,o,i){Ue(n.eventEmitter,`${n.eventNamePrefix}pressstart`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s)},this).on("pressend",function(s,o,i){Ue(n.eventEmitter,`${n.eventNamePrefix}pressend`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s)},this)}};const B2=Phaser.Utils.Objects.GetValue;var I2=function(e){var t=B2(e,"swipe",void 0);if(t!==!1){t===!0&&(t=void 0),t===void 0&&(t={}),t.hasOwnProperty("dir")||(t.dir="4dir");var n=this._childrenInteractive;this._swipe=new Cu(this,t),this._swipe.on("swipe",function(s,o,i){var r=s.left?"left":s.right?"right":s.up?"up":"down";Ue(n.eventEmitter,`${n.eventNamePrefix}swipe${r}`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s),Ue(n.eventEmitter,`${n.eventNamePrefix}swipe`,n.targetSizers,n.targetMode,s.worldX,s.worldY,i,s)},this)}};const hr=Phaser.Utils.Objects.GetValue;var Eu=function(e,t){return e.setInteractive(),hr(t,"dropZone",!1)&&(e.input.dropZone=!0),e._childrenInteractive={targetSizers:hr(t,"targets",[e]),targetMode:hr(t,"targetMode","parent"),eventEmitter:hr(t,"eventEmitter",e),eventNamePrefix:hr(t,"inputEventPrefix","child.")},r2.call(e,t),h2.call(e,t),d2.call(e,t),p2.call(e,t),L2.call(e,t),F2.call(e,t),I2.call(e,t),e},$m={getSizerConfig:function(e){return e===void 0&&(e=this),Co(e)},getChildPrevState:function(e){var t=Co(e);return t.hasOwnProperty("prevState")||(t.prevState={}),t.prevState},pushIntoBounds:function(e){return e===void 0&&(e=Xr(this.scene)),this.left=Math.max(this.left,e.left),this.right=Math.min(this.right,e.right),this.top=Math.max(this.top,e.top),this.bottom=Math.min(this.bottom,e.bottom),this},drawBounds:function(e,t){var n,s,o,i,r,h=e.scene;if(typeof t=="number")n=t;else{n=on(t,"color"),s=on(t,"lineWidth");var a=on(t,"name",!1);a&&(o=on(a,"createTextCallback",tC),i=on(a,"createTextCallbackScope",void 0),typeof(r=on(a,"align","left-top"))=="string"&&(r=Nn[r]))}if(n===void 0&&(n=16777215),s===void 0&&(s=1),o&&!e.children){e.children=new JS(h),e.once("destroy",function(v,g){v.children.destroy(!g),v.children=void 0});var u=e.clear.bind(e);e.clear=function(){u(),e.children.clear(!1,!0)}}var l,d,c=this.getAllShownChildren([this]);Im(c,c);for(var p=0,f=c.length;p<f;p++)((l=c[p]).getBounds||l.width!==void 0&&l.height!==void 0)&&(ms=ou(l,ms),n!=null&&e.lineStyle(s,n).strokeRectShape(ms),l.name&&o&&(d=i?o.call(i,h):o(h))&&(d.setText(l.name),e.children.add(d),Wr(d,ms.x,ms.y,ms.width,ms.height,r)));return this},resolveWidth:fu,hasWidthWrap:pu,resolveChildrenWidth:function(e){var t,n,s;for(var o in this.sizerChildren)(t=this.sizerChildren[o])&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getExpandedChildWidth(t,e),(s=t.resolveWidth(n))===void 0&&(s=n),t.resolveChildrenWidth(s))},runWidthWrap:gu,resolveHeight:mu,hasHeightWrap:vu,resolveChildrenHeight:function(e){var t,n,s;for(var o in this.sizerChildren)(t=this.sizerChildren[o])&&t.isRexSizer&&!t.ignoreLayout&&(n=this.getExpandedChildHeight(t,e),(s=t.resolveHeight(n))===void 0&&(s=n),t.resolveChildrenHeight(s))},runHeightWrap:yu,getChildWidth:function(e){var t;if(e.isRexSizer){var n=e.childrenWidth;if(n==null)return;var s=e.minWidth*e.scaleX;t=Math.max(s,n)}else t=e.minWidth!==void 0?e.minWidth:e._minWidth!==void 0?e._minWidth:bt(e);return t},getChildHeight:function(e){var t;if(e.isRexSizer){var n=e.childrenHeight;if(n===void 0)return;var s=e.minHeight*e.scaleY;t=Math.max(s,n)}else t=e.minHeight!==void 0?e.minHeight:e._minHeight!==void 0?e._minHeight:Tt(e);return t},getExpandedChildWidth:function(e,t){return t},getExpandedChildHeight:function(e,t){return t},getChildrenWidth:function(){return 0},getChildrenHeight:function(){return 0},addChildrenMap:_c,addElement:_c,removeChildrenMap:function(e){if(typeof e=="object"){var t=e;for(var e in this.childrenMap)if(this.childrenMap[e]===t)return delete this.childrenMap[e],this}return delete this.childrenMap[e],this},getElement:function(e,t){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){t===void 0&&(t=!1);var n=e.shift(),s=null;if(n.charAt(0)==="#")n=n.substring(1),s=this.getByName(n,t);else if(e.length===0&&t){var o=this.childrenMap;if(o)for(var i,r=[o];r.length;){for(var h in o=r.shift()){if(i=o[h],h===n){s=i;break}i&&typeof i=="object"&&i.childrenMap&&r.push(i.childrenMap)}if(s)break}}else if(n.indexOf("[")===-1)this.childrenMap&&(s=this.childrenMap[n]);else{var a=n.match(hC);if(a!=null&&this.childrenMap){var u=this.childrenMap[a[1]];u&&(s=u[a[2]])}}return e.length===0?s:s&&s.childrenMap?s.getElement(e):null}},getChildIndex:function(e){if(Array.isArray(this.sizerChildren)){var t=this.sizerChildren.indexOf(e);return t===-1&&(t=null),t}if(this.getParentSizer(e)!==this)return null;for(var n in this.sizerChildren)if(this.sizerChildre[n]===e)return n;return null},getAllChildrenSizers:function(e){e===void 0&&(e=[]);for(var t=e.length,n=this.getChildrenSizers(e),s=e.length,o=t;o<s;o++)n[o].getAllChildrenSizers(e);return e},getChildrenSizers:function(e){return e===void 0&&(e=[]),e},preLayout:Hr,layout:function(){return this.runLayout(),this},runLayout:function(e,t,n){if(this.ignoreLayout)return this;var s,o,i=!e;i&&this.preLayout(),i||e.runChildrenWrapFlag?(s=this.hasWidthWrap(),o=this.hasHeightWrap()):(s=!1,o=!1);var r=function(u,l,d,c,p){var f=Lc(u,l,c),v=dC(u,d,p);return f===void 0&&(f=Lc(u,l,c)),f!==void 0&&v!==void 0&&{width:f,height:v}}(this,t,n,s,o);r||console.error("Can't resolve size of ",this);var h=r.width,a=r.height;return ae(this,h,a),this.sizerEventsEnable&&this.layoutedChildren===void 0&&(this.layoutedChildren=[]),this.layoutChildren(),this.layoutBackgrounds(),this.sizerEventsEnable&&(this.emit("postlayout",this.layoutedChildren,this),this.layoutedChildren.length=0),this.postLayout(e,h,a),i&&this._anchor&&this._anchor.updatePosition(),this},layoutChildren:function(){},layoutBackgrounds:function(){if(this.backgroundChildren!==void 0)for(var e,t,n,s,o,i,r,h=this.backgroundChildren,a=this.left,u=this.top,l=this.width*this.scaleX,d=this.height*this.scaleY,c=0,p=h.length;c<p;c++)(t=(e=h[c]).rexSizer).hidden||(n=t.padding,Kr.call(this,e),s=a+n.left*this.scaleX,o=u+n.top*this.scaleY,i=l-(n.left+n.right)*this.scaleX,r=d-(n.top+n.bottom)*this.scaleY,ae(e,i,r),qr.call(this,e,s,o,i,r,$C,0,0))},postLayout:function(e,t,n){return this},setAnchor:function(e){e===void 0&&(e={});var t=e.hasOwnProperty("width"),n=e.hasOwnProperty("height"),s=e.hasOwnProperty("onResizeCallback");return!t&&!n||s||(e.onResizeCallback=function(o,i,r){t&&r.setMinWidth(o),n&&r.setMinHeight(i),r.layout()}),this._anchor===void 0?this._anchor=new fC(this,e):this._anchor.resetFromJSON(e),this},isInTouching:function(e,t){return(xi(e)||typeof e=="string")&&(t=e,e=void 0),t===void 0?t=this:typeof t=="string"&&(t=this.getElement(t)),Li(t,e)},pointToChild:Vm,setDraggable:function(e,t,n){if(ZC(e)){var s=e;e=s.sensor,n=s.target,t=s.draggable}else typeof t!="boolean"&&(n=t,t=void 0);var o=typeof e;if(o==="string"){var i=e;if(!(e=this.getElement(i)))return console.error(`Can get element '${i}'`),this}else e!==void 0&&o=="object"||(t=e,e=this);return t===void 0&&(t=!0),e.input&&e.input._rexUIDragSizer?e.input.draggable=t:t&&(e.setInteractive(),e.scene.input.setDraggable(e),e.on("drag",function(r,h,a){var u=n===void 0?this.getTopmostSizer():n;u.x+=h-e.x,u.y+=a-e.y,u.emit("sizer.drag",r,h,a)},this).on("dragstart",function(r,h,a){(n===void 0?this.getTopmostSizer():n).emit("sizer.dragstart",r,h,a)},this).on("dragend",function(r,h,a,u){(n===void 0?this.getTopmostSizer():n).emit("sizer.dragend",r,h,a,u)},this).on("drop",function(r,h){(n===void 0?this.getTopmostSizer():n).emit("sizer.drop",r,h)}),e.input._rexUIDragSizer=!0),this},setChildrenInteractive:function(e){return Eu(this,e),this},broadcastEvent:function(){for(var e=this.getAllChildren([this]),t=0,n=e.length;t<n;t++){var s=e[t];s.emit.apply(s,arguments)}return this}};Object.assign($m,lC,iC,oC,Gn,_i,Dr,Eo,OC,MC,zm,wu,t2,i2,s2,AC,Yo,uC,jC);const Ci=Phaser.Utils.Objects.GetValue;let Us=class extends ii{constructor(e,t,n,s,o,i){super(e,t,n,1,1),this.isRexSizer=!0;var r=Ci(i,"origin",.5),h=Ci(i,"originX",r),a=Ci(i,"originY",r);this.setOrigin(h,a),this.setMinSize(s,o),this.setName(Ci(i,"name","")),this.rexSizer={},this.space={},this.backgroundChildren=void 0,this.sizerChildren=void 0,this.childrenMap={},this.layoutedChildren=void 0,this.runChildrenWrapFlag=!1,this.enableLayoutWarn(!1);var u=Ci(i,"anchor",void 0);u&&this.setAnchor(u),this.setInnerPadding(Ci(i,"space",0));var l=Ci(i,"draggable",!1);l&&this.setDraggable(l),this.setSizerEventsEnable(Ci(i,"sizerEvents",!1)),this.setDirty(!0),Ci(i,"enableLayer",!1)&&this.enableLayer()}destroy(e){if(this.scene&&!this.ignoreDestroy){if(e)for(var t=this.getAllChildrenSizers([this]),n=0,s=t.length;n<s;n++)t[n].sizerEventsEnable=!1;super.destroy(e),ss(this.backgroundChildren),ss(this.sizerChildren),this.childrenMap=void 0,this.space=void 0,this.rexSizer=void 0,this.layoutedChildren=void 0}}setMinSize(e,t){return this.setMinWidth(e).setMinHeight(t),this}setMinWidth(e){return e==null&&(e=0),this.minWidth=e,this}setMinHeight(e){return e==null&&(e=0),this.minHeight=e,this}setDirty(e){return e===void 0&&(e=!0),this.dirty=e,this}setSizerEventsEnable(e){return e===void 0&&(e=!0),this.sizerEventsEnable=e,this}enableLayoutWarn(e){return e===void 0&&(e=!0),this.layoutWarnEnable=e,this}get ignoreLayout(){return this.rexSizer.hidden||!this.dirty}get childrenWidth(){return this._childrenWidth===void 0&&(this._childrenWidth=this.getChildrenWidth()),this._childrenWidth}get childrenHeight(){return this._childrenHeight===void 0&&(this._childrenHeight=this.getChildrenHeight()),this._childrenHeight}get left(){return this.x-bt(this)*this.originX}set left(e){this.x+=e-this.left}alignLeft(e){return this.left=e,this}get right(){return this.left+bt(this)}set right(e){this.x+=e-this.right}alignRight(e){return this.right=e,this}get centerX(){return this.left+bt(this)/2}set centerX(e){this.x+=e-this.centerX}alignCenterX(e){return this.centerX=e,this}get top(){return this.y-Tt(this)*this.originY}set top(e){this.y+=e-this.top}alignTop(e){return this.top=e,this}get bottom(){return this.top+Tt(this)}set bottom(e){this.y+=e-this.bottom}alignBottom(e){return this.bottom=e,this}get centerY(){return this.top+Tt(this)/2}set centerY(e){this.y+=e-this.centerY}alignCenterY(e){return this.centerY=e,this}get innerLeft(){return this.left+this.space.left*this.scaleX}get innerRight(){return this.right-this.space.right*this.scaleX}get innerTop(){return this.top+this.space.top*this.scaleY}get innerBottom(){return this.bottom-this.space.bottom*this.scaleY}get innerWidth(){return(this.width-this.space.left-this.space.right)*this.scaleX}get innerHeight(){return(this.height-this.space.top-this.space.bottom)*this.scaleY}get minInnerWidth(){var e=(this.minWidth-this.space.left-this.space.right)*this.scaleX;return Math.max(e,0)}get minInnerHeight(){var e=(this.minHeight-this.space.top-this.space.bottom)*this.scaleY;return Math.max(e,0)}};Object.assign(Us.prototype,$m);var Pu=function(e,t,n,s){if(n===void 0)n=0;else{var o=typeof n;o==="boolean"?(s=n,n=0):o==="string"&&(n=X2[n])}s===void 0?s={}:s===!0&&(s=z2);var i=t.width/e.width,r=t.height/e.height,h=n?Math.max(i,r):Math.min(i,r);return s.width=e.width*h,s.height=e.height*h,s};const X2={fit:0,FIT:0,envelop:1,ENVELOP:1};var z2={},Ou=function(e,t){e.layoutWarnEnable&&(e.width<e.childrenWidth&&console.warn(`Layout width error: Parent=${t.constructor.name}, Child=${e.constructor.name}`),e.height<e.childrenHeight&&console.warn(`Layout height error: Parent=${t.constructor.name}, Child=${e.constructor.name}`))},Zh={},Jh={};const sf=Phaser.Utils.Objects.IsPlainObject,Ce=Phaser.Utils.Objects.GetValue,nf=Phaser.Display.Align.CENTER,Y2=Phaser.Utils.String.UUID,N2={add:function(e,t,n,s,o,i,r,h,a,u){var l,d;Vr.call(this,e),sf(t)&&(t=Ce(c=t,"key",void 0),n=Ce(c,"align",nf),s=Ce(c,"padding",0),o=Ce(c,"expand",!0),e.isRexSizer||(i=Ce(c,"minWidth",e._minWidth),r=Ce(c,"minHeight",e._minHeighted)),h=Ce(c,"offsetX",0),a=Ce(c,"offsetY",0),l=Ce(c,"offsetOriginX",0),d=Ce(c,"offsetOriginY",0),u=Ce(c,"aspectRatio",0));var c,p=t!==void 0;return p||(t=Y2()),typeof n=="string"&&(n=Nn[n]),n===void 0&&(n=nf),s===void 0&&(s=0),o===void 0&&(o=!0),e.isRexSizer||(i===void 0&&(i=e._minWidth),r===void 0&&(r=e._minHeight)),h===void 0&&(h=0),a===void 0&&(a=0),l===void 0&&(l=0),d===void 0&&(d=0),u===void 0?u=0:u===!0&&(u=bt(e)/Tt(e)),u>0&&(o=!0,i===void 0&&(i=0),r===void 0&&(r=0)),(c=this.getSizerConfig(e)).align=n,c.padding=Ns(s),sf(o)?(c.expandWidth=Ce(o,"width",!1),c.expandHeight=Ce(o,"height",!1)):(c.expandWidth=o,c.expandHeight=o),e.isRexSizer||(c.expandWidth&&(e.minWidth=i===void 0?bt(e):i),c.expandHeight&&(e.minHeight=r===void 0?Tt(e):r)),c.alignOffsetX=h,c.alignOffsetY=a,c.alignOffsetOriginX=l,c.alignOffsetOriginY=d,c.aspectRatio=u,this.sizerChildren.hasOwnProperty(t)&&this.sizerChildren[t].destroy(),this.sizerChildren[t]=e,p&&this.addChildrenMap(t,e),this}},G2=ii.prototype.clear;var No=function(e){this.backgroundChildren&&(this.backgroundChildren.length=0);var t,n=!e&&this.sizerEventsEnable;if(n&&(t=this.getChildren([])),G2.call(this,e),n)for(var s,o=0,i=t.length;o<i;o++)(s=t[o]).emit("sizer.remove",s,this),this.emit("remove",s,this);return this};const U2={remove(e,t){var n;if(typeof e=="string"){if(n=e,!(e=this.sizerChildren[n]))return this}else{if(this.getParentSizer(e)!==this)return this;n=this.childToKey(e)}return n&&(delete this.sizerChildren[n],this.childrenMap.hasOwnProperty(n)&&delete this.childrenMap[n]),jr.call(this,e,t),this},removeAll(e){for(var t in this.sizerChildren)this.remove(t,e);return this},clear(e){for(var t in this.sizerChildren)delete this.sizerChildren[t],this.childrenMap.hasOwnProperty(t)&&delete this.childrenMap[t];return No.call(this,e),this}};var Zm={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var e,t,n,s=0,o=this.sizerChildren,i=!1;for(var r in o)e=o[r],(n=this.getChildWidth(e))===void 0&&(i=!0),i||(n+=((t=e.rexSizer.padding).left+t.right)*this.scaleX,s=Math.max(n,s));return i?void 0:s+(this.space.left+this.space.right)*this.scaleX},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var e,t,n,s=0,o=this.sizerChildren,i=!1;for(var r in o)e=o[r],(n=this.getChildHeight(e))===void 0&&(i=!0),i||(n+=((t=e.rexSizer.padding).top+t.bottom)*this.scaleY,s=Math.max(n,s));return i?void 0:s+(this.space.top+this.space.bottom)*this.scaleY},getExpandedChildWidth:function(e,t){var n;t===void 0&&(t=this.width*this.scaleX);var s=e.rexSizer;if(s.expandWidth){var o=t-(this.space.left+this.space.right)*this.scaleX,i=s.padding;n=o-(i.left+i.right)*this.scaleX}return n},getExpandedChildHeight:function(e,t){var n;t===void 0&&(t=this.height);var s=e.rexSizer;if(s.expandHeight){var o=t-(this.space.top+this.space.bottom)*this.scaleY,i=s.padding;n=o-(i.top+i.bottom)*this.scaleY}return n},getChildrenSizers:function(e){e===void 0&&(e=[]);var t,n=this.sizerChildren;for(var s in n)(t=n[s]).isRexSizer&&e.push(t);return e},layoutChildren:function(){var e,t,n,s,o,i,r,h,a,u,l,d,c=this.innerLeft,p=this.innerTop,f=this.innerWidth,v=this.innerHeight,g=this.sizerChildren;for(var y in g)(e=g[y]).rexSizer.hidden||(n=(t=e.rexSizer).padding,Kr.call(this,e),u=this.getExpandedChildWidth(e),l=this.getExpandedChildHeight(e),t.aspectRatio>0&&(Zh.width=t.aspectRatio,Zh.height=1,Jh.width=u,Jh.height=l,u=(d=Pu(Zh,Jh,"FIT",!0)).width,l=d.height),e.isRexSizer?(e.runLayout(this,u,l),Ou(e,this)):ae(e,u,l),s=c+n.left*this.scaleX,i=f-(n.left+n.right)*this.scaleX,o=p+n.top*this.scaleY,r=v-(n.top+n.bottom)*this.scaleY,u===void 0&&(u=bt(e)),l===void 0&&(l=Tt(e)),h=(t.alignOffsetX+t.alignOffsetOriginX*u)*this.scaleX,a=(t.alignOffsetY+t.alignOffsetOriginY*l)*this.scaleY,qr.call(this,e,s,o,i,r,t.align,h,a))}};Object.assign(Zm,N2,U2);var Go=function(e,t){if(Array.isArray(e))return e.indexOf(t);for(var n in e)if(e[n]===t)return n;return null};const rf=Phaser.Utils.Objects.IsPlainObject,fn=Phaser.Utils.Objects.GetValue;class Fi extends Us{constructor(t,n,s,o,i,r){rf(n)?(n=fn(r=n,"x",0),s=fn(r,"y",0),o=fn(r,"width",void 0),i=fn(r,"height",void 0)):rf(o)&&(o=fn(r=o,"width",void 0),i=fn(r,"height",void 0)),super(t,n,s,o,i,r),this.type="rexOverlapSizer",this.sizerChildren={},this.addChildrenMap("items",this.sizerChildren)}childToKey(t){if(typeof t!="string")return Go(this.sizerChildren,t);var n=t;return this.sizerChildren.hasOwnPropery(n)?n:null}}Object.assign(Fi.prototype,Zm);var W2=Phaser.Math.Distance.Between,Oo=function(e,t,n){var s=e.width/2;return W2(s,s,t,n)<=s};const V2=Phaser.Math.Angle.Between,j2=Phaser.Math.Angle.Normalize;var af=function(e,t,n){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;if(Oo(s,t,n)){var o=s.width/2,i=s.startAngle,r=V2(o,o,t,n),h=s.anticlockwise?i-r:r-i,a=j2(h)/(2*Math.PI);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-a)<.1?this.value=a:this.easeValueTo(a)}}},H2=function(){this.sizerChildren.knob.on("pointerdown",af,this).on("pointermove",af,this).setInteractive()};const of=Phaser.Math.Angle.Between,K2=Phaser.Math.Angle.Wrap;var q2=function(e,t,n){if(this.enable&&!this.panPointer){var s=this.sizerChildren.knob;Oo(s,t,n)&&Jm.call(this,e)}},$2=function(e,t,n){if(this.enable&&e.isDown){var s=this.sizerChildren.knob;switch(this.panState){case ku:Oo(s,t,n)&&Jm.call(this,e);break;case tv:Oo(s,t,n)?J2.call(this):Qm.call(this)}}},Z2=function(e,t,n){this.enable&&this.panPointer===e&&Qm.call(this)},Jm=function(e){this.panPointer=e,this.panState=tv},Qm=function(){this.panPointer=void 0,this.panState=ku},J2=function(){var e=this.panPointer.prevPosition,t=this.panPointer.position,n=this.sizerChildren.knob,s=of(n.x,n.y,e.x,e.y),o=of(n.x,n.y,t.x,t.y),i=n.anticlockwise?s-o:o-s,r=K2(i)/(2*Math.PI);this.stopEaseValue(),this.value+=r};const ku=0,tv=1;var Q2=function(){this.sizerChildren.knob.on("pointerdown",q2,this).on("pointermove",$2,this).on("pointerup",Z2,this).setInteractive(),this.panPointer=void 0,this.panState=ku},hf=function(e){return e===void 0&&(e=this.value),this.textFormatCallbackScope?this.textFormatCallback(e):this.textFormatCallback.call(this.textFormatCallbackScope,e)};const tE={setTextFormatCallback:function(e,t){return this.textFormatCallback=e,this.textFormatCallbackScope=t,this},getFormatText:hf,updateText:function(e){var t=this.sizerChildren.text;return t&&this.textFormatCallback&&(t.setText(hf.call(this,e)),t.layout&&t.layout()),this}},Ve=Phaser.Utils.Objects.GetValue,eE=Phaser.Math.Snap.To;class iE extends as(Fi){constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexKnob",this.bootProgressBase(n);var s=Ve(n,"background",void 0),o=Ve(n,"text",void 0);s&&this.addBackground(s),o&&(n.textColor=void 0,n.textStrokeColor=void 0,this.setTextFormatCallback(Ve(n,"textFormatCallback",void 0),Ve(n,"textFormatCallbackScope",void 0)),n.textFormatCallback=void 0,n.textFormatCallbackScope=void 0);var i=new Jl(t,n);i.setDepth(Ve(n,"knobDepth",0)),i._value=-1,t.add.existing(i),this.add(i,"knob"),o&&(this.add(o,"text","center",0,!1),t.children.moveBelow(i,o)),this.addChildrenMap("background",s),this.addChildrenMap("knob",i),this.addChildrenMap("text",o),this.setEnable(Ve(n,"enable",void 0)),this.setGap(Ve(n,"gap",void 0)),this.setValue(Ve(n,"value",0),Ve(n,"min",void 0),Ve(n,"max",void 0));var r=Ve(n,"input",0);switch(typeof r=="string"&&(r=sE[r]),r){case 0:Q2.call(this);break;case 1:H2.call(this)}}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t){return this.gap=t,this}get value(){return this.sizerChildren.knob.value}set value(t){this.gap!==void 0&&(t=eE(t,this.gap));var n=this.value;this.sizerChildren.knob.value=t;var s=this.value;n!==s&&(this.updateText(),this.eventEmitter.emit("valuechange",s,n,this.eventEmitter))}}const sE={pan:0,drag:0,click:1,none:-1};Object.assign(iE.prototype,tE);const nE={arc:Ln,circle:Ge,curve:class extends Yr{constructor(e){super(),this.setCurve(e),this.setIterations(32)}get curve(){return this._curve}set curve(e){this.dirty=this.dirty||this._curve!==e,this._curve=e}setCurve(e){return this.curve=e,this}get iterations(){return this._iterations}set iterations(e){this.dirty=this.dirty||this._iterations!==e,this._iterations=e}setIterations(e){return this.iterations=e,this}updateData(){this.pathData.length=0;for(var e=this.curve.getPoints(this.iterations),t=0,n=e.length;t<n;t++)this.pathData.push(e[t].x,e[t].y);return this.pathData.push(e[0].x,e[0].y),super.updateData(),this}},ellipse:class extends Ln{constructor(e,t,n,s){super(e,t,n,s,0,360)}},line:rs,lines:ie,rectangle:class extends To{constructor(e,t,n,s){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=n),super(),this.pathData=[],this.closePath=!0,this.setTopLeftPosition(e,t),this.setSize(n,s)}get x(){return this._x}set x(e){this.dirty=this.dirty||this._x!==e,this._x=e}get y(){return this._y}set y(e){this.dirty=this.dirty||this._y!==e,this._y=e}setTopLeftPosition(e,t){return this.x=e,this.y=t,this}get width(){return this._width}set width(e){this.dirty=this.dirty||this._width!==e,this._width=e}get height(){return this._height}set height(e){this.dirty=this.dirty||this._height!==e,this._height=e}setSize(e,t){return this.width=e,this.height=t,this}get centerX(){return this.x+this.width/2}set centerX(e){this.x=e-this.width/2}get centerY(){return this.y+this.height/2}set centerY(e){this.y=e-this.height/2}setCenterPosition(e,t){return this.centerX=e,this.centerY=t,this}updateData(){this.pathData.length=0;var e=this.x,t=e+this.width,n=this.y,s=n+this.height;return this.pathData.push(e,n),this.pathData.push(t,n),this.pathData.push(t,s),this.pathData.push(e,s),this.pathData.push(e,n),super.updateData(),this}webglRender(e,t,n,s,o){if(this.isFilled){var i=e.fillTint,r=Yw(this.fillColor,this.fillAlpha*n);i.TL=r,i.TR=r,i.BL=r,i.BR=r,e.batchFillRect(-s+this.x,-o+this.y,this.width,this.height)}this.isStroked&&vo(e,this,n,s,o)}canvasRender(e,t,n){this.isFilled&&(Or(e,this),e.fillRect(-t,-n,this.width,this.height)),this.isStroked&&(kr(e,this),e.beginPath(),e.rect(-t,-n,this.width,this.height),e.stroke())}},roundRectangle:So,triangle:class extends To{constructor(e,t,n,s,o,i){e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),i===void 0&&(i=0),super(),this.pathData=[],this.closePath=!0,this.setP0(e,t),this.setP1(n,s),this.setP2(o,i)}get x0(){return this._x0}set x0(e){this.dirty=this.dirty||this._x0!==e,this._x0=e}get y0(){return this._y0}set y0(e){this.dirty=this.dirty||this._y0!==e,this._y0=e}setP0(e,t){return this.x0=e,this.y0=t,this}get x1(){return this._x1}set x1(e){this.dirty=this.dirty||this._x1!==e,this._x1=e}get y1(){return this._y1}set y1(e){this.dirty=this.dirty||this._y1!==e,this._y1=e}setP1(e,t){return this.x1=e,this.y1=t,this}get x2(){return this._x2}set x2(e){this.dirty=this.dirty||this._x2!==e,this._x2=e}get y2(){return this._y2}set y2(e){this.dirty=this.dirty||this._y2!==e,this._y2=e}setP2(e,t){return this.dirty=this.dirty||this.x2!==e||this.y2!==t,this.x2=e,this.y2=t,this}updateData(){return this.pathData.length=0,this.pathData.push(this.x0,this.y0),this.pathData.push(this.x1,this.y1),this.pathData.push(this.x2,this.y2),this.pathData.push(this.x0,this.y0),super.updateData(),this}webglRender(e,t,n,s,o){if(this.isFilled){var i=Nw(this.fillColor,this.fillAlpha*n),r=this.x0-s,h=this.y0-o,a=this.x1-s,u=this.y1-o,l=this.x2-s,d=this.y2-o,c=t.getX(r,h),p=t.getY(r,h),f=t.getX(a,u),v=t.getY(a,u),g=t.getX(l,d),y=t.getY(l,d);e.batchTri(c,p,f,v,g,y,i,i,i)}this.isStroked&&vo(e,this,n,s,o)}canvasRender(e,t,n){var s=this.x1-t,o=this.y1-n,i=this.x2-t,r=this.y2-n,h=this.x3-t,a=this.y3-n;e.beginPath(),e.moveTo(s,o),e.lineTo(i,r),e.lineTo(h,a),e.closePath(),this.isFilled&&(Or(e,this),e.fill()),this.isStroked&&(kr(e,this),e.stroke())}}},lf=Phaser.Utils.Objects.GetValue,rE=Phaser.Utils.Objects.IsPlainObject,aE=function(){for(var e=this.getShapes(),t=0,n=e.length;t<n;t++)e[t].lineStyle().fillStyle()},oE={createShape(e,t){var n=new nE[e];return t&&n.setName(t),n},buildShapes(e){var t=lf(e,"create",void 0);if(rE(t)){var n=t;for(var s in n){var o=n[s];switch(typeof o){case"number":for(var i=0;i<o;i++)this.addShape(this.createShape(s));break;case"string":this.addShape(this.createShape(s,o));break;default:for(var r=o,h=(i=0,r.length);i<h;i++)this.addShape(this.createShape(s,r[i]))}}}else if(Array.isArray(t))for(i=0,h=(n=t).length;i<h;i++){var a=n[i];this.addShape(this.createShape(a.type,a.name))}else typeof t=="function"&&t.call(this);this.setUpdateShapesCallback(lf(e,"update"))},setUpdateShapesCallback(e){return e===void 0&&(e=aE),this.dirty=this.dirty||this.updateCallback!==e,this.updateCallback=e,this},updateShapes(){this.updateCallback.call(this)}},lr=Phaser.Utils.Objects.GetValue,hE=Phaser.Utils.Objects.IsPlainObject;class uf extends Di{constructor(t,n,s,o,i,r){hE(n)&&(n=lr(r=n,"x",0),s=lr(r,"y",0),o=lr(r,"width",2),i=lr(r,"height",2)),super(t,n,s,o,i),this.type=lr(r,"type","rexCustomShapes"),this.buildShapes(r)}get centerX(){return this.width/2}get centerY(){return this.height/2}worldToLocalXY(t,n,s,o){return typeof s=="boolean"&&(o=s,s=void 0),mg(this,t,n,s,o)}}Object.assign(uf.prototype,oE),Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.IsPlainObject,as(uf);const lE={start:function(e){return this.easeValueTask||(this.easeValueTask=new Qe(this,{eventEmitter:null})),e!==void 0&&(this.duration=e,this.easeValueTask.stop()),this.easeValueTask.isRunning||(this.easeValueTask.restart({key:"value",from:0,to:1,duration:this.duration,ease:this.ease,repeat:-1,delay:this.delay,repeatDelay:this.repeatDelay}),this.setDirty()),this},stop:function(){return this.easeValueTask?(this.easeValueTask.stop(),this.setDirty(),this):this},pause:function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this},resume:function(){return this.easeValueTask?(this.easeValueTask.pause(),this.setDirty(),this):this}},je=Phaser.Utils.Objects.GetValue;class ev extends Di{constructor(t,n){super(t,je(n,"x",0),je(n,"y",0),je(n,"width",64),je(n,"height",64)),this.resetFromConfig(n,!0),this.buildShapes(n),je(n,"start",!0)&&this.start()}resetFromConfig(t,n){var s;return n===void 0&&(n=!1),s=n?1e3:this.duration,this.setDuration(je(t,"duration",s)),s=n?"Linear":this.ease,this.setEase(je(t,"ease",s)),s=n?0:this.delay,this.setDelay(je(t,"delay",s)),s=n?0:this.repeatDelay,this.setRepeatDelay(je(t,"repeatDelay",s)),s=n?16777215:this.color,this.setColor(je(t,"color",s)),s=n?0:this.value,this.setValue(je(t,"value",s)),this}buildShapes(){}get centerX(){return this.width/2}get centerY(){return this.height/2}get radius(){return Math.min(this.centerX,this.centerY)}get color(){return this._color}set color(t){this.isColorChanged=this.isColorChanged||this._color!==t,this.dirty=this.dirty||this.isColorChanged,this._color=t,this.setShapesColor(t)}setColor(t){return this.color=t,this}setShapesColor(t){}get value(){return this._value}set value(t){t=Phaser.Math.Clamp(t,0,1),this.dirty=this.dirty||this._value!=t,this._value=t}setValue(t){return this.value=t,this}setDuration(t){return this.duration=t,this}setDelay(t){return this.delay=t,this}setRepeatDelay(t){return this.repeatDelay=t,this}setEase(t){return this.ease=t,this}get isRunning(){return!!this.tweenTask&&this.tweenTask.isRunning}}Object.assign(ev.prototype,lE);const Wi=Phaser.Math.DegToRad,uE=Phaser.Math.Linear,dE=Phaser.Math.Easing.Expo.In,cE={right:0,down:1,left:2,up:3};var fE=function(e,t,n,s,o,i,r,h,a,u,l){var d=pn(t,0,s,o,i,r,h,a,u,l);e.startAt(d.x,d.y);var c=pn(n,0,s,o,i,r,h,a,u,l);e.lineTo(c.x,c.y);var p=pn(n,n,s,o,i,r,h,a,u,l);e.lineTo(p.x,p.y);var f=pn(0,n,s,o,i,r,h,a,u,l);e.lineTo(f.x,f.y);var v=pn(0,t,s,o,i,r,h,a,u,l);e.lineTo(v.x,v.y);var g=pn(t,t,s,o,i,r,h,a,u,l);e.lineTo(g.x,g.y),e.close()},Qh={},pn=function(e,t,n,s,o,i,r,h,a,u){var l=e*n,d=t*s;return Qh.x=r*l+h*d+o,Qh.y=a*l+u*d+i,Qh};const Ya={setDirection(e){return typeof e=="string"&&(e=cE[e]),this.direction=e,this},buildShapes(){for(var e=0;e<3;e++)this.addShape(new ie)},updateShapes(){var e,t,n,s,o,i;switch(this.direction){case 1:e=this.centerX,t=this.centerY-this.radius;var r=Wi(315);n=Math.cos(r),s=Math.sin(r);var h=Wi(45);o=Math.cos(h),i=Math.sin(h);break;case 3:e=this.centerX,t=this.centerY+this.radius,r=Wi(135),n=Math.cos(r),s=Math.sin(r),h=Wi(225),o=Math.cos(h),i=Math.sin(h);break;case 2:e=this.centerX+this.radius,t=this.centerY,r=Wi(225),n=Math.cos(r),s=Math.sin(r),h=Wi(315),o=Math.cos(h),i=Math.sin(h);break;default:e=this.centerX-this.radius,t=this.centerY,r=Wi(45),n=Math.cos(r),s=Math.sin(r),h=Wi(135),o=Math.cos(h),i=Math.sin(h)}for(var a=this.radius/7,u=this.getShapes(),l=0,d=u.length;l<d;l++){var c=u[l],p=(this.value+.1*(d-l))%1;p=dE(pe(p));var f=uE(.25,1,p);c.fillStyle(this.color,f);var v=3*l+1;fE(c,v,v+2,a,a,e,t,n,s,o,i)}}},pE=Phaser.Math.Linear,gE={buildShapes(){for(var e=0;e<4;e++)this.addShape(new rs);this.prevValue=void 0},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=e-n,o=t+n,i=2*n,r=this.getShapes(),h=r.length,a=2*n/h,u=.7*a;if(this.prevValue===void 0||this.prevValue>this.value)for(var l=0;l<h;l++){var d=r[l],c=this.prevValue===void 0?Math.random():d.getData("to");d.setData("from",c).setData("to",Math.random())}for(this.prevValue=this.value,l=0;l<h;l++){c=(d=r[l]).getData("from");var p=d.getData("to"),f=pE(c,p,this.value)*i,v=s+a*(l+.5);d.lineStyle(u,this.color,1).setP0(v,o).setP1(v,o-f)}}},mE=Phaser.Math.Linear,vE={buildShapes(){for(var e=0;e<3;e++)this.addShape(new Ge)},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=.1*n,o=Math.ceil(.25*s),i=1-pe(this.value),r=mE(.3,.9,i)*n,h=this.getShapes(),a=0,u=h.length;a<u;a++){var l=h[a],d=(i=(this.value+a/u)%1,2*Math.PI*i);l.lineStyle(o,this.color).setRadius(s).setCenterPosition(e+Math.cos(d)*r,t+Math.sin(d)*r)}}},yE=Phaser.Math.Linear,xE=Phaser.Math.Easing.Expo.In,bE={buildShapes(){for(var e=0;e<5;e++){var t=new rs;this.addShape(t);var n=pe(e/4)/2;t.setData("offset",n)}},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=e-n,o=2*n,i=this.getShapes(),r=i.length,h=2*n/r,a=.7*h,u=0;u<r;u++){var l=i[u],d=(this.value+l.getData("offset"))%1;d=xE(pe(d));var c=yE(.4,1,d)*o,p=s+h*(u+.5);l.lineStyle(a,this.color,1).setP0(p,t-c/2).setP1(p,t+c/2)}}},TE={buildShapes(){this.addShape(new ie().setName("border")),this.addShape(new ie().setName("fill"))},updateShapes(){var e=this.centerX,t=this.centerY,n=.7*this.radius,s=e-n,o=t-n,i=2*n;if(this.getShape("border").lineStyle(2,this.color,1).startAt(s,o).lineTo(i,0,!0).lineTo(0,i,!0).lineTo(-i,0,!0).lineTo(0,-i,!0).close(),this.value<.5){var r=i*(2*(.5-this.value));this.getShape("fill").fillStyle(this.color,1).startAt(s,o).lineTo(i,0,!0).lineTo(0,r,!0).lineTo(-i,0,!0).lineTo(0,-r,!0).close()}else{var h=2*(this.value-.5)*180;this.getShape("border").rotateAround(e,t,h),this.getShape("fill").fillStyle().lineStyle()}}},df=Phaser.Math.RadToDeg,cf=Phaser.Math.Angle.WrapDegrees,wE=Phaser.Math.Angle.Wrap,SE=Phaser.Math.Angle.ShortestBetween,CE=Phaser.Math.DegToRad,ff=Phaser.Math.DegToRad(270),EE={buildShapes(){this.addShape(new Ge().setName("border")),this.addShape(new rs().setName("minuteHand")),this.addShape(new rs().setName("hourHand")),this.minuteHandAngle=0,this.hourHandAngle=0},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=Math.ceil(n/25),o=n-s/2,i=.8*n,r=.5*n,h=this.minuteHandAngle;this.minuteHandAngle=2*Math.PI*this.value;var a=cf(df(h)),u=cf(df(this.minuteHandAngle)),l=SE(a,u);this.hourHandAngle=wE(this.hourHandAngle+CE(l)/12),this.getShape("border").lineStyle(s,this.color).setRadius(o).setCenterPosition(e,t);var d=this.minuteHandAngle+ff;this.getShape("minuteHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(d)*i,t+Math.sin(d)*i),d=this.hourHandAngle+ff,this.getShape("hourHand").lineStyle(s,this.color).setP0(e,t).setP1(e+Math.cos(d)*r,t+Math.sin(d)*r)}},pf=Phaser.Math.Linear,PE=Phaser.Math.Easing.Expo.In,OE={buildShapes(){for(var e=0;e<4;e++){var t=new rs;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=e-n,o=t-n,i=2*n/2,r=2*n/2,h=this.getShapes(),a=h.length,u=0;u<a;u++){var l=s+i*(u%2+.5),d=o+r*(Math.floor(u/2)+.5),c=h[u],p=(this.value+.1*(a-u))%1;p=PE(pe(p));var f=(a-u)/a,v=pf(.7,1,p)*r,g=pf(.7,1,p)*i;c.lineStyle(g,this.color,f).setP0(l-v/2,d).setP1(l+v/2,d)}}},gf=Phaser.Math.Linear,kE={buildShapes(){for(var e=0;e<3;e++){var t=new Ge;this.addShape(t);var n=pe(e/2)/2;t.setData("offset",n)}},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=e-n,o=this.getShapes(),i=o.length,r=2*n/i,h=r/2,a=0;a<i;a++){var u=o[a],l=(this.value+u.getData("offset"))%1;l=pe(l);var d=gf(.25,1,l),c=gf(.5,1,l)*h;u.fillStyle(this.color,d).setRadius(c).setCenterPosition(s+r*(a+.5),t)}}},mf=Phaser.Math.Linear,ME=Phaser.Math.Easing.Expo.In,_E={buildShapes(){for(var e=0;e<3;e++){var t=new rs;this.addShape(t)}},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=e-n,o=this.getShapes(),i=o.length,r=2*n/i,h=2*n,a=0;a<i;a++){var u=o[a],l=(this.value+.1*(i-a))%1;l=ME(pe(l));var d=(a+1)/i,c=mf(.7,1,l)*h,p=mf(.7,1,l)*r,f=s+r*(a+.5);u.lineStyle(p,this.color,d).setP0(f,t-c/2).setP1(f,t+c/2)}}},AE=Phaser.Math.Linear,RE={buildShapes(){for(var e=0;e<9;e++){var t=new Ge;this.addShape(t),t.setData("offset",Math.random())}this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=this.isInitialize||this.isSizeChanged,o=e-n,i=t-n,r=2*n/3,h=2*n/3,a=Math.min(r,h)/2*.8,u=this.getShapes(),l=0,d=u.length;l<d;l++){var c=o+r*(l%3+.5),p=i+h*(Math.floor(l/3)+.5),f=u[l],v=(this.value+f.getData("offset"))%1;v=pe(v),f.fillStyle(this.color,AE(.25,1,v)),s&&f.setRadius(a).setCenterPosition(c,p)}this.isInitialize=!1}},LE={buildShapes(){for(var e=0;e<2;e++)this.addShape(new ie)},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=Math.ceil(n/25),o=n-s,i=.6*o,r=.7*o,h=1.2*o,a=this.getShapes(),u=0,l=a.length;u<l;u++){var d=a[u],c=(this.value+u/l)%1,p=pe(c),f=e,v=t-15*c,g=o*c,y=i*c,m=r*c,x=h*c;d.lineStyle(s,this.color,p).startAt(f,v).cubicBezierTo(f,v-y,f-g,v-y,f-g,v).cubicBezierTo(f-g,v+y,f,v+m,f,v+x).cubicBezierTo(f,v+m,f+g,v+y,f+g,v).cubicBezierTo(f+g,v-y,f,v-y,f,v).close()}}},DE=Phaser.Math.Linear,FE={buildShapes(){for(var e=0;e<12;e++)this.addShape(new rs);this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.isInitialize||this.isSizeChanged,s=this.radius,o=s/2,i=Math.ceil(s/20),r=this.getShapes(),h=0,a=r.length;h<a;h++){var u=r[h],l=h/a,d=2*Math.PI*l,c=DE(.25,1,(1-this.value+l)%1);u.lineStyle(i,this.color,c),n&&u.setP0(e+Math.cos(d)*o,t+Math.sin(d)*o).setP1(e+Math.cos(d)*s,t+Math.sin(d)*s)}this.isInitialize=!1}},BE={buildShapes(){this.addShape(new Ge().setName("track")),this.addShape(new Ge().setName("thumb"))},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=.9*n,o=Math.ceil(s/25),i=.1*n,r=2*Math.PI*this.value;this.getShape("track").lineStyle(o,this.color,.7).setRadius(s).setCenterPosition(e,t),this.getShape("thumb").fillStyle(this.color).setRadius(i).setCenterPosition(e+Math.cos(r)*s,t+Math.sin(r)*s)}},IE={buildShapes(){this.addShape(new Ge().setName("track")),this.addShape(new Ln().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=Math.ceil(n/25),o=n-s/2;this.getShape("track").lineStyle(s,this.color,.5).setRadius(o).setCenterPosition(e,t);var i=360*this.value,r=i+60;this.getShape("arc").lineStyle(s,this.color,1).setRadius(o).setCenterPosition(e,t).setAngle(i,r)}},XE=Phaser.Math.Linear,zE={buildShapes(){for(var e=0;e<4;e++){var t=new Ln().setPie();this.addShape(t),t.setData("speed",XE(180,360,Math.random()))}this.prevValue=void 0},updateShapes(){var e,t=this.centerX,n=this.centerY,s=this.radius;this.prevValue!==void 0&&(e=this.value-this.prevValue,this.prevValue>this.value&&(e+=1));for(var o=this.getShapes(),i=0,r=o.length;i<r;i++){var h=o[i],a=(i+1)/r;if(this.prevValue===void 0){var u=90+(l=i/r*360);h.fillStyle(this.color,a).setRadius(s).setCenterPosition(t,n).setAngle(l,u).setData("angle",l)}else{var l=h.getData("angle")+h.getData("speed")*e;u=90+(l%=360),h.fillStyle(this.color,a).setRadius(s).setCenterPosition(t,n).setAngle(l,u).setData("angle",l)}}this.prevValue=this.value}},YE={buildShapes(){this.addShape(new Ge)},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=n*this.value,o=Math.ceil(n/25),i=pe(this.value);this.getShapes()[0].lineStyle(o,this.color,i).setRadius(s).setCenterPosition(e,t)}},NE=Phaser.Math.Linear,GE=Phaser.Math.Easing.Expo.In,UE={buildShapes(){this.addShape(new Ge().setName("center")),this.addShape(new ie().setName("arc0")),this.addShape(new ie().setName("arc1")),this.isInitialize=!0},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=this.isInitialize||this.isSizeChanged,o=2*n/6,i=e-n+o,r=t+n-o,h=this.getShapes(),a=0,u=h.length;a<u;a++){var l=h[a],d=(this.value+.1*(u-a))%1;d=GE(pe(d));var c=NE(.25,1,d);switch(l.name){case"center":l.fillStyle(this.color,c),s&&l.setRadius(o).setCenterPosition(i,r);break;case"arc0":if(l.fillStyle(this.color,c),s){var p=2*o,f=3*o;l.startAt(i,r-p).lineTo(i,r-f).setIterations(8).arc(i,r,f,270,360).lineTo(i+p,r).setIterations(6).arc(i,r,p,360,270,!0).close()}break;case"arc1":l.fillStyle(this.color,c),s&&(p=4*o,f=5*o,l.startAt(i,r-p).lineTo(i,r-f).setIterations(8).arc(i,r,f,270,360).lineTo(i+p,r).setIterations(6).arc(i,r,p,360,270,!0).close())}}this.isInitialize=!1}},WE={buildShapes(){for(var e=0;e<2;e++)this.addShape(new Ge)},updateShapes(){for(var e=this.centerX,t=this.centerY,n=this.radius,s=Math.ceil(n/25),o=n-s,i=this.getShapes(),r=0,h=i.length;r<h;r++){var a=i[r],u=(this.value+r/h)%1,l=pe(u);a.lineStyle(s,this.color,l).setRadius(u*o).setCenterPosition(e,t)}}},VE={buildShapes(){this.addShape(new Ln().setName("arc"))},updateShapes(){var e=this.centerX,t=this.centerY,n=this.radius,s=Math.ceil(n/10),o=n-s,i=720*this.value,r=i-180*pe(this.value);this.getShape("arc").lineStyle(s,this.color,1).setRadius(o).setCenterPosition(e,t).setAngle(r+315,i+315)}};Phaser.Utils.Objects.GetValue;const Wl={leftArrow:Ya,rightArrow:Ya,upArrow:Ya,downArrow:Ya,audio:gE,ball:vE,bars:bE,box:TE,clock:EE,cube:OE,dots:kE,facebook:_E,grid:RE,hearts:LE,ios:FE,oribit:BE,oval:IE,pie:zE,puff:YE,radio:UE,rings:WE,spinner:VE},Vl=[];for(var jE in Wl)Vl.push(jE);const vf=Phaser.Utils.Array.GetRandom,HE={setAnimationMode(e,t){Wl.hasOwnProperty(e)||(e=vf(Vl)),this.animationMode=e;var n=Wl[e];switch(t&&this.resetFromConfig(t),e){case"leftArrow":n.setDirection.call(this,"left");break;case"rightArrow":n.setDirection.call(this,"right");break;case"upArrow":n.setDirection.call(this,"up");break;case"downArrow":n.setDirection.call(this,"down")}return this.clear(),n.buildShapes.call(this),this.updateShapes=n.updateShapes.bind(this),this.stop().start(),this},setRandomAnimationMode(e){var t=vf(Vl);return this.setAnimationMode(t,e),this}},KE=Phaser.Utils.Objects.GetValue;Object.assign((class extends ev{constructor(e,t){super(e,t),this.type="rexSpinnerAIO",this.setAnimationMode(KE(t,"animationMode"))}}).prototype,HE);const qE={setTransitionStartCallback(e,t){return this.onStartCallback=e,this.onStartCallbackScope=t,this},setTransitionProgressCallback(e,t){return this.onProgressCallback=e,this.onProgressCallbackScope=t,this},setTransitionCompleteCallback(e,t){return this.onCompleteCallback=e,this.onCompleteCallbackScope=t,this}};var iv=function(){for(var e=this.scaleMode-1,t=0,n=this.images.length;t<n;t++){var s=this.images[t],o=Pu(s,this,e,!0).width/s.width;this.setChildLocalScale(s,o),s.biasScale=o}},po=function(e){this.scaleMode===0?this.resize(e.width,e.height):iv.call(this)};const yf=Phaser.Utils.Objects.IsPlainObject,tl=Phaser.Utils.Objects.GetValue,$E=Phaser.Utils.Array.GetRandom;var ZE={out:0,in:1},ri=function(e,t,...n){for(var s=0,o=n.length;s<o;s++){var i=n[s];if(i&&i.hasOwnProperty(e))return i[e]}return t};const JE={setTransitionDirection(e){return typeof e=="string"&&(e=ZE[e]),this.dir=e,this},setDuration(e){return this.duration=e,this},setEaseFunction(e){return this.easeFunction=e,this},setNextTexture(e,t){return this.nextImage.setTexture(e,t),po.call(this,this.nextImage),this},transit(e,t,n){if(this.isRunning&&(this.ignoreCompleteEvent=!0,this.stop(),this.ignoreCompleteEvent=!1),n!==void 0&&(e={key:e,frame:t,mode:n}),this.currentTransitionMode=void 0,yf(e)){var s,o=e;e=tl(o,"key",void 0),t=tl(o,"frame",void 0),n=tl(o,"mode"),Array.isArray(n)&&(n=$E(n)),this.transitionModes&&this.transitionModes.hasOwnProperty(n)&&(s=this.transitionModes[n],this.currentTransitionMode=n),this.setDuration(ri("duration",this.duration,o,s)).setEaseFunction(ri("ease",this.easeFunction,o,s)).setTransitionDirection(ri("dir",this.dir,o,s));var i=ri("mask",void 0,o,s);i&&this.setMaskGameObject(i),this.setMaskEnable(i===!0);var r=ri("onStart",void 0,o,s),h=ri("onProgress",void 0,o,s),a=ri("onComplete",void 0,o,s);r===void 0&&h===void 0&&a===void 0||this.setTransitionStartCallback(r,ri("onStartScope",void 0,o,s)).setTransitionProgressCallback(h,ri("onProgressScope",void 0,o,s)).setTransitionCompleteCallback(a,ri("onCompleteScope",void 0,o,s))}return this.setNextTexture(e,t),this.start(),this},addTransitionMode(e,t){return this.transitionModes===void 0&&(this.transitionModes={}),yf(e)&&(e=(t=e).name,delete t.name),this.transitionModes[e]=t,this},start(){return this.easeValueTask===void 0&&(this.easeValueTask=new Qe(this,{eventEmitter:null})),this.easeValueTask.restart({key:"t",from:0,to:1,duration:this.duration,ease:this.easeFunction}),this},pause(){return this.easeValueTask&&this.easeValueTask.pause(),this},resume(){return this.easeValueTask&&this.easeValueTask.resume(),this},stop(){return this.easeValueTask&&this.easeValueTask.stop(),this.setT(1),this}},QE=Phaser.GameObjects.Graphics.prototype.setPosition,xf=Phaser.Geom.Rectangle,bf=Phaser.Geom.Circle;var Tf=function(e,t,n,s,o){this.geom=function(i,r,h,a,u,l,d){if(i===1){a=a.left;var c=-r*(u-.5),p=-h*(l-.5),f=Math.min(r,h)/2+a;d!==void 0&&d instanceof bf||(d=new bf),d.setTo(c,p,f)}else{var v=-r*u-a.left,g=-h*l-a.top,y=r+a.left+a.right,m=h+a.top+a.bottom;d!==void 0&&d instanceof xf||(d=new xf),d.setTo(v,g,y,m)}return d}(this.shapeType,e,t,n,s,o,this.geom),this.clear().fillStyle(16777215),this.shapeType===1?this.fillCircleShape(this.geom):this.fillRectShape(this.geom)},tP={setPosition:function(e,t){var n=this.parent;return e===void 0&&(e=n.x),t===void 0&&(t=n.y),QE.call(this,e,t),this},resize:function(e,t,n){var s=this.parent;e===void 0&&(e=s.width),t===void 0&&(t=s.height),n===void 0?n=this.padding:typeof n=="number"&&(n=GetBoundsConfig(n));var o=this.width!==e||this.height!==t,i=this.padding!==n&&!zr(this.padding,n);return o||i?(this.width=e,this.height=t,i&&vi(n,this.padding),this.originX=s.originX,this.originY=s.originY,Tf.call(this,e,t,n,s.originX,s.originY),this):this},setOrigin:function(e,t){t===void 0&&(t=e);var n=this.parent;return e===void 0&&(e=n.originX),t===void 0&&(t=n.originY),this.originX===e&&this.originY===t||(this.originX=e,this.originY=t,Tf.call(this,this.width,this.height,this.padding,e,t)),this},contains:function(e,t){return e-=this.x,t-=this.y,this.geom.contains(e,t)}};const eP=Phaser.GameObjects.Graphics;class ko extends eP{constructor(t,n,s){n===void 0&&(n=0),typeof n=="string"&&(n=iP[n]),super(t.scene),this.parent=t,this.shapeType=n,this.padding=Ns(s),this.setPosition().resize().setVisible(!1)}destroy(){return this.parent=void 0,super.destroy(),this}}const iP={rectangle:0,circle:1};Object.assign(ko.prototype,tP);const sP={setMaskGameObject(e){if(!e)return this.removeMaskGameObject(),this;if(this.maskGameObject){if(e===!0&&this.maskGameObject instanceof ko)return this;if(this.maskGameObject===e)return this;this.removeMaskGameObject()}return e===!0&&(e=new ko(this)),e.resize(this.width,this.height).setOrigin(this.originX,this.originY).setPosition(0,0).setScale(1).setVisible(!1),this.addLocal(e),this.maskGameObject=e,e._maskObject||(e._maskObject=e.createGeometryMask(),e.once("destroy",function(){e._maskObject.destroy(),e._maskObject=void 0})),this.childrenMask=e._maskObject,this},removeMaskGameObject(e){return e===void 0&&(e=!0),this.backImage.clearMask(),this.frontImage.clearMask(),this.childrenMask=void 0,this.remove(this.maskGameObject,e),this.maskGameObject=void 0,this},setImageMaskEnable(e,t,n){return t===void 0&&(t=!0),n===void 0&&(n=!1),t?(this.childrenMask||this.setMaskGameObject(!0),e.setMask(this.childrenMask),this.childrenMask.setInvertAlpha(n)):e.clearMask(),this},setCurrentImageMaskEnable(e,t){return this.setImageMaskEnable(this.currentImage,e,t),this},setNextImageMaskEnable(e,t){return this.setImageMaskEnable(this.nextImage,e,t),this},setCellImagesMaskEnable(e,t){for(var n=this.getCellImages(),s=0,o=n.length;s<o;s++)this.setImageMaskEnable(n[s],e,t);return this},setMaskEnable(e,t){return this.setImageMaskEnable(this.backImage,e,t),this.setImageMaskEnable(this.frontImage,e,t),this.setCellImagesMaskEnable(e,t),this}},Ei=Phaser.Utils.Objects.GetValue,nP=Phaser.GameObjects.Image,rP=Phaser.Utils.Objects.IsPlainObject,aP=Phaser.Math.RotateAround,oP={gridCutImage(e,t,n,s){s===void 0&&(s={}),s.objectPool=this.imagesPool;for(var o,i=function(a,u,l,d){rP(u)&&(u=Ei(d=u,"columns",1),l=Ei(d,"rows",1));var c=Ei(d,"createImageCallback");if(!c){var p=Ei(d,"ImageClass",nP);c=function(R,B,I){return new p(R,0,0,B,I)}}for(var f=Ei(d,"originX",.5),v=Ei(d,"originY",.5),g=Ei(d,"add",!0),y=Ei(d,"align",g),m=Ei(d,"objectPool",void 0),x=a.scene,b=a.texture,w=function(R,B,I,G,N,W){var U,V;I==null&&(I="__BASE"),W||(V=W,typeof(U=I)=="object"&&(U=U.name),V===void 0&&(V=","),W=U==="__BASE"?function(st,gt){return`${st}${V}${gt}`}:function(st,gt){return`${U}_${st}${V}${gt}`});for(var K,$,H,j=R.sys.textures.get(B),q=typeof I=="object"?I:j.get(I),Z=q.width/G,Q=q.height/N,at=q.cutX,rt=q.cutY,nt=0,lt=0,it=0;it<N;it++){nt=0;for(var ot=0;ot<G;ot++)H=W(ot,it),K=nt+at,$=lt+rt,j.add(H,0,K,$,Z,Q),nt+=Z;lt+=Q}return{getFrameNameCallback:W,cellWidth:Z,cellHeight:Q,columns:G,rows:N}}(x,b,a.frame,u,l),T=w.getFrameNameCallback,S=a.scaleX,C=a.scaleY,E=a.rotation,M=a.getTopLeft(),_=M.x,O=M.y,k=[],P=w.cellWidth*S,A=w.cellHeight*C,L=0;L<l;L++)for(var D=0;D<u;D++){var F,X=T(D,L);if(F=m&&m.length>0?m.pop().setTexture(b,X):c(x,b,X),g&&x.add.existing(F),y){var z=_+P*D+f*P,Y=O+A*L+v*A;F.setOrigin(f,v).setPosition(z,Y).setScale(S,C).setRotation(E),aP(F,_,O,E)}k.push(F)}return k}(e,t,n,s),r=0,h=i.length;r<h;r++)(o=i[r]).setVisible(!0),this.add(o);return this.cellImages=i,this.setChildLocalVisible(e,!1),i},gridCutCurrentImage(e,t,n){return this.gridCutImage(this.currentImage,e,t,n)},gridCutNextImage(e,t,n){return this.gridCutImage(this.nextImage,e,t,n)},getCellImages(){return this.cellImages},freeCellImages(){if(this.cellImages.length===0)return this;for(var e,t,n=this.cellImages[0].texture,s=this.cellImages,o=0,i=s.length;o<i;o++)e=s[o],this.setChildLocalAlpha(e,1).setChildLocalScale(e,1).setChildLocalVisible(e,!1),e.clearMask(),t=e.frame.name,e.setTexture(),n.remove(t);return this.imagesPool.push(...s),s.length=0,this}},sv={setFlipX(e){return this.flipX=e,this},setFlipY(e){return this.flipY=e,this},toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY(){return this.flipY=!this.flipY,this},setFlip(e,t){return this.flipX=e,this.flipY=t,this},resetFlip(){return this.flipX=!1,this.flipY=!1,this}};var nv={};Object.assign(nv,qE,JE,sP,oP,sv);var hP=function(e,t,n,s){},lP=function(e,t,n,s){e.setChildLocalAlpha(t,1-s).setChildLocalAlpha(n,s)},uP=function(e,t,n,s){e.setChildLocalAlpha(t,1)};const wf=Phaser.Utils.Objects.IsPlainObject,jt=Phaser.Utils.Objects.GetValue,dP=Phaser.Math.Clamp;var el=function(e,t,n,s,o,i){var r;e&&(this.scaleMode&&(s.biasScale>0&&(r=this.getChildLocalScaleX(s),r/=s.biasScale,this.setChildLocalScale(s,r)),o.biasScale&&(r=this.getChildLocalScaleX(o),r/=o.biasScale,this.setChildLocalScale(o,r))),t?e.call(t,n,s,o,i):e(n,s,o,i),this.scaleMode&&(s.biasScale>0&&(r=this.getChildLocalScaleX(s),r*=s.biasScale,this.setChildLocalScale(s,r)),o.biasScale&&(r=this.getChildLocalScaleX(o),r*=o.biasScale,this.setChildLocalScale(o,r))))};Object.assign((class extends ii{constructor(e,t,n,s,o,i){wf(t)?(t=jt(i=t,"x",0),n=jt(i,"y",0),s=jt(i,"key",void 0),o=jt(i,"frame",void 0)):wf(o)&&(i=o,o=void 0);var r=jt(i,"back",void 0),h=jt(i,"front",void 0);r||(r=e.add.image(t,n,s,o)),h||(h=e.add.image(t,n,s,o));var a=jt(i,"width",void 0),u=jt(i,"height",void 0),l=a!==void 0&&u!==void 0?1:0;a===void 0&&(a=h.width),u===void 0&&(u=h.height),super(e,t,n,a,u),this.type="rexTransitionImage",this._flipX=!1,this._flipY=!1,typeof(l=jt(i,"scaleMode",l))=="string"&&(l=cP[l]),this.scaleMode=l,r.setVisible(!1),this.addMultiple([r,h]),this.backImage=r,this.frontImage=h,this.images=[this.backImage,this.frontImage],this.maskGameObject=void 0,this.cellImages=[],this.imagesPool=[],this.transitionModes=void 0,this.currentTransitionMode=void 0;var d=jt(i,"onStart",void 0),c=jt(i,"onProgress",void 0),p=jt(i,"onComplete",void 0),f=jt(i,"dir",0);d===void 0&&c===void 0&&p===void 0&&(d=hP,c=lP,p=uP,f=0),this.setTransitionStartCallback(d,jt(i,"onStartScope",void 0)).setTransitionProgressCallback(c,jt(i,"onProgressScope",void 0)).setTransitionCompleteCallback(p,jt(i,"onCompleteScope",void 0)).setTransitionDirection(f).setDuration(jt(i,"duration",1e3)).setEaseFunction(jt(i,"ease","Linear"));var v=jt(i,"mask",void 0);v&&this.setMaskGameObject(v),this.setMaskEnable(!1),this.ignoreCompleteEvent=!1,po.call(this,this.frontImage)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.childrenMask&&(this.childrenMask.destroy(),this.childrenMask=void 0),this.backImage=void 0,this.frontImage=void 0,this.images.length=0,this.maskGameObject=void 0,this.cellImages.length=0,this.imagesPool.length=0,this.transitionModes=void 0,super.destroy(e),this.onStartCallback=void 0,this.onStartCallbackScope=void 0,this.onProgressCallback=void 0,this.onProgressCallbackScope=void 0,this.onCompleteCallback=void 0,this.onCompleteCallbackScope=void 0,this.easeValueTask=void 0)}get currentImage(){return this.dir===0?this.frontImage:this.backImage}get nextImage(){return this.dir===0?this.backImage:this.frontImage}get texture(){return this.nextImage.texture}get frame(){return this.nextImage.frame}get tint(){return this._tint}set tint(e){this._tint!==e&&(this._tint=e,this.backImage.setTint(e),this.frontImage.setTint(e))}setTint(e){return this.tint=e,this}get flipX(){return this._flipX}set flipX(e){this._flipX!==e&&(this._flipX=e,this.backImage.setFlipX(e),this.frontImage.setFlipX(e))}setFlipX(e){return this.flipX=e,this}toggleFlipX(){return this.flipX=!this.flipX,this}get flipY(){return this._flipY}set flipY(e){this._flipY!==e&&(this._flipY=e,this.backImage.setFlipY(e),this.frontImage.setFlipY(e))}setFlipY(e){return this.flipY=e,this}toggleFlipY(){return this.flipY=!this.flipY,this}setFlip(e,t){return this.flipX=e,this.flipY=t,this}get t(){return this._t}set t(e){if(e=dP(e,0,1),this._t!==e){this._t=e;var t=this.currentImage,n=this.nextImage;if(e===0&&(this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!0),el.call(this,this.onStartCallback,this.onStartCallbackScope,this,t,n,e)),el.call(this,this.onProgressCallback,this.onProgressCallbackScope,this,t,n,e),e===1){el.call(this,this.onCompleteCallback,this.onCompleteCallbackScope,this,t,n,e);var s=n.texture.key,o=n.frame.name;this.frontImage.setTexture(s,o),this.backImage.setTexture(s,o),po.call(this,n),this.setChildVisible(this.frontImage,!0).setChildVisible(this.backImage,!1).setMaskEnable(!1).freeCellImages()}e!==1||this.ignoreCompleteEvent||this.emit("complete")}}setT(e){return this.t=e,this}get isRunning(){return!!this.easeValueTask&&this.easeValueTask.isRunning}setOrigin(e,t){return super.setOrigin(e,t),this.backImage.setOrigin(e,t),this.frontImage.setOrigin(e,t),this.maskGameObject&&this.maskGameObject.setOrigin(e,t),this}setTexture(e,t){return this.frontImage.setTexture(e,t),this.backImage.setTexture(e,t).setVisible(!1),po.call(this,this.frontImage),this}setSize(e,t){return super.setSize(e,t),this.scaleMode&&iv.call(this),this}}).prototype,nv);const cP={fit:1,FIT:1,envelop:2,ENVELOP:2};Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,Phaser.Utils.Objects.GetValue,Phaser.Math.Clamp,Phaser.Utils.Array.SpliceOne;var rv={scaleImage:function(){var e=this.image;if(!this.scaleUp&&e.width<=this.width&&e.height<=this.height)return this;var t=Pu(e,this,"FIT",!0);return e.setDisplaySize(t.width,t.height),this.resetChildScaleState(e),this}};Object.assign(rv,sv);var fP=function(){var e=this.background;return e?(e.setOrigin(this.originX,this.originY),e.setPosition(this.x,this.y),ae(e,this.displayWidth,this.displayHeight),this.resetChildScaleState(e),this):this};const Sf=Phaser.Utils.Objects.IsPlainObject,Pi=Phaser.Utils.Objects.GetValue;class av extends ii{constructor(t,n,s,o,i,r){Sf(n)?(n=Pi(r=n,"x",0),s=Pi(r,"y",0),o=Pi(r,"key",void 0),i=Pi(r,"frame",void 0)):Sf(i)&&(r=i,i=void 0);var h=Pi(r,"image");h?h.setPosition(n,s).setOrigin(.5):(h=t.add.image(n,s,o,i),o===void 0&&h.setVisible(!1)),super(t,n,s,1,1),this.type="rexImageBox";var a=Pi(r,"background");a&&this.add(a),this.background=a,this.add(h),this.image=h,this.scaleUp=Pi(r,"scaleUp",!1);var u=Pi(r,"width",h.width),l=Pi(r,"height",h.height);this.resize(u,l)}get texture(){return this.image.texture}get frame(){return this.image.frame}get flipX(){return this._flipX}set flipX(t){this._flipX!==t&&(this._flipX=t,this.image.setFlipX(t))}get flipY(){return this._flipY}set flipY(t){this._flipY!==t&&(this._flipY=t,this.image.setFlipY(t))}resize(t,n){return super.resize(t,n),fP.call(this),this.scaleImage(),this}setTexture(t,n){var s=this.image;return s.setTexture(t,n),t!==null?(this.setChildVisible(s,!0),this.scaleImage()):this.setChildVisible(s,!1),this}}Object.assign(av.prototype,rv);const pP=Phaser.Math.Wrap;var Cf=function(e,t){if(this.hasRatioFitChild){var n,s,o;this.orientation===0?n=t-(this.getInnerPadding("top")+this.getInnerPadding("bottom"))*this.scaleY:(this.getInnerPadding("left"),this.getInnerPadding("right"),this.scaleX);for(var i=this.sizerChildren,r=0,h=i.length;r<h;r++){var a,u;if(!(u=(a=i[r]).rexSizer).hidden){var l=u.fitRatio;l&&(this.orientation===0?s=(o=n-(this.getChildOuterPadding(a,"top")+this.getChildOuterPadding(a,"bottom"))*this.scaleY)*l:o=(s=n-(this.getChildOuterPadding(a,"top")+this.getChildOuterPadding(a,"bottom"))*this.scaleX)/l,ae(a,s,o),a.isRexSizer&&a.setMinSize(s,o),u.resolved=!0)}}}};const gP=Phaser.GameObjects.Zone;class mP extends gP{constructor(t){super(t,0,0,1,1),this.isRexSpace=!0}}var vP=function(e,t){var n,s=this.sizerChildren;if(s.length===0)return-1;for(var o=-1,i=1/0,r=0,h=s.length;r<h;r++){var a=s[r];i>(n=this.orientation===0?Math.abs(a.left-e):Math.abs(a.top-t))&&(i=n,o=r)}return a=s[s.length-1],i>(n=this.orientation===0?Math.abs(a.right-e):Math.abs(a.bottom-t))&&(i=n,o=r+1),o};const ov=Phaser.Utils.Objects.IsPlainObject,Ee=Phaser.Utils.Objects.GetValue,Ef=Phaser.Display.Align.CENTER,yP={min:0,full:-1};var il=function(e,t,n,s,o,i,r,h,a,u){var l,d,c,p;Vr.call(this,e);var f=e.isRexSpace,v=typeof t;if(t===null)return this;if(v!=="number"){if(v==="string")t=yP[t];else if(ov(t)){var g;t=Ee(g=t,"proportion",void 0),n=Ee(g,"align",Ef),s=Ee(g,"padding",0),o=Ee(g,"expand",!1),i=Ee(g,"key",void 0),r=Ee(g,"index",void 0),e.isRexSizer||(h=Ee(g,"minWidth",void 0),a=Ee(g,"minHeight",void 0)),u=Ee(g,"fitRatio",0),l=Ee(g,"offsetX",0),d=Ee(g,"offsetY",0),c=Ee(g,"offsetOriginX",0),p=Ee(g,"offsetOriginY",0)}}return typeof n=="string"&&(n=Nn[n]),t===void 0&&(t=f?1:0),n===void 0&&(n=Ef),s===void 0&&(s=0),o===void 0&&(o=!1),h===void 0&&(f?h=0:e.isRexSizer||(h=e._minWidth)),a===void 0&&(f?a=0:e.isRexSizer||(a=e._minHeight)),u===void 0||u===!1?u=0:u===!0&&(u=bt(e)/Tt(e)),l===void 0&&(l=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),(g=this.getSizerConfig(e)).proportion=t,g.align=n,g.padding=Ns(s),g.expand=o,g.fitRatio=t===0?u:0,g.alignOffsetX=l,g.alignOffsetY=d,g.alignOffsetOriginX=c,g.alignOffsetOriginY=p,r===void 0||r>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(r,0,e),e.isRexSizer||(t>0&&(this.orientation===0?e.minWidth=h===void 0?bt(e):h:e.minHeight=a===void 0?Tt(e):a),o&&(this.orientation===0?e.minHeight=a:e.minWidth=h)),i!==void 0&&this.addChildrenMap(i,e),this};const xP={add:il,addSpace(e){return this.insertSpace(void 0,e),this},insertSpace(e,t){return t===void 0&&(t=1),il.call(this,new mP(this.scene),{proportion:t,minWidth:0,minHeight:0,index:e}),this},insert(e,t,n,s,o,i,r,h){return ov(n)&&(n.index=e),il.call(this,t,n,s,o,i,r,e,h),this},insertAtPosition(e,t,n,s,o,i,r,h,a){var u=vP.call(this,e,t);return u===-1&&(u=void 0),this.insert(u,n,s,o,i,r,h,a),this}},bP=Phaser.Utils.Array.Remove,TP={remove(e,t){return this.getParentSizer(e)!==this||(bP(this.sizerChildren,e),jr.call(this,e,t)),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,No.call(this,e),this}},wP={getChildAlign(e){return this.getSizerConfig(e).align},setChildAlign(e,t){return typeof t=="string"&&(t=Nn[t]),this.getSizerConfig(e).align=t,this}},SP={getChildProportion(e){return this.getSizerConfig(e).proportion},setChildProportion(e,t){return this.getSizerConfig(e).proportion=t,this}},CP={getChildExpand(e){return this.getSizerConfig(e).expand},setChildExpand(e,t){return this.getSizerConfig(e).expand=t,this}},Mu={sortChildren(e){return this.sizerChildren.sort(e),this},sortChildrenByData(e,t){return this.sizerChildren.sort(function(n,s){var o=n.getData(e),i=s.getData(e);return t?i-o:o-i}),this},sortChildrenByProperty(e,t){return this.sizerChildren.sort(function(n,s){var o=n[e],i=s[e];return t?i-o:o-i}),this}};var hv={getChildrenWidth:function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t,n,s,o,i,r=0,h=this.sizerChildren,a=!1;if(this.childrenProportion,this.orientation===0)for(var u=!0,l=0,d=h.length;l<d;l++)(t=h[l]).hasOwnProperty("rexSizer")&&((n=t.rexSizer).hidden||((s=n.proportion)===0||e?(i=this.getChildWidth(t),n.fitRatio>0&&!n.resolved&&(i=void 0),i===void 0&&(s===0||this.hasProportion0Child?a=!0:i=0)):i=0,a||(i+=((o=t.rexSizer.padding).left+o.right)*this.scaleX,u?u=!1:i+=this.space.item*this.scaleX,r+=i)));else for(l=0,d=h.length;l<d;l++)(t=h[l]).hasOwnProperty("rexSizer")&&((n=t.rexSizer).hidden||((i=this.getChildWidth(t))===void 0&&(a=!0),a||(i+=((o=n.padding).left+o.right)*this.scaleX,r=Math.max(i,r))));return a?void 0:r+(this.space.left+this.space.right)*this.scaleX},getChildrenHeight:function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t,n,s,o,i,r=0,h=this.sizerChildren,a=!1;if(this.childrenProportion,this.orientation===0)for(var u=0,l=h.length;u<l;u++)(t=h[u]).hasOwnProperty("rexSizer")&&((n=t.rexSizer).hidden||((i=this.getChildHeight(t))===void 0&&(a=!0),a||(i+=((o=n.padding).top+o.bottom)*this.scaleY,r=Math.max(i,r))));else{var d=!0;for(u=0,l=h.length;u<l;u++)(t=h[u]).hasOwnProperty("rexSizer")&&((n=t.rexSizer).hidden||((s=n.proportion)===0||e?(i=this.getChildHeight(t),n.fitRatio>0&&!n.resolved&&(i=void 0),i===void 0&&(s===0||this.hasProportion0Child?a=!0:i=0)):i=0,a||(i+=((o=n.padding).top+o.bottom)*this.scaleY,d?d=!1:i+=this.space.item*this.scaleY,r+=i)))}return a?void 0:r+(this.space.top+this.space.bottom)*this.scaleY},getExpandedChildWidth:function(e,t){var n;t===void 0&&(t=this.width*this.scaleX);var s=e.rexSizer;if(this.orientation===0)s.proportion>0&&this.proportionLength>0&&(n=s.proportion*this.proportionLength);else if(s.expand){var o=this.space,i=t-(o.left+o.right)*this.scaleX,r=s.padding;n=i-(r.left+r.right)*this.scaleX}return n},getExpandedChildHeight:function(e,t){var n;t===void 0&&(t=this.height);var s=e.rexSizer;if(this.orientation===0){if(s.expand){var o=this.space,i=t-(o.top+o.bottom)*this.scaleY,r=s.padding;n=i-(r.top+r.bottom)*this.scaleY}}else s.proportion>0&&this.proportionLength>0&&(n=s.proportion*this.proportionLength);return n},getChildrenSizers:function(e){e===void 0&&(e=[]);for(var t,n=this.sizerChildren,s=0,o=n.length;s<o;s++)(t=n[s]).isRexSizer&&e.push(t);return e},preLayout:function(){var e,t;this.hasRatioFitChild=!1;for(var n=this.sizerChildren,s=0,o=n.length;s<o;s++)(t=(e=n[s]).rexSizer).hidden||t.fitRatio>0&&(ae(e,0,0),t.resolved=!1,this.hasRatioFitChild=!0);return this._childrenProportion=void 0,this.hasProportion0Child=!1,this.proportionLength=void 0,Hr.call(this),this},layoutChildren:function(){for(var e,t,n,s,o,i,r,h,a,u,l,d,c=this.sizerChildren,p=this.innerLeft,f=this.innerTop,v=this.innerWidth,g=this.innerHeight,y=p,m=f,x=this.startChildIndex,b=0,w=c.length;b<w;b++)d=x===0?b:pP(b+x,0,w),this.rtl&&(d=w-d-1),(e=c[d]).rexSizer.hidden||(n=(t=e.rexSizer).padding,Kr.call(this,e),e.isRexSpace?(u=0,l=0):(u=this.getExpandedChildWidth(e),l=this.getExpandedChildHeight(e)),e.isRexSizer?(e.runLayout(this,u,l),Ou(e,this)):ae(e,u,l),u===void 0&&(u=bt(e)),l===void 0&&(l=Tt(e)),this.orientation===0?(s=y+n.left*this.scaleX,i=t.proportion===0||this.proportionLength===0?u:t.proportion*this.proportionLength,o=m+n.top*this.scaleY,r=g-(n.top+n.bottom)*this.scaleY):(s=y+n.left*this.scaleX,i=v-(n.left+n.right)*this.scaleX,o=m+n.top*this.scaleY,r=t.proportion===0||this.proportionLength===0?l:t.proportion*this.proportionLength),u===void 0&&(u=bt(e)),l===void 0&&(l=Tt(e)),h=(t.alignOffsetX+t.alignOffsetOriginX*u)*this.scaleX,a=(t.alignOffsetY+t.alignOffsetOriginY*l)*this.scaleY,qr.call(this,e,s,o,i,r,t.align,h,a),this.orientation===0?y+=i+(n.left+n.right)*this.scaleX+this.space.item*this.scaleX:m+=r+(n.top+n.bottom)*this.scaleY+this.space.item*this.scaleY)},resolveWidth:function(e){if((e=fu.call(this,e))!==void 0&&this.orientation===0&&this.proportionLength===void 0){var t=e-this.childrenWidth;t>0?(t=e-this.getChildrenWidth(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return e},resolveHeight:function(e){if((e=mu.call(this,e))!==void 0&&this.orientation===1&&this.proportionLength===void 0){var t=e-this.childrenHeight;t>0?(t=e-this.getChildrenHeight(!1),this.proportionLength=t/this.childrenProportion):this.proportionLength=0}return e},hasWidthWrap:function(){return!(!this.hasRatioFitChild||this.orientation!==1)||pu.call(this)},runWidthWrap:function(e){this.wrapResult||(this.orientation===1&&Cf.call(this,e,void 0),gu.call(this,e))},hasHeightWrap:function(){return!(!this.hasRatioFitChild||this.orientation!==0)||vu.call(this)},runHeightWrap:function(e){this.wrapResult||(this.orientation===0&&Cf.call(this,void 0,e),yu.call(this,e))},setChildrenAlignMode:function(e){e===void 0&&(e="left");var t=this.sizerChildren,n=t[0],s=n&&n.isRexSpace;e==="right"||e==="bottom"||e==="center"?s||this.insertSpace(0):s&&this.remove(n,!0);var o=t.length-1,i=t[o],r=i&&i.isRexSpace;return e==="center"?r||this.insertSpace(o+1):r&&this.remove(i,!0),this}};Object.assign(hv,xP,TP,wP,SP,CP,Mu);var EP=function(){for(var e,t,n=0,s=this.sizerChildren,o=0,i=s.length;o<i;o++)(e=s[o]).rexSizer.hidden||((t=e.rexSizer.proportion)>0?n+=t:t===0&&(this.hasProportion0Child=!0));return n};const sl=Phaser.Utils.Objects.IsPlainObject,Le=Phaser.Utils.Objects.GetValue;class pt extends Us{constructor(t,n,s,o,i,r,h){sl(n)?(n=Le(h=n,"x",0),s=Le(h,"y",0),o=Le(h,"width",void 0),i=Le(h,"height",void 0),r=Le(h,"orientation",0)):sl(o)?(o=Le(h=o,"width",void 0),i=Le(h,"height",void 0),r=Le(h,"orientation",0)):sl(r)&&(r=Le(h=r,"orientation",0)),r===void 0&&(r=0),super(t,n,s,o,i,h),this.type="rexSizer",this.sizerChildren=[],this.setOrientation(r),this.setItemSpacing(Le(h,"space.item",0)),this.setStartChildIndex(Le(h,"startChildIndex",0)),this.setRTL(Le(h,"rtl",!1)),this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Ys(t),this}setItemSpacing(t){return this.space.item=t,this}setStartChildIndex(t){return this.startChildIndex=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get childrenProportion(){return this._childrenProportion===void 0&&(this._childrenProportion=EP.call(this)),this._childrenProportion}}Object.assign(pt.prototype,hv);var Na=function(e,t,n){if(e){var s=t==null,o=n==null;return s&&o||(s||(e.displayWidth=t),o||(e.displayHeight=n),s&&(e.scaleX=e.scaleY),o&&(e.scaleY=e.scaleX)),e}},PP={appendText:bg,resetDisplayContent:function(e){e===void 0?e={}:typeof e=="string"&&(e={text:e});var t=e.text||"";this.setText(t);var n=this.childrenMap.icon;if(n){e.icon?this.show(n):this.hide(n);var s=e.iconSize;s&&(this.setChildDisplaySize(n,s,s),this.iconWidth!==void 0&&this.setIconSize(s)),e.icon!==!0&&this.setIconTexture(e.icon,e.iconFrame)}var o=this.childrenMap.action;if(o){e.action?this.show(o):this.hide(o);var i=e.actionSize;i&&(this.setChildDisplaySize(o,i,i),this.actionWidth!==void 0&&this.setActionSize(i)),e.action!==!0&&this.setActionTexture(e.action,e.actionFrame)}return this}};class lv extends pt{get text(){var t=this.childrenMap.text;return t?t.text:""}set text(t){var n=this.childrenMap.text;n&&n.setText(t)}setText(t){return this.text=t,this}setIconTexture(t,n){var s=this.childrenMap.icon;return s&&s.setTexture?(s.setTexture(t,n),this.iconWidth!==void 0&&this.iconHeight!==void 0&&(Na(s,this.iconWidth,this.iconHeight),this.resetChildScaleState(s)),this):this}setTexture(t,n){return this.setIconTexture(t,n),this}setIconSize(t,n){return n===void 0&&(n=t),this.iconWidth=t,this.iconHeight=n,this}get texture(){var t=this.childrenMap.icon;if(t)return t.texture}get frame(){var t=this.childrenMap.icon;if(t)return t.frame}setActionTexture(t,n){var s=this.childrenMap.action;return s&&s.setTexture?(s.setTexture(t,n),this.actionWidth!==void 0&&this.actionHeight!==void 0&&(Na(s,this.actionWidth,this.actionHeight),this.resetChildScaleState(s)),this):this}get actionTexture(){var t=this.childrenMap.action;if(t)return t.texture}get actionFrame(){var t=this.childrenMap.action;if(t)return t.frame}setActionSize(t,n){return n===void 0&&(n=t),this.actionWidth=t,this.actionHeight=n,this}preLayout(){var t=this.childrenMap.icon;t&&this.iconWidth!==void 0&&this.iconHeight!==void 0&&Na(t,this.iconWidth,this.iconHeight);var n=this.childrenMap.action;n&&this.actionWidth!==void 0&&this.actionHeight!==void 0&&Na(n,this.actionWidth,this.actionHeight),super.preLayout()}postLayout(t,n,s){var o=this.childrenMap.iconMask;o&&(o.setPosition(),this.resetChildPositionState(o));var i=this.childrenMap.actionMask;return i&&(i.setPosition(),this.resetChildPositionState(i)),super.postLayout(t,n,s),this}resize(t,n){super.resize(t,n);var s=this.childrenMap.iconMask;s&&s.resize();var o=this.childrenMap.actionMask;return o&&o.resize(),this}}Object.assign(lv.prototype,PP);var Dn=function(e,t,n,s){var o=new ko(t,n,s);if(e&&!e.isRexSizer){var i=o.createGeometryMask();e.setMask(i),this.once("destroy",function(){e.setMask(),i.destroy()})}return this.pin(o),o};const OP=Phaser.GameObjects.Text;var _u=function(e){return e instanceof OP};const kP=Phaser.GameObjects.BitmapText;var uv=function(e){return e instanceof kP},Is=function(e){return uv(e)?2:_u(e)?0:1},MP=function(e,t){for(var n=[],s=e.split(`
`),o=t.style,i=o.wordWrapWidth,r=o.hasOwnProperty("wrapMode")?o.wrapMode:3,h=t.context,a=0,u=s.length;a<u;a++)_P(h,s[a],i,r,n);return n},_P=function(e,t,n,s,o){if(t.length<=100&&e.measureText(t).width<=n)return o.push(t),o;for(var i,r,h=function(c,p){var f;if(p===2)f=c.split("");else{f=[];for(var v,g=c.split(" "),y=0,m=g.length;y<m;y++)v=g[y],y<m-1?Mr(v)?f.push(v+" "):(f.push(...v.split("")),f.push(" ")):v!==""&&(Mr(v)?f.push(v):f.push(...v.split("")))}return f}(t,s),a=[],u=n,l=0,d=h.length;l<d;l++)i=h[l],(u-=r=e.measureText(i).width)<0&&(o.push(a.join("")),a.length=0,u=n-r),a.push(i);return a.length>0&&o.push(a.join("")),o},Pf=function(e,t,n){if(t==null)return e;if(t===0)return nl(e,0,n),e;var s=e.text.length;if(s===0)return nl(e,t,n),e;var o=Math.floor(1.5*t/s);n!==void 0&&o>n&&(o=Math.floor(n));for(var i={},r=kf(e,o,t,n,i),h=0;h<=65535&&r!==0;h++){if((o+=r)<0){o=0;break}r=kf(e,o,t,n,i)}return h===65535&&console.warn("FontSizeFit: Test count exceeds 65535"),e.setFontSize(o),nl(e,t,n),e},Of=function(e,t,n){return n[t]===void 0&&(e.setFontSize(t),n[t]={width:e.width,height:e.height}),n[t]},kf=function(e,t,n,s,o){var i,r=Of(e,t,o),h=Of(e,t+1,o);if(s!==void 0)if(r.height<=s&&h.height>s)i=0;else{if(r.height>s)return-1;i=Math.floor(s-r.height)}if(r.width<=n&&h.width>n)return 0;if(r.width>n)return-1;var a=Math.floor(n-r.width);return i===void 0?a:Math.min(a,i)},nl=function(e,t,n){var s=e.style;s&&(s.fixedWidth=t,s.parent.width=t,n!==void 0&&(s.fixedHeight=n,s.parent.height=n),s.update(!1))};const rl=Phaser.Utils.Objects.GetValue,mt=Phaser.Utils.Objects.GetValue;class Ws extends lv{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexLabel";var s,o,i,r=mt(n,"background",void 0),h=mt(n,"icon",void 0),a=mt(n,"iconMask",void 0),u=mt(n,"text",void 0),l=mt(n,"action",void 0),d=mt(n,"actionMask",void 0),c=mt(n,"align",void 0);if(r&&this.addBackground(r),h){this.orientation===0?(u||l)&&(i={right:mt(n,"space.icon",0),top:mt(n,"space.iconTop",0),bottom:mt(n,"space.iconBottom",0),left:mt(n,"space.iconLeft",0)}):(u||l)&&(i={bottom:mt(n,"space.icon",0),left:mt(n,"space.iconLeft",0),right:mt(n,"space.iconRight",0),top:mt(n,"space.iconTop",0)});var p=mt(n,"squareFitIcon",!1)?1:0;if(this.add(h,{proportion:0,padding:i,fitRatio:p}),a&&(a=Dn.call(this,h,h,1)),!p){var f=mt(n,"iconSize",void 0);this.setIconSize(mt(n,"iconWidth",f),mt(n,"iconHeight",f))}}if(u){var v=mt(n,"wrapText",!1),g=mt(n,"adjustTextFontSize",!1);v?(v===!0&&(v="word"),function(S,C){switch(Is(S)){case 0:switch(typeof C=="string"&&(C=yo[C]||0),S.style.wrapMode=C,C){case 2:case 3:S.style.wordWrapCallback=MP;break;default:S.style.wordWrapCallback=null}break;case 1:typeof C=="string"&&(C=yo[C]||0),S.style.wrapMode=C}}(u,v),n.expandTextWidth=!0,o===void 0&&(o=0),(s=u)._minWidth=o,s.runWidthWrap=s instanceof Fo?function(S){return function(C){return S.setFixedSize(C,0).runWordWrap(),S.minHeight=S.height,S}}(s):uv(s)?function(S){return function(C){return S.setMaxWidth(C),S.minHeight=S.height,S}}(s):function(S){return function(C){var E=S.padding,M=C-(E.left+E.right)*S.scaleX,_=S.style;return _u(S)?(_.wordWrapWidth=M,_.maxLines=0):(_.wrapMode===0&&(_.wrapMode=1),_.wrapWidth=M,_.maxLines=0),_.fixedWidth=C,_.fixedHeight=0,S.updateText(),S.minHeight=S.height,S}}(s)):g&&(n.expandTextWidth=!0,n.expandTextHeight=!0,function(S,C){typeof C=="number"&&(C={minWidth:C});var E=rl(C,"minWidth",0),M=rl(C,"minHeight",0),_=rl(C,"fitHeight",!1);S._minWidth=E,S._minHeight=M,_?(S.runWidthWrap=function(O){return S.setFixedSize&&S.setFixedSize(0,0),S.setFontSize(1),S},S.resize=function(O,k){return Pf(S,O,k),S}):(S.runWidthWrap=function(O){return S.setFixedSize&&S.setFixedSize(0,0),Pf(S,O,void 0),S},S.resize=function(O,k){return S.width===O&&S.height===k||S.setFixedSize(O,k),S})}(u,{fitHeight:!0}));var y,m,x=mt(n,"space.text",0),b=mt(n,"expandTextWidth",!1),w=mt(n,"expandTextHeight",!1);this.orientation===0?(y=b?1:0,l&&(i={right:x}),m=w):(y=w?1:0,l&&(i={bottom:x}),m=b),this.add(u,{proportion:y,expand:m,padding:i})}if(l&&(i=this.orientation===0?{top:mt(n,"space.actionTop",0),bottom:mt(n,"space.actionBottom",0),right:mt(n,"space.actionRight",0)}:{left:mt(n,"space.actionLeft",0),right:mt(n,"space.actionRight",0),bottom:mt(n,"space.actionBottom",0)},p=mt(n,"squareFitAction",!1)?1:0,this.add(l,{proportion:0,padding:i,fitRatio:p}),d&&(d=Dn.call(this,l,l,1)),!p)){var T=mt(n,"actionSize");this.setActionSize(mt(n,"actionWidth",T),mt(n,"actionHeight",T))}this.setChildrenAlignMode(c),this.addChildrenMap("background",r),this.addChildrenMap("icon",h),this.addChildrenMap("iconMask",a),this.addChildrenMap("text",u),this.addChildrenMap("action",l),this.addChildrenMap("actionMask",d)}}const $i=Phaser.Utils.Objects.GetValue;var AP=function(e,t){var n=$i(t,"canvas"),s=$i(n,"width",128),o=$i(n,"height",128),i=new Gr(e,0,0,s,o);e.add.existing(i);var r=$i(n,"key"),h=$i(n,"frame"),a=$i(n,"fill");return a!==void 0?i.fill(a):r!==void 0&&i.loadTexture(r,h),i.setTexture=i.loadTexture.bind(i),i};const RP=Phaser.Utils.Objects.GetValue;var Mf=function(e,t){var n=RP(t,"clickTarget",this);return typeof n=="string"&&(n=e.getElement(n)),n};const LP=Phaser.Utils.Objects.GetValue,_f=Phaser.Utils.Objects.GetValue;var dv=function({game:e,fileInput:t,closeDelay:n}){return uu(Mn(e).events,"focus").then(function(){return(s=n)===void 0&&(s=0),new Promise(function(o,i){setTimeout(function(){o(void 0)},s)});var s}).then(function(){var s={files:t.files};return Promise.resolve(s)})};const DP=Phaser.Utils.Objects.GetValue,FP=Phaser.DOM.RemoveFromDOM;var Au=function(e,t){if(this.scene.sys.scale.autoRound&&(e=Math.floor(e),t=Math.floor(t)),this.width===e&&this.height===t)return this;var n=this.node.style;return n.width=`${e}px`,n.height=`${t}px`,this.updateSize(),this},cv=function(e){return this.setOrigin(e.originX,e.originY),this.setPosition(e.x,e.y),this.resize(e.displayWidth,e.displayHeight),this},Af=function(e,t,n,s,o,i){if(!(o===null||o===!1))if(ti(o))o();else{var r=function(u,l,d){if(d===void 0)switch(l){case"image":case"svg":d="textures";break;case"animation":d="json";break;case"tilemapTiledJSON":case"tilemapCSV":d="tilemap";break;case"glsl":d="shader";break;default:d=l}return u=Mn(u),d==="textures"?u.textures:u.cache[d]}(e,n,o);r.exists(s)&&r.remove(s)}var h=e.load;if(i&&h.once(`filecomplete-${n}-${s}`,function(u,l,d){i(d)}),ti(t))t();else{var a=window.URL.createObjectURL(t);h[n](s,a)}h.start()};const fv={loadFile:function(e,t,n,s,o){var i=this.scene;return Af(i,e,t,n,s,o),this},loadFilePromise:function(e,t,n,s){var o=this.scene;return new Promise(function(i,r){Af(o,e,t,n,s,function(h){i(h)})})}},BP=Phaser.GameObjects.DOMElement,Rf=Phaser.Utils.Objects.IsPlainObject,ai=Phaser.Utils.Objects.GetValue;class Ru extends BP{constructor(t,n,s,o,i,r){Rf(n)?(n=ai(r=n,"x",0),s=ai(r,"y",0),o=ai(r,"width",0),i=ai(r,"height",0)):Rf(o)&&(o=ai(r=o,"width",0),i=ai(r,"height",0));var h=document.createElement("input");h.type="file",h.style.display="none";var a=document.createElement("label");a.appendChild(h);var u=ai(r,"style",void 0);super(t,n,s,a,u),this.type="rexFileChooser",this.resetFromJSON(r),this.resize(o,i);var l=this;h.onchange=function(){l.emit("change",l)},this.setCloseDelay(ai(r,"closeDelay",200)),h.onclick=function(){dv({game:t,fileInput:h,closeDelay:l.closeDelay}).then(function(){l.emit("select",l)})}}resetFromJSON(t){return this.setAccept(ai(t,"accept","")),this.setMultiple(ai(t,"multiple",!1)),this}setAccept(t){return t===void 0&&(t=""),this.fileInput.setAttribute("accept",t),this}setMultiple(t){return t===void 0&&(t=!0),t?this.fileInput.setAttribute("multiple",""):this.fileInput.removeAttribute("multiple"),this}setCloseDelay(t){return t===void 0&&(t=200),this.closeDelay=t,this}get fileInput(){return this.node.children[0]}open(){return this.fileInput.click(),this}get files(){return this.fileInput.files}setOpenEnable(t){return t===void 0&&(t=!0),this.fileInput.disabled=!t,this}}var IP={resize:Au,syncTo:cv};Object.assign(Ru.prototype,IP,fv);const pv={accept:"image/*",multiple:!1};var gv=function(e,t){if(t.length!==0){var n=e.childrenMap.icon,s=n.image,o=t[0];return s.loadFromFilePromise(o).then(function(){return n.scaleImage(),e.emit("select",o,e),Promise.resolve(o)})}};const XP={async openPromise(){var e,t,n,s,o=this;return(e=this.scene.game,t=pv,n=DP(t,"closeDelay",200),s=function(i,r){var h=document.createElement("input");h.type="file";var a=_f(r,"accept",""),u=_f(r,"multiple",!1);return h.setAttribute("accept",a),u?h.setAttribute("multiple",""):h.removeAttribute("multiple"),h}(0,t),s.click(),dv({game:e,fileInput:s,closeDelay:n}).then(function(i){return FP(s),s.remove(),Promise.resolve(i)})).then(function(i){return gv(o,i.files)})},open(){return this.openPromise(),this},setClickOpenEnable(e){return e===void 0&&(e=!0),this.clickBehavior&&this.clickBehavior.setEnable(e),this.fileChooser&&this.fileChooser.setOpenEnable(e),this}};var mv={getFileName:function(e){if(!e)return null;var t=e.name;return t.substr(0,t.lastIndexOf("."))},saveTexture:function(e){return this.childrenMap.canvas.generateTexture(e),this}};Object.assign(mv,XP);const zP=Phaser.Utils.Objects.GetValue;Object.assign((class extends Ws{constructor(e,t){var n=function(i,r){var h=new av(i,{scaleUp:$i(r,"scaleUpIcon",!1),background:$i(r,"iconBackground"),image:AP(i,r)});return i.add.existing(h),h}(e,t);t.icon=n,super(e,t),this.type="rexImageFileInputLabel";var s=this.iconWidth,o=this.iconWidth;s!==void 0&&o!==void 0&&n.resize(s,o),this.clickTarget=Mf(this,t),this.clickTarget&&(zP(t,"domButton",!0)?this.fileChooser=function(i){var r=i.scene,h=new Ru(r,pv);return r.add.existing(h),i.pin(h),h.on("change",function(){gv(i,h.files)}),h}(this):this.clickBehavior=function(i,r){var h=Mf(i,r);if(h){var a=LP(r,"click"),u=new Nr(h,a);return u.on("click",i.open,i),u}}(this,t)),this.addChildrenMap("canvas",n.image),this.addChildrenMap("iconBackground",n.background),this.addChildrenMap("fileChooser",this.fileChooser)}postLayout(e,t,n){this.fileChooser&&(this.fileChooser.syncTo(this.clickTarget),this.resetChildState(this.fileChooser)),super.postLayout(e,t,n)}}).prototype,mv);const Lf={id:["id",void 0],text:["value",void 0],maxLength:["maxLength",void 0],minLength:["minLength",void 0],placeholder:["placeholder",void 0],tooltip:["title",void 0],readOnly:["readOnly",!1],spellCheck:["spellcheck",!1],autoComplete:["autocomplete","off"],autoCapitalize:["autocapitalize","off"]},Df={align:["textAlign",void 0],paddingLeft:["padding-left",void 0],paddingRight:["padding-right",void 0],paddingTop:["padding-top",void 0],paddingBottom:["padding-bottom",void 0],fontFamily:["fontFamily",void 0],fontSize:["font-size",void 0],color:["color","#ffffff"],backgroundColor:["backgroundColor","transparent"],border:["border",0],borderColor:["borderColor","transparent"],borderRadius:["border-radius",void 0],outline:["outline","none"],direction:["direction",void 0]},YP={input:"textchange",click:"click",dblclick:"dblclick",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",keydown:"keydown",keyup:"keyup",keypress:"keypress",compositionstart:"compositionStart",compositionend:"compositionEnd",compositionupdate:"compositionUpdate",focus:"focus",blur:"blur",select:"select"},Ff=Phaser.Utils.Objects.GetValue;var vv=function(e,t,n,s){var o=Ff(s,"preventDefault",!1),i=Ff(s,"preTest");for(let r in n)t.addEventListener(r,function(h){i&&!i(e,r)||e.emit(n[r],e,h),o&&h.preventDefault()})};const NP=Phaser.GameObjects.DOMElement,Bf=Phaser.Utils.Objects.IsPlainObject,oi=Phaser.Utils.Objects.GetValue;class yv extends NP{constructor(t,n,s,o,i,r){var h;Bf(n)?(n=oi(r=n,"x",0),s=oi(r,"y",0),o=oi(r,"width",0),i=oi(r,"height",0)):Bf(o)&&(o=oi(r=o,"width",0),i=oi(r,"height",0)),r===void 0&&(r={});var a=oi(r,"inputType",void 0);a===void 0&&(a=oi(r,"type","text")),a==="textarea"?(h=document.createElement("textarea")).style.resize="none":(h=document.createElement("input")).type=a,bo(Lf,r,h);var u=oi(r,"style",void 0);u=bo(Df,r,u);var l=h.style;for(var d in r)if(!(d in Lf)&&!(d in Df)){if(d in l)u[d]=r[d];else if(d in h){if(d==="type")continue;h[d]=r[d]}}u["box-sizing"]="border-box",super(t,n,s,h,u),this.type="rexInputText",this.resize(o,i),vv(this,h,YP),vm(h),oi(r,"selectAll",!1)&&this.selectAll(),this._isFocused=!1,this.on("focus",function(){this._isFocused=!0},this).on("blur",function(){this._isFocused=!1},this)}get inputType(){return this.node.tagName.toLowerCase()==="textarea"?"textarea":this.node.type}get text(){return this.node.value}set text(t){this.node.value=t}setText(t){return this.text=t,this}get maxLength(){return this.node.maxLength}set maxLength(t){this.node.maxLength=t}setMaxLength(t){return this.maxLength=t,this}get minLength(){return this.node.minLength}set minLength(t){this.node.minLength=t}setMinLength(t){return this.minLength=t,this}get placeholder(){return this.node.placeholder}set placeholder(t){this.node.placeholder=t}setPlaceholder(t){return this.placeholder=t,this}selectText(t,n){return t===void 0?this.node.select():this.node.setSelectionRange(t,n),this}selectAll(){return this.selectText(),this}get selectionStart(){return this.node.selectionStart}get selectionEnd(){return this.node.selectionEnd}get selectedText(){var t=this.node;return t.value.substring(t.selectionStart,t.selectionEnd)}get cursorPosition(){return this.node.selectionStart}set cursorPosition(t){this.node.setSelectionRange(t,t)}setCursorPosition(t){return t===void 0?t=this.text.length:t<0&&(t=this.text.length+t),this.cursorPosition=t,this}get tooltip(){return this.node.title}set tooltip(t){this.node.title=t}setTooltip(t){return this.tooltip=t,this}setTextChangedCallback(t){return this.onTextChanged=t,this}get readOnly(){return this.node.readOnly}set readOnly(t){this.node.readOnly=t}setReadOnly(t){return t===void 0&&(t=!0),this.readOnly=t,this}get spellCheck(){return this.node.spellcheck}set spellCheck(t){this.node.spellcheck=t}setSpellCheck(t){return this.spellCheck=t,this}get fontColor(){return this.node.style.color}set fontColor(t){this.node.style.color=t}setFontColor(t){return this.fontColor=t,this}setStyle(t,n){return this.node.style[t]=n,this}getStyle(t){return this.node.style[t]}scrollToBottom(){return this.node.scrollTop=this.node.scrollHeight,this}setEnabled(t){return t===void 0&&(t=!0),this.node.disabled=!t,this}setBlur(){return this.node.blur(),this}setFocus(){return this.node.focus(),this}get isFocused(){return this._isFocused}}var GP={resize:Au};Object.assign(yv.prototype,GP);const UP={setDropEnable(e){return e===void 0&&(e=!0),this.dropEnable=e,this},toggleDropEnable(){return this.dropEnable=!this.dropEnable,this}},WP={addFilter(e,t){return this.filters||(this.filters={}),this.filters[e]=t,this},addFilters(e){for(var t in this.filters||(this.filters={}),e)this.filters[t]=e[t];return this}};var xv={resize:Au,syncTo:cv};Object.assign(xv,UP,WP,fv);const VP={dragenter:"dragenter",dragleave:"dragleave",dragover:"dragover",drop:"drop"},jP=Phaser.GameObjects.DOMElement,If=Phaser.Utils.Objects.IsPlainObject,Oi=Phaser.Utils.Objects.GetValue;Object.assign((class extends jP{constructor(e,t,n,s,o,i){If(t)?(t=Oi(i=t,"x",0),n=Oi(i,"y",0),s=Oi(i,"width",0),o=Oi(i,"height",0)):If(s)&&(s=Oi(i=s,"width",0),o=Oi(i,"height",0)),i===void 0&&(i={});var r=document.createElement("div");super(e,t,n,r,Oi(i,"style",void 0)),this.type="rexFileDropZone",this.resize(s,o),this._files=[],this.setDropEnable(Oi(i,"dropEnable",!0));var h=Oi(i,"filters");h&&this.addFilters(h),vv(this,r,VP,{preventDefault:!0,preTest:a=>a.dropEnable}),this.on("drop",function(a,u){this._files=u.dataTransfer.files;var l=this._files;if(l&&this.filters)for(var d in this.filters){for(var c=this.filters[d],p=[],f=0,v=l.length;f<v;f++){var g=l[f];c(g,l)&&p.push(g)}p.length>0&&this.emit(`drop.${d}`,p)}},this)}get files(){return this._files}}).prototype,xv);const al=Phaser.Utils.Objects.GetValue;class HP extends Rt{constructor(t,n){super(t,n),this.style=al(n,"style",this);var s=al(n,"propertiesMap");this.activeStyle=ol(n,"active",s),this.hoverStyle=ol(n,"hover",s),this.disableStyle=ol(n,"disable",s),this.onModifyStyle=al(n,"onModifyStyle")}getStyle(t){return Io(this.style,t)}modifyStyle(t){for(var n in t)this.style[n]=t[n];return this.onModifyStyle&&this.onModifyStyle(this.parent,t),this}applyStyle(t){if(t){var n=this.getStyle(t);return zr(n,t)?void 0:(this.modifyStyle(t),n)}}setActiveState(t){return hl.call(this,"active",t),this}setHoverState(t){return hl.call(this,"hover",t),this}setDisableState(t){return hl.call(this,"disable",t),this}}var ol=function(e,t,n){var s=fo(e,t);if(n)for(var o in s)n.hasOwnProperty(o)&&(s[n[o]]=s[o],delete s[o]);return s},hl=function(e,t){t===void 0&&(t=!0);var n=`${e}State`,s=`${e}Style`,o=`${e}StyleSave`;this[n]!==t&&(this[n]=t,t?this[o]=this.applyStyle(this[s]):(this.applyStyle(this[o]),this[o]=void 0))};const Vs={addStyleManager(e){return this.styleManager=new HP(this,e),this},setActiveState(e){return this.styleManager.setActiveState(e),this},setHoverState(e){return this.styleManager.setHoverState(e),this},setDisableState(e){return this.styleManager.setDisableState(e),this}};class bv extends km{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("value")||(n.value=0),n.hasOwnProperty("hover.bar")||(n["hover.bar"]=!0),n.hasOwnProperty("easeDuration")||(n.easeDuration=200),n.hasOwnProperty("ease")||(n.ease="Quad"),gi(n,"easeValue.duration",n.easeDuration),gi(n,"easeValue.ease",n.ease),super(t,n),this.type="rexStatesBarRectangleShape",this.barState=!1,n.style=this,n.propertiesMap=KP,this.addStyleManager(n),delete n.style,delete n.propertiesMap}get bar(){return this.barState}set bar(t){t=!!t,this.barState!==t&&(this.barState=t,this.easeValueTo(this.barState?1:0))}}const KP={color:"trackColor",strokeColor:"trackStrokeColor",strokeWidth:"trackStrokeThickness"};Object.assign(bv.prototype,Vs);let qP=class extends Rt{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(yt(e,t))return e[t];var n=e.parent;return yt(n,t)?n[t]:void 0}set(e,t,n){return yt(e,t)?e[t]=n:yt(e.parent,t)&&(e.parent[t]=n),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get fontSize(){return this.parent.fontSize}set fontSize(e){this.parent.setFontSize(e)}get tint(){return this.parent.tintTopLeft}set tint(e){this.parent.setTint(e)}get letterSpacing(){return this.parent.letterSpacing}set letterSpacing(e){this.parent.setLetterSpacing(e)}get lineSpacing(){return this.parent.lineSpacing}set lineSpacing(e){this.parent.setLineSpacing(e)}};const $P=Phaser.GameObjects.BitmapText,xs=Phaser.Utils.Objects.GetValue;class Tv extends $P{constructor(t,n){n===void 0&&(n={});var s=xs(n,"x",0),o=xs(n,"y",0),i=xs(n,"font",""),r=xs(n,"fontSize",!1),h=xs(n,"align",0),a=xs(n,"tint");super(t,s,o,i,"",r,h),this.type="rexStatesBitmapText",a!==void 0&&this.setTint(a);var u=xs(n,"effects",!0);u&&Yn(this,u),this.style=new qP(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(Tv.prototype,Vs);let ZP=class extends Rt{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(yt(e,t))return e[t];var n=e.parent;return yt(n,t)?n[t]:void 0}set(e,t,n){return yt(e,t)?e[t]=n:yt(e.parent,t)&&(e.parent[t]=n),!0}get key(){return this.parent.texture.key}set key(e){this.parent.setTexture(e,this.frame)}get frame(){return this.parent.frame.name}set frame(e){this.parent.setFrame(e)}get scale(){return this.parent.scaleX}set scale(e){this.parent.setScale(e)}};const JP=Phaser.GameObjects.Image,ur=Phaser.Utils.Objects.GetValue;class Lu extends JP{constructor(t,n){n===void 0&&(n={}),super(t,ur(n,"x",0),ur(n,"y",0),ur(n,"key",""),ur(n,"frame",void 0)),this.type="rexStatesImage";var s=ur(n,"effects",!0);s&&Yn(this,s),this.style=new ZP(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(Lu.prototype,Vs);let QP=class extends Rt{constructor(e,t){return super(e),new Proxy(this,this)}get(e,t){if(yt(e,t))return e[t];var n=e.parent;return yt(n,t)?n[t]:void 0}set(e,t,n){return yt(e,t)?e[t]=n:yt(e.parent,t)&&(e.parent[t]=n),!0}get key(){return this.parent.textureKey}set key(e){this.key!==e&&this.parent.setBaseTexture(e,this.baseFrameName)}get frame(){return this.parent.baseFrameName}set frame(e){this.frame!==e&&this.parent.setBaseTexture(this.parent.textureKey,e)}};const tO=Phaser.Utils.Objects.GetValue;class Du extends og{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexStatesNinePatch";var s=tO(n,"effects",!0);s&&Yn(this,s),this.style=new QP(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(Du.prototype,Vs);class eO extends Rt{constructor(t,n){return super(t),new Proxy(this,this)}get(t,n){if(yt(t,n))return t[n];var s=t.parent;return yt(s,n)?s[n]:void 0}set(t,n,s){return yt(t,n)?t[n]=s:yt(t.parent,n)&&(t.parent[n]=s),!0}get key(){return this.parent.texture.key}set key(t){this.key!==t&&this.parent.setTexture(t,this.frame)}get frame(){return this.parent.frame.name}set frame(t){this.frame!==t&&this.parent.setFrame(t)}}const iO=Phaser.GameObjects.NineSlice,He=Phaser.Utils.Objects.GetValue;class Fu extends iO{constructor(t,n){n===void 0&&(n={}),super(t,He(n,"x",0),He(n,"y",0),He(n,"key",null),He(n,"frame",null),He(n,"width",0),He(n,"height",0),He(n,"leftWidth",0),He(n,"rightWidth",0),He(n,"topHeight",0),He(n,"bottomHeight",0)),this.type="rexStatesNineSlice";var s=He(n,"effects",!0);s&&Yn(this,s),this.style=new eO(this,n),n.style=this.style,this.addStyleManager(n),delete n.style}}Object.assign(Fu.prototype,Vs);class Bu extends zn{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexStatesRoundRectangleShape",n.style=this,n.propertiesMap=sO,this.addStyleManager(n),delete n.style,delete n.propertiesMap}}const sO={color:"fillColor",alpha:"fillAlpha",strokeWidth:"lineWidth"};Object.assign(Bu.prototype,Vs);const nO=Phaser.GameObjects.Text,ll=Phaser.Utils.Objects.GetValue;class wv extends nO{constructor(t,n){n===void 0&&(n={}),super(t,ll(n,"x",0),ll(n,"y",0),ll(n,"text",""),n),this.type="rexStatesText",n.style=this.style,n.onModifyStyle=function(s,o){var i=o.hasOwnProperty("fontStyle")||o.hasOwnProperty("fontSize")||o.hasOwnProperty("fontFamily");s.style.update(i)},this.addStyleManager(n),delete n.style}}Object.assign(wv.prototype,Vs);var rO={setChart:function(e){return window.Chart?(this.chart&&this.chart.destroy(),this.chart=new Chart(this.context,function(t,n){n===void 0&&(n={}),n.options===void 0&&(n.options={});var s=n.options;s.responsive=!1,s.maintainAspectRatio=!1,s.hasOwnProperty("devicePixelRatio")||(s.devicePixelRatio=1);var o=!1;s.animation===void 0?s.animation={}:s.animation===!1&&(o=!0,s.animation={});var i=s.animation;o&&(i.duration=0);var r=i.onProgress;i.onProgress=function(a){r&&r(a),t.needRedraw()};var h=i.onComplete;return i.onComplete=function(a){h&&h(a),t.needRedraw()},n}(this,e)),this):(console.error(`Can not find chartjs! Load chartjs in preload stage.
scene.load.script('chartjs', 'https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/Chart.min.js');`),this)},getChartDataset:function(e){if(this.chart!==void 0){if(typeof e!="string")return this.chart.data.datasets[e];for(var t,n=this.chart.data.datasets,s=0,o=n.length;s<o;s++)if((t=n[s]).label===e)return t}},getChartData:function(e,t){var n=this.getChartDataset(e);if(n!==void 0)return typeof t=="string"&&(t=this.chart.data.labels.indexOf(t))===-1?void 0:n.data[t]},setChartData:function(e,t,n){if(this.chart===void 0)return this;var s=this.getChartDataset(e);return typeof t=="string"&&(t=this.chart.data.labels.indexOf(t))===-1||(s.data[t]=n),this},updateChart:function(){return this.chart===void 0||this.chart.update(),this}};Object.assign((class extends Gr{constructor(e,t,n,s,o,i){super(e,t,n,s,o),this.type="rexChart",this.chart=void 0,i!==void 0&&this.setChart(i)}destroy(e){this.scene&&(this.chart&&(this.chart.destroy(),this.chart=void 0),super.destroy(e))}resize(e,t){if(e===this.width&&t===this.height)return this;if(super.resize(e,t),this.chart){var n=this.chart;n.height=this.canvas.height,n.width=this.canvas.width,n.aspectRatio=n.height?n.width/n.height:null,n.update()}return this}}).prototype,rO);var Xf=function(){return Array.prototype.reduce.call(arguments,aO,0)},aO=function(e,t){return e+t};const zf=Phaser.Utils.Objects.IsPlainObject,De=Phaser.Utils.Objects.GetValue,Yf=Phaser.Display.Align.CENTER;var Nf=function(e,t,n,s,o){if(typeof e=="number"||typeof t=="number"){if(e===void 0){for(var i=0;i<s;i++)if(!n[r=t*s+i])return r}else if(t===void 0){for(i=0;i<o;i++)if(!n[r=i*s+e])return r}else if(!n[r=t*s+e])return r}else if(t===!0){var r;for(i=0;i<s;i++)for(var h=0;h<o;h++)if(!n[r=h*s+i])return r}else{i=0;for(var a=n.length;i<a;i++)if(!n[i])return i}return null};const oO={add:function(e,t,n,s,o,i,r){var h,a,u,l;Vr.call(this,e),zf(t)&&(t=De(d=t,"column",void 0),n=De(d,"row",void 0),s=De(d,"align",Yf),o=De(d,"padding",0),i=De(d,"expand",!1),r=De(d,"key",void 0),h=De(d,"offsetX",0),a=De(d,"offsetY",0),u=De(d,"offsetOriginX",0),l=De(d,"offsetOriginY",0));var d,c=Nf(t,n,this.sizerChildren,this.columnCount,this.rowCount);if(c===null){if(typeof t=="number"&&typeof n=="number")return this;n===!0||typeof n=="number"?this.addEmptyColumn():this.addEmptyRow(),c=Nf(t,n,this.sizerChildren,this.columnCount,this.rowCount)}return typeof s=="string"&&(s=Nn[s]),s===void 0&&(s=Yf),o===void 0&&(o=0),i===void 0&&(i=!0),h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=0),(d=this.getSizerConfig(e)).align=s,d.padding=Ns(o),zf(i)?(d.expandWidth=De(i,"width",!1),d.expandHeight=De(i,"height",!1)):(d.expandWidth=i,d.expandHeight=i),d.alignOffsetX=h,d.alignOffsetY=a,d.alignOffsetOriginX=u,d.alignOffsetOriginY=l,this.sizerChildren[c]=e,r!==void 0&&this.addChildrenMap(r,e),this}};var kn=function(e,t,n,s){n===void 0&&(n=0),s===void 0&&(s=e.length-1);for(var o=n;o<=s;o++)e[o]=t;return e};const hO={remove(e,t){if(this.getParentSizer(e)!==this)return this;var n=this.sizerChildren.indexOf(e);return n!==-1&&(this.sizerChildren[n]=null),jr.call(this,e,t),this},removeAt(e,t,n){var s=this.getChildAt(e,t);return s&&this.remove(s,n),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--){var n=this.sizerChildren[t];n&&this.remove(n,e)}return this},clear(e){return kn(this.sizerChildren,null),No.call(this,e),this}},lO={setColumnSpace(e){if(this.space.column||(this.space.column=[]),this.space.column.length=this.columnCount-1,typeof e=="number")this.space.column0=e,kn(this.space.column,e);else{this.space.column0=e[0];for(var t=0,n=this.columnCount-1;t<n;t++)this.space.column[t]=e[t]||0}return this},setRowSpace(e){if(this.space.row||(this.space.row=[]),this.space.row.length=this.rowCount-1,typeof e=="number")this.space.row0=e,kn(this.space.row,e);else{this.space.row0=e[t];for(var t=0,n=this.rowCount-1;t<n;t++)this.space.row[t]=e[t]||0}return this},setIndentLeft(e,t){return this.space.indentLeftOdd=e,this.space.indentLeftEven=t,this},setIndentTop(e,t){return this.space.indentTopOdd=e,this.space.indentTopEven=t,this}},Gf=Phaser.Utils.Objects.GetValue;var Uf=function(e,t,n){t===void 0&&(t=this.rowProportions[0]||0),n===void 0&&(n=this.space.row0||0),this.rowCount+=1,this.gridCount+=this.columnCount;for(var s=[e*this.columnCount,0],o=0;o<this.columnCount;o++)s.push(null);return this.sizerChildren.splice.apply(this.sizerChildren,s),this.rowProportions.push(t),this.rowHeight.length+=1,this.space.row.splice(e,0,n),this},Wf=function(e,t,n){t===void 0&&(t=this.columnProportions[0]||0),n===void 0&&(n=this.space.column0||0),this.columnCount+=1,this.gridCount+=this.rowCount;for(var s=this.rowCount-1;s>=0;s--){var o=s*this.columnCount+e;this.sizerChildren.splice(o,0,null)}return this.columnProportions.push(t),this.columnWidth.length+=1,this.space.column.splice(e,0,n),this},Sv={getChildrenWidth:function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t,n,s,o,i,r=0,h=this.sizerChildren,a=!1;this.totalColumnProportions;for(var u=0;u<this.columnCount;u++){if(t=0,(i=this.columnProportions[u])===0||e){for(var l=0;l<this.rowCount;l++)(n=h[l*this.columnCount+u])&&(n.rexSizer.hidden||((o=this.getChildWidth(n))===void 0&&(i===0||this.hasColumnProportion0Child?a=!0:o=0),a||(o+=((s=n.rexSizer.padding).left+s.right)*this.scaleX,t=Math.max(t,o))));a||(r+=t)}a||e&&(this.columnWidth[u]=t)}if(!a){var d=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven);return r+Xf(this.space.left,d,...this.space.column,this.space.right)*this.scaleX}},getChildrenHeight:function(e){if(this.rexSizer.hidden)return 0;e===void 0&&(e=!0);var t,n,s,o,i,r=0,h=this.sizerChildren,a=!1;this.totalRowProportions;for(var u=0;u<this.rowCount;u++){if(t=0,(i=this.rowProportions[u])===0||e){for(var l=0;l<this.columnCount;l++)(n=h[u*this.columnCount+l])&&(n.rexSizer.hidden||((o=this.getChildHeight(n))===void 0&&(i===0||this.hasRowProportion0Child?a=!0:o=0),a||(o+=((s=n.rexSizer.padding).top+s.bottom)*this.scaleY,t=Math.max(t,o))));a||(r+=t)}a||e&&(this.rowHeight[u]=t)}if(!a){var d=Math.max(this.space.indentTopOdd,this.space.indentTopEven);return r+Xf(this.space.top,d,...this.space.row,this.space.bottom)*this.scaleY}},getExpandedChildWidth:function(e,t){var n,s=e.rexSizer;if(s.expandWidth){var o=s.padding;n=t-(o.left+o.right)*this.scaleX}return n},getExpandedChildHeight:function(e,t){var n,s=e.rexSizer;if(s.expandHeight){var o=s.padding;n=t-(o.top+o.bottom)*this.scaleY}return n},getChildrenSizers:function(e){e===void 0&&(e=[]);for(var t,n=this.sizerChildren,s=0,o=n.length;s<o;s++)(t=n[s])&&t.isRexSizer&&e.push(t);return e},preLayout:function(){return this._totalColumnProportions=void 0,this._totalRowProportions=void 0,this.hasColumnProportion0Child=!1,this.hasRowProportion0Child=!1,this.proportionWidthLength=void 0,this.proportionHeightLength=void 0,Hr.call(this),this},layoutChildren:function(){for(var e,t,n,s,o,i,r,h,a,u,l,d,c,p,f=this.innerLeft,v=this.innerTop,g=0;g<this.rowCount;g++){p=this.getRowHeight(g),s=f+(g%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX;for(var y=0;y<this.columnCount;y++)c=this.getColumnWidth(y),(e=this.getChildAt(y,g))&&!e.rexSizer.hidden?(Kr.call(this,e),l=this.getExpandedChildWidth(e,c),d=this.getExpandedChildHeight(e,p),e.isRexSizer?(e.runLayout(this,l,d),Ou(e,this)):ae(e,l,d),o=s+(n=(t=e.rexSizer).padding).left*this.scaleX,r=c-(n.left+n.right)*this.scaleX,i=v+(y%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY+n.top*this.scaleY,h=p-(n.top+n.bottom)*this.scaleY,l===void 0&&(l=bt(e)),d===void 0&&(d=Tt(e)),a=(t.alignOffsetX+t.alignOffsetOriginX*l)*this.scaleX,u=(t.alignOffsetY+t.alignOffsetOriginY*d)*this.scaleY,qr.call(this,e,o,i,r,h,t.align,a,u),s+=c+this.space.column[y]*this.scaleX):s+=c+this.space.column[y]*this.scaleX;v+=p+this.space.row[g]*this.scaleY}},resolveWidth:function(e){if((e=fu.call(this,e))!==void 0&&this.proportionWidthLength===void 0){var t=this.totalColumnProportions;if(t>0){var n=e-this.getChildrenWidth(!1);n>=0&&(this.proportionWidthLength=n/t)}else this.proportionWidthLength=0}return e},resolveHeight:function(e){if((e=mu.call(this,e))!==void 0&&this.proportionHeightLength===void 0){var t=this.totalRowProportions;if(t>0){var n=e-this.getChildrenHeight(!1);n>=0&&(this.proportionHeightLength=n/t)}else this.proportionHeightLength=0}return e},resolveChildrenWidth:function(e){var t,n,s,o;for(var i in this.sizerChildren)(t=this.sizerChildren[i])&&t.isRexSizer&&!t.ignoreLayout&&(o=this.getColumnWidth(parseInt(i)%this.columnCount),n=this.getExpandedChildWidth(t,o),(s=t.resolveWidth(n))===void 0&&(s=n),t.resolveChildrenWidth(s))},resolveChildrenHeight:function(e){var t,n,s,o;for(var i in this.sizerChildren)(t=this.sizerChildren[i])&&t.isRexSizer&&!t.ignoreLayout&&(o=this.getRowHeight(Math.floor(parseInt(i)/this.rowCount)),n=this.getExpandedChildHeight(t,o),(s=t.resolveHeight(n))===void 0&&(s=n),t.resolveChildrenHeight(s))},runWidthWrap:function(e){var t,n,s,o;for(var i in this.sizerChildren)!(t=this.sizerChildren[i])||t.isRexSizer&&t.ignoreLayout||!t.runWidthWrap||(o=this.getColumnWidth(parseInt(i)%this.columnCount),n=this.getExpandedChildWidth(t,o),t.isRexSizer&&(s=t.resolveWidth(n))===void 0&&(s=n),t.runWidthWrap(s));return this},runHeightWrap:function(e){var t,n,s,o;for(var i in this.sizerChildren)!(t=this.sizerChildren[i])||t.isRexSizer&&t.ignoreLayout||!t.runHeightWrap||(o=this.getRowHeight(Math.floor(parseInt(i)/this.rowCount)),n=this.getExpandedChildHeight(t,o),t.isRexSizer&&(s=t.resolveHeight(n))===void 0&&(s=n),t.runHeightWrap(s));return this},resetGrid:function(e,t,n,s,o){if(e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),this.columnCount=e,this.rowCount=t,this.gridCount=e*t,this.removeAll(),this.sizerChildren.length=e*t,kn(this.sizerChildren,null),this.columnProportions=[],this.columnProportions.length=e,typeof n=="number")kn(this.columnProportions,n);else for(var i=0;i<e;i++)this.columnProportions[i]=n[i]||0;if(this.rowProportions=[],this.rowProportions.length=t,typeof s=="number")kn(this.rowProportions,s);else for(i=0;i<t;i++)this.rowProportions[i]=s[i]||0;this.columnWidth=[],this.columnWidth.length=e,this.rowHeight=[],this.rowHeight.length=t,this.setColumnSpace(Gf(o,"column",0)),this.setRowSpace(Gf(o,"row",0));var r=this.scene,h=this.createCellContainerCallback;if(h)for(var a=0,u=this.rowCount;a<u;a++)for(var l=0,d=this.columnCount;l<d;l++){var c={column:l,row:a},p=h(r,l,a,c);p&&this.add(p,c)}return this},insertEmptyRow:Uf,addEmptyRow:function(e,t){return Uf.call(this,this.rowCount,e,t),this},insertEmptyColumn:Wf,addEmptyColumn:function(e,t){return Wf.call(this,this.columnCount,e,t),this}};Object.assign(Sv,oO,hO,lO,Mu);var uO=function(){for(var e,t=0,n=0;n<this.columnCount;n++)(e=this.columnProportions[n])>0?t+=e:e===0&&(this.hasColumnProportion0Child=!0);return t},dO=function(){for(var e,t=0,n=0;n<this.rowCount;n++)(e=this.rowProportions[n])>0?t+=e:e===0&&(this.hasRowProportion0Child=!0);return t};const Ga=Phaser.Utils.Objects.IsPlainObject,Et=Phaser.Utils.Objects.GetValue;class Bi extends Us{constructor(t,n,s,o,i,r,h,a,u,l){Ga(n)?(n=Et(l=n,"x",0),s=Et(l,"y",0),o=Et(l,"width",void 0),i=Et(l,"height",void 0),r=Et(l,"column",l.col||0),h=Et(l,"row",0),a=Et(l,"columnProportions",0),u=Et(l,"rowProportions",0)):Ga(o)?(o=Et(l=o,"width",void 0),i=Et(l,"height",void 0),r=Et(l,"column",l.col||0),h=Et(l,"row",0),a=Et(l,"columnProportions",0),u=Et(l,"rowProportions",0)):Ga(r)?(r=Et(l=r,"column",l.col||0),h=Et(l,"row",0),a=Et(l,"columnProportions",0),u=Et(l,"rowProportions",0)):Ga(a)&&(a=Et(l=a,"columnProportions",0),u=Et(l,"rowProportions",0)),super(t,n,s,o,i,l),this.type="rexGridSizer",this.sizerChildren=[],this.addChildrenMap("items",this.sizerChildren),this.setCreateCellContainerCallback(Et(l,"createCellContainerCallback")),this.setIndentLeft(Et(l,"space.indentLeftOdd",0),Et(l,"space.indentLeftEven",0)),this.setIndentTop(Et(l,"space.indentTopOdd",0),Et(l,"space.indentTopEven",0)),this.resetGrid(r,h,a,u,Et(l,"space",void 0))}destroy(t){this.scene&&!this.ignoreDestroy&&(super.destroy(t),this.columnProportions=void 0,this.rowProportions=void 0,this.columnWidth=void 0,this.rowHeight=void 0,this.createCellContainerCallback=void 0)}setColumnProportion(t,n){return t>=this.columnProportions.length||(this.columnProportions[t]=n),this}setRowProportion(t,n){return t>=this.rowProportions.length||(this.rowProportions[t]=n),this}get totalColumnProportions(){return this._totalColumnProportions===void 0&&(this._totalColumnProportions=uO.call(this)),this._totalColumnProportions}get totalRowProportions(){return this._totalRowProportions===void 0&&(this._totalRowProportions=dO.call(this)),this._totalRowProportions}getChildAt(t,n){return this.sizerChildren[n*this.columnCount+t]}childToGridIndex(t,n){if(!t)return null;var s=this.sizerChildren.indexOf(t);return s===-1?null:(n===void 0&&(n={}),n.x=s%this.columnCount,n.y=Math.floor(s/this.columnCount),n)}getColumnWidth(t){var n=this.columnProportions[t];return n===0?this.columnWidth[t]:n*this.proportionWidthLength}getRowHeight(t){var n=this.rowProportions[t];return n===0?this.rowHeight[t]:n*this.proportionHeightLength}setCreateCellContainerCallback(t){return this.createCellContainerCallback=t,this}}Object.assign(Bi.prototype,Sv);var ul=function(e,t,n,s){return t/e<=n?t/(s-1):0},Vf=function(e){var t,n,s,o,i,r={lines:[],width:0,height:0},h=this.sizerChildren,a=0,u=r.lines,l=void 0;if(this.orientation===0){for(var d=0,c=h.length;d<c;d++){if((t=h[d])===`
`)t=void 0,s=0,i=!0;else{if(t.rexSizer.hidden)continue;t.isRexSizer&&t.runLayout(this),s=this.getChildWidth(t),i=a<(s+=((n=t.rexSizer.padding).left+n.right)*this.scaleX)||l===void 0}i&&(l&&(l.width=e-(a+this.space.item*this.scaleX),r.width=Math.max(r.width,l.width),r.height+=l.height+this.space.line*this.scaleY),l={children:[],width:0,height:0},u.push(l),a=e-(u.length%2?this.space.indentLeftOdd:this.space.indentLeftEven)*this.scaleX),a-=s+this.space.item*this.scaleX,t&&(l.children.push(t),o=this.getChildHeight(t),o+=((n=t.rexSizer.padding).top+n.bottom)*this.scaleY,l.height=Math.max(l.height,o))}l&&(l.width=e-(a+this.space.item*this.scaleX),r.width=Math.max(r.width,l.width),r.height+=l.height),r.height+=Math.max(this.space.indentTopOdd,this.space.indentTopEven)*this.scaleY}else{var p=e;for(d=0,c=h.length;d<c;d++){if((t=h[d])===`
`)t=void 0,s=0,i=!0;else{if(t.rexSizer.hidden)continue;t.isRexSizer&&t.layout(),o=this.getChildHeight(t),i=a<(o+=((n=t.rexSizer.padding).top+n.bottom)*this.scaleY)||l===void 0}i&&(l&&(l.height=p-(a+this.space.item*this.scaleY),r.height=Math.max(r.height,l.height),r.width+=l.width+this.space.line*this.scaleX),l={children:[],width:0,height:0},u.push(l),a=p-(u.length%2?this.space.indentTopOdd:this.space.indentTopEven)*this.scaleY),a-=o+this.space.item*this.scaleY,t&&(l.children.push(t),s=this.getChildWidth(t),s+=((n=t.rexSizer.padding).left+n.right)*this.scaleX,l.width=Math.max(l.width,s))}l&&(l.height=p-(a+this.space.item*this.scaleY),r.height=Math.max(r.height,l.height),r.width+=l.width),r.width+=Math.max(this.space.indentLeftOdd,this.space.indentLeftEven)*this.scaleX}return r};const jf=Phaser.Math.Distance.Between;var cO=function(e,t){var n=this.sizerChildren;if(n.length===0)return-1;for(var s=-1,o=1/0,i=0,r=n.length;i<r;i++){var h=n[i];if(!(Math.abs(h.centerY-t)>h.height/2)){o>(a=jf(h.left,h.centerY,e,t))&&(o=a,s=i);var a,u=n[i+1];u&&u.y===h.y||o>(a=jf(h.right,h.centerY,e,t))&&(o=a,s=i+1)}}return s};const fO=Phaser.Utils.Objects.IsPlainObject,bs=Phaser.Utils.Objects.GetValue,pO=Phaser.Display.Align.CENTER;var dl=function(e,t,n,s){return e===`
`?(this.addNewLine(),this):(Vr.call(this,e),fO(t)&&(t=bs(a=t,"padding",0),n=bs(a,"key",void 0),s=bs(a,"index",void 0),o=bs(a,"offsetX",0),i=bs(a,"offsetY",0),r=bs(a,"offsetOriginX",0),h=bs(a,"offsetOriginY",0)),t===void 0&&(t=0),o===void 0&&(o=0),i===void 0&&(i=0),r===void 0&&(r=0),h===void 0&&(h=0),(a=this.getSizerConfig(e)).align=pO,a.padding=Ns(t),a.alignOffsetX=o,a.alignOffsetY=i,a.alignOffsetOriginX=r,a.alignOffsetOriginY=h,s===void 0||s>=this.sizerChildren.length?this.sizerChildren.push(e):this.sizerChildren.splice(s,0,e),n!==void 0&&this.addChildrenMap(n,e),this);var o,i,r,h,a};const gO={add(e,t,n){if(ei(e))for(var s=e,o=0,i=s.length;o<i;o++)dl.call(this,s[o],t);else dl.call(this,e,t,n);return this},addNewLine(){return this.sizerChildren.push(`
`),this},insert(e,t,n,s){return dl.call(this,t,n,s,e),this},insertAtPosition(e,t,n,s,o){var i=cO.call(this,e,t);return i===-1&&(i=void 0),this.insert(i,n,s,o),this}},mO=Phaser.Utils.Array.Remove,vO={remove(e,t){return this.getParentSizer(e)!==this||(mO(this.sizerChildren,e),jr.call(this,e,t)),this},removeAll(e){for(var t=this.sizerChildren.length-1;t>=0;t--)this.remove(this.sizerChildren[t],e);return this},clear(e){return this.sizerChildren.length=0,No.call(this,e),this}};var Cv={getChildrenWidth:function(e){return this.rexSizer.hidden?0:(e===void 0&&(e=!0),(t=this.orientation===0&&e?this.maxChildWidth:this.rexSizer.resolved?this.wrapResult.width:void 0)!==void 0?t+(this.space.left+this.space.right)*this.scaleX:void 0);var t},getChildrenHeight:function(e){return this.rexSizer.hidden?0:(e===void 0&&(e=!0),(t=this.orientation===1&&e?this.maxChildHeight:this.rexSizer.resolved?this.wrapResult.height:void 0)!==void 0?t+(this.space.top+this.space.bottom)*this.scaleY:void 0);var t},getChildrenSizers:function(e){e===void 0&&(e=[]);for(var t,n=this.sizerChildren,s=0,o=n.length;s<o;s++)(t=n[s])!==`
`&&t.isRexSizer&&e.push(t);return e},preLayout:function(){return this._maxChildWidth=void 0,this._maxChildHeight=void 0,this.wrapResult=void 0,this.rexSizer.resolved=!1,Hr.call(this),this},layoutChildren:function(){for(var e,t,n,s,o,i,r,h,a,u,l,d,c=this.orientation===0,p=c?this.innerWidth:this.innerHeight,f=0,v=this.innerLeft,g=this.innerTop,y=this.wrapResult.lines,m=v,x=g,b=0,w=y.length;b<w;b++){switch(l=(u=y[b]).children,this.rtl&&l.reverse(),c?m=v+(b%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX:x=g+(b%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY,d=p-(c?u.width:u.height),this.align){case 0:break;case 1:c?m+=d:x+=d;break;case 2:c?m+=d/2:x+=d/2;break;case 3:f=ul(p,d,this.justifyPercentage,l.length);break;case 4:(f=ul(p,d,this.justifyPercentage,l.length))===0&&(c?m+=d:x+=d);break;case 5:(f=ul(p,d,this.justifyPercentage,l.length))===0&&(c?m+=d/2:x+=d/2)}for(var T=!0,S=0,C=l.length;S<C;S++)(e=l[S]).rexSizer.hidden||(n=(t=e.rexSizer).padding,Kr.call(this,e),c?s=m+n.left*this.scaleX:o=x+n.top*this.scaleY,T?T=!1:c?s+=this.space.item*this.scaleX:o+=this.space.item*this.scaleY,i=bt(e),r=Tt(e),c?(o=x+(S%2?this.space.indentTopEven:this.space.indentTopOdd)*this.scaleY+n.top*this.scaleY,m=s+i+n.right*this.scaleX+f):(s=m+(S%2?this.space.indentLeftEven:this.space.indentLeftOdd)*this.scaleX+n.left*this.scaleX,x=o+r+n.top*this.scaleY+f),h=(t.alignOffsetX+t.alignOffsetOriginX*i)*this.scaleX,a=(t.alignOffsetY+t.alignOffsetOriginY*r)*this.scaleY,qr.call(this,e,s,o,i,r,t.align,h,a));c?x+=u.height+this.space.line*this.scaleY:m+=u.width+this.space.line*this.scaleX}},hasWidthWrap:function(){return this.orientation===0||pu.call(this)},runWidthWrap:function(e){if(!this.wrapResult&&this.orientation===0){var t=e-(this.space.left+this.space.right)*this.scaleX;this.wrapResult=Vf.call(this,t),this.rexSizer.resolved=!0,gu.call(this,e)}},hasHeightWrap:function(){return this.orientation===1||vu.call(this)},runHeightWrap:function(e){if(!this.wrapResult&&this.orientation===1){var t=e-(this.space.top+this.space.bottom)*this.scaleY;this.wrapResult=Vf.call(this,t),this.rexSizer.resolved=!0,yu.call(this,e)}},getExpandedChildWidth:function(e,t){},getExpandedChildHeight:function(e,t){}};Object.assign(Cv,gO,vO,Mu);var yO=function(e){e===void 0&&(e=this.sizerChildren);for(var t,n,s=0,o=!1,i=0,r=e.length;i<r;i++)(t=e[i])!==`
`&&((n=this.getChildWidth(t))===void 0&&(o=!0),o||(s=Math.max(n,s)));if(!o)return s},xO=function(e){e===void 0&&(e=this.sizerChildren);for(var t,n,s=0,o=!1,i=0,r=e.length;i<r;i++)(t=e[i])!==`
`&&((n=this.getChildHeight(t))===void 0&&(o=!0),o||(s=Math.max(n,s)));if(!o)return s};const Hf=Phaser.Utils.Objects.IsPlainObject,se=Phaser.Utils.Objects.GetValue;class Un extends Us{constructor(t,n,s,o,i,r){Hf(n)?(n=se(r=n,"x",0),s=se(r,"y",0),o=se(r,"width",void 0),i=se(r,"height",void 0)):Hf(o)&&(o=se(r=o,"width",void 0),i=se(r,"height",void 0)),super(t,n,s,o,i,r),this.type="rexFixWidthSizer",this.sizerChildren=[],this.runChildrenWrapFlag=!0,this.setOrientation(se(r,"orientation",0)),this.setItemSpacing(se(r,"space.item",0)),this.setLineSpacing(se(r,"space.line",0)),this.setIntentLeft(se(r,"space.indentLeftOdd",0),se(r,"space.indentLeftEven",0)),this.setIntentTop(se(r,"space.indentTopOdd",0),se(r,"space.indentTopEven",0)),this.setAlign(se(r,"align",0)),this.setJustifyPercentage(se(r,"justifyPercentage",.25)),this.setRTL(se(r,"rtl",!1)),this.wrapResult=void 0,this.addChildrenMap("items",this.sizerChildren)}setOrientation(t){return this.orientation=Ys(t),this}setItemSpacing(t){return this.space.item=t,this}setLineSpacing(t){return this.space.line=t,this}setIntentLeft(t,n){return this.space.indentLeftOdd=t,this.space.indentLeftEven=n,this}setIntentTop(t,n){return this.space.indentTopOdd=t,this.space.indentTopEven=n,this}setAlign(t){return typeof t=="string"&&(t=bO[t]),this.align=t,this}setJustifyPercentage(t){return this.justifyPercentage=t,this}setRTL(t){return t===void 0&&(t=!0),this.rtl=t,this}get maxChildWidth(){return this._maxChildWidth===void 0&&(this._maxChildWidth=yO.call(this)),this._maxChildWidth}get maxChildHeight(){return this._maxChildHeight===void 0&&(this._maxChildHeight=xO.call(this)),this._maxChildHeight}}const bO={left:0,top:0,right:1,bottom:1,center:2,justify:3,"justify-left":3,"justify-top":3,"justify-right":4,"justify-bottom":4,"justify-center":5};Object.assign(Un.prototype,Cv);const Kf=["alpha","tint","flipX","flipY"];var Iu=function(e,t){if(!t)return e;for(var n=0,s=Kf.length;n<s;n++){var o=Kf[n];o in t&&o in e&&(e[o]=t[o])}var i,r;return"origin"in t&&"originX"in e?e.setOrigin(t.origin):("originX"in t&&"originX"in e&&(i=t.originX),"originY"in t&&"originY"in e&&(r=t.originY),i!==void 0&&r!==void 0&&e.setOrigin(i,r)),e},ce=function(e,t){var n,s;switch(t&&(t.hasOwnProperty("$type")?n=t.$type:t.hasOwnProperty("barColor")?n="bar":t.hasOwnProperty("leftWidth")?n="nineSlice":t.hasOwnProperty("key")&&(n="image")),n){case"bar":s=new bv(e,t);break;case"image":s=new Lu(e,t);break;case"nineSlice":s=t.hasOwnProperty("stretchMode")?new Du(e,t):new Fu(e,t);break;default:s=new Bu(e,t)}return Iu(s,t),e.add.existing(s),s},cl=function(e){var t,n,s,o;switch(this.scrollMode){case 0:case 1:t=this.topChildOY,n=this.bottomChildOY,s=this.childrenMap.scroller,o=this.childrenMap.slider,e=this.scrollMode===0?"Y":"X";break;default:(e=e.toUpperCase())==="Y"?(t=this.topChildOY,n=this.bottomChildOY):(t=this.leftChildOX,n=this.rightChildOX),s=this.childrenMap[`scroller${e}`],o=this.childrenMap[`slider${e}`]}n*=e==="Y"?this.scaleY:this.scaleX,s&&s.setBounds(t,n),o&&(o.setEnable(t!==n),o.tickLength&&o.setTick(o.tickLength,t,n))},fl=function(e){switch(this.scrollMode){case 0:case 1:(n=this.childrenMap.slider)&&this.hideUnscrollableSlider&&this.setChildVisible(n,this.isOverflow),(o=this.childrenMap.scroller)&&this.disableUnscrollableDrag&&o.setEnable(this.isOverflow);break;default:var t=this[`isOverflow${e=e.toUpperCase()}`],n=this.childrenMap[`slider${e}`],s=this[`hideUnscrollableSlider${e}`];n&&s&&this.setChildVisible(n,t);var o=this.childrenMap.scroller,i=this[`disableUnscrollableDrag${e}`];o&&i&&o.setEnable(t)}},pl=function(e){switch(this.scrollMode){case 0:case 1:if(!this.adaptThumbSizeMode||!(h=this.childrenMap.slider))return;var t=Math.min(this.childVisibleHeight/this.childHeight,1),n=h.childrenMap.track,s=h.childrenMap.thumb,o=this.minThumbSize;if(this.scrollMode===0){var i=n.displayHeight*t;o!==void 0&&i<o&&(i=o),ae(s,void 0,i)}else{var r=n.displayWidth*t;o!==void 0&&r<o&&(r=o),ae(s,r,void 0)}qf(h);break;default:var h;if(!this[`adaptThumb${e=e.toUpperCase()}SizeMode`]||!(h=this.childrenMap[`slider${e}`]))return;n=h.childrenMap.track,s=h.childrenMap.thumb,o=this[`minThumb${e}Size`],e==="Y"?(t=Math.min(this.childVisibleHeight/this.childHeight,1),i=n.displayHeight*t,o!==void 0&&i<o&&(i=o),ae(s,void 0,i)):(t=Math.min(this.childVisibleWidth/this.childWidth,1),r=n.displayWidth*t,o!==void 0&&r<o&&(r=o),ae(s,r,void 0)),qf(h)}},qf=function(e){var t=e.minWidth,n=e.minHeight;e.minWidth=e.width,e.minHeight=e.height,e.layout(),e.minWidth=t,e.minHeight=n};const Ua=Phaser.Math.Clamp,TO={setChildOY(e,t){return t===void 0&&(t=!1),t&&(e=Ua(e,this.bottomChildOY,this.topChildOY)),this.childOY=e,this},addChildOY(e,t){return this.setChildOY(this.childOY+e,t),this},setT(e,t){return t===void 0&&(t=!1),t&&(e=Ua(e,0,1)),this.t=e,this},addT(e,t){return this.setT(this.t+e,t),this},scrollToTop(){return this.t=0,this},scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this},setChildOX(e,t){return t===void 0&&(t=!1),t&&(e=Ua(e,this.leftChildOX,this.rightChildOX)),this.childOX=e,this},addChildOX(e,t){return this.setChildOX(this.childOX+e,t),this},setS(e,t){return t===void 0&&(t=!1),t&&(e=Ua(e,0,1)),this.s=e,this},addS(e,t){return this.setS(this.s+e,t),this},scrollToLeft(){return this.s=0,this},scrollToRight(){if(this.s=1,this.s===0)return this;do this.s=1;while(this.s!==1);return this}};var Ev={resizeController:function(){switch(this.scrollMode){case 0:case 1:cl.call(this),this.updateController(),fl.call(this),pl.call(this);break;default:cl.call(this,"y"),cl.call(this,"x"),this.updateController(),fl.call(this,"y"),fl.call(this,"x"),pl.call(this,"y"),pl.call(this,"x")}return this},updateController:function(){switch(this.scrollMode){case 0:case 1:var e=this.childrenMap.scroller,t=this.childrenMap.slider;e&&e.setValue(this.childOY),t&&t.setValue(this.t);break;default:var n=this.childrenMap.scrollerY,s=this.childrenMap.sliderY,o=this.childrenMap.scrollerX,i=this.childrenMap.sliderX;n&&n.setValue(this.childOY),s&&s.setValue(this.t),o&&o.setValue(this.childOX),i&&i.setValue(this.s)}}};Object.assign(Ev,TO);const Pv={v:0,vertical:0,y:0,h:1,horizontal:1,x:1,xy:2,vh:2};var Xu=function(e,t){t===void 0&&(t="scrollMode"),e.hasOwnProperty(t)||(e[t]=wO(e));var n=e[t];return typeof n=="string"&&(n=Pv[n]),n},wO=function(e){var t=!!e.sliderY||!!e.scrollerY,n=!!e.sliderX||!!e.scrollerX;return t&&n?2:t?0:n?1:0};const qt=Phaser.Utils.Objects.GetValue,$f=Phaser.Math.Percent;var Ov=function(e,t){var n,s;gl.x=e,gl.y=t,this.reverseAxis?(n=this.getEndPoint(),s=this.getStartPoint()):(n=this.getStartPoint(),s=this.getEndPoint());var o=function(i,r,h){var a;return i.y===r.y?a=$f(h.x,i.x,r.x):i.x===r.x&&(a=$f(h.y,i.y,r.y)),a}(n,s,gl);return o},gl={},SO=function(e,t,n){this.enable&&this.inputActive&&(this.value=Ov.call(this,t,n))},ml=function(e){if(this.enable&&this.inputActive&&e.isDown){var t=Ov.call(this,e.worldX,e.worldY);this.stopEaseValue(),this.easeValueDuration===0||Math.abs(this.value-t)<.1?this.value=t:this.easeValueTo(t)}};const CO=Phaser.Utils.Objects.GetValue;var EO=function(e){this.inputActive=!1;var t=CO(e,"input",0);typeof t=="string"&&(t=PO[t]);var n=this.childrenMap.thumb;switch(t){case 0:n&&(n.setInteractive(),this.scene.input.setDraggable(n),n.on("dragstart",function(o){this.inputActive=!0,this.eventEmitter.emit("inputstart",o)},this).on("dragend",function(o){this.inputActive=!1,this.eventEmitter.emit("inputend",o)},this).on("drag",SO,this));break;case 1:this.setInteractive().on("pointerdown",function(o){this.inputActive=!0,this.eventEmitter.emit("inputstart",o)},this).on("pointerdown",ml,this);var s=function(o){this.inputActive&&(this.inputActive=!1,this.eventEmitter.emit("inputend",o))};this.scene.input.on("pointerup",s,this).on("pointermove",ml,this),this.once("destroy",function(){this.scene.input.on("pointerup",s,this).off("pointermove",ml,this)},this)}};const PO={pan:0,drag:0,click:1,none:-1};var Zf=function(e,t){t===void 0&&(t=OO);var n=this.childrenMap.thumb,s=n.x,o=n.y;return Wr(n,this.innerLeft,this.innerTop,this.innerWidth,this.innerHeight,e),t.x=n.x,t.y=n.y,n.x=s,n.y=o,t},OO={};const kO=Phaser.Display.Align.LEFT_CENTER,MO=Phaser.Display.Align.TOP_CENTER;var _O={};const AO=Phaser.Display.Align.RIGHT_CENTER,RO=Phaser.Display.Align.BOTTOM_CENTER;var LO={};const Jf=Phaser.Math.Linear;var DO={};const FO=Phaser.Display.Align.LEFT_CENTER,BO=Phaser.Display.Align.TOP_CENTER,IO=Phaser.Display.Align.RIGHT_CENTER,XO=Phaser.Display.Align.BOTTOM_CENTER,Pe=Phaser.Utils.Objects.GetValue,Wa=Phaser.Utils.Objects.IsPlainObject,zO=Phaser.Math.Clamp,YO=Phaser.Math.Snap.To;class kv extends as(pt){constructor(t,n){super(t,n),this.type="rexSlider",this.bootProgressBase(n),this.reverseAxis=Pe(n,"reverseAxis",!1);var s=Pe(n,"background",void 0),o=Pe(n,"track",void 0),i=Pe(n,"indicator",void 0),r=Pe(n,"thumb",void 0);if(s&&(Wa(s)&&(s=ce(t,s)),this.addBackground(s)),o&&(Wa(o)&&(o=ce(t,o)),this.add(o,{proportion:1,expand:!0,minWidth:this.orientation===0?0:void 0,minHeight:this.orientation===1?0:void 0})),i&&(Wa(i)&&(i=ce(t,i)),this.pin(i)),r){Wa(r)&&(r=ce(t,r)),this.pin(r);var h=Pe(n,"thumbOffsetX",0),a=Pe(n,"thumbOffsetY",0);this.setThumbOffset(h,a)}this.addChildrenMap("background",s),this.addChildrenMap("track",o),this.addChildrenMap("indicator",i),this.addChildrenMap("thumb",r),this.setEnable(Pe(n,"enable",void 0));var u=Pe(n,"tick",void 0);u===void 0&&(u=Pe(n,"gap",void 0)),this.setGap(u),EO.call(this,n),this.setValue(Pe(n,"value",0),Pe(n,"min",void 0),Pe(n,"max",void 0))}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setGap(t,n,s){return t&&n!==void 0&&(t/=s-n),this.gap=t,this}setTick(t,n,s){return this.setGap(t,n,s),this}get tick(){return this.gap}set tick(t){this.gap=t}setThumbOffset(t,n){return this.thumbOffsetX=t,this.thumbOffsetY=n,this}get value(){return this._value}set value(t){this.gap!==void 0&&(t=YO(t,this.gap));var n=this._value;this._value=zO(t,0,1),n!==this._value&&(this.updateThumb(this._value),this.updateIndicator(this._value),this.eventEmitter.emit("valuechange",this._value,n,this.eventEmitter))}postLayout(t,n,s){return this.updateThumb(),this.updateIndicator(),super.postLayout(t,n,s),this}}var NO={getStartPoint:function(e){if(e===void 0&&(e=_O),this.childrenMap.thumb){var t=this.orientation===0?kO:MO;Zf.call(this,t,e)}else this.orientation===0?(e.x=this.innerLeft+1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerTop+1);return e},getEndPoint:function(e){if(e===void 0&&(e=LO),this.childrenMap.thumb){var t=this.orientation===0?AO:RO;Zf.call(this,t,e)}else this.orientation===0?(e.x=this.innerRight-1,e.y=this.centerY):(e.x=this.centerX,e.y=this.innerBottom-1);return e},updateThumb:function(e){var t,n,s=this.childrenMap.thumb;return s===void 0||(e===void 0&&(e=this.value),this.reverseAxis?(t=this.getEndPoint(),n=this.getStartPoint()):(t=this.getStartPoint(),n=this.getEndPoint()),function(o,i,r,h){h===void 0&&(h=DO),h.x=Jf(i.x,r.x,o),h.y=Jf(i.y,r.y,o)}(e,t,n,s),s.x+=this.thumbOffsetX,s.y+=this.thumbOffsetY,this.resetChildPositionState(s)),this},updateIndicator:function(e){var t=this.childrenMap.indicator;if(t===void 0)return this;e===void 0&&(e=this.value);var n,s,o,i=this.reverseAxis,r=this.childrenMap.thumb;if(r)if(this.orientation===0){var h,a=bt(r);i?(h=r.x-a*r.originX,n=this.right-h):n=(h=r.x-a*r.originX)+a-this.left}else{var u,l=Tt(r);i?(u=r.y-l*r.originY,s=this.bottom-u):s=(u=r.y-l*r.originY)+l-this.top}else this.orientation===0?n=this.width*e:s=this.height*e;ae(t,n,s),o=i?this.orientation===0?IO:XO:this.orientation===0?FO:BO,Bm(t,this,o),this.resetChildPositionState(t)}};Object.assign(kv.prototype,NO);const ye=Phaser.Utils.Objects.GetValue;class GO extends pt{constructor(t,n){super(t,n),this.type="rexScrollBar";var s,o,i=ye(n,"background",void 0),r=ye(n,"buttons",void 0),h=ye(r,"top",ye(r,"left",void 0)),a=ye(r,"bottom",ye(r,"right",void 0)),u=ye(n,"slider",void 0);i&&this.addBackground(i),h&&(this.add(h),new Po(h).on("intouch",function(){if(this.enable){var p=s.reverseAxis?this.scrollStep:-this.scrollStep;this.value+=p}},this)),u&&(u.orientation=this.orientation,u.eventEmitter=this,u.value=null,o=this.orientation===0?ye(u,"width",void 0)===void 0?1:0:ye(u,"height",void 0)===void 0?1:0,s=new kv(t,u),t.add.existing(s),this.add(s,{proportion:o})),a&&(this.add(a),new Po(a).on("intouch",function(){if(this.enable){var p=s.reverseAxis?-this.scrollStep:this.scrollStep;this.value+=p}},this));var l=[h,a];this.addChildrenMap("background",i),this.addChildrenMap("slider",s),this.addChildrenMap("buttons",l);var d=ye(n,"valuechangeCallback",null);if(d!==null){var c=ye(n,"valuechangeCallbackScope",void 0);this.on("valuechange",d,c)}this.setEnable(ye(n,"enable",void 0)),this.setValue(ye(n,"value",0)),this.setScrollStep(ye(r,"step",.01))}setScrollStep(t){return this.scrollStep=t,this}get enable(){return!!this.childrenMap.slider&&this.childrenMap.slider.enable}set enable(t){this.childrenMap.slider&&this.childrenMap.slider.setEnable(t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}get value(){return this.childrenMap.slider?this.childrenMap.slider.value:0}set value(t){this.childrenMap.slider&&(this.childrenMap.slider.value=t)}setValue(t,n,s){return this.childrenMap.slider&&this.childrenMap.slider.setValue(t,n,s),this}addValue(t,n,s){return this.childrenMap.slider&&this.childrenMap.slider.addValue(t,n,s),this}getValue(t,n){return this.childrenMap.slider?this.childrenMap.slider.getValue(t,n):0}easeValueTo(t,n,s){return this.childrenMap.slider&&this.childrenMap.slider.easeValueTo(t,n,s),this}stopEaseValue(){return this.childrenMap.slider&&this.childrenMap.slider.stopEaseValue(),this}setEaseValueDuration(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueDuration(t),this}setEaseValueFunction(t){return this.childrenMap.slider&&this.childrenMap.slider.setEaseValueFunction(t),this}setGap(t,n,s){return this.childrenMap.slider&&this.childrenMap.slider.setGap(t,n,s),this}get gap(){if(this.childrenMap.slider)return this.childrenMap.slider.gap}set gap(t){this.childrenMap.slider&&(this.childrenMap.slider.gap=t)}setTick(t,n,s){return this.setGap(t,n,s),this}get tick(){if(this.childrenMap.slider)return this.childrenMap.slider.tick}set tick(t){this.childrenMap.slider&&(this.childrenMap.slider.tick=t)}}const UO=Phaser.Math.Snap.To;Phaser.Math.Clamp;var WO=function(){this.emit("dragstart")},VO=function(){this.emit("dragend")},jO=function(){this.value+=this.dragDelta},HO=function(){var e=this.value,t=this.dragSpeed,n=this.snapStep;if(n){var s=e,o=t===0?0:t*t/(2*this.slidingDeceleration);s=UO(s+=t>0?o:-o,n,this.minValue),(o=Math.abs(s-e))>0?(t===0?(i=this.backDeceleration,t=Math.sqrt(2*i*o)):(i=t*t/(2*o),i*=.99),this._slowDown.init(e,void 0,t,i,s)):(this._slowDown.stop(),this._state.next())}else if(t===0)this._slowDown.stop(),this._state.next();else{var i=this.slidingDeceleration;this._slowDown.init(e,t>0,t,i)}},KO=function(e,t){t*=.001;var n=this._slowDown.update(t).value;this.overMax(n)?(this.value=this.maxValue,this._slowDown.stop()):this.overMin(n)?(this.value=this.minValue,this._slowDown.stop()):this.value=n},qO=function(){var e=this.value,t=this.outOfMinBound?this.minValue:this.maxValue,n=Math.abs(t-e),s=this.backDeceleration,o=Math.sqrt(2*s*n);this._slowDown.init(e,void 0,o,s,t)},$O=function(e,t){t*=.001,this.value=this._slowDown.update(t).value,this._slowDown.isMoving||this._state.next()},Qf=function(){this._slowDown.stop()};class ZO extends Gs{constructor(t,n){super(n),this.parent=t,this.init()}init(){this.start("IDLE")}next_IDLE(){var t,n=this.parent;return n.dragState.isDown&&(t=n.dragThreshold===0?"DRAG":"DRAGBEGIN"),t}update_IDLE(t,n){this.next()}next_DRAGBEGIN(){var t=this.parent,n=t.dragState;return n.isDown?n.pointer.getDistance()>=t.dragThreshold?"DRAG":"DRAGBEGIN":"IDLE"}update_DRAGBEGIN(t,n){this.next()}next_DRAG(){var t,n=this.parent;return n.dragState.isUp&&(t=n.outOfBounds?"BACK":n.slidingEnable?"SLIDE":"IDLE"),t}update_DRAG(t,n){var s=this.parent;s.dragState.justMoved&&jO.call(s),this.next()}enter_DRAG(){WO.call(this.parent)}exit_DRAG(){VO.call(this.parent)}next_SLIDE(){var t,n=this.parent;return n.dragState.isDown?t="DRAG":n.isSliding||(t="IDLE"),t}enter_SLIDE(){HO.call(this.parent)}exit_SLIDE(){Qf.call(this.parent)}update_SLIDE(t,n){KO.call(this.parent,t,n),this.next()}next_BACK(){var t,n=this.parent;return n.dragState.isDown?t="DRAG":n.isPullBack||(t="IDLE"),t}enter_BACK(){qO.call(this.parent)}exit_BACK(){Qf.call(this.parent)}update_BACK(t,n){$O.call(this.parent,t,n),this.next()}}const dr=Phaser.Utils.Objects.GetValue,JO=Phaser.Math.Distance.Between;class QO extends Rt{constructor(t,n){super(t,n),this._enable=void 0,this.rectBoundsInteractive=dr(n,"rectBoundsInteractive",!1),this.rectBoundsInteractive||t.setInteractive(dr(n,"inputConfig",void 0)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return this.pointer=void 0,this.isInTouched=!1,this.holdStartTime=void 0,this.x=void 0,this.y=void 0,this.preX=void 0,this.preY=void 0,this.localX=void 0,this.localY=void 0,this.justMoved=!1,this.setEnable(dr(t,"enable",!0)),this.holdThreshold=dr(t,"holdThreshold",50),this.pointerOutReleaseEnable=dr(t,"pointerOutRelease",!0),this}boot(){var t=this.scene,n=this.parent;this.rectBoundsInteractive?(t.input.on("pointerdown",this.onPointIn,this),t.input.on("pointerup",this.onPointOut,this),t.input.on("pointermove",this.onPointerMove,this)):(n.on("pointerdown",this.onPointIn,this),n.on("pointerup",this.onPointOut,this),this.pointerOutReleaseEnable&&n.on("pointerout",this.onPointOut,this),n.on("pointermove",this.onPointerMove,this)),t.sys.events.on("preupdate",this.preupdate,this)}shutdown(t){if(!this.isShutdown){var n=this.scene;this.parent,this.rectBoundsInteractive&&(n.input.off("pointerdown",this.onPointIn,this),n.input.off("pointerup",this.onPointOut,this),n.input.off("pointermove",this.onPointerMove,this)),n.sys.events.off("preupdate",this.preupdate,this),this.pointer=void 0,super.shutdown(t)}}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.isInTouched=!1,this.pointer=void 0),this._enable=t)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setPointerOutReleaseEnable(t){return t===void 0&&(t=!0),this.pointerOutReleaseEnable=t,this}get isDown(){return this.pointer&&this.pointer.isDown}get isUp(){return!this.isDown}get dx(){return this.x-this.preX}get dy(){return this.y-this.preY}get dt(){return wm(this.scene)}get speed(){return this.x===this.preX&&this.y===this.preY?0:JO(this.preX,this.preY,this.x,this.y)/(.001*this.dt)}get speedX(){return this.dx/(.001*this.dt)}get speedY(){return this.dy/(.001*this.dt)}onPointIn(t,n,s){this.enable&&t.isDown&&this.pointer===void 0&&(this.rectBoundsInteractive&&!Li(this.parent,t)||(this.pointer=t,this.localX=n,this.localY=s))}onPointOut(t){this.enable&&this.pointer===t&&(this.pointer=void 0)}onPointerMove(t,n,s){this.enable&&t.isDown&&this.pointer===t&&(this.rectBoundsInteractive&&this.pointerOutReleaseEnable&&!Li(this.parent,t)?this.onPointOut(t):(this.localX=n,this.localY=s))}preupdate(t,n){if(this.enable){var s=this.pointer;this.justMoved=!1,s&&!this.isInTouched?(this.x=s.worldX,this.y=s.worldY,this.preX=s.worldX,this.preY=s.worldY,this.isInTouched=!0,this.holdStartTime=void 0,this.emit("touchstart",s,this.localX,this.localY)):s&&this.isInTouched?this.x===s.x&&this.y===s.y?this.holdStartTime===void 0?this.holdStartTime=t:t-this.holdStartTime>this.holdThreshold&&(this.preX=this.x,this.preY=this.y):(this.preX=this.x,this.preY=this.y,this.x=s.worldX,this.y=s.worldY,this.holdStartTime=void 0,this.justMoved=!0,this.emit("touchmove",s,this.localX,this.localY)):!s&&this.isInTouched&&(this.isInTouched=!1,this.holdStartTime=void 0,this.emit("touchend",s))}}}const vl=Phaser.Utils.Objects.GetValue;class tk{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){return this.setValue(vl(t,"value",0)),this.setSpeed(vl(t,"speed",0)),this.setAcceleration(vl(t,"acceleration",0)),this}reset(){this.setValue(0),this.setSpeed(0),this.setAcceleration(0)}setValue(t){return this.value=t,this}setSpeed(t){return this.speed=t,this}setAcceleration(t){return this.acceleration=t,this}updateSpeed(t){return this.acceleration!==0&&(this.speed+=this.acceleration*t,this.speed<0&&(this.speed=0)),this}getDeltaValue(t){return this.updateSpeed(t),this.speed<=0?0:this.speed*t}update(t){return this.updateSpeed(t),this.speed>0&&(this.value+=this.getDeltaValue(t)),this}get isMoving(){return this.speed>0}}class ek{constructor(){this.value,this.dir,this.movement=new tk}init(t,n,s,o,i){return this.value=t,this.end=i,this.dir=i!==void 0?t<i:n,s=Math.abs(s),this.movement.setSpeed(s).setAcceleration(-o),this}stop(){this.movement.reset()}update(t){var n=this.movement.getDeltaValue(t);return this.dir||(n=-n),this.end===void 0?this.value+=n:n===0?this.value=this.end:(this.value+=n,this.dir?this.value>this.end&&(this.value=this.end):this.value<this.end&&(this.value=this.end)),this}get isMoving(){return this.movement.isMoving}}const Xt=Phaser.Utils.Objects.GetValue,ik=Phaser.Math.Clamp;class sk extends Rt{constructor(t,n){super(t,n);var s=Xt(n,"enable",!0);this._state=new ZO(this,{enable:s,eventEmitter:!1});var o={rectBoundsInteractive:Xt(n,"rectBoundsInteractive",!1),inputConfig:Xt(n,"inputConfig",void 0),enable:s,pointerOutRelease:Xt(n,"pointerOutRelease",!0),eventEmitter:!1};this.dragState=new QO(t,o),this._enable=void 0,this._value=void 0,this._slowDown=new ek,this.setSnapStep(Xt(n,"snapStep",void 0));var i=Xt(n,"valuechangeCallback",null);if(i!==null){var r=Xt(n,"valuechangeCallbackScope",void 0);this.on("valuechange",i,r)}(i=Xt(n,"overmaxCallback",null))!==null&&(r=Xt(n,"overmaxCallbackScope",void 0),this.on("overmax",i,r)),(i=Xt(n,"overminCallback",null))!==null&&(r=Xt(n,"overminCallbackScope",void 0),this.on("overmin",i,r)),this.resetFromJSON(n),this.boot()}resetFromJSON(t){this.setOrientationMode(Xt(t,"orientation",0)),this.setDragThreshold(Xt(t,"threshold",10)),this.setSlidingDeceleration(Xt(t,"slidingDeceleration",5e3)),this.setBackDeceleration(Xt(t,"backDeceleration",2e3));var n=Xt(t,"dragRate",1);n*=Xt(t,"dragReverse",!1)?-1:1,this.setDragRate(n);var s=Xt(t,"bounds",void 0);return s?this.setBounds(s):this.setBounds(Xt(t,"max",0),Xt(t,"min",0)),this.setValue(Xt(t,"value",this.maxValue||0)),this.setEnable(Xt(t,"enable",!0)),this}boot(){this.scene.sys.events.on("preupdate",this._state.update,this._state)}shutdown(t){this.isShutdown||(this.scene.sys.events.off("preupdate",this._state.update,this._state),this._state.destroy(t),this.dragState.destroy(t),this._state=void 0,this.dragState=void 0,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return this._enable=t,this._state.setEnable(t),this.dragState.setEnable(t),this}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}setOrientationMode(t){return typeof t=="string"&&(t=nk[t]),this.orientationMode=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setSlidingDeceleration(t){return this.slidingDeceleration=t,this}setBackDeceleration(t){return this.backDeceleration=t,this}setDragRate(t){return this.dragRate=t,this}setBounds(t,n){if(Array.isArray(t)){var s=t;t=s[0],n=s[1]}return t<n?(this.minValue=t,this.maxValue=n):(this.minValue=n,this.maxValue=t),this}setSnapStep(t){return this.snapStep=t,this}get value(){return this._value}set value(t){if(t!==this._value){var n=this._value,s=this.overMax(t),o=this.overMin(t);s&&this.emit("overmax",t,n),o&&this.emit("overmin",t,n),this.backEnable||(s&&(t=this.maxValue),o&&(t=this.minValue)),this._value=t,this.emit("valuechange",t,n)}}setValue(t,n){return n===void 0&&(n=!1),n&&(t=ik(t,this.minValue,this.maxValue)),this.value=t,this}addValue(t,n){return this.setValue(this.value+t,n),this}get state(){return this._state.state}get isDragging(){return this.dragState.isInTouched}get outOfMaxBound(){return this.overMax(this.value)}get outOfMinBound(){return this.overMin(this.value)}get outOfBounds(){return this.outOfMinBound||this.outOfMaxBound}overMax(t){return this.maxValue!=null&&t>this.maxValue}overMin(t){return this.minValue!=null&&t<this.minValue}get backEnable(){return typeof this.backDeceleration=="number"}get isPullBack(){return this._slowDown.isMoving}get slidingEnable(){return typeof this.slidingDeceleration=="number"}get isSliding(){return this._slowDown.isMoving}get dragDelta(){return(this.orientationMode===0?this.dragState.dy:this.orientationMode===1?this.dragState.dx:0)*this.dragRate}get dragSpeed(){return(this.orientationMode===0?this.dragState.speedY:this.orientationMode===1?this.dragState.speedX:0)*this.dragRate}}const nk={y:0,v:0,vertical:0,x:1,h:1,horizontal:1},Va=Phaser.Utils.Objects.GetValue;class rk extends Rt{constructor(t,n){switch(super(t,n),this.parent!==this.scene?this.focusMode=Va(n,"focus",!0):this.focusMode=!1,typeof this.focusMode=="boolean"&&(this.focusMode=this.focusMode?1:0),this.setSpeed(Va(n,"speed",.1)),this.setEnable(Va(n,"enable",!0)),this.focusMode){case 0:case 2:this.scene.input.on("wheel",this.onSceneScroll,this);break;default:t.setInteractive(Va(n,"inputConfig",void 0)).on("wheel",function(s,o,i,r,h){this.tryScroll(i)},this)}}destroy(){switch(this.focusMode){case 0:case 2:this.scene.input.off("wheel",this.onSceneScroll,this)}}onSceneScroll(t,n,s,o,i,r){(this.focusMode!==2||Li(this.parent,t))&&this.tryScroll(o)}setEnable(t){return t===void 0&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}tryScroll(t){if(this.enable)return this.scroll(t),this}scroll(t){return t*=this.speed,this.emit("scroll",t,this.parent,this),this}}const Wt=Phaser.Utils.Objects.GetValue,ak=Phaser.Math.Snap.To;var ja=function(e,t,n,s){var o,i,r,h=(n=n.toUpperCase())==="Y",a=e.scrollMode===2,u=e.childrenMap.child,l=`snapStep${n}`;(a||(o=Wt(s,"snapStep",void 0))===void 0)&&(o=Wt(s,l,void 0)),e[l]=o;var d=`slider${n}`;if(i=a||s.hasOwnProperty(d)?Wt(s,d,void 0):Wt(s,"slider",void 0)){var c,p,f;i===!0&&(i={}),i.orientation=h?1:0,r=function(k,P){P===void 0&&(P={});var A=vi(P);(P={slider:A}).orientation=A.orientation,delete A.orientation,P.background=A.background,delete A.background,P.buttons=A.buttons,delete A.buttons,P.value=null;var L=new GO(k,P);k.add.existing(L);var D=L.childrenMap.slider;return L.addChildrenMap("track",D.childrenMap.track),L.addChildrenMap("indicator",D.childrenMap.indicator),L.addChildrenMap("thumb",D.childrenMap.thumb),L}(e.scene,i);var v=Wt(i,"position",0);typeof v=="string"&&(v=ok[v]);var g,y,m=Wt(s,`space.slider${n}`,void 0);m===void 0&&(m=Wt(s,"space.slider",void 0))===void 0&&(a?m=0:g=Wt(s,"space.child",0)),y=g===void 0?typeof m=="number":typeof g=="number",h?v===0?(c=2,p=1,f=g===void 0?y?{left:m}:m:{left:Wt(g,"right",g)}):(c=0,p=1,f=g===void 0?y?{right:m}:m:{right:Wt(g,"left",g)}):v===0?(c=1,p=2,f=g===void 0?y?{top:m}:m:{top:Wt(g,"bottom",g)}):(c=1,p=0,f=g===void 0?y?{bottom:m}:m:{bottom:Wt(g,"top",g)}),t.add(r,{column:c,row:p,align:"center",padding:f,expand:!0}),e[`hideUnscrollableSlider${n}`]=Wt(i,"hideUnscrollableSlider",!1),e[`disableUnscrollableDrag${n}`]=Wt(i,"disableUnscrollableDrag",!1),e[`adaptThumb${n}SizeMode`]=Wt(i,"adaptThumbSize",!1),e[`minThumb${n}Size`]=Wt(i,"minThumbSize",void 0)}else e[`hideUnscrollableSlider${n}`]=!1,e[`disableUnscrollableDrag${n}`]=!1,e[`adaptThumb${n}SizeMode`]=!1,e[`minThumb${n}Size`]=void 0;var x,b,w=Wt(s,"scrollDetectionMode");typeof w=="string"&&(w=hk[w]);var T=`scroller${n}`;(x=a||s.hasOwnProperty(T)?Wt(s,T,!0):Wt(s,"scroller",!0))&&u&&(x===!0&&(x={}),x.orientation=h?0:1,w!==void 0&&(x.rectBoundsInteractive=w===1),x.snapStep=o,b=new sk(u,x),u.isRexContainerLite&&u.sendChildToBack(u));var S,C,E,M,_,O=Wt(s,a?`mouseWheelScroller${n}`:"mouseWheelScroller",!1);O&&u&&(w!==void 0&&(O.focus=w===1?2:0),S=new rk(u,O)),e.addChildrenMap(`slider${n}`,r),e.addChildrenMap(`scroller${n}`,b),e.addChildrenMap(`mouseWheelScroller${n}`,S),a&&!h||(e.hideUnscrollableSlider=e[`hideUnscrollableSlider${n}`],e.disableUnscrollableDrag=e[`disableUnscrollableDrag${n}`],e.adaptThumbSizeMode=e[`adaptThumb${n}SizeMode`],e.minThumbSize=e[`minThumb${n}Size`],e.addChildrenMap("slider",r),e.addChildrenMap("scroller",b),e.addChildrenMap("mouseWheelScroller",S)),r&&(a?(C=h?"t":"s",M=`scroll${n}`):(C="t",M="scroll"),r.on("valuechange",function(k){e[C]=k,e.emit(M,e)}).on("inputend",function(){var k=e[`snapStep${n}`];if(k){var P=e[h?"topChildOY":"leftChildOX"],A=e[h?"bottomChildOY":"rightChildOX"],L=e[`childO${n}`],D=ak(L,k,P),F=Math.abs(D-L)/k*500;r.setEaseValueDuration(F).easeValueTo(D,P,A)}})),b&&(a?(E=`childO${n}`,M=`scroll${n}`):(E="childOY",M="scroll"),b.on("valuechange",function(k){e[E]=k,e.emit(M,e)})),S&&(_=a?`addChildO${n}`:"addChildOY",S.on("scroll",function(k){var P=e[l];P&&(k=P),e[_](-k,!0)}))};const ok={right:0,left:1,bottom:0,top:1},hk={gameObject:0,rectBounds:1},Ha=Phaser.Utils.Objects.GetValue,hi=Phaser.Utils.Objects.GetValue;let $r=class extends pt{constructor(e,t){t===void 0&&(t={});var n=Xu(t),s=n===1;t.orientation=s?0:1,super(e,t),this.type=hi(t,"type","rexScrollable"),this.scrollMode=n;var o=hi(t,"background",void 0);o&&this.addBackground(o);var i=hi(t,"header",void 0);if(i){var r=hi(t,"align.header","center"),h=hi(t,"space.header",0);l=s?{right:h}:{bottom:h},this.add(i,{proportion:0,align:r,padding:l,expand:hi(t,"expand.header",!0)})}var a=function(c,p){var f=c.scene,v=[0,1,0],g=[0,1,0],y=Ha(p,"width"),m=Ha(p,"height");y||Ha(p,"child.expandWidth",!0)||(v[1]=0),m||Ha(p,"child.expandHeight",!0)||(g[1]=0);var x=new Bi(f,{column:3,row:3,columnProportions:v,rowProportions:g});switch(function(b,w,T){var S=qt(T,"child"),C=qt(S,"gameObject",void 0);if(C){var E=qt(T,"space.child",0);b.childMargin={};var M=b.childMargin,_={};if(typeof E=="number")switch(b.scrollMode){case 0:case 1:M.top=0,M.bottom=0,M.left=0,M.right=0;break;default:M.top=E,M.bottom=E,M.left=E,M.right=E}else switch(b.scrollMode){case 0:M.top=qt(E,"top",0),M.bottom=qt(E,"bottom",0),_.left=qt(E,"left",0),_.right=qt(E,"right",0);break;case 1:M.top=qt(E,"left",0),M.bottom=qt(E,"right",0),_.top=qt(E,"top",0),_.bottom=qt(E,"bottom",0);break;default:M.top=qt(E,"top",0),M.bottom=qt(E,"bottom",0),M.left=qt(E,"left",0),M.right=qt(E,"right",0)}w.add(C,{column:1,row:1,align:qt(S,"align","center"),padding:_,expand:{width:qt(S,"expandWidth",!0),height:qt(S,"expandHeight",!0)}})}b.addChildrenMap("child",C)}(c,x,p),c.scrollMode){case 0:ja(c,x,"y",p);break;case 1:ja(c,x,"x",p);break;default:ja(c,x,"y",p),ja(c,x,"x",p)}return x}(this,t);a&&this.add(a,{proportion:1,align:"center",padding:0,expand:!0});var u=hi(t,"footer",void 0);if(u){r=hi(t,"align.footer","center");var l,d=hi(t,"space.footer",0);l=s?{left:d}:{top:d},this.add(u,{proportion:0,align:r,padding:l,expand:hi(t,"expand.footer",!0)})}this.addChildrenMap("background",o),this.addChildrenMap("header",i),this.addChildrenMap("footer",u),this.runLayoutFlag=!1}postLayout(e,t,n){var s=0,o=0;return this.runLayoutFlag?(o=this.t,this.scrollMode===2&&(s=this.s)):this.runLayoutFlag=!0,this.resizeController(),this.setT(o),this.scrollMode===2&&this.setS(s),super.postLayout(e,t,n),this}set t(e){var t=this.childMargin;if(t.top!==0||t.bottom!==0){var n=this.childrenMap.child,s=n.topChildOY-n.bottomChildOY,o=(s+t.top+t.bottom)*e-t.top;e=s!==0?o/s:0}this.childrenMap.child.t=e,this.updateController()}get t(){var e=this.childrenMap.child.t,t=this.childMargin;if(t.top!==0||t.bottom!==0){var n=this.childrenMap.child,s=n.topChildOY-n.bottomChildOY,o=s+t.top+t.bottom,i=s*e+t.top;e=o!==0?i/o:0}return e}set s(e){var t=this.childMargin;if(t.left!==0||t.right!==0){var n=this.childrenMap.child,s=n.leftChildOX-n.rightChildOX,o=(s+t.left+t.right)*e-t.left;e=s!==0?o/s:0}this.childrenMap.child.s=e,this.updateController()}get s(){var e=this.childrenMap.child.s,t=this.childMargin;if(t.left!==0||t.right!==0){var n=this.childrenMap.child,s=n.leftChildOX-n.rightChildOX,o=s+t.left+t.right,i=s*e+t.left;e=o!==0?i/o:0}return e}set childOY(e){this.childrenMap.child.childOY=e,this.updateController()}get childOY(){return this.childrenMap.child.childOY}set childOX(e){this.childrenMap.child.childOX=e,this.updateController()}get childOX(){return this.childrenMap.child.childOX}get topChildOY(){return this.childrenMap.child.topChildOY+this.childMargin.top}get bottomChildOY(){return this.childrenMap.child.bottomChildOY-this.childMargin.bottom}get leftChildOX(){return this.childrenMap.child.leftChildOX+this.childMargin.left}get rightChildOX(){return this.childrenMap.child.rightChildOX-this.childMargin.right}get childVisibleHeight(){return this.childrenMap.child.childVisibleHeight}get childHeight(){return this.childrenMap.child.childHeight}get childVisibleWidth(){return this.childrenMap.child.childVisibleWidth}get childWidth(){return this.childrenMap.child.childWidth}get isOverflow(){var e=this.childrenMap.child;return e.topChildOY!==e.bottomChildOY}get isOverflowY(){return this.isOverflow}get isOverflowX(){var e=this.childrenMap.child;return e.leftChildOX!==e.rightChildOX}get sliderEnable(){var e=this.childrenMap.slider;return!!e&&e.enable}set sliderEnable(e){var t=this.childrenMap.slider;t&&t.setEnable(e)}setSliderEnable(e){return e===void 0&&(e=!0),this.sliderEnable=e,this}get sliderYEnable(){return this.sliderEnable}set sliderYEnable(e){this.sliderEnable=e}setSliderYEnable(e){return this.setSliderEnable(e),this}get sliderXEnable(){var e=this.childrenMap.sliderX;return!!e&&e.enable}set sliderXEnable(e){var t=this.childrenMap.sliderX;t&&t.setEnable(e)}setSliderXEnable(e){return e===void 0&&(e=!0),this.sliderXEnable=e,this}get scrollerEnable(){var e=this.childrenMap.scroller;return!!e&&e.enable}set scrollerEnable(e){var t=this.childrenMap.scroller;t&&t.setEnable(e)}setScrollerEnable(e){return e===void 0&&(e=!0),this.scrollerEnable=e,this}get scrollerYEnable(){return this.scrollerEnable}set scrollerYEnable(e){this.scrollerEnable=e}setScrollerYEnable(e){return this.setScrollerEnable(e),this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return e===void 0&&(e=!0),this.scrollerXEnable=e,this}get scrollerXEnable(){var e=this.childrenMap.scrollerX;return!!e&&e.enable}set scrollerXEnable(e){var t=this.childrenMap.scrollerX;t&&t.setEnable(e)}setScrollerXEnable(e){return e===void 0&&(e=!0),this.scrollerXEnable=e,this}get mouseWheelScrollerEnable(){var e=this.childrenMap.mouseWheelScroller;return!!e&&e.enable}set mouseWheelScrollerEnable(e){var t=this.childrenMap.mouseWheelScroller;t&&t.setEnable(e)}setMouseWheelScrollerEnable(e){return e===void 0&&(e=!0),this.mouseWheelScrollerEnable=e,this}get mouseWheelScrollerYEnable(){return this.mouseWheelScrollerEnable}set mouseWheelScrollerYEnable(e){this.mouseWheelScrollerEnable=e}setMouseWheelScrollerYEnable(e){return this.setMouseWheelScrollerEnable(e),this}get mouseWheelScrollerXEnable(){var e=this.childrenMap.mouseWheelScrollerX;return!!e&&e.enable}set mouseWheelScrollerXEnable(e){var t=this.childrenMap.mouseWheelScrollerX;t&&t.setEnable(e)}setMouseWheelScrollerXEnable(e){return e===void 0&&(e=!0),this.mouseWheelScrollerXEnable=e,this}setDropZoneEnable(e){e===void 0&&(e=!0);var t=this.childrenMap.child;return t.setInteractive(),t.input.dropZone=e,this}};Object.assign($r.prototype,Ev);var zu=function(e,t,n){switch(Is(e)){case 0:n=e.getWrappedText(t);break;case 1:n=e.getPenManager(t,n);break;case 2:n=e.maxWidth>0?e.setText(t).getTextBounds().wrappedText.split(`
`):t.split(`
`)}return n},Mv=function(e){return(e-this.textLineSpacing)/(this.textLineHeight+this.textLineSpacing)},_v=function(e){return e*(this.textLineHeight+this.textLineSpacing)-this.textLineSpacing},lk=function(e){var t,n=e+this.visibleLinesCount+1;switch(this.textObjectType){case 0:case 2:t=this.lines.slice(e,n).join(`
`);break;case 1:var s=this.lines.getLineStartIndex(e),o=this.lines.getLineEndIndex(n-1);t=this.lines.getSliceTagText(s,o,!0)}return t},Uo=function(e,t){switch(Is(e)){case 0:var n=(o=e.style).wordWrapWidth,s=o.wordWrapCallback;o.wordWrapWidth=0,o.wordWrapCallback=void 0,e.setText(t),o.wordWrapWidth=n,o.wordWrapCallback=s;break;case 1:var o,i=(o=e.style).wrapMode;o.wrapMode=0,e.setText(t),o.wrapMode=i;break;case 2:var r=e._maxWidth;e._maxWidth=0,e.setText(t),e._maxWidth=r}},tp=function(){var e=this.textObject.rexSizer;this.textObject.y+=e.offsetY-e.preOffsetY,e.preOffsetY=e.offsetY,this.resetChildPositionState(this.textObject),this.textCropEnable&&uk.call(this)},uk=function(){if(this.textObject.setCrop){var e,t,n=this.textObject.rexSizer.offsetY;n<=0?(e=-n,t=this.height):(e=0,t=this.height-n),this.textObject.setCrop(0,e,this.width,t)}},dk=function(e,t,n){if(n+=this.textLineHeight+this.textLineSpacing,this.textObjectWidth!==t||this._textObjectRealHeight!==n){switch(this.textObjectWidth=t,this._textObjectRealHeight=n,this.textObjectType){case 0:case 1:e.setFixedSize(t,n);var s=e.style,o=Math.max(t,0);this.textObjectType===0?s.wordWrapWidth=o:(s.wrapMode===0&&(s.wrapMode=1),s.wrapWidth=o);break;case 2:e.setMaxWidth(t)}this.setText()}};const ck={setText:function(e){return e!==void 0&&(this.text=e),this.lines=zu(this.textObject,this.text,this.lines),this.linesCount=this.lines.length,this._textHeight=void 0,this._textVisibleHeight=void 0,this.updateTextObject(),this},updateTextObject:function(){var e=Math.max(Math.floor(Mv.call(this,-this.textOY)),0),t=_v.call(this,e)+this.textOY,n=lk.call(this,e);return Uo(this.textObject,n),this.textObject.rexSizer.offsetY=t,tp.call(this),this},preLayout:function(){return this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,Hr.call(this),this},layoutChildren:function(){var e,t,n,s,o,i,r,h=this.left,a=this.top;(e=this.textObject).rexSizer.hidden||(s=h+(n=(t=e.rexSizer).padding).left*this.scaleX,o=a+n.top*this.scaleY,i=this.width*this.scaleX-(n.left+n.right)*this.scaleX,r=this.height*this.scaleY-(n.top+n.bottom)*this.scaleY,dk.call(this,e,i,r),Wr(e,s,o,i,r,t.align),t.preOffsetY=0,tp.call(this),this.textMask&&(this.textMask.setPosition().resize(),this.resetChildPositionState(this.textMask)))}},ep=Phaser.Utils.Objects.IsPlainObject,Oe=Phaser.Utils.Objects.GetValue,fk=Phaser.Display.Align.TOP_LEFT;class Av extends Us{constructor(t,n,s,o,i,r){ep(n)?(n=Oe(r=n,"x",0),s=Oe(r,"y",0),o=Oe(r,"width",void 0),i=Oe(r,"height",void 0)):ep(o)&&(o=Oe(r=o,"width",void 0),i=Oe(r,"height",void 0)),super(t,n,s,o,i,r),this.type="rexTextBlock",this.textObject=void 0,this.linesCount=0,this.textMask=void 0,this.textObjectType=void 0,this._textLineHeight=void 0,this._textLineSpacing=void 0,this._visibleLinesCount=void 0,this._textHeight=void 0,this._textVisibleHeight=void 0,this._textObjectRealHeight=0,this.lines=void 0,this.text=Oe(r,"content",""),this._textOY=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.setClampMode(Oe(r,"clampTextOY",!0)),this.alwaysScrollable=Oe(r,"alwaysScrollable",!1);var h=Oe(r,"background",void 0),a=Oe(r,"text",void 0);a===void 0&&(a=pk(t)),this.textCropEnable=Oe(r,"textCrop",!!a.setCrop);var u=Oe(r,"textMask",!this.textCropEnable);h&&this.addBackground(h),this.add(a),this.sizerChildren=[a];var l=this.getSizerConfig(a);l.align=fk,l.padding=Ns(0),l.expand=!0,this.textObject=a,this.textObjectType=Is(a),l.preOffsetY=0,l.offsetY=0,u&&(this.textMask=Dn.call(this,this.textObject,this)),this.addChildrenMap("background",h),this.addChildrenMap("text",a)}destroy(t){if(this.scene&&!this.ignoreDestroy){if(this.textObject=void 0,this.textMask=void 0,this.lines){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.lines=void 0}super.destroy(t)}}setClampMode(t){return t===void 0&&(t=!0),this.clampTextOY=t,this}get textLineHeight(){if(this._textLineHeight===void 0){var t;switch(this.textObjectType){case 0:case 1:var n=this.textObject.style;t=n.metrics.fontSize+n.strokeThickness;break;case 2:var s=this.textObject.fontSize/this.textObject.fontData.size;t=this.textObject.fontData.lineHeight*s}this._textLineHeight=t}return this._textLineHeight}get textLineSpacing(){if(this._textLineSpacing===void 0){var t;switch(this.textObjectType){case 0:case 1:t=this.textObject.lineSpacing;break;case 2:t=0}this._textLineSpacing=t}return this._textLineSpacing}get visibleLinesCount(){return this._visibleLinesCount===void 0&&(this._visibleLinesCount=Math.floor(Mv.call(this,this._textObjectRealHeight))),this._visibleLinesCount}get topTextOY(){return 0}get bottomTextOY(){return-this.textVisibleHeight}get textHeight(){return this._textHeight===void 0&&(this._textHeight=_v.call(this,this.linesCount)),this._textHeight}get textObjectHeight(){return this._textObjectRealHeight-(this.textLineHeight+this.textLineSpacing)}get textVisibleHeight(){if(this._textVisibleHeight===void 0){var t=this.textHeight-this.textObjectHeight;!this.alwaysScrollable&&t<0&&(t=0),this._textVisibleHeight=t}return this._textVisibleHeight}textOYExceedTop(t){return t===void 0&&(t=this.textOY),t>this.topTextOY}textOYExeceedBottom(t){return t===void 0&&(t=this.textOY),t<this.bottomTextOY}get textOY(){return this._textOY}set textOY(t){var n=this.topTextOY,s=this.bottomTextOY,o=this.textOYExceedTop(t),i=this.textOYExeceedBottom(t);this.clampTextOY&&(this.visibleLinesCount>this.linesCount?t=0:o?t=n:i&&(t=s)),this._textOY!==t&&(this._textOY=t,this.updateTextObject()),o&&(this.execeedTopState||this.emit("execeedtop",this,t,n)),this.execeedTopState=o,i&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=i}setTextOY(t){return this.textOY=t,this}set t(t){this.textOY=-this.textVisibleHeight*t}get t(){var t=this.textVisibleHeight;return t===0?0:this.textOY/-t}setTextOYByPercentage(t){return this.t=t,this}}var pk=function(e){return e.add.text(0,0,"")};Object.assign(Av.prototype,ck);const gk={setText(e){return this.childrenMap.child.setText(e),this.resizeController(),this},appendText(e){return this.setText(this.text+e),this}},mk={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},li=Phaser.Utils.Objects.GetValue;class Yu extends $r{constructor(t,n){n===void 0&&(n={});var s=li(n,"text",void 0),o=li(n,"textWidth",void 0),i=li(n,"textHeight",void 0),r=li(n,"textCrop",!!s.setCrop),h=li(n,"textMask",!r),a=li(n,"content",""),u=new Av(t,{width:o,height:i,text:s,textMask:h,textCrop:r&&!h,content:a,clampTextOY:li(n,"clampChildOY",!1),alwaysScrollable:li(n,"alwaysScrollable",!1)});t.add.existing(u),function(d){Object.defineProperty(d,"childOY",{configurable:!0,get:function(){return d.textOY},set:function(c){d.textOY=c}}),Object.defineProperty(d,"topChildOY",{get:function(){return d.topTextOY}}),Object.defineProperty(d,"bottomChildOY",{get:function(){return d.bottomTextOY}}),Object.defineProperty(d,"childVisibleHeight",{get:function(){return d.textObjectHeight}}),Object.defineProperty(d,"childHeight",{get:function(){return d.textHeight}})}(u),n.scrollMode=0,n.type="rexTextArea",n.child={gameObject:u,expandWidth:o===void 0,expandHeight:i===void 0};var l=li(n,"space",void 0);l&&(l.child=li(l,"text",0)),super(t,n),this.addChildrenMap("text",s)}get text(){return this.childrenMap.child.text}get lineHeight(){var t=this.childrenMap.child;return t.textLineHeight+t.textLineSpacing}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.textHeight}}Object.assign(Yu.prototype,gk,mk);const Ka=Phaser.Utils.Objects.GetValue;var Rv=function(e,t,n){t=t?Ne(t):{};var s=Ka(n,"background",ce),o=Ka(n,"text",Lv),i=Ka(n,"track",ce),r=Ka(n,"thumb",ce);s?t.background=s(e,t.background):delete t.background,o?t.text=o(e,t.text):delete t.text;var h=t.slider;h!==!1&&h!==null&&(h===void 0&&(h={}),i?h.track=i(e,h.track):delete h.track,r?h.thumb=r(e,h.thumb):delete h.thumb,t.slider=h);var a=new Yu(e,t);return e.add.existing(a),a},Lv=function(e,t){var n,s;switch(t&&(t.hasOwnProperty("$type")?n=t.$type:t.hasOwnProperty("key")&&(n="bitmaptext",t.font=t.key)),n){case"bitmaptext":case"bitmap":s=new Tv(e,t);break;case"bbcodetext":case"bbcode":s=new Dx(e,0,0,"",t);break;case"label":s=new Nu(e,t);break;case"textarea":s=Rv(e,t);break;default:s=new wv(e,t)}return Iu(s,t),e.add.existing(s),s},ip=function(e,t){var n,s;switch(t&&(t.hasOwnProperty("$type")?n=t.$type:t.hasOwnProperty("leftWidth")?n="nineSlice":(t.hasOwnProperty("color")||t.hasOwnProperty("strokeColor"))&&(n="roundRectangle")),n){case"nineSlice":s=t.hasOwnProperty("stretchMode")?new Du(e,t):new Fu(e,t);break;case"roundRectangle":s=new Bu(e,t);break;default:s=new Lu(e,t)}return Iu(s,t),e.add.existing(s),s};const qa=Phaser.Utils.Objects.GetValue;var Dv=function(e,t,n){t=t?Ne(t):{};var s=qa(n,"background",ce),o=qa(n,"text",Lv),i=qa(n,"icon",ip),r=qa(n,"action",ip);return t.background!==null&&s?t.background=s(e,t.background):delete t.background,t.text!==null&&o?t.text=o(e,t.text):delete t.text,t.icon!==null&&i?t.icon=i(e,t.icon):delete t.icon,t.action!==null&&r?t.action=r(e,t.action):delete t.action,t};class Nu extends Ws{constructor(t,n,s){super(t,n=Dv(t,n,s)),this.type="rexSimpleLabel"}setActiveState(t){return yl(this.getChildren(),"setActiveState",t),this}setHoverState(t){return yl(this.getChildren(),"setHoverState",t),this}setDisableState(t){return yl(this.getChildren(),"setDisableState",t),this}}var yl=function(e,t,n){for(var s=0,o=e.length;s<o;s++){var i=e[s];i&&i[t]&&i[t](n)}};Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue;const vt=Phaser.Utils.Objects.GetValue,vk=Phaser.Utils.Objects.IsPlainObject;var yk=function(e,t){var n=vt(t,"background",void 0),s=vt(t,"icon",void 0),o=vt(t,"iconMask",void 0),i=vt(t,"nameText",void 0),r=vt(t,"valueText",void 0),h=vt(t,"bar",void 0),a=vt(t,"action",void 0),u=vt(t,"actionMask",void 0),l=vt(t,"barShape","line")==="line";vk(h)&&(h=new(l?cS:Jl)(e,h),e.add.existing(h),i&&e.children.moveBelow(h,i),r&&e.children.moveBelow(h,r));var d=i||r||h;if(n&&this.addBackground(n),s){var c=void 0;this.orientation===0?(d||a)&&(c={right:vt(t,"space.icon",0),top:vt(t,"space.iconTop",0),bottom:vt(t,"space.iconBottom",0)}):(d||a)&&(c={bottom:vt(t,"space.icon",0),left:vt(t,"space.iconLeft",0),right:vt(t,"space.iconRight",0)}),this.add(s,{proportion:0,padding:c}),o&&(o=Dn.call(this,s,s,1))}if(d){var p,f=new pt(e,{orientation:1});if((i||r)&&(p=new pt(e,{orientation:0}),i&&(i.text===""&&i.setText(" "),i.setOrigin(0,i.originY),c={left:vt(t,"space.name",0)},p.add(i,{padding:c})),r&&(r.text===""&&r.setText(" "),r.setOrigin(1,r.originY),p.addSpace(),c={right:vt(t,"space.value",0)},p.add(r,{padding:c}),this.setValueTextFormatCallback(vt(t,"valueTextFormatCallback",xk),vt(t,"valueTextFormatCallbackScope",void 0))),f.add(p,{expand:!0})),h)if(l){var v=p?vt(t,"space.bar"):0;v===void 0&&(v=vt(t,"space.barTop",0)),c={top:v,bottom:vt(t,"space.barBottom",0),left:vt(t,"space.barLeft",0),right:vt(t,"space.barRight",0)},f.add(h,{expand:!0,padding:c})}else c={top:vt(t,"space.barTop",0),bottom:vt(t,"space.barBottom",0),left:vt(t,"space.barLeft",0),right:vt(t,"space.barRight",0)},this.addBackground(h,c);c=void 0,a&&(c={right:vt(t,"space.text",0)});var g=vt(t,"align.text","bottom");this.add(f,{proportion:1,align:g,padding:c})}a&&(c=this.orientation===0?{top:vt(t,"space.actionTop",0),bottom:vt(t,"space.actionBottom",0)}:{left:vt(t,"space.actionLeft",0),right:vt(t,"space.actionRight",0)},this.add(a,{proportion:0,padding:c}),u&&(u=Dn.call(this,a,a,1))),this.addChildrenMap("background",n),this.addChildrenMap("icon",s),this.addChildrenMap("iconMask",o),this.addChildrenMap("name",i),this.addChildrenMap("value",r),this.addChildrenMap("bar",h),this.addChildrenMap("action",a),this.addChildrenMap("actionMask",u)},xk=function(e,t,n){return e.toString()};const bk=Phaser.Math.Clamp,Tk={setValueTextFormatCallback(e,t){return this.valueTextFormatCallback=e,this.valueTextFormatCallbackScope=t,this},getFormatValueText(e,t,n){return e===void 0&&(e=this.value),t===void 0&&(t=this.minValue),n===void 0&&(n=this.maxValue),this.valueTextFormatCallbackScope?this.valueTextFormatCallback(e,t,n):this.valueTextFormatCallback.call(this.valueTextFormatCallbackScope,e,t,n)},updateValueText(e,t,n){var s=this.childrenMap.value;return s&&this.valueTextFormatCallback&&(s.setText(this.getFormatValueText(e,t,n)),s.layout&&s.layout()),this},setValue(e,t,n){return t===void 0?t=this.minValue:this.minValue=t,n===void 0?n=this.maxValue:this.maxValue=n,e=bk(e,t,n),this.value=e,this.updateValueText(e,t,n),this.setBarValue(e,t,n),this},setEaseValueDuration(e){return this.easeValueDuration=e,this},easeValueTo(e,t,n){return t===void 0?t=this.minValue:this.minValue=t,n===void 0?n=this.maxValue:this.maxValue=n,this.easeValueTask===void 0&&(this.easeValueTask=new Qe(this),this.easeValueTask.on("update",function(){this.setValue(this.value,this.minValue,this.maxValue)},this)),this.easeValueTask.restart({key:"value",to:e,duration:this.easeValueDuration}),this}};class Fv extends pt{constructor(t,n){super(t,n),this.type="rexNameValueLabel",yk.call(this,t,n),this.setEaseValueDuration(1e3)}get nameText(){var t=this.childrenMap.name;return t===void 0?"":t.text}set nameText(t){var n=this.childrenMap.name;n!==void 0&&n.setText(t)}setNameText(t){return this.nameText=t,this}get valueText(){var t=this.childrenMap.value;return t===void 0?"":t.text}set valueText(t){var n=this.childrenMap.value;n!==void 0&&n.setText(t)}setValueText(t){return this.valueText=t,this}get barValue(){var t=this.childrenMap.bar;if(t!==void 0)return t.value}set barValue(t){var n=this.childrenMap.bar;n!==void 0&&n.setValue(t)}setBarValue(t,n,s){var o=this.childrenMap.bar;return o===void 0||o.setValue(t,n,s),this}easeBarValueTo(t,n,s){var o=this.childrenMap.bar;return o===void 0||o.easeValueTo(t,n,s),this}setTexture(t,n){var s=this.childrenMap.icon;if(s!==void 0)return s.setTexture(t,n),this}get texture(){var t=this.childrenMap.icon;if(t!==void 0)return t.texture}get frame(){var t=this.childrenMap.icon;if(t!==void 0)return t.frame}postLayout(t,n,s){var o=this.childrenMap.iconMask;o&&(o.setPosition(),this.resetChildPositionState(o));var i=this.childrenMap.actionMask;return i&&(i.setPosition(),this.resetChildPositionState(i)),super.postLayout(t,n,s),this}resize(t,n){super.resize(t,n);var s=this.childrenMap.iconMask;s&&s.resize();var o=this.childrenMap.actionMask;return o&&o.resize(),this}}Object.assign(Fv.prototype,Tk);class wk extends im{constructor(t){super(),this.setTable(xt(t,"table")),this.setMaxLevel(xt(t,"maxLevel"));var n=xt(t,"exp",0),s=xt(t,"level",void 0);s===void 0||this.checkLevel(s,n)||(console.error(`Level ${s} and Exp ${n} are mismatch`),s=void 0),this.resetExp(n,s)}setTable(t){return this.levelTable=t,this.isLevelMapFunction=ti(t),this}setMaxLevel(t){var n;return t===void 0&&(t=Array.isArray(this.levelTable)?this.levelTable.length-1:-1),n=t!==-1?this.getExp(t):-1,this.hasMaxLevel=t!==-1,this.maxLevel=t,this.maxExp=n,this}resetExp(t,n){return this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),n===void 0&&(n=this.getLevel(t)),this._exp=t,this._level=n,this._requiredExp=this.getRequiredExpToNextLevel(n,t),this}get exp(){return this._exp}set exp(t){if(this.hasMaxLevel&&t>this.maxExp&&(t=this.maxExp),t<this._exp)this.resetExp(t);else if(t!==this._exp){for(var n,s=this.getLevel(t,this._level),o=this._level,i=this._exp;;){var r=this.getExp(o),h=this.getExp(o+1);if(n=Math.min(h,t),this.emit("levelup",o,i,n,r,h),o===s&&n===t)break;o++,i=h}this.resetExp(t,s)}}get level(){return this._level}set level(t){this.hasMaxLevel&&t>this.maxLevel?this.exp=this.maxExp:this.exp=this.getExp(t)}get requiredExp(){return this._requiredExp}getExp(t){return t===void 0?this._exp:this.isLevelMapFunction?this.levelTable(t):(this.hasMaxLevel&&t>this.maxLevel&&(t=this.maxLevel),this.levelTable[t])}getLevel(t,n){if(t===void 0)return this._level;for(n===void 0&&(n=0);;){var s=this.getExp(n+1);if(s>t||(n++,this.hasMaxLevel&&s===this.maxExp))break}return n}getRequiredExpToNextLevel(t,n){return t===void 0&&(t=this.level),n===void 0&&(n=this.exp),this.getExp(t+1)-n}checkLevel(t,n){return n>=this.getExp(t)&&n<this.getExp(t+1)}gainExp(t,n,s){return n&&this.on("levelup",n,s),this.exp+=t,n&&this.off("levelup",n,s),this}setExp(t,n,s){return n&&this.on("levelup",n,s),this.exp=t,n&&this.off("levelup",n,s),this}setLevel(t,n,s){return n&&this.on("levelup",n,s),this.level=t,n&&this.off("levelup",n,s),this}}var jl=function(e,t,n){var s,o=xt(n,"reverse",!1);if(ei(e[0]))if(o)for(i=(r=e.length)-1;i>=0;i--)s=jl(e[i],t,n);else for(var i=0,r=e.length;i<r;i++)s=jl(e[i],t,n);else s=Sk(e,t,n);return s},Sk=function(e,t,n){var s,o=xt(n,"argsConvert",void 0),i=xt(n,"argsConvertScope",void 0),r=e[0];if(Ts=wo(Ts,e,1),o){o===!0&&(o=lu,i=void 0);for(var h=0,a=Ts.length;h<a;h++)Ts[h]=i?o.call(i,Ts[h],e):o(Ts[h],e)}return typeof r=="string"?(s=t[r])==null&&(s=xt(t,r,null)):s=r,s.apply(t,Ts)},Ts=[];const Ke=Phaser.Utils.Objects.GetValue;class Bv extends Rt{constructor(t,n){super(t,n);var s=Ke(n,"clock",void 0);s||(s=new $g(t)),this.clock=s,this.clock.on("update",this.update,this),this.commands=[],this.resetFromJSON(n)}resetFromJSON(t){return this.clock.resetFromJSON(Ke(t,"clock",void 0)),this.state=Ke(t,"state",0),this.commands=Ke(t,"commands",[]),this.scope=Ke(t,"scope",void 0),this.setTimeUnit(Ke(t,"timeUnit",0)),this.setDtMode(Ke(t,"dtMode",0)),this.index=Ke(t,"index",0),this.nextTime=Ke(t,"nextTime",0),this}toJSON(){return{clock:this.clock.toJSON(),state:this.state,commands:this.commands,scope:this.scope,timeUnit:this.timeUnit,dtMode:this.dtMode,index:this.index,nextTime:this.nextTime}}shutdown(t){this.isShutdown||(this.clock.shutdown(t),this.commands=void 0,super.shutdown(t))}load(t,n,s){this.stop();var o=Ke(s,"timeUnit",void 0);o!==void 0&&this.setTimeUnit(o);var i=Ke(s,"dtMode",void 0);return i!==void 0&&this.setDtMode(i),t=t.filter(function(r){var h=r[0];return!isNaN(h)}).map(function(r){return typeof r[0]=="string"&&(r[0]=parseFloat(r[0])),r}),this.dtMode===0&&t.sort(function(r,h){var a=r[0],u=h[0];return a>u?1:a<u?-1:0}),wo(this.commands,t),this.scope=n,this}clear(){return this.commands.length=0,this}append(t,n,...s){var o;return o=Array.isArray(n)?n:[n,...s],this.commands.push([t,o]),this}start(t){return t===void 0&&(t=0),this.stop(),this.index=0,this.state=1,this.nextTime=this.getNextDt(0),this.clock.start(t),this.update(t),this.emit("start",this.parent,this),this}pause(){return this.clock.pause(),this.emit("pause",this.parent,this),this}resume(){return this.clock.resume(),this.emit("resume",this.parent,this),this}stop(){return this.clock.stop(),this.state=0,this.emit("stop",this.parent,this),this}seek(t){return this.clock.seek(t),this}seekToNext(){return this.seek(this.nextTime),this}get isPlaying(){return this.clock.isRunning}get completed(){return this.state===2}get timeScale(){return this.clock.timeScale}set timeScale(t){this.clock.timeScale=t}setTimeScale(t){return this.timeScale=t,this}get now(){return this.clock.now}update(t){if(this.nextTime>t)return this;for(var n=this.commands;;){var s=n[this.index],o=s[1];if(ei(o)||(o=wo(Ck,s,1)),jl(o,this.scope),this.emit("runcommand",o,this.scope),this.index>=n.length-1)return this.nextTime=0,this.complete(),this;if(this.index++,this.nextTime=this.getNextDt(this.nextTime),this.nextTime>t)return this}}complete(){this.clock.stop(),this.state=2,this.emit("complete",this.parent,this)}getNextDt(t){var n=this.commands[this.index][0];return this.timeUnit===1&&(n*=1e3),this.dtMode===1&&(n+=t),n}setDtMode(t){return typeof t=="string"&&(t=Pk[t]),this.dtMode=t,this}setTimeUnit(t){return typeof t=="string"&&(t=Ek[t]),this.timeUnit=t,this}}var Ck=[];const Ek={ms:0,s:1,sec:1},Pk={abs:0,absolute:0,inc:1,increment:1};var Ok=function(e,t,n,s,o){var i=(n-t)/(o-s)*this.totalEaseDuration,r=n===o?e+1:e;this.player.append(0,this.setEaseValueDuration,i).append(0,this.easeValueTo,n,s,o).append(0,this.emit,"levelup.start",e,t,n,this).append(i,Ht).append(0,this.emit,"levelup.end",r,t,n,this),this.player.isPlaying||this.player.start()};const kk={setExpTable(e){return this.levelCounter.setTable(e),this},resetExp(e){return this.levelCounter.resetExp(e),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1)),this},getExp(e){return this.levelCounter.getExp(e)},getLevel(e,t){return this.levelCounter.getLevel(e,t)},getRequiredExpToNextLevel(e,t){return this.levelCounter.getRequiredExpToNextLevel(e,t)},gainExp(e){return this.levelCounter.gainExp(e),this},setExp(e){return this.levelCounter.setExp(e),this},setLevel(e){return this.levelCounter.setLevel(e),this}},sp=Phaser.Utils.Objects.GetValue;Object.assign((class extends Fv{constructor(e,t){super(e,t),this.type="rexExpBar",this.setTotalEaseDuration(sp(t,"easeDuration",1e3)),this.levelCounter=new wk(sp(t,"levelCounter")),this.player=new Bv(this,{scope:this,dtMode:1}),this.levelCounter.on("levelup",Ok,this),this.player.on("complete",function(){this.player.clear(),this.emit("levelup.complete",this.level,this)},this),this.setValue(this.exp,this.getExp(this.level),this.getExp(this.level+1))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.levelCounter.destroy(),this.levelCounter=void 0,this.player.destroy(),this.player=void 0,super.destroy(e))}get exp(){return this.levelCounter.exp}set exp(e){this.levelCounter.exp=e}get level(){return this.levelCounter.level}set level(e){this.levelCounter.level=e}get requiredExp(){return this.levelCounter.requiredExp}setTotalEaseDuration(e){return this.totalEaseDuration=e,this}}).prototype,kk);const $a=pt.prototype.add,np=pt.prototype.addSpace;var xl=function(e){var t=!e.isRexSpace,n=!t||this.buttonsExpand?1:0;if(this.sizerChildren.length===0)if(t){!this.buttonsExpand&&(this.buttonsAlign==="right"||this.buttonsAlign==="center"||this.buttonsAlign==="bottom")&&np.call(this),$a.call(this,e,{proportion:n,expand:!0});var s=!this.buttonsExpand&&this.buttonsAlign==="center";s&&np.call(this),this.hasTailSpace=s}else $a.call(this,e,{proportion:n,expand:!0}),this.hasTailSpace=!1;else if(this.hasTailSpace){var o=this.sizerChildren.length-1;$a.call(this,e,{index:o,proportion:n,expand:!0})}else $a.call(this,e,{proportion:n,expand:!0});return t&&this.buttonGroup.add(e),this};const Mk={addButton(e){if(ei(e))for(var t=e,n=0,s=t.length;n<s;n++)xl.call(this,t[n]);else xl.call(this,e);return this},addButtons(e){for(var t=0,n=e.length;t<n;t++)xl.call(this,e[t]);return this}},_k=pt.prototype.remove,Ak=pt.prototype.clear;var bl=function(e,t){return this.getParentSizer(e)!==this||(this.buttonGroup.remove(e),_k.call(this,e,t)),this};const Rk={remove(e,t){if(ei(e))for(var n=e,s=0,o=n.length;s<o;s++)bl.call(this,n[s],t);else bl.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,Ak.call(this,e),this},removeButton(e,t){return(e=this.getButton(e))?(this.remove(e,t),this):this},clearButtons(e){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)bl.call(this,t[n],e);return this}};var Lk=function(e,t,n){if(e){var s=this.setValueCallback,o=this.setValueCallbackScope;s&&(o?s.call(o,e,t,n):s(e,t,n)),this.fireEvent("button.statechange",e,t,n)}},Dk=function(e){var t=this;e._selected=void 0,Object.defineProperty(e,"selected",{get:function(){return e._selected},set:function(n){if(e._selected!==n){var s=e._selected;e._selected=n,Lk.call(t,e,n,s)}},enumerable:!0,configurable:!0}),e.selected=!1};const Fk={add(e){return this.buttons.push(e),e._click||(e._click=new Nr(e,this.clickConfig),e._click.on("click",function(t,n,s,o){this.fireEvent("button.click",n,s,o)},this).on("enable",function(t,n){this.fireEvent("button.enable",n)},this).on("disable",function(t,n){this.fireEvent("button.disable",n)},this).on("over",function(t,n,s,o){this.fireEvent("button.over",n,s,o)},this).on("out",function(t,n,s,o){this.fireEvent("button.out",n,s,o)},this).on("down",function(t,n,s,o){this.fireEvent("button.down",n,s,o)},this).on("up",function(t,n,s,o){this.fireEvent("button.up",n,s,o)},this),e.isRexContainerLite&&e.sendChildToBack(e)),this.buttonsType&&(e.name===void 0&&console.error(`${this.parent.constructor.name}: Option button miss value`),Dk.call(this,e)),this},addMultiple(e){for(var t=0,n=e.length;t<n;t++)this.add(e[t]);return this}},Bk=Phaser.Utils.Array.Remove,Ik={remove(e){return this.buttonsType&&delete e.selected,Bk(this.buttons,e),this},clear(){if(this.buttonsType)for(var e=this.buttons,t=0,n=e.length;t<n;t++)delete e[t].selected;return this.buttons.length=0,this}},cr=Phaser.Utils.Objects.GetValue,Xk={setButtonsType(e){e===void 0&&(e={});var t,n,s=cr(e,"buttonsType",e.type);if(this.buttonsType=s,!this.buttonsType)return this;switch(t=cr(e,"setValueCallback",void 0),n=cr(e,"setValueCallbackScope",void 0),t===void 0&&(t=cr(e,"setButtonStateCallback",void 0),n=cr(e,"setButtonStateCallbackScope",void 0)),this.setValueCallback=t,this.setValueCallbackScope=n,s){case"radio":this.setRadioType();break;case"checkboxes":this.setCheckboxesType()}return this},setRadioType(){var e=this.parent,t=this.buttons;e._value=void 0;var n=void 0;return Object.defineProperty(e,"value",{get:function(){return e._value},set:function(s){if(e._value!==s){e._value=s;for(var o=0,i=t.length;o<i;o++){var r=t[o];r.rexSizer.hidden||(n===void 0?r.name===s?r.selected=!0:r.selected=!1:r.selected=n===o)}}},enumerable:!0,configurable:!0}),e.on("button.click",function(s){n=this.buttons.indexOf(s),e.value=s.name,n=void 0},this),this},setCheckboxesType(){return this.parent.on("button.click",function(e){e.selected=!e.selected}),this},clearAllButtonsState(){for(var e=this.buttons,t=0,n=e.length;t<n;t++)e[t].selected=!1;return this},getAllButtonsState(){for(var e={},t=this.buttons,n=0,s=t.length;n<s;n++){var o=t[n];o.rexSizer.hidden||(e[o.name]=o.selected)}return e},setSelectedButtonName(e){return this.parent.value=e,this},getSelectedButtonName(){return this.parent.value},setButtonState(e,t){t===void 0&&(t=!0);for(var n=this.buttons,s=0,o=n.length;s<o;s++){var i=n[s];if(!i.rexSizer.hidden&&i.name===e){i.selected=t;break}}return this},getButtonState(e){for(var t=this.buttons,n=0,s=t.length;n<s;n++){var o=t[n];if(!o.rexSizer.hidden&&o.name===e)return o.selected}}};var rp=function(e,t){return e?e.hasOwnProperty("name")?e.name===t?e:null:GetElementByName(e,t):null};const Wo={getButton(e){var t,n=this.buttons;switch(typeof e){case"number":t=n[e];break;case"string":t=function(s,o){if(!s)return null;if(ei(s)){for(var i,r=0,h=s.length;r<h;r++)if(i=rp(s[r],o))return i}else for(var a in s)if(i=rp(s[a],o))return i}(n,e);break;default:t=e,n.indexOf(t)===-1&&(t=void 0)}return t},getButtons(){return this.buttons},hasAnyButton(){return this.buttons.length>0},setButtonEnable(e,t){var n=this.buttons;if(e===void 0||typeof e=="boolean"){t=e;for(var s=0,o=n.length;s<o;s++)n[s]._click.setEnable(t)}else this.getButton(e)._click.setEnable(t);return this},toggleButtonEnable(e){var t=this.buttons;if(e===void 0||typeof e=="boolean")for(var n=0,s=t.length;n<s;n++)t[n]._click.toggleEnable();else this.getButton(e)._click.toggleEnable();return this},getButtonEnable(e){return e===void 0&&(e=0),this.getButton(e)._click.enable},emitButtonClick(e){return(this.buttonGroup?this.buttonGroup:this).fireEvent("button.click",e),this},emitButtonOver(e){for(var t=this.buttonGroup?this.buttonGroup:this,n=this.buttons,s=0,o=n.length;s<o;s++)(i=n[s])._click.isOver&&(i._click.isOver=!1,t.fireEvent("button.out",i));var i;return(i=this.getButton(e))&&(i._click.isOver=!0,t.fireEvent("button.over",i)),this},showButton(e){return _s(this.getButton(e)),this},hideButton(e){return As(this.getButton(e)),this},isButtonShown(e){return Ym(this.getButton(e)),this},forEachButtton(e,t){for(var n=this.buttons,s=0,o=n.length;s<o;s++)t?e.call(t,n[s],s,n):e(n[s],s,n);return this}};class Vo{constructor(t){this.parent=t.parent,this.eventEmitter=t.eventEmitter,this.groupName=t.groupName,this.clickConfig=t.clickConfig,this.buttonsType=void 0,this.buttons=[]}destroy(){this.parent=void 0,this.eventEmitter=void 0,this.clickConfig=void 0,this.buttons=void 0}}Object.assign(Vo.prototype,Fk,Ik,Xk,Wo,{fireEvent:function(e,t,...n){if(this.buttons){var s;if(typeof t=="number"){if(s=t,!(t=this.buttons[s]))return}else if((s=this.buttons.indexOf(t))===-1)return;this.eventEmitter!==this.parent&&this.parent.emit(e,t,s,...n),this.groupName!==void 0?this.eventEmitter.emit(e,t,this.groupName,s,...n):this.eventEmitter.emit(e,t,s,...n)}}});const Gu={clearAllButtonsState(){return this.buttonGroup.clearAllButtonsState(),this},getAllButtonsState(){return this.buttonGroup.getAllButtonsState()},setSelectedButtonName(e){return this.buttonGroup.setSelectedButtonName(e),this},getSelectedButtonName(){return this.buttonGroup.getSelectedButtonName()},setButtonState(e,t){return this.buttonGroup.setButtonState(e,t),this},getButtonState(e){return this.buttonGroup.getButtonState(e)}},ws=Phaser.Utils.Objects.GetValue;let de=class extends pt{constructor(e,t){t===void 0&&(t={});var n=t.space;typeof n=="number"&&(t.space={item:n}),super(e,t),this.type="rexButtons",this.buttonGroup=new Vo({parent:this,eventEmitter:ws(t,"eventEmitter",this),groupName:ws(t,"groupName",void 0),clickConfig:ws(t,"click",void 0)}).setButtonsType(t);var s=ws(t,"background",void 0),o=ws(t,"buttons",void 0);this.buttonsExpand=ws(t,"expand",!1),this.buttonsAlign=ws(t,"align",void 0),s&&this.addBackground(s),o&&this.addButtons(o),this.addChildrenMap("background",s),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(e){this.buttonGroup.groupName=e}get eventEmitter(){return this.buttonGroup.eventEmitter}};Object.assign(de.prototype,Mk,Rk,Wo,Gu);const zk=Bi.prototype.add,Yk={addButton(e,t,n){return zk.call(this,e,t,n,void 0,0,this.buttonsExpand),this.buttonGroup.add(e),this},addButtons(e,t){for(var n=0,s=e;n<s;n++)this.addButton(e[n],void 0,t);return this}},Nk=Bi.prototype.remove,Gk=Bi.prototype.clear;var Tl=function(e,t){return(e=this.getButton(e))?(this.buttonGroup.remove(e),Nk.call(this,e,t),this):this};const Uk={remove(e,t){if(ei(e))for(var n=e,s=0,o=n.length;s<o;s++)Tl.call(this,n[s],t);else Tl.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,Gk.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)Tl.call(this,t[n],e);return this}},ui=Phaser.Utils.Objects.GetValue;class Iv extends Bi{constructor(t,n){n===void 0&&(n={});var s=ui(n,"row",0),o=ui(n,"column",n.col||0),i=ui(n,"createCellContainerCallback"),r=ui(n,"buttons",void 0),h=ui(n,"expand",!0),a=h?1:0;if(i&&(n.createCellContainerCallback=void 0),r!==void 0){s=Math.max(s,r.length);for(var u=0,l=r.length;u<l;u++)o=Math.max(o,r[u].length)}n.row=s,n.column=o,n.columnProportions=a,n.rowProportions=a,super(t,n),this.type="rexGridButtons",this.buttonGroup=new Vo({parent:this,eventEmitter:ui(n,"eventEmitter",this),groupName:ui(n,"groupName",void 0),clickConfig:ui(n,"click",void 0)}).setButtonsType(n);var d=ui(n,"background",void 0);if(this.buttonsExpand=h,ui(n,"space",void 0),d&&this.addBackground(d),r)for(var c,p=0,f=r.length;p<f;p++)for(var v=0,g=(c=r[p]).length;v<g;v++)(x=c[v])&&this.addButton(x,v,p);else if(i)for(var y=0;y<s;y++)for(var m=0;m<o;m++){var x;(x=i(t,m,y))&&this.addButton(x,m,y)}this.addChildrenMap("background",d),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&!this.ignoreDestroy&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Iv.prototype,Yk,Uk,Wo,Gu);const Xv=Un.prototype.add;var Za=function(e){return Xv.call(this,e),this.buttonGroup.add(e),this};const Wk={addButton(e){if(ei(e))for(var t=e,n=0,s=t.length;n<s;n++)Za.call(this,t[n]);else Za.call(this,e);return this},addButtons(e){if(ei(e[0]))for(var t,n=e,s=0,o=n.length-1;s<=o;s++){for(var i=0,r=(t=n[s]).length;i<r;i++)Za.call(this,t[i]);s>o&&Xv.addNewLine(this)}else for(i=0,r=e.length;i<r;i++)Za.call(this,e[i]);return this}},Vk=Un.prototype.remove,jk=Un.prototype.clear;var wl=function(e,t){return(e=this.getButton(e))?(this.buttonGroup.remove(e),Vk.call(this,e,t),this):this};const Hk={remove(e,t){if(ei(e))for(var n=e,s=0,o=n.length;s<o;s++)wl.call(this,n[s],t);else wl.call(this,e,t);return this},clear(e){return this.buttonGroup.buttons.length=0,jk.call(this,e),this},removeButton(e,t){return this.remove(e,t),this},clearButtons(e){for(var t=this.buttonGroup.buttons,n=t.length-1;n>=0;n--)wl.call(this,t[n],e);return this}},gn=Phaser.Utils.Objects.GetValue;class Fn extends Un{constructor(t,n){n===void 0&&(n={});var s=n.space;typeof s=="number"&&(n.space={item:s,line:s}),super(t,n),this.type="rexFixWidthButtons",this.buttonGroup=new Vo({parent:this,eventEmitter:gn(n,"eventEmitter",this),groupName:gn(n,"groupName",void 0),clickConfig:gn(n,"click",void 0)}).setButtonsType(n);var o=gn(n,"background",void 0),i=gn(n,"buttons",void 0);this.buttonsAlign=gn(n,"align",void 0),o&&this.addBackground(o),i&&this.addButtons(i),this.addChildrenMap("background",o),this.addChildrenMap("buttons",this.buttonGroup.buttons)}destroy(t){this.scene&&!this.ignoreDestroy&&(super.destroy(t),this.buttonGroup.destroy(),this.buttonGroup=void 0)}get buttons(){return this.buttonGroup.buttons}get groupName(){return this.buttonGroup.groupName}set groupName(t){this.buttonGroup.groupName=t}get eventEmitter(){return this.buttonGroup.eventEmitter}}Object.assign(Fn.prototype,Wk,Hk,Wo,Gu);const Kk={setAccept(e){return this.childrenMap.fileChooser.setAccept(e),this},setMultiple(e){return this.childrenMap.fileChooser.setMultiple(e),this},loadFile(e,t,n,s,o){return this.childrenMap.fileChooser.loadFile(e,t,n,s,o),this},loadFilePromise(e,t,n,s){return this.childrenMap.fileChooser.loadFilePromise(e,t,n,s)}},ap=Phaser.Utils.Objects.GetValue;Object.assign((class extends Ws{constructor(e,t){super(e,t),this.type="rexFileSelectorButton";var n=new Ru(e);e.add.existing(n),this.addBackground(n),this.addChildrenMap("fileChooser",n),this.setAccept(ap(t,"accept","")),this.setMultiple(ap(t,"multiple",!1)),n.on("change",function(s){var o=s.files;o.length!==0&&(o=Array.from(o),this.emit("select",o,this))},this)}get files(){return this.childrenMap.fileChooser.files}}).prototype,Kk);const qk={getChoice(e){var t=this.childrenMap.choicesSizer;return t?t.getButton(e):void 0},getAction(e){return this.childrenMap.actionsSizer.getButton(e)},getToolbar(e){return this.childrenMap.toolbarSizer.getButton(e)},getLeftToolbar(e){return this.childrenMap.leftToolbarSizer.getButton(e)},setChoiceEnable(e,t){var n=this.childrenMap.choicesSizer;return n&&n.setButtonEnable(e,t),this},setActionEnable(e,t){return this.childrenMap.actionsSizer.setButtonEnable(e,t),this},setToolbarEnable(e,t){return this.childrenMap.toolbarSizer.setButtonEnable(e,t),this},setLeftToolbarEnable(e,t){return this.childrenMap.leftToolbarSizer.setButtonEnable(e,t),this},toggleChoiceEnable(e){var t=this.childrenMap.choicesSizer;return t&&t.toggleButtonEnable(e),this},toggleActionEnable(e){return this.childrenMap.actionsSizer.toggleButtonEnable(e),this},toggleToolbarEnable(e){return this.childrenMap.toolbarSizer.toggleButtonEnable(e),this},toggleLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.toggleButtonEnable(e),this},getChoiceEnable(e){var t=this.childrenMap.choicesSizer;return!!t&&t.getButtonEnable(e)},getActionEnable(e){return this.childrenMap.actionsSizer.getButtonEnable(e)},getToolbarEnable(e){return this.childrenMap.toolbarSizer.getButtonEnable(e)},getLeftToolbarEnable(e){return this.childrenMap.leftToolbarSizer.getButtonEnable(e)},emitChoiceClick(e){var t=this.childrenMap.choicesSizer;return t&&t.emitButtonClick(e),this},emitActionClick(e){return this.childrenMap.actionsSizer.emitButtonClick(e),this},emitToolbarClick(e){return this.childrenMap.toolbarSizer.emitButtonClick(e),this},emitLeftToolbarClick(e){return this.childrenMap.leftToolbarSizer.emitButtonClick(e),this},showChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.showButton(e),this},showAction(e){return this.childrenMap.actionsSizer.showButton(e),this},showToolbar(e){return this.childrenMap.toolbarSizer.showButton(e),this},showLeftToolbar(e){return this.childrenMap.leftToolbarSizer.showButton(e),this},hideChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.hideButton(e),this},hideAction(e){return this.childrenMap.actionsSizer.hideButton(e),this},hideToolbar(e){return this.childrenMap.toolbarSizer.hideButton(e),this},hideLeftToolbar(e){return this.childrenMap.leftToolbarSizer.hideButton(e),this},addChoice(e){var t=this.childrenMap.choicesSizer;return t&&t.addButton(e),this},addAction(e){return this.childrenMap.actionsSizer.addButton(e),this},addToolbar(e){return this.childrenMap.toolbarSizer.addButton(e),this},addLeftToolbar(e){return this.childrenMap.leftToolbarSizer.addButton(e),this},removeChoice(e,t){var n=this.childrenMap.choicesSizer;return n&&n.removeButton(e,t),this},removeAction(e,t){return this.childrenMap.actionsSizer.removeButton(e,t),this},removeToolbar(e,t){return this.childrenMap.toolbarSizer.removeButton(e,t),this},removeLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.removeButton(e,t),this},clearChoices(e){var t=this.childrenMap.choicesSizer;return t&&t.clearButtons(e),this},clearActions(e){return this.childrenMap.actionsSizer.clearButtons(e),this},clearToolbar(e){return this.childrenMap.toolbarSizer.clearButtons(e),this},clearLeftToolbar(e){return this.childrenMap.leftToolbarSizer.clearButtons(e),this},forEachChoice(e,t){var n=this.childrenMap.choicesSizer;return n&&n.forEachButtton(e,t),this},forEachAction(e,t){return this.childrenMap.actionsSizer.forEachButtton(e,t),this},forEachToolbar(e,t){return this.childrenMap.toolbarSizer.forEachButtton(e,t),this},forEachLeftToolbar(e,t){return this.childrenMap.leftToolbarSizer.forEachButtton(e,t),this},setAllButtonsEnable(e){return e===void 0&&(e=!0),this.childrenMap.toolbarSizer&&this.setToolbarEnable(e),this.childrenMap.leftToolbarSizer&&this.setLeftToolbarEnable(e),this.childrenMap.actionsSizer&&this.setActionEnable(e),this.childrenMap.choicesSizer&&this.setChoiceEnable(e),this},getChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e?e.getAllButtonsState():{}},getChoicesButtonState(e){var t=this.childrenMap.choicesSizer;return e===void 0?t?t.getAllButtonsState():{}:!!t&&t.getButtonState(e)},setChoicesButtonState(e,t){var n=this.childrenMap.choicesSizer;return n&&n.setButtonState(e,t),this},clearChoicesButtonStates(){var e=this.childrenMap.choicesSizer;return e&&e.clearAllButtonsState(),this},getChoicesSelectedButtonName(){var e=this.childrenMap.choicesSizer;return e?e.getSelectedButtonName():""},setChoicesSelectedButtonName(e){var t=this.childrenMap.choicesSizer;return t&&t.setSelectedButtonName(e),this},hasAnyChoice(){var e=this.childrenMap.choicesSizer;return!!e&&e.hasAnyButton()},hasAnyAction(){var e=this.childrenMap.actionsSizer;return!!e&&e.hasAnyButton()},hasAnyToolbar(){var e=this.childrenMap.toolbarSizer;return!!e&&e.hasAnyButton()},hasAnyLeftToolbar(){var e=this.childrenMap.leftToolbarSizer;return!!e&&e.hasAnyButton()}},$k={onCreateModalBehavior(e){e.on("button.click",function(t,n,s,o,i){var r=!1;switch(n){case"actions":r=!0;break;case"choices":e.hasAnyAction()||(r=!0)}if(r){var h={index:s,text:t.text,button:t,dialog:e};switch(e.buttonsType){case"radio":h.value=e.getChoicesSelectedButtonName();break;case"checkboxes":h.value=e.getChoicesButtonStates();break;default:h.value=void 0}e.modalClose(h)}})},modal(e,t){return e&&e.defaultBehavior===!1?this.onCreateModalBehavior=!1:delete this.onCreateModalBehavior,Yo.modal.call(this,e,t),this}};var zv={};Object.assign(zv,qk,$k);const tt=Phaser.Utils.Objects.GetValue;class Uu extends pt{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexDialog",this.eventEmitter=tt(n,"eventEmitter",this);var s,o,i,r,h=tt(n,"background",void 0),a=tt(n,"title",void 0),u=tt(n,"toolbar",void 0),l=tt(n,"toolbarBackground",void 0),d=tt(n,"leftToolbar",void 0),c=tt(n,"leftToolbarBackground",void 0),p=tt(n,"content",void 0),f=tt(n,"description",void 0),v=tt(n,"choices",void 0),g=tt(n,"choicesBackground",void 0),y=tt(n,"actions",void 0),m=tt(n,"actionsBackground",void 0),x=tt(n,"click",void 0);if(h&&this.addBackground(h),u&&(i=new de(t,{groupName:"toolbar",background:l,buttons:u,orientation:0,space:{item:tt(n,"space.toolbarItem",0)},click:x,eventEmitter:this.eventEmitter}),t.add.existing(i)),d&&(r=new de(t,{groupName:"leftToolbar",background:c,buttons:d,orientation:0,space:{item:tt(n,"space.leftToolbarItem",0)},click:x,eventEmitter:this.eventEmitter}),t.add.existing(r)),a||u||d){var b,w=!!a&&tt(n,"expand.title",!0),T=tt(n,"align.title","center"),S=!(a&&!w&&T==="center"||!a&&(u||d));b=S?new pt(t,{orientation:0}):new Fi(t),t.add.existing(b);var C=!!S||{height:!0};if(r&&b.add(r,{align:"left",expand:C}),a){S&&!w&&T==="right"&&b.addSpace();var E={left:tt(n,"space.titleLeft",0),right:tt(n,"space.titleRight",0)},M=w?1:0;b.add(a,{align:T,proportion:M,expand:C,padding:E}),S&&!w&&T==="left"&&b.addSpace()}i&&(S&&!a&&b.addSpace(),b.add(i,{align:"right",expand:C})),(p||f||v||y)&&(E={bottom:tt(n,"space.title",0),top:tt(n,"space.titleTop",0)}),M=tt(n,"proportion.title",0),this.add(b,{padding:E,proportion:M,expand:!0})}if(p){var _=tt(n,"align.content","center"),O=tt(n,"space.content",0),k=(E={left:tt(n,"space.contentLeft",0),right:tt(n,"space.contentRight",0),bottom:f||v||y?O:0},M=tt(n,"proportion.content",0),tt(n,"expand.content",!0));this.add(p,{align:_,padding:E,proportion:M,expand:k})}if(f){_=tt(n,"align.description","center");var P=tt(n,"space.description",0);E={left:tt(n,"space.descriptionLeft",0),right:tt(n,"space.descriptionRight",0),bottom:v||y?P:0},M=tt(n,"proportion.description",0),k=tt(n,"expand.description",!0),this.add(f,{align:_,padding:E,proportion:M,expand:k})}if(v){var A=tt(n,"choicesType","").split("-"),L=fr(A,"wrap")?Fn:fr(A,"grid")?Iv:de,D=fr(A,"radio")?"radio":fr(A,"checkboxes")?"checkboxes":void 0,F={left:tt(n,"space.choicesBackgroundLeft",0),right:tt(n,"space.choicesBackgroundRight",0),top:tt(n,"space.choicesBackgroundTop",0),bottom:tt(n,"space.choicesBackgroundBottom",0)},X=tt(n,"space.choice",0);L===de?F.item=X:L===Fn?(F.item=X,F.line=tt(n,"space.choiceLine",X)):(F.column=tt(n,"space.choiceColumn",X),F.row=tt(n,"space.choiceRow",X));var z={width:tt(n,"choicesWidth",void 0),height:tt(n,"choicesHeight",void 0),groupName:"choices",buttonsType:D,background:g,buttons:v,space:F,click:x,eventEmitter:this.eventEmitter,setValueCallback:tt(n,"choicesSetValueCallback",void 0),setValueCallbackScope:tt(n,"choicesSetValueCallbackScope",void 0)};L===de&&(z.orientation=fr(A,"x")?0:1),s=new L(t,z),t.add.existing(s);var Y=tt(n,"space.choices",0);E={left:tt(n,"space.choicesLeft",0),right:tt(n,"space.choicesRight",0),bottom:y?Y:0},_=tt(n,"align.choices","center"),M=tt(n,"proportion.choices",0),k=tt(n,"expand.choices",!0),this.add(s,{align:_,padding:E,proportion:M,expand:k}),this.buttonsType=D}y&&(o=new de(t,{groupName:"actions",background:m,buttons:y,orientation:0,space:{item:tt(n,"space.action",0)},expand:tt(n,"expand.actions",!1),align:tt(n,"align.actions","center"),click:x,eventEmitter:this.eventEmitter}),t.add.existing(o),E={left:tt(n,"space.actionsLeft",0),right:tt(n,"space.actionsRight",0),bottom:tt(n,"space.actionsBottom",0)},M=tt(n,"proportion.action",0),this.add(o,{align:"center",padding:E,proportion:M,expand:!0})),pr(this,"click"),pr(this,"over"),pr(this,"out"),pr(this,"enable"),pr(this,"disable"),this.addChildrenMap("background",h),this.addChildrenMap("title",a),this.addChildrenMap("toolbar",u),this.addChildrenMap("leftToolbar",d),this.addChildrenMap("content",p),this.addChildrenMap("description",f),this.addChildrenMap("choices",s?s.buttons:void 0),this.addChildrenMap("actions",o?o.buttons:void 0),this.addChildrenMap("choicesSizer",s),this.addChildrenMap("actionsSizer",o),this.addChildrenMap("toolbarSizer",i),this.addChildrenMap("leftToolbarSizer",r)}}var fr=function(e,t){return e.indexOf(t)!==-1},op={actions:"action",choices:"choice",toolbar:"toolbar",leftToolbar:"leftToolbar"},pr=function(e,t){e.on(`button.${t}`,function(n,s,o,i,r){op.hasOwnProperty(s)&&e.emit(`${op[s]}.${t}`,n,o,i,r)})};Object.assign(Uu.prototype,zv);var be=function(e,t,n){var s=new Nu(e,t,n);return e.add.existing(s),s},Zk=function(e){var t=this.childrenMap.title;(e=e.title)===null?t.hide():(t.show(),t.resetDisplayContent(e))},Jk=function(e){var t=this.childrenMap.content;if((e=e.content)===null)t.hide();else if(t.show(),t.resetDisplayContent)t.resetDisplayContent(e);else{var n=e||"";t.setText(n)}},Qk=function(e){var t=this.childrenMap.actions;if(t){var n=e.buttons;if(n){for(var s=this.scene,o=this.defaultActionConfig,i=this.defaultActionButtonCreator,r=0,h=n.length;r<h;r++){var a=n[r],u=t[r];u||(u=be(s,o,i),this.addAction(u)),u.show().resetDisplayContent(a)}for(this.buttonMode=n.length,r=n.length,h=t.length;r<h;r++)t[r].hide()}else{var l=t[0];l&&(e.buttonA===null?l.hide():(l.show(),l.resetDisplayContent(e.buttonA)));var d=t[1];d&&(e.buttonB===null?d.hide():(d.show(),d.resetDisplayContent(e.buttonB)))}}},tM=function(e){var t=this.childrenMap.choices;if(t){var n=e.choices;n||(n=[]);for(var s=this.scene,o=this.defaultChoiceConfig,i=this.defaultActionButtonCreator,r=0,h=n.length;r<h;r++){var a=n[r];typeof a=="string"&&(a={text:a});var u,l=t[r];l||(l=be(s,o,i),this.addChoice(l)),l.show().resetDisplayContent(a),u=a.hasOwnProperty("value")?a.value:a.text,l.setName(u)}for(r=n.length,h=t.length;r<h;r++)t[r].hide()}};const eM=Phaser.Utils.Objects.Merge,iM={setConfirmButtonIndex(e){return this.confirmButtonIndex=e,this},setCancelButtonIndex(e){return this.cancelButtonIndex=e,this}};var Yv={resetDisplayContent:function(e){return e===void 0&&(e={}),Zk.call(this,e),Jk.call(this,e),Qk.call(this,e),tM.call(this,e),this},modal:function(e,t){var n;ti(e)&&(t=e,e=void 0),e===void 0&&(e={}),e=eM(e,this.modalStyle),n=this.buttonMode===0&&!this.hasAnyChoice(),e.hasOwnProperty("anyTouchClose")||(e.anyTouchClose=n),e.hasOwnProperty("manualClose")||(e.manualClose=!n);var s=this;return Yo.modal.call(this,e,function(o){var i=o.index;i===s.confirmButtonIndex?s.emit("confirm",o):i===s.cancelButtonIndex&&s.emit("cancel",o),t&&t(o)}),this}};Object.assign(Yv,iM);var sM=function(e){e.setHoverState&&e.setHoverState(!0)},nM=function(e){e.setHoverState&&e.setHoverState(!1)},rM=function(e,t,n,s){e.setActiveState&&e.setActiveState(s)},aM=function(e){e.setDisableState&&e.setDisableState(!1)},oM=function(e){e.setDisableState&&e.setDisableState(!0)},Nv=function(){this.on("button.over",sM).on("button.out",nM).on("button.enable",aM).on("button.disable",oM).on("button.statechange",rM)};const hM=Phaser.Utils.Objects.GetValue,Sl=Phaser.Utils.Objects.GetValue;Object.assign((class extends Uu{constructor(e,t,n){t=t?Ne(t):{},n===void 0&&(n={});var s=Sl(n,"background",ce);t.background=s(e,t.background),t.title=be(e,t.title,n.title),t.content=function(p,f,v){var g,y=hM(f,"$type");return y===void 0&&f&&(f.hasOwnProperty("slider")||f.hasOwnProperty("scroller"))&&(y="textarea"),g=y==="textarea"?new Rv(p,f,v):new be(p,f,v),p.add.existing(g),g}(e,t.content,n.content),t.content instanceof Yu&&Mi(t,"height")&&!Mi(t,"proportion.content")&&gi(t,"proportion.content",1);var o=t.button,i=t.buttonA||o,r=t.buttonB||o,h=t.buttonMode;h===void 0&&(h=i&&r?2:i?1:0);var a=n.button,u=n.buttonA||a,l=n.buttonB||a;switch(h){case 2:t.actions=[be(e,i,u),be(e,r,l)];break;case 1:t.actions=[be(e,i,u)];break;case 0:break;default:t.actions=[]}var d=t.choice;d&&(t.choices=[]),super(e,t),this.type="rexConfirmDialog",this.buttonMode=h,this.defaultActionConfig=o,this.defaultActionButtonCreator=a,this.defaultChoiceConfig=d,this.defaultChoiceCreator=n.choice;var c=this.childrenMap.actions;this.addChildrenMap("buttonA",c?c[0]:null),this.addChildrenMap("buttonB",c?c[1]:null),Nv.call(this),this.setConfirmButtonIndex(Sl(t,"confirmButtonIndex",0)),this.setCancelButtonIndex(Sl(t,"cancelButtonIndex",1)),this.modalStyle=t.modal||{}}}).prototype,Yv),Phaser.Utils.Objects.GetValue;var lM=function(e){var t=this.childrenMap.title;e.title===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.title))},uM=function(e){var t=this.childrenMap.firstNameTitle;if(e.firstNameTitle===null)this.hide(t);else{this.show(t);var n=e.firstNameTitle||"";t.resetDisplayContent(n)}var s=this.childrenMap.firstNameInput;if(e.firstName===null)this.hide(s);else{this.show(s);var o=e.firstName||"";s.setText(o)}var i=this.childrenMap.lastNameTitle;if(e.lastNameTitle===null)this.hide(i);else{this.show(i);var r=e.lastNameTitle||"";i.resetDisplayContent(r)}var h=this.childrenMap.lastNameInput;if(e.lastName===null)this.hide(h);else{this.show(h);var a=e.lastName||"";h.setText(a)}},dM=function(e){var t=this.childrenMap.actions[0];e.button===null?this.hide(t):(this.show(t),t.resetDisplayContent(e.button))};const cM=Phaser.Utils.Objects.Merge;var fM={resetDisplayContent:function(e){return e===void 0&&(e={}),lM.call(this,e),uM.call(this,e),dM.call(this,e),this},modal:function(e,t){ti(e)&&(t=e,e=void 0),e===void 0&&(e={}),(e=cM(e,this.modalStyle)).anyTouchClose=!1,e.manualClose=!1;var n=this;return Yo.modal.call(this,e,function(s){s.firstName=n.firstName,s.lastName=n.lastName,n.emit("confirm",s),t&&t(s)}),this}},Mo=function(e,t,n){n===void 0&&(n=!0),n?t=t?Ne(t):{}:t||(t={});var s=new du(e,t);return e.add.existing(s),s};const Fe=Phaser.Utils.Objects.GetValue,pM=Phaser.Utils.Objects.GetValue;Object.assign((class extends Uu{constructor(e,t,n){t===void 0&&(t={}),n===void 0&&(n={}),t.orientation="y";var s=t.space;s&&(s.hasOwnProperty("names")&&(s.content=s.names),s.hasOwnProperty("namesLeft")&&(s.contentLeft=s.namesLeft),s.hasOwnProperty("namesRight")&&(s.contentRight=s.namesRight));var o=pM(n,"background",ce);t.background=o(e,t.background),t.title=be(e,t.title,n.title),t.content=function(r,h,a){var u=Ys(Fe(h,"layoutMode",0)),l=u===0,d=new pt(r,{orientation:u,space:{item:Fe(h,"space.firstName",0)}});r.add.existing(d);var c=new pt(r,{orientation:"x"});r.add.existing(c);var p=Fe(h,"firstNameTitle",h.nameTitle),f=be(r,p,a.firstNameTitle||a.nameTitle);c.add(f,{expand:!0,proportion:Fe(h,"proportion.firstNameTitle",0),padding:{right:Fe(h,"space.firstNameTitle",0)}});var v=h.nameInput||{},g=Fe(h,"firstNameInput",v),y=Mo(r,g,a.firstNameInput||a.nameInput),m=!g.hasOwnProperty("width");c.add(y,{expand:!0,proportion:m?1:0});var x=new pt(r,{orientation:"x"});r.add.existing(x);var b=Fe(h,"lastNameTitle",h.nameTitle),w=be(r,b,a.lastNameTitle||a.nameTitle);x.add(w,{expand:!0,proportion:Fe(h,"proportion.lastNameTitle",0),padding:{right:Fe(h,"space.lastNameTitle",0)}});var T=Fe(h,"firstNameInput",v),S=Mo(r,T,a.lastNameInput||a.nameInput),C=!T.hasOwnProperty("width");if(x.add(S,{expand:!0,proportion:C?1:0}),l){var E=Fe(h,"proportion.firstName",m?1:0);d.add(c,{expand:!0,proportion:E});var M=Fe(h,"proportion.lastName",C?1:0);d.add(x,{expand:!0,proportion:M})}else d.add(c,{expand:m,proportion:0}),d.add(x,{expand:C,proportion:0});return d.addChildrenMap("firstNameTitle",f),d.addChildrenMap("firstNameInput",y),d.addChildrenMap("lastNameTitle",w),d.addChildrenMap("lastNameInput",S),d}(e,t,n),t.actions=[be(e,t.button,n.button)],super(e,t),this.type="rexNameInputDialog";var i=t.content.childrenMap;this.addChildrenMap("firstNameTitle",i.firstNameTitle),this.addChildrenMap("firstNameInput",i.firstNameInput),this.addChildrenMap("lastNameTitle",i.lastNameTitle),this.addChildrenMap("lastNameInput",i.lastNameInput),this.addChildrenMap("button",t.actions[0]),Nv.call(this),this.modalStyle=t.modal||{}}get firstName(){return this.childrenMap.firstNameInput.text}set firstName(e){this.childrenMap.firstNameInput.setText(e)}setFirstName(e){return this.firstName=e,this}get lastName(){return this.childrenMap.lastNameInput.text}set lastName(e){this.childrenMap.lastNameInput.setText(e)}setLastName(e){return this.lastName=e,this}}).prototype,fM);var mn=function(e,t){if(e){var n=Ye(e);n&&n.remove(e,t)}};const Ja=Phaser.Utils.Objects.GetValue;var Zr=function(e,t,n){var s=Ja(e,`proportion.${t}`,n.proportion),o=Ja(e,`align.${t}`,"center"),i=Ja(e,`space.${t}`,void 0);if(typeof i=="number"&&n.paddingKey){var r=i;(i={})[n.paddingKey]=r}return{proportion:s,align:o,padding:i,expand:Ja(e,`expand.${t}`,!0)}},Qa=function(e){return Zr(e,"header",{proportion:0,paddingKey:"bottom"})},to=function(e){return Zr(e,"leftSide",{proportion:0,paddingKey:"right"})},eo=function(e){return Zr(e,"content",{proportion:1})},io=function(e){return Zr(e,"rightSide",{proportion:0,paddingKey:"left"})},so=function(e){return Zr(e,"footer",{proportion:0,paddingKey:"top"})},ki=function(e,t){var n=new pt(e,{orientation:t});return e.add.existing(n),n};const gM=Phaser.Utils.Objects.GetValue,hp=[function(e){var t=this.scene,n=e.header;n&&this.add(n,Qa(e));var s=ki(t,0);this.add(s,{proportion:1,align:"center",padding:0,expand:!0});var o=e.leftSide;o&&s.add(o,to(e));var i=e.content;i&&s.add(i,eo(e));var r=e.rightSide;r&&s.add(r,io(e));var h=e.footer;h&&this.add(h,so(e))},function(e){var t=this.scene,n=e.header;n&&this.add(n,Qa(e));var s=ki(t,0);this.add(s,{proportion:1,align:"center",padding:0,expand:!0});var o=e.leftSide;o&&s.add(o,to(e));var i=ki(t,1);s.add(i,{proportion:1,align:"center",padding:0,expand:!0});var r=ki(t,0);i.add(r,{proportion:1,align:"center",padding:0,expand:!0});var h=e.content;h&&r.add(h,eo(e));var a=e.rightSide;a&&r.add(a,io(e));var u=e.footer;u&&i.add(u,so(e))},function(e){var t=this.scene,n=e.header;n&&this.add(n,Qa(e));var s=ki(t,0);this.add(s,{proportion:1,align:"center",padding:0,expand:!0});var o=ki(t,1);s.add(o,{proportion:1,align:"center",padding:0,expand:!0});var i=ki(t,0);o.add(i,{proportion:1,align:"center",padding:0,expand:!0});var r=e.leftSide;r&&i.add(r,to(e));var h=e.content;h&&i.add(h,eo(e));var a=e.footer;a&&o.add(a,so(e));var u=e.rightSide;u&&s.add(u,io(e))},function(e){var t=this.scene,n=e.header;n&&this.add(n,Qa(e));var s=ki(t,0);this.add(s,{proportion:1,align:"center",padding:0,expand:!0});var o=e.leftSide;o&&s.add(o,to(e));var i=ki(t,1);s.add(i,{proportion:1,align:"center",padding:0,expand:!0});var r=e.content;r&&i.add(r,eo(e));var h=e.footer;h&&i.add(h,so(e));var a=e.rightSide;a&&s.add(a,io(e))}],mM={FFF:0,LFF:1,FFR:2,LFR:3};var vM={build:function(e){e===void 0&&(e={});var t=e.background,n=e.header,s=e.leftSide,o=e.content,i=e.rightSide,r=e.footer;mn(t),mn(n),mn(s),mn(o),mn(i),mn(r),this.clear(!0),t&&this.addBackground(t);var h=gM(e,"layoutMode",0);return typeof h=="string"&&(h=mM[h.toUpperCase()]),(hp[h]||hp[0]).call(this,e),this.addChildrenMap("background",t),this.addChildrenMap("header",n),this.addChildrenMap("leftSide",s),this.addChildrenMap("content",o),this.addChildrenMap("rightSide",i),this.addChildrenMap("footer",r),this}};Object.assign((class extends pt{constructor(e,t){t===void 0&&(t={}),t.orientation=1,super(e,t),this.type="rexHolyGrail",this.build(t)}}).prototype,vM);const yM={getButtonsSizer(e){return this.childrenMap[`${e}ButtonsSizer`]},getButton(e,t){var n=this.getButtonsSizer(e);return n?n.getButton(t):void 0},setButtonEnable(e,t,n){return this.getButtonsSizer(e).setButtonEnable(t,n),this},setLeftButtonEnable(e,t){return this.childrenMap.leftButtonsSizer.setButtonEnable(e,t),this},setRightButtonEnable(e,t){return this.childrenMap.rightButtonsSizer.setButtonEnable(e,t),this},setTopButtonEnable(e,t){return this.childrenMap.topButtonsSizer.setButtonEnable(e,t),this},setBottomButtonEnable(e,t){return this.childrenMap.bottomButtonsSizer.setButtonEnable(e,t),this},toggleButtonEnable(e,t){return this.getButtonsSizer(e).toggleButtonEnable(t),this},toggleLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.toggleButtonEnable(e),this},toggleRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.toggleButtonEnable(e),this},toggleTopButtonEnable(e){return this.childrenMap.topButtonsSizer.toggleButtonEnable(e),this},toggleBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.toggleButtonEnable(e),this},getButtonEnable(e,t){return this.getButtonsSizer(e).getButtonEnable(t)},getLeftButtonEnable(e){return this.childrenMap.leftButtonsSizer.getButtonEnable(e)},getRightButtonEnable(e){return this.childrenMap.rightButtonsSizer.getButtonEnable(e)},getTopButtonEnable(e){return this.childrenMap.topButtonsSizer.getButtonEnable(e)},getBottomButtonEnable(e){return this.childrenMap.bottomButtonsSizer.getButtonEnable(e)},emitButtonClick(e,t){var n=this.getButtonsSizer(e);return n?(n.emitButtonClick(t),this):this},emitLeftButtonClick(e){return this.childrenMap.leftButtonsSizer.emitButtonClick(e),this},emitRightButtonClick(e){return this.childrenMap.rightButtonsSizer.emitButtonClick(e),this},emitTopButtonClick(e){return this.childrenMap.topButtonsSizer.emitButtonClick(e),this},emitBottomButtonClick(e){return this.childrenMap.bottomButtonsSizer.emitButtonClick(e),this},getLeftButton(e){return this.childrenMap.leftButtonsSizer.getButton(e)},getRightButton(e){return this.childrenMap.rightButtonsSizer.getButton(e)},getTopButton(e){return this.childrenMap.topButtonsSizer.getButton(e)},getBottomButton(e){return this.childrenMap.bottomButtonsSizer.getButton(e)},showButton(e,t){return _s(this.getButton(e,t)),this},showLeftButton(e){return _s(this.getLeftButton(e)),this},showRightButton(e){return _s(this.getRightButton(e)),this},showTopButton(e){return _s(this.getTopButton(e)),this},showBottomButton(e){return _s(this.getBottomButton(e)),this},hideButton(e,t){return As(this.getButton(e,t)),this},hideLeftButton(e){return As(this.getLeftButton(e)),this},hideRightButton(e){return As(this.getRightButton(e)),this},hideTopButton(e){return As(this.getTopButton(e)),this},hideBottomButton(e){return As(this.getBottomButton(e)),this},addButton(e,t){return this.getButtonsSizer(e).addButton(t),this},addLeftButton(e){return this.addButton("left",e),this},addRightButton(e){return this.addButton("right",e),this},addTopButton(e){return this.addButton("top",e),this},removeButton(e,t,n){return this.getButtonsSizer(e).removeButton(t,n),this},removeLeftButton(e,t){return this.removeButton("left",e,t),this},removeRightButton(e,t){return this.removeButton("right",e,t),this},removeTopButton(e,t){return this.removeButton("top",e,t),this},removeBottomButton(e,t){return this.removeButton("bottom",e,t),this},clearButtons(e,t){return this.getButtonsSizer(e).clearButtons(t),this},clearLeftButtons(e){return this.clearButtons("left",e),this},clearRightButtons(e){return this.clearButtons("right",e),this},clearTopButtons(e){return this.clearButtons("top",e),this},clearBottomButtonss(e){return this.clearButtons("bottom",e),this},forEachButton(e,t,n){return this.getButtonsSizer(e).forEachButtton(t,n),this},forEachLeftButton(e,t){return this.childrenMap.leftButtonsSizer.forEachButtton(e,t),this},forEachRightButton(e,t){return this.childrenMap.rightButtonsSizer.forEachButtton(e,t),this},forEachTopButton(e,t){return this.childrenMap.topButtonsSizer.forEachButtton(e,t),this},forEachBottomButton(e,t){return this.childrenMap.bottomButtonsSizer.forEachButtton(e,t),this}},wt=Phaser.Utils.Objects.GetValue;Object.assign((class extends Bi{constructor(e,t){t===void 0&&(t={}),t.column=3,t.row=3,t.columnProportions=[0,0,0],t.rowProportions=[0,0,0];var n=wt(t,"expand.panel",!1);n&&(t.columnProportions[1]=1,t.rowProportions[1]=1),super(e,t),this.type="rexTabs",this.eventEmitter=wt(t,"eventEmitter",this);var s,o,i,r,h=wt(t,"background",void 0),a=wt(t,"panel",void 0),u=wt(t,"leftButtons",void 0),l=wt(t,"leftButtonsBackground",void 0),d=wt(t,"rightButtons",void 0),c=wt(t,"rightButtonsBackground",void 0),p=wt(t,"topButtons",void 0),f=wt(t,"topButtonsBackground",void 0),v=wt(t,"bottomButtons",void 0),g=wt(t,"bottomButtonsBackground",void 0),y=wt(t,"click",void 0);if(h&&this.addBackground(h),a&&this.add(a,{column:1,row:1,expand:n}),u){var m=wt(t,"space.leftButtonsOffset",0),x=wt(t,"space.leftButton",0),b=wt(t,"expand.leftButtons",!1),w=wt(t,"align.leftButtons","top");s=new de(e,{groupName:"left",background:l,buttons:u,orientation:"y",space:{item:x},expand:b,click:y,eventEmitter:this.eventEmitter}),this.add(s,{column:0,row:1,align:w,padding:{top:m},expand:b})}if(d){var T=wt(t,"space.rightButtonsOffset",0),S=wt(t,"space.rightButton",0),C=wt(t,"expand.rightButtons",!1),E=wt(t,"align.rightButtons","top");o=new de(e,{groupName:"right",background:c,buttons:d,orientation:"y",space:{item:S},expand:C,click:y,eventEmitter:this.eventEmitter}),this.add(o,{column:2,row:1,align:E,padding:{top:T},expand:C})}if(p){var M=wt(t,"space.topButtonsOffset",0),_=wt(t,"space.topButton",0),O=wt(t,"expand.topButtons",!1),k=wt(t,"align.topButtons","left");i=new de(e,{groupName:"top",background:f,buttons:p,orientation:"x",space:{item:_},expand:O,align:wt(t,"align.topButtons",void 0),click:y,eventEmitter:this.eventEmitter}),this.add(i,{column:1,row:0,align:k,padding:{left:M},expand:O})}if(v){var P=wt(t,"space.bottomButtonsOffset",0),A=wt(t,"space.bottomButton",0),L=wt(t,"expand.bottomButtons",!1),D=wt(t,"align.bottomButtons","left");r=new de(e,{groupName:"bottom",background:g,buttons:v,orientation:"x",space:{item:A},expand:L,align:wt(t,"align.bottomButtons",void 0),click:y,eventEmitter:this.eventEmitter}),this.add(r,{column:1,row:2,align:D,padding:{left:P},expand:L})}this.addChildrenMap("background",h),this.addChildrenMap("panel",a),this.addChildrenMap("leftButtons",u),this.addChildrenMap("rightButtons",d),this.addChildrenMap("topButtons",p),this.addChildrenMap("bottomButtons",v),this.addChildrenMap("leftButtonsSizer",s),this.addChildrenMap("rightButtonsSizer",o),this.addChildrenMap("topButtonsSizer",i),this.addChildrenMap("bottomButtonsSizer",r)}}).prototype,yM);class Gv{constructor(t,n){this.container=null,this._deltaHeight=0,this.setParent(t)}setParent(t){this.parent=t,this.parentContainer=t.getParentContainer()}destroy(t){t===void 0&&(t=!1),t||this.destroyContainer(),this.deltaHeight=0,this.data=void 0,this.container=null,this.parent=void 0,this.parentContainer=void 0}get table(){return this.parent}get scrollMode(){return this.parentContainer.scrollMode}get colIndx(){return this.parent.cellIndxeToColIndex(this.index)}get rowIndx(){return this.parent.cellIndxeToRowIndex(this.index)}getContainer(){return this.container}setContainer(t){return t?(this.container&&this.container.destroy(),this.container=t,this.parentContainer.add(t),this):(this.destroyContainer(),this)}destroyContainer(){return this.container&&(this.container.destroy(),this.container=null),this}popContainer(){if(this.container){var t=this.container;return this.container=null,this.parentContainer.remove(t),t}return null}setXY(t,n){return this.container&&this.parentContainer.setChildLocalPosition(this.container,t,n),this}setCellContainerAlign(t){return typeof t=="string"&&(t=Nn[t]),this.cellContainerAlign=t,this}get deltaHeight(){return this._deltaHeight}set deltaHeight(t){t==null&&(t=0);var n=this.parent;this._deltaHeight===0&&t!==0?n.nonZeroDeltaHeightCount++:this._deltaHeight!==0&&t===0&&n.nonZeroDeltaHeightCount--;var s=this._deltaHeight!==t;if(this._deltaHeight=t,s){n.resetTotalRowsHeight();var o=this.scrollMode===0?"cellheightchange":"cellwidthchange";this.parentContainer.emit(o,this,this.container,this.parentContainer)}}get deltaWidth(){return this.deltaHeight}set deltaWidth(t){this.deltaHeight=t}setDeltaHeight(t){return this.deltaHeight=t,this}setDeltaWidth(t){return this.deltaHeight=t,this}get height(){return this.scrollMode===0?this.deltaHeight+this.parent.defaultCellHeight:this.parent.defaultCellWidth}set height(t){this.scrollMode!==1&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setHeight(t){return this.height=t,this}get width(){return this.scrollMode===0?this.parent.defaultCellWidth:this.deltaHeight+this.parent.defaultCellHeight}set width(t){this.scrollMode!==0&&this.setDeltaHeight(t-this.parent.defaultCellHeight)}setWidth(t){return this.width=t,this}get scene(){return this.parentContainer.scene}}Object.assign(Gv.prototype,Lo);const lp=Phaser.Utils.Objects.GetValue,xM=Phaser.Utils.Array.SpliceOne;class bM{constructor(t,n){this.parent=t,this.cells=[],this.cellPool=new mi,this.resetFromJSON(n)}resetFromJSON(t){t===void 0&&(t={}),this.colCount=void 0,this.nonZeroDeltaHeightCount=0,this.resetTotalRowsHeight();var n=t.cellHeight;n===void 0&&(n=60);var s=t.cellWidth;return s===void 0&&(s=60),this.setDefaultCellHeight(n),this.setDefaultCellWidth(s),this.initCells(lp(t,"cellsCount",0)),this.setColumnCount(lp(t,"columns",1)),this}destroy(t){this.cellPool.destroy(),this.cells=void 0,this.parent=void 0}get defaultCellHeightMode(){return this.nonZeroDeltaHeightCount===0}setDefaultCellHeight(t){return this.defaultCellHeight=t,this}setDefaultCellWidth(t){return this.defaultCellWidth=t,this}initCells(t){var n=this.cells;n.length=t;for(var s=0;s<t;s++)n[s]=null;return this}insertNewCells(t,n){var s=this.cells;if(t===s.length){var o=t+n;s.legth=o;for(var i=t;i<o;i++)s[i]=null}else{var r=[];for(r.length=n,i=0;i<n;i++)r[i]=null;this.cells.splice(t,0,...r)}return this.resetTotalRowsHeight(),this}removeCells(t,n){for(var s=t+n,o=t;o<s;o++)this.freeCell(o);return s===this.cells.length?this.cells.length=t:(n===1?xM(this.cells,t):this.cells.splice(t,n),this.buildCellIndex(t)),this.resetTotalRowsHeight(),this}setColumnCount(t){this.colCount=t,this.resetTotalRowsHeight();var n=this.parent;if(n.expandCellSize){var s=(n.scrollMode===0?n.width:n.height)/t;this.setDefaultCellWidth(s)}return this}get rowCount(){return Math.ceil(this.cells.length/this.colCount)}get cellsCount(){return this.cells.length}isValidCellIdx(t){return t>=0&&t<this.cells.length}heightToRowIndex(t,n){if(n===void 0&&(n=0),t===0)return 0;if(this.defaultCellHeightMode){var s=t/this.defaultCellHeight;return s=n===1?Math.ceil(s):Math.floor(s)}var o,i=this.rowCount,r=t;for(s=0;;){if(o=s>=0&&s<i,!((r-=this.getRowHeight(s))>0&&o)){if(r===0)return n===2&&(s+=1),s;if(n===1){var h=s;(o=(s+=1)>=0&&s<i)||(s=h)}return s}s+=1}}widthToColIndex(t,n){if(t===0)return 0;var s=t/this.defaultCellWidth;return n?Math.ceil(s):Math.floor(s)}colRowToCellIndex(t,n){return t>=this.colCount?null:n*this.colCount+t}rowIndexToHeight(t,n){if(this.defaultCellHeightMode)return(n-t+1)*this.defaultCellHeight;for(var s=0,o=t;o<=n;o++)s+=this.getRowHeight(o);return s}colIndexToWidth(t,n){return(n-t+1)*this.defaultCellWidth}getRowHeight(t){var n=this.colCount;if(n<=1)return this.getCellHeight(this.colRowToCellIndex(0,t));for(var s,o=0,i=0;i<n;i++)o<(s=this.getCellHeight(this.colRowToCellIndex(i,t)))&&(o=s);return o}getColWidth(t){return this.defaultCellWidth}getCellHeight(t){if(!this.isValidCellIdx(t))return 0;var n;if(this.defaultCellHeightMode)n=this.defaultCellHeight;else{var s=this.getCell(t,!1),o=s?s.deltaHeight:0;n=this.defaultCellHeight+o}return n}resetTotalRowsHeight(){this._totalRowsHeight=null}get totalRowsHeight(){return this._totalRowsHeight===null&&(this._totalRowsHeight=this.rowIndexToHeight(0,this.rowCount-1)),this._totalRowsHeight}get totalColumnWidth(){return this.colCount*this.defaultCellWidth}cellIndxeToColIndex(t){return t%this.colCount}cellIndxeToRowIndex(t){return Math.floor(t/this.colCount)}getCell(t,n){if(!this.isValidCellIdx(t))return null;if(n===void 0&&(n=!0),this.cells[t]===null&&n){var s=this.newCell(t);this.cells[t]=s}return this.cells[t]}newCell(t){var n=this.cellPool.pop();return n===null?n=new Gv(this):n.setParent(this),n.index=t,n}buildCellIndex(t){t===void 0&&(t=0);for(var n,s=this.cells,o=t,i=s.length;o<i;o++)(n=s[o])&&(n.index=o);return this}getParentContainer(){return this.parent}freeCell(t){return typeof t=="number"&&(t=this.cells[t]),t?(t.destroy(),this.cellPool.push(t),this):this}}var Hl=function(e){return e.hasOwnProperty("geometryMask")?e.geometryMask:e.bitmapMask};const TM=Phaser.Geom.Intersects.RectangleToRectangle,wM=Phaser.Geom.Rectangle.Overlaps;var SM=function(e){if(!e.displayList)return!1;for(;;){var t=e.rexContainer;if(t){if(t.visible){var n=t.parent;if(n){e=n;continue}return!0}return!1}return e.visible}},CM=function(e,t){var n=t.top,s=t.bottom,o=t.left,i=t.right,r=0;return r+=e.contains(o,n)?1:0,r+=e.contains(o,s)?1:0,(r+=e.contains(i,n)?1:0)+(e.contains(i,s)?1:0)},EM=function(e,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!0))},Cl=function(e,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!0),t.syncChildrenEnable=!0):(t.setMask&&t.setMask(n),e.setChildMaskVisible(t,!0))},PM=function(e,t,n){t.hasOwnProperty("isRexContainerLite")?(t.syncChildrenEnable=!1,e.setChildMaskVisible(t,!1),t.syncChildrenEnable=!0):(t.clearMask&&t.clearMask(),e.setChildMaskVisible(t,!1))};const vn=Phaser.Utils.Objects.GetValue,OM={update:0,everyTick:1},Uv={setupChildrenMask(e){return e===!1||(this.setMaskUpdateMode(vn(e,"updateMode",0)),this.enableChildrenMask(vn(e,"padding",0)),this.setMaskLayer(vn(e,"layer",void 0)),this.onMaskGameObjectVisible=vn(e,"onVisible"),this.onMaskGameObjectInvisible=vn(e,"onInvisible"),this.maskGameObjectCallbackScope=vn(e,"scope"),this.startMaskUpdate()),this},destroyChildrenMask(){return this.childrenMask?(this.stopMaskUpdate(),this.childrenMask.destroy(),this.childrenMask=void 0,this.onMaskGameObjectVisible=null,this.onMaskGameObjectInvisible=null,this.maskGameObjectCallbackScope=null,this):this},setMaskUpdateMode(e){return typeof e=="string"&&(e=OM[e]),this.maskUpdateMode=e,this},startMaskUpdate(){this.scene.game.events.on("poststep",this.maskChildren,this)},stopMaskUpdate(){this.scene.game.events.off("poststep",this.maskChildren,this)},enableChildrenMask(e){var t=Dn.call(this,null,this,0,e);return this.childrenMask=t.createGeometryMask(),this},setMaskChildrenFlag(e){return e===void 0&&(e=!0),this.maskChildrenFlag=e,this},setMaskLayer(e){return this.maskLayer=e,this},maskChildren(){return this.childrenMask&&this.maskChildrenFlag&&this.alpha!==0&&this.visible?(this.privateRenderLayer?this.privateRenderLayer.setMask(this.childrenMask):this.maskLayer?(this.addToLayer(this.maskLayer),this.maskLayer.setMask(this.childrenMask)):function({parent:e,mask:t,children:n,onVisible:s,onInvisible:o,scope:i}){if(t){n===void 0&&(n=e.getAllChildren());for(var r,h,a,u=!!s||!!o,l=e.getBounds(),d=Hl(t),c=0,p=n.length;c<p;c++)if((r=n[c])!==d&&SM(r)){if(a=r.visible,r.getBounds)switch(h=r.getBounds(h),CM(l,h)){case 4:EM(e,r);break;case 0:TM(l,h)||wM(l,h)?Cl(e,r,t):PM(e,r);break;default:Cl(e,r,t)}else Cl(e,r,t);if(u&&r.visible!==a){var f=r.visible?s:o;f&&(i?f.call(i,r,e):f(r,e))}}}}({parent:this,mask:this.childrenMask,onVisible:this.onMaskGameObjectVisible,onInvisible:this.onMaskGameObjectInvisible,scope:this.maskGameObjectCallbackScope}),this.maskUpdateMode===0&&(this.maskChildrenFlag=!1),this):this},layoutChildrenMask(){if(!this.childrenMask)return this;var e=Hl(this.childrenMask);return e.setPosition().resize(),this.resetChildPositionState(e),this}};var up=function(e){var t,n=null;(t=e.getContainer())?(n=t,e.popContainer()):this.cellContainersPool&&(n=this.cellContainersPool.getFirstDead())!==null&&n.setActive(!0).setVisible(!0),this.emit("cellvisible",e,n,this),this.cellContainersPool&&((t=e.getContainer())?n===null?this.cellContainersPool.add(t):n!==t&&(this.cellContainersPool.add(t),this.cellContainersPool.killAndHide(n)):n!==null&&this.cellContainersPool.killAndHide(n))},dp=function(e){if(this.emit("cellinvisible",e),this.cellContainersPool){var t=e.popContainer();t&&(t.setScale(1).setAlpha(1),this.cellContainersPool.killAndHide(t))}e.destroyContainer()},cp=function(){var e=this.preVisibleCells;this.preVisibleCells=this.visibleCells,this.visibleCells=e,this.visibleCells.clear()},fp=function(e,t){t-=this.y+this.topLeftY,e-=this.x+this.topLeftX;var n=this.tableOY-(this.scrollMode===0?t:e),s=this.tableOX-(this.scrollMode===0?e:t),o=this.table,i=o.heightToRowIndex(-n,0),r=o.widthToColIndex(-s),h=o.colRowToCellIndex(r,i);return h===null?null:this.isCellVisible(h)?h:null};const kM=Phaser.Math.Clamp;var Wv={setTableOY:function(e){var t=this.table,n=this.topTableOY,s=this.bottomTableOY,o=e>n,i=e<s;return this.clampTableOXY&&(t.rowCount<t.heightToRowIndex(this.instHeight,1)?e=0:o?e=n:i&&(e=s)),this._tableOY!==e&&(this._tableOY=e),o&&(this.execeedTopState||this.emit("execeedtop",this,e,n)),this.execeedTopState=o,i&&(this.execeedBottomState||this.emit("execeedbottom",this,e,s)),this.execeedBottomState=i,this},setTableOX:function(e){var t=this.table,n=this.leftTableOX,s=this.rightTableOX,o=e>this.leftTableOX,i=e<this.rightTableOX;return this.clampTableOXY&&(t.colCount<t.widthToColIndex(this.instWidth,!0)?e=0:o?e=n:i&&(e=s)),this._tableOX!==e&&(this._tableOX=e),o&&(this.execeedLeftState||this.emit("execeedleft",this,e,n)),this.execeedLeftState=o,i&&(this.execeedRightState||this.emit("execeedright",this,e,s)),this.execeedRightState=i,this},showCells:function(){if(this.cellsCount!==0){var e=this.scaleX,t=this.scaleY,n=e===1&&t===1;n||this.setScale(1);var s=this.table,o=this.tableOYOffset,i=this.tableOY+o,r=this.tableOX;this.startRowIndex=Math.max(s.heightToRowIndex(-i,2),0);for(var h=this.startRowIndex,a=Math.max(s.widthToColIndex(-r),0),u=a,l=s.colRowToCellIndex(u,h),d=this.bottomBound,c=this.rightBound,p=s.cellsCount-1,f=s.colCount-1,v=this.getCellTLX(u),g=v,y=this.getCellTLY(h)+o;y<d&&l<=p;){if(this.table.isValidCellIdx(l)){var m,x,b=s.getCell(l,!0);if(this.visibleCells.set(b),this.preVisibleCells.contains(b)||this.showCell(b),this.scrollMode===0?(m=g,x=y):(m=y,x=g),b.cellContainerAlign==null)b.setXY(m,x);else{var w=b.getContainer();Wr(w,m,x,b.width,b.height,b.cellContainerAlign),b.setXY(w.x,w.y)}}g<c&&u<f?(g+=s.getColWidth(u),u+=1):(g=v,y+=s.getRowHeight(h),u=a,h+=1),l=s.colRowToCellIndex(u,h)}n||this.setScale(e,t)}},showCell:up,getCellTLX:function(e){var t=this.scrollMode===0?this.topLeftX:this.topLeftY;return this.tableOX+this.table.colIndexToWidth(0,e-1)+t},getCellTLY:function(e){var t=this.scrollMode===0?this.topLeftY:this.topLeftX;return this.tableOY+this.table.rowIndexToHeight(0,e-1)+t},hideCells:function(){var e=this.preVisibleCells,t=this.visibleCells;e.iterate(function(n){t.contains(n)||this.hideCell(n)},this)},hideCell:dp,updateTable:function(e,t){return e===void 0&&(e=!1),t===void 0&&(t=!1),e&&(cp.call(this),this.hideCells()),cp.call(this),this.showCells(),this.hideCells(),this.setMaskChildrenFlag(),t&&(this.layoutChildrenMask(),this.maskChildren()),this},isCellVisible:function(e){var t=this.table.getCell(e,!1);return t&&this.visibleCells.contains(t)},pointToCellIndex:fp,pointToCellContainer:function(e,t){var n=fp.call(this,e,t);if(n!==null)return this.getCellContainer(n)},eachVisibleCell:function(e,t){return this.visibleCells.each(e,t),this},iterateVisibleCell:function(e,t){return this.visibleCells.iterate(e,t),this},eachCell:function(e,t){return this.table.cells.slice().forEach(e,t),this},iterateCell:function(e,t){return this.table.cells.forEach(e,t),this},setCellsCount:function(e){var t=this.cellsCount;return t===e||(t>e?this.removeCells(e,t-e):this.insertNewCells(t,e-t)),this},insertNewCells:function(e,t){return typeof e=="object"&&(e=e.index),t===void 0&&(t=1),t<=0||(e=kM(e,0,this.cellsCount),this.table.insertNewCells(e,t)),this},removeCells:function(e,t){if(typeof e=="object"&&(e=e.index),t===void 0&&(t=1),e<0&&(t+=e,e=0),t<=0)return this;if(e>this.cellsCount)return this;for(var n,s=e,o=e+t;s<o;s++)(n=this.getCell(s,!1))&&(this.visibleCells.contains(n)&&(dp.call(this,n),this.visibleCells.delete(n)),this.preVisibleCells.delete(n));return this.table.removeCells(e,t),this},setColumnCount:function(e){return this.table.colCount===e||this.table.setColumnCount(e),this},setGridSize:function(e,t){return this.setCellsCount(e*t),this.table.setColumnCount(e),this},updateVisibleCell:function(e){var t=this.table.getCell(e,!1);return t&&t.container?(up.call(this,t),this):this}};Object.assign(Wv,Uv);const MM=Phaser.GameObjects.Group,pp=Phaser.Structs.Set,Be=Phaser.Utils.Objects.GetValue;let Vv=class extends ii{constructor(e,t,n,s,o,i){i===void 0&&(i={}),super(e,t,n,s,o),this.type="rexGridTable",this._tableOX=0,this._tableOY=0,this.visibleCells=new pp,this.preVisibleCells=new pp,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,Be(i,"reuseCellContainer",!1)&&(this.cellContainersPool=new MM(e));var r,h,a,u=Be(i,"cellVisibleCallback",null);if(u!==null){var l=Be(i,"cellVisibleCallbackScope",void 0);this.on("cellvisible",u,l)}(u=Be(i,"cellInvisibleCallback",null))!==null&&(l=Be(i,"cellInvisibleCallbackScope",void 0),this.on("cellinvisible",u,l)),Be(i,"enableLayer",!1)&&this.enableLayer(),this.setupChildrenMask(Be(i,"mask",void 0)),this.setScrollMode(Be(i,"scrollMode",0)),this.setClampMode(Be(i,"clampTableOXY",!0)),this.setStartFromBottomEnable(Be(i,"startFromBottom",!1));var d=this.scrollMode===0;d?(r=i.cellWidth,h=i.cellHeight,a=i.columns):(r=i.cellHeight,h=i.cellWidth,a=Be(i,"rows",i.columns)),this.fixedCellSize=Be(i,"fixedCellSize",!1),this.expandCellSize=!this.fixedCellSize&&r===void 0,a||(a=1),this.fixedCellSize?a=Math.max(Math.floor(this.instWidth/r),1):this.expandCellSize&&(r=(s=d?this.width:this.height)/a),i.cellWidth=r,i.cellHeight=h,i.columns=a,this.table=new bM(this,i),this.updateTable()}destroy(e){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.table.destroy(e),this.table=void 0,this.cellContainersPool&&(this.cellContainersPool.destroy(!0),this.cellContainersPool=void 0),super.destroy(e))}setScrollMode(e){return typeof e=="string"&&(e=_M[e.toLowerCase()]),this.scrollMode=e,this}setClampMode(e){return e===void 0&&(e=!0),this.clampTableOXY=e,this}setStartFromBottomEnable(e){return e===void 0&&(e=!0),this.startFromBottomEnable=e,this}get tableOY(){return this._tableOY}get tableOX(){return this._tableOX}set tableOY(e){this.setTableOY(e).updateTable()}set tableOX(e){this.setTableOX(e).updateTable()}setTableOXY(e,t){return this.setTableOY(t).setTableOX(e),this}addTableOY(e){return this.setTableOY(this.tableOY+e),this}addTableOX(e){return this.setTableOX(this.tableOX+e),this}addTableOXY(e,t){return this.addTableOY(t).addTableOX(e),this}setTableOYByPercentage(e){return this.setTableOY(-this.tableVisibleHeight*e),this}getTableOYPercentage(){var e=this.tableVisibleHeight;return e===0?0:this.tableOY/-e}setTableOXByPercentage(e){return this.setTableOX(-this.tableVisibleWidth*e),this}getTableOXPercentage(){var e=this.tableVisibleWidth;return e===0?0:this.tableOX/-e}set t(e){this.setTableOYByPercentage(e).updateTable()}get t(){return this.getTableOYPercentage()}set s(e){this.setTableOXByPercentage(e).updateTable()}get s(){return this.getTableOXPercentage()}scrollToBottom(){if(this.t=1,this.t===0)return this;do this.t=1;while(this.t!==1);return this}scrollToRow(e){this.scrollToBottom();var t=this.table.rowIndexToHeight(0,e-1);return this.setTableOY(-t).updateTable(),this}scrollToNextRow(e){return e===void 0&&(e=1),this.scrollToRow(this.startRowIndex+e),this}getCell(e){return this.table.getCell(e,!0)}getCellContainer(e){var t,n=this.table.getCell(e,!1);return n&&(t=n.getContainer()),t}get cellsCount(){return this.table.cellsCount}get columnCount(){return this.table.colCount}setCellHeight(e,t){return(typeof e=="number"?this.table.getCell(e,!0):e).height=t,this}setCellWidth(e,t){return(typeof e=="number"?this.table.getCell(e,!0):e).width=t,this}resetAllCellsSize(e,t){if(this.scrollMode===1){var n=e;e=t,t=n}this.table.setDefaultCellHeight(t).setDefaultCellWidth(e);for(var s=this.table.cells,o=0,i=s.length;o<i;o++){var r=s[o];r&&(r.deltaHeight=0)}if(this.fixedCellSize){var h=Math.floor(this.instWidth/e);this.table.setColumnCount(h)}return this.updateTable(!0,!0),this}get instHeight(){return this.scrollMode===0?this.height:this.width}get instWidth(){return this.scrollMode===0?this.width:this.height}get tableHeight(){return this.table.totalRowsHeight}get tableWidth(){return this.table.totalColumnWidth}get tableOYOffset(){if(this.startFromBottomEnable){var e=this.tableHeight-this.instHeight;if(e<0)return-e}return 0}get topTableOY(){return 0}get bottomTableOY(){return-this.tableVisibleHeight}get leftTableOX(){return 0}get rightTableOX(){return-this.tableVisibleWidth}get tableVisibleHeight(){var e=this.tableHeight-this.instHeight;return e<0&&(e=0),e}get tableVisibleWidth(){var e=this.tableWidth-this.instWidth;return e<0&&(e=0),e}get bottomLeftY(){return-this.displayHeight*this.originY+this.displayHeight}get topRightX(){return-this.displayWidth*this.originX+this.displayWidth}get topLeftX(){return-this.displayWidth*this.originX}get topLeftY(){return-this.displayHeight*this.originY}get bottomBound(){return this.scrollMode===0?this.bottomLeftY:this.topRightX}get rightBound(){return this.scrollMode===0?this.topRightX:this.bottomLeftY}resize(e,t){if(this.width===e&&this.height===t)return this;if(super.resize(e,t),this.fixedCellSize){var n=Math.floor(this.instWidth/this.table.defaultCellWidth);this.table.setColumnCount(n)}else this.expandCellSize&&this.table.setDefaultCellWidth(this.instWidth/this.table.colCount);return this.updateTable(!0,!0),this}};Object.assign(Vv.prototype,Wv);const _M={v:0,vertical:0,h:1,horizontal:1};var AM=function(e){e.on("cellvisible",function(t,n,s){var o=this.createCellContainerCallback,i=this.createCellContainerCallbackScope;t.item=this.items[t.index],t.items=this.items,(n=i?o.call(i,t,n,s):o(t,n,s))&&(t.cellContainerAlign==null&&n.setOrigin&&n.setOrigin(0),n.isRexSizer&&n.layout()),t.item=void 0,t.items=void 0,t.setContainer(n)},this)},bi=function(e,t,n,s,o,i,r){var h;if(o===void 0)h=s;else{var a=i.camera,u=s+a.scrollX*(n.scrollFactorX-1),l=o+a.scrollY*(n.scrollFactorY-1);h=n.pointToCellIndex(u,l)}if(h!=null){var d=n.getCellContainer(h);d&&e.emit(t,d,h,i,r)}},RM=function(e,t){e.on("pointerdown",function(n,s,o,i){bi(this.eventEmitter,"cell.down",e,n.worldX,n.worldY,n,i)},this).on("pointerup",function(n,s,o,i){bi(this.eventEmitter,"cell.up",e,n.worldX,n.worldY,n,i)},this)},LM=function(e,t){e.on("pointermove",gp,this).on("pointerover",gp,this).on("pointerout",DM,this)},gp=function(e,t,n,s){var o=this.childrenMap.child,i=e.camera,r=e.worldX+i.scrollX*(o.scrollFactorX-1),h=e.worldY+i.scrollY*(o.scrollFactorY-1),a=o.pointToCellIndex(r,h);if(a!==o.input.lastOverCellIndex){var u=o.input.lastOverCellIndex;o.input.lastOverCellIndex=a,bi(this.eventEmitter,"cell.out",o,u,void 0,e,s),bi(this.eventEmitter,"cell.over",o,a,void 0,e,s)}},DM=function(e,t){var n=this.childrenMap.child,s=n.input.lastOverCellIndex;n.input.lastOverCellIndex=void 0,bi(this.eventEmitter,"cell.out",n,s,void 0,e,t)};const FM=Phaser.Utils.Objects.GetValue;var BM=function(e,t){var n=FM(t,"click",void 0);n!==!1&&(n===void 0&&(n={}),n.threshold=10,e._click=new Nr(e,n),e._click.on("click",function(s,o,i,r){bi(this.eventEmitter,"cell.click",o,i.worldX,i.worldY,i,r)},this))};const IM=Phaser.Utils.Objects.GetValue;var XM=function(e,t){var n=IM(t,"tap",void 0);n!==!1&&(e._tap=new Hm(e,n),e._tap.on("tap",function(s,o,i){var r=`cell.${s.tapsCount}tap`;bi(this.eventEmitter,r,s.gameObject,s.worldX,s.worldY,i)},this))};const zM=Phaser.Utils.Objects.GetValue;var YM=function(e,t){var n=zM(t,"press",void 0);n!==!1&&(e._press=new Km(e,n),e._press.on("pressstart",function(s,o,i){bi(this.eventEmitter,"cell.pressstart",e,s.worldX,s.worldY,i)},this).on("pressend",function(s,o,i){bi(this.eventEmitter,"cell.pressend",e,s.worldX,s.worldY,i)},this))};const NM=Phaser.Utils.Objects.GetValue;var GM=function(e,t){var n=NM(t,"swipe",void 0);n!==!1&&(n===void 0&&(n={}),n.dir="4dir",e._swipe=new Cu(e,n),e._swipe.on("swipe",function(s,o,i){var r=s.left?"left":s.right?"right":s.up?"up":"down";bi(this.eventEmitter,`cell.swipe${r}`,e,s.worldX,s.worldY,i)},this))},UM=function(e,t){e.setInteractive(),RM.call(this,e,t),LM.call(this,e,t),BM.call(this,e,t),XM.call(this,e,t),YM.call(this,e,t),GM.call(this,e,t)};const WM={scrollToRow(e){return this.childrenMap.child.scrollToRow(e),this},scrollToNextRow(e){return this.childrenMap.child.scrollToNextRow(e),this}},qe=Phaser.Utils.Objects.GetValue;Object.assign((class extends $r{constructor(e,t){t===void 0&&(t={});var n=Xu(t),s=qe(t,"table",void 0);s===void 0&&(s={}),s.scrollMode=n===2?0:n,s.clampTableOXY=qe(t,"clampChildOY",!1);var o,i,r=qe(s,"width",void 0),h=qe(s,"height",void 0),a=new Vv(e,0,0,r,h,s);e.add.existing(a),s.scrollMode===0?(o=r===void 0,i=h===void 0):(o=h===void 0,i=r===void 0),function(p){Object.defineProperty(p,"childOY",{configurable:!0,get:function(){return p.tableOY},set:function(f){p.tableOY=f}}),Object.defineProperty(p,"childOX",{configurable:!0,get:function(){return p.tableOX},set:function(f){p.tableOX=f}}),Object.defineProperty(p,"topChildOY",{get:function(){return p.topTableOY}}),Object.defineProperty(p,"bottomChildOY",{get:function(){return p.bottomTableOY}}),Object.defineProperty(p,"leftChildOX",{get:function(){return p.leftTableOX}}),Object.defineProperty(p,"rightChildOX",{get:function(){return p.rightTableOX}}),Object.defineProperty(p,"childVisibleHeight",{get:function(){return p.instHeight}}),Object.defineProperty(p,"childHeight",{get:function(){return p.tableHeight}}),Object.defineProperty(p,"childVisibleWidth",{get:function(){return p.instWidth}}),Object.defineProperty(p,"childWidth",{get:function(){return p.tableWidth}})}(a),a._minWidth=r===void 0?0:void 0,a._minHeight=h===void 0?0:void 0,t.type="rexGridTable",t.child={gameObject:a,expandWidth:o,expandHeight:i};var u=qe(t,"space",void 0);u&&(u.child=qe(u,"table",0)),super(e,t),this.addChildrenMap("table",a),this.addChildrenMap("tableLayer",a.maskLayer),this.eventEmitter=qe(t,"eventEmitter",this);var l=qe(t,"createCellContainerCallback",Ht),d=qe(t,"createCellContainerCallbackScope",void 0);this.setCreateCellContainerCallback(l,d),AM.call(this,a),this.resizeControllerFlag=!1;var c=n===0?"cellheightchange":"cellwidthchange";a.on(c,function(){this.resizeControllerFlag=!0},this),qe(s,"interactive",!0)&&UM.call(this,a,s),this.setItems(qe(t,"items",[]),!1),e.game.events.on("poststep",this.onPostStep,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.scene.game.events.off("poststep",this.onPostStep,this),super.destroy(e))}setCreateCellContainerCallback(e,t){return this.createCellContainerCallback=e,this.createCellContainerCallbackScope=t,this}refresh(){return this.setItems(this.items),this}getCell(e){return this.childrenMap.child.getCell(e)}getCellContainer(e){return this.childrenMap.child.getCellContainer(e)}updateVisibleCell(e){return this.childrenMap.child.updateVisibleCell(e)}resetAllCellsSize(e,t){return this.childrenMap.child.resetAllCellsSize(e,t),this}onPostStep(){this.resizeControllerFlag&&(this.resizeController(),this.resizeControllerFlag=!1)}get startRowIndex(){return this.childrenMap.child.startRowIndex}}).prototype,WM,{setItems:function(e,t){this.items=e===void 0?[]:e,t===void 0&&(t=!0);var n=this.childrenMap.child;return n.setCellsCount(this.items.length),t&&(n.updateTable(!0),this.resizeController()),this}});var Wu=function(e,t){return e.sameOrientation?e.orientation=t.orientation:e.orientation=t.orientation===0?1:0,e},VM=function(e,t){e.popUp(Wu(e.root.easeIn,e))},jM=function(e,t){e.scaleDown(Wu(e.root.easeOut,e))};const HM={setTransitInCallback(e){return e===void 0&&(e=VM),this.transitInCallback=e,this},setTransitOutCallback(e){return e===void 0&&(e=jM),this.transitOutCallback=e,this}},KM={delayCall(e,t,n){return this.timer=function(s,o,i,r){var h=In(s);return h.time.delayedCall(o,function(){h.sys.events.once("postupdate",function(){i.call(r,void 0)})})}(this,e,t,n),this},removeDelayCall(){return this.timer&&(this.timer.remove(!1),this.timer=void 0),this}};var jv={expandSubMenu:function(e,t){var n;if((s=this.childrenMap.subMenu)&&s.parentButton===e)return this;this.collapseSubMenu(),n=this.root.toggleOrientation?this.orientation===0?1:0:this.orientation;var s=new this.constructor(this.scene,{items:t,orientation:n,space:this.space,createBackgroundCallback:this.root.createBackgroundCallback,createBackgroundCallbackScope:this.root.createBackgroundCallbackScope,createButtonCallback:this.root.createButtonCallback,createButtonCallbackScope:this.root.createButtonCallbackScope,easeIn:this.root.easeIn,easeOut:this.root.easeOut,_rootMenu:this.root,_parentMenu:this,_parentButton:e});return this.pin(s),this.childrenMap.subMenu=s,this.root.emit("expand",s,e,this),this},collapse:function(){var e=this.root;e.emit("collapse",this,this.parentButton,e);var t=e.easeOut.duration;return e.transitOutCallback(this,t),this.collapseSubMenu(),this.delayCall(t,this.destroy,this),this},collapseSubMenu:function(){var e=this.childrenMap.subMenu;return e===void 0||(this.childrenMap.subMenu=void 0,this.remove(e),e.collapse()),this}};Object.assign(jv,HM,KM);var mp=function(e,t){return typeof t=="number"&&(t={duration:t}),t.hasOwnProperty("orientation")&&t.orientation!==void 0?t.sameOrientation=Ys(t.orientation)===e.orientation:t.sameOrientation=!0,t.destroy=!1,t},qM=function(){var e=this.root,t=e.easeIn.duration;e.transitInCallback(this,t),this!==this.root&&this.delayCall(t,function(){this.root.emit("popup.complete",this)},this)};const ue=Phaser.Utils.Objects.GetValue,$M={up:3,down:1,left:2,right:0};Object.assign((class extends de{constructor(e,t){t===void 0&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1);var n=t._rootMenu,s=t._parentMenu,o=t._parentButton,i=ue(t,"popup",!0),r=ue(t,"items",void 0),h=ue(t,"createBackgroundCallback",void 0),a=ue(t,"createBackgroundCallbackScope",void 0);t.background=function(m,x,b,w){var T;return b&&(x.scene=m,T=w?b.call(w,x):b(x),x.scene=void 0),T}(e,r,h,a);var u=ue(t,"createButtonCallback",void 0),l=ue(t,"createButtonCallbackScope",void 0);if(t.buttons=function(m,x,b,w){var T,S,C=[];if(x&&b)for(var E=0,M=x.length;E<M;E++)(T=x[E]).scene=m,S=w?b.call(w,T,E,x):b(T,E,x),T.scene=void 0,C.push(S);return C}(e,r,u,l),super(e,t),this.type="rexMenu",this.items=r,this.root=n===void 0?this:n,this.isRoot=this.root===this,this.parentMenu=s,this.parentButton=o,this.timer=void 0,this.isRoot){this.isPopUpMode=i;var d=t.bounds;d===void 0&&(d=Xr(e)),this.bounds=d,this.subMenuSide=[this.y<d.centerY?1:3,this.x<d.centerX?0:2],(y=ue(t,"subMenuSide",void 0))!==void 0&&(typeof y=="string"&&(y=$M[y]),this.subMenuSide[this.orientation]=y),this.toggleOrientation=ue(t,"toggleOrientation",!1),this.expandEventName=ue(t,"expandEvent","button.click"),this.easeIn=mp(this,ue(t,"easeIn",0)),this.easeOut=mp(this,ue(t,"easeOut",0)),this.setTransitInCallback(ue(t,"transitIn")),this.setTransitOutCallback(ue(t,"transitOut")),this.createBackgroundCallback=h,this.createBackgroundCallbackScope=a,this.createButtonCallback=u,this.createButtonCallbackScope=l,this.childrenKey=ue(t,"childrenKey","children"),this._isPassedEvent=!1,this.pointerDownOutsideCollapsing=ue(t,"pointerDownOutsideCollapsing",!0),this.pointerDownOutsideCollapsing&&e.input.on("pointerdown",this.onPointerDownOutside,this)}var c,p=0,f=0;if(!this.root.easeIn.sameOrientation){var v=Wu(this.root.easeIn,this).orientation,g=s?s.orientation:this.orientation,y=this.root.subMenuSide[g];v===0&&y===2&&(p=1),v===1&&y===3&&(f=1)}if(i&&this.setOrigin(p,f).layout(),!this.isRoot)switch(this.setScale(this.root.scaleX,this.root.scaleY),y=this.root.subMenuSide[s.orientation]){case 2:this.alignTop(o.top).alignRight(o.left);break;case 0:this.alignTop(o.top).alignLeft(o.right);break;case 3:this.alignLeft(o.left).alignBottom(o.top);break;case 1:this.alignLeft(o.left).alignTop(o.bottom)}(c=this).on(c.root.expandEventName,function(m,x){if(!this._isPassedEvent){var b=this.root.childrenKey,w=this.items[x][b];w&&this.expandSubMenu(m,w)}},c).on("button.click",function(m,x,b,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.click",m,x,b,w),this.root._isPassedEvent=!1)},c).on("button.over",function(m,x,b,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.over",m,x,b,w),this.root._isPassedEvent=!1)},c).on("button.out",function(m,x,b,w){this!==this.root&&(this.root._isPassedEvent=!0,this.root.emit("button.out",m,x,b,w),this.root._isPassedEvent=!1)},c),i&&(this.pushIntoBounds(this.root.bounds),qM.call(this))}destroy(e){this.scene&&!this.ignoreDestroy&&(this.isRoot&&this.pointerDownOutsideCollapsing&&this.scene.input.off("pointerdown",this.onPointerDownOutside,this),super.destroy(e),this.removeDelayCall())}isInTouching(e){return!!super.isInTouching(e)||!!this.childrenMap.subMenu&&this.childrenMap.subMenu.isInTouching(e)}onPointerDownOutside(e){this.isInTouching(e)||(this.isPopUpMode?this.collapse():this.collapseSubMenu())}}).prototype,jv);var ZM={setWrapEnable(e){return e===void 0&&(e=!0),this.listWrapEnable=e,this},setCreateButtonCallback(e){return this.listCreateButtonCallback=e,this},setCreateListBackgroundCallback(e){return this.listCreateBackgroundCallback=e,this},setCreateListSliderTrackCallback(e){return this.listCreateSliderTrackCallback=e,this},setCreateListSliderThumbCallback(e){return this.listCreateSliderThumbCallback=e,this},setListSliderAdaptThumbSizeEnable(e){return e===void 0&&(e=!0),this.listSliderAdaptThumbSizeEnable=e,this},setListScrollerConfig(e){return e===void 0&&(e={}),this.listScrollerConfig=e,this},setListMouseWheelScrollerConfig(e){return this.listMouseWheelScrollerConfig=e,this},setButtonClickCallback(e){return this.listOnButtonClick=e,this},setButtonOverCallback(e){return this.listOnButtonOver=e,this},setButtonOutCallback(e){return this.listOnButtonOut=e,this},setListExpandDirection(e){return typeof e=="string"&&(e=JM[e]),this.listExpandDirection=e,this},setListEaseInDuration(e){return e===void 0&&(e=0),this.listEaseInDuration=e,this},setListEaseOutDuration(e){return e===void 0&&(e=0),this.listEaseOutDuration=e,this},setListTransitInCallback(e){return this.listTransitInCallback=e,this},settListTransitOutCallback(e){return this.listTransitOutCallback=e,this},setListBounds(e){return this.listBounds=e,this},setListWidth(e){return this.listWidth=e,this},setListHeight(e){return this.listHeight=e,this},setListSize(e,t){return this.setListWidth(e).setListHeight(t),this},setListMaxHeight(e){return this.listMaxHeight=e,this},setListAlignmentMode(e){return this.listAlignMode=e,this},setListAlignmentSide(e){return e===void 0&&(e=""),this.listAlignSide=e,this},setListSpace(e){return e===void 0&&(e={}),this.listSpace=e,this},setListDraggable(e){return e===void 0&&(e=!0),this.listDraggable=e,this}};const JM={down:0,up:1};var Hv={getChildrenWidth:function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,n=!1;return t.rexSizer.hidden?e=0:this.scrollMode===0?(e=this.getChildWidth(t))===void 0&&(n=!0):e=0,n?void 0:e},getChildrenHeight:function(){if(this.rexSizer.hidden)return 0;var e,t=this.child,n=!1;if(t.rexSizer.hidden)e=0;else switch(this.scrollMode){case 0:default:e=0;break;case 1:(e=this.getChildHeight(t))===void 0&&(n=!0)}return n?void 0:e},getChildrenSizers:function(e){return e===void 0&&(e=[]),this.child&&this.child.isRexSizer&&e.push(this.child),e},resetChildPosition:function(){var e=this.left,t=this.top;switch(this.scrollMode){case 0:t+=this.childOY;break;case 1:e+=this.childOY;break;default:t+=this.childOY,e+=this.childOX}this.child.setPosition(e,t),this.resetChildPositionState(this.child),this.setMaskChildrenFlag()},layoutChildren:function(){var e,t,n=this.child;if(!n.rexSizer.hidden){switch(this.scrollMode){case 0:e=this.width*this.scaleX;break;case 1:t=this.height*this.scaleY}n.isRexSizer?n.runLayout(this,e,t):ae(n,e,t),this.resetChildPosition(),this.layoutChildrenMask(),this.maskChildren()}},removeChildCallback:function(e,t){t||e.clearMask&&e.clearMask(!1)}};Object.assign(Hv,Uv);const vp=Phaser.Utils.Objects.IsPlainObject,Ie=Phaser.Utils.Objects.GetValue,QM=Phaser.Display.Align.TOP_LEFT;class Kv extends Us{constructor(t,n,s,o,i,r){vp(n)?(n=Ie(r=n,"x",0),s=Ie(r,"y",0),o=Ie(r,"width",void 0),i=Ie(r,"height",void 0)):vp(o)&&(o=Ie(r=o,"width",void 0),i=Ie(r,"height",void 0)),super(t,n,s,o,i,r),this.type="rexScrollableBlock",this.child=void 0,this.childrenMask=void 0,this._childOY=0,this._childOX=0,this.execeedTopState=!1,this.execeedBottomState=!1,this.execeedLeftState=!1,this.execeedRightState=!1,this.setScrollMode(Ie(r,"scrollMode",0));var h=Ie(r,"clampChildOY",!0),a=Ie(r,"clampChildOX",h);this.setClampMode(h,a);var u=Ie(r,"child",void 0),l=Ie(r,"expand",!0);u.setOrigin&&u.setOrigin(0),this.add(u),this.sizerChildren=[u];var d=this.getSizerConfig(u);d.align=QM,d.expand=l,this.child=u;var c=Ie(r,"mask");this.setupChildrenMask(c),this.childrenMask&&(this.maskGameObject=Hl(this.childrenMask))}destroy(t){this.scene&&!this.ignoreDestroy&&(this.destroyChildrenMask(),this.child=void 0,super.destroy(t))}setScrollMode(t){return typeof t=="string"&&(t=Pv[t.toLowerCase()]),this.scrollMode=t,this}setClampMode(t,n){return this.clampChildOY=t,this.clampChildOX=n,this}get instHeight(){return this.scrollMode===0||this.scrollMode===2?this.displayHeight:this.displayWidth}get instWidth(){return this.scrollMode===0||this.scrollMode===2?this.displayWidth:this.displayHeight}get childHeight(){return this.scrollMode===0||this.scrollMode===2?Tt(this.child):bt(this.child)}get childWidth(){return this.scrollMode===0||this.scrollMode===2?bt(this.child):Tt(this.child)}get topChildOY(){return 0}get bottomChildOY(){return-this.visibleHeight}get leftChildOX(){return 0}get rightChildOX(){return-this.visibleWidth}get childVisibleHeight(){return this.instHeight}get childVisibleWidth(){return this.instWidth}get visibleHeight(){var t=this.childHeight-this.childVisibleHeight;return t<0&&(t=0),t}get visibleWidth(){var t=this.childWidth-this.childVisibleWidth;return t<0&&(t=0),t}childOYExceedTop(t){return t===void 0&&(t=this.childOY),t>this.topChildOY}childOYExeceedBottom(t){return t===void 0&&(t=this.childOY),t<this.bottomChildOY}childOXExceedLeft(t){return t===void 0&&(t=this.childOX),t>this.leftChildOX}childOXExeceedRight(t){return t===void 0&&(t=this.childOX),t<this.rightChildOX}get childOY(){return this._childOY}set childOY(t){var n=this.topChildOY,s=this.bottomChildOY,o=this.childOYExceedTop(t),i=this.childOYExeceedBottom(t);this.clampChildOY&&(this.childVisibleHeight>this.childHeight?t=0:o?t=n:i&&(t=s)),this._childOY!==t&&(this._childOY=t,this.resetChildPosition()),o&&(this.execeedTopState||this.emit("execeedtop",this,t,n)),this.execeedTopState=o,i&&(this.execeedBottomState||this.emit("execeedbottom",this,t,s)),this.execeedBottomState=i}get childOX(){return this._childOX}set childOX(t){var n=this.leftChildOX,s=this.rightChildOX,o=this.childOXExceedLeft(t),i=this.childOXExeceedRight(t);this.clampChildOX&&(this.childVisibleWidth>this.childWidth?t=0:o?t=n:i&&(t=s)),this._childOX!==t&&(this._childOX=t,this.resetChildPosition()),o&&(this.execeedLeftState||this.emit("execeedleft",this,t,n)),this.execeedLeftState=o,i&&(this.execeedRightState||this.emit("execeedright",this,t,s)),this.execeedRightState=i}setChildOY(t){return this.childOY=t,this}setChildOX(t){return this.childOX=t,this}set t(t){this.childOY=-this.visibleHeight*t}get t(){var t=this.visibleHeight;return t===0?0:this.childOY/-t}set s(t){this.childOX=-this.visibleWidth*t}get s(){var t=this.visibleWidth;return t===0?0:this.childOX/-t}setChildOYByPercentage(t){return this.t=t,this}setChildOXByPercentage(t){return this.s=t,this}}Object.assign(Kv.prototype,Hv);const yp=["top","bottom","centerY","center"],xp=["left","right","centerX","center"];var no=function(e,t,n){var s,o=(t=t.toUpperCase())==="Y",i=this.childrenMap.child;if(o){if(n)for(var r=0,h=yp.length;r<h;r++){var a=yp[r];if(n.indexOf(a)!==-1){n=a;break}}switch(n){case"top":s=i.top-Ds(e).y;break;case"bottom":s=i.bottom-Ar(e).y;break;case"centerY":case"center":s=i.centerY-Dd(e).y;break;default:var u=i.top-Ds(e).y,l=i.bottom-Ar(e).y;s=u<=0&&l>=0?0:Math.abs(u)<=Math.abs(l)?u:l}}else{if(n){for(r=0,h=xp.length;r<h;r++)if(a=xp[r],n.indexOf(a)!==-1){n=a;break}}switch(n){case"left":s=i.left-Ds(e).x;break;case"right":s=i.right-_r(e).x;break;case"centerX":case"center":s=i.centerX-Dd(e).x;break;default:var d=i.left-Ds(e).x,c=i.right-_r(e).x;s=d<=0&&c>=0?0:Math.abs(d)<=Math.abs(c)?d:c}}return s};const Vi=Phaser.Utils.Objects.GetValue;class Vu extends $r{constructor(t,n){n===void 0&&(n={});var s=Xu(n),o=Vi(n,"panel",void 0);o===void 0&&(o={}),o.scrollMode=s,o.clampChildOY=Vi(n,"clampChildOY",!1),o.clampChildOX=Vi(n,"clampChildOX",!1);var i,r,h=new Kv(t,o);switch(t.add.existing(h),s){case 0:i=Vi(n,"expand.panel",!0),r=!0;break;case 1:i=!0,r=Vi(n,"expand.panel",!0);break;default:i=!0,r=!0}n.type="rexScrollablePanel",n.child={gameObject:h,expandWidth:i,expandHeight:r,align:Vi(n,"align.panel","center")};var a=Vi(n,"space",void 0);a&&(a.child=Vi(a,"panel",0)),super(t,n),this.addChildrenMap("panel",h.child),this.addChildrenMap("panelLayer",h.maskLayer),this.addChildrenMap("mask",h.maskGameObject),this.addChildrenMap("scrollableBlock",h)}setChildrenInteractive(t){return t===void 0&&(t={}),t.hasOwnProperty("eventEmitter")||(t.eventEmitter=this),t.hasOwnProperty("targets")||(t.targets=[this.childrenMap.panel]),Eu(this.childrenMap.child,t),this}}var t_={scrollToChild:function(e,t,n,s){if(!this.hasChild(e))return this;var o,i;switch(this.scrollMode){case 0:o=this.childOY+no.call(this,e,"y",t);break;case 1:o=this.childOY+no.call(this,e,"x",t);break;default:o=this.childOY+no.call(this,e,"y",t),i=this.childOX+no.call(this,e,"x",t)}return n===void 0||n<=0?(this.childOY=o,this.scrollMode===2&&(this.childOX=i)):(this._easeScrollChildOY===void 0&&(this._easeScrollChildOY=new Qe(this)),this._easeScrollChildOY.restart({key:"childOY",to:o,duration:n,ease:s}),this.scrollMode===2&&(this._easeScrollChildOX===void 0&&(this._easeScrollChildOX=new Qe(this)),this._easeScrollChildOX.restart({key:"childOX",to:i,duration:n,ease:s}))),this}};Object.assign(Vu.prototype,t_);const e_=Phaser.Utils.Objects.GetValue;var i_=function(){var e,t=this.scene,n=this.listCreateBackgroundCallback;n&&(e=n.call(this,t),t.add.existing(e));var s=[],o=this.listCreateButtonCallback;if(o)for(var i=this.options,r=0,h=i.length;r<h;r++){var a=o.call(this,t,i[r],r,i);a&&(t.add.existing(a),s.push(a))}var u=this.listWidth;u===void 0&&(u=this.listAlignMode==="text"?this.getElement("text").width:this.width);var l,d=this.listHeight,c={width:u,buttons:s,space:this.listSpace};if(this.listCreateSliderThumbCallback&&(d>0||this.listMaxHeight>0)){if(s=bp(t,c,this.listWrapEnable),this.listMaxHeight>0&&(s.layout(),s.height<=this.listMaxHeight&&(l=s)),!l){d===0&&(d=this.listMaxHeight);var p=Tp(t,this.listCreateSliderTrackCallback),f=Tp(t,this.listCreateSliderThumbCallback);l=new Vu(t,{height:d,scrollMode:0,panel:{child:s,mask:{padding:1}},slider:{track:p,thumb:f,adaptThumbSize:this.listSliderAdaptThumbSizeEnable},scrollDetectionMode:1,scroller:this.listScrollerConfig,mouseWheelScroller:this.listMouseWheelScrollerConfig,space:{panel:e_(this.listSpace,"panel",0)}}),t.add.existing(l)}}else c.height=d,s=bp(t,c,this.listWrapEnable),l=s;return e&&l.addBackground(e,"background"),this.listDraggable&&l.setDraggable(!0),l!==s&&s.on("button.over",function(v,g,y,m){l.emit("button.over",v,g,y,m)}).on("button.out",function(v,g,y,m){l.emit("button.out",v,g,y,m)}).on("button.click",function(v,g,y,m){l.emit("button.click",v,g,y,m)}),l},bp=function(e,t,n){var s;return n?(t.orientation="x",s=new Fn(e,t)):(t.orientation="y",s=new de(e,t)),e.add.existing(s),s},Tp=function(e,t,n){var s;return t&&(s=t.call(n,e),e.add.existing(s)),s};const yn=Phaser.Utils.Objects.GetValue,s_={down:0,up:1},wp=Phaser.Utils.Objects.GetValue;class qv extends Xo{constructor(t,n){n===void 0&&(n={}),n.transitIn==null&&(n.transitIn=function(i,r){xu(i,r,"y","Cubic")}),n.transitOut==null&&(n.transitOut=function(i,r){(function(h,a,u,l,d){var c={mode:0,end:{y:0}};c.duration=a,c.ease="Linear",d===void 0?d=new Lr(h,c):d.resetFromJSON(c),d.restart()})(i,r)}),n.manualClose=!0,n.clickOutsideClose=!0,n.destroy=!0,super(t,n),function(i,r){var h=yn(r,"expandDirection",void 0);typeof h=="string"&&(h=s_[h]);var a,u,l,d,c=(u="alignTargetX",Mi(a=r,"alignTarget")?xt(a,"alignTarget"):Mi(a,u)?xt(a,u):void 0),p=yn(r,"alignTargetY",c),f=yn(r,"alignOffsetX",0),v=yn(r,"alignOffsetY",0),g=yn(r,"alignSide","").includes("right"),y=yn(r,"bounds"),m=h===0,x=!(m||h===1),b=g?1:0,w=m||x?0:1;i.setOrigin(b,w),l=g?c.getTopRight().x:c.getTopLeft().x,d=p.getBottomLeft().y,i.setPosition(l+f,d+v);var T=y;T||(T=Xr(i.scene)),x&&i.getBottomLeft().y>T.bottom&&(d=p.getTopLeft().y,i.setOrigin(0,1).setPosition(l+f,d+v))}(t,n),t.isRexSizer&&t.layout();var s=wp(n,"touchOutsideClose",!1),o=wp(n,"anyTouchClose",!1);o&&(s=!1),o?this.once("open",this.anyTouchClose,this):s&&this.once("open",this.touchOutsideClose,this),this.requestOpen()}shutdown(t){this.isShutdown||(this.scene.input.off("pointerup",this.touchCloseCallback,this),super.shutdown(t))}touchOutsideClose(){return this.scene.input.on("pointerup",this.touchCloseCallback,this),this.clickOutsideTest=!0,this}anyTouchClose(){return this.scene.input.once("pointerup",this.touchCloseCallback,this),this}touchCloseCallback(t){this.clickOutsideTest&&zo(this.parent,t.worldX,t.worldY)||this.requestClose()}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const n_={focusNextButton(){if(!this.isOpened)return this;var e,t=this.currentOverIndex;return e=t===void 0?0:(t+1)%this.listPanel.getButtons().length,this.emitButtonOver(e),this},focusPrevButton(){if(!this.isOpened)return this;var e,t=this.currentOverIndex;if(t===void 0)e=0;else{var n=this.listPanel.getButtons().length;e=(t-1+n)%n}return this.emitButtonOver(e),this}};var $v={openListPanel:function(){if(this.listPanel)return this;if(this.options.length===0)return this;var e,t=i_.call(this);t.on("button.over",function(s,o,i,r){this.currentOverIndex=o,this.listOnButtonOver&&this.listOnButtonOver.call(this,s,o,i,r),this.emit("button.over",this,t,s,o,i,r)},this).on("button.out",function(s,o,i,r){this.currentOverIndex===o&&(this.currentOverIndex=void 0),this.listOnButtonOut&&this.listOnButtonOut.call(this,s,o,i,r),this.emit("button.out",this,t,s,o,i,r)},this),e=this.listAlignMode&&this.listAlignMode!=="label"?this.getElement(this.listAlignMode):this;var n=new qv(t,{duration:{in:this.listEaseInDuration,out:this.listEaseOutDuration},transitIn:this.listTransitInCallback,transitOut:this.listTransitOutCallback,expandDirection:this.listExpandDirection,alignTargetX:e,alignTargetY:this,alignSide:this.listAlignSide,bounds:this.listBounds}).on("open",function(){t.on("button.click",function(s,o,i,r){this.listOnButtonClick&&this.listOnButtonClick.call(this,s,o,i,r),this.emit("button.click",this,t,s,o,i,r),this.dropDownBehavior.requestClose()},this),this.emit("list.open",this,t)},this).on("close",function(){this.listPanel=void 0,this.dropDownBehavior=void 0,this.emit("list.close",this)},this);return t.onClickOutside(function(){n.requestClose()}),this.listPanel=t,this.dropDownBehavior=n,this.pin(t),this},closeListPanel:function(){return this.dropDownBehavior?(this.dropDownBehavior.requestClose(),this.currentOverIndex=void 0,this):this},toggleListPanel:function(){return this.listPanel?this.closeListPanel():this.openListPanel(),this},emitButtonClick:function(e){if(e===void 0&&(e=this.currentOverIndex),e===void 0)return this;var t=this.listPanel,n=t?t.getButton(e):this.options[e];return this.listOnButtonClick&&this.listOnButtonClick.call(this,n,e),this.emit("button.click",this,t,n,e),this},emitButtonOver:function(e){var t=this.listPanel;return t?(t.emitButtonOver(e),this):this}};Object.assign($v,ZM,n_);const St=Phaser.Utils.Objects.GetValue;Object.assign((class extends Ws{constructor(e,t){super(e,t),this.type="rexDropDownList",this.timer=void 0,this.listPanel=void 0,this.currentOverIndex=void 0,this.setOptions(St(t,"options"));var n=St(t,"list");this.setWrapEnable(St(n,"wrap",!1)),this.setCreateButtonCallback(St(n,"createButtonCallback")),this.setCreateListBackgroundCallback(St(n,"createBackgroundCallback")),this.setCreateListSliderTrackCallback(St(n,"createTrackCallback")),this.setCreateListSliderThumbCallback(St(n,"createThumbCallback")),this.setListSliderAdaptThumbSizeEnable(St(n,"sliderAdaptThumbSize",!1)),this.setListScrollerConfig(St(n,"scroller")),this.setListMouseWheelScrollerConfig(St(n,"mouseWheelScroller")),this.setButtonClickCallback(St(n,"onButtonClick")),this.setButtonOverCallback(St(n,"onButtonOver")),this.setButtonOutCallback(St(n,"onButtonOut")),this.setListExpandDirection(St(n,"expandDirection")),this.setListEaseInDuration(St(n,"easeIn",500)),this.setListEaseOutDuration(St(n,"easeOut",100)),this.setListTransitInCallback(St(n,"transitIn")),this.settListTransitOutCallback(St(n,"transitOut")),this.setListMaxHeight(St(n,"maxHeight",0)),this.setListSize(St(n,"width"),St(n,"height",0)),this.setListAlignmentMode(St(n,"alignParent","text")),this.setListAlignmentSide(St(n,"alignSide","")),this.setListBounds(St(n,"bounds")),this.setListSpace(St(n,"space")),this.setListDraggable(St(n,"draggable",!1)),this.setValueChangeCallback(St(t,"setValueCallback"),St(t,"setValueCallbackScope")),this.setValue(St(t,"value")),this.onClick(this.toggleListPanel,this)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.listPanel&&(this.listPanel.destroy(e),this.listPanel=void 0),super.destroy(e))}get isOpened(){return!!this.listPanel}setOptions(e){return e===void 0&&(e=[]),this.options=e,this}setValueChangeCallback(e,t){return this.valueChangeCallback=e,this.valueChangeCallbackScope=t,this}setValue(e){return this.value=e,this}get value(){return this._value}set value(e){if(this._value!==e){var t=this._value;this._value=e;var n=this.valueChangeCallback,s=this.valueChangeCallbackScope;n&&(s?n.call(s,this,e,t):n(this,e,t)),this.emit("valuechange",this,e,t)}}}).prototype,$v);const r_={clearText(){return this.sections.length=0,this.pageStartIndexes.length=0,this.lines.length=0,this},appendPage(e){var t=this.totalLinesCount;this.sections.push(Pn(e)),e=this.sections.join(`
`),this.lines=zu(this.parent,e,this.lines);var n,s=this.totalLinesCount-t;n=this.pageLinesCount>0?Math.ceil(s/this.pageLinesCount):1;for(var o=0;o<n;o++)this.pageStartIndexes.push(t+o*this.pageLinesCount);return this},setText(e,t){t===void 0&&(t=!0),t&&this.resetIndex(),this.clearText();for(var n=Pn(e).split(this.pageBreak),s=0,o=n.length;s<o;s++)this.appendPage(n[s]);return this},appendText(e){var t=this.content+Pn(e);return this.setText(t,!1),this}},Sp=Phaser.Math.Clamp,a_={resetIndex(){return this.pageIndex=-1,this.startLineIndex=-1,this.endLineIndex=void 0,this},setPageIndex(e){return e=Sp(e,0,this.lastPageIndex),this.pageIndex=e,this.startLineIndex=this.pageStartIndexes[e],this.endLineIndex=this.pageStartIndexes[e+1],this},getPage(e){return e===void 0&&(e=this.pageIndex),this.setPageIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getNextPage(){return this.getPage(this.pageIndex+1)},getPreviousPage(){return this.getPage(this.pageIndex-1)},getFirstPage(){return this.getPage(0)},getLastPage(){return this.getPage(this.lastPageIndex)},setStartLineIndex(e){var t=Math.max(this.totalLinesCount-this.pageLinesCount,0);return e=Sp(e,0,t),this.startLineIndex=e,this.endLineIndex=e+this.pageLinesCount,this},getPageByLineIndex(e){return this.setStartLineIndex(e).getLines(this.startLineIndex,this.endLineIndex)},getPageOfNextLine(){return this.getPageByLineIndex(this.startLineIndex+1)},getPageOfPreviousLine(){return this.getPageByLineIndex(this.startLineIndex-1)},getPageOfFirstLine(){return this.getPageByLineIndex(0)},getPageOfLastLine(){return this.getPageByLineIndex(this.totalLinesCount)}},o_={showPage(e){return this.displayText(this.getPage(e)),this},showNextPage(){return this.displayText(this.getNextPage()),this},showPreviousPage(){return this.displayText(this.getPreviousPage()),this},showFirstPage(){return this.displayText(this.getFirstPage()),this},showLastPage(){return this.displayText(this.getLastPage()),this},show(){return this.displayText(this.getLines()),this},showPageByLineIndex(e){return this.displayText(this.getPageByLineIndex(e)),this},showNextLine(){return this.displayText(this.getPageOfNextLine()),this},showPreviousLine(){return this.displayText(this.getPageOfPreviousLine()),this},showFirstLine(){return this.displayText(this.getPageOfFirstLine()),this},showLastLine(){return this.displayText(this.getPageOfLastLine()),this},displayText(e){Uo(this.parent,e)}};var Zv={getLines:function(e,t){if(e===void 0&&(e=this.startLineIndex),t===void 0){var n=this.pageLinesCount;t=n>0?e+n:this.totalLinesCount}var s;switch(t>this.totalLinesCount&&(t=this.totalLinesCount),this.textObjectType){case 0:case 2:s=this.lines.slice(e,t).join(`
`);break;case 1:var o=this.lines.getLineStartIndex(e),i=this.lines.getLineEndIndex(t-1);((s=this.lines.getSliceTagText(o,i,!0)).match(/\n/g)||[]).length>t-e-1&&(s=s.substring(0,s.length-1))}return s}};Object.assign(Zv,r_,a_,o_);const xn=Phaser.Utils.Objects.GetValue;Phaser.Math.Clamp,Object.assign((class extends Rt{constructor(e,t){super(e,{eventEmitter:!1}),this.textObjectType=Is(this.parent),this.pageStartIndexes=[],this.lines=zu(this.parent,""),this.sections=[],this.resetFromJSON(t)}resetFromJSON(e){this.setMaxLines(xn(e,"maxLines",void 0)),this.setPageBreak(xn(e,"pageBreak",`\f
`)),this.setText(xn(e,"text","")),this.startLineIndex=xn(e,"start",-1),this.endLineIndex=xn(e,"end",void 0);var t=xn(e,"page");return t===void 0?this.resetIndex():this.setPageIndex(t),this}toJSON(){return{maxLines:this.maxLines,text:this.content,start:this.startLineIndex,end:this.endLineIndex,page:this.pageIndex,pageBreak:this.pageBreak}}shutdown(e){if(!this.isShutdown){switch(this.textObjectType){case 0:case 2:this.lines.length=0;break;case 1:this.lines.destroy()}this.pageStartIndexes.length=0,this.sections.length=0,this.lines=void 0,this.pageStartIndexes=void 0,this.sections=void 0,super.shutdown(e)}}setMaxLines(e){return this.maxLines=e,this}setPageBreak(e){return this.pageBreak=e,this}get pageCount(){return this.pageStartIndexes.length}get lastPageIndex(){return this.pageCount-1}get isFirstPage(){return this.pageIndex<=0}get isLastPage(){return this.pageIndex>=this.pageCount-1}get totalLinesCount(){return this.lines?this.lines.length:0}get pageLinesCount(){if(this.maxLines!==void 0)return this.maxLines;var e;switch(this.textObjectType){case 0:case 1:var t=this.parent.style.maxLines;e=t>0?t:Math.floor(function(n){var s,o,i;switch(Is(n)){case 0:case 1:s=n.height-n.padding.top-n.padding.bottom,o=n.lineSpacing,i=n.style.metrics.fontSize+n.style.strokeThickness;break;case 2:s=n.height,o=0;var r=n.fontSize/n.fontData.size;i=n.fontData.lineHeight*r}return(s-o)/(i+o)}(this.parent));break;case 2:e=this.totalLinesCount}return e}get isFirstLine(){return this.startLineIndex<=0}get isLastLine(){return this.endLineIndex===this.totalLinesCount}get content(){return this.sections.join(this.pageBreak)}}).prototype,Zv);const h_={setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?Uo(this.parent,e):this.parent.setText(e)},appendText(e){var t=this.text.concat(Pn(e));return this.isTyping?this.setTypingContent(t):this.start(t,void 0,this.textLength),this}};var Jv=function(e,t){return e.getPlainText&&(t=e.getPlainText(t)),t},gr=function(e,t,n,s){return e.getSubString?e.getSubString(t,n,s):t.slice(n,s)},Qv=function(e,t,n,s){var o,i=this.parent;if(s===0){var r=0,h=t;this.insertIndex=h,o=gr(i,e,r,h)}else if(s===1)r=(h=n)-t,this.insertIndex=0,o=gr(i,e,r,h);else if(s===2){var a=n/2;h=(r=Math.floor(a-t/2))+t,this.insertIndex=t%2?t:0,o=gr(i,e,r,h)}else if(s===3){var u,l=Math.floor(t/2);u=l>0?gr(i,e,r=(h=n)-l,h):"";var d,c=t-l;c>0?(h=(r=0)+c,this.insertIndex=h,d=gr(i,e,r,h)):(d="",this.insertIndex=0),o=d+u}return this.insertChar=o.charAt(this.insertIndex-1),o},ty={start:function(e,t,n,s){return e!==void 0&&this.setTypingContent(e),t!==void 0&&(this.speed=t),n===void 0&&(n=0),this.typingIndex=n+1,this.speed===0?this.stop(!0):(this.setText(""),this.startTimer(s)),this},startFromLine:function(e,t,n,s,o){var i;return t>0&&(s===void 0&&(s=0),i=function(r,h){for(var a=void 0,u=0;u<h&&(a=r.indexOf(`
`,a+1))!==-1;u++);return a}(Jv(this.parent,e),t)+s),this.start(e,n,i,o)},stop:function(e){if(this.getTimer()&&this.freeTimer(),e){for(;!this.isLastChar;)Qv.call(this,this.text,this.typingIndex,this.textLength,this.typeMode),this.emit("typechar",this.insertChar),this.typingIndex++;this.setText(this.text),this.emit("type"),this.emit("complete",this,this.parent)}return this},pause:function(){var e=this.getTimer();return e&&(e.paused=!0),this},resumeTyping:function(){var e=this.getTimer();return e&&(e.paused=!1),this}};Object.assign(ty,h_);const mr=Phaser.Utils.Objects.GetFastValue,El=Phaser.Utils.Objects.GetValue,l_={"left-to-right":0,"right-to-left":1,"middle-to-sides":2,"sides-to-middle":3};Object.assign((class extends Rt{constructor(e,t){super(e,t),this.timer=null,this.resetFromJSON(t)}resetFromJSON(e){this.setTextWrapEnable(El(e,"wrap",!1)),this.setTypeMode(El(e,"typeMode",0)),this.setTypingSpeed(El(e,"speed",333)),this.setTextCallback=mr(e,"setTextCallback",null),this.setTextCallbackScope=mr(e,"setTextCallbackScope",null),this.setTypingContent(mr(e,"text","")),this.typingIndex=mr(e,"typingIndex",0),this.insertIndex=null,this.insertChar=null;var t=mr(e,"elapsed",null);return t!==null&&this.start(void 0,void 0,this.typingIndex,t),this}shutdown(e){this.isShutdown||(this.freeTimer(),super.shutdown(e))}setTypeMode(e){return typeof e=="string"&&(e=l_[e]),this.typeMode=e,this}setTypeSpeed(e){return this.speed=e,this}setTypingSpeed(e){return this.speed=e,this}setTextWrapEnable(e){return e===void 0&&(e=!0),this.textWrapEnable=e,this}set text(e){var t=Pn(e);this.textWrapEnable&&(t=function(n,s){switch(Is(n)){case 0:n.style.syncFont(n.canvas,n.context),s=n.runWordWrap(s);break;case 1:s=n.getText(s,void 0,void 0,!0);break;case 2:s=n.setText(s).getTextBounds().wrappedText}return s}(this.parent,t)),this._text=t}get text(){return this._text}get isTyping(){return this.getTimer()!==null}get isLastChar(){return this.typingIndex===this.textLength}setTypingContent(e){return this.text=e,this.textLength=Jv(this.parent,this.text).length,this}onTyping(){var e=Qv.call(this,this.text,this.typingIndex,this.textLength,this.typeMode);this.setText(e),this.emit("typechar",this.insertChar),this.emit("type"),this.isLastChar?(this.freeTimer(),this.scene.sys.events.once("preupdate",function(){this.emit("complete",this,this.parent)},this)):(this.timer.delay=this.speed,this.typingIndex++)}startTimer(e){var t;return this.timer&&this.freeTimer(),e===void 0?t=0:(this.speed,t=e),this.timer=this.scene.time.addEvent({delay:1e-4,startAt:t,loop:!0,callback:this.onTyping,callbackScope:this}),this}getTimer(){return this.timer}freeTimer(){return this.timer&&(this.timer.remove(),this.timer=null),this}setText(e){this.setTextCallback&&(e=this.setTextCallbackScope?this.setTextCallback.call(this.setTextCallbackScope,e,this.isLastChar,this.insertIndex):this.setTextCallback(e,this.isLastChar,this.insertIndex)),this.textWrapEnable?Uo(this.parent,e):this.parent.setText(e)}}).prototype,ty),Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue;const u_=Fi.prototype.add;var Cp=function(e,t,n,s,o,i,r,h,a){return e.setVisible(!1),u_.call(this,e,t,n,s,o,i,r,h,a),this};const d_={add:Cp,addPage:Cp},Ep=ii.prototype.setChildVisible;var ey={getPage:function(e){return e===void 0?null:this.sizerChildren.hasOwnProperty(e)?this.sizerChildren[e]:null},swapPage:function(e,t){this._previousKey=this._currentKey;var n=this.previousPage;n&&(this.swapMode===0?(Ep.call(this,n,!1),this.emit("pageinvisible",n,this._previousKey,this)):n.destroy()),e&&!this.sizerChildren.hasOwnProperty(e)&&this.emit("createpage",e,this),this._currentKey=e;var s=this.currentPage;return s&&(Ep.call(this,s,!0),this.emit("pagevisible",s,this._currentKey,this),t===void 0&&(t=this.fadeInDuration),t>0&&s.setAlpha(0).fadeIn(t,1)),this},hasPage:function(e){return this.sizerChildren.hasOwnProperty(e)}};Object.assign(ey,d_);const Pp=Phaser.Utils.Objects.GetValue;class iy extends Fi{constructor(t,n){super(t,n),this.type="rexPages",this.childrenMap=this.sizerChildren,this._previousKey=void 0,this._currentKey=void 0,this.setSwapMode(Pp(n,"swapMode",0)),this.setFadeInDuration(Pp(n,"fadeIn",0))}setSwapMode(t){return typeof t=="string"&&(t=c_[t]),this.swapMode=t,this}setFadeInDuration(t){return this.fadeInDuration=t,this}get previousKey(){return this._previousKey}get currentKey(){return this._currentKey}set currentKey(t){this.swapPage(t)}get currentPage(){return this.getPage(this.currentKey)}get previousPage(){return this.getPage(this.previousKey)}get keys(){return Object.keys(this.sizerChildren)}}Object.assign(iy.prototype,ey);const c_={invisible:0,destroy:1},f_=Phaser.GameObjects.Mesh;class p_ extends f_{get tint(){return this.vertices.length===0?16777215:this.vertices[0].color}forceUpdate(){return this.dirtyCache[10]=1,this}}const sy=Phaser.Math.Vector3,g_=Phaser.Math.Matrix4;var Op=new sy,kp=new sy,Mp=new g_;const m_=Phaser.Utils.Objects.IsPlainObject,Ss=Phaser.Utils.Objects.GetValue,v_=Phaser.Geom.Mesh.GenerateGridVerts,Pl=Phaser.Math.RadToDeg,go=Phaser.Math.DegToRad,y_=1+1/Math.sin(go(45));let _p=class extends p_{constructor(e,t,n,s,o,i){m_(t)&&(t=Ss(i=t,"x",0),n=Ss(i,"y",0),s=Ss(i,"key",null),o=Ss(i,"frame",null)),super(e,t,n,s,o),this.type="rexPerspectiveImage",this.setSizeToFrame(),this.resetPerspective(),this.panZ(y_),this.hideCCW=Ss(i,"hideCCW",!0);var r=Ss(i,"gridWidth",0),h=Ss(i,"gridHeight",r);this.resetVerts(r,h),this.prevFrame=this.frame}preUpdate(e,t){this.prevFrame!==this.frame&&(this.prevFrame=this.frame,this.syncSize()),super.preUpdate(e,t)}get originX(){return .5}get originY(){return .5}resetPerspective(){return this.setPerspective(this.width,this.height,45),this}resetVerts(e,t){if(e!==void 0&&(this.gridWidth=e),t!==void 0&&(this.gridHeight=t),this.clear(),this.dirtyCache[9]=-1,this.width===0||this.height===0)return this;var n=this.frame.cutWidth,s=this.frame.cutHeight;this.gridWidth===0?e=Math.max(n/8,32):t=this.gridWidth,t=this.gridHeight===0?Math.max(s/8,32):this.gridHeight,v_({mesh:this,width:n/this.height,height:s/this.height,widthSegments:Math.ceil(n/e),heightSegments:Math.ceil(s/t)});var o=this.transformInfo;return o&&this.transformVerts(o.x,o.y,o.z,o.rotateX,o.rotateY,o.rotateZ),this}syncSize(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}get rotationX(){return this.modelRotation.x}set rotationX(e){this.modelRotation.x=e}get angleX(){return Pl(this.rotationX)}set angleX(e){this.rotationX=go(e)}get rotationY(){return this.modelRotation.y}set rotationY(e){this.modelRotation.y=e}get angleY(){return Pl(this.rotationY)}set angleY(e){this.rotationY=go(e)}get rotationZ(){return this.modelRotation.z}set rotationZ(e){this.modelRotation.z=e}get angleZ(){return Pl(this.rotationZ)}set angleZ(e){this.rotationZ=go(e)}transformVerts(e,t,n,s,o,i){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=0),i===void 0&&(i=0),this.transformInfo||(this.transformInfo={}),this.transformInfo.x=e,this.transformInfo.y=t,this.transformInfo.rotateX=s,this.transformInfo.rotateY=o,this.transformInfo.rotateZ=i,function(r,h,a,u,l,d,c){h===void 0&&(h=0),a===void 0&&(a=0),u===void 0&&(u=0),l===void 0&&(l=0),d===void 0&&(d=0),c===void 0&&(c=0),Op.set(h,a,u),kp.set(l,d,c),Mp.fromRotationXYTranslation(kp,Op,!0);for(var p=0,f=r.vertices.length;p<f;p++)r.vertices[p].transformMat4(Mp)}(this,e,t,n,s,o,i),this}};const x_=Phaser.Textures.DynamicTexture,b_=Phaser.Utils.Objects.IsPlainObject,ro=Phaser.Utils.Objects.GetValue;Phaser.Animations.AnimationState,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var Je=function(e,t,n,s){if(Array.isArray(e))for(var o=0,i=e.length;o<i;o++){var r=e[o];if((!s||r)&&(n?t.call(n,r,o,e):t(r,o,e)))return}else for(var h in e)if(r=e[h],(!s||r)&&(n?t.call(n,r,h,e):t(r,h,e)))return};const bn=Phaser.Math.RadToDeg,Tn=Phaser.Math.DegToRad;class T_ extends ii{constructor(t,n,s,o,i,r){super(t,n,s,o,i),this.faces=r,Je(r,function(h){h.setPosition(n,s),this.add(h)},this,!0)}get rotationX(){return 0}set rotationX(t){}get angleX(){return bn(this.rotationX)}set angleX(t){this.rotationX=Tn(t)}get rotateX(){return bn(this.rotationX)}set rotateX(t){this.rotationX=Tn(t)}get rotationY(){return 0}set rotationY(t){}get angleY(){return bn(this.rotationY)}set angleY(t){this.rotationY=Tn(t)}get rotateY(){return bn(this.rotationY)}set rotateY(t){this.rotationY=Tn(t)}get rotationZ(){return 0}set rotationZ(t){}get angleZ(){return bn(this.rotationZ)}set angleZ(t){this.rotationZ=Tn(t)}get rotateZ(){return bn(this.rotationZ)}set rotateZ(t){this.rotationZ=Tn(t)}setDebug(t,n){return Je(this.faces,function(s){s.setDebug(t,n)},null,!0),this}panX(t){return Je(this.faces,function(n){n.panX(t)},null,!0),this}panY(t){return Je(this.faces,function(n){n.panY(t)},null,!0),this}panZ(t){return Je(this.faces,function(n){n.panZ(t)},null,!0),this}transformVerts(t,n,s,o,i,r){return Je(this.faces,function(h){h.transformVerts(t,n,s,o,i,r)},null,!0),this}forEachFace(t,n,s){return Je(this.faces,t,n,s),this}}const w_=Phaser.Utils.Objects.IsPlainObject,S_={key:"__WHITE"},C_={image:_p,rendertexture:class extends _p{constructor(e,t,n,s,o,i){b_(t)&&(t=ro(i=t,"x",0),n=ro(i,"y",0),s=ro(i,"width",32),o=ro(i,"height",32));var r=function(h,a,u){return a===void 0&&(a=2),u===void 0&&(u=2),new x_(h.sys.textures,null,a,u)}(e,s,o);super(e,t,n,r,null,i),this.type="rexPerspectiveRenderTexture",this.rt=this.texture}destroy(e){this.scene&&!this.ignoreDestroy&&(super.destroy(e),this.rt.destroy(),this.rt=null)}snapshot(e,t){return t===void 0&&(t={}),t.gameObjects=e,t.renderTexture=this.rt,Dm(t),this.width===this.frame.realWidth&&this.height===this.frame.realHeight||this.syncSize(),this}}};var Ap=function(e,t){var n;return t===void 0&&(t=S_),w_(t)?(t.hasOwnProperty("type")||(t.hasOwnProperty("key")?t.type="image":t.hasOwnProperty("width")&&(t.type="rendertexture")),n=new C_[t.type](e,t),e.add.existing(n)):n=t,n};const Rp=(0,Phaser.Math.DegToRad)(180),Ol=Phaser.Utils.Objects.GetValue,E_=Phaser.Math.Linear;class P_ extends Xn{constructor(t,n){super(t,n),this.resetFromJSON(n),this.boot()}resetFromJSON(t){return super.resetFromJSON(t),this.setEase(Ol(t,"ease","Cubic")),this.setFrontToBackDirection(Ol(t,"frontToBack",0)),this.setBackToFrontDirection(Ol(t,"backToFront",1)),this}setFrontToBackDirection(t){return typeof t=="string"&&(t=Lp[t]),this.endAngleFB=t===0?180:-180,this}setBackToFrontDirection(t){return typeof t=="string"&&(t=Lp[t]),this.endAngleBF=t===0?-180:180,this}start(t,n){if(this.timer.isRunning)return this;this.timer.setDelay(this.delay).setDuration(t);var s=n+1;return this.parent.face===0?(this.startAngle=0,this.endAngle=this.endAngleFB*s):(this.startAngle=this.endAngleBF,this.endAngle=this.startAngle-this.endAngleBF*s),super.start(),this}flip(t,n){return this.isRunning||(t===void 0&&(t=this.duration),n===void 0&&(n=0),this.start(t,n),this.emit("start",this.parent,this),this.parent.currentFaceIndex=(this.parent.currentFaceIndex+n+1)%2),this}flipRight(t,n){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t,n),this}flipLeft(t,n){return this.parent.currentFaceIndex===0?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t,n),this}updateTarget(t,n){var s=this.easeFn(n.t),o=E_(this.startAngle,this.endAngle,s);t.orientation===0?t.angleY=o:t.angleX=o}}const Lp={right:0,"left-to-right":0,left:1,"right-to-left":1},O_=Phaser.Utils.Objects.IsPlainObject,Cs=Phaser.Utils.Objects.GetValue,k_=["back","front"];class M_ extends T_{constructor(t,n,s,o){O_(n)&&(n=Cs(o=n,"x",0),s=Cs(o,"y",0));var i=function(v,g,y){var m;if(y===void 0){var x;m=[];for(var b=0,w=g.length;b<w;b++)T=(x=g[b])?Ap(v,x):null,m.push(T)}else{var T,S;for(m={},b=0,w=y.length;b<w;b++)S=y[b],T=g.hasOwnProperty(S)?Ap(v,g[S]):null,m[S]=T}return m}(t,o,k_),r=i.back,h=i.front,a=Cs(o,"width"),u=Cs(o,"height");if(a===void 0||u===void 0){if(a===void 0){var l=h?h.width:0,d=r?r.width:0;a=Math.max(l,d)}if(u===void 0){var c=h?h.height:0,p=r?r.height:0;u=Math.max(c,p)}}super(t,n,s,a,u,i),this.type="rexPerspectiveCard",this.frontFaceRotationX=0,this.frontFaceRotationY=0,this.frontFaceRotationZ=0,Je(i,function(v,g){this[`${g}Face`]=v},this);var f=Cs(o,"flip",void 0);f!==!1&&(this.flip=new P_(this,f)),this.setOrientation(Cs(o,"orientation",0)),function(v,g){var y=g.back;y&&(v.orientation===0?y.transformVerts(0,0,0,0,Rp,0):y.transformVerts(0,0,0,Rp,0,0))}(this,i),this.setFace(Cs(o,"face",0))}get rotationX(){return this.frontFaceRotationX}set rotationX(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,Je(this.faces,function(n){n.rotationX=t},null,!0))}get rotationY(){return this.frontFaceRotationY}set rotationY(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,Je(this.faces,function(n){n.rotationY=t},null,!0))}get rotationZ(){return this.frontFaceRotationZ}set rotationZ(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,Je(this.faces,function(n){n.rotationZ=t},null,!0))}setOrientation(t){return typeof t=="string"&&(t=__[t]),this.orientation=t,this}get face(){return this.currentFaceIndex}set face(t){typeof t=="string"&&(t=A_[t]),this.currentFaceIndex=t;var n=t===1?180:0;this.orientation===0?this.angleY=n:this.angleX=n}setFace(t){return this.face=t,this}toggleFace(){var t=this.face===0?1:0;return this.setFace(t),this}}const __={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},A_={front:0,back:1};Phaser.Utils.Objects.GetValue,Phaser.Math.RadToDeg,Phaser.Math.DegToRad,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Angle.ShortestBetween,Phaser.Math.Wrap,Phaser.Math.Linear,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Math.Angle.WrapDegrees,Phaser.Math.Linear,Phaser.Math.Wrap,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.Wrap,Phaser.Utils.Objects.GetValue;const R_=Phaser.Utils.Objects.GetValue;var L_=function(e){var t=this.scene;this.setSnapshotPadding(R_(e,"snapshotPadding",0)),delete(e=vi(e)).width,delete e.height,e.front={width:1,height:1},e.back={width:1,height:1};var n=new M_(t,e);t.add.existing(n);var s=n.flip;if(s){var o=this;s.on("start",function(){o.enterPerspectiveMode()}).on("complete",function(){o.exitPerspectiveMode()})}return n};const D_=["front","back"],F_={enterPerspectiveMode(){return this.isInPerspectiveMode||(this.setChildVisible(this.perspectiveCard,!0),this.snapshotFace(0),this.snapshotFace(1),this.setChildVisible(this.childrenMap.front,!1),this.setChildVisible(this.childrenMap.back,!1),this.perspectiveCard.setSize(this.width,this.height)),this},exitPerspectiveMode(){if(!this.isInPerspectiveMode)return this;this.setChildVisible(this.perspectiveCard,!1);var e=this.perspectiveCard.face===0;return this.setChildVisible(this.childrenMap.front,e),this.setChildVisible(this.childrenMap.back,!e),this},setSnapshotPadding(e){return this.snapshotPadding=e,this},snapshotFace(e){typeof e=="number"&&(e=D_[e]);var t=this.perspectiveCard.faces[e],n=this.childrenMap[e];t.rt.clear();var s=n.visible;n.visible=!0;var o=n.isRexContainerLite?n.getAllVisibleChildren():n;return t.snapshot(o,{padding:this.snapshotPadding}),n.visible=s,this}},Dp=Phaser.Utils.Objects.GetValue;Object.assign((class extends Fi{constructor(e,t){super(e,t),this.type="rexPerspectiveCard";var n=t.back,s=Dp(t,"expand.back",!0);this.add(n,{key:"back",expand:s});var o=t.front,i=Dp(t,"expand.front",!0);this.add(o,{key:"front",expand:i}),this.perspectiveCard=L_.call(this,t),this.pin(this.perspectiveCard),this.exitPerspectiveMode(!1)}get flip(){return this.perspectiveCard.flip}get face(){return this.perspectiveCard.face}set face(e){if(!this.flip||!this.flip.isRunning){this.perspectiveCard.face=e;var t=e===0,n=this.childrenMap.front,s=this.childrenMap.back;this.setChildVisible(n,t),this.setChildVisible(s,!t)}}setFace(e){return this.face=e,this}toggleFace(){var e=this.face===0?1:0;return this.setFace(e),this}get isInPerspectiveMode(){return this.perspectiveCard.visible}get rotationX(){return this.perspectiveCard.rotationX}set rotationX(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationX=e}get angleX(){return this.perspectiveCard.angleX}set angleX(e){this.enterPerspectiveMode(),this.perspectiveCard.angleX=e}get rotationY(){return this.perspectiveCard.rotationY}set rotationY(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationY=e}get angleY(){return this.perspectiveCard.angleY}set angleY(e){this.enterPerspectiveMode(),this.perspectiveCard.angleY=e}get rotationZ(){return this.perspectiveCard.rotationZ}set rotationZ(e){this.enterPerspectiveMode(),this.perspectiveCard.rotationZ=e}get angleZ(){return this.perspectiveCard.angleZ}set angleZ(e){this.enterPerspectiveMode(),this.perspectiveCard.angleZ=e}panX(e){return this.enterPerspectiveMode(),this.perspectiveCard.panX(e),this}panY(e){return this.enterPerspectiveMode(),this.perspectiveCard.panY(e),this}panZ(e){return this.enterPerspectiveMode(),this.perspectiveCard.panZ(e),this}transformVerts(e,t,n,s,o,i){return this.enterPerspectiveMode(),this.perspectiveCard.transformVerts(e,t,n,s,o,i),this}forEachFace(e,t,n){return this.enterPerspectiveMode(),this.perspectiveCard.forEachFace(e,t,n),this}}).prototype,F_);const B_=Phaser.Utils.Objects.IsPlainObject,kl=Phaser.Utils.Objects.GetValue,I_=Phaser.Utils.String.UUID,X_={removePage(e,t){typeof e=="number"&&(e=this.getPageKey(e));var n=this.childrenMap.tabs,s=n.getByName(e),o=this.childrenMap.pages,i=o.getElement(e);return s&&i?(o.removeChildrenMap(e),n.removeButton(s,t),o.remove(i,t),this):this},removeAllPages(e){for(var t=this.getElement("tabs.buttons"),n=t.length-1;n>=0;n--)this.removePage(t[n].name,e);return this}};var z_={top:1,left:3,right:5,bottom:7},Fp={top:"bottom",left:"right",right:"left",bottom:"top"};const Y_={setTabsPadding(e,t){return this.childrenMap.tabs.setOuterPadding(e,t),this},getTabsPadding(e){return this.childrenMap.tabs.getOuterPadding(e)}};var ny={getPageKey:function(e){var t=this.getElement("tabs.buttons");if(!(e>=t.length))return t[e].name},getPageIndex:function(e){for(var t=this.getElement("tabs.buttons"),n=0,s=t.length;n<s;n++)if(t[n].name===e)return n},addPage:function(e,t,n){if(B_(e)){var s=e;e=kl(s,"key"),t=kl(s,"tab"),n=kl(s,"page")}return e||(e=I_()),t.name=e,this.childrenMap.tabs.addButton(t),this.childrenMap.pages.addPage(n,{key:e}),this},getPage:function(e){return typeof e=="number"&&(e=this.getPageKey(e)),this.childrenMap.pages.getPage(e)},getTab:function(e){var t;return t=typeof e=="number"?e:this.getPageIndex(e),this.getElement("tabs.buttons")[t]},setTabPosition:function(e){var t=z_[e];if(t===void 0)return this;var n=this.childrenMap.tabs,s=this.sizerChildren.indexOf(n);if(s===t)return this;this.sizerChildren[s]=null,this.sizerChildren[t]=n;var o=this.getSizerConfig(n).padding,i=Fp[this.tabsPosition];return o[Fp[e]]=o[i],o[i]=0,this.tabsPosition=e,this}};Object.assign(ny,{swapPage:function(e,t){var n,s;return(n=typeof e=="number"?e:this.getPageIndex(e))!=null&&(t!==void 0&&(s=this.childrenMap.pages.fadeInDuration,this.childrenMap.pages.fadeInDuration=t),this.childrenMap.tabs.emitButtonClick(n),s!==void 0&&(this.childrenMap.pages.fadeInDuration=s)),this},swapFirstPage:function(e){return this.swapPage(0,e),this},swapLastPage:function(e){var t=this.getElement("tabs.buttons").length-1;return this.swapPage(t,e),this}},X_,Y_);const $e=Phaser.Utils.Objects.GetValue,Bp=Bi.prototype.add;let ry=class extends Bi{constructor(e,t){t===void 0&&(t={}),t.column=3,t.row=3,t.columnProportions=[0,0,0],t.rowProportions=[0,0,0];var n=$e(t,"expand.pages",!0);n&&(t.columnProportions[1]=1,t.rowProportions[1]=1),super(e,t),this.type="rexTabPages";var s=$e(t,"background",void 0);s&&this.addBackground(s);var o=$e(t,"pages"),i=new iy(e,o);e.add.existing(i);var r=$e(t,"tabsPosition",void 0);r===void 0&&(r=$e(t,"tabPosition","top"));var h=$e(t,"wrapTabs",!1),a=h?Fn:de,u=$e(t,"tabs",void 0);u===void 0&&(u={}),u.orientation=r==="top"||r==="bottom"?"x":"y",u.buttonsType="radio",h||u.hasOwnProperty("expand")||(u.expand=$e(t,"expand.tabs",!1));var l,d,c=new a(e,u);e.add.existing(c),Bp.call(this,i,{column:1,row:1,expand:n});var p=$e(t,"space.item",0);switch(r){case"top":l=1,d=0,p={bottom:p};break;case"bottom":l=1,d=2,p={top:p};break;case"left":l=0,d=1,p={right:p};break;case"right":l=2,d=1,p={left:p}}Bp.call(this,c,{column:l,row:d,padding:p,expand:!!h||$e(t,"expand.tabs",!1),align:$e(t,"align.tabs","left")}),this.addChildrenMap("background",s),this.addChildrenMap("tabs",c),this.addChildrenMap("pages",i),this.tabsPosition=r,c.on("button.click",function(f){var v=f.name;i.hasPage(v)&&i.swapPage(v)}),c.on("button.statechange",function(f,v,g,y){var m=g?"tab.focus":"tab.blur";this.emit(m,f,f.name)},this),i.on("pagevisible",function(f,v,g){this.emit("page.focus",f,v)}),i.on("pageinvisible",function(f,v,g){this.emit("page.blur",f,v)})}get currentKey(){return this.getElement("pages").currentKey}set currentKey(e){this.showPage(e)}get keys(){return this.getElement("pages").keys}get currentPage(){return this.getElement("pages").currentPage}get previousPage(){return this.getElement("pages").previousPage}};Object.assign(ry.prototype,ny);class N_ extends Xo{constructor(t,n){n===void 0&&(n={}),n.destroy=!1,super(t,n)}onOpen(){this.emit("open",this.parent,this),super.onOpen()}onClose(){this.emit("close",this.parent,this),super.onClose()}}const G_={expand(e){if(this.expanded===!0)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!0;var t=this.childrenMap.title,n=this.childrenMap.child;return this.show(n),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),t.emit("folder.expand",e,this),n.emit("folder.expand",e,this),this.emit("expand.start",this),this.childTransition.once("open",function(){this.emit("expand.complete",this)},this).requestOpen(null,e),this},collapse(e){if(this.expanded===!1)return this;e===void 0&&(e=this.transitionDuration),this.expanded=!1;var t=this.childrenMap.title,n=this.childrenMap.child;return t.emit("folder.collapse",e,this),n.emit("folder.collapse",e,this),this.emit("collapse.start",this),this.childTransition.once("close",function(){this.setChildScale(n,1,1).hide(n),this.reLayoutEnable&&(this.reLayoutTarget?this.reLayoutTarget:this.getTopmostSizer()).layout(),this.emit("collapse.complete",this)},this).requestClose(null,e),this},toggle(e){return this.expanded?this.collapse(e):this.expand(e),this},setExpandedState(e){return this.reLayoutEnable=!1,e===void 0?this.expanded=void 0:e?this.expand(0):this.collapse(0),this.reLayoutEnable=!0,this}};var U_=function(e,t){_i.popUp.call(e,t,this.expandDirection)},W_=function(e,t){_i.scaleDown.call(e,t,this.expandDirection)};const V_={setTransitionDuration(e){return this.transitionDuration=e,this.childTransition.setTransitInTime(e).setTransitOutTime(e),this},setExpandCallback(e){return e===void 0&&(e=U_.bind(this)),this.childTransition.setTransitInCallback(e),this},setCollapseCallback(e){return e===void 0&&(e=W_.bind(this)),this.childTransition.setTransitOutCallback(e),this}},Gt=Phaser.Utils.Objects.GetValue;let ju=class extends pt{constructor(e,t){t===void 0&&(t={}),t.hasOwnProperty("orientation")||(t.orientation=1),super(e,t),this.type="rexFolder",this.reLayoutEnable=!0,this.expanded=void 0,this.expandDirection=this.orientation===1?"y":"x";var n=t.background,s=t.title,o=t.child;n&&this.addBackground(n);var i=Gt(t,"space"),r=this.orientation===1?"left":"top",h=Gt(t,"align.title",r),a=Gt(t,"expand.title",!0);this.add(s,{proportion:0,align:h,expand:a,padding:{left:Gt(i,"titleLeft",0),right:Gt(i,"titleRight",0),top:Gt(i,"titleTop",0),bottom:Gt(i,"titleBottom",0)}});var u=Gt(t,"toggleByTarget",void 0),l=Gt(t,"toggleClickConfig");if(u===void 0&&(u=s),u&&wu.onClick.call(u,function(){this.toggle()},this,l),this.childTransition=new N_(o),!Gt(t,"customChildOrigin",!1)){var d=this.rtl?1:0;o.setOrigin(d)}h=Gt(t,"align.child","left");var c=(a=Gt(t,"expand.child",!0))?1:0;this.add(o,{proportion:c,align:h,expand:a,padding:{left:Gt(i,"childLeft",0),right:Gt(i,"childRight",0),top:Gt(i,"childTop",0),bottom:Gt(i,"childBottom",0)}}),this.addChildrenMap("title",s),this.addChildrenMap("child",o),this.addChildrenMap("background",n);var p=t.transition;this.setTransitionDuration(Gt(p,"duration",200)),this.setExpandCallback(Gt(p,"expandCallback",void 0)),this.setCollapseCallback(Gt(p,"collapseCallback",void 0)),this.reLayoutTarget=Gt(t,"reLayoutTarget",void 0);var f=t.onExpandStart;f&&this.on("expand.start",f);var v=t.onExpandComplete;v&&this.on("expand.complete",v);var g=t.onCollapseStart;g&&this.on("collapse.start",g);var y=t.onCollapseComplete;y&&this.on("collapse.complete",y);var m=Gt(t,"expanded",void 0);m!==void 0&&this.setExpandedState(m)}};Object.assign(ju.prototype,G_,V_);var ay=function(e){return class extends e{get isTree(){return!1}get isNode(){return!1}setText(t){return this.text=t,this}get text(){return this.nodeBody.text}set text(t){var n=this.nodeBody;n.setText&&n.setText(t)}setTexture(t,n){var s=this.nodeBody;return s.setTexture&&s.setTexture(t,n),this}get texture(){var t=this.nodeBody;if(t)return t.texture}get frame(){var t=this.nodeBody;if(t)return t.frame}}};const j_={getTreePatent(e){if(e===void 0&&(e=this),e.rexSizer)return e.rexSizer.treeParent},getTreeRoot(e){var t;for(e===void 0&&(e=this);;){if(!e.rexSizer)return;if((t=e.rexSizer.treeParent)===null)return e;e=t}},getTreesSizer(e){var t=this.getTreeRoot(e);return t?t.getParentSizer():null},isGrandsonNode(e){if(e===void 0||!e.rexSizer)return!1;for(var t;;){if(!e.rexSizer)return!1;if((t=e.rexSizer.treeParent)===this)return!0;if(t===null)return!1;e=t}return!1}};var wr=function(e,t,n,s,o=!1){var i;return xi(t)?(i=t,delete t[key]):ti(t)?(i=t(e,n))&&e.add.existing(i):(o||t)&&s&&(i=s(e,t,n)),i},Kl=function(e,t,n){return ce(e,t)},H_=function(e,t,n){var s=new Nu(e,t);return e.add.existing(s),s.resetDisplayContent(""),s};const wn=Phaser.Utils.Objects.GetValue;class oy extends ay(pt){constructor(t,n,s){var o=n.space;super(t,{orientation:"x",space:{left:wn(o,"nodeLeft",0),right:wn(o,"nodeRight",0),top:wn(o,"nodeTop",0),bottom:wn(o,"nodeBottom",0)}}),this.type="rexTreeNode";var i=wr(t,wn(n,"nodeBackground"),s,Kl,!1),r=wr(t,wn(n,"nodeBody"),s,H_,!0);i&&this.addBackground(i),this.add(r,{proportion:1}),this.nodeBody=r,this.addChildrenMap("background",i),this.addChildrenMap("nodeBody",r)}get isNode(){return!0}getTreePatent(){return this.rexSizer.treeParent}getTreeRoot(){var t=this.rexSizer.treeParent;return t?t.getTreeRoot():null}getTreesSizer(){var t=this.getTreeRoot();return t?t.getParentSizer():null}}var hy=function(e,t){var n=e.parentContainer;if(n)t.isRexContainerLite?t.addToContainer(n):n.add(t);else{var s=e.displayList;Tr(s)?t.isRexContainerLite?t.addToLayer(s):s.add(t):e.scene.add.existing(t)}};const Ip=Phaser.Utils.String.UUID,K_={addTree(e,t){return xi(e)&&(e={nodeBody:e,nodeKey:t}),this.insertTree(void 0,e)},insertTree(e,t){var n;typeof t=="string"?(n=t,t=void 0):t&&(n=t.nodeKey,delete t.nodeKey),n===void 0&&(n=Ip());var s=this.createTree(t);return hy(this,s),this.insertNode(e,s,{expand:!0}),s._postAddCallback(),s},addNode(e,t){return this.insertNode(void 0,e,t)},insertNode(e,t,n){var s;return xi(t)||(n=t,t=new oy(this.scene,this.configSave,{isLeaf:!0})),typeof n=="string"?(s=n,n=void 0):n&&(s=n.nodeKey,delete n.nodeKey),s===void 0&&(s=Ip()),n===void 0&&(n={}),n.hasOwnProperty("expand")||(n.expand=!0),this.removeNode(t,!1),t.rexSizer.treeParent=this,this.nodesMap.hasOwnProperty(s)&&(console.error(`[Trees] Duplicate nodeKey '${s}'`),this.removeNode(this.nodesMap[s],!0)),t.nodeKey=s,this.nodesMap[s]=t,this.childrenMap.child.insert(e,t,n),t}},q_={removeNode(e,t){if(typeof e=="string"&&(e=this.getTree(e)),!e)return this;var n=this.getTreePatent(e);return n?(delete n.nodesMap[e.nodeKey],e.nodeKey=null,e.rexSizer.treeParent=null,n.childrenMap.child.remove(e,t),this):this},removeAllNodes(e){var t=this.nodesMap;for(var n in t)this.removeNode(t[n],e);return this}},$_={getNode(e){if(typeof e=="string"&&(e=e.split(".")),e.length!==0){var t=e.shift(),n=this.nodesMap[t];return e.length===0?n:n&&this.isTreeObject(n)?n.getNode(e):null}},getNodes(e){var t=this.nodesMap;if(e)for(var n in t)e.push(t[n]);else e=nodes;return e},getAllNodes(e){}};var ly={pointToChild:function(e,t,n,s){for(var o in this.nodesMap){var i=this.nodesMap[o];if(this.isTreeObject(i)){var r=i;if(Bs(r.nodeBody,e,t,n,s))return r;var h=r.pointToChild(e,t,n,s);if(h)return h}else if(Bs(i,e,t,n,s))return i}return null}};Object.assign(ly,j_,K_,q_,$_);var Z_=function(e,t,n){var s=new cu(e,t);return e.add.existing(s),s.on("expand.start",function(o){o.setDirection("down")}).on("collapse.complete",function(o){o.setDirection("right")}),s};const Xp=Phaser.Utils.Objects.GetValue,zp=Phaser.Utils.Objects.GetValue,J_=Phaser.Utils.Objects.Clone,ji=Phaser.Utils.Objects.GetValue;class Xs extends ay(ju){constructor(t,n){n===void 0&&(n={});var s=wr(t,ji(n,"background"),{isLeaf:!1},Kl,!1),o=function(p,f){var v=new pt(p,{orientation:zp(f,"childrenOrientation","y")});p.add.existing(v);var g=wr(p,zp(f,"childrenBackground"),{isLeaf:!1},Kl,!1);return g&&v.addBackground(g),v}(t,n),i=o.childrenMap.items,r=function(p,f){var v=new oy(p,f,{isLeaf:!1});p.add.existing(v);var g=wr(p,Xp(f,"toggleButton"),{isLeaf:!1},Z_,!0);return v.insert(0,g,{padding:{right:Xp(f,"space.toggleButton",0)},fitRatio:1}),v.addChildrenMap("toggleButton",g),v}(t,n),h=r.childrenMap.toggleButton,a=r.childrenMap.nodeBody,u=Ys(ji(n,"orientation","y")),l=n.space;if(l){var d=ji(l,"indent",0);l.childLeft=ji(l,"indentLeft",u===1?d:0),l.childRight=ji(l,"indentRight",0),l.childTop=ji(l,"indentTop",u===0?d:0),l.childBottom=ji(l,"indentBottom",0)}super(t,{background:s,title:r,child:o,toggleByTarget:h,transition:n.transition,orientation:u,space:l,align:n.align,expand:n.expand}),this.type="rexTree",this.rexSizer.treeParent=null,this.nodesMap={},this.configSave=n,this.nodeBody=a,this.addChildrenMap("toggleButton",h),this.addChildrenMap("nodeBody",a),this.addChildrenMap("childrenNodes",i),this.on("expand.start",function(){h.emit("expand.start",h),ao(this,"expand.start")},this).on("expand.complete",function(){h.emit("expand.complete",h),ao(this,"expand.complete")}).on("collapse.start",function(){h.emit("collapse.start",h),ao(this,"collapse.start")}).on("collapse.complete",function(){h.emit("collapse.complete",h),ao(this,"collapse.complete")});var c=this;c._postAddCallback=function(){var p=ji(n,"expanded",!0);p!==void 0&&c.setExpandedState(p),delete c._postAddCallback}}destroy(t){this.scene&&!this.ignoreDestroy&&(this.configSave=void 0,Clear(this.nodesMap),this.nodesMap=void 0,super.destroy(t))}get isTree(){return!0}createTree(t){return Xs.CreateTree(this.scene,this.configSave,t)}isTreeObject(t){return t&&t instanceof Xs}}Xs.CreateTree=function(e,t,n){return new Xs(e,function(s,o){var i=s?J_(s):{};if(!o)return i;for(var r in o)i[r]=o[r];return i}(t,n))};var ao=function(e,t){var n=e.getTreesSizer();n&&n.emit(t,e)};Object.assign(Xs.prototype,ly);const Q_=Phaser.Utils.String.UUID,tA={addTree(e){return xi(e)&&(e={nodeBody:e,nodeKey}),this.insertTree(void 0,e)},insertTree(e,t){var n;typeof t=="string"?(n=t,t=void 0):t&&(n=t.nodeKey,delete t.nodeKey),n===void 0&&(n=Q_());var s=Xs.CreateTree(this.scene,this.treeConfig,t);return hy(this,s),s.nodeKey=n,this.treesMap[n]=s,this.insert(e,s,{expand:!0}),s._postAddCallback(),s}},eA={removeTree(e,t){return typeof e=="string"&&(e=this.getTree(e)),e?(delete this.treesMap[e.nodeKey],e.nodeKey=null,this.remove(e,t),this):this},removeAllNodes(e){var t=this.treesMap;for(var n in t)this.removeTree(t[n],e);return this}},iA={getTree(e){return this.treesMap[e]},getTrees(e){for(var t in e===void 0&&(e=[]),this.treesMap)e.push(this.treesMap[t]);return e},getNode(e){var t=e.indexOf(".");if(t===-1)return this.getTree(e);var n=this.getTree(e.substring(0,t));return n?n.getNode(e.substring(t+1)):void 0}};var uy={pointToChild:function(e,t,n,s){for(var o in this.treesMap){var i=this.treesMap[o];if(Bs(i.nodeBody,e,t,n,s))return i;var r=i.pointToChild(e,t,n,s);if(r)return r}return null},setChildrenInteractive:function(e){return e===void 0&&(e={}),e.targetMode="parent",e.targetSizers=[this],Eu(this,e),this}};Object.assign(uy,tA,eA,iA);const sA=Phaser.Utils.Objects.GetValue;Object.assign((class extends pt{constructor(e,t){t===void 0&&(t={}),t.hasOwnProperty("orientation")||(t.orientation="y"),super(e,t),this.type="rexTrees",this.treesMap={},this.treeConfig=sA(t,"tree")}destroy(e){this.scene&&!this.ignoreDestroy&&(this.treeConfig=void 0,Clear(this.treesMap),this.treesMap=void 0,super.destroy(e))}}).prototype,uy);const nA={setText(e){return this.childrenMap.child.setText(e),this},appendText(e){return this.setText(this.text+e),this}},rA={scrollToLine(e){return this.setChildOY(-this.lineHeight*e),this},scrollToNextLine(e){e===void 0&&(e=1);var t=this.lineIndex+e;return this.scrollToLine(t),this}},oo=Phaser.Utils.Objects.GetValue;Object.assign((class extends $r{constructor(e,t){t===void 0&&(t={});var n,s=oo(t,"text");xi(s)?n=s:(s===void 0&&(s={}),s.textArea=!0,n=new du(e,s),e.add.existing(n)),function(l){Object.defineProperty(l,"childOY",{configurable:!0,get:function(){return l.textOY},set:function(d){l.textOY=d}}),Object.defineProperty(l,"topChildOY",{get:function(){return l.topTextOY}}),Object.defineProperty(l,"bottomChildOY",{get:function(){return l.bottomTextOY}}),Object.defineProperty(l,"childVisibleHeight",{get:function(){return l.textVisibleHeight}}),Object.defineProperty(l,"childHeight",{get:function(){return l.contentHeight}})}(n);var o=s.width===void 0,i=s.height===void 0;o&&(n.minWidth=0),i&&(n.minHeight=0),t.scrollMode=0,t.type="rexTextAreaInput",t.child={gameObject:n,expandWidth:o,expandHeight:i};var r,h,a=oo(t,"space",void 0);a&&(a.child=oo(a,"text",0)),t.scroller=!1,super(e,t),this.addChildrenMap("text",n),n.on("cursorin",function(){var l=n.textOY,d=n.contentHeight,c=r!==l,p=h!==d;r=l,h=d,p&&this.resizeController(),(c||p)&&(this.t=n.t)},this),n.on("textchange",function(l){this.emit("textchange",l,this)},this).on("close",function(){this.emit("close",this.text,this)},this);var u=oo(t,"content",void 0);u&&this.setText(u)}get text(){return this.childrenMap.child.text}set text(e){e=e==null?"":e.toString(),this.childrenMap.child.text!==e&&this.setText(e)}get lineHeight(){return this.childrenMap.child.lineHeight}get lineIndex(){return Math.floor(-this.childOY/this.lineHeight)}get linesCount(){return this.childrenMap.child.linesCount}get contentHeight(){return this.childrenMap.child.contentHeight}get readOnly(){return this.childrenMap.child.readOnly}set readOnly(e){this.childrenMap.child.readOnly=e}setReadOnly(e){return this.childrenMap.child.setReadOnly(e),this}get value(){return this.text}set value(e){this.text=e}}).prototype,nA,rA);const aA=function(e,t){e.popUp(t)},oA=function(e,t){e.scaleDown(t)},hA=function(e,t){e.fadeIn(t)},lA=function(e,t){e.fadeOut(t)},Zi={popUp:0,fadeIn:1,scaleDown:0,fadeOut:1},uA={setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){switch(typeof e=="string"&&(e=Zi[e]),e){case Zi.popUp:e=aA;break;case Zi.fadeIn:e=hA}return e||(e=Ht),this.transitInCallback=e,this},setTransitOutCallback(e){switch(typeof e=="string"&&(e=Zi[e]),e){case Zi.scaleDown:e=oA;break;case Zi.fadeOut:e=lA}return e||(e=Ht),this.transitOutCallback=e,this}},dA={showMessage(e){if(this.scaleX0===void 0&&(this.scaleX0=this.scaleX),this.scaleY0===void 0&&(this.scaleY0=this.scaleY),e===void 0){if(this.messages.length===0)return this;e=this.messages.shift()}if(this.player.isPlaying)return this.messages.push(e),this;this.setScale(this.scaleX0,this.scaleY0).setVisible(!0),typeof e=="string"?this.setText(e):e(this),this.layout();var t=[[0,[this.transitInCallback,this,this.transitInTime]],[0,[this.emit,"transitin",this,this.transitInTime]],[this.transitInTime,[Ht]],[this.displayTime,[this.transitOutCallback,this,this.transitOutTime]],[0,[this.emit,"transitout",this,this.transitOutTime]],[this.transitOutTime,[this.setVisible,!1]],[30,[Ht]]];return this.player.load(t,this).once("complete",function(){this.showMessage()},this).start(),this},removeAllMessages(){return this.messages.length=0,this}},vr=Phaser.Utils.Objects.GetValue;Object.assign((class extends Ws{constructor(e,t){t===void 0&&(t={text:createDefaultTextObject(e)}),super(e,t),this.type="rexToast",this.setTransitInTime(vr(t,"duration.in",200)),this.setDisplayTime(vr(t,"duration.hold",1200)),this.setTransitOutTime(vr(t,"duration.out",200)),this.setTransitInCallback(vr(t,"transitIn",Zi.popUp)),this.setTransitOutCallback(vr(t,"transitOut",Zi.scaleDown)),this.player=new Bv(this,{dtMode:1}),this.messages=[],this.scaleX0=void 0,this.scaleY0=void 0,this.setVisible(!1)}destroy(e){this.scene&&!this.ignoreDestroy&&(this.player.destroy(),this.player=void 0,this.messages=void 0,super.destroy(e))}setScale(e,t){return t===void 0&&(t=e),this.scaleX0=e,this.scaleY0=t,super.setScale(e,t),this}get isShowingMessage(){return this.player.isPlaying}}).prototype,uA,dA);var cA={"bottom-to-top":1,"top-to-bottom":0,"right-to-left":1,"left-to-right":0};const fA={setQueueDirection(e){return typeof e=="string"&&(e=cA[e]),this.rtl=e===0,this.orientation===1?this.queueDirection=e?0:1:this.queueDirection=e?2:3,this},setCreateMessageLabelCallback(e){return this.createMessageLabelCallback=e,this},setDisplayTime(e){return this.displayTime=e,this},setTransitOutTime(e){return this.transitOutTime=e,this},setTransitInTime(e){return this.transitInTime=e,this},setTransitInCallback(e){return e||(e=Ht),this.transitInCallback=e,this},setTransitOutCallback(e){return e||(e=Ht),this.transitOutCallback=e,this}},pA=wu.onClick,Yp=zm.delayCall,gA=Eo.moveTo;var Np=function(e){for(var t,n=e.childrenMap.items,s=[],o=0,i=n.length;o<i;o++)t=n[o],s.push({x:t.x,y:t.y});return s};const mA={showMessage(e){var t=function(n,s,o){var i=s(n.scene,o,n);if(pA.call(i,function(){n.removeMessage(i)}),n.displayTime){var r=n.transitInTime+n.displayTime+10;Yp.call(i,r,function(){n.removeMessage(i)})}return i}(this,this.createMessageLabelCallback,e);return function(n,s,o){var i=Np(n);n.add(s);var r=function(h){for(var a,u=h.childrenMap.items,l=[],d=0,c=u.length;d<c;d++)a=u[d],l.push({x:a.scaleX,y:a.scaleY}),a.setScale(1);h.layout();var p=Np(h);for(d=0,c=u.length;d<c;d++){var f=l[d];u[d].setScale(f.x,f.y)}return p}(n);(function(h,a,u,l){for(var d,c,p,f=h.childrenMap.items,v=Math.min(a.length,u.length,f.length),g=h.queueDirection,y=0;y<v;y++){switch(d=f[y],c=a[y],p=u[y],d.setPosition(c.x,c.y),g){case 0:if(c.y<=p.y)continue;break;case 1:if(c.y>=p.y)continue;break;case 2:if(c.x<=p.x)continue;break;case 3:if(c.x>=p.x)continue}gA.call(d,l,p.x,p.y)}})(n,i,r,o),n.transitInCallback(s,o,n)}(this,t,this.transitInTime),this},removeMessage(e){if(this.getParentSizer(e)!==this)return this;if(!e.__isDestroying){e.__isDestroying=!0;var t=this.transitOutTime;return this.transitOutCallback(e,t,this),Yp.call(e,t+10,function(){delete e.__isDestroying,e.destroy()}),this}},removeAllMessages(){for(var e=this.childrenMap.items,t=0,n=e.length;t<n;t++)this.removeMessage(e[t]);return this}};var dy={};Object.assign(dy,fA,mA);const Gp={transitIn(e,t,n){switch(n.queueDirection){case 0:e.setOrigin(.5,1),_i.popUp.call(e,t,"y");break;case 1:e.setOrigin(.5,0),_i.popUp.call(e,t,"y");break;case 2:e.setOrigin(1,.5),_i.popUp.call(e,t,"x");break;case 3:e.setOrigin(0,.5),_i.popUp.call(e,t,"x")}Dr.fadeIn.call(e,t)},transitOut(e,t,n){Dr.fadeOut.call(e,t)}},Es=Phaser.Utils.Objects.GetValue;class cy extends pt{constructor(t,n){n===void 0&&(n={}),n.hasOwnProperty("orientation")||(n.orientation=1),super(t,n),this.type="rexToastQueue",this.setCreateMessageLabelCallback(Es(n,"createMessageLabelCallback")),this.setQueueDirection(Es(n,"queueDirection",1)),this.setTransitInTime(Es(n,"duration.in",200)),this.setDisplayTime(Es(n,"duration.hold",2e3)),this.setTransitOutTime(Es(n,"duration.out",200)),this.setTransitInCallback(Es(n,"transitIn",Gp.transitIn)),this.setTransitOutCallback(Es(n,"transitOut",Gp.transitOut))}}Object.assign(cy.prototype,dy);const di=Phaser.Utils.Objects.GetValue,vA=Phaser.Display.Color,yA=Phaser.Display.Color.ColorToRGBA,xA=Phaser.Display.Color.HSVToRGB,Ps=Phaser.Math.Clamp;class bA extends pt{constructor(t,n){n===void 0&&(n={}),n.orientation=0,super(t,n),this.type="rexColorComponents",this.colorObject=new vA;var s=di(n,"background",void 0),o=di(n,"formatLabel",void 0);xi(o)||(o=be(t,o).resetDisplayContent());var i=[];if(n.inputText0&&n.inputText1&&n.inputText2)i.push(n.inputText0),i.push(n.inputText1),i.push(n.inputText2);else for(var r=di(n,"inputText"),h=0;h<3;h++){var a=Mo(t,r).setMaxLength(3).setNumberInput();i.push(a)}s&&this.addBackground(s);var u=di(n,"proportion.formatLabel",0),l=!!o.isRexContainerLite,d=di(n,"expand.formatLabel",l);this.add(o,{proportion:u,expand:d}),u=di(r,"width")===void 0?1:0,d=di(r,"height")===void 0,h=0;for(var c=i.length;h<c;h++)this.add(i[h],{proportion:u,expand:d});for(this.addChildrenMap("background",s),this.addChildrenMap("formatLabel",o),this.addChildrenMap("components",i),this.onClick(o,this.toggleColorFormat,this),h=0,c=i.length;h<c;h++)i[h].on("close",function(){this.updateColorObject(),this.setValue(this.colorObject.color)},this);var p=di(n,"valuechangeCallback",null);if(p!==null){var f=di(n,"valuechangeCallbackScope",void 0);this.on("valuechange",p,f)}o.setText("RGB"),this.setValue(di(n,"value",16777215))}get value(){return this._value}set value(t){t=Ps(Math.floor(t),0,16777215),this._value!==t&&(this._value=t,this.colorObject.setFromRGB(yA(t)),this.updateComponents(),this.emit("valuechange",this._value))}setValue(t){return this.value=t,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}get colorFormat(){return this.childrenMap.formatLabel.text}set colorFormat(t){this.colorFormat!==t&&(this.childrenMap.formatLabel.setText(t),this.updateComponents())}setColorFormat(t){return this.colorFormat=t,this}toggleColorFormat(){return this.colorFormat=this.colorFormat==="RGB"?"HSV":"RGB",this}updateComponents(){var t,n,s,o=this.childrenMap.components;return this.colorFormat==="RGB"?(t=this.colorObject.red,n=this.colorObject.green,s=this.colorObject.blue):(t=Math.floor(360*this.colorObject.h),n=Math.floor(100*this.colorObject.s),s=Math.floor(100*this.colorObject.v)),o[0].setValue(t),o[1].setValue(n),o[2].setValue(s),this}updateColorObject(){var t=this.childrenMap.components;if(this.colorFormat==="RGB"){var n=Ps(t[0].value,0,255),s=Ps(t[1].value,0,255),o=Ps(t[2].value,0,255);this.colorObject.setTo(n,s,o)}else{var i=Ps(t[0].value,0,359)/360,r=Ps(t[1].value,0,100)/100,h=Ps(t[2].value,0,100)/100;this.colorObject.setFromRGB(xA(i,r,h))}return this}}const TA=Phaser.Utils.String.Pad;var Up=function(e,t){t===void 0&&(t="0x");var n=e.toString(16).toUpperCase();return t+TA(n,6,0,1)};const Xe=Phaser.Utils.Objects.GetValue,wA=Phaser.Utils.Objects.IsPlainObject,SA=Phaser.Math.Clamp;let CA=class extends pt{constructor(e,t){t===void 0&&(t={}),t.orientation=0,super(e,t),this.type="rexColorInputLite";var n,s=Xe(t,"background",void 0),o=Xe(t,"swatch");wA(o)&&(n=Xe(o,"size"));var i,r=function(f,v){if(v===!1)return null;if(xi(v))return v;var g=new zn(f,v);return f.add.existing(g),g}(e,Xe(t,"swatch")),h=Xe(t,"inputText",{});if(h&&(i=Mo(e,h)),s&&this.addBackground(s),r){var a;(n=Xe(t,"swatchSize",n))!==void 0?(ae(r,n,n),a=!1):a=Xe(t,"squareExpandSwatch",!0);var u=a?1:0;this.add(r,{proportion:0,expand:!0,fitRatio:u})}if(i){var l=Xe(h,"width")===void 0?1:0,d=Xe(h,"height")===void 0;this.add(i,{proportion:l,expand:d})}this.addChildrenMap("background",s),this.addChildrenMap("swatch",r),this.addChildrenMap("inputText",i),i&&i.on("close",function(){this.setValue(i.value)},this);var c=Xe(t,"valuechangeCallback",null);if(c!==null){var p=Xe(t,"valuechangeCallbackScope",void 0);this.on("valuechange",c,p)}this.setValue(Xe(t,"value",0))}get value(){return this._value}set value(e){if(typeof e=="string"){if((e=Bl(e))==null)return void((t=this.childrenMap.inputText)&&t.setText(Up(this._value)))}else e=SA(Math.floor(e),0,16777215);if(this._value!==e){this._value=e;var t,n=this.childrenMap.swatch;n&&function(s,o){s&&(s.setTint?s.setTint(o):s.setFillStyle&&s.setFillStyle(o))}(n,e),(t=this.childrenMap.inputText)&&t.setText(Up(e)),this.emit("valuechange",this._value)}}setValue(e){return this.value=e,this}get color(){return this._value}set color(e){this.value=e}setColor(e){return this.color=e,this}};var EA={setCreateColorPickerBackgroundCallback(e){return this.colorPickerCreateBackgroundCallback=e,this},setColorPickerHPalettePosition(e){return this.colorPickerHPalettePosition=e,this},setColorPickerExpandDirection(e){return typeof e=="string"&&(e=PA[e]),this.colorPickerExpandDirection=e,this},setColorPickerEaseInDuration(e){return e===void 0&&(e=0),this.colorPickerEaseInDuration=e,this},setColorPickerEaseOutDuration(e){return e===void 0&&(e=0),this.colorPickerEaseOutDuration=e,this},setColorPickerTransitInCallback(e){return this.colorPickerTransitInCallback=e,this},setColorPickerTransitOutCallback(e){return this.colorPickerTransitOutCallback=e,this},setColorPickerBounds(e){return this.colorPickerBounds=e,this},setColorPickerWidth(e){return this.colorPickerWidth=e,this},setColorPickerHeight(e){return this.colorPickerHeight=e,this},setColorPickerSize(e,t){return this.setColorPickerWidth(e).setColorPickerHeight(t),this},setColorPickerSpace(e){return e===void 0&&(e={}),this.colorPickerSpace=e,this},setColorComponentsHeight(e){return this.colorComponentsHeight=e,this},setColorComponentsFormatLabelConfig(e){return this.colorComponentsFormatLabelConfig=e,this},setColorComponentsInputTextConfig(e){return this.colorComponentsInputTextConfig=e,this},setColorComponentsSpace(e){return e===void 0&&(e={}),this.colorComponentsSpace=e,this}};const PA={down:0,up:1},fy=Phaser.Display.Color,_o=Phaser.Math.Percent,OA=Phaser.Display.Color,Wp=Phaser.Math.Percent,kA=Phaser.Display.Color.ColorToRGBA,MA=Phaser.Display.Color.HSVToRGB;class _A extends Gr{constructor(t,n,s,o,i,r){n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=2),i===void 0&&(i=2),super(t,n,s,o,i),this.type="rexColorPicker.HPaletteCanvas",this.colorObject=new OA,this.setOrientation(r),this.setSize(o,i)}setOrientation(t){return this.orientation=Ys(t),this}updateTexture(){return function(t,n,s){s===void 0&&(s=!1);var o=t.width,i=t.height,r=new fy;if(s)for(var h=0;h<i;h++){var a=_o(h,0,i);r.setFromHSV(a,1,1),n.fillStyle=r.rgba,n.fillRect(0,h,o,1)}else for(var u=0;u<o;u++)a=_o(u,0,o),r.setFromHSV(a,1,1),n.fillStyle=r.rgba,n.fillRect(u,0,1,i)}(this.canvas,this.context,this.orientation),super.updateTexture(),this}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue=t}getHue(t,n){return t===void 0||(this.orientation===0?this.hue=Wp(t,0,this.width):this.hue=Wp(n,0,this.height)),this.hue}getColor(t,n){if(t===void 0)return this.color;var s=this.getHue(t,n);return this.colorObject.setFromRGB(MA(s,1,1)),this.colorObject.color}setColor(t){return this.color,this}colorToLocalPosition(t,n){return n===void 0?n={}:n===!0&&(_l===void 0&&(_l={}),n=_l),this.colorObject.setFromRGB(kA(t)),this.orientation===0?(n.x=this.width*this.colorObject.h,n.y=this.height/2):(n.x=this.width/2,n.y=this.height*this.colorObject.h),n}}var Ml,_l=void 0,AA=Phaser.Math.RotateAround,py=function(e,t,n,s){s===void 0?s={}:s===!0&&(Ml===void 0&&(Ml={}),s=Ml),t-=e.width*e.originX,n-=e.height*e.originY;var o={x:t*e.scaleX,y:n*e.scaleY};return AA(o,0,0,-e.rotation),s.x=e.x+t,s.y=e.y+n,s};class RA extends Fi{constructor(t,n){n===void 0&&(n={}),super(t,n);var s=n.width!=null?1:0,o=new _A(t).setOrientation(s);t.add.existing(o),this.type="rexColorPicker.HPalette",o.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var i=new zn(t,{strokeColor:16777215,strokeWidth:2});t.add.existing(i),this.add(o,{key:"paletteCanvas",expand:!0}).add(i,{key:"marker",expand:!1})}resize(t,n){if(this.width===t&&this.height===n)return this;super.resize(t,n);var s=Math.min(t,n);return this.childrenMap.marker.setSize(s,s),this}onPaletteCanvasPointerDown(t,n,s,o){if(t.isDown){var i=this.childrenMap.paletteCanvas.getColor(n,s);this.setMarkerPosition(i),this.emit("input",i)}}get color(){return this.childrenMap.paletteCanvas.color}setColor(t){return this.color===t||(this.childrenMap.paletteCanvas.setColor(t),this.setMarkerPosition(t)),this}setMarkerPosition(t){var n=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,o=n.colorToLocalPosition(t,!0);return py(n,o.x,o.y,s),this.resetChildPositionState(s),this}getHue(t,n){return this.childrenMap.paletteCanvas.getHue(t,n)}}const LA=Phaser.Display.Color,Vp=Phaser.Math.Percent,jp=Phaser.Display.Color.ColorToRGBA,DA=Phaser.Display.Color.HSVToRGB;class FA extends Gr{constructor(t,n,s,o,i,r){n===void 0&&(n=0),s===void 0&&(s=0),o===void 0&&(o=2),i===void 0&&(i=2),super(t,n,s,o,i),this.type="rexColorPicker.SVPaletteCanvas",r===void 0&&(r=1),this.colorObject=new LA,this.setHue(r),this.setSize(o,i)}get color(){return this.colorObject.color}get hue(){return this._hue}set hue(t){this._hue!==t&&(this._hue=t,this.colorObject.h=t,this.dirty=!0)}setHue(t){return this.hue=t,this}updateTexture(){return function(t,n,s){for(var o=t.width,i=t.height,r=n.getImageData(0,0,o,i),h=r.data,a=new fy,u=0;u<i;u++)for(var l=0;l<o;l++){var d=_o(l,0,o),c=1-_o(u,0,i);a.setFromHSV(s,d,c);var p=4*(u*o+l);h[p]=a.red,h[p+1]=a.green,h[p+2]=a.blue,h[p+3]=255}n.putImageData(r,0,0)}(this.canvas,this.context,this.hue),super.updateTexture(),this}getColor(t,n){if(t===void 0)return this.colorObject.color;var s=Vp(t,0,this.width),o=1-Vp(n,0,this.height);return this.colorObject.setFromRGB(DA(this.hue,s,o)),this.colorObject.color}setColor(t){return this.color===t||(this.colorObject.setFromRGB(jp(t)),this.setHue(this.colorObject.h)),this}colorToLocalPosition(t,n){return n===void 0?n={}:n===!0&&(Al===void 0&&(Al={}),n=Al),this.colorObject.setFromRGB(jp(t)),n.x=this.width*this.colorObject.s,n.y=this.height*(1-this.colorObject.v),n}}var Al=void 0;class BA extends Fi{constructor(t,n){super(t,n);var s=new FA(t);t.add.existing(s),this.type="rexColorPicker.SVPalette",s.setInteractive().on("pointerdown",this.onPaletteCanvasPointerDown,this).on("pointermove",this.onPaletteCanvasPointerDown,this);var o=new zn(t,{radius:5,strokeColor:16777215,strokeWidth:2});t.add.existing(o),this.add(s,{key:"paletteCanvas",expand:!0}).add(o,{key:"marker",expand:!1})}onPaletteCanvasPointerDown(t,n,s,o){if(t.isDown){var i=this.childrenMap.paletteCanvas.getColor(n,s);this.setMarkerPosition(i),this.emit("input",i)}}get color(){return this.childrenMap.paletteCanvas.color}setHue(t){return this.childrenMap.paletteCanvas.setHue(t),this}setColor(t){return this.color===t||(this.childrenMap.paletteCanvas.setColor(t),this.setMarkerPosition(t)),this}setMarkerPosition(t){var n=this.childrenMap.paletteCanvas,s=this.childrenMap.marker,o=n.colorToLocalPosition(t,!0);return py(n,o.x,o.y,s),this.resetChildPositionState(s),this}}const Ze=Phaser.Utils.Objects.GetValue;class IA extends pt{constructor(t,n){super(t,n),this.type="rexColorPicker",this.freezePalettes=!1;var s=Ze(n,"hPalette.position",0);typeof s=="string"&&(s=XA[s]);var o=s===0||s===2?1:0;this.setOrientation(o);var i,r,h=Ze(n,"background",void 0);this.orientation===0?(r=Ze(n,"hPalette.width",void 0))===void 0&&(r=Ze(n,"hPalette.size",10)):(i=Ze(n,"hPalette.height",void 0))===void 0&&(i=Ze(n,"hPalette.size",10));var a=new RA(t,{width:r,height:i});t.add.existing(a);var u=Ze(n,"svPalette.width",void 0),l=Ze(n,"svPalette.height",void 0),d=new BA(t,{width:u,height:l});t.add.existing(d),h&&this.addBackground(h);var c,p,f={proportion:0,expand:!0};this.orientation===0?(c=u===void 0?1:0,p=l===void 0):(c=l===void 0?1:0,p=u===void 0);var v={proportion:c,expand:p};s===0||s===3?this.add(d,v).add(a,f):this.add(a,f).add(d,v),a.on("input",function(){d.setHue(a.getHue()),this.setValue(d.color,!0)},this),d.on("input",function(){this.setValue(d.color,!0)},this),this.addChildrenMap("background",h),this.addChildrenMap("hPalette",a),this.addChildrenMap("svPalette",d);var g=Ze(n,"valuechangeCallback",null);if(g!==null){var y=Ze(n,"valuechangeCallbackScope",void 0);this.on("valuechange",g,y)}this.setValue(Ze(n,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){var n=this._value;this._value=t,this.freezePalettes||this.updatePalettes(),this.emit("valuechange",t,n,this)}}setValue(t,n){return this.freezePalettes=!!n,this.value=t,this.freezePalettes=!1,this}get color(){return this._value}set color(t){this.value=t}setColor(t){return this.color=t,this}updatePalettes(){return this.childrenMap.hPalette.setColor(this.color),this.childrenMap.svPalette.setColor(this.color),this}postLayout(t,n,s){return this.childrenMap.hPalette.setMarkerPosition(this.value),this.childrenMap.svPalette.setMarkerPosition(this.value),super.postLayout(t,n,s),this}}var XA={bottom:0,left:1,top:2,right:3};const Rl=Phaser.Utils.Objects.GetValue;class zA extends pt{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexColorInput.ColorPickerPanel";var s,o=Rl(n,"background",void 0),i=new IA(t,{hPalette:n.hPalette||{},svPalette:n.svPalette||{},space:{item:Rl(n,"space.hPalette",8)}});t.add.existing(i),n.colorComponents&&(s=new bA(t,n.colorComponents),t.add.existing(s)),o&&(this.addBackground(o),new Wm(o,{stopAllLevels:!1})),this.add(i,{proportion:1,expand:!0}),s&&this.add(s,{proportion:0,expand:!0}),this.addChildrenMap("background",o),this.addChildrenMap("colorPicker",i),this.addChildrenMap("colorComponents",s),i.on("valuechange",function(r){this.setValue(r)},this),s&&s.on("valuechange",function(r){this.setValue(r)},this),this.setValue(Rl(n,"value",16777215))}get value(){return this._value}set value(t){if(this._value!==t){this._value=t,this.childrenMap.colorPicker.setValue(t);var n=this.childrenMap.colorComponents;n&&n.setValue(t),this.emit("valuechange",t)}}setValue(t){return this.value=t,this}}Phaser.Utils.Objects.GetValue;var YA=function(e){e=this.scene;var t,n=this.colorPickerCreateBackgroundCallback;n&&(t=n.call(this,e),e.add.existing(t));var s=this.colorPickerWidth;s===void 0&&(s=this.width);var o,i=this.colorPickerHeight;i===void 0&&(i=s),o=this.colorComponentsHeight>0&&{height:this.colorComponentsHeight,formatLabel:this.colorComponentsFormatLabelConfig,inputText:this.colorComponentsInputTextConfig,space:this.colorComponentsSpace};var r=new zA(e,{width:s,height:i,background:t,space:this.colorPickerSpace,hPalette:{position:this.colorPickerHPalettePosition},colorComponents:o,value:this.value});return e.add.existing(r),r},gy={openColorPicker:function(){if(!this.colorPicker){var e=YA.call(this).layout(),t=new qv(e,{duration:{in:this.colorPickerEaseInDuration,out:this.colorPickerEaseOutDuration},transitIn:this.colorPickerTransitInCallback,transitOut:this.colorPickerTransitOutCallback,expandDirection:this.colorPickerExpandDirection,alignTargetX:this,alignTargetY:this,bounds:this.colorPickerBounds,touchOutsideClose:!0}).on("open",function(){e.on("valuechange",function(n){this.setValue(n)},this)},this).on("close",function(){this.colorPicker=void 0,this.dropDownBehavior=void 0},this);return this.colorPicker=e,this.dropDownBehavior=t,this.pin(e),this}}};Object.assign(gy,EA);const ee=Phaser.Utils.Objects.GetValue;Object.assign((class extends CA{constructor(e,t){t===void 0&&(t={}),super(e,t),this.type="rexColorInput",t.hasOwnProperty("colorPicker")||(t.colorPicker={background:{color:0}});var n=t.colorPicker,s=n!==!1&&n!==null;if(s){var o;this.setColorPickerSize(ee(n,"width",160),ee(n,"height",170));var i=ee(n,"background");o=i?function(d){return ce(d,i)}:ee(n,"createBackgroundCallback"),this.setCreateColorPickerBackgroundCallback(o),this.setColorPickerHPalettePosition(ee(n,"hPalettePosition",0)),this.setColorPickerExpandDirection(ee(n,"expandDirection")),this.setColorPickerEaseInDuration(ee(n,"easeIn",200)),this.setColorPickerEaseOutDuration(ee(n,"easeOut",200)),this.setColorPickerTransitInCallback(ee(n,"transitIn")),this.setColorPickerTransitOutCallback(ee(n,"transitOut")),this.setColorPickerBounds(ee(n,"bounds"));var r=ee(n,"space");r===void 0&&(r={left:10,right:10,top:10,bottom:10,item:8}),this.setColorPickerSpace(r)}var h=t.colorComponents;if(s&&h!==!1&&h!==null){this.setColorComponentsHeight(ee(h,"height",30)),this.setColorComponentsFormatLabelConfig(ee(h,"formatLabel"));var a=ee(h,"inputText");a||(a=ee(t,"inputText")),this.setColorComponentsInputTextConfig(a);var u=ee(h,"space");u===void 0&&(u={item:8}),this.setColorComponentsSpace(u)}var l=this.childrenMap.swatch;l&&s&&this.onClick(l,this.openColorPicker,this)}}).prototype,gy),Phaser.Utils.Objects.GetValue,Phaser.Math.Distance.Between,Phaser.Math.RotateAroundDistance,Phaser.Utils.Objects.GetValue,Phaser.Math.Clamp;const NA=Phaser.Utils.Array.GetFirst,GA=Phaser.Utils.Array.Remove;class Sr extends Ws{constructor(t,n){super(t,n=Dv(t,n)),this.type="rexTweaker.Title"}setTitle(t){return(t=t?Ne(t):{}).hasOwnProperty("text")||(t.hasOwnProperty("title")?t.text=t.title:t.text=""),this.resetDisplayContent(t),this}}class UA extends Sr{constructor(t,n){n===void 0&&(n={}),super(t,n),this.type="rexTweaker.FolderTitle";var s=new cu(t,n.expandedIcon);t.add.existing(s),this.addSpace().add(s,{proportion:0,expand:!1,padding:1,fitRatio:1}),this.addChildrenMap("expandedIcon",s)}setExpandedState(t){t===void 0&&(t=!0);var n=t?"down":"right";return this.childrenMap.expandedIcon.setDirection(n),this}}var my=function(e,t){var n=vi(e);for(var s in t)n.hasOwnProperty(s)||(n[s]=t[s]);return n},yr=function(e,t,n){return ce(e,my(t,n))};const WA={setBindingTarget(e){return this.childrenMap.child.setBindingTarget(e),this}},VA={getMaxInputRowTitleWidth(){return this.childrenMap.child.getMaxInputRowTitleWidth()+this.getInnerPadding("left")},setInputRowTitleWidth(e){return e-=this.getInnerPadding("left"),this.childrenMap.child.setInputRowTitleWidth(e),this}};class vy extends ju{constructor(t,n){n===void 0&&(n={}),n.orientation=1,super(t,n),this.type="rexTweaker.Folder"}setTitle(t){return this.childrenMap.title.setTitle(t),this}}Object.assign(vy.prototype,WA,VA);const Sn=Phaser.Utils.Objects.GetValue,Hp=Phaser.Utils.Objects.GetValue,jA={setBindingTarget(e){for(var t=this.childrenMap.pages.children,n=0,s=t.length;n<s;n++)t[n].setBindingTarget(e);return this}},HA={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.pages.children,n=0,s=t.length;n<s;n++)e=Math.max(e,t[n].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.pages.children,n=0,s=t.length;n<s;n++)t[n].setInputRowTitleWidth(e);return this}};class yy extends ry{constructor(t,n){super(t,n),this.type="rexTweaker.TabPages"}}Object.assign(yy.prototype,jA,HA);const ho=Phaser.Utils.Objects.GetValue,Kp=Phaser.Utils.Objects.GetValue,KA={setBindingTarget(e){for(var t=this.childrenMap.columns,n=0,s=t.length;n<s;n++)t[n].setBindingTarget(e);return this}},qA={getMaxInputRowTitleWidth(){for(var e=0,t=this.childrenMap.columns,n=0,s=t.length;n<s;n++)e=Math.max(e,t[n].getMaxInputRowTitleWidth());return e+this.getInnerPadding("left")},setInputRowTitleWidth(e){e-=this.getInnerPadding("left");for(var t=this.childrenMap.columns,n=0,s=t.length;n<s;n++)t[n].setInputRowTitleWidth(e);return this}},Cn=Phaser.Utils.Objects.GetValue;class xy extends pt{constructor(t,n){n===void 0&&(n={}),n.orientation="y",super(t,n),this.type="rexTweaker.Columns";var s=Cn(n,"background",void 0),o=Cn(n,"title",void 0);s&&this.addBackground(s),o&&this.add(o,{expand:!0,space:{bottom:Cn(n,"space.title",0)}});var i=new pt(t,{orientation:"x",space:{item:Cn(n,"space.column",0)}});t.add.existing(i);for(var r,h,a=Cn(n,"columns",void 0),u=0,l=a.length;u<l;u++)h=(r=a[u]).child,i.add(r.child,{proportion:h.minWidth===0?1:0,expand:Cn(r,"expand",!0)});this.add(i,{expand:!0}),this.addChildrenMap("title",o),this.addChildrenMap("columnsSizer",i),this.addChildrenMap("columns",i.childrenMap.items)}setTitle(t){var n=this.childrenMap.title;return t.title||t.icon?n.show().setTitle(t):n.hide(),this}getColumns(){return this.childrenMap.columns}getColumn(t){return this.childrenMap.columns[t]}}Object.assign(xy.prototype,KA,qA);const Os=Phaser.Utils.Objects.GetValue,qp=Phaser.Utils.Objects.GetValue,$A={setBindingTarget(e){for(var t=this.childrenMap.child,n=0,s=t.length;n<s;n++)t[n].setBindingTarget(e);return this}},ZA={getMaxInputRowTitleWidth:()=>0,setInputRowTitleWidth(e){return this}},lo=Phaser.Utils.Objects.GetValue;class by extends pt{constructor(t,n){n===void 0&&(n={}),n.orientation="y",super(t,n),this.type="rexTweaker.Wrap";var s=lo(n,"background",void 0),o=lo(n,"title",void 0);s&&this.addBackground(s),o&&this.add(o,{expand:!0,space:{bottom:lo(n,"space.title",0)}});var i=lo(n,"child",void 0);this.add(i,{expand:!0}),this.addChildrenMap("title",o),this.addChildrenMap("child",i)}setTitle(t){var n=this.childrenMap.title;return t.title||t.icon?n.show().setTitle(t):n.hide(),this}}Object.assign(by.prototype,$A,ZA);const ci=Phaser.Utils.Objects.GetValue,JA=Phaser.Utils.Objects.GetValue,QA={setBindingTarget(e){return this.childrenMap.panel.setBindingTarget(e),this}},t3={getMaxInputRowTitleWidth(){return this.childrenMap.panel.getMaxInputRowTitleWidth()+this.getInnerPadding("left")},setInputRowTitleWidth(e){return e-=this.getInnerPadding("left"),this.childrenMap.panel.setInputRowTitleWidth(e),this}};class Ty extends Vu{constructor(t,n){super(t,n),this.type="rexTweaker.Scrollable"}setTitle(t){var n=this.childrenMap.header;return t.title||t.icon?n.show().setTitle(t):n.hide(),this}}Object.assign(Ty.prototype,QA,t3);const Hi=Phaser.Utils.Objects.GetValue,e3=Phaser.Utils.Objects.GetValue,$p=Phaser.Utils.Objects.GetValue,i3={setupBinding(){return this.childrenMap.inputField.on("valuechange",function(e){this.autoUpdateEnable&&this.setTargetValue(e)},this),this},setAutoUpdateEnable(e){return e===void 0&&(e=!0),this.autoUpdateEnable=e,this},setBindingTarget(e,t){this.bindingTarget=e,t!==void 0&&this.setBindingTargetKey(t),this.syncTargetValue();var n=this.childrenMap.inputField;return n.onBindTarget&&n.onBindTarget(e,t),this},setBindingTargetKey(e){return this.bindTargetKey=e,this},setValueCallbacks(e){return this.onGetValue=$p(e,"onGetValue"),this.onSetValue=$p(e,"onSetValue"),this},getTargetValue(){if(this.bindingTarget)return this.bindTargetKey!=null?this.bindingTarget[this.bindTargetKey]:this.onGetValue?this.onGetValue(this.bindingTarget):void 0},setTargetValue(e){return this.bindingTarget?this.bindTargetKey!=null?(this.bindingTarget[this.bindTargetKey]=e,this):(this.onSetValue&&this.onSetValue(this.bindingTarget,e),this):this},syncTargetValue(){if(!this.bindingTarget)return this;var e=this.childrenMap.inputField;return e.syncValue&&e.syncValue(this.getTargetValue()),this}},s3={startMonitorTarget(){return this.isMonitoring||(this.isMonitoring=!0,this.scene.events.on("postupdate",this.onMonitorTarget,this)),this},stopMonitorTarget(){return this.isMonitoring?(this.isMonitoring=!1,this.scene.events.off("postupdate",this.onMonitorTarget,this),this):this},onMonitorTarget(){if(this.bindingTarget){var e=this.getTargetValue(),t=this.childrenMap.inputField;t.value!==e&&t.syncValue(e)}}},n3={getMinTitleWidth(){var e=this.childrenMap.title;if(!e||e.orientation!==0)return 0;var t=e.rexSizer.padding;return this.getChildWidth(this.childrenMap.title)+(t.left+t.right)*e.scaleX+this.getInnerPadding("left")},setMinTitleWidth(e){var t=this.childrenMap.title;if(!t||t.orientation!==0)return this;var n=t.rexSizer.padding;return e-=(n.left+n.right)*t.scaleX,t.minWidth=e,this}},Ll=Phaser.Utils.Objects.GetValue;class Hu extends pt{constructor(t,n){super(t,n),this.type="rexTweaker.InputRow",this.bindingTarget=void 0,this.bindTargetKey=void 0,this.autoUpdateEnable=!0;var s,o=n.inputTitle,i=n.inputField,r=n.background,h=Ll(n,"proportion.title",0),a=Ll(n,"space.title",0);s=this.orientation===0?{right:a}:{bottom:a},this.add(o,{proportion:h,expand:!0,padding:s});var u=i.defaultProportion;u===void 0&&(u=n.defaultExpandWidth?1:0),h=Ll(n,"proportion.inputField",u),this.add(i,{proportion:h,expand:!0}),r&&this.addBackground(r),this.addChildrenMap("title",o),this.addChildrenMap("inputField",i),this.addChildrenMap("background",r),this.setupBinding()}destroy(t){this.scene&&!this.ignoreDestroy&&(this.stopMonitorTarget(),super.destroy(t))}setTitle(t){return this.childrenMap.title.setTitle(t),this}preLayout(){var t=this.childrenMap.title;t&&(t.minWidth=0),super.preLayout()}}Object.assign(Hu.prototype,i3,s3,n3);var wy=function(e,t,n){var s=new Sr(e,n);return e.add.existing(s),s},r3=function(e){return e===void 0&&(e=pt),class extends e{get bindingTarget(){return this.getParentSizer().bindingTarget}get bindingKey(){return this.getParentSizer().bindTargetKey}get value(){return this._value}get root(){return this.getParentSizer().getParentSizer().root}onBindTarget(t,n){this.onBindTargetCallback&&this.onBindTargetCallback(this,t,n)}validate(t){return!(!this.syncValueFlag&&this.validateCallback)||this.validateCallback(t,this._value,this.bindingTarget,this.bindingKey)}getFotmatText(t){return this.textFormatCallback?this.textFormatCallback(t):t.toString()}set value(t){if(this._value!==t&&(this.validate(t)||(t=this._value),this.filterValueCallback&&(t=this.filterValueCallback(this,t)),this.displayValueCallback&&this.displayValueCallback(this,t),this._value!==t)){var n=this._value;if(this._value=t,!this.syncValueFlag){var s=this.bindingTarget,o=this.bindingKey;this.emit("valuechange",t,n,s,o),this.root.emit("valuechange",t,n,s,o)}}}getValue(){return this.value}setValue(t){return this.value=t,this}syncValue(t){return this.syncValueFlag=!0,this.value=t,this.syncValueFlag=!1,this}setup(t,n){return n===void 0&&(n=!1),(n||t.hasOwnProperty("format"))&&this.setTextFormatCallback(t.format),(n||t.hasOwnProperty("onValidate"))&&this.setValidateCallback(t.onValidate),this.setupCallback&&this.setupCallback(this,t,n),this}setSetupCallback(t){return this.setupCallback=t,this}setFilterValueCallback(t){return this.filterValueCallback=t,this}setDisplayValueCallback(t){return this.displayValueCallback=t,this}setOnBindTargetCallback(t){return this.onBindTargetCallback=t,this}setTextFormatCallback(t){return this.textFormatCallback=t,this}setValidateCallback(t){return this.validateCallback=t,this}}},a3=function(e,t,n){for(var s,o=this.inputHandlers,i=0,r=o.length;i<r;i++){var h=o[i];if(h.accept(t)){s=new(r3(h.baseClass))(e),e.add.existing(s),s.setSetupCallback(h.setup).setFilterValueCallback(h.filterValue).setDisplayValueCallback(h.displayValue).setOnBindTargetCallback(h.onBindTarget),h.build(s,n);break}}return s&&s.setup(t,!0),s};const Zp=Phaser.Utils.Objects.GetValue;var o3=function(e,t,n){var s=a3.call(this,e,t,n);if(!s)return null;var o=Zp(n,"title")||{},i=wy(e,0,o),r=Zp(n,"background")||{},h=ce(e,r),a=new Hu(e,{...n,...t,inputTitle:i,inputField:s,background:h});return e.add.existing(a),a.setTitle(t),a.setValueCallbacks(t),a};const h3=Phaser.Utils.Objects.GetValue,uo=Phaser.Utils.Objects.GetValue,l3=Phaser.Utils.Objects.GetValue,u3=Phaser.Utils.Objects.GetValue;var xr=function(e,t,n,s){if(t)for(var o=0,i=t.length;o<i;o++){var r=t[o];r.hasOwnProperty("$target")&&(n=r.$target,delete r.$target);var h=r.$type;switch(delete r.$type,h){case"folder":var a=e.addFolder(r);xr(a,r.$properties,n,s);break;case"tab":for(var u=e.addTab(r),l=0,d=u.length;l<d;l++)xr(u[l],r.pages[l].$properties,n,s);break;case"columns":var c=e.addColumns(r);for(l=0,d=c.length;l<d;l++)xr(c[l],r.columns[l].$properties,n,s);break;case"scrollable":var p=e.addScrollable(r);xr(p,r.$properties,n,s);break;case"separator":e.addSeparator();break;case"button":r.bindingTarget=n,e.addButton(r);break;case"buttons":r.bindingTarget=n,e.addButtons(r);break;default:var f=r.$key;if(delete r.$key,f.indexOf(".")===-1)r.bindingTarget=n,r.bindingKey=f;else{var v=f.split(".");r.bindingKey=v.pop();for(var g=n,y=0,m=v.length;y<m;y++)g=g[v[y]],n||console.warn(`[Monitor] Key path '${f}' is invalid`);r.bindingTarget=g}r.hasOwnProperty("monitor")||(r.monitor=s),e.addInput(r)}}},d3={registerInputHandler:function(e){var t=!0;return e.hasOwnProperty("accept")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'accept' callback.`)),e.hasOwnProperty("build")||(t=!1,console.error(`[Tweaker] Can't register inputHandler '${e.name}', missing 'build' callback.`)),t&&this.inputHandlers.unshift(e),this},removeInputHandler:function(e){var t=NA(this.inputHandlers,"name",e);return t&&GA(this.inputHandlers,t),this},addFolder:function(e){e===void 0&&(e={});var t=Hp(this.styles,"folder")||{};t.tweaker=this.styles,t.root=this.root;var n=function(i,r,h){var a=i.scene,u=Sn(h,"title")||{},l=new UA(a,u);a.add.existing(l),l.on("folder.expand",function(){l.setExpandedState(!0)}).on("folder.collapse",function(){l.setExpandedState(!1)});var d={root:Sn(h,"root"),styles:Sn(h,"tweaker"),space:Sn(h,"space")||{}},c=i.createTweaker(d),p=Sn(h,"background"),f=yr(a,r,p),v=new vy(a,{title:l,child:c,background:f,transition:{duration:Sn(h,"transition.duration",200)}});return a.add.existing(v),v}(this,e,t);delete t.tweaker,delete t.root,this.add(n,{expand:!0}),n.setTitle(e);var s=Hp(e,"expanded",!0);s!==void 0&&n.setExpandedState(s);var o=n.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,o),o},addTab:function(e){e===void 0&&(e={});var t=Kp(this.styles,"tab")||{};t.tweaker=this.styles,t.root=this.root;var n=function(l,d,c){var p=l.scene,f=new yy(p,c);p.add.existing(f);for(var v=ho(c,"tab"),g={root:ho(c,"root"),styles:ho(c,"tweaker")},y=ho(d,"pages")||[],m=0,x=y.length;m<x;m++){var b=y[m];f.addPage({key:b.title,tab:be(p,v).setActiveState(!1).resetDisplayContent({text:b.title}),page:l.createTweaker(g)})}return f.on("tab.focus",function(w,T){w.setActiveState(!0)}).on("tab.blur",function(w,T){w.setActiveState(!1)}),f}(this,e,t);delete t.tweaker,delete t.root,this.add(n,{expand:!0});for(var s=Kp(e,"pages")||[],o=[],i=0,r=0,h=s.length;r<h;r++){var a=n.getPage(r);s[r].show&&(i=r);var u=s[r].key;u&&this.root.addChildrenMap(u,a),o.push(a)}return n.swapPage(i,0),o},addColumns:function(e){e===void 0&&(e={}),typeof e=="number"&&(e={columns:e});var t=qp(this.styles,"columns")||{};t.tweaker=this.styles,t.root=this.root;var n=function(h,a,u){var l=h.scene,d=Os(u,"title")||{},c=new Sr(l,d);l.add.existing(c);var p={root:Os(u,"root"),styles:Os(u,"tweaker")},f=Os(u,"background");f&&!Array.isArray(f)&&(f=[f]);var v=Os(a,"columns",2);if(typeof v=="number"){var g=v;v=[];for(var y=0,m=g;y<m;y++)v.push({})}for(y=0,m=v.length;y<m;y++){var x=v[y];f&&(p.background=f[y%f.length]),p.width=Os(x,"width",0);var b=h.createTweaker(p);x.child=b}var w=new xy(l,{title:c,columns:v,space:Os(u,"space")});return l.add.existing(w),w}(this,e,t);delete t.tweaker,delete t.root,this.add(n,{expand:!0}),n.setTitle(e);var s=qp(e,"columns",void 0);if(s&&Array.isArray(s))for(var o=0,i=s.length;o<i;o++){var r=s[o].key;r&&this.root.addChildrenMap(r,n.getColumn(o))}return n.getColumns()},addWrap:function(e){e===void 0&&(e={});var t=JA(this.styles,"wrap")||{};t.tweaker=this.styles,t.root=this.root;var n=function(o,i,r){var h=o.scene,a=ci(r,"title")||{},u=new Sr(h,a);h.add.existing(u);var l=ci(r,"itemWidth",0),d=ci(r,"itemHeight",0),c={root:ci(r,"root"),styles:ci(r,"tweaker"),space:ci(r,"space"),align:ci(r,"align",5),wrap:!0,itemWidth:ci(i,"itemWidth",l),itemHeight:ci(i,"itemHeight",d)};ci(r,"background");var p=o.createTweaker(c),f=new by(h,{title:u,child:p});return h.add.existing(f),f}(this,e,t);delete t.tweaker,delete t.root,this.add(n,{expand:!0}),n.setTitle(e);var s=n.childrenMap.child;return e.key&&this.root.addChildrenMap(e.key,s),s},addScrollable:function(e){e===void 0&&(e={});var t=e3(this.styles,"scrollable")||{};t.tweaker=this.styles,t.root=this.root;var n=function(o,i,r){var h=o.scene,a=Hi(r,"title")||{},u=new Sr(h,a);h.add.existing(u);var l={root:Hi(r,"root"),styles:Hi(r,"tweaker"),space:Hi(r,"space")||{}},d=o.createTweaker(l),c=Hi(r,"slider");if(c){var p=(c=Ne(c)).track;p&&(c.track=yr(h,i,p));var f=c.thumb;f&&(c.thumb=yr(h,i,f))}var v=Hi(r,"background"),g=yr(h,i,v),y=new Ty(h,{scrollMode:0,header:u,panel:{child:d,mask:{padding:1}},slider:c,background:g,height:Hi(i,"height",0),space:Hi(r,"space",void 0)});return h.add.existing(y),y}(this,e,t);delete t.tweaker,delete t.root,this.add(n,{proportion:n.minWidth===0?1:0,expand:!0}),n.setTitle(e);var s=n.childrenMap.panel;return e.key&&this.root.addChildrenMap(e.key,s),s},addInput:function(e,t,n){arguments.length===1?(e=(n=e).bindingTarget,t=n.bindingKey):(n===void 0&&(n={}),n.bindingTarget=e,n.bindingKey=t),n.title||(n.title=t),n.bindingTarget&&n.bindingKey?n.value=n.bindingTarget[n.bindingKey]:n.value=void 0;var s=this.styles.inputRow||{};this.isWrapMode?s.defaultExpandWidth=!0:s.defaultExpandWidth=this.styles.orientation===1;var o,i=o3.call(this,this.scene,n,s);return i?(this.isWrapMode?(i.setMinWidth(this.itemWidth),i.setMinHeight(this.itemHeight),this.add(i)):(this.orientation===1?o=0:(o=this.itemWidth>0?0:1,i.minWidth===0&&i.setMinWidth(this.itemWidth)),i.minHeight===0&&i.setMinHeight(this.itemHeight),this.add(i,{proportion:o,expand:!0})),n.onValueChange&&i.childrenMap.inputField.on("valuechange",n.onValueChange),i.setAutoUpdateEnable(n.autoUpdate),i.setBindingTarget(e,t),n.monitor&&i.startMonitorTarget(),n.key&&this.root.addChildrenMap(n.key,i),this):(console.error(`[Tweaker] Can't add Input
    title: ${n.title}
    view: ${n.view}
`),this)},addButtons:function(e){e===void 0&&(e={});var t=this.scene,n=e.bindingTarget;delete e.bindingTarget;var s=function(o,i,r){for(var h=uo(r,"title")||{},a=wy(o,0,h),u=i.buttons,l=uo(r,"button")||{},d=[],c=0,p=u.length;c<p;c++){var f=be(o,l);d.push(f);var v=u[c];f.resetDisplayContent(v.label),f.callback=v.callback}var g=function(x,b){var w=new(h3(b,"wrap",!1)?Fn:de)(x,b);return x.add.existing(w),w}(o,{buttons:d,expand:!0,wrap:uo(i,"wrap",!1)});g.defaultProportion=1;var y=function(x,b){var w=new zn(x,b);return x.add.existing(w),w}(o,uo(r,"background")||{}),m=new Hu(o,{...r,inputTitle:a,inputField:g,background:y});return o.add.existing(m),m.setTitle(i),g.on("button.click",function(x){x.callback(m.bindingTarget)}),m}(t,e,l3(this.styles,"inputRow")||{});return this.add(s,{expand:!0}),n&&s.setBindingTarget(n),e.key&&this.root.addChildrenMap(e.key,s),this},addButton:function(e){return e===void 0&&(e={}),e.buttons=[{label:e.label,callback:e.callback}],delete e.label,delete e.callback,this.addButtons(e),this},addSeparator:function(e){e===void 0&&(e={});var t=function(n,s,o){return ce(n,my(s,o))}(this.scene,e,u3(this.styles,"separator"));return this.add(t,{expand:!0}),this},addRows:function(e,t,n){return typeof t=="boolean"&&(n=t,t=void 0),n===void 0&&(n=!0),xr(this,Ne(e),t,n),this},setBindingTarget:function(e){for(var t=this.sizerChildren,n=0,s=t.length;n<s;n++){var o=t[n];o.setBindingTarget&&o.setBindingTarget(e)}return this},getMaxInputRowTitleWidth:function(){for(var e=0,t=this.sizerChildren,n=0,s=t.length;n<s;n++){var o=t[n];o.rexSizer.hidden||(o.getMinTitleWidth?e=Math.max(e,o.getMinTitleWidth()):o.getMaxInputRowTitleWidth&&(e=Math.max(e,o.getMaxInputRowTitleWidth())))}return e+this.getInnerPadding("left")},setInputRowTitleWidth:function(e){this.isWrapMode||(e-=this.getInnerPadding("left"));for(var t=this.sizerChildren,n=0,s=t.length;n<s;n++){var o=t[n];o.rexSizer.hidden||(o.setMinTitleWidth?o.setMinTitleWidth(e):o.setInputRowTitleWidth&&o.setInputRowTitleWidth(e))}return this}};const Ki=Phaser.Utils.Objects.GetValue;var Sy=function(e){var t=Ki(e,"wrap",!1),n=t?Un:pt;class s extends n{constructor(i,r){r===void 0&&(r={}),r.orientation===void 0&&(r.orientation=t?0:1),super(i,r),this.type="rexTweakerShell",this.isWrapMode=t,r.root?(this.root=r.root,this.inputHandlers=this.root.inputHandlers):(this.root=this,this.inputHandlers=[]),this.styles=Ki(r,"styles")||{},this.styles.orientation=this.orientation;var h=Ki(r,"itemWidth");h===void 0&&(h=Ki(this.styles,"itemWidth",0)),this.itemWidth=h;var a=Ki(r,"itemHeight");if(a===void 0&&(a=Ki(this.styles,"itemHeight",0)),this.itemHeight=a,t||this.root===this&&this.orientation===1){var u=Ki(r,"inputRow.alignTitle");u===void 0?u=!Ki(this.styles,"inputRow.proportion.title"):u&&gi(this.styles,"inputRow.proportion.title",0),this.alignInputRowTitleStartFlag=u}else this.alignInputRowTitleStartFlag=!1;var l=yr(i,void 0,r.background);l&&this.addBackground(l)}preLayout(){super.preLayout(),this.alignInputRowTitleStartFlag&&this.setInputRowTitleWidth(this.getMaxInputRowTitleWidth())}createTweaker(i,r){r===void 0&&(r=!0);var h=new(Sy(i))(this.scene,i);return r&&this.scene.add.existing(h),h}}return Object.assign(s.prototype,d3),s};Phaser.Utils.Objects.GetValue,Phaser.Math.Linear,Phaser.Math.Snap.Floor,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Sy();var Jp=function(e,t){return function(n,s,o,i){s!=="panel"&&o.moveChild(n,i?0:e,t)}},Qp=function(e,t){return function(n,s,o,i){s==="panel"&&o.moveChild(n,i?0:e,t)}};const Dl={visible:{show:function(){return function(e,t,n,s){t!=="panel"&&n.setChildVisible(e,!0)}},hide:function(){return function(e,t,n,s){t!=="panel"&&n.setChildVisible(e,!1)}}},fade:{show:function(e,t){return t===void 0&&(t=1),function(n,s,o,i){s!=="panel"&&o.fadeChild(n,i?0:e,t)}},hide:function(e,t){return t===void 0&&(t=0),function(n,s,o,i){s!=="panel"&&o.fadeChild(n,i?0:e,t)}}},move:{show:Jp,hide:Jp},"move-panel":{show:Qp,hide:Qp}},c3={showChild(e,t){var n=this.sizerChildren[e];return n&&(this.emit("showchild",n,e,this,t),this.resetChildState(n)),this},hideChild(e,t){var n=this.sizerChildren[e];return n&&(this.emit("hidechild",n,e,this,t),this.resetChildState(n)),this},swapChild(e,t){return this.currentChildKey===e||(this.currentChildKey==="panel"||e==="panel"?(this.previousChildKey=this.currentChildKey,this.currentChildKey=e,this.hideChild(this.previousChildKey,t),this.showChild(this.currentChildKey,t)):(this.swapChild("panel",t),this.swapChild(e,t))),this},showPanel(e){return this.swapChild("panel",e),this},showLeftSide(){return this.swapChild("leftSide"),this},showRightSide(){return this.swapChild("rightSide"),this},showTopSide(){return this.swapChild("topSide"),this},showBottomSide(){return this.swapChild("bottomSide"),this},hideLeftSide(){return this.currentChildKey=="leftSide"&&this.showPanel(),this},hideRightSide(){return this.currentChildKey=="rightSide"&&this.showPanel(),this},hideTopSide(){return this.currentChildKey=="topSide"&&this.showPanel(),this},hideBottomSide(){return this.currentChildKey=="bottomSide"&&this.showPanel(),this},toggleLeftSide(){var e=this.currentChildKey!=="panel"?"panel":"leftSide";return this.swapChild(e),this},toggleRightSide(){var e=this.currentChildKey!=="panel"?"panel":"rightSide";return this.swapChild(e),this},toggleTopSide(){var e=this.currentChildKey!=="panel"?"panel":"topSide";return this.swapChild(e),this},toggleBottomSide(){var e=this.currentChildKey!=="panel"?"panel":"bottomSide";return this.swapChild(e),this}},f3=ii.prototype.setChildVisible,p3={setChildVisible(e,t){if(typeof e=="string"){var n=e;e=this.sizerChildren[n]}else n=Go(this.sizerChildren,e);return t===void 0&&(t=this.currentChildKey===n),f3.call(this,e,t),this}},g3={fadeChild(e,t,n){var s;return typeof e=="string"?(s=e,e=this.sizerChildren[s]):s=Go(this.sizerChildren,e),t===void 0&&(t=500),n===void 0&&(n=this.currentChildKey===s?1:0),e.fadeIn(t,{start:e.alpha,end:n}),this},fadeChildPromise(e,t,n){return typeof e=="string"&&(e=this.sizerChildren[key]),this.fadeChild(e,t,n),e._fade?re(e._fade):Promise.resolve()}},m3={moveChild(e,t,n,s){var o;typeof e=="string"?(o=e,e=this.sizerChildren[o]):o=Go(this.sizerChildren,e),t===void 0&&(t=500);var i,r,h,a,u=this.currentChildKey===o;if(s===void 0)switch(o){case"leftSide":case"rightSide":s=bt(e);break;case"topSide":case"bottomSide":s=Tt(e);break;default:if(u)switch(this.previousChildKey){case"leftSide":case"rightSide":s=bt(this.sizerChildren[this.previousChildKey]);break;case"topSide":case"bottomSide":s=Tt(this.sizerChildren[this.previousChildKey]);break;default:s=0}else switch(this.currentChildKey){case"leftSide":case"rightSide":s=bt(this.sizerChildren[this.currentChildKey]);break;case"topSide":case"bottomSide":s=Tt(this.sizerChildren[this.currentChildKey]);break;default:s=0}}if(u)switch(o){case"panel":switch(this.previousChildKey){case"leftSide":i=!0;break;case"rightSide":r=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}break;case"leftSide":r=!0;break;case"rightSide":i=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}else switch(o){case"panel":switch(this.currentChildKey){case"leftSide":r=!0;break;case"rightSide":i=!0;break;case"topSide":a=!0;break;case"bottomSide":h=!0}break;case"leftSide":i=!0;break;case"rightSide":r=!0;break;case"topSide":h=!0;break;case"bottomSide":a=!0}return i?e.moveTo(t,`-=${s}`,void 0,n):r?e.moveTo(t,`+=${s}`,void 0,n):h?e.moveTo(t,void 0,`-=${s}`,n):a?e.moveTo(t,void 0,`+=${s}`,n):e.moveTo(0),this},moveChildPromise(e,t,n,s){return typeof e=="string"&&(e=this.sizerChildren[key]),this.moveChild(e,t,n,s),e._easeMove?re(e._easeMove):Promise.resolve()}};var Cy={};Object.assign(Cy,p3,g3,m3);const xe=Phaser.Utils.Objects.GetValue;Object.assign((class extends Fi{constructor(e,t){super(e,t),this.type="rexSides",this.childrenMap=this.sizerChildren,this.previousChildKey=void 0,this.currentChildKey=void 0;var n=xe(t,"showChildCallback",void 0);if(n)if(ti(n)){var s=xe(t,"showChildCallbackScope",void 0);this.on("showchild",n,s);var o=xe(t,"hideChildCallback",void 0),i=xe(t,"hideChildCallbackScope",void 0);this.on("hidechild",o,i)}else{var r=function(f){var v,g,y,m;return[v,...g]=typeof f=="string"?[f]:f,Dl.hasOwnProperty(v)?(y=Dl[v].show.apply(null,g),m=Dl[v].hide.apply(null,g)):(y=Ht,m=Ht),{show:y,hide:m}}(n);this.on("showchild",r.show),this.on("hidechild",r.hide)}var h=xe(t,"background",void 0),a=xe(t,"panel",void 0),u=xe(t,"leftSide",void 0),l=xe(t,"rightSide",void 0),d=xe(t,"topSide",void 0),c=xe(t,"bottomSide",void 0);if(h&&this.addBackground(h),a&&this.add(a,"panel","center",0,!0),u){var p=xe(t,"expand.left",!0);this.add(u,"leftSide","left-top",0,{height:p})}l&&(p=xe(t,"expand.right",!0),this.add(l,"rightSide","right-top",0,{height:p})),d&&(p=xe(t,"expand.top",!0),this.add(d,"topSide","left-top",0,{width:p})),c&&(p=xe(t,"expand.bottom",!0),this.add(c,"bottomSide","left-bottom",0,{width:p}))}reset(){return this.previousChildKey=void 0,this.currentChildKey="panel",this.showChild("panel",!0),this.hideChild("leftSide",!0),this.hideChild("rightSide",!0),this.hideChild("topSide",!0),this.hideChild("bottomSide",!0),this}}).prototype,c3,Cy),Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.GetAdvancedValue,Phaser.Math.Linear,Phaser.Math.RotateAround,Phaser.Geom.Mesh.Vertex,Phaser.Geom.Mesh.Face,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue,Phaser.Math.DegToRad,Phaser.Math.RadToDeg,Phaser.Utils.Objects.IsPlainObject,Phaser.Utils.Objects.GetValue;var En=void 0;const fi=Phaser.Utils.Objects.GetValue,v3=Phaser.Utils.Objects.Clone,ks=Phaser.Utils.Objects.GetValue,y3=Phaser.Utils.Objects.Merge;var x3={open:function(e,t){e===void 0&&(e={}),e=y3(e,this.openConfig),this!==En&&(En!==void 0&&En.close(),En=this),ti(e)&&(t=e,e=void 0);var n=ks(e,"inputType",void 0);n===void 0&&(n=ks(e,"type","text")),t===void 0&&(t=ks(e,"onClose",void 0));var s,o=ks(e,"onCreate",void 0),i=ks(e,"onOpen",void 0),r=ks(e,"onTextChanged",void 0);return this.inputText=function(h,a){a===void 0&&(a={}),a=v3(a);var u=h.scene,l=h.style,d=fi(a,"backgroundColor",l.backgroundColor);d===null&&(d="transparent"),a.text=fi(a,"text",h.text),a.fontFamily=fi(a,"fontFamily",l.fontFamily),a.fontSize=fi(a,"fontSize",l.fontSize),a.color=fi(a,"color",l.color),a.backgroundColor=d,a.direction=fi(a,"rtl",l.rtl)?"rtl":"ltr",a.align=fi(a,"align",function(v){return v.hasOwnProperty("align")?v.align:v.hasOwnProperty("halign")?v.halign:"left"}(l)),a.direction==="rtl"&&_u(h)&&(a.align="right");var c=h.padding;c.left>0&&(a.paddingLeft=`${c.left}px`),c.right>0&&(a.paddingRight=`${c.right}px`),l.backgroundCornerRadius&&(a.borderRadius=fi(a,"borderRadius",`${l.backgroundCornerRadius}px`));var p=new yv(u,h.x,h.y,fi(a,"width",h.width),fi(a,"height",h.height),a);p.setScale(h.scaleX,h.scaleY).setOrigin(h.originX,h.originY).setScrollFactor(h.scrollFactorX,h.scrollFactorY);var f=h.parentContainer;return f?f.add(p):u.add.existing(p),p}(this.parent,e),o&&o(this.parent,this.inputText),this.inputText.on("textchange",function(h){var a=h.text;r?r(this.parent,a):this.parent.text=a},this).setFocus(),this.parent.setVisible(!1),this.onClose=t,ks(e,"enterClose",n!=="textarea")&&this.scene.input.keyboard.once("keydown-ENTER",this.close,this),this.delayCall=(s=function(){this.scene.input.once("pointerdown",this.close,this),i&&i(this.parent,this.inputText),this.emit("open",this.parent,this.inputText)},this.scene.time.delayedCall(0,s,[],this)),this},close:function(){return this===En&&(En=void 0),this.parent.setVisible(!0),this.inputText&&(this.inputText.destroy(),this.inputText=void 0),this.delayCall&&(this.delayCall.remove(),this.delayCall=void 0),this.scene.input.keyboard.off("keydown-ENTER",this.close,this),this.scene.input.off("pointerdown",this.close,this),this.onClose&&this.onClose(this.parent),this.emit("close",this.parent),this}};const b3=Phaser.Utils.Objects.GetValue;Object.assign((class extends Rt{constructor(e,t){super(e),this.inputText=void 0,this.onClose=void 0,this.delayCall=void 0,this.setOpenConfig(t),b3(t,"clickEnable",!0)&&e.on("pointerdown",function(){this.open()},this).setInteractive()}shutdown(e){this.isShutdown||(this.close(),super.shutdown(e))}setOpenConfig(e){return e===void 0&&(e={}),this.openConfig=e,this}get isOpened(){return this.inputText!==void 0}get text(){return this.isOpened?this.inputText.text:this.parent.text}}).prototype,x3);class T3 extends Ct.GameObjects.Container{constructor(t,n,s){super(t,n??0,s??0),J(this,"posX",0),J(this,"posY",0),J(this,"toastQueue"),this.toastQueue=new cy(t,{x:320,y:50,orientation:1,space:{left:0,right:0,top:0,bottom:0,item:0},createMessageLabelCallback(o,i,r){const h=new zn(o,n,s,0,0,10,5125166);o.add.existing(h);const a=new Ws(o,{width:480,space:{left:10,right:10,top:10,bottom:10},background:h,text:o.add.text(0,0,i,{fontSize:20}).setAlign("center"),wrapText:!0});return o.add.existing(a),a},queueDirection:"top-to-bottom",duration:{in:200,hold:3e3,out:200}}),this.scene.add.existing(this.toastQueue)}show(t){this.toastQueue.setPosition(this.posX,this.posY),this.toastQueue.showMessage(t)}}class w3 extends Ct.GameObjects.Container{constructor(t,n,s){super(t,n??0,s??0),J(this,"background"),J(this,"modal"),J(this,"xBtn"),J(this,"contextTxt"),J(this,"titleTxt"),J(this,"toast"),J(this,"closeAudioKey","click-b");const o=t.add.rectangle(0,0,640,960);o.setOrigin(0,0),o.alpha=.2,o.isFilled=!0,o.fillColor=0,this.add(o);const i=t.add.nineslice(320,480,"modal_background",void 0,400,500,20,20,20,20);this.add(i);const r=t.add.image(320,673,"x_btn");this.add(r);const h=t.add.text(320,478,"",{});h.setOrigin(.5,.5),h.text=`game name: Square Landing

developer: Flux Hunter

company: Flux Dev

contact: dong5966@gmail.com`,h.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"20px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),this.add(h);const a=t.add.text(320,276,"",{});a.setOrigin(.5,.5),a.text="ABOUT",a.setStyle({align:"center",fixedWidth:350,fontFamily:"Arial Black",fontSize:"20px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),this.add(a);const u=new T3(t,0,0);this.add(u),u.posX=320,u.posY=50,this.background=o,this.modal=i,this.xBtn=r,this.contextTxt=h,this.titleTxt=a,this.toast=u,this.background.setInteractive(),this.modal.setInteractive(),this.contextTxt.setInteractive(),this.xBtn.setInteractive(),this.background.on("pointerup",()=>this.hide(),this),this.contextTxt.on("pointerup",this.copy2Clipboard,this),this.xBtn.on("pointerup",()=>this.hide(),this),this.hide(!0)}show(){this.setVisible(!0)}hide(t=!1){this.setVisible(!1),t||Yt.audio.isSfx&&this.scene.sound.play(this.closeAudioKey)}copy2Clipboard(){window.navigator.clipboard.writeText("dong5966@gmail.com"),this.toast.show("Copy email to clipboard!")}}class S3 extends Ct.GameObjects.Container{constructor(t,n,s){super(t,n??0,s??0),J(this,"background"),J(this,"modal"),J(this,"xBtn"),J(this,"contextTxt"),J(this,"contextTxt_1"),J(this,"contextTxt_2"),J(this,"contextTxt_3"),J(this,"contextTxt_4"),J(this,"contextTxt_5"),J(this,"contextTxt_6"),J(this,"contextTxt_7"),J(this,"contextTxt_8"),J(this,"contextTxt_9"),J(this,"contextCon"),J(this,"titleTxt"),J(this,"resetBtn"),J(this,"resetBackground"),J(this,"resetModal"),J(this,"removeBtn"),J(this,"cancelBtn"),J(this,"resetTxt"),J(this,"resetModalCon"),J(this,"localStorageNode"),J(this,"closeAudioKey","click-b");const o=t.add.rectangle(0,0,640,960);o.setOrigin(0,0),o.alpha=.2,o.isFilled=!0,o.fillColor=0,this.add(o);const i=t.add.nineslice(320,480,"modal_background",void 0,400,600,20,20,20,20);this.add(i);const r=t.add.image(320,730,"x_btn");this.add(r);const h=t.add.container(320,293);this.add(h);const a=t.add.text(0,0,"",{});a.setOrigin(.5,.5),a.text="LEVEL",a.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(a);const u=t.add.text(0,40,"",{});u.setOrigin(.5,.5),u.text="LEVEL",u.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(u);const l=t.add.text(0,80,"",{});l.setOrigin(.5,.5),l.text="LEVEL",l.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(l);const d=t.add.text(0,120,"",{});d.setOrigin(.5,.5),d.text="LEVEL",d.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(d);const c=t.add.text(0,160,"",{});c.setOrigin(.5,.5),c.text="LEVEL",c.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(c);const p=t.add.text(0,200,"",{});p.setOrigin(.5,.5),p.text="LEVEL",p.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(p);const f=t.add.text(0,240,"",{});f.setOrigin(.5,.5),f.text="LEVEL",f.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(f);const v=t.add.text(0,280,"",{});v.setOrigin(.5,.5),v.text="LEVEL",v.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(v);const g=t.add.text(0,320,"",{});g.setOrigin(.5,.5),g.text="LEVEL",g.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(g);const y=t.add.text(0,360,"",{});y.setOrigin(.5,.5),y.text="LEVEL",y.setStyle({fixedWidth:350,fontFamily:"Arial Black",fontSize:"15px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),h.add(y);const m=t.add.text(320,221,"",{});m.setOrigin(.5,.5),m.text="DASHBOARD",m.setStyle({align:"center",fixedWidth:350,fontFamily:"Arial Black",fontSize:"20px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),this.add(m);const x=new es(t,207,729);x.scaleX=.4,x.scaleY=.4,this.add(x);const b=t.add.container(0,0);this.add(b);const w=t.add.rectangle(0,0,640,960);w.setOrigin(0,0),w.alpha=.2,w.isFilled=!0,w.fillColor=0,b.add(w);const T=t.add.nineslice(320,480,"modal_background",void 0,400,200,20,20,20,20);b.add(T);const S=new es(t,230,526);S.scaleX=.5,S.scaleY=.5,b.add(S);const C=new es(t,410,526);C.scaleX=.5,C.scaleY=.5,b.add(C);const E=t.add.text(320,450,"",{});E.setOrigin(.5,.5),E.text="RESET ALL YOUR RECORD?",E.setStyle({align:"center",fixedWidth:350,fontFamily:"Arial Black",fontSize:"20px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10}),b.add(E);const M=new $l(this);x.textString="RESET",S.textString="RESET",C.textString="CANCEL",this.background=o,this.modal=i,this.xBtn=r,this.contextTxt=a,this.contextTxt_1=u,this.contextTxt_2=l,this.contextTxt_3=d,this.contextTxt_4=c,this.contextTxt_5=p,this.contextTxt_6=f,this.contextTxt_7=v,this.contextTxt_8=g,this.contextTxt_9=y,this.contextCon=h,this.titleTxt=m,this.resetBtn=x,this.resetBackground=w,this.resetModal=T,this.removeBtn=S,this.cancelBtn=C,this.resetTxt=E,this.resetModalCon=b,this.localStorageNode=M,this.background.setInteractive(),this.modal.setInteractive(),this.contextTxt.setInteractive(),this.xBtn.setInteractive(),this.background.on("pointerup",()=>this.hide(),this),this.xBtn.on("pointerup",()=>this.hide(),this),this.resetBtn.setAction(()=>{this.showResetModal()}),this.resetBackground.setInteractive(),this.resetBackground.on("pointerup",()=>{this.hideResetModal()}),this.resetModal.setInteractive(),this.removeBtn.setAction(()=>{this.localStorageNode.setConfig("dashboard",[]),this.hideResetModal(),this.show()}),this.cancelBtn.setAction(()=>{this.hideResetModal()}),this.hide(!0),this.hideResetModal()}show(){this.createRecordList(),this.chckIsResetBtnEnable(),this.setVisible(!0)}hide(t=!1){this.setVisible(!1),t||Yt.audio.isSfx&&this.scene.sound.play(this.closeAudioKey)}showResetModal(){this.resetModalCon.setVisible(!0)}hideResetModal(){this.resetModalCon.setVisible(!1),this.scene.sound.play(this.closeAudioKey)}createRecordList(){const t=this.localStorageNode.getConfig("dashboard",[]);t.length?this.contextCon.list.map((n,s)=>{s<=t.length-1?n.setText(t[s]):n.setText("")}):this.contextCon.list.map(n=>{n.setText("")})}chckIsResetBtnEnable(){}}class C3 extends Phaser.Scene{constructor(){super("Main"),J(this,"title"),J(this,"startBtn"),J(this,"dashboardBtn"),J(this,"aboutBtn"),J(this,"exitBtn"),J(this,"bgmToggleBtn"),J(this,"sfxToggleBtn"),J(this,"btnContainer"),J(this,"ballContainer"),J(this,"aboutModal"),J(this,"dashboardModal"),J(this,"localStorageNode"),J(this,"bgm")}editorCreate(){const t=this.add.text(320,185,"",{});t.setOrigin(.5,.5),t.text="SQUARE LANDING",t.setStyle({align:"center",fontFamily:"Arial Black",fontSize:"55px",fontStyle:"bold",stroke:"#000000ff",strokeThickness:10});const n=this.add.container(320,333);n.scaleX=.7,n.scaleY=.7;const s=new es(this,0,130);n.add(s);const o=new es(this,0,130);o.visible=!1,n.add(o);const i=new es(this,0,260);n.add(i);const r=new es(this,0,390);r.visible=!1,n.add(r);const h=new od(this,-80,780);n.add(h);const a=new od(this,80,780);n.add(a);const u=this.add.container(0,0),l=new w3(this,0,0);this.add.existing(l);const d=new S3(this,0,0);this.add.existing(d);const c=new $l(this);s.textString="START",o.textString="DASHBOARD",i.textString="ABOUT",r.textString="EXIT",h.iconTexture={key:"audioOn"},h.iconTextureDown={key:"audioOff"},a.iconTexture={key:"musicOn"},a.iconTextureDown={key:"musicOff"},this.title=t,this.startBtn=s,this.dashboardBtn=o,this.aboutBtn=i,this.exitBtn=r,this.bgmToggleBtn=h,this.sfxToggleBtn=a,this.btnContainer=n,this.ballContainer=u,this.aboutModal=l,this.dashboardModal=d,this.localStorageNode=c,this.events.emit("scene-awake")}create(){window.UtilPlatform.sendMsg2Parent("ShowNavFooterPlay"),this.editorCreate(),this.createTitle(),this.createPhysicRectangles(),this.bgm=this.sound.add("bgm"),this.createBtnCallback(),this.createDepth()}createBtnCallback(){this.startBtn.setAction(()=>{window.UtilPlatform.sendMsg2Parent("HideNavFooterPlay"),this.scene.start("Level")}),this.dashboardBtn.setAction(()=>{this.dashboardModal.show()}),this.createOptionBtn(),this.aboutBtn.setAction(()=>{this.aboutModal.show()});const t=!!this.localStorageNode.getConfig("bgm",!0),n=!!this.localStorageNode.getConfig("sfx",!0);this.bgmToggleBtn.setAction(()=>{this.sound.setMute(!1),Yt.audio.isBgm=!0,this.localStorageNode.setConfig("bgm",!1),this.sound.get("bgm").isPlaying||this.sound.play("bgm",{loop:!0,volume:.7})},()=>{this.sound.setMute(!0),this.sound.stopByKey("bgm"),Yt.audio.isBgm=!1,this.localStorageNode.setConfig("bgm",!0)},t),this.sfxToggleBtn.setAction(()=>{Yt.audio.isSfx=!0,this.localStorageNode.setConfig("sfx",!1)},()=>{Yt.audio.isSfx=!1,this.localStorageNode.setConfig("sfx",!0)},n)}createDepth(){this.title.setDepth(10),this.btnContainer.setDepth(10),this.aboutModal.setDepth(20),this.dashboardModal.setDepth(20)}createOptionBtn(){document.addEventListener("fullscreenchange",()=>this.changeEvtFullScreen()),this.changeEvtFullScreen()}changeEvtFullScreen(){}createTitle(){let t=!1;this.title.setInteractive(),this.title.on("pointerdown",()=>{t||this.tweens.addCounter({from:1,to:1.1,duration:100,onUpdate:(n,s)=>{const{value:o}=s;this.title.setScale(o)}})}),this.title.on("pointerup",()=>{t||(t=!0,this.tweens.addCounter({from:this.title.scale,to:1,duration:100,onUpdate:(n,s)=>{const{value:o}=s;this.title.setScale(o)}}),Yt.audio.isSfx&&this.sound.play("blockDown"),this.matter.world.setBounds(0,0,640,960,32,!1,!1,!1,!1),setTimeout(()=>{this.matter.world.setBounds(0,0,640,960,32,!0,!0,!1,!0),Yt.audio.isSfx&&this.sound.play("blockDownLock",{volume:1.2}),t=!1},3e3))}),this.title.on("pointerout",()=>{t||this.tweens.addCounter({from:this.title.scale,to:1,duration:100,onUpdate:(n,s)=>{const{value:o}=s;this.title.setScale(o)},onComplete:()=>{this.title.setScale(1)}})})}createPhysicRectangles(){this.ballContainer.setDepth(0),this.matter.world.setBounds(0,0,640,960,32,!0,!0,!1,!0),this.time.addEvent({delay:500,callback:this.releaseBall,callbackScope:this,repeat:256}),this.matter.world.on("collisionstart",(t,n,s)=>{Yt.audio.isSfx&&(n.isSleeping||s.isSleeping||n.isAlreadySfxUsed||s.isAlreadySfxUsed||(this.sound.play("blockHit",{volume:Phaser.Math.Between(.8,1.2)}),n.isAlreadySfxUsed=!0,s.isAlreadySfxUsed=!0))})}releaseBall(){const t=this.matter.add.image(Phaser.Math.Between(32,600),-200,"square"),n=Phaser.Math.Between(50,150),s=Phaser.Math.Between(50,150);t.setDisplaySize(n,s),t.setRectangle(n,s),t.setBounce(.98),t.setAngle(Phaser.Math.Between(0,360)),this.ballContainer.add(t)}}class E3 extends Ct.Scene{constructor(){super("Boot")}preload(){this.load.pack("pack","assets/preload-asset-pack.json")}create(){this.scene.start("Preload")}}window.addEventListener("load",function(){new Ct.Game({width:640,height:960,backgroundColor:"#2f2f2f",parent:"game-container",scale:{mode:Ct.Scale.ScaleModes.FIT,autoCenter:Ct.Scale.Center.CENTER_BOTH},scene:[E3,C3,l0,My],banner:!1,physics:{default:"matter",matter:{debug:!1,enableSleeping:!0}}}).scene.start("Boot")});
