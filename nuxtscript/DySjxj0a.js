import{u as z,_ as le,a as ue,b as ce}from"./Ch_QNTUL.js";import{d as H,e as d,Y as me,f as R,X as fe,o as c,c as p,h as A,y as de,g as o,n as N,a as n,A as O,t as Y,a9 as pe,S as J,a7 as ee,r as P,aa as ve,H as U,q as te,u as ne,ab as _e,s as he,U as B,K as W,w as G,v as Z,G as X,a3 as j,x as ge}from"./e6MoXQDD.js";import{u as ye,c as xe,e as we,U as Ce}from"./C3Ea3vgQ.js";import{b as Se}from"./BinhnOB5.js";const Te={class:"tag-types-container"},be={class:"tag-icon"},Ae={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor"},ke={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor"},Le={key:2,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"12",height:"12",fill:"currentColor"},Ie={class:"tag-text"},Ee=H({__name:"CardTagTypes",props:{tagTypes:{type:Array,required:!0}},setup(w){const r=w,v=d(0),t=d(null);let l=null;const g=()=>{if(r.tagTypes.length===0){t.value=null;return}if(r.tagTypes.length===1){t.value=r.tagTypes[0];return}t.value=r.tagTypes[v.value],v.value=(v.value+1)%r.tagTypes.length};me(()=>r.tagTypes,()=>{g(),s()});const s=()=>{l&&(clearInterval(l),l=null),r.tagTypes.length>1&&(l=window.setInterval(g,3e3))};return R(()=>{g(),s()}),fe(()=>{l&&clearInterval(l)}),(y,e)=>(c(),p("div",Te,[A(pe,{name:"fade",mode:"out-in"},{default:de(()=>[o(t)?(c(),p("div",{key:o(t),class:N(["tag-badge",`tag-${o(t).toLowerCase()}`])},[n("div",be,[o(t)==="NEW"?(c(),p("svg",Ae,e[0]||(e[0]=[n("path",{d:"M12,2L20,12L12,22L4,12L12,2M12,6L8,12L12,18L16,12L12,6Z"},null,-1)]))):O("",!0),o(t)==="EVENT"?(c(),p("svg",ke,e[1]||(e[1]=[n("path",{d:"M19 19H5V8H19M16 1V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3H18V1M17 12H12V17H17V12Z"},null,-1)]))):O("",!0),o(t)==="UPDATE"?(c(),p("svg",Le,e[2]||(e[2]=[n("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,17C9.24,17 7,14.76 7,12C7,9.24 9.24,7 12,7C14.76,7 17,9.24 17,12C17,14.76 14.76,17 12,17M13,9H11V12H9L12,15L15,12H13V9Z"},null,-1)]))):O("",!0)]),n("span",Ie,Y(o(t)),1)],2)):O("",!0)]),_:1})]))}}),Pe=J(Ee,[["__scopeId","data-v-2438e68d"]]),Ne=""+new URL("click_shining_sfx.DQaeeOzp.mp3",import.meta.url).href,$e={class:N(["pt-2","w-[140px] h-[140px]","min-w-[140px] min-h-[140px]"])},q=140,K=24,Q=14,Me=9,Oe=H({__name:"App",props:{item:{type:Object,required:!0},thumbnailSrc:{type:String,default:""},idx4DelayAnim:{type:Number,default:0},isFavorite:{type:Boolean,default:!1}},emits:["open-detail"],setup(w,{expose:r,emit:v}){const t=w,l=v,g=ee(),s=P({thumbnail:"",isPending:!1,isClickPerforming:!1}),y=P({popUp:new Audio(ve),clickShine:new Audio(Ne)}),e=d(),C=d(),m=d(),_=d(),S=d(),$=()=>{e.value&&(e.value.style.display="none")},k=()=>{if(e.value){try{y.popUp.play().catch(a=>console.error("오디오 재생 실패:",a))}catch(a){console.error("오디오 로드 실패:",a)}e.value.style.display="block",e.value.style.transform="scale(0)",setTimeout(()=>{e.value&&(e.value.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",e.value.style.transform="scale(1.15)",setTimeout(()=>{e.value&&(e.value.style.transition="transform 0.15s ease-out",e.value.style.transform="scale(1)")},250))},30)}},T=()=>{s.isClickPerforming||e.value&&(e.value.style.transition="transform 0.1s ease-in-out",e.value.style.transform="rotate(5deg)",setTimeout(()=>{e.value&&(e.value.style.transform="rotate(-5deg)",setTimeout(()=>{e.value&&(e.value.style.transform="rotate(0deg)")},100))},100))},x=()=>{e.value&&(e.value.style.transition="transform 0.25s ease-in-out",e.value.style.transform="scale(1.1)",setTimeout(()=>{e.value&&(e.value.style.transform="scale(1)")},350))},i=()=>{s.isClickPerforming||_.value&&_.value.animFavoritePerform()},M=()=>{s.isClickPerforming||_.value&&_.value.animFavoritePerformShake()},L=()=>{s.isClickPerforming||(s.isClickPerforming=!0,y.clickShine.play().catch(a=>console.error("오디오 재생 실패:",a)),_.value&&_.value.animShine(),x(),setTimeout(()=>{l("open-detail"),s.isClickPerforming=!1},500))},I=async()=>{if(s.isPending=!0,s.thumbnail="",await U(),t.thumbnailSrc)s.thumbnail=t.thumbnailSrc;else{const a=await z(t.item.src,t.item.path_thumbnail);a&&(s.thumbnail=a)}s.isPending=!1};return R(async()=>{if(s.isPending=!0,await U(),t.thumbnailSrc)s.thumbnail=t.thumbnailSrc;else{const a=await z(t.item.src,t.item.path_thumbnail);a&&(s.thumbnail=a)}if(C.value&&(C.value.style.width=q+"px",C.value.style.height=K+"px"),m.value){m.value.style.fontSize=Q+"px";let a=Q;for(m.value.style.fontSize=a+"px";a>Me&&(m.value.scrollHeight>K||m.value.scrollWidth>q);)a--,m.value.style.fontSize=a+"px"}s.isPending=!1,$(),S.value={animShakePerform:T,animFavoritePerform:i,animFavoritePerformShake:M,animScaleEasePerform:()=>{e.value&&(e.value.style.display="block",k())}},g.onMounted(S.value,t.isFavorite),y.clickShine&&y.clickShine.volume!==.5&&(y.clickShine.volume=.5)}),te(()=>{g.onBeforeUnmount(S.value)}),r({animScaleEasePerform:k,animShakePerform:T,animFavoritePerform:i,hideContainer:$,resetThumbnail:I}),(a,E)=>{const D=le,F=Pe;return c(),p("div",$e,[n("div",{ref_key:"$container",ref:e,role:"status",class:"flex flex-col h-auto rounded-3xl transition duration-50 ease-in-out hover:cursor-pointer",onClick:L},[A(D,{ref_key:"$thumbnailCard",ref:_,src:o(s).thumbnail,isSpinnerExist:o(s).isPending,isFavorite:t.isFavorite,orientationMode:t.item.screen},null,8,["src","isSpinnerExist","isFavorite","orientationMode"]),A(F,{tagTypes:t.item.tag_types},null,8,["tagTypes"]),E[0]||(E[0]=n("div",{class:"pt-[10px]"},null,-1)),n("div",{ref_key:"$titleContainer",ref:C,class:"relative table-cell items-center text-white my-1"},[n("div",{ref_key:"$title",ref:m,class:"text-center break-normal items-center"},Y(t.item.title),513)],512)],512)])}}}),Be=H({__name:"Skeleton",setup(w){const{CARD_SIZE_MIN:r,CARD_SIZE_MAX:v}=ne().public.CONSTANTS;return(t,l)=>(c(),p("div",{class:N(`
            flex flex-row
            max-w-[${o(v)}] h-auto mx-auto rounded-3xl pr-8 sm:pr-4
            mt-4
        `)},l[0]||(l[0]=[n("div",{role:"status",class:"animate-pulse flex flex-row w-full h-auto"},[n("div",{class:"flex items-center justify-center bg-gray-300 rounded-3xl w-24 h-24"},[n("svg",{class:"m-6 w-24 h-24 text-gray-200",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 640 512"},[n("path",{d:"M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"})])]),n("div",{class:"w-full h-auto flex flex-col pl-2 items-end"},[n("div",{class:"ml-6 h-2.5 bg-gray-200 rounded-full w-36 my-auto"}),n("div",{class:"ml-6 h-2.5 bg-gray-200 rounded-full w-36 my-auto"}),n("div",{class:"ml-6 h-2.5 bg-gray-200 rounded-full w-24 my-auto"}),n("div",{class:"ml-6 h-2.5 bg-gray-200 rounded-full w-12 my-auto"})]),n("span",{class:"sr-only"},"Card Loading...")],-1)]),2))}}),Ue={};function He(w,r){return c(),p("div",null,r[0]||(r[0]=[n("div",{class:"my-20"},null,-1)]))}const De=J(Ue,[["render",He]]),Fe={class:"w-full h-full"},Ve={class:"pt-1 w-full flex flex-col items-center"},Re={class:"adsense-box mx-auto mt-7 items-center text-black min-[320px]:w-[300px] sm:w-[300px] md:w-[444px] lg:w-[588px] xl:w-[732px]"},je=H({__name:"List",props:{filter:{type:String,default:""},items:{type:Array}},emits:["open-detail-from-list"],setup(w,{emit:r}){const v=w,t=r,{ONE_CALL_CONTENT_COUNT_CARD:l,ONE_CALL_CONTENT_COUNT_APP:g,FETCH_TRIAL_CNT:s,CARD_SIZE_MAX:y,APP_MAX_ROW_NUM:e}=ne().public.CONSTANTS,C=Se(),m=_e(),_=ye(),S=ee(),$=xe(),k=d(),T=d();d();const x=P({row:e,style:"APP"}),i=P({contentRowClass:"",contentAppClass:"",isOffline:!1,items:[],showClick2GetNext:!1,favoriteList:[]}),M=P({isBadgeExpose:!1}),L=d("game"),I=d(!0),a=()=>{if(!k.value)return;const f=k.value.scrollWidth,u=window.innerWidth;f<=u?M.isBadgeExpose=!0:M.isBadgeExpose=!1},E=async()=>{const f=C.getUpdate();x.row=f.row,x.style="APP";let u="",h="";x.style==="CARD"?(u=`
            pt-1 mx-auto
            items-center flex flex-col
        `,h=`
            mx-auto
            md:w-1/2 w-full
            md:max-w-[${y}]
        `):(u=`
            pt-1 mx-auto
            grid grid-flow-row gap-y-1 justify-center items-center
            min-[320px]:grid-cols-2
            sm:grid-cols-2
            md:grid-cols-3
            min-[320px]:w-[300px]
            sm:w-[300px]
            md:w-[444px]
        `,h="mx-auto justify-center items-center"),i.contentRowClass=u,i.contentAppClass=h},D=async()=>!(await _.getNextContents(x.style)).isSuccess,F=(f,u)=>i.favoriteList.findIndex(h=>h.includes(u))>-1,se=()=>{T.value&&T.value.forEach(f=>{f&&f.resetThumbnail&&f.resetThumbnail()}),i.items=Ce.shuffle([...i.items])};return he(()=>{B.setBigIntIssue()}),R(async()=>{await U(),B.setBigIntIssue(),W.registerInternetConnection(()=>{i.isOffline=!1},()=>{i.isOffline=!0}),i.favoriteList=await $.getList(),await C.register(E),await E(),window.addEventListener("resize",a),m.register(L.value,D),v.items===void 0?(_.addContents(await we((u,h,V)=>{s>u||console.log("trial, error, errorData: ",u,h,V)},v.filter,x.style)),i.items=_.getContents()):i.items=v.items;const f=x.style==="CARD"?l:g;i.items.length<f&&m.setIsOutOfContent(L.value,!0),I.value=!1,i.showClick2GetNext=m.showClick2GetNext(L.value)??!1,a(),S.onMountedOnList(async()=>{se()},async()=>{T.value.forEach(u=>{u.hideContainer()}),await U(),S.performSequentialAnimation()})}),te(()=>{B.setBigIntIssue(),W.onBeforeUnmountInternetConnection(),m.onBeforeUnmount(L.value),window.removeEventListener("resize",a),B.setBigIntIssue(),S.onBeforeUnmountOnList()}),(f,u)=>{const h=Oe,V=Be,ae=ue,ie=ce,oe=De;return c(),p("div",Fe,[G(n("div",{ref_key:"$itemContainer",ref:k,class:N(o(i).contentRowClass)},[(c(!0),p(X,null,j(o(i).items,(b,re)=>(c(),p("div",{class:N(o(i).contentAppClass)},[(c(),ge(h,{ref_for:!0,ref_key:"$contentApp",ref:T,item:b,key:b.id,idx4DelayAnim:re,isFavorite:F(b.id,b.title),onOpenDetail:ze=>t("open-detail-from-list",b)},null,8,["item","idx4DelayAnim","isFavorite","onOpenDetail"]))],2))),256))],2),[[Z,!o(I)&&o(i).items.length]]),G(n("div",Ve,[(c(),p(X,null,j(3,b=>A(V,{key:b})),64)),A(ae,{w:12,h:24})],512),[[Z,o(I)]]),n("div",Re,[A(ie,{slot:"3852908076",format:"fluid",layout:"-fb+5w+4e-db+86"})]),A(oe)])}}});export{je as _};
