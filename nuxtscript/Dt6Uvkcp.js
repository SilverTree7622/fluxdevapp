import{_ as g}from"./S9S-NT7o.js";import{d as w,e as m,i as y,u as T,j as k,l as E,m as S,b as C,f as A,p as R,q as B,o as U,c as V,h as d,a as t,n as O,g as f,U as I}from"./e6MoXQDD.js";import{u as N}from"./fgFIniLu.js";import{r as j}from"./C9R-i3qr.js";import"./D2ZKPdBb.js";const L={class:"overflow-hidden w-[100vw] h-[100vh] bg-[#181818] selection:bg-black flex flex-col justify-center items-center text-white"},M={class:"flex flex-col items-center justify-center w-full"},q={class:"relative w-1/2 max-w-[300px] mt-2"},$={class:"flex items-center justify-center"},W=w({__name:"retrieve",setup(D){const s=m(),a=m(!0),{$client:p}=y(),{TOAST_SUCCESS_TIMEOUT:v,TOAST_ERROR_TIMEOUT:x}=T().public.CONSTANTS,{show:h,hide:b}=k(),_=N(),l=E(),u=S(),i=C(),r=o=>{if(!s.value)return;const e=!I.chckIsValidateEmail(s.value.value);a.value=e,o.key==="Enter"&&c()},c=async()=>{if(!s.value||a.value)return;const o=s.value.value,e=await p.user.sendTmpPwd.mutate({email:o});if(!e){i.error("데이터를 가져오는 도중 에러가 났어요. 잠시 후에 다시 시도해주세요",{timeout:x});return}if(!e.isEmailExist){console.log("data: ",e),h({msg:`
                가입되어 있지 않은 이메일이에요
                회원가입 페이지로 이동하실껀가요?
            `,btn:"yesno",onYes:()=>{u.push({path:"/auth/email"})}});return}i.success("기입하신 이메일로 임시 비밀번호를 보냈어요! 메일을 확인해주세요",{timeout:v}),await u.push("/")};return A(()=>{setTimeout(()=>{s.value&&l.query.email&&(s.value.value=l.query.email,s.value.focus(),r({}))},1)}),R((o,e,n)=>{_.beforeRouteLeave(o,e,n)}),B(()=>{b()}),(o,e)=>{const n=g;return U(),V("div",L,[d(n),e[1]||(e[1]=t("div",{class:"text-center mt-8"}," 임시 비밀번호 이메일에 발급 받기 ",-1)),t("div",M,[t("div",q,[e[0]||(e[0]=t("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none"},[t("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 16"},[t("path",{d:"m10.036 8.278 9.258-7.79A1.979 1.979 0 0 0 18 0H2A1.987 1.987 0 0 0 .641.541l9.395 7.737Z"}),t("path",{d:"M11.241 9.817c-.36.275-.801.425-1.255.427-.428 0-.845-.138-1.187-.395L0 2.6V14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2.5l-8.759 7.317Z"})])],-1)),t("div",$,[t("input",{ref_key:"$emailInput",ref:s,type:"text",id:"email-address-icon",class:"bg-gray-50 border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 text-black",placeholder:"id@email.com",onChange:r,onKeyup:r},null,544),t("button",{class:O(["font-medium rounded-lg text-sm text-center p-auto text-white flex px-2 py-2.5 ml-0.5",f(a)?"cursor-default bg-gray-700":"cursor-pointer bg-blue-700 hover:bg-blue-800"]),onClick:c},[d(f(j),{class:"h-6 w-6"})],2)])])])])}}});export{W as default};
